import{s as j,l as W,e as B,a as K,c as I,b as N,g as q,f as p,q as y,v as Y,i as b,h as w,y as L,u as x,m as $,o as ee,x as pe,C as ze,X as Me,k as R,r as Ae,D as F,p as De,w as Oe,n as be,V as T,K as Ne,t as E,d as P,Z as ce,F as Q,_ as Te,U as Ke}from"./scheduler.4ZNDCSWA.js";import{S as te,i as le,t as v,b as S,c as ne,a as ae,m as se,d as oe,e as qe,g as ye,f as ke}from"./index.xRKM1n3P.js";import{v as Ge}from"./v4.D8aEg3BZ.js";import{e as ue}from"./each.DpHudclE.js";import{C as Re}from"./DefaultButton.CEkMkJr5.js";import"./index.CW6znQrf.js";import{S as Ve}from"./SecondaryButton.yCPBUDia.js";import{S as Fe}from"./Select.CQfqzyCJ.js";import{k as O,u as Ue,d as Ze}from"./index.CK7TI6zZ.js";const Xe=l=>({}),fe=l=>({});function je(l){let e,n,s,t,f,o,c,_,i;const m=l[5].default,g=W(m,l,l[4],null),d=l[5].right,a=W(d,l,l[4],fe);return{c(){e=B("div"),n=B("input"),s=K(),t=B("label"),g&&g.c(),f=K(),o=B("span"),a&&a.c(),this.h()},l(u){e=I(u,"DIV",{class:!0,style:!0});var h=N(e);n=I(h,"INPUT",{type:!0,class:!0,id:!0}),s=q(h),t=I(h,"LABEL",{class:!0,for:!0,title:!0});var M=N(t);g&&g.l(M),M.forEach(p),f=q(h),o=I(h,"SPAN",{style:!0});var C=N(o);a&&a.l(C),C.forEach(p),h.forEach(p),this.h()},h(){y(n,"type","checkbox"),y(n,"class","govuk-checkboxes__input"),y(n,"id",l[3]),y(t,"class","govuk-label govuk-checkboxes__label"),y(t,"for",l[3]),y(t,"title",l[1]),Y(o,"float","right"),y(e,"class","govuk-checkboxes__item"),y(e,"style",l[2])},m(u,h){b(u,e,h),w(e,n),n.checked=l[0],w(e,s),w(e,t),g&&g.m(t,null),w(e,f),w(e,o),a&&a.m(o,null),c=!0,_||(i=[L(n,"change",l[7]),L(n,"change",l[6])],_=!0)},p(u,[h]){h&1&&(n.checked=u[0]),g&&g.p&&(!c||h&16)&&x(g,m,u,u[4],c?ee(m,u[4],h,null):$(u[4]),null),(!c||h&2)&&y(t,"title",u[1]),a&&a.p&&(!c||h&16)&&x(a,d,u,u[4],c?ee(d,u[4],h,Xe):$(u[4]),fe)},i(u){c||(v(g,u),v(a,u),c=!0)},o(u){S(g,u),S(a,u),c=!1},d(u){u&&p(e),g&&g.d(u),a&&a.d(u),_=!1,pe(i)}}}function He(l,e,n){let{$$slots:s={},$$scope:t}=e;const f=Me(s);let{checked:o}=e,{hint:c=null}=e,i=f.right!==void 0?"float: none":"",m=Ge();function g(a){ze.call(this,l,a)}function d(){o=this.checked,n(0,o)}return l.$$set=a=>{"checked"in a&&n(0,o=a.checked),"hint"in a&&n(1,c=a.hint),"$$scope"in a&&n(4,t=a.$$scope)},[o,c,i,m,t,s,g,d]}class dt extends te{constructor(e){super(),le(this,e,He,je,j,{checked:0,hint:1})}}function _e(l,e,n){const s=l.slice();return s[6]=e[n][0],s[7]=e[n][1],s}function Je(l){let e;return{c(){e=E("disabled")},l(n){e=P(n,"disabled")},m(n,s){b(n,e,s)},d(n){n&&p(e)}}}function Qe(l){let e;return{c(){e=E("enabled")},l(n){e=P(n,"enabled")},m(n,s){b(n,e,s)},d(n){n&&p(e)}}}function We(l){let e,n=l[7]+"",s,t;return{c(){e=E("Set "),s=E(n),t=E(` API key
      `)},l(f){e=P(f,"Set "),s=P(f,n),t=P(f,` API key
      `)},m(f,o){b(f,e,o),b(f,s,o),b(f,t,o)},p:be,d(f){f&&(p(e),p(s),p(t))}}}function de(l){let e,n=l[7]+"",s,t,f,o,c;function _(d,a){return V(d[6])?Qe:Je}let m=_(l)(l);function g(){return l[5](l[6])}return o=new Ve({props:{$$slots:{default:[We]},$$scope:{ctx:l}}}),o.$on("click",g),{c(){e=B("p"),s=E(n),t=E(`
        : `),m.c(),f=K(),ne(o.$$.fragment)},l(d){e=I(d,"P",{});var a=N(e);s=P(a,n),t=P(a,`
        : `),m.l(a),a.forEach(p),f=q(d),ae(o.$$.fragment,d)},m(d,a){b(d,e,a),w(e,s),w(e,t),m.m(e,null),b(d,f,a),se(o,d,a),c=!0},p(d,a){l=d;const u={};a&1024&&(u.$$scope={dirty:a,ctx:l}),o.$set(u)},i(d){c||(v(o.$$.fragment,d),c=!0)},o(d){S(o.$$.fragment,d),c=!1},d(d){d&&(p(e),p(f)),m.d(),oe(o,d)}}}function me(l){let e,n,s=ue([[X,"Google satellite imagery"],[U,"Bluesky satellite imagery"],[Z,"Ordnance Survey"]]),t=[];for(let o=0;o<3;o+=1)t[o]=de(_e(l,s,o));const f=o=>S(t[o],1,1,()=>{t[o]=null});return{c(){for(let o=0;o<3;o+=1)t[o].c();e=F()},l(o){for(let c=0;c<3;c+=1)t[c].l(o);e=F()},m(o,c){for(let _=0;_<3;_+=1)t[_]&&t[_].m(o,c);b(o,e,c),n=!0},p(o,c){if(c&8){s=ue([[X,"Google satellite imagery"],[U,"Bluesky satellite imagery"],[Z,"Ordnance Survey"]]);let _;for(_=0;_<3;_+=1){const i=_e(o,s,_);t[_]?(t[_].p(i,c),v(t[_],1)):(t[_]=de(i),t[_].c(),v(t[_],1),t[_].m(e.parentNode,e))}for(ye(),_=3;_<3;_+=1)f(_);ke()}},i(o){if(!n){for(let c=0;c<3;c+=1)v(t[c]);n=!0}},o(o){t=t.filter(Boolean);for(let c=0;c<3;c+=1)S(t[c]);n=!1},d(o){o&&p(e),Ne(t,o)}}}function Ye(l){let e,n,s,t,f=`If you have internal access, you can opt into higher-quality satellite
    imagery.`,o,c=l[0],_,i;function m(a){l[4](a)}let g={label:"Basemap",choices:l[1]};l[2]!==void 0&&(g.value=l[2]),e=new Fe({props:g}),Ae.push(()=>qe(e,"value",m));let d=me(l);return{c(){ne(e.$$.fragment),s=K(),t=B("p"),t.textContent=f,o=K(),d.c(),_=F()},l(a){ae(e.$$.fragment,a),s=q(a),t=I(a,"P",{"data-svelte-h":!0}),De(t)!=="svelte-itr0ad"&&(t.textContent=f),o=q(a),d.l(a),_=F()},m(a,u){se(e,a,u),b(a,s,u),b(a,t,u),b(a,o,u),d.m(a,u),b(a,_,u),i=!0},p(a,u){const h={};u&2&&(h.choices=a[1]),!n&&u&4&&(n=!0,h.value=a[2],Oe(()=>n=!1)),e.$set(h),u&1&&j(c,c=a[0])?(ye(),S(d,1,1,be),ke(),d=me(a),d.c(),v(d,1),d.m(_.parentNode,_)):d.p(a,u)},i(a){i||(v(e.$$.fragment,a),v(d),i=!0)},o(a){S(e.$$.fragment,a),S(d),i=!1},d(a){a&&(p(s),p(t),p(o),p(_)),oe(e,a),d.d(a)}}}function xe(l){let e,n;return e=new Re({props:{label:"Basemap",$$slots:{default:[Ye]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(s){ae(e.$$.fragment,s)},m(s,t){se(e,s,t),n=!0},p(s,[t]){const f={};t&1031&&(f.$$scope={dirty:t,ctx:s}),e.$set(f)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){S(e.$$.fragment,s),n=!1},d(s){oe(e,s)}}}let U="bluesky-api-key",Z="os-api-key",X="google-api-key";function V(l){let e=window.localStorage.getItem(l);return e!=null&&e.length>0}function ge(){let l=[];return V(X)&&l.push(["google","Google satellite"]),V(U)&&l.push(["bluesky","Bluesky Satellite (12.5cm)"]),V(Z)&&l.push(["os-road","Ordnance Survey MasterMap"]),l.push(["maptiler-hybrid","MapTiler Satellite"]),l.push(["maptiler-streets","MapTiler Streets"]),l.push(["maptiler-dataviz","MapTiler Dataviz"]),l.push(["maptiler-uk-openzoomstack-light","OS Open Zoomstack"]),l}function $e(l,e,n){let s;R(l,O,i=>n(2,s=i));let t=0;function f(i){let m=window.prompt("Enter the API key provided to you",window.localStorage.getItem(i)||"");window.localStorage.setItem(i,m||""),n(1,o=ge()),n(0,t+=1),m&&m.length>0&&(i==U?T(O,s="bluesky",s):i==Z?T(O,s="os-road",s):i==X&&T(O,s="google",s))}let o=ge();function c(i){s=i,O.set(s)}return[t,o,s,f,c,i=>f(i)]}class mt extends te{constructor(e){super(),le(this,e,$e,xe,j,{})}}const et=l=>({marker:l&8}),he=l=>({marker:l[3]});function tt(l){let e,n,s,t,f,o,c;const _=l[19].default,i=W(_,l,l[18],he);return{c(){e=B("div"),i&&i.c(),this.h()},l(m){e=I(m,"DIV",{tabindex:!0,role:!0});var g=N(e);i&&i.l(g),g.forEach(p),this.h()},h(){y(e,"tabindex",n=l[1]?0:void 0),y(e,"role",s=l[1]?"button":void 0),Y(e,"z-index",l[2])},m(m,g){b(m,e,g),i&&i.m(e,null),f=!0,o||(c=[ce(l[7].call(null,e)),ce(t=lt.call(null,e,l[0])),L(e,"click",Q(l[20])),L(e,"dblclick",Q(l[21])),L(e,"contextmenu",Q(l[22])),L(e,"mouseenter",l[23]),L(e,"mouseleave",l[24]),L(e,"mousemove",l[25]),L(e,"keydown",l[8])],o=!0)},p(m,[g]){i&&i.p&&(!f||g&262152)&&x(i,_,m,m[18],f?ee(_,m[18],g,et):$(m[18]),he),(!f||g&2&&n!==(n=m[1]?0:void 0))&&y(e,"tabindex",n),(!f||g&2&&s!==(s=m[1]?"button":void 0))&&y(e,"role",s),t&&Te(t.update)&&g&1&&t.update.call(null,m[0]),g&4&&Y(e,"z-index",m[2])},i(m){f||(v(i,m),f=!0)},o(m){S(i,m),f=!1},d(m){m&&p(e),i&&i.d(m),o=!1,pe(c)}}}function lt(l,e){const n=l.className;function s(t){t?l.className=`${n} ${t}`:l.className=n}return s(e),{update:s}}function nt(l,e,n){let s,t,f,{$$slots:o={},$$scope:c}=e,{marker:_=void 0}=e,{lngLat:i}=e,{class:m=void 0}=e,{interactive:g=!0}=e,{asButton:d=!1}=e,{draggable:a=!1}=e,{feature:u=null}=e,{offset:h=void 0}=e,{zIndex:M=void 0}=e,{rotation:C=0}=e,{opacity:G=1}=e;const ve=Ke(),{map:ie,layerEvent:H,self:J}=Ue();R(l,ie,r=>n(27,f=r)),R(l,H,r=>n(26,s=r)),R(l,J,r=>n(3,t=r));function Se(r){T(J,t=new Ze.Marker({element:r,rotation:C,draggable:a,offset:h,opacity:G.toString()}).setLngLat(i).addTo(f),t),n(11,_=t);const z=()=>k("dragstart"),A=()=>{re(),k("drag")},D=()=>{re(),k("dragend")};return a&&(t.on("dragstart",z),t.on("drag",A),t.on("dragend",D)),{destroy(){a&&(t==null||t.off("dragstart",z),t==null||t.off("drag",A),t==null||t.off("dragend",D)),n(11,_=void 0),t==null||t.remove()}}}function re(){let r=t==null?void 0:t.getLngLat();r&&(Array.isArray(i)?n(10,i=[r.lng,r.lat]):i&&"lon"in i?n(10,i={lon:r.lng,lat:r.lat}):n(10,i=r))}function Le(r){r.key===" "&&(r.preventDefault(),r.stopPropagation(),k("click"))}function k(r){if(!g)return;let z=t==null?void 0:t.getLngLat();if(!z)return;const A=[z.lng,z.lat];let D={map:f,marker:t,lngLat:A,features:[{type:"Feature",properties:(u==null?void 0:u.properties)??{},geometry:{type:"Point",coordinates:A}}]};T(H,s={...D,layerType:"marker",type:r},s),ve(r,D)}const Ce=()=>k("click"),we=()=>k("dblclick"),Be=()=>k("contextmenu"),Ie=r=>{k("mouseenter")},Ee=()=>{k("mouseleave")},Pe=()=>k("mousemove");return l.$$set=r=>{"marker"in r&&n(11,_=r.marker),"lngLat"in r&&n(10,i=r.lngLat),"class"in r&&n(0,m=r.class),"interactive"in r&&n(12,g=r.interactive),"asButton"in r&&n(1,d=r.asButton),"draggable"in r&&n(13,a=r.draggable),"feature"in r&&n(14,u=r.feature),"offset"in r&&n(15,h=r.offset),"zIndex"in r&&n(2,M=r.zIndex),"rotation"in r&&n(16,C=r.rotation),"opacity"in r&&n(17,G=r.opacity),"$$scope"in r&&n(18,c=r.$$scope)},l.$$.update=()=>{l.$$.dirty&1032&&(t==null||t.setLngLat(i)),l.$$.dirty&32776&&(t==null||t.setOffset(h??[0,0])),l.$$.dirty&65544&&(t==null||t.setRotation(C)),l.$$.dirty&131080&&(t==null||t.setOpacity(G.toString()))},[m,d,M,t,ie,H,J,Se,Le,k,i,_,g,a,u,h,C,G,c,o,Ce,we,Be,Ie,Ee,Pe]}class gt extends te{constructor(e){super(),le(this,e,nt,tt,j,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}export{mt as B,dt as C,gt as M};
