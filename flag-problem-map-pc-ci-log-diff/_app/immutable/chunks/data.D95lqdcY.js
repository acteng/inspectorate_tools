import{L as d,v as g,r as p}from"./authority_names.wyEHbrKT.js";import{w as o}from"./entry.CE9rWkJ4.js";import"./index.B_gktW-4.js";import"./index.B70GHQUa.js";function h(e){return e=="google"||e=="bing"}const E=o(null);function c(e){return[Math.round(e[0]*1e7)/1e7,Math.round(e[1]*1e7)/1e7]}const m=o(y());m.subscribe(e=>window.localStorage.setItem("userSettings",JSON.stringify(e)));function y(){let e={streetViewImagery:"google",avoidDoublingBack:!1};try{let t=JSON.parse(window.localStorage.getItem("userSettings")||"{}");h(t.streetViewImagery)&&(e.streetViewImagery=t.streetViewImagery),typeof t.avoidDoublingBack=="boolean"&&(e.avoidDoublingBack=t.avoidDoublingBack)}catch(t){console.log(`Couldn't parse userSettings from local storage: ${t}`)}return e}let l=[["1","1 - Cyclists are not separated from pedestrians"],["2",'2 - Barriers, steps or "Cyclist Dismount" signs are present'],["3","3 - The route is not direct, logical and intuitive"],["4","4 - Inappropriate surface materials"],["5","5 - Appropriate lighting is not provided"],["6","6 - Route does not join together with other facilities as part of a holistic, connected network"]],a=[["1","1 - Conflict at Side Roads and Priority Junctions: more than 2,500vpd cut across main walking, wheeling or cycling streams"],["2","2 - Conflict at Roundabouts and Signal Junctions: more than 2,500vpd cut across main walking, wheeling or cycling streams"],["3","3 - Lane Widths: Cyclists unprotected in 3.25-3.9m wide nearside lane"],["4","4 - Trip Hazards: Level differences more than 13mm with no tactile information and colour contrast"],["5A","5A - Kerbside Activity: Cycle facility next to parking/loading with insufficient buffer"],["5B","5B - Kerbside Activity: Unprotected cycle lane next to a frequently used bus layby"],["6A","6A - Provision of Crossings: on busy streets (more than 8,000vpd), formal crossings are more than 400m apart"],["6B","6B - Provision of Crossings: on quieter streets (less than 8,000vpd), desire lines are blocked by parking/loading"],["7A","7A - Standard of Crossings: on busy streets (more than 8,000vpd), uncontrolled crossings of 2+ lanes with no gaps in traffic"],["7B","7B - Standard of Crossings: at signal junctions, there are arms with no green man for pedestrians"],["8","8 - Motor Traffic Speed: 85th percentile speed of more than 30mph when cyclists/pedestrians are unprotected"],["9A","9A - Motor Traffic Volume: more than 1,000 vehicles in busiest hour when cyclists/pedestrians are unprotected"],["9B","9B - Motor Traffic Volume: more than 5% of traffic is HGVs where cyclists/pedestrians are unprotected and  more than 500 vehicles in busiest hour"],["10","10 - Pedestrian Crossing Speed: Pedestrians must cross at a speed faster than 1.2m/s"],["11A","11A - Footway Width: less than 1m clear width"],["11B","11B - Footway Width: 1.0-1.5m wide clear width for over 6m"],["11C","11C - Footway Width: less than 2m clear width and pedestrian comfort level is poor (PCL of D-E)"],["11D","11D - Footway Width: no footway"],["12A","12A - Effective Width next to Tram Lines: less than 2.4m effective width for cyclists from tramline edge to kerb on a straight run"],["12B","12B - Effective Width next to Tram Lines: insufficient effective width for cyclists on a curved section of tram route"],["13","13 - Crossing Angle of Tram/Train Rails: Cyclist crossing angle less than 60Â°"],["14",'14 - Cycling Surface and Maintenance Defects: Major defects (provide further information in "commentary and feedback")'],["15",'15 - Walking/Wheeling Surface and Maintenance Defects: Major defects (provide further information in "commentary and feedback")'],["16","16 - Guard Railing: used as standard without consideration of inherent safety risks"]];function D(e){if(e=="")return"";let t=l.find(r=>r[0]==e);if(t)return t[1];throw new Error(`Unknown policy conflict ${e}`)}function C(e){if(e=="")return"";let t=a.find(r=>r[0]==e);if(t)return t[1];throw new Error(`Unknown critical issue ${e}`)}function B(e){return a.findIndex(t=>t[0]==e)}function P(e){return l.findIndex(t=>t[0]==e)}function N(e){if(e=="")return"";let t=C(e).split(":")[0];return(t.startsWith("1")&&!t.startsWith("1 - ")?"SA":"SA0")+t}function R(e){return[5,6,7,9,11,12].includes(e)?`${e}A`:e.toString()}let w=o(f()),k=o(""),L=new d("route_check/",f,v,x,w,k);function M(e){return{"":0,C:0,0:0,1:1,2:2,"N/A":0}[e]}function v(e){var t;if(e.version=="alpha-0"&&(e.version="alpha-1",e.horseRiders=""),e.version!="alpha-1")throw new Error("File format appears outdated");(t=e.summary).networkMap||(t.networkMap={type:"FeatureCollection",features:[]});for(let r of e.policyConflictLog)r.stage=="Design"&&(r.resolved="");for(let r of e.criticalIssues)r.stage=="Design"&&(r.resolved="");e.criticalIssues.forEach(r=>{const i=c(r.point);r.point[0]=i[0],r.point[1]=i[1]}),e.policyConflictLog.forEach(r=>{const i=c(r.point);r.point[0]=i[0],r.point[1]=i[1]}),e.summary.authority=g(e.summary.authority)}function x(e){let t=e.summary.schemeName;return e.summary.schemeReference&&(t+=` (${e.summary.schemeReference})`),t}function f(){return{version:"alpha-1",summary:{dateDesignReview:"",schemeReference:"",schemeName:"",schemeSummary:"",schemeInfoReviewed:"",authority:"",transportOrCombinedAuthority:"",region:"",fundingProgramme:"",designStage:"",fundingConditions:"",inspectorEmail:"",assessedRouteLengthKm:0,totalRouteLengthKm:0,notes:"",checkType:"",networkMap:{type:"FeatureCollection",features:[]}},policyCheck:p(6,{existing:"",proposed:"",commentary:""}),policyConflictLog:[],safetyCheck:n(16),criticalIssues:[],streetCheck:n(26),streetPlacemakingCheck:n(26),pathCheck:n(30),horseRiders:"",pathPlacemakingCheck:n(19),jat:[],resultsReviewStatement:""}}function n(e){return{existingScores:Array(e).fill(""),proposedScores:Array(e).fill(""),existingScoreNotes:Array(e).fill(""),proposedScoreNotes:Array(e).fill("")}}function T(e){let t=e.policyCheck.map(i=>i.existing==="Yes"),r=e.policyCheck.map(i=>i.proposed==="Yes");return e.policyConflictLog.forEach(i=>{const s=Number.parseInt(i.conflict)-1;i.stage==="Existing"&&(t[s]=!1),(i.resolved==="No"||i.stage==="Design")&&(r[s]=!1)}),[t,r]}function F(e){let t=e.safetyCheck.existingScores.map(i=>i==="C"),r=e.safetyCheck.proposedScores.map(i=>i==="C");return e.criticalIssues.forEach(i=>{const s=u(i.criticalIssue);i.stage==="Existing"&&(t[s]=!1),(i.resolved==="No"||i.stage==="Design")&&(r[s]=!1)}),[t,r]}function W(e){let t=Array(e.policyCheck.length).fill(!1),r=Array(e.policyCheck.length).fill(!1);return e.policyConflictLog.forEach(i=>{const s=Number.parseInt(i.conflict)-1;i.stage==="Existing"&&e.policyCheck[s].existing!=="Yes"&&(t[s]=!0),(i.resolved==="No"||i.stage==="Design")&&e.policyCheck[s].proposed!=="Yes"&&(r[s]=!0)}),[t,r]}function V(e){let t=Array(e.safetyCheck.existingScores.length).fill(!1),r=Array(e.safetyCheck.proposedScores.length).fill(!1);return e.criticalIssues.forEach(i=>{const s=u(i.criticalIssue);i.stage==="Existing"&&e.safetyCheck.existingScores[s]!=="C"&&(t[s]=!0),(i.resolved==="No"||i.stage==="Design")&&e.safetyCheck.proposedScores[s]!=="C"&&(r[s]=!0)}),[t,r]}function u(e){const t=a.map(([i,s])=>i),r=e.toString();return t.findIndex(i=>i===r)}export{C as a,F as b,k as c,V as d,R as e,L as f,D as g,f as h,l as i,a as j,c as k,P as l,B as m,M as n,N as o,W as p,m as q,E as r,w as s,T as u};
