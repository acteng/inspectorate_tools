import{s as ke,a as F,e as N,g as E,c as B,o as K,i as C,C as Lt,z as ot,f as g,y as nn,v as ne,w as re,l as cn,t as A,b as W,d as H,x as we,T as at,h as v,ab as dn,j as ue,u as pn,p as mn,q as hn,m as Te,k as ze,W as _n,r as gn,A as Pe,n as Je,Q as $n,S as ln}from"../chunks/scheduler.D-C6hALy.js";import{S as ye,i as De,c as O,b as P,m as R,t as k,a as T,d as I,e as se,g as oe,f as fe}from"../chunks/index.D5SgZvb2.js";import{e as Q,u as ve,o as Ue,d as _t}from"../chunks/each.zNSH8vzl.js";import{S as ge,W as rn}from"../chunks/WarningButton.Ci3TmyVa.js";import{W as bn}from"../chunks/WarningText.Miib3SWf.js";import{s as Y,a as sn,b as vn}from"../chunks/data.Ci1ib5Tq.js";import{a as an,c as wn,n as kn,g as ft}from"../chunks/logic.QIc_5A2T.js";import"../chunks/paths.DX4E_4p2.js";/* empty css                                                         */import{S as Se}from"../chunks/Select.CYmKMEHN.js";import{E as yn}from"../chunks/ExternalLink.C-AzoWyS.js";import{D as Dn,C as ut}from"../chunks/DefaultButton.c7oQMUIo.js";import{E as on}from"../chunks/ErrorMessage.UoQkrBys.js";import{T as Tn}from"../chunks/TextInput.BwY6-qfm.js";import{D as Sn}from"../chunks/DecimalInput.C4zzy0l7.js";import{F as Cn,v as fn}from"../chunks/FormElement.CuJpz_qw.js";import{p as Oe}from"../chunks/index.1DG6NG61.js";function Fn(r){let e,n,t,l,s,i,a;return e=new on({props:{errorMessage:r[5](r[2])}}),{c(){O(e.$$.fragment),n=F(),t=N("input"),this.h()},l(o){P(e.$$.fragment,o),n=E(o),t=B(o,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){K(t,"type","text"),K(t,"inputmode","numeric"),K(t,"class",l=`govuk-input govuk-input--width-${r[1]}`),K(t,"id",r[3])},m(o,f){R(e,o,f),C(o,n,f),C(o,t,f),Lt(t,r[2]),s=!0,i||(a=[ot(t,"input",r[9]),ot(t,"change",r[4])],i=!0)},p(o,f){const b={};f&4&&(b.errorMessage=o[5](o[2])),e.$set(b),(!s||f&2&&l!==(l=`govuk-input govuk-input--width-${o[1]}`))&&K(t,"class",l),f&4&&t.value!==o[2]&&Lt(t,o[2])},i(o){s||(k(e.$$.fragment,o),s=!0)},o(o){T(e.$$.fragment,o),s=!1},d(o){o&&(g(n),g(t)),I(e,o),i=!1,nn(a)}}}function En(r){let e,n;return e=new Cn({props:{label:r[0],id:r[3],$$slots:{default:[Fn]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,[l]){const s={};l&1&&(s.label=t[0]),l&1030&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Ln(r,e,n){let{label:t}=e,{value:l}=e,{width:s}=e,{min:i=void 0}=e,{max:a=void 0}=e,o=l==null?void 0:l.toString(),f=fn();function b(){n(6,l=o==null?void 0:parseInt(o,10))}function u(h){if(h==""||h==null)return"";if(h.includes("."))return"Please enter a number without decimals";let p=Number(h);return isNaN(p)?"Please enter a valid number":i!=null&&p<i?`Please enter a number that's at least ${i};`:a!=null&&p>a?`Please enter a number that's at most ${a};`:""}function m(){o=this.value,n(2,o)}return r.$$set=h=>{"label"in h&&n(0,t=h.label),"value"in h&&n(6,l=h.value),"width"in h&&n(1,s=h.width),"min"in h&&n(7,i=h.min),"max"in h&&n(8,a=h.max)},[t,s,o,f,b,u,l,i,a,m]}class Nn extends ye{constructor(e){super(),De(this,e,Ln,En,ke,{label:0,value:6,width:1,min:7,max:8})}}function Bn(r){let e,n,t;function l(i){r[9](i)}let s={label:r[0],hint:r[1],choices:r[5],emptyOption:r[2],disabled:r[3]};return r[4]!==void 0&&(s.value=r[4]),e=new Se({props:s}),ne.push(()=>se(e,"value",l)),e.$on("change",r[6]),{c(){O(e.$$.fragment)},l(i){P(e.$$.fragment,i)},m(i,a){R(e,i,a),t=!0},p(i,[a]){const o={};a&1&&(o.label=i[0]),a&2&&(o.hint=i[1]),a&32&&(o.choices=i[5]),a&4&&(o.emptyOption=i[2]),a&8&&(o.disabled=i[3]),!n&&a&16&&(n=!0,o.value=i[4],re(()=>n=!1)),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){T(e.$$.fragment,i),t=!1},d(i){I(e,i)}}}function Mn(r){return r.map(e=>[JSON.stringify(e[0]),e[1]])}function Wn(r,e,n){let t,l,{label:s}=e,{hint:i=""}=e,{choices:a}=e,{emptyOption:o=!1}=e,{disabled:f=!1}=e,{value:b}=e;function u(){n(7,b=l==""?"":JSON.parse(l))}function m(h){l=h,n(4,l),n(7,b)}return r.$$set=h=>{"label"in h&&n(0,s=h.label),"hint"in h&&n(1,i=h.hint),"choices"in h&&n(8,a=h.choices),"emptyOption"in h&&n(2,o=h.emptyOption),"disabled"in h&&n(3,f=h.disabled),"value"in h&&n(7,b=h.value)},r.$$.update=()=>{r.$$.dirty&256&&n(5,t=Mn(a)),r.$$.dirty&128&&n(4,l=JSON.stringify(b))},[s,i,o,f,l,t,u,b,a,m]}class On extends ye{constructor(e){super(),De(this,e,Wn,Bn,ke,{label:0,hint:1,choices:8,emptyOption:2,disabled:3,value:7})}}function Nt(r){let e,n;return e=new ge({props:{$$slots:{default:[Pn]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){O(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,l){const s={};l&128&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Pn(r){let e;return{c(){e=A("X")},l(n){e=H(n,"X")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function Rn(r){let e,n,t,l,s,i,a,o,f,b,u=r[2]&&Nt(r);const m=r[4].default,h=cn(m,r,r[7],null);return{c(){e=N("div"),n=N("div"),t=N("div"),l=N("h1"),s=A(r[1]),i=F(),u&&u.c(),a=F(),h&&h.c(),this.h()},l(p){e=B(p,"DIV",{class:!0});var d=W(e);n=B(d,"DIV",{class:!0});var w=W(n);t=B(w,"DIV",{style:!0});var $=W(t);l=B($,"H1",{class:!0});var M=W(l);s=H(M,r[1]),M.forEach(g),i=E($),u&&u.l($),$.forEach(g),a=E(w),h&&h.l(w),w.forEach(g),d.forEach(g),this.h()},h(){K(l,"class","govuk-heading-l"),we(t,"display","flex"),we(t,"justify-content","space-between"),K(n,"class","content centered-fullscreen svelte-1bl3d9w"),K(e,"class","background svelte-1bl3d9w"),at(e,"open",r[0]),at(e,"closed",!r[0])},m(p,d){C(p,e,d),v(e,n),v(n,t),v(t,l),v(l,s),v(t,i),u&&u.m(t,null),v(n,a),h&&h.m(n,null),o=!0,f||(b=[ot(n,"click",dn(In)),ot(e,"click",r[6])],f=!0)},p(p,[d]){(!o||d&2)&&ue(s,p[1]),p[2]?u?(u.p(p,d),d&4&&k(u,1)):(u=Nt(p),u.c(),k(u,1),u.m(t,null)):u&&(oe(),T(u,1,1,()=>{u=null}),fe()),h&&h.p&&(!o||d&128)&&pn(h,m,p,p[7],o?hn(m,p[7],d,null):mn(p[7]),null),(!o||d&1)&&at(e,"open",p[0]),(!o||d&1)&&at(e,"closed",!p[0])},i(p){o||(k(u),k(h,p),o=!0)},o(p){T(u),T(h,p),o=!1},d(p){p&&g(e),u&&u.d(),h&&h.d(p),f=!1,nn(b)}}}const In=()=>null;function qn(r,e,n){let{$$slots:t={},$$scope:l}=e,{title:s}=e,{open:i=!1}=e,{displayEscapeButton:a=!0}=e,{canCloseByClickingBackground:o=!0}=e;const f=()=>n(0,i=!1),b=()=>{o&&n(0,i=!1)};return r.$$set=u=>{"title"in u&&n(1,s=u.title),"open"in u&&n(0,i=u.open),"displayEscapeButton"in u&&n(2,a=u.displayEscapeButton),"canCloseByClickingBackground"in u&&n(3,o=u.canCloseByClickingBackground),"$$scope"in u&&n(7,l=u.$$scope)},[i,s,a,o,t,f,b,l]}class Vn extends ye{constructor(e){super(),De(this,e,qn,Rn,ke,{title:1,open:0,displayEscapeButton:2,canCloseByClickingBackground:3})}}function Bt(r){return typeof r=="object"||r==""?[]:jn[r]}let jn={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",ae(76)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",ae(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",ae(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",ae(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",ae(54)]]};function ae(r){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${r}`}function Mt(r,e){let n=an(e.speedLimit,e.observedSpeed);switch(r){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&n==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&n==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return n==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":n==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":n==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return n==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":n==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":n==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Wt(r,e,n){const t=r.slice();return t[19]=e[n],t[21]=n,t}function Ot(r,e,n){const t=r.slice();return t[19]=e[n],t[21]=n,t}function Pt(r,e,n){const t=r.slice();return t[23]=e[n][0],t[24]=e[n][1],t}function Rt(r,e,n){const t=r.slice();t[19]=e[n],t[21]=n;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const s=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=s,t}function It(r,e,n){const t=r.slice();t[19]=e[n],t[21]=n;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const s=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=s,t}function qt(r,e,n){const t=r.slice();t[19]=e[n],t[21]=n;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const s=t[21]==t[0].length-1?"":t[0][t[21]+1];t[28]=s;const i=kn(t[19],t[27],t[28]);return t[31]=i,t}function Vt(r,e,n){const t=r.slice();return t[19]=e[n],t[33]=e,t[21]=n,t}function jt(r,e,n){const t=r.slice();return t[19]=e[n],t[21]=n,t}function An(r){let e;return{c(){e=A("Add feature")},l(n){e=H(n,"Add feature")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function Hn(r){let e;return{c(){e=A("←")},l(n){e=H(n,"←")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function Un(r){let e;return{c(){e=A("Delete")},l(n){e=H(n,"Delete")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function Jn(r){let e;return{c(){e=A("→")},l(n){e=H(n,"→")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function At(r,e){let n,t,l,s,i,a,o,f,b;function u(){return e[11](e[21])}l=new ge({props:{disabled:e[21]==0,$$slots:{default:[Hn]},$$scope:{ctx:e}}}),l.$on("click",u);function m(){return e[12](e[21])}i=new rn({props:{$$slots:{default:[Un]},$$scope:{ctx:e}}}),i.$on("click",m);function h(){return e[13](e[21])}return o=new ge({props:{disabled:e[21]==e[0].length-1,$$slots:{default:[Jn]},$$scope:{ctx:e}}}),o.$on("click",h),{key:r,first:null,c(){n=N("td"),t=N("div"),O(l.$$.fragment),s=F(),O(i.$$.fragment),a=F(),O(o.$$.fragment),f=F(),this.h()},l(p){n=B(p,"TD",{class:!0});var d=W(n);t=B(d,"DIV",{style:!0});var w=W(t);P(l.$$.fragment,w),s=E(w),P(i.$$.fragment,w),a=E(w),P(o.$$.fragment,w),w.forEach(g),f=E(d),d.forEach(g),this.h()},h(){we(t,"display","flex"),we(t,"justify-content","space-between"),K(n,"class","svelte-18bftjb"),this.first=n},m(p,d){C(p,n,d),v(n,t),R(l,t,null),v(t,s),R(i,t,null),v(t,a),R(o,t,null),v(n,f),b=!0},p(p,d){e=p;const w={};d[0]&1&&(w.disabled=e[21]==0),d[1]&16&&(w.$$scope={dirty:d,ctx:e}),l.$set(w);const $={};d[1]&16&&($.$$scope={dirty:d,ctx:e}),i.$set($);const M={};d[0]&1&&(M.disabled=e[21]==e[0].length-1),d[1]&16&&(M.$$scope={dirty:d,ctx:e}),o.$set(M)},i(p){b||(k(l.$$.fragment,p),k(i.$$.fragment,p),k(o.$$.fragment,p),b=!0)},o(p){T(l.$$.fragment,p),T(i.$$.fragment,p),T(o.$$.fragment,p),b=!1},d(p){p&&g(n),I(l),I(i),I(o)}}}function Ht(r,e){let n,t,l,s,i;function a(f){e[14](f,e[19],e[33],e[21])}let o={label:"Street feature type",emptyOption:!0,choices:e[3]};return e[19]!==void 0&&(o.value=e[19]),t=new On({props:o}),ne.push(()=>se(t,"value",a)),{key:r,first:null,c(){n=N("td"),O(t.$$.fragment),s=F(),this.h()},l(f){n=B(f,"TD",{class:!0});var b=W(n);P(t.$$.fragment,b),s=E(b),b.forEach(g),this.h()},h(){K(n,"class","svelte-18bftjb"),this.first=n},m(f,b){C(f,n,b),R(t,n,null),v(n,s),i=!0},p(f,b){e=f;const u={};b[0]&8&&(u.choices=e[3]),!l&&b[0]&1&&(l=!0,u.value=e[19],re(()=>l=!1)),t.$set(u)},i(f){i||(k(t.$$.fragment,f),i=!0)},o(f){T(t.$$.fragment,f),i=!1},d(f){f&&g(n),I(t)}}}function Ut(r){let e,n;return e=new bn({props:{$$slots:{default:[Gn]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,l){const s={};l[0]&1|l[1]&16&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function zn(r){let e;return{c(){e=A("Add")},l(n){e=H(n,"Add")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function Gn(r){let e=r[31].warning+"",n,t,l,s;function i(){return r[15](r[21],r[31])}return l=new ge({props:{style:"margin-bottom: 0px; float: right",$$slots:{default:[zn]},$$scope:{ctx:r}}}),l.$on("click",i),{c(){n=A(e),t=F(),O(l.$$.fragment)},l(a){n=H(a,e),t=E(a),P(l.$$.fragment,a)},m(a,o){C(a,n,o),C(a,t,o),R(l,a,o),s=!0},p(a,o){r=a,(!s||o[0]&1)&&e!==(e=r[31].warning+"")&&ue(n,e);const f={};o[1]&16&&(f.$$scope={dirty:o,ctx:r}),l.$set(f)},i(a){s||(k(l.$$.fragment,a),s=!0)},o(a){T(l.$$.fragment,a),s=!1},d(a){a&&(g(n),g(t)),I(l,a)}}}function Jt(r,e){let n,t,l,s=e[31].warning!=""&&Ut(e);return{key:r,first:null,c(){n=N("td"),s&&s.c(),t=F(),this.h()},l(i){n=B(i,"TD",{class:!0});var a=W(n);s&&s.l(a),t=E(a),a.forEach(g),this.h()},h(){K(n,"class","svelte-18bftjb"),this.first=n},m(i,a){C(i,n,a),s&&s.m(n,null),v(n,t),l=!0},p(i,a){e=i,e[31].warning!=""?s?(s.p(e,a),a[0]&1&&k(s,1)):(s=Ut(e),s.c(),k(s,1),s.m(n,t)):s&&(oe(),T(s,1,1,()=>{s=null}),fe())},i(i){l||(k(s),l=!0)},o(i){T(s),l=!1},d(i){i&&g(n),s&&s.d()}}}function zt(r,e){let n,t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"",l,s;return{key:r,first:null,c(){n=N("td"),l=A(t),s=F(),this.h()},l(i){n=B(i,"TD",{class:!0});var a=W(n);l=H(a,t),s=E(a),a.forEach(g),this.h()},h(){K(n,"class","svelte-18bftjb"),this.first=n},m(i,a){C(i,n,a),v(n,l),v(n,s)},p(i,a){e=i,a[0]&3&&t!==(t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"")&&ue(l,t)},d(i){i&&g(n)}}}function Gt(r,e){let n,t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"",l,s;return{key:r,first:null,c(){n=N("td"),l=A(t),s=F(),this.h()},l(i){n=B(i,"TD",{class:!0});var a=W(n);l=H(a,t),s=E(a),a.forEach(g),this.h()},h(){K(n,"class","svelte-18bftjb"),this.first=n},m(i,a){C(i,n,a),v(n,l),v(n,s)},p(i,a){e=i,a[0]&3&&t!==(t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"")&&ue(l,t)},d(i){i&&g(n)}}}function Xn(r){let e,n=r[23]+"",t;return{c(){e=N("li"),t=A(n)},l(l){e=B(l,"LI",{});var s=W(e);t=H(s,n),s.forEach(g)},m(l,s){C(l,e,s),v(e,t)},p(l,s){s[0]&1&&n!==(n=l[23]+"")&&ue(t,n)},i:Je,o:Je,d(l){l&&g(e)}}}function Qn(r){let e,n,t;return n=new yn({props:{href:r[24],$$slots:{default:[Yn]},$$scope:{ctx:r}}}),{c(){e=N("li"),O(n.$$.fragment)},l(l){e=B(l,"LI",{});var s=W(e);P(n.$$.fragment,s),s.forEach(g)},m(l,s){C(l,e,s),R(n,e,null),t=!0},p(l,s){const i={};s[0]&1&&(i.href=l[24]),s[0]&1|s[1]&16&&(i.$$scope={dirty:s,ctx:l}),n.$set(i)},i(l){t||(k(n.$$.fragment,l),t=!0)},o(l){T(n.$$.fragment,l),t=!1},d(l){l&&g(e),I(n)}}}function Yn(r){let e=r[23]+"",n;return{c(){n=A(e)},l(t){n=H(t,e)},m(t,l){C(t,n,l)},p(t,l){l[0]&1&&e!==(e=t[23]+"")&&ue(n,e)},d(t){t&&g(n)}}}function Xt(r){let e,n,t,l;const s=[Qn,Xn],i=[];function a(o,f){return o[24]?0:1}return e=a(r),n=i[e]=s[e](r),{c(){n.c(),t=Pe()},l(o){n.l(o),t=Pe()},m(o,f){i[e].m(o,f),C(o,t,f),l=!0},p(o,f){let b=e;e=a(o),e===b?i[e].p(o,f):(oe(),T(i[b],1,1,()=>{i[b]=null}),fe(),n=i[e],n?n.p(o,f):(n=i[e]=s[e](o),n.c()),k(n,1),n.m(t.parentNode,t))},i(o){l||(k(n),l=!0)},o(o){T(n),l=!1},d(o){o&&g(t),i[e].d(o)}}}function Qt(r,e){let n,t,l,s,i=Q(Bt(e[19])),a=[];for(let f=0;f<i.length;f+=1)a[f]=Xt(Pt(e,i,f));const o=f=>T(a[f],1,1,()=>{a[f]=null});return{key:r,first:null,c(){n=N("td"),t=N("ul");for(let f=0;f<a.length;f+=1)a[f].c();l=F(),this.h()},l(f){n=B(f,"TD",{class:!0});var b=W(n);t=B(b,"UL",{});var u=W(t);for(let m=0;m<a.length;m+=1)a[m].l(u);u.forEach(g),l=E(b),b.forEach(g),this.h()},h(){K(n,"class","svelte-18bftjb"),this.first=n},m(f,b){C(f,n,b),v(n,t);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null);v(n,l),s=!0},p(f,b){if(e=f,b[0]&1){i=Q(Bt(e[19]));let u;for(u=0;u<i.length;u+=1){const m=Pt(e,i,u);a[u]?(a[u].p(m,b),k(a[u],1)):(a[u]=Xt(m),a[u].c(),k(a[u],1),a[u].m(t,null))}for(oe(),u=i.length;u<a.length;u+=1)o(u);fe()}},i(f){if(!s){for(let b=0;b<i.length;b+=1)k(a[b]);s=!0}},o(f){a=a.filter(Boolean);for(let b=0;b<a.length;b+=1)T(a[b]);s=!1},d(f){f&&g(n),gn(a,f)}}}function Yt(r,e){let n,t,l=Mt(e[19],e[1].proposed.trafficData)+"",s,i;return{key:r,first:null,c(){n=N("td"),t=N("p"),s=A(l),i=F(),this.h()},l(a){n=B(a,"TD",{class:!0});var o=W(n);t=B(o,"P",{style:!0});var f=W(t);s=H(f,l),f.forEach(g),i=E(o),o.forEach(g),this.h()},h(){we(t,"max-width","400px"),K(n,"class","svelte-18bftjb"),this.first=n},m(a,o){C(a,n,o),v(n,t),v(t,s),v(n,i)},p(a,o){e=a,o[0]&3&&l!==(l=Mt(e[19],e[1].proposed.trafficData)+"")&&ue(s,l)},d(a){a&&g(n)}}}function Kn(r){let e,n,t,l,s,i=r[4][0].toFixed(2)+"",a,o,f,b,u,m=r[4][1].toFixed(2)+"",h,p,d,w,$,M,j,L=[],J=new Map,S,q,Z,ce="Street Feature",Re,G=[],Ge=new Map,Ce,de,me,Xe="Buffers",Fe,V=[],Qe=new Map,Ee,pe,he,Ye="Desirable minimum width (m)",Le,D=[],X=new Map,x,z,_e,Ie="Absolute minimum width (m)",Ne,ee=[],qe=new Map,ct,$e,Be,gt="References",dt,te=[],$t=new Map,pt,be,Me,bt="Guidance",mt,ie=[],vt=new Map,We;e=new ge({props:{$$slots:{default:[An]},$$scope:{ctx:r}}}),e.$on("click",r[5]);let Ve=Q(r[0]);const wt=c=>c[21];for(let c=0;c<Ve.length;c+=1){let _=jt(r,Ve,c),y=wt(_);J.set(y,L[c]=At(y,_))}let je=Q(r[0]);const kt=c=>c[21];for(let c=0;c<je.length;c+=1){let _=Vt(r,je,c),y=kt(_);Ge.set(y,G[c]=Ht(y,_))}let Ae=Q(r[0]);const yt=c=>c[21];for(let c=0;c<Ae.length;c+=1){let _=qt(r,Ae,c),y=yt(_);Qe.set(y,V[c]=Jt(y,_))}let Ke=Q(r[0]);const Dt=c=>c[21];for(let c=0;c<Ke.length;c+=1){let _=It(r,Ke,c),y=Dt(_);X.set(y,D[c]=zt(y,_))}let Ze=Q(r[0]);const Tt=c=>c[21];for(let c=0;c<Ze.length;c+=1){let _=Rt(r,Ze,c),y=Tt(_);qe.set(y,ee[c]=Gt(y,_))}let He=Q(r[0]);const St=c=>c[21];for(let c=0;c<He.length;c+=1){let _=Ot(r,He,c),y=St(_);$t.set(y,te[c]=Qt(y,_))}let xe=Q(r[0]);const Ct=c=>c[21];for(let c=0;c<xe.length;c+=1){let _=Wt(r,xe,c),y=Ct(_);vt.set(y,ie[c]=Yt(y,_))}return{c(){O(e.$$.fragment),n=F(),t=N("p"),l=A("Desirable minimum total width required (m): "),s=N("b"),a=A(i),o=F(),f=N("p"),b=A("Absolute minimum total width required (m): "),u=N("b"),h=A(m),p=F(),d=N("div"),w=N("table"),$=N("tr"),M=N("th"),j=F();for(let c=0;c<L.length;c+=1)L[c].c();S=F(),q=N("tr"),Z=N("th"),Z.textContent=ce,Re=F();for(let c=0;c<G.length;c+=1)G[c].c();Ce=F(),de=N("tr"),me=N("th"),me.textContent=Xe,Fe=F();for(let c=0;c<V.length;c+=1)V[c].c();Ee=F(),pe=N("tr"),he=N("th"),he.textContent=Ye,Le=F();for(let c=0;c<D.length;c+=1)D[c].c();x=F(),z=N("tr"),_e=N("th"),_e.textContent=Ie,Ne=F();for(let c=0;c<ee.length;c+=1)ee[c].c();ct=F(),$e=N("tr"),Be=N("th"),Be.textContent=gt,dt=F();for(let c=0;c<te.length;c+=1)te[c].c();pt=F(),be=N("tr"),Me=N("th"),Me.textContent=bt,mt=F();for(let c=0;c<ie.length;c+=1)ie[c].c();this.h()},l(c){P(e.$$.fragment,c),n=E(c),t=B(c,"P",{});var _=W(t);l=H(_,"Desirable minimum total width required (m): "),s=B(_,"B",{});var y=W(s);a=H(y,i),y.forEach(g),_.forEach(g),o=E(c),f=B(c,"P",{});var ht=W(f);b=H(ht,"Absolute minimum total width required (m): "),u=B(ht,"B",{});var Ft=W(u);h=H(Ft,m),Ft.forEach(g),ht.forEach(g),p=E(c),d=B(c,"DIV",{style:!0});var Et=W(d);w=B(Et,"TABLE",{});var le=W(w);$=B(le,"TR",{});var et=W($);M=B(et,"TH",{}),W(M).forEach(g),j=E(et);for(let U=0;U<L.length;U+=1)L[U].l(et);et.forEach(g),S=E(le),q=B(le,"TR",{});var tt=W(q);Z=B(tt,"TH",{"data-svelte-h":!0}),Te(Z)!=="svelte-16tcugb"&&(Z.textContent=ce),Re=E(tt);for(let U=0;U<G.length;U+=1)G[U].l(tt);tt.forEach(g),Ce=E(le),de=B(le,"TR",{});var nt=W(de);me=B(nt,"TH",{"data-svelte-h":!0}),Te(me)!=="svelte-11hw9wb"&&(me.textContent=Xe),Fe=E(nt);for(let U=0;U<V.length;U+=1)V[U].l(nt);nt.forEach(g),Ee=E(le),pe=B(le,"TR",{});var lt=W(pe);he=B(lt,"TH",{"data-svelte-h":!0}),Te(he)!=="svelte-i7hz1h"&&(he.textContent=Ye),Le=E(lt);for(let U=0;U<D.length;U+=1)D[U].l(lt);lt.forEach(g),x=E(le),z=B(le,"TR",{});var rt=W(z);_e=B(rt,"TH",{"data-svelte-h":!0}),Te(_e)!=="svelte-zhiq21"&&(_e.textContent=Ie),Ne=E(rt);for(let U=0;U<ee.length;U+=1)ee[U].l(rt);rt.forEach(g),ct=E(le),$e=B(le,"TR",{});var st=W($e);Be=B(st,"TH",{"data-svelte-h":!0}),Te(Be)!=="svelte-o075z0"&&(Be.textContent=gt),dt=E(st);for(let U=0;U<te.length;U+=1)te[U].l(st);st.forEach(g),pt=E(le),be=B(le,"TR",{});var it=W(be);Me=B(it,"TH",{"data-svelte-h":!0}),Te(Me)!=="svelte-pnu4jc"&&(Me.textContent=bt),mt=E(it);for(let U=0;U<ie.length;U+=1)ie[U].l(it);it.forEach(g),le.forEach(g),Et.forEach(g),this.h()},h(){we(d,"display","flex"),we(d,"flex-direction","row"),we(d,"overflow-x","scroll")},m(c,_){R(e,c,_),C(c,n,_),C(c,t,_),v(t,l),v(t,s),v(s,a),C(c,o,_),C(c,f,_),v(f,b),v(f,u),v(u,h),C(c,p,_),C(c,d,_),v(d,w),v(w,$),v($,M),v($,j);for(let y=0;y<L.length;y+=1)L[y]&&L[y].m($,null);v(w,S),v(w,q),v(q,Z),v(q,Re);for(let y=0;y<G.length;y+=1)G[y]&&G[y].m(q,null);v(w,Ce),v(w,de),v(de,me),v(de,Fe);for(let y=0;y<V.length;y+=1)V[y]&&V[y].m(de,null);v(w,Ee),v(w,pe),v(pe,he),v(pe,Le);for(let y=0;y<D.length;y+=1)D[y]&&D[y].m(pe,null);v(w,x),v(w,z),v(z,_e),v(z,Ne);for(let y=0;y<ee.length;y+=1)ee[y]&&ee[y].m(z,null);v(w,ct),v(w,$e),v($e,Be),v($e,dt);for(let y=0;y<te.length;y+=1)te[y]&&te[y].m($e,null);v(w,pt),v(w,be),v(be,Me),v(be,mt);for(let y=0;y<ie.length;y+=1)ie[y]&&ie[y].m(be,null);r[16](d),We=!0},p(c,_){const y={};_[1]&16&&(y.$$scope={dirty:_,ctx:c}),e.$set(y),(!We||_[0]&16)&&i!==(i=c[4][0].toFixed(2)+"")&&ue(a,i),(!We||_[0]&16)&&m!==(m=c[4][1].toFixed(2)+"")&&ue(h,m),_[0]&449&&(Ve=Q(c[0]),oe(),L=ve(L,_,wt,1,c,Ve,J,$,Ue,At,null,jt),fe()),_[0]&9&&(je=Q(c[0]),oe(),G=ve(G,_,kt,1,c,je,Ge,q,Ue,Ht,null,Vt),fe()),_[0]&513&&(Ae=Q(c[0]),oe(),V=ve(V,_,yt,1,c,Ae,Qe,de,Ue,Jt,null,qt),fe()),_[0]&3&&(Ke=Q(c[0]),D=ve(D,_,Dt,1,c,Ke,X,pe,_t,zt,null,It)),_[0]&3&&(Ze=Q(c[0]),ee=ve(ee,_,Tt,1,c,Ze,qe,z,_t,Gt,null,Rt)),_[0]&1&&(He=Q(c[0]),oe(),te=ve(te,_,St,1,c,He,$t,$e,Ue,Qt,null,Ot),fe()),_[0]&3&&(xe=Q(c[0]),ie=ve(ie,_,Ct,1,c,xe,vt,be,_t,Yt,null,Wt))},i(c){if(!We){k(e.$$.fragment,c);for(let _=0;_<Ve.length;_+=1)k(L[_]);for(let _=0;_<je.length;_+=1)k(G[_]);for(let _=0;_<Ae.length;_+=1)k(V[_]);for(let _=0;_<He.length;_+=1)k(te[_]);We=!0}},o(c){T(e.$$.fragment,c);for(let _=0;_<L.length;_+=1)T(L[_]);for(let _=0;_<G.length;_+=1)T(G[_]);for(let _=0;_<V.length;_+=1)T(V[_]);for(let _=0;_<te.length;_+=1)T(te[_]);We=!1},d(c){c&&(g(n),g(t),g(o),g(f),g(p),g(d)),I(e,c);for(let _=0;_<L.length;_+=1)L[_].d();for(let _=0;_<G.length;_+=1)G[_].d();for(let _=0;_<V.length;_+=1)V[_].d();for(let _=0;_<D.length;_+=1)D[_].d();for(let _=0;_<ee.length;_+=1)ee[_].d();for(let _=0;_<te.length;_+=1)te[_].d();for(let _=0;_<ie.length;_+=1)ie[_].d();r[16](null)}}}function Zn(r,e,n){let t,l,s;ze(r,Y,S=>n(1,s=S));let{streetFeaturesLeftToRight:i}=e,{sectionType:a}=e,o,f=!1;_n(()=>{f&&(f=!1,n(2,o.scrollLeft=o.scrollWidth,o))});function b(){n(0,i=[...i,""]),f=!0}function u(S){i.splice(S,1),n(0,i)}function m(S){n(0,[i[S-1],i[S]]=[i[S],i[S-1]],i)}function h(S){n(0,[i[S+1],i[S]]=[i[S],i[S+1]],i)}function p(S){let q=sn.map(Z=>[Z,Z]);for(let[Z,ce]of Object.entries(S))q.push([{custom:Z},`Custom: ${ce.name}`]);return q}function d(S,q){(q=="right"||q=="both")&&i.splice(S+1,0,"Buffer / Verge"),(q=="left"||q=="both")&&i.splice(S,0,"Buffer / Verge"),n(0,i)}const w=S=>m(S),$=S=>u(S),M=S=>h(S);function j(S,q,Z,ce){Z[ce]=S,n(0,i)}const L=(S,q)=>d(S,q.fix);function J(S){ne[S?"unshift":"push"](()=>{o=S,n(2,o)})}return r.$$set=S=>{"streetFeaturesLeftToRight"in S&&n(0,i=S.streetFeaturesLeftToRight),"sectionType"in S&&n(10,a=S.sectionType)},r.$$.update=()=>{r.$$.dirty[0]&1026&&n(4,t=wn(s,a)),r.$$.dirty[0]&2&&n(3,l=p(s.proposed.customFeatures))},[i,s,o,l,t,b,u,m,h,d,a,w,$,M,j,L,J]}class un extends ye{constructor(e){super(),De(this,e,Zn,Kn,ke,{streetFeaturesLeftToRight:0,sectionType:10},null,[-1,-1])}}function xn(r){let e;return{c(){e=A("Confirm")},l(n){e=H(n,"Confirm")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function el(r){let e;return{c(){e=A("Cancel")},l(n){e=H(n,"Cancel")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function tl(r){let e,n,t,l,s,i,a,o,f,b,u,m;function h($){r[6]($)}let p={label:"Name"};r[0]!==void 0&&(p.value=r[0]),e=new Tn({props:p}),ne.push(()=>se(e,"value",h));function d($){r[7]($)}let w={label:"Minimum width (m)",width:4,min:0};return r[1]!==void 0&&(w.value=r[1]),l=new Sn({props:w}),ne.push(()=>se(l,"value",d)),a=new on({props:{errorMessage:r[2]}}),f=new Dn({props:{disabled:r[2]!="",$$slots:{default:[xn]},$$scope:{ctx:r}}}),f.$on("click",r[8]),u=new ge({props:{$$slots:{default:[el]},$$scope:{ctx:r}}}),u.$on("click",r[9]),{c(){O(e.$$.fragment),t=F(),O(l.$$.fragment),i=F(),O(a.$$.fragment),o=F(),O(f.$$.fragment),b=F(),O(u.$$.fragment)},l($){P(e.$$.fragment,$),t=E($),P(l.$$.fragment,$),i=E($),P(a.$$.fragment,$),o=E($),P(f.$$.fragment,$),b=E($),P(u.$$.fragment,$)},m($,M){R(e,$,M),C($,t,M),R(l,$,M),C($,i,M),R(a,$,M),C($,o,M),R(f,$,M),C($,b,M),R(u,$,M),m=!0},p($,M){const j={};!n&&M&1&&(n=!0,j.value=$[0],re(()=>n=!1)),e.$set(j);const L={};!s&&M&2&&(s=!0,L.value=$[1],re(()=>s=!1)),l.$set(L);const J={};M&4&&(J.errorMessage=$[2]),a.$set(J);const S={};M&4&&(S.disabled=$[2]!=""),M&4096&&(S.$$scope={dirty:M,ctx:$}),f.$set(S);const q={};M&4096&&(q.$$scope={dirty:M,ctx:$}),u.$set(q)},i($){m||(k(e.$$.fragment,$),k(l.$$.fragment,$),k(a.$$.fragment,$),k(f.$$.fragment,$),k(u.$$.fragment,$),m=!0)},o($){T(e.$$.fragment,$),T(l.$$.fragment,$),T(a.$$.fragment,$),T(f.$$.fragment,$),T(u.$$.fragment,$),m=!1},d($){$&&(g(t),g(i),g(o),g(b)),I(e,$),I(l,$),I(a,$),I(f,$),I(u,$)}}}function nl(r){let e,n;return e=new Vn({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[tl]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,[l]){const s={};l&4103&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function ll(r,e,n){let t,l;ze(r,Y,d=>n(10,l=d));let{initialName:s}=e,{initialWidth:i}=e,a=$n(),o=s,f=i;function b(d,w){return d==""?"Name must be specified":d!=s&&Object.values(l.proposed.customFeatures).some($=>$.name==d)?"That name is already used by another custom feature":sn.includes(d)?"That name is the same as one of the built-in features":isNaN(w)?"Enter a valid width":w<=0?"Enter a positive width":""}function u(d){o=d,n(0,o)}function m(d){f=d,n(1,f)}const h=()=>a("confirm",{name:o,width:f}),p=()=>a("cancel");return r.$$set=d=>{"initialName"in d&&n(4,s=d.initialName),"initialWidth"in d&&n(5,i=d.initialWidth)},r.$$.update=()=>{r.$$.dirty&3&&n(2,t=b(o,f))},[o,f,t,a,s,i,u,m,h,p]}class rl extends ye{constructor(e){super(),De(this,e,ll,nl,ke,{initialName:4,initialWidth:5})}}function Kt(r,e,n){const t=r.slice();return t[9]=e[n],t}function sl(r){let e;return{c(){e=A("Add feature")},l(n){e=H(n,"Add feature")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function il(r){let e;return{c(){e=A("Edit")},l(n){e=H(n,"Edit")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function al(r){let e;return{c(){e=A("Delete")},l(n){e=H(n,"Delete")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function Zt(r,e){let n,t,l,s=e[1].proposed.customFeatures[e[9]].name+"",i,a,o=e[1].proposed.customFeatures[e[9]].width+"",f,b,u,m,h,p,d,w;function $(){return e[6](e[9])}m=new ge({props:{$$slots:{default:[il]},$$scope:{ctx:e}}}),m.$on("click",$);function M(){return e[7](e[9])}return p=new rn({props:{$$slots:{default:[al]},$$scope:{ctx:e}}}),p.$on("click",M),{key:r,first:null,c(){n=N("li"),t=N("span"),l=N("u"),i=A(s),a=A(`
        : `),f=A(o),b=A(" m minimum width"),u=F(),O(m.$$.fragment),h=F(),O(p.$$.fragment),d=F(),this.h()},l(j){n=B(j,"LI",{});var L=W(n);t=B(L,"SPAN",{});var J=W(t);l=B(J,"U",{});var S=W(l);i=H(S,s),S.forEach(g),a=H(J,`
        : `),f=H(J,o),b=H(J," m minimum width"),J.forEach(g),u=E(L),P(m.$$.fragment,L),h=E(L),P(p.$$.fragment,L),d=E(L),L.forEach(g),this.h()},h(){this.first=n},m(j,L){C(j,n,L),v(n,t),v(t,l),v(l,i),v(t,a),v(t,f),v(t,b),v(n,u),R(m,n,null),v(n,h),R(p,n,null),v(n,d),w=!0},p(j,L){e=j,(!w||L&2)&&s!==(s=e[1].proposed.customFeatures[e[9]].name+"")&&ue(i,s),(!w||L&2)&&o!==(o=e[1].proposed.customFeatures[e[9]].width+"")&&ue(f,o);const J={};L&4096&&(J.$$scope={dirty:L,ctx:e}),m.$set(J);const S={};L&4096&&(S.$$scope={dirty:L,ctx:e}),p.$set(S)},i(j){w||(k(m.$$.fragment,j),k(p.$$.fragment,j),w=!0)},o(j){T(m.$$.fragment,j),T(p.$$.fragment,j),w=!1},d(j){j&&g(n),I(m),I(p)}}}function xt(r){let e,n;return e=new rl({props:{initialName:r[0].initialName,initialWidth:r[0].initialWidth}}),e.$on("cancel",r[8]),e.$on("confirm",r[5]),{c(){O(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,l){const s={};l&1&&(s.initialName=t[0].initialName),l&1&&(s.initialWidth=t[0].initialWidth),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function ol(r){let e,n,t,l=[],s=new Map,i,a,o;e=new ge({props:{$$slots:{default:[sl]},$$scope:{ctx:r}}}),e.$on("click",r[2]);let f=Q(Object.keys(r[1].proposed.customFeatures));const b=m=>m[9];for(let m=0;m<f.length;m+=1){let h=Kt(r,f,m),p=b(h);s.set(p,l[m]=Zt(p,h))}let u=r[0]&&xt(r);return{c(){O(e.$$.fragment),n=F(),t=N("ol");for(let m=0;m<l.length;m+=1)l[m].c();i=F(),u&&u.c(),a=Pe()},l(m){P(e.$$.fragment,m),n=E(m),t=B(m,"OL",{});var h=W(t);for(let p=0;p<l.length;p+=1)l[p].l(h);h.forEach(g),i=E(m),u&&u.l(m),a=Pe()},m(m,h){R(e,m,h),C(m,n,h),C(m,t,h);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(t,null);C(m,i,h),u&&u.m(m,h),C(m,a,h),o=!0},p(m,[h]){const p={};h&4096&&(p.$$scope={dirty:h,ctx:m}),e.$set(p),h&26&&(f=Q(Object.keys(m[1].proposed.customFeatures)),oe(),l=ve(l,h,b,1,m,f,s,t,Ue,Zt,null,Kt),fe()),m[0]?u?(u.p(m,h),h&1&&k(u,1)):(u=xt(m),u.c(),k(u,1),u.m(a.parentNode,a)):u&&(oe(),T(u,1,1,()=>{u=null}),fe())},i(m){if(!o){k(e.$$.fragment,m);for(let h=0;h<f.length;h+=1)k(l[h]);k(u),o=!0}},o(m){T(e.$$.fragment,m);for(let h=0;h<l.length;h+=1)T(l[h]);T(u),o=!1},d(m){m&&(g(n),g(t),g(i),g(a)),I(e,m);for(let h=0;h<l.length;h+=1)l[h].d();u&&u.d(m)}}}function fl(r,e,n){let t;ze(r,Y,m=>n(1,t=m));let l=null;function s(){n(0,l={id:fn(),initialName:"",initialWidth:0})}function i(m){let h=t.proposed.customFeatures[m].name,p=JSON.stringify({custom:m});if(t.proposed.desirableMinimumCrossSection.some(d=>JSON.stringify(d)==p)){window.alert(`The ${h} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(t.proposed.absoluteMinimumCrossSection.some(d=>JSON.stringify(d)==p)){window.alert(`The ${h} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete t.proposed.customFeatures[m],Y.set(t)}function a(m){n(0,l={id:m,initialName:t.proposed.customFeatures[m].name,initialWidth:t.proposed.customFeatures[m].width})}function o(m){ln(Y,t.proposed.customFeatures[l.id]={name:m.detail.name,width:m.detail.width},t),Y.set(t),n(0,l=null)}return[l,t,s,i,a,o,m=>a(m),m=>i(m),()=>n(0,l=null)]}class ul extends ye{constructor(e){super(),De(this,e,fl,ol,ke,{})}}function en(r){let e,n,t,l,s;return{c(){e=N("p"),n=N("i"),t=A("Effective speed limit, based on the limit and 85 percentile: "),l=A(r[1]),s=A(`
            mph`)},l(i){e=B(i,"P",{});var a=W(e);n=B(a,"I",{});var o=W(n);t=H(o,"Effective speed limit, based on the limit and 85 percentile: "),l=H(o,r[1]),s=H(o,`
            mph`),o.forEach(g),a.forEach(g)},m(i,a){C(i,e,a),v(e,n),v(n,t),v(n,l),v(n,s)},p(i,a){a&2&&ue(l,i[1])},d(i){i&&g(e)}}}function cl(r){let e,n,t,l,s,i,a,o,f,b,u,m,h,p,d,w,$,M,j,L,J,S,q,Z,ce;function Re(D){r[4](D)}let G={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:Oe(["<200","200-800",">800"])};r[0].proposed.trafficData.flowOneWay!==void 0&&(G.value=r[0].proposed.trafficData.flowOneWay),t=new Se({props:G}),ne.push(()=>se(t,"value",Re));function Ge(D){r[5](D)}let Ce={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:Oe(["<300","300-1,000",">1,000"])};r[0].proposed.trafficData.flowTwoWay!==void 0&&(Ce.value=r[0].proposed.trafficData.flowTwoWay),i=new Se({props:Ce}),ne.push(()=>se(i,"value",Ge));function de(D){r[6](D)}let me={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:Oe(["<300",">300"])};r[0].proposed.trafficData.flowSharedUse!==void 0&&(me.value=r[0].proposed.trafficData.flowSharedUse),f=new Se({props:me}),ne.push(()=>se(f,"value",de));function Xe(D){r[7](D)}let Fe={label:"Traffic flow (vpd)",emptyOption:!0,choices:Oe(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};r[0].proposed.trafficData.trafficFlow!==void 0&&(Fe.value=r[0].proposed.trafficData.trafficFlow),m=new Se({props:Fe}),ne.push(()=>se(m,"value",Xe));let V=r[1]&&en(r);function Qe(D){r[8](D)}let Ee={label:"Speed limit (MPH)",emptyOption:!0,choices:r[2]};r[0].proposed.trafficData.speedLimit!==void 0&&(Ee.value=r[0].proposed.trafficData.speedLimit),$=new Se({props:Ee}),ne.push(()=>se($,"value",Qe));function pe(D){r[9](D)}let he={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};r[0].proposed.trafficData.observedSpeed!==void 0&&(he.value=r[0].proposed.trafficData.observedSpeed),L=new Nn({props:he}),ne.push(()=>se(L,"value",pe));function Ye(D){r[10](D)}let Le={label:"Street function",emptyOption:!0,choices:Oe(["High Street (active frontages)","Residential street","Local distributor road"])};return r[0].proposed.trafficData.streetFunction!==void 0&&(Le.value=r[0].proposed.trafficData.streetFunction),q=new Se({props:Le}),ne.push(()=>se(q,"value",Ye)),{c(){e=N("div"),n=N("div"),O(t.$$.fragment),s=F(),O(i.$$.fragment),o=F(),O(f.$$.fragment),u=F(),O(m.$$.fragment),p=F(),d=N("div"),V&&V.c(),w=F(),O($.$$.fragment),j=F(),O(L.$$.fragment),S=F(),O(q.$$.fragment),this.h()},l(D){e=B(D,"DIV",{class:!0});var X=W(e);n=B(X,"DIV",{class:!0});var x=W(n);P(t.$$.fragment,x),s=E(x),P(i.$$.fragment,x),o=E(x),P(f.$$.fragment,x),u=E(x),P(m.$$.fragment,x),x.forEach(g),p=E(X),d=B(X,"DIV",{class:!0});var z=W(d);V&&V.l(z),w=E(z),P($.$$.fragment,z),j=E(z),P(L.$$.fragment,z),S=E(z),P(q.$$.fragment,z),z.forEach(g),X.forEach(g),this.h()},h(){K(n,"class","govuk-grid-column-one-half"),K(d,"class","govuk-grid-column-one-half"),K(e,"class","govuk-grid-row")},m(D,X){C(D,e,X),v(e,n),R(t,n,null),v(n,s),R(i,n,null),v(n,o),R(f,n,null),v(n,u),R(m,n,null),v(e,p),v(e,d),V&&V.m(d,null),v(d,w),R($,d,null),v(d,j),R(L,d,null),v(d,S),R(q,d,null),ce=!0},p(D,X){const x={};!l&&X&1&&(l=!0,x.value=D[0].proposed.trafficData.flowOneWay,re(()=>l=!1)),t.$set(x);const z={};!a&&X&1&&(a=!0,z.value=D[0].proposed.trafficData.flowTwoWay,re(()=>a=!1)),i.$set(z);const _e={};!b&&X&1&&(b=!0,_e.value=D[0].proposed.trafficData.flowSharedUse,re(()=>b=!1)),f.$set(_e);const Ie={};!h&&X&1&&(h=!0,Ie.value=D[0].proposed.trafficData.trafficFlow,re(()=>h=!1)),m.$set(Ie),D[1]?V?V.p(D,X):(V=en(D),V.c(),V.m(d,w)):V&&(V.d(1),V=null);const Ne={};!M&&X&1&&(M=!0,Ne.value=D[0].proposed.trafficData.speedLimit,re(()=>M=!1)),$.$set(Ne);const ee={};!J&&X&1&&(J=!0,ee.value=D[0].proposed.trafficData.observedSpeed,re(()=>J=!1)),L.$set(ee);const qe={};!Z&&X&1&&(Z=!0,qe.value=D[0].proposed.trafficData.streetFunction,re(()=>Z=!1)),q.$set(qe)},i(D){ce||(k(t.$$.fragment,D),k(i.$$.fragment,D),k(f.$$.fragment,D),k(m.$$.fragment,D),k($.$$.fragment,D),k(L.$$.fragment,D),k(q.$$.fragment,D),ce=!0)},o(D){T(t.$$.fragment,D),T(i.$$.fragment,D),T(f.$$.fragment,D),T(m.$$.fragment,D),T($.$$.fragment,D),T(L.$$.fragment,D),T(q.$$.fragment,D),ce=!1},d(D){D&&g(e),I(t),I(i),I(f),I(m),V&&V.d(),I($),I(L),I(q)}}}function dl(r){let e,n;return e=new ut({props:{label:"Traffic data and additional information",open:!0,$$slots:{default:[cl]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,[l]){const s={};l&2051&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function pl(r,e,n){let t,l;ze(r,Y,p=>n(0,l=p));let{valid:s}=e,i=Oe(vn);function a(p){r.$$.not_equal(l.proposed.trafficData.flowOneWay,p)&&(l.proposed.trafficData.flowOneWay=p,Y.set(l))}function o(p){r.$$.not_equal(l.proposed.trafficData.flowTwoWay,p)&&(l.proposed.trafficData.flowTwoWay=p,Y.set(l))}function f(p){r.$$.not_equal(l.proposed.trafficData.flowSharedUse,p)&&(l.proposed.trafficData.flowSharedUse=p,Y.set(l))}function b(p){r.$$.not_equal(l.proposed.trafficData.trafficFlow,p)&&(l.proposed.trafficData.trafficFlow=p,Y.set(l))}function u(p){r.$$.not_equal(l.proposed.trafficData.speedLimit,p)&&(l.proposed.trafficData.speedLimit=p,Y.set(l))}function m(p){r.$$.not_equal(l.proposed.trafficData.observedSpeed,p)&&(l.proposed.trafficData.observedSpeed=p,Y.set(l))}function h(p){r.$$.not_equal(l.proposed.trafficData.streetFunction,p)&&(l.proposed.trafficData.streetFunction=p,Y.set(l))}return r.$$set=p=>{"valid"in p&&n(3,s=p.valid)},r.$$.update=()=>{r.$$.dirty&1&&n(3,s=l.proposed.trafficData.flowOneWay!=""&&l.proposed.trafficData.flowTwoWay!=""&&l.proposed.trafficData.flowSharedUse!=""&&l.proposed.trafficData.trafficFlow!=""&&l.proposed.trafficData.speedLimit!=""&&l.proposed.trafficData.observedSpeed!=null&&l.proposed.trafficData.streetFunction!=""),r.$$.dirty&1&&n(1,t=an(l.proposed.trafficData.speedLimit,l.proposed.trafficData.observedSpeed))},[l,t,i,s,a,o,f,b,u,m,h]}class ml extends ye{constructor(e){super(),De(this,e,pl,dl,ke,{valid:3})}}function hl(r){let e,n;return e=new ul({}),{c(){O(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function _l(r){let e,n="Fill out all traffic data above to continue";return{c(){e=N("p"),e.textContent=n},l(t){e=B(t,"P",{"data-svelte-h":!0}),Te(e)!=="svelte-72a5ry"&&(e.textContent=n)},m(t,l){C(t,e,l)},p:Je,i:Je,o:Je,d(t){t&&g(e)}}}function gl(r){let e,n,t,l;return e=new ut({props:{label:"Preferred Cross-Section",open:!0,$$slots:{default:[$l]},$$scope:{ctx:r}}}),t=new ut({props:{label:"Compromised Cross-Section",open:!0,$$slots:{default:[vl]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment),n=F(),O(t.$$.fragment)},l(s){P(e.$$.fragment,s),n=E(s),P(t.$$.fragment,s)},m(s,i){R(e,s,i),C(s,n,i),R(t,s,i),l=!0},p(s,i){const a={};i&66&&(a.$$scope={dirty:i,ctx:s}),e.$set(a);const o={};i&66&&(o.$$scope={dirty:i,ctx:s}),t.$set(o)},i(s){l||(k(e.$$.fragment,s),k(t.$$.fragment,s),l=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),l=!1},d(s){s&&g(n),I(e,s),I(t,s)}}}function $l(r){let e,n,t;function l(i){r[4](i)}let s={sectionType:"Preferred"};return r[1].proposed.desirableMinimumCrossSection!==void 0&&(s.streetFeaturesLeftToRight=r[1].proposed.desirableMinimumCrossSection),e=new un({props:s}),ne.push(()=>se(e,"streetFeaturesLeftToRight",l)),{c(){O(e.$$.fragment)},l(i){P(e.$$.fragment,i)},m(i,a){R(e,i,a),t=!0},p(i,a){const o={};!n&&a&2&&(n=!0,o.streetFeaturesLeftToRight=i[1].proposed.desirableMinimumCrossSection,re(()=>n=!1)),e.$set(o)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){T(e.$$.fragment,i),t=!1},d(i){I(e,i)}}}function tn(r){let e,n;return e=new ge({props:{$$slots:{default:[bl]},$$scope:{ctx:r}}}),e.$on("click",r[2]),{c(){O(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,l){const s={};l&64&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function bl(r){let e;return{c(){e=A("Copy Preferred")},l(n){e=H(n,"Copy Preferred")},m(n,t){C(n,e,t)},d(n){n&&g(e)}}}function vl(r){let e,n,t,l,s=r[1].proposed.absoluteMinimumCrossSection.length==0&&tn(r);function i(o){r[5](o)}let a={sectionType:"Compromised"};return r[1].proposed.absoluteMinimumCrossSection!==void 0&&(a.streetFeaturesLeftToRight=r[1].proposed.absoluteMinimumCrossSection),n=new un({props:a}),ne.push(()=>se(n,"streetFeaturesLeftToRight",i)),{c(){s&&s.c(),e=F(),O(n.$$.fragment)},l(o){s&&s.l(o),e=E(o),P(n.$$.fragment,o)},m(o,f){s&&s.m(o,f),C(o,e,f),R(n,o,f),l=!0},p(o,f){o[1].proposed.absoluteMinimumCrossSection.length==0?s?(s.p(o,f),f&2&&k(s,1)):(s=tn(o),s.c(),k(s,1),s.m(e.parentNode,e)):s&&(oe(),T(s,1,1,()=>{s=null}),fe());const b={};!t&&f&2&&(t=!0,b.streetFeaturesLeftToRight=o[1].proposed.absoluteMinimumCrossSection,re(()=>t=!1)),n.$set(b)},i(o){l||(k(s),k(n.$$.fragment,o),l=!0)},o(o){T(s),T(n.$$.fragment,o),l=!1},d(o){o&&g(e),s&&s.d(o),I(n,o)}}}function wl(r){let e,n,t,l,s,i,a,o,f;function b(d){r[3](d)}let u={};r[0]!==void 0&&(u.valid=r[0]),e=new ml({props:u}),ne.push(()=>se(e,"valid",b)),l=new ut({props:{label:"Custom Street Features",$$slots:{default:[hl]},$$scope:{ctx:r}}});const m=[gl,_l],h=[];function p(d,w){return d[0]?0:1}return i=p(r),a=h[i]=m[i](r),{c(){O(e.$$.fragment),t=F(),O(l.$$.fragment),s=F(),a.c(),o=Pe()},l(d){P(e.$$.fragment,d),t=E(d),P(l.$$.fragment,d),s=E(d),a.l(d),o=Pe()},m(d,w){R(e,d,w),C(d,t,w),R(l,d,w),C(d,s,w),h[i].m(d,w),C(d,o,w),f=!0},p(d,[w]){const $={};!n&&w&1&&(n=!0,$.valid=d[0],re(()=>n=!1)),e.$set($);const M={};w&64&&(M.$$scope={dirty:w,ctx:d}),l.$set(M);let j=i;i=p(d),i===j?h[i].p(d,w):(oe(),T(h[j],1,1,()=>{h[j]=null}),fe(),a=h[i],a?a.p(d,w):(a=h[i]=m[i](d),a.c()),k(a,1),a.m(o.parentNode,o))},i(d){f||(k(e.$$.fragment,d),k(l.$$.fragment,d),k(a),f=!0)},o(d){T(e.$$.fragment,d),T(l.$$.fragment,d),T(a),f=!1},d(d){d&&(g(t),g(s),g(o)),I(e,d),I(l,d),h[i].d(d)}}}function kl(r,e,n){let t;ze(r,Y,f=>n(1,t=f));let l=!1;function s(){ln(Y,t.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(t.proposed.desirableMinimumCrossSection)),t)}function i(f){l=f,n(0,l)}function a(f){r.$$.not_equal(t.proposed.desirableMinimumCrossSection,f)&&(t.proposed.desirableMinimumCrossSection=f,Y.set(t))}function o(f){r.$$.not_equal(t.proposed.absoluteMinimumCrossSection,f)&&(t.proposed.absoluteMinimumCrossSection=f,Y.set(t))}return[l,t,s,i,a,o]}class Vl extends ye{constructor(e){super(),De(this,e,kl,wl,ke,{})}}export{Vl as component};
