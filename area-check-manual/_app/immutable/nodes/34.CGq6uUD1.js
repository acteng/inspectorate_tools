import{s as ke,v as ee,w as ne,a as C,e as E,g as L,c as N,o as te,i as F,E as Lt,z as Et,f as _,y as or,t as A,b as B,d as U,m as ve,x as Oe,h as v,j as ce,k as ze,X as fr,r as ur,F as Pe,n as Je,S as cr,U as tr}from"../chunks/scheduler.ScMV3vmV.js";import{S as ye,i as De,e as le,c as M,a as W,m as O,t as y,b as T,d as P,g as fe,f as ue}from"../chunks/index.DbrWxxqn.js";import{e as G,u as be,o as He,d as mt}from"../chunks/each.DgxkLI6f.js";import{D as ht}from"../chunks/DefaultButton.DmNBc77J.js";import{S as we}from"../chunks/Select.CV0kGAxR.js";/* empty css                                                               */import{S as Re}from"../chunks/SecondaryButton.BknZbHJL.js";import{W as rr}from"../chunks/WarningButton.Dxk6Eh5H.js";import{W as pr}from"../chunks/WarningText.C7rrcnZX.js";import{s as X,a as nr,b as dr}from"../chunks/data.0K81WdYM.js";import{a as lr,c as mr,n as hr,g as at}from"../chunks/logic.QIc_5A2T.js";import"../chunks/ManualPage.svelte_svelte_type_style_lang.D_PO7ki1.js";import{E as _r}from"../chunks/ExternalLink.CHHLJ-P5.js";import"../chunks/paths.BBb7lDP4.js";import{D as gr}from"../chunks/DecimalInput.CZdp-HRs.js";import{E as ir}from"../chunks/ErrorMessage.CIP85119.js";import{T as $r}from"../chunks/TextInput.C1q4cP7I.js";import{M as br}from"../chunks/Modal.B72gbrw7.js";import{v as sr}from"../chunks/v4.D8aEg3BZ.js";import{C as ot}from"../chunks/CollapsibleCard.DOoboPEd.js";import{p as We}from"../chunks/index.yU5cRtWT.js";import{F as vr}from"../chunks/FormElement.C7C6GEki.js";function wr(n){let e,r,t;function l(s){n[9](s)}let i={label:n[0],hint:n[1],choices:n[5],emptyOption:n[2],disabled:n[3]};return n[4]!==void 0&&(i.value=n[4]),e=new we({props:i}),ee.push(()=>le(e,"value",l)),e.$on("change",n[6]),{c(){M(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){O(e,s,o),t=!0},p(s,[o]){const a={};o&1&&(a.label=s[0]),o&2&&(a.hint=s[1]),o&32&&(a.choices=s[5]),o&4&&(a.emptyOption=s[2]),o&8&&(a.disabled=s[3]),!r&&o&16&&(r=!0,a.value=s[4],ne(()=>r=!1)),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function kr(n){return n.map(e=>[JSON.stringify(e[0]),e[1]])}function yr(n,e,r){let t,l,{label:i}=e,{hint:s=""}=e,{choices:o}=e,{emptyOption:a=!1}=e,{disabled:f=!1}=e,{value:d}=e;function p(){r(7,d=l==""?"":JSON.parse(l))}function h($){l=$,r(4,l),r(7,d)}return n.$$set=$=>{"label"in $&&r(0,i=$.label),"hint"in $&&r(1,s=$.hint),"choices"in $&&r(8,o=$.choices),"emptyOption"in $&&r(2,a=$.emptyOption),"disabled"in $&&r(3,f=$.disabled),"value"in $&&r(7,d=$.value)},n.$$.update=()=>{n.$$.dirty&256&&r(5,t=kr(o)),n.$$.dirty&128&&r(4,l=JSON.stringify(d))},[i,s,a,f,l,t,p,d,o,h]}class Dr extends ye{constructor(e){super(),De(this,e,yr,wr,ke,{label:0,hint:1,choices:8,emptyOption:2,disabled:3,value:7})}}function Tr(n){let e,r,t,l,i,s,o;return e=new ir({props:{errorMessage:n[5](n[2])}}),{c(){M(e.$$.fragment),r=C(),t=E("input"),this.h()},l(a){W(e.$$.fragment,a),r=L(a),t=N(a,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){te(t,"type","text"),te(t,"inputmode","numeric"),te(t,"class",l=`govuk-input govuk-input--width-${n[1]}`),te(t,"id",n[3])},m(a,f){O(e,a,f),F(a,r,f),F(a,t,f),Lt(t,n[2]),i=!0,s||(o=[Et(t,"input",n[9]),Et(t,"change",n[4])],s=!0)},p(a,f){const d={};f&4&&(d.errorMessage=a[5](a[2])),e.$set(d),(!i||f&2&&l!==(l=`govuk-input govuk-input--width-${a[1]}`))&&te(t,"class",l),f&4&&t.value!==a[2]&&Lt(t,a[2])},i(a){i||(y(e.$$.fragment,a),i=!0)},o(a){T(e.$$.fragment,a),i=!1},d(a){a&&(_(r),_(t)),P(e,a),s=!1,or(o)}}}function Fr(n){let e,r;return e=new vr({props:{label:n[0],id:n[3],$$slots:{default:[Tr]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){O(e,t,l),r=!0},p(t,[l]){const i={};l&1&&(i.label=t[0]),l&1030&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function Sr(n,e,r){let{label:t}=e,{value:l}=e,{width:i}=e,{min:s=void 0}=e,{max:o=void 0}=e,a=l==null?void 0:l.toString(),f=sr();function d(){r(6,l=a==null?void 0:parseInt(a,10))}function p($){if($==""||$==null)return"";if($.includes("."))return"Please enter a number without decimals";let b=Number($);return isNaN(b)?"Please enter a valid number":s!=null&&b<s?`Please enter a number that's at least ${s};`:o!=null&&b>o?`Please enter a number that's at most ${o};`:""}function h(){a=this.value,r(2,a)}return n.$$set=$=>{"label"in $&&r(0,t=$.label),"value"in $&&r(6,l=$.value),"width"in $&&r(1,i=$.width),"min"in $&&r(7,s=$.min),"max"in $&&r(8,o=$.max)},[t,i,a,f,d,p,l,s,o,h]}class Cr extends ye{constructor(e){super(),De(this,e,Sr,Fr,ke,{label:0,value:6,width:1,min:7,max:8})}}function Nt(n){return typeof n=="object"||n==""?[]:Lr[n]}let Lr={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",se(76)],["LTN 1/20 Figure 4.1 pp. 33",se(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",se(43)],["LTN 1/20 Figure 4.1 pp. 33",se(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",se(43)],["LTN 1/20 Figure 4.1 pp. 33",se(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",se(43)],["LTN 1/20 Figure 4.1 pp. 33",se(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",se(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",se(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",se(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",se(54)]]};function se(n){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${n}`}function Mt(n,e){let r=lr(e.speedLimit,e.observedSpeed);switch(n){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&r==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&r==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return r==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":r==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":r==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return r==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":r==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":r==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Wt(n,e,r){const t=n.slice();return t[19]=e[r],t[21]=r,t}function Ot(n,e,r){const t=n.slice();return t[19]=e[r],t[21]=r,t}function Pt(n,e,r){const t=n.slice();return t[23]=e[r][0],t[24]=e[r][1],t}function Rt(n,e,r){const t=n.slice();t[19]=e[r],t[21]=r;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const i=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=i,t}function Bt(n,e,r){const t=n.slice();t[19]=e[r],t[21]=r;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const i=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=i,t}function It(n,e,r){const t=n.slice();t[19]=e[r],t[21]=r;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const i=t[21]==t[0].length-1?"":t[0][t[21]+1];t[28]=i;const s=hr(t[19],t[27],t[28]);return t[31]=s,t}function qt(n,e,r){const t=n.slice();return t[19]=e[r],t[33]=e,t[21]=r,t}function Vt(n,e,r){const t=n.slice();return t[19]=e[r],t[21]=r,t}function Er(n){let e;return{c(){e=A("Add feature")},l(r){e=U(r,"Add feature")},m(r,t){F(r,e,t)},d(r){r&&_(e)}}}function Nr(n){let e;return{c(){e=A("←")},l(r){e=U(r,"←")},m(r,t){F(r,e,t)},d(r){r&&_(e)}}}function Mr(n){let e;return{c(){e=A("Delete")},l(r){e=U(r,"Delete")},m(r,t){F(r,e,t)},d(r){r&&_(e)}}}function Wr(n){let e;return{c(){e=A("→")},l(r){e=U(r,"→")},m(r,t){F(r,e,t)},d(r){r&&_(e)}}}function jt(n,e){let r,t,l,i,s,o,a,f,d;function p(){return e[11](e[21])}l=new Re({props:{disabled:e[21]==0,$$slots:{default:[Nr]},$$scope:{ctx:e}}}),l.$on("click",p);function h(){return e[12](e[21])}s=new rr({props:{$$slots:{default:[Mr]},$$scope:{ctx:e}}}),s.$on("click",h);function $(){return e[13](e[21])}return a=new Re({props:{disabled:e[21]==e[0].length-1,$$slots:{default:[Wr]},$$scope:{ctx:e}}}),a.$on("click",$),{key:n,first:null,c(){r=E("td"),t=E("div"),M(l.$$.fragment),i=C(),M(s.$$.fragment),o=C(),M(a.$$.fragment),f=C(),this.h()},l(b){r=N(b,"TD",{class:!0});var m=B(r);t=N(m,"DIV",{style:!0});var D=B(t);W(l.$$.fragment,D),i=L(D),W(s.$$.fragment,D),o=L(D),W(a.$$.fragment,D),D.forEach(_),f=L(m),m.forEach(_),this.h()},h(){Oe(t,"display","flex"),Oe(t,"justify-content","space-between"),te(r,"class","svelte-18bftjb"),this.first=r},m(b,m){F(b,r,m),v(r,t),O(l,t,null),v(t,i),O(s,t,null),v(t,o),O(a,t,null),v(r,f),d=!0},p(b,m){e=b;const D={};m[0]&1&&(D.disabled=e[21]==0),m[1]&16&&(D.$$scope={dirty:m,ctx:e}),l.$set(D);const g={};m[1]&16&&(g.$$scope={dirty:m,ctx:e}),s.$set(g);const R={};m[0]&1&&(R.disabled=e[21]==e[0].length-1),m[1]&16&&(R.$$scope={dirty:m,ctx:e}),a.$set(R)},i(b){d||(y(l.$$.fragment,b),y(s.$$.fragment,b),y(a.$$.fragment,b),d=!0)},o(b){T(l.$$.fragment,b),T(s.$$.fragment,b),T(a.$$.fragment,b),d=!1},d(b){b&&_(r),P(l),P(s),P(a)}}}function At(n,e){let r,t,l,i,s;function o(f){e[14](f,e[19],e[33],e[21])}let a={label:"Street feature type",emptyOption:!0,choices:e[3]};return e[19]!==void 0&&(a.value=e[19]),t=new Dr({props:a}),ee.push(()=>le(t,"value",o)),{key:n,first:null,c(){r=E("td"),M(t.$$.fragment),i=C(),this.h()},l(f){r=N(f,"TD",{class:!0});var d=B(r);W(t.$$.fragment,d),i=L(d),d.forEach(_),this.h()},h(){te(r,"class","svelte-18bftjb"),this.first=r},m(f,d){F(f,r,d),O(t,r,null),v(r,i),s=!0},p(f,d){e=f;const p={};d[0]&8&&(p.choices=e[3]),!l&&d[0]&1&&(l=!0,p.value=e[19],ne(()=>l=!1)),t.$set(p)},i(f){s||(y(t.$$.fragment,f),s=!0)},o(f){T(t.$$.fragment,f),s=!1},d(f){f&&_(r),P(t)}}}function Ut(n){let e,r;return e=new pr({props:{$$slots:{default:[Pr]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){O(e,t,l),r=!0},p(t,l){const i={};l[0]&1|l[1]&16&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function Or(n){let e;return{c(){e=A("Add")},l(r){e=U(r,"Add")},m(r,t){F(r,e,t)},d(r){r&&_(e)}}}function Pr(n){let e=n[31].warning+"",r,t,l,i;function s(){return n[15](n[21],n[31])}return l=new Re({props:{style:"margin-bottom: 0px; float: right",$$slots:{default:[Or]},$$scope:{ctx:n}}}),l.$on("click",s),{c(){r=A(e),t=C(),M(l.$$.fragment)},l(o){r=U(o,e),t=L(o),W(l.$$.fragment,o)},m(o,a){F(o,r,a),F(o,t,a),O(l,o,a),i=!0},p(o,a){n=o,(!i||a[0]&1)&&e!==(e=n[31].warning+"")&&ce(r,e);const f={};a[1]&16&&(f.$$scope={dirty:a,ctx:n}),l.$set(f)},i(o){i||(y(l.$$.fragment,o),i=!0)},o(o){T(l.$$.fragment,o),i=!1},d(o){o&&(_(r),_(t)),P(l,o)}}}function Ht(n,e){let r,t,l,i=e[31].warning!=""&&Ut(e);return{key:n,first:null,c(){r=E("td"),i&&i.c(),t=C(),this.h()},l(s){r=N(s,"TD",{class:!0});var o=B(r);i&&i.l(o),t=L(o),o.forEach(_),this.h()},h(){te(r,"class","svelte-18bftjb"),this.first=r},m(s,o){F(s,r,o),i&&i.m(r,null),v(r,t),l=!0},p(s,o){e=s,e[31].warning!=""?i?(i.p(e,o),o[0]&1&&y(i,1)):(i=Ut(e),i.c(),y(i,1),i.m(r,t)):i&&(fe(),T(i,1,1,()=>{i=null}),ue())},i(s){l||(y(i),l=!0)},o(s){T(i),l=!1},d(s){s&&_(r),i&&i.d()}}}function Jt(n,e){let r,t=at(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"",l,i;return{key:n,first:null,c(){r=E("td"),l=A(t),i=C(),this.h()},l(s){r=N(s,"TD",{class:!0});var o=B(r);l=U(o,t),i=L(o),o.forEach(_),this.h()},h(){te(r,"class","svelte-18bftjb"),this.first=r},m(s,o){F(s,r,o),v(r,l),v(r,i)},p(s,o){e=s,o[0]&3&&t!==(t=at(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"")&&ce(l,t)},d(s){s&&_(r)}}}function zt(n,e){let r,t=at(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"",l,i;return{key:n,first:null,c(){r=E("td"),l=A(t),i=C(),this.h()},l(s){r=N(s,"TD",{class:!0});var o=B(r);l=U(o,t),i=L(o),o.forEach(_),this.h()},h(){te(r,"class","svelte-18bftjb"),this.first=r},m(s,o){F(s,r,o),v(r,l),v(r,i)},p(s,o){e=s,o[0]&3&&t!==(t=at(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"")&&ce(l,t)},d(s){s&&_(r)}}}function Rr(n){let e,r=n[23]+"",t;return{c(){e=E("li"),t=A(r)},l(l){e=N(l,"LI",{});var i=B(e);t=U(i,r),i.forEach(_)},m(l,i){F(l,e,i),v(e,t)},p(l,i){i[0]&1&&r!==(r=l[23]+"")&&ce(t,r)},i:Je,o:Je,d(l){l&&_(e)}}}function Br(n){let e,r,t;return r=new _r({props:{href:n[24],$$slots:{default:[Ir]},$$scope:{ctx:n}}}),{c(){e=E("li"),M(r.$$.fragment)},l(l){e=N(l,"LI",{});var i=B(e);W(r.$$.fragment,i),i.forEach(_)},m(l,i){F(l,e,i),O(r,e,null),t=!0},p(l,i){const s={};i[0]&1&&(s.href=l[24]),i[0]&1|i[1]&16&&(s.$$scope={dirty:i,ctx:l}),r.$set(s)},i(l){t||(y(r.$$.fragment,l),t=!0)},o(l){T(r.$$.fragment,l),t=!1},d(l){l&&_(e),P(r)}}}function Ir(n){let e=n[23]+"",r;return{c(){r=A(e)},l(t){r=U(t,e)},m(t,l){F(t,r,l)},p(t,l){l[0]&1&&e!==(e=t[23]+"")&&ce(r,e)},d(t){t&&_(r)}}}function Gt(n){let e,r,t,l;const i=[Br,Rr],s=[];function o(a,f){return a[24]?0:1}return e=o(n),r=s[e]=i[e](n),{c(){r.c(),t=Pe()},l(a){r.l(a),t=Pe()},m(a,f){s[e].m(a,f),F(a,t,f),l=!0},p(a,f){let d=e;e=o(a),e===d?s[e].p(a,f):(fe(),T(s[d],1,1,()=>{s[d]=null}),ue(),r=s[e],r?r.p(a,f):(r=s[e]=i[e](a),r.c()),y(r,1),r.m(t.parentNode,t))},i(a){l||(y(r),l=!0)},o(a){T(r),l=!1},d(a){a&&_(t),s[e].d(a)}}}function Xt(n,e){let r,t,l,i,s=G(Nt(e[19])),o=[];for(let f=0;f<s.length;f+=1)o[f]=Gt(Pt(e,s,f));const a=f=>T(o[f],1,1,()=>{o[f]=null});return{key:n,first:null,c(){r=E("td"),t=E("ul");for(let f=0;f<o.length;f+=1)o[f].c();l=C(),this.h()},l(f){r=N(f,"TD",{class:!0});var d=B(r);t=N(d,"UL",{});var p=B(t);for(let h=0;h<o.length;h+=1)o[h].l(p);p.forEach(_),l=L(d),d.forEach(_),this.h()},h(){te(r,"class","svelte-18bftjb"),this.first=r},m(f,d){F(f,r,d),v(r,t);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(t,null);v(r,l),i=!0},p(f,d){if(e=f,d[0]&1){s=G(Nt(e[19]));let p;for(p=0;p<s.length;p+=1){const h=Pt(e,s,p);o[p]?(o[p].p(h,d),y(o[p],1)):(o[p]=Gt(h),o[p].c(),y(o[p],1),o[p].m(t,null))}for(fe(),p=s.length;p<o.length;p+=1)a(p);ue()}},i(f){if(!i){for(let d=0;d<s.length;d+=1)y(o[d]);i=!0}},o(f){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)T(o[d]);i=!1},d(f){f&&_(r),ur(o,f)}}}function Yt(n,e){let r,t,l=Mt(e[19],e[1].proposed.trafficData)+"",i,s;return{key:n,first:null,c(){r=E("td"),t=E("p"),i=A(l),s=C(),this.h()},l(o){r=N(o,"TD",{class:!0});var a=B(r);t=N(a,"P",{style:!0});var f=B(t);i=U(f,l),f.forEach(_),s=L(a),a.forEach(_),this.h()},h(){Oe(t,"max-width","400px"),te(r,"class","svelte-18bftjb"),this.first=r},m(o,a){F(o,r,a),v(r,t),v(t,i),v(r,s)},p(o,a){e=o,a[0]&3&&l!==(l=Mt(e[19],e[1].proposed.trafficData)+"")&&ce(i,l)},d(o){o&&_(r)}}}function qr(n){let e,r,t,l,i,s=n[4][0].toFixed(2)+"",o,a,f,d,p,h=n[4][1].toFixed(2)+"",$,b,m,D,g,R,K,V=[],ae=new Map,S,I,Y,oe="Street Feature",Be,J=[],Ge=new Map,Te,pe,me,Xe="Buffers",Fe,q=[],Ye=new Map,Se,de,he,Ke="Desirable minimum width (m)",Ce,k=[],z=new Map,Q,H,_e,Ie="Absolute minimum width (m)",Le,Z=[],qe=new Map,ft,ge,Ee,_t="References",ut,x=[],gt=new Map,ct,$e,Ne,$t="Guidance",pt,ie=[],bt=new Map,Me;e=new ht({props:{$$slots:{default:[Er]},$$scope:{ctx:n}}}),e.$on("click",n[5]);let Ve=G(n[0]);const vt=u=>u[21];for(let u=0;u<Ve.length;u+=1){let c=Vt(n,Ve,u),w=vt(c);ae.set(w,V[u]=jt(w,c))}let je=G(n[0]);const wt=u=>u[21];for(let u=0;u<je.length;u+=1){let c=qt(n,je,u),w=wt(c);Ge.set(w,J[u]=At(w,c))}let Ae=G(n[0]);const kt=u=>u[21];for(let u=0;u<Ae.length;u+=1){let c=It(n,Ae,u),w=kt(c);Ye.set(w,q[u]=Ht(w,c))}let Qe=G(n[0]);const yt=u=>u[21];for(let u=0;u<Qe.length;u+=1){let c=Bt(n,Qe,u),w=yt(c);z.set(w,k[u]=Jt(w,c))}let Ze=G(n[0]);const Dt=u=>u[21];for(let u=0;u<Ze.length;u+=1){let c=Rt(n,Ze,u),w=Dt(c);qe.set(w,Z[u]=zt(w,c))}let Ue=G(n[0]);const Tt=u=>u[21];for(let u=0;u<Ue.length;u+=1){let c=Ot(n,Ue,u),w=Tt(c);gt.set(w,x[u]=Xt(w,c))}let xe=G(n[0]);const Ft=u=>u[21];for(let u=0;u<xe.length;u+=1){let c=Wt(n,xe,u),w=Ft(c);bt.set(w,ie[u]=Yt(w,c))}return{c(){M(e.$$.fragment),r=C(),t=E("p"),l=A("Desirable minimum total width required (m): "),i=E("b"),o=A(s),a=C(),f=E("p"),d=A("Absolute minimum total width required (m): "),p=E("b"),$=A(h),b=C(),m=E("div"),D=E("table"),g=E("tr"),R=E("th"),K=C();for(let u=0;u<V.length;u+=1)V[u].c();S=C(),I=E("tr"),Y=E("th"),Y.textContent=oe,Be=C();for(let u=0;u<J.length;u+=1)J[u].c();Te=C(),pe=E("tr"),me=E("th"),me.textContent=Xe,Fe=C();for(let u=0;u<q.length;u+=1)q[u].c();Se=C(),de=E("tr"),he=E("th"),he.textContent=Ke,Ce=C();for(let u=0;u<k.length;u+=1)k[u].c();Q=C(),H=E("tr"),_e=E("th"),_e.textContent=Ie,Le=C();for(let u=0;u<Z.length;u+=1)Z[u].c();ft=C(),ge=E("tr"),Ee=E("th"),Ee.textContent=_t,ut=C();for(let u=0;u<x.length;u+=1)x[u].c();ct=C(),$e=E("tr"),Ne=E("th"),Ne.textContent=$t,pt=C();for(let u=0;u<ie.length;u+=1)ie[u].c();this.h()},l(u){W(e.$$.fragment,u),r=L(u),t=N(u,"P",{});var c=B(t);l=U(c,"Desirable minimum total width required (m): "),i=N(c,"B",{});var w=B(i);o=U(w,s),w.forEach(_),c.forEach(_),a=L(u),f=N(u,"P",{});var dt=B(f);d=U(dt,"Absolute minimum total width required (m): "),p=N(dt,"B",{});var St=B(p);$=U(St,h),St.forEach(_),dt.forEach(_),b=L(u),m=N(u,"DIV",{style:!0});var Ct=B(m);D=N(Ct,"TABLE",{});var re=B(D);g=N(re,"TR",{});var et=B(g);R=N(et,"TH",{}),B(R).forEach(_),K=L(et);for(let j=0;j<V.length;j+=1)V[j].l(et);et.forEach(_),S=L(re),I=N(re,"TR",{});var tt=B(I);Y=N(tt,"TH",{"data-svelte-h":!0}),ve(Y)!=="svelte-16tcugb"&&(Y.textContent=oe),Be=L(tt);for(let j=0;j<J.length;j+=1)J[j].l(tt);tt.forEach(_),Te=L(re),pe=N(re,"TR",{});var rt=B(pe);me=N(rt,"TH",{"data-svelte-h":!0}),ve(me)!=="svelte-11hw9wb"&&(me.textContent=Xe),Fe=L(rt);for(let j=0;j<q.length;j+=1)q[j].l(rt);rt.forEach(_),Se=L(re),de=N(re,"TR",{});var nt=B(de);he=N(nt,"TH",{"data-svelte-h":!0}),ve(he)!=="svelte-i7hz1h"&&(he.textContent=Ke),Ce=L(nt);for(let j=0;j<k.length;j+=1)k[j].l(nt);nt.forEach(_),Q=L(re),H=N(re,"TR",{});var lt=B(H);_e=N(lt,"TH",{"data-svelte-h":!0}),ve(_e)!=="svelte-zhiq21"&&(_e.textContent=Ie),Le=L(lt);for(let j=0;j<Z.length;j+=1)Z[j].l(lt);lt.forEach(_),ft=L(re),ge=N(re,"TR",{});var it=B(ge);Ee=N(it,"TH",{"data-svelte-h":!0}),ve(Ee)!=="svelte-o075z0"&&(Ee.textContent=_t),ut=L(it);for(let j=0;j<x.length;j+=1)x[j].l(it);it.forEach(_),ct=L(re),$e=N(re,"TR",{});var st=B($e);Ne=N(st,"TH",{"data-svelte-h":!0}),ve(Ne)!=="svelte-pnu4jc"&&(Ne.textContent=$t),pt=L(st);for(let j=0;j<ie.length;j+=1)ie[j].l(st);st.forEach(_),re.forEach(_),Ct.forEach(_),this.h()},h(){Oe(m,"display","flex"),Oe(m,"flex-direction","row"),Oe(m,"overflow-x","scroll")},m(u,c){O(e,u,c),F(u,r,c),F(u,t,c),v(t,l),v(t,i),v(i,o),F(u,a,c),F(u,f,c),v(f,d),v(f,p),v(p,$),F(u,b,c),F(u,m,c),v(m,D),v(D,g),v(g,R),v(g,K);for(let w=0;w<V.length;w+=1)V[w]&&V[w].m(g,null);v(D,S),v(D,I),v(I,Y),v(I,Be);for(let w=0;w<J.length;w+=1)J[w]&&J[w].m(I,null);v(D,Te),v(D,pe),v(pe,me),v(pe,Fe);for(let w=0;w<q.length;w+=1)q[w]&&q[w].m(pe,null);v(D,Se),v(D,de),v(de,he),v(de,Ce);for(let w=0;w<k.length;w+=1)k[w]&&k[w].m(de,null);v(D,Q),v(D,H),v(H,_e),v(H,Le);for(let w=0;w<Z.length;w+=1)Z[w]&&Z[w].m(H,null);v(D,ft),v(D,ge),v(ge,Ee),v(ge,ut);for(let w=0;w<x.length;w+=1)x[w]&&x[w].m(ge,null);v(D,ct),v(D,$e),v($e,Ne),v($e,pt);for(let w=0;w<ie.length;w+=1)ie[w]&&ie[w].m($e,null);n[16](m),Me=!0},p(u,c){const w={};c[1]&16&&(w.$$scope={dirty:c,ctx:u}),e.$set(w),(!Me||c[0]&16)&&s!==(s=u[4][0].toFixed(2)+"")&&ce(o,s),(!Me||c[0]&16)&&h!==(h=u[4][1].toFixed(2)+"")&&ce($,h),c[0]&449&&(Ve=G(u[0]),fe(),V=be(V,c,vt,1,u,Ve,ae,g,He,jt,null,Vt),ue()),c[0]&9&&(je=G(u[0]),fe(),J=be(J,c,wt,1,u,je,Ge,I,He,At,null,qt),ue()),c[0]&513&&(Ae=G(u[0]),fe(),q=be(q,c,kt,1,u,Ae,Ye,pe,He,Ht,null,It),ue()),c[0]&3&&(Qe=G(u[0]),k=be(k,c,yt,1,u,Qe,z,de,mt,Jt,null,Bt)),c[0]&3&&(Ze=G(u[0]),Z=be(Z,c,Dt,1,u,Ze,qe,H,mt,zt,null,Rt)),c[0]&1&&(Ue=G(u[0]),fe(),x=be(x,c,Tt,1,u,Ue,gt,ge,He,Xt,null,Ot),ue()),c[0]&3&&(xe=G(u[0]),ie=be(ie,c,Ft,1,u,xe,bt,$e,mt,Yt,null,Wt))},i(u){if(!Me){y(e.$$.fragment,u);for(let c=0;c<Ve.length;c+=1)y(V[c]);for(let c=0;c<je.length;c+=1)y(J[c]);for(let c=0;c<Ae.length;c+=1)y(q[c]);for(let c=0;c<Ue.length;c+=1)y(x[c]);Me=!0}},o(u){T(e.$$.fragment,u);for(let c=0;c<V.length;c+=1)T(V[c]);for(let c=0;c<J.length;c+=1)T(J[c]);for(let c=0;c<q.length;c+=1)T(q[c]);for(let c=0;c<x.length;c+=1)T(x[c]);Me=!1},d(u){u&&(_(r),_(t),_(a),_(f),_(b),_(m)),P(e,u);for(let c=0;c<V.length;c+=1)V[c].d();for(let c=0;c<J.length;c+=1)J[c].d();for(let c=0;c<q.length;c+=1)q[c].d();for(let c=0;c<k.length;c+=1)k[c].d();for(let c=0;c<Z.length;c+=1)Z[c].d();for(let c=0;c<x.length;c+=1)x[c].d();for(let c=0;c<ie.length;c+=1)ie[c].d();n[16](null)}}}function Vr(n,e,r){let t,l,i;ze(n,X,S=>r(1,i=S));let{streetFeaturesLeftToRight:s}=e,{sectionType:o}=e,a,f=!1;fr(()=>{f&&(f=!1,r(2,a.scrollLeft=a.scrollWidth,a))});function d(){r(0,s=[...s,""]),f=!0}function p(S){s.splice(S,1),r(0,s)}function h(S){r(0,[s[S-1],s[S]]=[s[S],s[S-1]],s)}function $(S){r(0,[s[S+1],s[S]]=[s[S],s[S+1]],s)}function b(S){let I=nr.map(Y=>[Y,Y]);for(let[Y,oe]of Object.entries(S))I.push([{custom:Y},`Custom: ${oe.name}`]);return I}function m(S,I){(I=="right"||I=="both")&&s.splice(S+1,0,"Buffer / Verge"),(I=="left"||I=="both")&&s.splice(S,0,"Buffer / Verge"),r(0,s)}const D=S=>h(S),g=S=>p(S),R=S=>$(S);function K(S,I,Y,oe){Y[oe]=S,r(0,s)}const V=(S,I)=>m(S,I.fix);function ae(S){ee[S?"unshift":"push"](()=>{a=S,r(2,a)})}return n.$$set=S=>{"streetFeaturesLeftToRight"in S&&r(0,s=S.streetFeaturesLeftToRight),"sectionType"in S&&r(10,o=S.sectionType)},n.$$.update=()=>{n.$$.dirty[0]&1026&&r(4,t=mr(i,o)),n.$$.dirty[0]&2&&r(3,l=b(i.proposed.customFeatures))},[s,i,a,l,t,d,p,h,$,m,o,D,g,R,K,V,ae]}class ar extends ye{constructor(e){super(),De(this,e,Vr,qr,ke,{streetFeaturesLeftToRight:0,sectionType:10},null,[-1,-1])}}function jr(n){let e;return{c(){e=A("Confirm")},l(r){e=U(r,"Confirm")},m(r,t){F(r,e,t)},d(r){r&&_(e)}}}function Ar(n){let e;return{c(){e=A("Cancel")},l(r){e=U(r,"Cancel")},m(r,t){F(r,e,t)},d(r){r&&_(e)}}}function Ur(n){let e,r,t,l,i,s,o,a,f,d,p,h;function $(g){n[6](g)}let b={label:"Name"};n[0]!==void 0&&(b.value=n[0]),e=new $r({props:b}),ee.push(()=>le(e,"value",$));function m(g){n[7](g)}let D={label:"Minimum width (m)",width:4,min:0};return n[1]!==void 0&&(D.value=n[1]),l=new gr({props:D}),ee.push(()=>le(l,"value",m)),o=new ir({props:{errorMessage:n[2]}}),f=new ht({props:{disabled:n[2]!="",$$slots:{default:[jr]},$$scope:{ctx:n}}}),f.$on("click",n[8]),p=new Re({props:{$$slots:{default:[Ar]},$$scope:{ctx:n}}}),p.$on("click",n[9]),{c(){M(e.$$.fragment),t=C(),M(l.$$.fragment),s=C(),M(o.$$.fragment),a=C(),M(f.$$.fragment),d=C(),M(p.$$.fragment)},l(g){W(e.$$.fragment,g),t=L(g),W(l.$$.fragment,g),s=L(g),W(o.$$.fragment,g),a=L(g),W(f.$$.fragment,g),d=L(g),W(p.$$.fragment,g)},m(g,R){O(e,g,R),F(g,t,R),O(l,g,R),F(g,s,R),O(o,g,R),F(g,a,R),O(f,g,R),F(g,d,R),O(p,g,R),h=!0},p(g,R){const K={};!r&&R&1&&(r=!0,K.value=g[0],ne(()=>r=!1)),e.$set(K);const V={};!i&&R&2&&(i=!0,V.value=g[1],ne(()=>i=!1)),l.$set(V);const ae={};R&4&&(ae.errorMessage=g[2]),o.$set(ae);const S={};R&4&&(S.disabled=g[2]!=""),R&4096&&(S.$$scope={dirty:R,ctx:g}),f.$set(S);const I={};R&4096&&(I.$$scope={dirty:R,ctx:g}),p.$set(I)},i(g){h||(y(e.$$.fragment,g),y(l.$$.fragment,g),y(o.$$.fragment,g),y(f.$$.fragment,g),y(p.$$.fragment,g),h=!0)},o(g){T(e.$$.fragment,g),T(l.$$.fragment,g),T(o.$$.fragment,g),T(f.$$.fragment,g),T(p.$$.fragment,g),h=!1},d(g){g&&(_(t),_(s),_(a),_(d)),P(e,g),P(l,g),P(o,g),P(f,g),P(p,g)}}}function Hr(n){let e,r;return e=new br({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[Ur]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){O(e,t,l),r=!0},p(t,[l]){const i={};l&4103&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function Jr(n,e,r){let t,l;ze(n,X,m=>r(10,l=m));let{initialName:i}=e,{initialWidth:s}=e,o=cr(),a=i,f=s;function d(m,D){return m==""?"Name must be specified":m!=i&&Object.values(l.proposed.customFeatures).some(g=>g.name==m)?"That name is already used by another custom feature":nr.includes(m)?"That name is the same as one of the built-in features":isNaN(D)?"Enter a valid width":D<=0?"Enter a positive width":""}function p(m){a=m,r(0,a)}function h(m){f=m,r(1,f)}const $=()=>o("confirm",{name:a,width:f}),b=()=>o("cancel");return n.$$set=m=>{"initialName"in m&&r(4,i=m.initialName),"initialWidth"in m&&r(5,s=m.initialWidth)},n.$$.update=()=>{n.$$.dirty&3&&r(2,t=d(a,f))},[a,f,t,o,i,s,p,h,$,b]}class zr extends ye{constructor(e){super(),De(this,e,Jr,Hr,ke,{initialName:4,initialWidth:5})}}function Kt(n,e,r){const t=n.slice();return t[9]=e[r],t}function Gr(n){let e;return{c(){e=A("Add custom feature")},l(r){e=U(r,"Add custom feature")},m(r,t){F(r,e,t)},d(r){r&&_(e)}}}function Xr(n){let e,r=n[1].proposed.customFeatures[n[9]].name+"",t,l,i=n[1].proposed.customFeatures[n[9]].width+"",s,o;return{c(){e=E("u"),t=A(r),l=A(`
      : `),s=A(i),o=A(" m minimum width")},l(a){e=N(a,"U",{});var f=B(e);t=U(f,r),f.forEach(_),l=U(a,`
      : `),s=U(a,i),o=U(a," m minimum width")},m(a,f){F(a,e,f),v(e,t),F(a,l,f),F(a,s,f),F(a,o,f)},p(a,f){f&2&&r!==(r=a[1].proposed.customFeatures[a[9]].name+"")&&ce(t,r),f&2&&i!==(i=a[1].proposed.customFeatures[a[9]].width+"")&&ce(s,i)},d(a){a&&(_(e),_(l),_(s),_(o))}}}function Yr(n){let e;return{c(){e=A("Delete")},l(r){e=U(r,"Delete")},m(r,t){F(r,e,t)},d(r){r&&_(e)}}}function Qt(n,e){let r,t,l,i,s;function o(){return e[6](e[9])}t=new Re({props:{$$slots:{default:[Xr]},$$scope:{ctx:e}}}),t.$on("click",o);function a(){return e[7](e[9])}return i=new rr({props:{$$slots:{default:[Yr]},$$scope:{ctx:e}}}),i.$on("click",a),{key:n,first:null,c(){r=E("div"),M(t.$$.fragment),l=C(),M(i.$$.fragment),this.h()},l(f){r=N(f,"DIV",{});var d=B(r);W(t.$$.fragment,d),l=L(d),W(i.$$.fragment,d),d.forEach(_),this.h()},h(){this.first=r},m(f,d){F(f,r,d),O(t,r,null),v(r,l),O(i,r,null),s=!0},p(f,d){e=f;const p={};d&4098&&(p.$$scope={dirty:d,ctx:e}),t.$set(p);const h={};d&4096&&(h.$$scope={dirty:d,ctx:e}),i.$set(h)},i(f){s||(y(t.$$.fragment,f),y(i.$$.fragment,f),s=!0)},o(f){T(t.$$.fragment,f),T(i.$$.fragment,f),s=!1},d(f){f&&_(r),P(t),P(i)}}}function Zt(n){let e,r;return e=new zr({props:{initialName:n[0].initialName,initialWidth:n[0].initialWidth}}),e.$on("cancel",n[8]),e.$on("confirm",n[5]),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){O(e,t,l),r=!0},p(t,l){const i={};l&1&&(i.initialName=t[0].initialName),l&1&&(i.initialWidth=t[0].initialWidth),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function Kr(n){let e,r,t=[],l=new Map,i,s,o;e=new ht({props:{$$slots:{default:[Gr]},$$scope:{ctx:n}}}),e.$on("click",n[2]);let a=G(Object.keys(n[1].proposed.customFeatures));const f=p=>p[9];for(let p=0;p<a.length;p+=1){let h=Kt(n,a,p),$=f(h);l.set($,t[p]=Qt($,h))}let d=n[0]&&Zt(n);return{c(){M(e.$$.fragment),r=C();for(let p=0;p<t.length;p+=1)t[p].c();i=C(),d&&d.c(),s=Pe()},l(p){W(e.$$.fragment,p),r=L(p);for(let h=0;h<t.length;h+=1)t[h].l(p);i=L(p),d&&d.l(p),s=Pe()},m(p,h){O(e,p,h),F(p,r,h);for(let $=0;$<t.length;$+=1)t[$]&&t[$].m(p,h);F(p,i,h),d&&d.m(p,h),F(p,s,h),o=!0},p(p,[h]){const $={};h&4096&&($.$$scope={dirty:h,ctx:p}),e.$set($),h&26&&(a=G(Object.keys(p[1].proposed.customFeatures)),fe(),t=be(t,h,f,1,p,a,l,i.parentNode,He,Qt,i,Kt),ue()),p[0]?d?(d.p(p,h),h&1&&y(d,1)):(d=Zt(p),d.c(),y(d,1),d.m(s.parentNode,s)):d&&(fe(),T(d,1,1,()=>{d=null}),ue())},i(p){if(!o){y(e.$$.fragment,p);for(let h=0;h<a.length;h+=1)y(t[h]);y(d),o=!0}},o(p){T(e.$$.fragment,p);for(let h=0;h<t.length;h+=1)T(t[h]);T(d),o=!1},d(p){p&&(_(r),_(i),_(s)),P(e,p);for(let h=0;h<t.length;h+=1)t[h].d(p);d&&d.d(p)}}}function Qr(n,e,r){let t;ze(n,X,h=>r(1,t=h));let l=null;function i(){r(0,l={id:sr(),initialName:"",initialWidth:0})}function s(h){let $=t.proposed.customFeatures[h].name,b=JSON.stringify({custom:h});if(t.proposed.desirableMinimumCrossSection.some(m=>JSON.stringify(m)==b)){window.alert(`The ${$} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(t.proposed.absoluteMinimumCrossSection.some(m=>JSON.stringify(m)==b)){window.alert(`The ${$} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete t.proposed.customFeatures[h],X.set(t)}function o(h){r(0,l={id:h,initialName:t.proposed.customFeatures[h].name,initialWidth:t.proposed.customFeatures[h].width})}function a(h){tr(X,t.proposed.customFeatures[l.id]={name:h.detail.name,width:h.detail.width},t),X.set(t),r(0,l=null)}return[l,t,i,s,o,a,h=>o(h),h=>s(h),()=>r(0,l=null)]}class Zr extends ye{constructor(e){super(),De(this,e,Qr,Kr,ke,{})}}function xt(n){let e,r,t,l,i;return{c(){e=E("p"),r=E("i"),t=A("Effective speed limit, based on the limit and 85 percentile: "),l=A(n[1]),i=A(`
            mph`)},l(s){e=N(s,"P",{});var o=B(e);r=N(o,"I",{});var a=B(r);t=U(a,"Effective speed limit, based on the limit and 85 percentile: "),l=U(a,n[1]),i=U(a,`
            mph`),a.forEach(_),o.forEach(_)},m(s,o){F(s,e,o),v(e,r),v(r,t),v(r,l),v(r,i)},p(s,o){o&2&&ce(l,s[1])},d(s){s&&_(e)}}}function xr(n){let e,r,t,l,i,s,o,a,f,d,p,h,$,b,m,D,g,R,K,V,ae,S,I,Y,oe;function Be(k){n[4](k)}let J={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:We(["<200","200-800",">800"])};n[0].proposed.trafficData.flowOneWay!==void 0&&(J.value=n[0].proposed.trafficData.flowOneWay),t=new we({props:J}),ee.push(()=>le(t,"value",Be));function Ge(k){n[5](k)}let Te={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:We(["<300","300-1,000",">1,000"])};n[0].proposed.trafficData.flowTwoWay!==void 0&&(Te.value=n[0].proposed.trafficData.flowTwoWay),s=new we({props:Te}),ee.push(()=>le(s,"value",Ge));function pe(k){n[6](k)}let me={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:We(["<300",">300"])};n[0].proposed.trafficData.flowSharedUse!==void 0&&(me.value=n[0].proposed.trafficData.flowSharedUse),f=new we({props:me}),ee.push(()=>le(f,"value",pe));function Xe(k){n[7](k)}let Fe={label:"Traffic flow (vpd)",emptyOption:!0,choices:We(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};n[0].proposed.trafficData.trafficFlow!==void 0&&(Fe.value=n[0].proposed.trafficData.trafficFlow),h=new we({props:Fe}),ee.push(()=>le(h,"value",Xe));let q=n[1]&&xt(n);function Ye(k){n[8](k)}let Se={label:"Speed limit (MPH)",emptyOption:!0,choices:n[2]};n[0].proposed.trafficData.speedLimit!==void 0&&(Se.value=n[0].proposed.trafficData.speedLimit),g=new we({props:Se}),ee.push(()=>le(g,"value",Ye));function de(k){n[9](k)}let he={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};n[0].proposed.trafficData.observedSpeed!==void 0&&(he.value=n[0].proposed.trafficData.observedSpeed),V=new Cr({props:he}),ee.push(()=>le(V,"value",de));function Ke(k){n[10](k)}let Ce={label:"Street function",emptyOption:!0,choices:We(["High Street (active frontages)","Residential street","Local distributor road"])};return n[0].proposed.trafficData.streetFunction!==void 0&&(Ce.value=n[0].proposed.trafficData.streetFunction),I=new we({props:Ce}),ee.push(()=>le(I,"value",Ke)),{c(){e=E("div"),r=E("div"),M(t.$$.fragment),i=C(),M(s.$$.fragment),a=C(),M(f.$$.fragment),p=C(),M(h.$$.fragment),b=C(),m=E("div"),q&&q.c(),D=C(),M(g.$$.fragment),K=C(),M(V.$$.fragment),S=C(),M(I.$$.fragment),this.h()},l(k){e=N(k,"DIV",{class:!0});var z=B(e);r=N(z,"DIV",{class:!0});var Q=B(r);W(t.$$.fragment,Q),i=L(Q),W(s.$$.fragment,Q),a=L(Q),W(f.$$.fragment,Q),p=L(Q),W(h.$$.fragment,Q),Q.forEach(_),b=L(z),m=N(z,"DIV",{class:!0});var H=B(m);q&&q.l(H),D=L(H),W(g.$$.fragment,H),K=L(H),W(V.$$.fragment,H),S=L(H),W(I.$$.fragment,H),H.forEach(_),z.forEach(_),this.h()},h(){te(r,"class","govuk-grid-column-one-half"),te(m,"class","govuk-grid-column-one-half"),te(e,"class","govuk-grid-row")},m(k,z){F(k,e,z),v(e,r),O(t,r,null),v(r,i),O(s,r,null),v(r,a),O(f,r,null),v(r,p),O(h,r,null),v(e,b),v(e,m),q&&q.m(m,null),v(m,D),O(g,m,null),v(m,K),O(V,m,null),v(m,S),O(I,m,null),oe=!0},p(k,z){const Q={};!l&&z&1&&(l=!0,Q.value=k[0].proposed.trafficData.flowOneWay,ne(()=>l=!1)),t.$set(Q);const H={};!o&&z&1&&(o=!0,H.value=k[0].proposed.trafficData.flowTwoWay,ne(()=>o=!1)),s.$set(H);const _e={};!d&&z&1&&(d=!0,_e.value=k[0].proposed.trafficData.flowSharedUse,ne(()=>d=!1)),f.$set(_e);const Ie={};!$&&z&1&&($=!0,Ie.value=k[0].proposed.trafficData.trafficFlow,ne(()=>$=!1)),h.$set(Ie),k[1]?q?q.p(k,z):(q=xt(k),q.c(),q.m(m,D)):q&&(q.d(1),q=null);const Le={};!R&&z&1&&(R=!0,Le.value=k[0].proposed.trafficData.speedLimit,ne(()=>R=!1)),g.$set(Le);const Z={};!ae&&z&1&&(ae=!0,Z.value=k[0].proposed.trafficData.observedSpeed,ne(()=>ae=!1)),V.$set(Z);const qe={};!Y&&z&1&&(Y=!0,qe.value=k[0].proposed.trafficData.streetFunction,ne(()=>Y=!1)),I.$set(qe)},i(k){oe||(y(t.$$.fragment,k),y(s.$$.fragment,k),y(f.$$.fragment,k),y(h.$$.fragment,k),y(g.$$.fragment,k),y(V.$$.fragment,k),y(I.$$.fragment,k),oe=!0)},o(k){T(t.$$.fragment,k),T(s.$$.fragment,k),T(f.$$.fragment,k),T(h.$$.fragment,k),T(g.$$.fragment,k),T(V.$$.fragment,k),T(I.$$.fragment,k),oe=!1},d(k){k&&_(e),P(t),P(s),P(f),P(h),q&&q.d(),P(g),P(V),P(I)}}}function en(n){let e,r;return e=new ot({props:{label:"Traffic data and additional information",open:!0,$$slots:{default:[xr]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){O(e,t,l),r=!0},p(t,[l]){const i={};l&2051&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function tn(n,e,r){let t,l;ze(n,X,b=>r(0,l=b));let{valid:i}=e,s=We(dr);function o(b){n.$$.not_equal(l.proposed.trafficData.flowOneWay,b)&&(l.proposed.trafficData.flowOneWay=b,X.set(l))}function a(b){n.$$.not_equal(l.proposed.trafficData.flowTwoWay,b)&&(l.proposed.trafficData.flowTwoWay=b,X.set(l))}function f(b){n.$$.not_equal(l.proposed.trafficData.flowSharedUse,b)&&(l.proposed.trafficData.flowSharedUse=b,X.set(l))}function d(b){n.$$.not_equal(l.proposed.trafficData.trafficFlow,b)&&(l.proposed.trafficData.trafficFlow=b,X.set(l))}function p(b){n.$$.not_equal(l.proposed.trafficData.speedLimit,b)&&(l.proposed.trafficData.speedLimit=b,X.set(l))}function h(b){n.$$.not_equal(l.proposed.trafficData.observedSpeed,b)&&(l.proposed.trafficData.observedSpeed=b,X.set(l))}function $(b){n.$$.not_equal(l.proposed.trafficData.streetFunction,b)&&(l.proposed.trafficData.streetFunction=b,X.set(l))}return n.$$set=b=>{"valid"in b&&r(3,i=b.valid)},n.$$.update=()=>{n.$$.dirty&1&&r(3,i=l.proposed.trafficData.flowOneWay!=""&&l.proposed.trafficData.flowTwoWay!=""&&l.proposed.trafficData.flowSharedUse!=""&&l.proposed.trafficData.trafficFlow!=""&&l.proposed.trafficData.speedLimit!=""&&l.proposed.trafficData.observedSpeed!=null&&l.proposed.trafficData.streetFunction!=""),n.$$.dirty&1&&r(1,t=lr(l.proposed.trafficData.speedLimit,l.proposed.trafficData.observedSpeed))},[l,t,s,i,o,a,f,d,p,h,$]}class rn extends ye{constructor(e){super(),De(this,e,tn,en,ke,{valid:3})}}function nn(n){let e,r;return e=new Zr({}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){O(e,t,l),r=!0},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function ln(n){let e,r="Fill out all traffic data above to continue";return{c(){e=E("p"),e.textContent=r},l(t){e=N(t,"P",{"data-svelte-h":!0}),ve(e)!=="svelte-72a5ry"&&(e.textContent=r)},m(t,l){F(t,e,l)},p:Je,i:Je,o:Je,d(t){t&&_(e)}}}function sn(n){let e,r,t,l;return e=new ot({props:{label:"Preferred Cross-Section",open:!0,$$slots:{default:[an]},$$scope:{ctx:n}}}),t=new ot({props:{label:"Compromised Cross-Section",open:!0,$$slots:{default:[fn]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment),r=C(),M(t.$$.fragment)},l(i){W(e.$$.fragment,i),r=L(i),W(t.$$.fragment,i)},m(i,s){O(e,i,s),F(i,r,s),O(t,i,s),l=!0},p(i,s){const o={};s&66&&(o.$$scope={dirty:s,ctx:i}),e.$set(o);const a={};s&66&&(a.$$scope={dirty:s,ctx:i}),t.$set(a)},i(i){l||(y(e.$$.fragment,i),y(t.$$.fragment,i),l=!0)},o(i){T(e.$$.fragment,i),T(t.$$.fragment,i),l=!1},d(i){i&&_(r),P(e,i),P(t,i)}}}function an(n){let e,r,t;function l(s){n[4](s)}let i={sectionType:"Preferred"};return n[1].proposed.desirableMinimumCrossSection!==void 0&&(i.streetFeaturesLeftToRight=n[1].proposed.desirableMinimumCrossSection),e=new ar({props:i}),ee.push(()=>le(e,"streetFeaturesLeftToRight",l)),{c(){M(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){O(e,s,o),t=!0},p(s,o){const a={};!r&&o&2&&(r=!0,a.streetFeaturesLeftToRight=s[1].proposed.desirableMinimumCrossSection,ne(()=>r=!1)),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function er(n){let e,r;return e=new Re({props:{$$slots:{default:[on]},$$scope:{ctx:n}}}),e.$on("click",n[2]),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){O(e,t,l),r=!0},p(t,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function on(n){let e;return{c(){e=A("Copy Preferred")},l(r){e=U(r,"Copy Preferred")},m(r,t){F(r,e,t)},d(r){r&&_(e)}}}function fn(n){let e,r,t,l,i=n[1].proposed.absoluteMinimumCrossSection.length==0&&er(n);function s(a){n[5](a)}let o={sectionType:"Compromised"};return n[1].proposed.absoluteMinimumCrossSection!==void 0&&(o.streetFeaturesLeftToRight=n[1].proposed.absoluteMinimumCrossSection),r=new ar({props:o}),ee.push(()=>le(r,"streetFeaturesLeftToRight",s)),{c(){i&&i.c(),e=C(),M(r.$$.fragment)},l(a){i&&i.l(a),e=L(a),W(r.$$.fragment,a)},m(a,f){i&&i.m(a,f),F(a,e,f),O(r,a,f),l=!0},p(a,f){a[1].proposed.absoluteMinimumCrossSection.length==0?i?(i.p(a,f),f&2&&y(i,1)):(i=er(a),i.c(),y(i,1),i.m(e.parentNode,e)):i&&(fe(),T(i,1,1,()=>{i=null}),ue());const d={};!t&&f&2&&(t=!0,d.streetFeaturesLeftToRight=a[1].proposed.absoluteMinimumCrossSection,ne(()=>t=!1)),r.$set(d)},i(a){l||(y(i),y(r.$$.fragment,a),l=!0)},o(a){T(i),T(r.$$.fragment,a),l=!1},d(a){a&&_(e),i&&i.d(a),P(r,a)}}}function un(n){let e,r,t,l,i,s,o,a,f;function d(m){n[3](m)}let p={};n[0]!==void 0&&(p.valid=n[0]),e=new rn({props:p}),ee.push(()=>le(e,"valid",d)),l=new ot({props:{label:"Custom Street Features",$$slots:{default:[nn]},$$scope:{ctx:n}}});const h=[sn,ln],$=[];function b(m,D){return m[0]?0:1}return s=b(n),o=$[s]=h[s](n),{c(){M(e.$$.fragment),t=C(),M(l.$$.fragment),i=C(),o.c(),a=Pe()},l(m){W(e.$$.fragment,m),t=L(m),W(l.$$.fragment,m),i=L(m),o.l(m),a=Pe()},m(m,D){O(e,m,D),F(m,t,D),O(l,m,D),F(m,i,D),$[s].m(m,D),F(m,a,D),f=!0},p(m,[D]){const g={};!r&&D&1&&(r=!0,g.valid=m[0],ne(()=>r=!1)),e.$set(g);const R={};D&64&&(R.$$scope={dirty:D,ctx:m}),l.$set(R);let K=s;s=b(m),s===K?$[s].p(m,D):(fe(),T($[K],1,1,()=>{$[K]=null}),ue(),o=$[s],o?o.p(m,D):(o=$[s]=h[s](m),o.c()),y(o,1),o.m(a.parentNode,a))},i(m){f||(y(e.$$.fragment,m),y(l.$$.fragment,m),y(o),f=!0)},o(m){T(e.$$.fragment,m),T(l.$$.fragment,m),T(o),f=!1},d(m){m&&(_(t),_(i),_(a)),P(e,m),P(l,m),$[s].d(m)}}}function cn(n,e,r){let t;ze(n,X,f=>r(1,t=f));let l=!1;function i(){tr(X,t.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(t.proposed.desirableMinimumCrossSection)),t)}function s(f){l=f,r(0,l)}function o(f){n.$$.not_equal(t.proposed.desirableMinimumCrossSection,f)&&(t.proposed.desirableMinimumCrossSection=f,X.set(t))}function a(f){n.$$.not_equal(t.proposed.absoluteMinimumCrossSection,f)&&(t.proposed.absoluteMinimumCrossSection=f,X.set(t))}return[l,t,i,s,o,a]}class On extends ye{constructor(e){super(),De(this,e,cn,un,ke,{})}}export{On as component};
