import{s as Le,w as x,e as Z,t as J,a as q,c as Y,b as X,d as K,f as d,g as A,p as z,q as Q,i as y,h as O,x as ee,k as Se,z as it,R as ot,W as ke,T as me,E as de,m as Ce,G as he,j as ge,n as st,K as ye,L as we}from"../chunks/scheduler.ytQcc2rf.js";import{S as Ne,i as Ee,e as te,c as G,a as M,m as V,t as b,g as se,b as I,f as ae,d as R}from"../chunks/index.D9yYtTfk.js";import{j as ve,k as be,M as at,l as rt,b as ft,C as ct,G as ut,m as pt}from"../chunks/index.zgbzr8dD.js";import{e as oe}from"../chunks/each.2RvRdhFj.js";import{c as _t,p as mt}from"../chunks/colors.DaC397qr.js";import{p as Je}from"../chunks/index.D6m_pmkI.js";import{R as De}from"../chunks/Radio.BwqxTJTI.js";import{S as je}from"../chunks/SecondaryButton.Dq9MsXNi.js";import{S as Ke}from"../chunks/Select.BzX3N09F.js";/* empty css                                                    */import{T as Ze}from"../chunks/TextArea.CtGDg2p0.js";import{T as Ye}from"../chunks/TextInput.6W_uhnqP.js";import{s as W}from"../chunks/data.B6mBhC5m.js";import{c as gt,p as $t,b as Pe,d as Te,e as dt,g as ht}from"../chunks/lists.D6CAQBg5.js";import{Y as Xe}from"../chunks/YesNo.DaRodmxZ.js";import{B as vt,G as bt,S as kt,C as Ct,a as yt,M as Qe}from"../chunks/GeoreferenceLayer.svelte_svelte_type_style_lang.DosUjqq1.js";import{C as wt}from"../chunks/CollapsibleCard.Bf0oqccF.js";import{D as It}from"../chunks/DefaultButton.DeS4Ykkw.js";import{W as Lt}from"../chunks/WarningButton.C6jnTAfb.js";import{G as St}from"../chunks/GeoreferenceLayer.DidOkMDU.js";import{C as xe}from"../chunks/ClickableCard.R7NkEgQq.js";import"../chunks/paths.B-LLqvak.js";function qe(t){let e,n,l;function i(s){t[6](s)}let r={label:"Resolved by Design",inlineSmall:!0};return t[2].criticalIssues[t[0]].resolved!==void 0&&(r.value=t[2].criticalIssues[t[0]].resolved),e=new Xe({props:r}),x.push(()=>te(e,"value",i)),{c(){G(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,u){V(e,s,u),l=!0},p(s,u){const c={};!n&&u&5&&(n=!0,c.value=s[2].criticalIssues[s[0]].resolved,ee(()=>n=!1)),e.$set(c)},i(s){l||(b(e.$$.fragment,s),l=!0)},o(s){I(e.$$.fragment,s),l=!1},d(s){R(e,s)}}}function Nt(t){let e;return{c(){e=J("Copy Critical")},l(n){e=K(n,"Copy Critical")},m(n,l){y(n,e,l)},d(n){n&&d(e)}}}function Et(t){let e,n,l,i,r,s,u,c,_,m,E,f,h,F,C,D,o,p,S,N,j,L,T,B;function re(a){t[3](a)}let g={label:"Critical Issue",emptyOption:!0,choices:gt};t[2].criticalIssues[t[0]].criticalIssue!==void 0&&(g.value=t[2].criticalIssues[t[0]].criticalIssue),m=new Ke({props:g}),x.push(()=>te(m,"value",re));function k(a){t[4](a)}let H={legend:"Stage",choices:Je(["Existing","Design"]),inlineSmall:!0};t[2].criticalIssues[t[0]].stage!==void 0&&(H.value=t[2].criticalIssues[t[0]].stage),h=new De({props:H}),x.push(()=>te(h,"value",k));function ie(a){t[5](a)}let P={label:"Location Name"};t[2].criticalIssues[t[0]].locationName!==void 0&&(P.value=t[2].criticalIssues[t[0]].locationName),D=new Ye({props:P}),x.push(()=>te(D,"value",ie));let w=t[2].criticalIssues[t[0]].stage!="Design"&&qe(t);function $e(a){t[7](a)}let fe={label:"Commentary & Feedback"};return t[2].criticalIssues[t[0]].notes!==void 0&&(fe.value=t[2].criticalIssues[t[0]].notes),N=new Ze({props:fe}),x.push(()=>te(N,"value",$e)),T=new je({props:{$$slots:{default:[Nt]},$$scope:{ctx:t}}}),T.$on("click",t[8]),{c(){e=Z("div"),n=Z("a"),l=J("Google StreetView"),r=q(),s=Z("a"),u=J("Bing Streetside"),_=q(),G(m.$$.fragment),f=q(),G(h.$$.fragment),C=q(),G(D.$$.fragment),p=q(),w&&w.c(),S=q(),G(N.$$.fragment),L=q(),G(T.$$.fragment),this.h()},l(a){e=Y(a,"DIV",{style:!0});var v=X(e);n=Y(v,"A",{href:!0,target:!0});var le=X(n);l=K(le,"Google StreetView"),le.forEach(d),r=A(v),s=Y(v,"A",{href:!0,target:!0});var ne=X(s);u=K(ne,"Bing Streetside"),ne.forEach(d),v.forEach(d),_=A(a),M(m.$$.fragment,a),f=A(a),M(h.$$.fragment,a),C=A(a),M(D.$$.fragment,a),p=A(a),w&&w.l(a),S=A(a),M(N.$$.fragment,a),L=A(a),M(T.$$.fragment,a),this.h()},h(){z(n,"href",i=ve(t[2].criticalIssues[t[0]].point)),z(n,"target","_blank"),z(s,"href",c=be(t[2].criticalIssues[t[0]].point)),z(s,"target","_blank"),Q(e,"display","flex"),Q(e,"justify-content","space-evenly")},m(a,v){y(a,e,v),O(e,n),O(n,l),O(e,r),O(e,s),O(s,u),y(a,_,v),V(m,a,v),y(a,f,v),V(h,a,v),y(a,C,v),V(D,a,v),y(a,p,v),w&&w.m(a,v),y(a,S,v),V(N,a,v),y(a,L,v),V(T,a,v),B=!0},p(a,[v]){(!B||v&5&&i!==(i=ve(a[2].criticalIssues[a[0]].point)))&&z(n,"href",i),(!B||v&5&&c!==(c=be(a[2].criticalIssues[a[0]].point)))&&z(s,"href",c);const le={};!E&&v&5&&(E=!0,le.value=a[2].criticalIssues[a[0]].criticalIssue,ee(()=>E=!1)),m.$set(le);const ne={};!F&&v&5&&(F=!0,ne.value=a[2].criticalIssues[a[0]].stage,ee(()=>F=!1)),h.$set(ne);const ce={};!o&&v&5&&(o=!0,ce.value=a[2].criticalIssues[a[0]].locationName,ee(()=>o=!1)),D.$set(ce),a[2].criticalIssues[a[0]].stage!="Design"?w?(w.p(a,v),v&5&&b(w,1)):(w=qe(a),w.c(),b(w,1),w.m(S.parentNode,S)):w&&(se(),I(w,1,1,()=>{w=null}),ae());const ue={};!j&&v&5&&(j=!0,ue.value=a[2].criticalIssues[a[0]].notes,ee(()=>j=!1)),N.$set(ue);const pe={};v&512&&(pe.$$scope={dirty:v,ctx:a}),T.$set(pe)},i(a){B||(b(m.$$.fragment,a),b(h.$$.fragment,a),b(D.$$.fragment,a),b(w),b(N.$$.fragment,a),b(T.$$.fragment,a),B=!0)},o(a){I(m.$$.fragment,a),I(h.$$.fragment,a),I(D.$$.fragment,a),I(w),I(N.$$.fragment,a),I(T.$$.fragment,a),B=!1},d(a){a&&(d(e),d(_),d(f),d(C),d(p),d(S),d(L)),R(m,a),R(h,a),R(D,a),w&&w.d(a),R(N,a),R(T,a)}}}function Dt(t,e,n){let l;Se(t,W,f=>n(2,l=f));let{idx:i}=e,{copyCritical:r}=e;function s(f){t.$$.not_equal(l.criticalIssues[i].criticalIssue,f)&&(l.criticalIssues[i].criticalIssue=f,W.set(l))}function u(f){t.$$.not_equal(l.criticalIssues[i].stage,f)&&(l.criticalIssues[i].stage=f,W.set(l))}function c(f){t.$$.not_equal(l.criticalIssues[i].locationName,f)&&(l.criticalIssues[i].locationName=f,W.set(l))}function _(f){t.$$.not_equal(l.criticalIssues[i].resolved,f)&&(l.criticalIssues[i].resolved=f,W.set(l))}function m(f){t.$$.not_equal(l.criticalIssues[i].notes,f)&&(l.criticalIssues[i].notes=f,W.set(l))}const E=()=>r();return t.$$set=f=>{"idx"in f&&n(0,i=f.idx),"copyCritical"in f&&n(1,r=f.copyCritical)},[i,r,l,s,u,c,_,m,E]}class jt extends Ne{constructor(e){super(),Ee(this,e,Dt,Et,Le,{idx:0,copyCritical:1})}}function Ae(t){let e,n,l;function i(s){t[6](s)}let r={label:"Resolved by Design",inlineSmall:!0};return t[2].policyConflictLog[t[0]].resolved!==void 0&&(r.value=t[2].policyConflictLog[t[0]].resolved),e=new Xe({props:r}),x.push(()=>te(e,"value",i)),{c(){G(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,u){V(e,s,u),l=!0},p(s,u){const c={};!n&&u&5&&(n=!0,c.value=s[2].policyConflictLog[s[0]].resolved,ee(()=>n=!1)),e.$set(c)},i(s){l||(b(e.$$.fragment,s),l=!0)},o(s){I(e.$$.fragment,s),l=!1},d(s){R(e,s)}}}function Bt(t){let e;return{c(){e=J("Copy Conflict")},l(n){e=K(n,"Copy Conflict")},m(n,l){y(n,e,l)},d(n){n&&d(e)}}}function Pt(t){let e,n,l,i,r,s,u,c,_,m,E,f,h,F,C,D,o,p,S,N,j,L,T,B;function re(a){t[3](a)}let g={label:"Policy Conflict",emptyOption:!0,choices:$t};t[2].policyConflictLog[t[0]].conflict!==void 0&&(g.value=t[2].policyConflictLog[t[0]].conflict),m=new Ke({props:g}),x.push(()=>te(m,"value",re));function k(a){t[4](a)}let H={legend:"Stage",choices:Je(["Existing","Design"]),inlineSmall:!0};t[2].policyConflictLog[t[0]].stage!==void 0&&(H.value=t[2].policyConflictLog[t[0]].stage),h=new De({props:H}),x.push(()=>te(h,"value",k));function ie(a){t[5](a)}let P={label:"Location Name"};t[2].policyConflictLog[t[0]].locationName!==void 0&&(P.value=t[2].policyConflictLog[t[0]].locationName),D=new Ye({props:P}),x.push(()=>te(D,"value",ie));let w=t[2].policyConflictLog[t[0]].stage!="Design"&&Ae(t);function $e(a){t[7](a)}let fe={label:"Commentary & Feedback"};return t[2].policyConflictLog[t[0]].notes!==void 0&&(fe.value=t[2].policyConflictLog[t[0]].notes),N=new Ze({props:fe}),x.push(()=>te(N,"value",$e)),T=new je({props:{$$slots:{default:[Bt]},$$scope:{ctx:t}}}),T.$on("click",t[8]),{c(){e=Z("div"),n=Z("a"),l=J("Google StreetView"),r=q(),s=Z("a"),u=J("Bing Streetside"),_=q(),G(m.$$.fragment),f=q(),G(h.$$.fragment),C=q(),G(D.$$.fragment),p=q(),w&&w.c(),S=q(),G(N.$$.fragment),L=q(),G(T.$$.fragment),this.h()},l(a){e=Y(a,"DIV",{style:!0});var v=X(e);n=Y(v,"A",{href:!0,target:!0});var le=X(n);l=K(le,"Google StreetView"),le.forEach(d),r=A(v),s=Y(v,"A",{href:!0,target:!0});var ne=X(s);u=K(ne,"Bing Streetside"),ne.forEach(d),v.forEach(d),_=A(a),M(m.$$.fragment,a),f=A(a),M(h.$$.fragment,a),C=A(a),M(D.$$.fragment,a),p=A(a),w&&w.l(a),S=A(a),M(N.$$.fragment,a),L=A(a),M(T.$$.fragment,a),this.h()},h(){z(n,"href",i=ve(t[2].policyConflictLog[t[0]].point)),z(n,"target","_blank"),z(s,"href",c=be(t[2].policyConflictLog[t[0]].point)),z(s,"target","_blank"),Q(e,"display","flex"),Q(e,"justify-content","space-evenly")},m(a,v){y(a,e,v),O(e,n),O(n,l),O(e,r),O(e,s),O(s,u),y(a,_,v),V(m,a,v),y(a,f,v),V(h,a,v),y(a,C,v),V(D,a,v),y(a,p,v),w&&w.m(a,v),y(a,S,v),V(N,a,v),y(a,L,v),V(T,a,v),B=!0},p(a,[v]){(!B||v&5&&i!==(i=ve(a[2].policyConflictLog[a[0]].point)))&&z(n,"href",i),(!B||v&5&&c!==(c=be(a[2].policyConflictLog[a[0]].point)))&&z(s,"href",c);const le={};!E&&v&5&&(E=!0,le.value=a[2].policyConflictLog[a[0]].conflict,ee(()=>E=!1)),m.$set(le);const ne={};!F&&v&5&&(F=!0,ne.value=a[2].policyConflictLog[a[0]].stage,ee(()=>F=!1)),h.$set(ne);const ce={};!o&&v&5&&(o=!0,ce.value=a[2].policyConflictLog[a[0]].locationName,ee(()=>o=!1)),D.$set(ce),a[2].policyConflictLog[a[0]].stage!="Design"?w?(w.p(a,v),v&5&&b(w,1)):(w=Ae(a),w.c(),b(w,1),w.m(S.parentNode,S)):w&&(se(),I(w,1,1,()=>{w=null}),ae());const ue={};!j&&v&5&&(j=!0,ue.value=a[2].policyConflictLog[a[0]].notes,ee(()=>j=!1)),N.$set(ue);const pe={};v&512&&(pe.$$scope={dirty:v,ctx:a}),T.$set(pe)},i(a){B||(b(m.$$.fragment,a),b(h.$$.fragment,a),b(D.$$.fragment,a),b(w),b(N.$$.fragment,a),b(T.$$.fragment,a),B=!0)},o(a){I(m.$$.fragment,a),I(h.$$.fragment,a),I(D.$$.fragment,a),I(w),I(N.$$.fragment,a),I(T.$$.fragment,a),B=!1},d(a){a&&(d(e),d(_),d(f),d(C),d(p),d(S),d(L)),R(m,a),R(h,a),R(D,a),w&&w.d(a),R(N,a),R(T,a)}}}function Tt(t,e,n){let l;Se(t,W,f=>n(2,l=f));let{idx:i}=e,{copyConflict:r}=e;function s(f){t.$$.not_equal(l.policyConflictLog[i].conflict,f)&&(l.policyConflictLog[i].conflict=f,W.set(l))}function u(f){t.$$.not_equal(l.policyConflictLog[i].stage,f)&&(l.policyConflictLog[i].stage=f,W.set(l))}function c(f){t.$$.not_equal(l.policyConflictLog[i].locationName,f)&&(l.policyConflictLog[i].locationName=f,W.set(l))}function _(f){t.$$.not_equal(l.policyConflictLog[i].resolved,f)&&(l.policyConflictLog[i].resolved=f,W.set(l))}function m(f){t.$$.not_equal(l.policyConflictLog[i].notes,f)&&(l.policyConflictLog[i].notes=f,W.set(l))}const E=()=>r();return t.$$set=f=>{"idx"in f&&n(0,i=f.idx),"copyConflict"in f&&n(1,r=f.copyConflict)},[i,r,l,s,u,c,_,m,E]}class qt extends Ne{constructor(e){super(),Ee(this,e,Tt,Pt,Le,{idx:0,copyConflict:1})}}const{window:At}=rt;function Ge(t,e,n){const l=t.slice();return l[40]=e[n],l[41]=e,l[42]=n,l}function Me(t,e,n){const l=t.slice();return l[43]=e[n],l[44]=e,l[42]=n,l}function Ve(t,e,n){const l=t.slice();return l[40]=e[n],l[42]=n,l}function Re(t,e,n){const l=t.slice();return l[43]=e[n],l[42]=n,l}function Gt(t){let e,n,l,i,r,s,u,c;e=new It({props:{$$slots:{default:[Vt]},$$scope:{ctx:t}}}),e.$on("click",t[12]),l=new Lt({props:{$$slots:{default:[Rt]},$$scope:{ctx:t}}}),l.$on("click",t[14]);const _=[Ot,Ft],m=[];function E(f,h){return f[0].kind=="critical"?0:1}return r=E(t),s=m[r]=_[r](t),{c(){G(e.$$.fragment),n=q(),G(l.$$.fragment),i=q(),s.c(),u=de()},l(f){M(e.$$.fragment,f),n=A(f),M(l.$$.fragment,f),i=A(f),s.l(f),u=de()},m(f,h){V(e,f,h),y(f,n,h),V(l,f,h),y(f,i,h),m[r].m(f,h),y(f,u,h),c=!0},p(f,h){const F={};h[1]&65536&&(F.$$scope={dirty:h,ctx:f}),e.$set(F);const C={};h[1]&65536&&(C.$$scope={dirty:h,ctx:f}),l.$set(C);let D=r;r=E(f),r===D?m[r].p(f,h):(se(),I(m[D],1,1,()=>{m[D]=null}),ae(),s=m[r],s?s.p(f,h):(s=m[r]=_[r](f),s.c()),b(s,1),s.m(u.parentNode,u))},i(f){c||(b(e.$$.fragment,f),b(l.$$.fragment,f),b(s),c=!0)},o(f){I(e.$$.fragment,f),I(l.$$.fragment,f),I(s),c=!1},d(f){f&&(d(n),d(i),d(u)),R(e,f),R(l,f),m[r].d(f)}}}function Mt(t){let e,n,l,i,r,s,u="Click the map to add a problem, or select a problem to fill out data",c,_,m="Critical Issues",E,f,h,F="Policy Conflicts",C,D,o;e=new wt({props:{label:"Tools",open:!0,$$slots:{default:[zt]},$$scope:{ctx:t}}});function p(g){t[22](g)}let S={legend:"Create new problems",choices:[["critical","Critical Issue"],["conflict","Policy Conflict"]],inlineSmall:!0};t[5]!==void 0&&(S.value=t[5]),l=new De({props:S}),x.push(()=>te(l,"value",p));let N=oe(t[2].criticalIssues),j=[];for(let g=0;g<N.length;g+=1)j[g]=Oe(Re(t,N,g));const L=g=>I(j[g],1,1,()=>{j[g]=null});let T=oe(t[2].policyConflictLog),B=[];for(let g=0;g<T.length;g+=1)B[g]=We(Ve(t,T,g));const re=g=>I(B[g],1,1,()=>{B[g]=null});return{c(){G(e.$$.fragment),n=q(),G(l.$$.fragment),r=q(),s=Z("p"),s.textContent=u,c=q(),_=Z("h3"),_.textContent=m,E=q();for(let g=0;g<j.length;g+=1)j[g].c();f=q(),h=Z("h3"),h.textContent=F,C=q();for(let g=0;g<B.length;g+=1)B[g].c();D=de()},l(g){M(e.$$.fragment,g),n=A(g),M(l.$$.fragment,g),r=A(g),s=Y(g,"P",{"data-svelte-h":!0}),Ce(s)!=="svelte-12ba5j2"&&(s.textContent=u),c=A(g),_=Y(g,"H3",{"data-svelte-h":!0}),Ce(_)!=="svelte-1qhh5xr"&&(_.textContent=m),E=A(g);for(let k=0;k<j.length;k+=1)j[k].l(g);f=A(g),h=Y(g,"H3",{"data-svelte-h":!0}),Ce(h)!=="svelte-eyxzjx"&&(h.textContent=F),C=A(g);for(let k=0;k<B.length;k+=1)B[k].l(g);D=de()},m(g,k){V(e,g,k),y(g,n,k),V(l,g,k),y(g,r,k),y(g,s,k),y(g,c,k),y(g,_,k),y(g,E,k);for(let H=0;H<j.length;H+=1)j[H]&&j[H].m(g,k);y(g,f,k),y(g,h,k),y(g,C,k);for(let H=0;H<B.length;H+=1)B[H]&&B[H].m(g,k);y(g,D,k),o=!0},p(g,k){const H={};k[0]&200|k[1]&65536&&(H.$$scope={dirty:k,ctx:g}),e.$set(H);const ie={};if(!i&&k[0]&32&&(i=!0,ie.value=g[5],ee(()=>i=!1)),l.$set(ie),k[0]&66566){N=oe(g[2].criticalIssues);let P;for(P=0;P<N.length;P+=1){const w=Re(g,N,P);j[P]?(j[P].p(w,k),b(j[P],1)):(j[P]=Oe(w),j[P].c(),b(j[P],1),j[P].m(f.parentNode,f))}for(se(),P=N.length;P<j.length;P+=1)L(P);ae()}if(k[0]&132102){T=oe(g[2].policyConflictLog);let P;for(P=0;P<T.length;P+=1){const w=Ve(g,T,P);B[P]?(B[P].p(w,k),b(B[P],1)):(B[P]=We(w),B[P].c(),b(B[P],1),B[P].m(D.parentNode,D))}for(se(),P=T.length;P<B.length;P+=1)re(P);ae()}},i(g){if(!o){b(e.$$.fragment,g),b(l.$$.fragment,g);for(let k=0;k<N.length;k+=1)b(j[k]);for(let k=0;k<T.length;k+=1)b(B[k]);o=!0}},o(g){I(e.$$.fragment,g),I(l.$$.fragment,g),j=j.filter(Boolean);for(let k=0;k<j.length;k+=1)I(j[k]);B=B.filter(Boolean);for(let k=0;k<B.length;k+=1)I(B[k]);o=!1},d(g){g&&(d(n),d(r),d(s),d(c),d(_),d(E),d(f),d(h),d(C),d(D)),R(e,g),R(l,g),he(j,g),he(B,g)}}}function Vt(t){let e;return{c(){e=J("Save")},l(n){e=K(n,"Save")},m(n,l){y(n,e,l)},d(n){n&&d(e)}}}function Rt(t){let e;return{c(){e=J("Delete")},l(n){e=K(n,"Delete")},m(n,l){y(n,e,l)},d(n){n&&d(e)}}}function Ft(t){let e,n;return e=new qt({props:{idx:t[0].idx,copyConflict:t[30]}}),{c(){G(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,i){V(e,l,i),n=!0},p(l,i){const r={};i[0]&1&&(r.idx=l[0].idx),i[0]&1&&(r.copyConflict=l[30]),e.$set(r)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){R(e,l)}}}function Ot(t){let e,n;return e=new jt({props:{idx:t[0].idx,copyCritical:t[29]}}),{c(){G(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,i){V(e,l,i),n=!0},p(l,i){const r={};i[0]&1&&(r.idx=l[0].idx),i[0]&1&&(r.copyCritical=l[29]),e.$set(r)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){R(e,l)}}}function Ut(t){let e;return{c(){e=J("Zoom to fit")},l(n){e=K(n,"Zoom to fit")},m(n,l){y(n,e,l)},d(n){n&&d(e)}}}function Wt(t){let e;return{c(){e=J("Show scheme context")},l(n){e=K(n,"Show scheme context")},m(n,l){y(n,e,l)},d(n){n&&d(e)}}}function zt(t){let e,n,l,i,r,s,u,c,_,m,E,f;e=new je({props:{$$slots:{default:[Ut]},$$scope:{ctx:t}}}),e.$on("click",t[19]),l=new vt({}),r=new bt({});function h(o){t[20](o)}let F={map:t[3]};t[6]!==void 0&&(F.enabled=t[6]),u=new kt({props:F}),x.push(()=>te(u,"enabled",h));function C(o){t[21](o)}let D={$$slots:{default:[Wt]},$$scope:{ctx:t}};return t[7]!==void 0&&(D.checked=t[7]),m=new Ct({props:D}),x.push(()=>te(m,"checked",C)),{c(){G(e.$$.fragment),n=q(),G(l.$$.fragment),i=q(),G(r.$$.fragment),s=q(),G(u.$$.fragment),_=q(),G(m.$$.fragment)},l(o){M(e.$$.fragment,o),n=A(o),M(l.$$.fragment,o),i=A(o),M(r.$$.fragment,o),s=A(o),M(u.$$.fragment,o),_=A(o),M(m.$$.fragment,o)},m(o,p){V(e,o,p),y(o,n,p),V(l,o,p),y(o,i,p),V(r,o,p),y(o,s,p),V(u,o,p),y(o,_,p),V(m,o,p),f=!0},p(o,p){const S={};p[1]&65536&&(S.$$scope={dirty:p,ctx:o}),e.$set(S);const N={};p[0]&8&&(N.map=o[3]),!c&&p[0]&64&&(c=!0,N.enabled=o[6],ee(()=>c=!1)),u.$set(N);const j={};p[1]&65536&&(j.$$scope={dirty:p,ctx:o}),!E&&p[0]&128&&(E=!0,j.checked=o[7],ee(()=>E=!1)),m.$set(j)},i(o){f||(b(e.$$.fragment,o),b(l.$$.fragment,o),b(r.$$.fragment,o),b(u.$$.fragment,o),b(m.$$.fragment,o),f=!0)},o(o){I(e.$$.fragment,o),I(l.$$.fragment,o),I(r.$$.fragment,o),I(u.$$.fragment,o),I(m.$$.fragment,o),f=!1},d(o){o&&(d(n),d(i),d(s),d(_)),R(e,o),R(l,o),R(r,o),R(u,o),R(m,o)}}}function Fe(t){let e,n,l=t[43].resolved+"",i;return{c(){e=Z("span"),n=J("Resolved: "),i=J(l)},l(r){e=Y(r,"SPAN",{});var s=X(e);n=K(s,"Resolved: "),i=K(s,l),s.forEach(d)},m(r,s){y(r,e,s),O(e,n),O(e,i)},p(r,s){s[0]&4&&l!==(l=r[43].resolved+"")&&ge(i,l)},d(r){r&&d(e)}}}function Ht(t){let e,n,l,i=t[43].stage+"",r,s,u=t[43].stage!="Design"&&Fe(t);return{c(){e=Z("div"),n=Z("span"),l=J("Stage: "),r=J(i),s=q(),u&&u.c(),this.h()},l(c){e=Y(c,"DIV",{style:!0});var _=X(e);n=Y(_,"SPAN",{});var m=X(n);l=K(m,"Stage: "),r=K(m,i),m.forEach(d),s=A(_),u&&u.l(_),_.forEach(d),this.h()},h(){Q(e,"display","flex"),Q(e,"justify-content","space-between")},m(c,_){y(c,e,_),O(e,n),O(n,l),O(n,r),O(e,s),u&&u.m(e,null)},p(c,_){_[0]&4&&i!==(i=c[43].stage+"")&&ge(r,i),c[43].stage!="Design"?u?u.p(c,_):(u=Fe(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(c){c&&d(e),u&&u.d()}}}function Oe(t){let e,n;function l(){return t[23](t[42])}function i(){return t[24](t[42])}return e=new xe({props:{name:t[16](t[43]),$$slots:{default:[Ht]},$$scope:{ctx:t}}}),e.$on("click",l),e.$on("mouseenter",i),e.$on("mouseleave",t[25]),{c(){G(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,s){V(e,r,s),n=!0},p(r,s){t=r;const u={};s[0]&4&&(u.name=t[16](t[43])),s[0]&4|s[1]&65536&&(u.$$scope={dirty:s,ctx:t}),e.$set(u)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){R(e,r)}}}function Ue(t){let e,n,l=t[40].resolved+"",i;return{c(){e=Z("span"),n=J("Resolved: "),i=J(l)},l(r){e=Y(r,"SPAN",{});var s=X(e);n=K(s,"Resolved: "),i=K(s,l),s.forEach(d)},m(r,s){y(r,e,s),O(e,n),O(e,i)},p(r,s){s[0]&4&&l!==(l=r[40].resolved+"")&&ge(i,l)},d(r){r&&d(e)}}}function Jt(t){let e,n,l,i=t[40].stage+"",r,s,u,c=t[40].stage!="Design"&&Ue(t);return{c(){e=Z("div"),n=Z("span"),l=J("Stage: "),r=J(i),s=q(),c&&c.c(),u=q(),this.h()},l(_){e=Y(_,"DIV",{style:!0});var m=X(e);n=Y(m,"SPAN",{});var E=X(n);l=K(E,"Stage: "),r=K(E,i),E.forEach(d),s=A(m),c&&c.l(m),m.forEach(d),u=A(_),this.h()},h(){Q(e,"display","flex"),Q(e,"justify-content","space-between")},m(_,m){y(_,e,m),O(e,n),O(n,l),O(n,r),O(e,s),c&&c.m(e,null),y(_,u,m)},p(_,m){m[0]&4&&i!==(i=_[40].stage+"")&&ge(r,i),_[40].stage!="Design"?c?c.p(_,m):(c=Ue(_),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(_){_&&(d(e),d(u)),c&&c.d()}}}function We(t){let e,n;function l(){return t[26](t[42])}function i(){return t[27](t[42])}return e=new xe({props:{name:t[17](t[40]),$$slots:{default:[Jt]},$$scope:{ctx:t}}}),e.$on("click",l),e.$on("mouseenter",i),e.$on("mouseleave",t[28]),{c(){G(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,s){V(e,r,s),n=!0},p(r,s){t=r;const u={};s[0]&4&&(u.name=t[17](t[40])),s[0]&4|s[1]&65536&&(u.$$scope={dirty:s,ctx:t}),e.$set(u)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){R(e,r)}}}function Kt(t){let e,n,l,i=t[43].criticalIssue+"",r;return{c(){e=ye("svg"),n=ye("polygon"),l=ye("text"),r=J(i),this.h()},l(s){e=we(s,"svg",{width:!0,height:!0,xmlns:!0});var u=X(e);n=we(u,"polygon",{points:!0,fill:!0,class:!0}),X(n).forEach(d),l=we(u,"text",{x:!0,y:!0});var c=X(l);r=K(c,i),c.forEach(d),u.forEach(d),this.h()},h(){z(n,"points","20,0 0,40 40,40"),z(n,"fill",_t.critical.background),z(n,"class","svelte-ktyu3j"),z(l,"x","13"),z(l,"y","30"),Q(l,"fill","white"),z(e,"width","40"),z(e,"height","40"),z(e,"xmlns","http://www.w3.org/2000/svg")},m(s,u){y(s,e,u),O(e,n),O(e,l),O(l,r)},p(s,u){u[0]&4&&i!==(i=s[43].criticalIssue+"")&&ge(r,i)},d(s){s&&d(e)}}}function ze(t){let e,n,l;function i(c){t[32](c,t[43])}function r(){return t[33](t[42])}function s(){return t[34](t[42])}let u={draggable:!0,$$slots:{default:[Kt]},$$scope:{ctx:t}};return t[43].point!==void 0&&(u.lngLat=t[43].point),e=new Qe({props:u}),x.push(()=>te(e,"lngLat",i)),e.$on("click",r),e.$on("dragend",s),{c(){G(e.$$.fragment)},l(c){M(e.$$.fragment,c)},m(c,_){V(e,c,_),l=!0},p(c,_){t=c;const m={};_[0]&4|_[1]&65536&&(m.$$scope={dirty:_,ctx:t}),!n&&_[0]&4&&(n=!0,m.lngLat=t[43].point,ee(()=>n=!1)),e.$set(m)},i(c){l||(b(e.$$.fragment,c),l=!0)},o(c){I(e.$$.fragment,c),l=!1},d(c){R(e,c)}}}function Zt(t){let e,n=t[40].conflict+"",l;return{c(){e=Z("span"),l=J(n),this.h()},l(i){e=Y(i,"SPAN",{class:!0});var r=X(e);l=K(r,n),r.forEach(d),this.h()},h(){z(e,"class","dot svelte-ktyu3j"),Q(e,"background",mt)},m(i,r){y(i,e,r),O(e,l)},p(i,r){r[0]&4&&n!==(n=i[40].conflict+"")&&ge(l,n)},d(i){i&&d(e)}}}function He(t){let e,n,l;function i(c){t[35](c,t[40])}function r(){return t[36](t[42])}function s(){return t[37](t[42])}let u={draggable:!0,$$slots:{default:[Zt]},$$scope:{ctx:t}};return t[40].point!==void 0&&(u.lngLat=t[40].point),e=new Qe({props:u}),x.push(()=>te(e,"lngLat",i)),e.$on("click",r),e.$on("dragend",s),{c(){G(e.$$.fragment)},l(c){M(e.$$.fragment,c)},m(c,_){V(e,c,_),l=!0},p(c,_){t=c;const m={};_[0]&4|_[1]&65536&&(m.$$scope={dirty:_,ctx:t}),!n&&_[0]&4&&(n=!0,m.lngLat=t[40].point,ee(()=>n=!1)),e.$set(m)},i(c){l||(b(e.$$.fragment,c),l=!0)},o(c){I(e.$$.fragment,c),l=!1},d(c){R(e,c)}}}function Yt(t){let e,n;return e=new pt({props:{paint:{"circle-radius":30,"circle-opacity":0,"circle-stroke-width":5,"circle-stroke-color":"yellow"}}}),{c(){G(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,i){V(e,l,i),n=!0},p:st,i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){R(e,l)}}}function Xt(t){let e,n,l,i,r,s,u,c,_,m;e=new yt({}),e.$on("click",t[13]),l=new ct({props:{gj:t[2].summary.networkMap,show:t[7]}});let E=oe(t[2].criticalIssues),f=[];for(let o=0;o<E.length;o+=1)f[o]=ze(Me(t,E,o));const h=o=>I(f[o],1,1,()=>{f[o]=null});let F=oe(t[2].policyConflictLog),C=[];for(let o=0;o<F.length;o+=1)C[o]=He(Ge(t,F,o));const D=o=>I(C[o],1,1,()=>{C[o]=null});return u=new ut({props:{data:t[8],$$slots:{default:[Yt]},$$scope:{ctx:t}}}),_=new St({props:{map:t[3]}}),{c(){G(e.$$.fragment),n=q(),G(l.$$.fragment),i=q();for(let o=0;o<f.length;o+=1)f[o].c();r=q();for(let o=0;o<C.length;o+=1)C[o].c();s=q(),G(u.$$.fragment),c=q(),G(_.$$.fragment)},l(o){M(e.$$.fragment,o),n=A(o),M(l.$$.fragment,o),i=A(o);for(let p=0;p<f.length;p+=1)f[p].l(o);r=A(o);for(let p=0;p<C.length;p+=1)C[p].l(o);s=A(o),M(u.$$.fragment,o),c=A(o),M(_.$$.fragment,o)},m(o,p){V(e,o,p),y(o,n,p),V(l,o,p),y(o,i,p);for(let S=0;S<f.length;S+=1)f[S]&&f[S].m(o,p);y(o,r,p);for(let S=0;S<C.length;S+=1)C[S]&&C[S].m(o,p);y(o,s,p),V(u,o,p),y(o,c,p),V(_,o,p),m=!0},p(o,p){const S={};if(p[0]&4&&(S.gj=o[2].summary.networkMap),p[0]&128&&(S.show=o[7]),l.$set(S),p[0]&516){E=oe(o[2].criticalIssues);let L;for(L=0;L<E.length;L+=1){const T=Me(o,E,L);f[L]?(f[L].p(T,p),b(f[L],1)):(f[L]=ze(T),f[L].c(),b(f[L],1),f[L].m(r.parentNode,r))}for(se(),L=E.length;L<f.length;L+=1)h(L);ae()}if(p[0]&516){F=oe(o[2].policyConflictLog);let L;for(L=0;L<F.length;L+=1){const T=Ge(o,F,L);C[L]?(C[L].p(T,p),b(C[L],1)):(C[L]=He(T),C[L].c(),b(C[L],1),C[L].m(s.parentNode,s))}for(se(),L=F.length;L<C.length;L+=1)D(L);ae()}const N={};p[0]&256&&(N.data=o[8]),p[1]&65536&&(N.$$scope={dirty:p,ctx:o}),u.$set(N);const j={};p[0]&8&&(j.map=o[3]),_.$set(j)},i(o){if(!m){b(e.$$.fragment,o),b(l.$$.fragment,o);for(let p=0;p<E.length;p+=1)b(f[p]);for(let p=0;p<F.length;p+=1)b(C[p]);b(u.$$.fragment,o),b(_.$$.fragment,o),m=!0}},o(o){I(e.$$.fragment,o),I(l.$$.fragment,o),f=f.filter(Boolean);for(let p=0;p<f.length;p+=1)I(f[p]);C=C.filter(Boolean);for(let p=0;p<C.length;p+=1)I(C[p]);I(u.$$.fragment,o),I(_.$$.fragment,o),m=!1},d(o){o&&(d(n),d(i),d(r),d(s),d(c)),R(e,o),R(l,o),he(f,o),he(C,o),R(u,o),R(_,o)}}}function Qt(t){let e,n,l,i,r,s,u,c,_,m,E;const f=[Mt,Gt],h=[];function F(o,p){return o[0]==null?0:1}l=F(t),i=h[l]=f[l](t);function C(o){t[38](o)}let D={$$slots:{default:[Xt]},$$scope:{ctx:t}};return t[3]!==void 0&&(D.map=t[3]),u=new at({props:D}),x.push(()=>te(u,"map",C)),{c(){e=Z("div"),n=Z("div"),i.c(),r=q(),s=Z("div"),G(u.$$.fragment),this.h()},l(o){e=Y(o,"DIV",{style:!0});var p=X(e);n=Y(p,"DIV",{style:!0});var S=X(n);i.l(S),S.forEach(d),r=A(p),s=Y(p,"DIV",{style:!0});var N=X(s);M(u.$$.fragment,N),N.forEach(d),p.forEach(d),this.h()},h(){Q(n,"width","30%"),Q(n,"overflow-y","scroll"),Q(n,"padding","10px"),Q(n,"border","1px solid black"),Q(s,"position","relative"),Q(s,"width","70%"),Q(e,"display","flex"),Q(e,"height","80vh")},m(o,p){y(o,e,p),O(e,n),h[l].m(n,null),t[31](n),O(e,r),O(e,s),V(u,s,null),_=!0,m||(E=it(At,"keydown",t[18]),m=!0)},p(o,p){let S=l;l=F(o),l===S?h[l].p(o,p):(se(),I(h[S],1,1,()=>{h[S]=null}),ae(),i=h[l],i?i.p(o,p):(i=h[l]=f[l](o),i.c()),b(i,1),i.m(n,null));const N={};p[0]&396|p[1]&65536&&(N.$$scope={dirty:p,ctx:o}),!c&&p[0]&8&&(c=!0,N.map=o[3],ee(()=>c=!1)),u.$set(N)},i(o){_||(b(i),b(u.$$.fragment,o),_=!0)},o(o){I(i),I(u.$$.fragment,o),_=!1},d(o){o&&d(e),h[l].d(),t[31](null),R(u),m=!1,E()}}}function xt(t,e,n){let l={type:"FeatureCollection",features:[]},i=e??n;if(i!=null){let r=i.kind=="critical"?t.criticalIssues:t.policyConflictLog;l.features.push(Ie(r[i.idx].point))}return l}function Ie(t){return{type:"Feature",properties:{},geometry:{type:"Point",coordinates:t}}}function el(t,e,n){let l,i;Se(t,W,$=>n(2,i=$));let r,s,u="critical",c=null,_=null,m=null,E=!1,f=!0;async function h($){_=s.scrollTop,n(0,c=$),n(1,m=null),await ke(),n(4,s.scrollTop=0,s)}async function F($){_=s.scrollTop,n(0,c=$),n(1,m=null),await ke(),n(4,s.scrollTop=0,s);let U=$.kind=="critical"?i.criticalIssues:i.policyConflictLog;r.flyTo({center:U[$.idx].point,duration:500})}async function C($){let U=$.kind=="critical"?i.criticalIssues:i.policyConflictLog,_e=JSON.parse(JSON.stringify(U[$.idx])),lt=r.getBounds().getWest(),nt=r.getBounds().getEast();_e.point[0]+=(nt-lt)*.05;let Be=U.toSpliced($.idx+1,0,_e);$.kind=="critical"?me(W,i.criticalIssues=Be,i):me(W,i.policyConflictLog=Be,i),h({kind:$.kind,idx:$.idx+1})}async function D(){n(0,c=null),me(W,i.policyConflictLog=i.policyConflictLog.toSorted(($,U)=>Pe($.conflict)-Pe(U.conflict)),i),me(W,i.criticalIssues=i.criticalIssues.toSorted(($,U)=>Te($.criticalIssue)-Te(U.criticalIssue)),i),_!=null&&(await ke(),n(4,s.scrollTop=_,s),_=null)}function o($){if(!E){if(c!=null){D();return}u=="critical"?(me(W,i.criticalIssues=[...i.criticalIssues,{criticalIssue:"",stage:"",point:$.detail.lngLat.toArray(),locationName:"",resolved:"",notes:""}],i),h({kind:"critical",idx:i.criticalIssues.length-1})):(me(W,i.policyConflictLog=[...i.policyConflictLog,{conflict:"",stage:"",point:$.detail.lngLat.toArray(),locationName:"",resolved:"",notes:""}],i),h({kind:"conflict",idx:i.policyConflictLog.length-1}))}}ot(()=>{S(!1)});function p(){window.confirm("Delete this entry?")&&(c.kind=="critical"?(i.criticalIssues.splice(c.idx,1),W.set(i)):(i.policyConflictLog.splice(c.idx,1),W.set(i)),D())}function S($){let U={type:"FeatureCollection",features:[...i.criticalIssues.map(_e=>Ie(_e.point)),...i.policyConflictLog.map(_e=>Ie(_e.point)),...i.summary.networkMap.features]};U.features.length>0&&r.fitBounds(ft(U),{padding:20,animate:$})}function N($){let U=$.criticalIssue?dt($.criticalIssue):"Unknown critical";return $.locationName?`${U} (${$.locationName})`:U}function j($){let U=$.conflict?ht($.conflict):"Unknown conflict";return $.locationName?`${U} (${$.locationName})`:U}function L($){if(c!=null&&$.key=="Escape")$.stopPropagation(),D();else if(c!=null&&$.key=="Delete"){let U=$.target.tagName;if(U=="INPUT"||U=="TEXTAREA")return;$.stopPropagation(),p()}}const T=()=>S(!0);function B($){E=$,n(6,E)}function re($){f=$,n(7,f)}function g($){u=$,n(5,u)}const k=$=>F({kind:"critical",idx:$}),H=$=>n(1,m={kind:"critical",idx:$}),ie=()=>n(1,m=null),P=$=>F({kind:"conflict",idx:$}),w=$=>n(1,m={kind:"conflict",idx:$}),$e=()=>n(1,m=null),fe=()=>C({kind:"critical",idx:c.idx}),a=()=>C({kind:"conflict",idx:c.idx});function v($){x[$?"unshift":"push"](()=>{s=$,n(4,s)})}function le($,U){t.$$.not_equal(U.point,$)&&(U.point=$,W.set(i))}const ne=$=>h({kind:"critical",idx:$}),ce=$=>h({kind:"critical",idx:$});function ue($,U){t.$$.not_equal(U.point,$)&&(U.point=$,W.set(i))}const pe=$=>h({kind:"conflict",idx:$}),et=$=>h({kind:"conflict",idx:$});function tt($){r=$,n(3,r)}return t.$$.update=()=>{t.$$.dirty[0]&7&&n(8,l=xt(i,c,m))},[c,m,i,r,s,u,E,f,l,h,F,C,D,o,p,S,N,j,L,T,B,re,g,k,H,ie,P,w,$e,fe,a,v,le,ne,ce,ue,pe,et,tt]}class yl extends Ne{constructor(e){super(),Ee(this,e,el,Qt,Le,{},null,[-1,-1])}}export{yl as component};
