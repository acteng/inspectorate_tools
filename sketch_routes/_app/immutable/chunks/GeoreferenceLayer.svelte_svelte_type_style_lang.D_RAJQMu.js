import{s as R,k as z,w as T,a as D,e as S,E as P,g as G,c as C,m as J,i as g,x,n as ee,f as $,G as ke,t as v,b as U,d as w,h as y,W as ye,Y as _e,z as A,X as L,ac as ve,q as ne,p as O,F as le,j as we,y as Se}from"./scheduler.B-9e-9-p.js";import{S as W,i as j,c as B,a as E,m as I,t as b,b as k,d as N,e as te,g as q,f as F}from"./index.DroATz0g.js";import{e as oe}from"./each.DAWvWy0T.js";import{C as Ce}from"./CollapsibleCard.BozK6AqH.js";import{S as de}from"./SecondaryButton.3eYdcbxs.js";import{S as Be}from"./Select.CkHvvajI.js";/* empty css                                            */import{v as ae,a as Ee,t as $e,p as Ie,q as Ne}from"./index.ClFpVPGG.js";import{C as De}from"./Marker.CIe9GyU8.js";import{R as Ge}from"./Radio.BdRLhhzG.js";import{B as Le}from"./ClickableCard.ByJv8LVI.js";import{D as Pe}from"./DefaultButton.CUKukJh0.js";import{F as ze}from"./FormElement.CoNOC2Hk.js";import{W as Oe}from"./WarningButton.ayNgkn5A.js";import{w as V}from"./index.sY0ZqQkh.js";function se(l,e,t){const n=l.slice();return n[6]=e[t][0],n[7]=e[t][1],n}function Ue(l){let e;return{c(){e=v("disabled")},l(t){e=w(t,"disabled")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Ae(l){let e;return{c(){e=v("enabled")},l(t){e=w(t,"enabled")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Re(l){let e,t=l[7]+"",n,o;return{c(){e=v("Set "),n=v(t),o=v(` API key
      `)},l(a){e=w(a,"Set "),n=w(a,t),o=w(a,` API key
      `)},m(a,s){g(a,e,s),g(a,n,s),g(a,o,s)},p:ee,d(a){a&&($(e),$(n),$(o))}}}function re(l){let e,t,n=l[7]+"",o,a,s,i,c;function m(f,_){return Q(f[6])?Ae:Ue}let u=m(l)(l);function p(){return l[5](l[6])}return i=new de({props:{$$slots:{default:[Re]},$$scope:{ctx:l}}}),i.$on("click",p),{c(){e=S("p"),t=S("u"),o=v(n),a=v(`
        : `),u.c(),s=D(),B(i.$$.fragment)},l(f){e=C(f,"P",{});var _=U(e);t=C(_,"U",{});var d=U(t);o=w(d,n),d.forEach($),a=w(_,`
        : `),u.l(_),_.forEach($),s=G(f),E(i.$$.fragment,f)},m(f,_){g(f,e,_),y(e,t),y(t,o),y(e,a),u.m(e,null),g(f,s,_),I(i,f,_),c=!0},p(f,_){l=f;const d={};_&1024&&(d.$$scope={dirty:_,ctx:l}),i.$set(d)},i(f){c||(b(i.$$.fragment,f),c=!0)},o(f){k(i.$$.fragment,f),c=!1},d(f){f&&($(e),$(s)),u.d(),N(i,f)}}}function ie(l){let e,t,n=oe([[X,"Bluesky"],[Z,"Ordnance Survey"]]),o=[];for(let s=0;s<2;s+=1)o[s]=re(se(l,n,s));const a=s=>k(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<2;s+=1)o[s].c();e=P()},l(s){for(let i=0;i<2;i+=1)o[i].l(s);e=P()},m(s,i){for(let c=0;c<2;c+=1)o[c]&&o[c].m(s,i);g(s,e,i),t=!0},p(s,i){if(i&8){n=oe([[X,"Bluesky"],[Z,"Ordnance Survey"]]);let c;for(c=0;c<2;c+=1){const m=se(s,n,c);o[c]?(o[c].p(m,i),b(o[c],1)):(o[c]=re(m),o[c].c(),b(o[c],1),o[c].m(e.parentNode,e))}for(q(),c=2;c<2;c+=1)a(c);F()}},i(s){if(!t){for(let i=0;i<2;i+=1)b(o[i]);t=!0}},o(s){o=o.filter(Boolean);for(let i=0;i<2;i+=1)k(o[i]);t=!1},d(s){s&&$(e),ke(o,s)}}}function Ve(l){let e,t,n,o,a=`If you have internal access, you can opt into higher-quality satellite
    imagery.`,s,i=l[0],c,m;function r(f){l[4](f)}let u={label:"Basemap",choices:l[1]};l[2]!==void 0&&(u.value=l[2]),e=new Be({props:u}),T.push(()=>te(e,"value",r));let p=ie(l);return{c(){B(e.$$.fragment),n=D(),o=S("p"),o.textContent=a,s=D(),p.c(),c=P()},l(f){E(e.$$.fragment,f),n=G(f),o=C(f,"P",{"data-svelte-h":!0}),J(o)!=="svelte-itr0ad"&&(o.textContent=a),s=G(f),p.l(f),c=P()},m(f,_){I(e,f,_),g(f,n,_),g(f,o,_),g(f,s,_),p.m(f,_),g(f,c,_),m=!0},p(f,_){const d={};_&2&&(d.choices=f[1]),!t&&_&4&&(t=!0,d.value=f[2],x(()=>t=!1)),e.$set(d),_&1&&R(i,i=f[0])?(q(),k(p,1,1,ee),F(),p=ie(f),p.c(),b(p,1),p.m(c.parentNode,c)):p.p(f,_)},i(f){m||(b(e.$$.fragment,f),b(p),m=!0)},o(f){k(e.$$.fragment,f),k(p),m=!1},d(f){f&&($(n),$(o),$(s),$(c)),N(e,f),p.d(f)}}}function Ke(l){let e,t;return e=new Ce({props:{label:"Basemap",$$slots:{default:[Ve]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,o){I(e,n,o),t=!0},p(n,[o]){const a={};o&1031&&(a.$$scope={dirty:o,ctx:n}),e.$set(a)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}let X="bluesky-api-key",Z="os-api-key";function Q(l){let e=window.localStorage.getItem(l);return e!=null&&e.length>0}function ce(){let l=[];return Q(X)&&l.push(["bluesky","Bluesky Satellite (12.5cm)"]),Q(Z)&&l.push(["os-road","OS Road"]),l.push(["maptiler-hybrid","MapTiler Satellite"]),l.push(["maptiler-streets","MapTiler Streets"]),l.push(["maptiler-dataviz","MapTiler Dataviz"]),l.push(["maptiler-uk-openzoomstack-light","OS Open Zoomstack"]),l}function Me(l,e,t){let n;z(l,ae,m=>t(2,n=m));let o=0;function a(m){let r=window.prompt("Enter the API key provided to you",window.localStorage.getItem(m)||"");window.localStorage.setItem(m,r||""),t(1,s=ce()),t(0,o+=1)}let s=ce();function i(m){n=m,ae.set(n)}return[o,s,n,a,i,m=>a(m)]}class bt extends W{constructor(e){super(),j(this,e,Me,Ke,R,{})}}function Te(l,e,t){let n;const o=ye();let{layer:a=void 0}=e;const{map:s}=Ee();z(l,s,r=>t(2,n=r));function i(r){o(r.type,{...r,map:s})}const c=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],m=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return _e(()=>{if(n)if(a)for(const r of c)n.off(r,a,i);else for(const r of m)n.off(r,i)}),l.$$set=r=>{"layer"in r&&t(1,a=r.layer)},l.$$.update=()=>{if(l.$$.dirty&6&&n)if(a)for(const r of c)n.on(r,a,i);else for(const r of m)n.on(r,i)},[s,a,n]}class ht extends W{constructor(e){super(),j(this,e,Te,null,R,{layer:1})}}const{window:We}=$e;function je(l){let e;return{c(){e=v("StreetView")},l(t){e=w(t,"StreetView")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function fe(l){let e,t,n;function o(s){l[5](s)}let a={legend:"Source",choices:[["google","Google StreetView"],["bing","Bing Streetside"]],inlineSmall:!0};return l[1]!==void 0&&(a.value=l[1]),e=new Ge({props:a}),T.push(()=>te(e,"value",o)),{c(){B(e.$$.fragment)},l(s){E(e.$$.fragment,s)},m(s,i){I(e,s,i),n=!0},p(s,i){const c={};!t&&i&2&&(t=!0,c.value=s[1],x(()=>t=!1)),e.$set(c)},i(s){n||(b(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function qe(l){let e,t,n,o,a,s,i;function c(u){l[4](u)}let m={$$slots:{default:[je]},$$scope:{ctx:l}};l[0]!==void 0&&(m.checked=l[0]),e=new De({props:m}),T.push(()=>te(e,"checked",c));let r=l[0]&&fe(l);return{c(){B(e.$$.fragment),n=D(),r&&r.c(),o=P()},l(u){E(e.$$.fragment,u),n=G(u),r&&r.l(u),o=P()},m(u,p){I(e,u,p),g(u,n,p),r&&r.m(u,p),g(u,o,p),a=!0,s||(i=A(We,"keydown",l[2]),s=!0)},p(u,[p]){const f={};p&512&&(f.$$scope={dirty:p,ctx:u}),!t&&p&1&&(t=!0,f.checked=u[0],x(()=>t=!1)),e.$set(f),u[0]?r?(r.p(u,p),p&1&&b(r,1)):(r=fe(u),r.c(),b(r,1),r.m(o.parentNode,o)):r&&(q(),k(r,1,1,()=>{r=null}),F())},i(u){a||(b(e.$$.fragment,u),b(r),a=!0)},o(u){k(e.$$.fragment,u),k(r),a=!1},d(u){u&&($(n),$(o)),N(e,u),r&&r.d(u),s=!1,i()}}}function Fe(l,e,t){let{map:n}=e,{enabled:o=!1}=e,a="google";function s(){n&&(n.on("click",c),n.getCanvas().style.cursor="zoom-in")}function i(){n&&(n.off("click",c),n.getCanvas().style.cursor="auto")}_e(i);function c(p){window.open(a=="google"?Ie(p.lngLat.toArray()):Ne(p.lngLat.toArray()),"_blank"),t(0,o=!1)}function m(p){o&&p.key=="Escape"&&t(0,o=!1)}function r(p){o=p,t(0,o)}function u(p){a=p,t(1,a)}return l.$$set=p=>{"map"in p&&t(3,n=p.map),"enabled"in p&&t(0,o=p.enabled)},l.$$.update=()=>{l.$$.dirty&1&&(o?s():i())},[o,a,m,n,r,u]}class kt extends W{constructor(e){super(),j(this,e,Fe,qe,R,{map:3,enabled:0})}}const M=V(!1),Y=V(null),H=V(100),ue=V({lng:0,lat:0}),pe=V({lng:0,lat:0}),{window:Ye}=$e;function He(l){let e,t;return e=new de({props:{$$slots:{default:[Xe]},$$scope:{ctx:l}}}),e.$on("click",l[10]),{c(){B(e.$$.fragment)},l(n){E(e.$$.fragment,n)},m(n,o){I(e,n,o),t=!0},p(n,o){const a={};o&8192&&(a.$$scope={dirty:o,ctx:n}),e.$set(a)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function Je(l){let e,t,n="Georeference an image",o,a,s,i,c,m,r,u=`Note this image isn't saved as part of this scheme. When you close this
      page, it'll be lost.`,p;a=new Le({props:{$$slots:{default:[xe]},$$scope:{ctx:l}}}),i=new ze({props:{label:"Load an image",id:"load-image",$$slots:{default:[et]},$$scope:{ctx:l}}});let f=l[3]&&me(l);return{c(){e=S("div"),t=S("h2"),t.textContent=n,o=D(),B(a.$$.fragment),s=D(),B(i.$$.fragment),c=D(),f&&f.c(),m=D(),r=S("p"),r.textContent=u,this.h()},l(_){e=C(_,"DIV",{style:!0});var d=U(e);t=C(d,"H2",{"data-svelte-h":!0}),J(t)!=="svelte-fociiu"&&(t.textContent=n),o=G(d),E(a.$$.fragment,d),s=G(d),E(i.$$.fragment,d),c=G(d),f&&f.l(d),m=G(d),r=C(d,"P",{"data-svelte-h":!0}),J(r)!=="svelte-d8uklv"&&(r.textContent=u),d.forEach($),this.h()},h(){ne(e,"border","1px solid black"),ne(e,"padding","4px")},m(_,d){g(_,e,d),y(e,t),y(e,o),I(a,e,null),y(e,s),I(i,e,null),y(e,c),f&&f.m(e,null),y(e,m),y(e,r),p=!0},p(_,d){const h={};d&8202&&(h.$$scope={dirty:d,ctx:_}),a.$set(h);const K={};d&8193&&(K.$$scope={dirty:d,ctx:_}),i.$set(K),_[3]?f?f.p(_,d):(f=me(_),f.c(),f.m(e,m)):f&&(f.d(1),f=null)},i(_){p||(b(a.$$.fragment,_),b(i.$$.fragment,_),p=!0)},o(_){k(a.$$.fragment,_),k(i.$$.fragment,_),p=!1},d(_){_&&$(e),N(a),N(i),f&&f.d()}}}function Xe(l){let e;return{c(){e=v("Georeference an image")},l(t){e=w(t,"Georeference an image")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Ze(l){let e;return{c(){e=v("Save")},l(t){e=w(t,"Save")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Qe(l){let e;return{c(){e=v("Delete")},l(t){e=w(t,"Delete")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function xe(l){let e,t,n,o;return e=new Pe({props:{$$slots:{default:[Ze]},$$scope:{ctx:l}}}),e.$on("click",l[7]),n=new Oe({props:{disabled:!l[3],$$slots:{default:[Qe]},$$scope:{ctx:l}}}),n.$on("click",l[5]),{c(){B(e.$$.fragment),t=D(),B(n.$$.fragment)},l(a){E(e.$$.fragment,a),t=G(a),E(n.$$.fragment,a)},m(a,s){I(e,a,s),g(a,t,s),I(n,a,s),o=!0},p(a,s){const i={};s&8192&&(i.$$scope={dirty:s,ctx:a}),e.$set(i);const c={};s&8&&(c.disabled=!a[3]),s&8192&&(c.$$scope={dirty:s,ctx:a}),n.$set(c)},i(a){o||(b(e.$$.fragment,a),b(n.$$.fragment,a),o=!0)},o(a){k(e.$$.fragment,a),k(n.$$.fragment,a),o=!1},d(a){a&&$(t),N(e,a),N(n,a)}}}function et(l){let e,t,n;return{c(){e=S("input"),this.h()},l(o){e=C(o,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){O(e,"class","govuk-file-upload"),O(e,"id","load-image"),O(e,"type","file")},m(o,a){g(o,e,a),l[8](e),t||(n=A(e,"change",l[4]),t=!0)},p:ee,d(o){o&&$(e),l[8](null),t=!1,n()}}}function me(l){let e,t,n,o,a,s,i,c;return{c(){e=S("div"),t=S("label"),n=S("input"),o=v(`
          Opacity: `),a=v(l[2]),s=v("%"),this.h()},l(m){e=C(m,"DIV",{});var r=U(e);t=C(r,"LABEL",{});var u=U(t);n=C(u,"INPUT",{type:!0,min:!0,max:!0}),o=w(u,`
          Opacity: `),a=w(u,l[2]),s=w(u,"%"),u.forEach($),r.forEach($),this.h()},h(){O(n,"type","range"),O(n,"min","0"),O(n,"max","100")},m(m,r){g(m,e,r),y(e,t),y(t,n),le(n,l[2]),y(t,o),y(t,a),y(t,s),i||(c=[A(n,"change",l[9]),A(n,"input",l[9])],i=!0)},p(m,r){r&4&&le(n,m[2]),r&4&&we(a,m[2])},d(m){m&&$(e),i=!1,Se(c)}}}function tt(l){let e,t,n,o,a,s;const i=[Je,He],c=[];function m(r,u){return r[1]?0:1}return e=m(l),t=c[e]=i[e](l),{c(){t.c(),n=P()},l(r){t.l(r),n=P()},m(r,u){c[e].m(r,u),g(r,n,u),o=!0,a||(s=A(Ye,"keydown",l[6]),a=!0)},p(r,[u]){let p=e;e=m(r),e===p?c[e].p(r,u):(q(),k(c[p],1,1,()=>{c[p]=null}),F(),t=c[e],t?t.p(r,u):(t=c[e]=i[e](r),t.c()),b(t,1),t.m(n.parentNode,n))},i(r){o||(b(t),o=!0)},o(r){k(t),o=!1},d(r){r&&$(n),c[e].d(r),a=!1,s()}}}function nt(l,e,t){let n,o,a,s,i;z(l,M,h=>t(1,n=h)),z(l,H,h=>t(2,o=h)),z(l,Y,h=>t(3,a=h)),z(l,pe,h=>t(11,s=h)),z(l,ue,h=>t(12,i=h));let c;async function m(h){r();let K=await c.files[0].arrayBuffer(),ge=new Blob([new Uint8Array(K)]);L(Y,a=URL.createObjectURL(ge),a),L(ue,i={lng:0,lat:0},i),L(pe,s={lng:0,lat:0},s);let be=c.files[0].name.toLowerCase();[".gif",".jpg",".jpeg",".png"].some(he=>be.endsWith(he))||window.alert("You can only georeference image files (GIF, JPEG, PNG). If you don't see anything on the map, try a different file type.")}function r(){L(Y,a=null,a),L(H,o=100,o)}function u(h){n&&h.key=="Escape"&&(h.stopPropagation(),L(M,n=!1,n))}const p=()=>L(M,n=!1,n);function f(h){T[h?"unshift":"push"](()=>{c=h,t(0,c)})}function _(){o=ve(this.value),H.set(o)}return[c,n,o,a,m,r,u,p,f,_,()=>L(M,n=!0,n)]}class yt extends W{constructor(e){super(),j(this,e,nt,tt,R,{})}}export{bt as B,yt as G,ht as M,kt as S,pe as b,Y as i,H as o,M as s,ue as t};
