import{s as R,l as A,y as K,e as O,a as M,c as T,m as L,g as E,b as q,f as b,q as k,i as I,h as y,u as U,r as X,v as Y,z as x,Q as ee,t as Z,d as H}from"./scheduler.V-ByFQ7u.js";import{S as te,i as ne,e as oe,c as F,a as D,m as N,t as g,g as re,b as w,f as ae,d as z}from"./index.Zcf2TLuh.js";import{M as se,b as le}from"./index.BNHIJl59.js";import{E as ie}from"./ErrorMessage.2LFGPwzW.js";import{F as fe}from"./FileInput.qPcioyto.js";import{S as me}from"./SecondaryButton.BQqRVY7L.js";/* empty css                                            */import{W as pe}from"./WarningButton.BdQPQy4u.js";import{C as ue}from"./ContextualMap.DMcZWDf3.js";function P(a){let t,o,r,s;return t=new pe({props:{$$slots:{default:[ce]},$$scope:{ctx:a}}}),t.$on("click",a[3]),r=new me({props:{$$slots:{default:[$e]},$$scope:{ctx:a}}}),r.$on("click",a[7]),{c(){F(t.$$.fragment),o=M(),F(r.$$.fragment)},l(e){D(t.$$.fragment,e),o=E(e),D(r.$$.fragment,e)},m(e,l){N(t,e,l),I(e,o,l),N(r,e,l),s=!0},p(e,l){const h={};l&512&&(h.$$scope={dirty:l,ctx:e}),t.$set(h);const v={};l&512&&(v.$$scope={dirty:l,ctx:e}),r.$set(v)},i(e){s||(g(t.$$.fragment,e),g(r.$$.fragment,e),s=!0)},o(e){w(t.$$.fragment,e),w(r.$$.fragment,e),s=!1},d(e){e&&b(o),z(t,e),z(r,e)}}}function ce(a){let t;return{c(){t=Z("Clear map")},l(o){t=H(o,"Clear map")},m(o,r){I(o,t,r)},d(o){o&&b(t)}}}function $e(a){let t;return{c(){t=Z("Zoom to fit")},l(o){t=H(o,"Zoom to fit")},m(o,r){I(o,t,r)},d(o){o&&b(t)}}}function _e(a){let t,o;return t=new ue({props:{gj:a[0],show:!0}}),{c(){F(t.$$.fragment)},l(r){D(t.$$.fragment,r)},m(r,s){N(t,r,s),o=!0},p(r,s){const e={};s&1&&(e.gj=r[0]),t.$set(e)},i(r){o||(g(t.$$.fragment,r),o=!0)},o(r){w(t.$$.fragment,r),o=!1},d(r){z(t,r)}}}function ge(a){let t,o="Network Map",r,s,e,l,h=`Please add a map showing the section of route being scored in this file.
      If the route is part of a longer route of multiple sections (covered in
      other files), please show this on the map for context too.`,v,d,C,$,B,p,J,_,m,V,S;d=new fe({props:{label:"Import from GeoJSON file",onLoad:a[4]}}),$=new ie({props:{errorMessage:a[2]}});let i=a[0].features.length>0&&P(a);const W=a[6].default,u=A(W,a,a[9],null);function Q(n){a[8](n)}let G={$$slots:{default:[_e]},$$scope:{ctx:a}};return a[1]!==void 0&&(G.map=a[1]),m=new se({props:G}),K.push(()=>oe(m,"map",Q)),{c(){t=O("h2"),t.textContent=o,r=M(),s=O("div"),e=O("div"),l=O("p"),l.textContent=h,v=M(),F(d.$$.fragment),C=M(),F($.$$.fragment),B=M(),i&&i.c(),p=M(),u&&u.c(),J=M(),_=O("div"),F(m.$$.fragment),this.h()},l(n){t=T(n,"H2",{"data-svelte-h":!0}),L(t)!=="svelte-1fkh1ci"&&(t.textContent=o),r=E(n),s=T(n,"DIV",{style:!0});var f=q(s);e=T(f,"DIV",{style:!0});var c=q(e);l=T(c,"P",{"data-svelte-h":!0}),L(l)!=="svelte-1r7hkzo"&&(l.textContent=h),v=E(c),D(d.$$.fragment,c),C=E(c),D($.$$.fragment,c),B=E(c),i&&i.l(c),p=E(c),u&&u.l(c),c.forEach(b),J=E(f),_=T(f,"DIV",{style:!0});var j=q(_);D(m.$$.fragment,j),j.forEach(b),f.forEach(b),this.h()},h(){k(e,"width","30%"),k(e,"overflow-y","scroll"),k(e,"padding","10px"),k(e,"border","1px solid black"),k(_,"position","relative"),k(_,"width","70%"),k(s,"display","flex"),k(s,"height","80vh")},m(n,f){I(n,t,f),I(n,r,f),I(n,s,f),y(s,e),y(e,l),y(e,v),N(d,e,null),y(e,C),N($,e,null),y(e,B),i&&i.m(e,null),y(e,p),u&&u.m(e,null),y(s,J),y(s,_),N(m,_,null),S=!0},p(n,[f]){const c={};f&4&&(c.errorMessage=n[2]),$.$set(c),n[0].features.length>0?i?(i.p(n,f),f&1&&g(i,1)):(i=P(n),i.c(),g(i,1),i.m(e,p)):i&&(re(),w(i,1,1,()=>{i=null}),ae()),u&&u.p&&(!S||f&512)&&U(u,W,n,n[9],S?Y(W,n[9],f,null):X(n[9]),null);const j={};f&513&&(j.$$scope={dirty:f,ctx:n}),!V&&f&2&&(V=!0,j.map=n[1],x(()=>V=!1)),m.$set(j)},i(n){S||(g(d.$$.fragment,n),g($.$$.fragment,n),g(i),g(u,n),g(m.$$.fragment,n),S=!0)},o(n){w(d.$$.fragment,n),w($.$$.fragment,n),w(i),w(u,n),w(m.$$.fragment,n),S=!1},d(n){n&&(b(t),b(r),b(s)),z(d),z($),i&&i.d(),u&&u.d(n),z(m)}}}function he(a,t,o){let{$$slots:r={},$$scope:s}=t,{gj:e}=t,l,h="";ee(()=>{C(!1)});function v(){window.confirm("Do you really want to erase the map data?")&&o(0,e={type:"FeatureCollection",features:[]})}function d(p,J){var _;o(2,h="");try{let m=JSON.parse(J);if(m.type!="FeatureCollection")throw new Error("This doesn't look like a GeoJSON file");if(!((_=m.origin)!=null&&_.startsWith("atip-")))throw new Error("This file wasn't produced with the Scheme Sketcher");if(m.crs)throw new Error("This file has a Coordinate Reference System set; it's not suitable for a web map");o(0,e=m),C(!0)}catch(m){o(2,h=`Error importing ${p}: ${m}`)}}function C(p){e.features.length>0&&l.fitBounds(le(e),{padding:20,animate:p})}const $=()=>C(!0);function B(p){l=p,o(1,l)}return a.$$set=p=>{"gj"in p&&o(0,e=p.gj),"$$scope"in p&&o(9,s=p.$$scope)},[e,l,h,v,d,C,r,$,B,s]}class Se extends te{constructor(t){super(),ne(this,t,he,ge,R,{gj:0})}}export{Se as C};
