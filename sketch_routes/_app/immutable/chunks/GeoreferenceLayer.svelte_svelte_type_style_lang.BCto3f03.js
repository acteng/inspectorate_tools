import{s as R,k as O,w as T,a as G,e as S,F as P,g as L,c as C,m as Z,i as g,x as ee,n as te,f as $,X as D,G as ke,t as v,b as z,d as w,h as y,W as ye,Y as _e,B as A,ac as ve,q as le,p as U,E as oe,j as we,y as Se}from"./scheduler.BwAWs7j7.js";import{S as W,i as F,c as B,a as E,m as I,t as b,b as k,d as N,e as ne,g as q,f as Y}from"./index.C0pl5Pks.js";import{e as ae}from"./each.DkmD9kU5.js";import{C as Ce}from"./CollapsibleCard.BN0FWgZy.js";import{S as de}from"./SecondaryButton.Bic26FJA.js";import{S as Be}from"./Select.C4LLdtYT.js";/* empty css                                            */import{v as H,a as Ee,k as $e,f as Ie,j as Ne}from"./index.B4Je-2Of.js";import{C as De}from"./Marker.Cgr6lGka.js";import{R as Ge}from"./Radio.DFcPkATK.js";import{B as Le}from"./ClickableCard.MyVnOCtX.js";import{D as Pe}from"./DefaultButton.C-mwfe5j.js";import{F as Oe}from"./FormElement.CX4EByZX.js";import{W as Ue}from"./WarningButton.duFsBo1I.js";import{w as V}from"./entry.nxnTsrLy.js";function se(l,e,n){const t=l.slice();return t[6]=e[n][0],t[7]=e[n][1],t}function ze(l){let e;return{c(){e=v("disabled")},l(n){e=w(n,"disabled")},m(n,t){g(n,e,t)},d(n){n&&$(e)}}}function Ae(l){let e;return{c(){e=v("enabled")},l(n){e=w(n,"enabled")},m(n,t){g(n,e,t)},d(n){n&&$(e)}}}function Re(l){let e,n=l[7]+"",t,o;return{c(){e=v("Set "),t=v(n),o=v(` API key
      `)},l(a){e=w(a,"Set "),t=w(a,n),o=w(a,` API key
      `)},m(a,s){g(a,e,s),g(a,t,s),g(a,o,s)},p:te,d(a){a&&($(e),$(t),$(o))}}}function re(l){let e,n,t=l[7]+"",o,a,s,i,c;function m(f,_){return x(f[6])?Ae:ze}let u=m(l)(l);function p(){return l[5](l[6])}return i=new de({props:{$$slots:{default:[Re]},$$scope:{ctx:l}}}),i.$on("click",p),{c(){e=S("p"),n=S("u"),o=v(t),a=v(`
        : `),u.c(),s=G(),B(i.$$.fragment)},l(f){e=C(f,"P",{});var _=z(e);n=C(_,"U",{});var d=z(n);o=w(d,t),d.forEach($),a=w(_,`
        : `),u.l(_),_.forEach($),s=L(f),E(i.$$.fragment,f)},m(f,_){g(f,e,_),y(e,n),y(n,o),y(e,a),u.m(e,null),g(f,s,_),I(i,f,_),c=!0},p(f,_){l=f;const d={};_&1024&&(d.$$scope={dirty:_,ctx:l}),i.$set(d)},i(f){c||(b(i.$$.fragment,f),c=!0)},o(f){k(i.$$.fragment,f),c=!1},d(f){f&&($(e),$(s)),u.d(),N(i,f)}}}function ie(l){let e,n,t=ae([[M,"Bluesky"],[Q,"Ordnance Survey"]]),o=[];for(let s=0;s<2;s+=1)o[s]=re(se(l,t,s));const a=s=>k(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<2;s+=1)o[s].c();e=P()},l(s){for(let i=0;i<2;i+=1)o[i].l(s);e=P()},m(s,i){for(let c=0;c<2;c+=1)o[c]&&o[c].m(s,i);g(s,e,i),n=!0},p(s,i){if(i&8){t=ae([[M,"Bluesky"],[Q,"Ordnance Survey"]]);let c;for(c=0;c<2;c+=1){const m=se(s,t,c);o[c]?(o[c].p(m,i),b(o[c],1)):(o[c]=re(m),o[c].c(),b(o[c],1),o[c].m(e.parentNode,e))}for(q(),c=2;c<2;c+=1)a(c);Y()}},i(s){if(!n){for(let i=0;i<2;i+=1)b(o[i]);n=!0}},o(s){o=o.filter(Boolean);for(let i=0;i<2;i+=1)k(o[i]);n=!1},d(s){s&&$(e),ke(o,s)}}}function Ve(l){let e,n,t,o,a=`If you have internal access, you can opt into higher-quality satellite
    imagery.`,s,i=l[0],c,m;function r(f){l[4](f)}let u={label:"Basemap",choices:l[1]};l[2]!==void 0&&(u.value=l[2]),e=new Be({props:u}),T.push(()=>ne(e,"value",r));let p=ie(l);return{c(){B(e.$$.fragment),t=G(),o=S("p"),o.textContent=a,s=G(),p.c(),c=P()},l(f){E(e.$$.fragment,f),t=L(f),o=C(f,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-itr0ad"&&(o.textContent=a),s=L(f),p.l(f),c=P()},m(f,_){I(e,f,_),g(f,t,_),g(f,o,_),g(f,s,_),p.m(f,_),g(f,c,_),m=!0},p(f,_){const d={};_&2&&(d.choices=f[1]),!n&&_&4&&(n=!0,d.value=f[2],ee(()=>n=!1)),e.$set(d),_&1&&R(i,i=f[0])?(q(),k(p,1,1,te),Y(),p=ie(f),p.c(),b(p,1),p.m(c.parentNode,c)):p.p(f,_)},i(f){m||(b(e.$$.fragment,f),b(p),m=!0)},o(f){k(e.$$.fragment,f),k(p),m=!1},d(f){f&&($(t),$(o),$(s),$(c)),N(e,f),p.d(f)}}}function je(l){let e,n;return e=new Ce({props:{label:"Basemap",$$slots:{default:[Ve]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,o){I(e,t,o),n=!0},p(t,[o]){const a={};o&1031&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}let M="bluesky-api-key",Q="os-api-key";function x(l){let e=window.localStorage.getItem(l);return e!=null&&e.length>0}function ce(){let l=[];return x(M)&&l.push(["bluesky","Bluesky Satellite (12.5cm)"]),x(Q)&&l.push(["os-road","OS Road"]),l.push(["maptiler-hybrid","MapTiler Satellite"]),l.push(["maptiler-streets","MapTiler Streets"]),l.push(["maptiler-dataviz","MapTiler Dataviz"]),l.push(["maptiler-uk-openzoomstack-light","OS Open Zoomstack"]),l}function Ke(l,e,n){let t;O(l,H,m=>n(2,t=m));let o=0;function a(m){let r=window.prompt("Enter the API key provided to you",window.localStorage.getItem(m)||"");window.localStorage.setItem(m,r||""),n(1,s=ce()),n(0,o+=1),r&&r.length>0&&D(H,t=m==M?"bluesky":"os-road",t)}let s=ce();function i(m){t=m,H.set(t)}return[o,s,t,a,i,m=>a(m)]}class bt extends W{constructor(e){super(),F(this,e,Ke,je,R,{})}}function Me(l,e,n){let t;const o=ye();let{layer:a=void 0}=e;const{map:s}=Ee();O(l,s,r=>n(2,t=r));function i(r){o(r.type,{...r,map:s})}const c=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],m=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return _e(()=>{if(t)if(a)for(const r of c)t.off(r,a,i);else for(const r of m)t.off(r,i)}),l.$$set=r=>{"layer"in r&&n(1,a=r.layer)},l.$$.update=()=>{if(l.$$.dirty&6&&t)if(a)for(const r of c)t.on(r,a,i);else for(const r of m)t.on(r,i)},[s,a,t]}class ht extends W{constructor(e){super(),F(this,e,Me,null,R,{layer:1})}}const{window:Te}=$e;function We(l){let e;return{c(){e=v("StreetView")},l(n){e=w(n,"StreetView")},m(n,t){g(n,e,t)},d(n){n&&$(e)}}}function fe(l){let e,n,t;function o(s){l[5](s)}let a={legend:"Source",choices:[["google","Google StreetView"],["bing","Bing Streetside"]],inlineSmall:!0};return l[1]!==void 0&&(a.value=l[1]),e=new Ge({props:a}),T.push(()=>ne(e,"value",o)),{c(){B(e.$$.fragment)},l(s){E(e.$$.fragment,s)},m(s,i){I(e,s,i),t=!0},p(s,i){const c={};!n&&i&2&&(n=!0,c.value=s[1],ee(()=>n=!1)),e.$set(c)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function Fe(l){let e,n,t,o,a,s,i;function c(u){l[4](u)}let m={$$slots:{default:[We]},$$scope:{ctx:l}};l[0]!==void 0&&(m.checked=l[0]),e=new De({props:m}),T.push(()=>ne(e,"checked",c));let r=l[0]&&fe(l);return{c(){B(e.$$.fragment),t=G(),r&&r.c(),o=P()},l(u){E(e.$$.fragment,u),t=L(u),r&&r.l(u),o=P()},m(u,p){I(e,u,p),g(u,t,p),r&&r.m(u,p),g(u,o,p),a=!0,s||(i=A(Te,"keydown",l[2]),s=!0)},p(u,[p]){const f={};p&512&&(f.$$scope={dirty:p,ctx:u}),!n&&p&1&&(n=!0,f.checked=u[0],ee(()=>n=!1)),e.$set(f),u[0]?r?(r.p(u,p),p&1&&b(r,1)):(r=fe(u),r.c(),b(r,1),r.m(o.parentNode,o)):r&&(q(),k(r,1,1,()=>{r=null}),Y())},i(u){a||(b(e.$$.fragment,u),b(r),a=!0)},o(u){k(e.$$.fragment,u),k(r),a=!1},d(u){u&&($(t),$(o)),N(e,u),r&&r.d(u),s=!1,i()}}}function qe(l,e,n){let{map:t}=e,{enabled:o=!1}=e,a="google";function s(){t&&(t.on("click",c),t.getCanvas().style.cursor="zoom-in")}function i(){t&&(t.off("click",c),t.getCanvas().style.cursor="auto")}_e(i);function c(p){window.open(a=="google"?Ie(p.lngLat.toArray()):Ne(p.lngLat.toArray()),"_blank"),n(0,o=!1)}function m(p){o&&p.key=="Escape"&&n(0,o=!1)}function r(p){o=p,n(0,o)}function u(p){a=p,n(1,a)}return l.$$set=p=>{"map"in p&&n(3,t=p.map),"enabled"in p&&n(0,o=p.enabled)},l.$$.update=()=>{l.$$.dirty&1&&(o?s():i())},[o,a,m,t,r,u]}class kt extends W{constructor(e){super(),F(this,e,qe,Fe,R,{map:3,enabled:0})}}const K=V(!1),J=V(null),X=V(100),ue=V({lng:0,lat:0}),pe=V({lng:0,lat:0}),{window:Ye}=$e;function He(l){let e,n;return e=new de({props:{$$slots:{default:[Xe]},$$scope:{ctx:l}}}),e.$on("click",l[10]),{c(){B(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,o){I(e,t,o),n=!0},p(t,o){const a={};o&8192&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Je(l){let e,n,t="Georeference an image",o,a,s,i,c,m,r,u=`Note this image isn't saved as part of this scheme. When you close this
      page, it'll be lost.`,p;a=new Le({props:{$$slots:{default:[xe]},$$scope:{ctx:l}}}),i=new Oe({props:{label:"Load an image",id:"load-image",$$slots:{default:[et]},$$scope:{ctx:l}}});let f=l[3]&&me(l);return{c(){e=S("div"),n=S("h2"),n.textContent=t,o=G(),B(a.$$.fragment),s=G(),B(i.$$.fragment),c=G(),f&&f.c(),m=G(),r=S("p"),r.textContent=u,this.h()},l(_){e=C(_,"DIV",{style:!0});var d=z(e);n=C(d,"H2",{"data-svelte-h":!0}),Z(n)!=="svelte-fociiu"&&(n.textContent=t),o=L(d),E(a.$$.fragment,d),s=L(d),E(i.$$.fragment,d),c=L(d),f&&f.l(d),m=L(d),r=C(d,"P",{"data-svelte-h":!0}),Z(r)!=="svelte-d8uklv"&&(r.textContent=u),d.forEach($),this.h()},h(){le(e,"border","1px solid black"),le(e,"padding","4px")},m(_,d){g(_,e,d),y(e,n),y(e,o),I(a,e,null),y(e,s),I(i,e,null),y(e,c),f&&f.m(e,null),y(e,m),y(e,r),p=!0},p(_,d){const h={};d&8202&&(h.$$scope={dirty:d,ctx:_}),a.$set(h);const j={};d&8193&&(j.$$scope={dirty:d,ctx:_}),i.$set(j),_[3]?f?f.p(_,d):(f=me(_),f.c(),f.m(e,m)):f&&(f.d(1),f=null)},i(_){p||(b(a.$$.fragment,_),b(i.$$.fragment,_),p=!0)},o(_){k(a.$$.fragment,_),k(i.$$.fragment,_),p=!1},d(_){_&&$(e),N(a),N(i),f&&f.d()}}}function Xe(l){let e;return{c(){e=v("Georeference an image")},l(n){e=w(n,"Georeference an image")},m(n,t){g(n,e,t)},d(n){n&&$(e)}}}function Ze(l){let e;return{c(){e=v("Save")},l(n){e=w(n,"Save")},m(n,t){g(n,e,t)},d(n){n&&$(e)}}}function Qe(l){let e;return{c(){e=v("Delete")},l(n){e=w(n,"Delete")},m(n,t){g(n,e,t)},d(n){n&&$(e)}}}function xe(l){let e,n,t,o;return e=new Pe({props:{$$slots:{default:[Ze]},$$scope:{ctx:l}}}),e.$on("click",l[7]),t=new Ue({props:{disabled:!l[3],$$slots:{default:[Qe]},$$scope:{ctx:l}}}),t.$on("click",l[5]),{c(){B(e.$$.fragment),n=G(),B(t.$$.fragment)},l(a){E(e.$$.fragment,a),n=L(a),E(t.$$.fragment,a)},m(a,s){I(e,a,s),g(a,n,s),I(t,a,s),o=!0},p(a,s){const i={};s&8192&&(i.$$scope={dirty:s,ctx:a}),e.$set(i);const c={};s&8&&(c.disabled=!a[3]),s&8192&&(c.$$scope={dirty:s,ctx:a}),t.$set(c)},i(a){o||(b(e.$$.fragment,a),b(t.$$.fragment,a),o=!0)},o(a){k(e.$$.fragment,a),k(t.$$.fragment,a),o=!1},d(a){a&&$(n),N(e,a),N(t,a)}}}function et(l){let e,n,t;return{c(){e=S("input"),this.h()},l(o){e=C(o,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){U(e,"class","govuk-file-upload"),U(e,"id","load-image"),U(e,"type","file")},m(o,a){g(o,e,a),l[8](e),n||(t=A(e,"change",l[4]),n=!0)},p:te,d(o){o&&$(e),l[8](null),n=!1,t()}}}function me(l){let e,n,t,o,a,s,i,c;return{c(){e=S("div"),n=S("label"),t=S("input"),o=v(`
          Opacity: `),a=v(l[2]),s=v("%"),this.h()},l(m){e=C(m,"DIV",{});var r=z(e);n=C(r,"LABEL",{});var u=z(n);t=C(u,"INPUT",{type:!0,min:!0,max:!0}),o=w(u,`
          Opacity: `),a=w(u,l[2]),s=w(u,"%"),u.forEach($),r.forEach($),this.h()},h(){U(t,"type","range"),U(t,"min","0"),U(t,"max","100")},m(m,r){g(m,e,r),y(e,n),y(n,t),oe(t,l[2]),y(n,o),y(n,a),y(n,s),i||(c=[A(t,"change",l[9]),A(t,"input",l[9])],i=!0)},p(m,r){r&4&&oe(t,m[2]),r&4&&we(a,m[2])},d(m){m&&$(e),i=!1,Se(c)}}}function tt(l){let e,n,t,o,a,s;const i=[Je,He],c=[];function m(r,u){return r[1]?0:1}return e=m(l),n=c[e]=i[e](l),{c(){n.c(),t=P()},l(r){n.l(r),t=P()},m(r,u){c[e].m(r,u),g(r,t,u),o=!0,a||(s=A(Ye,"keydown",l[6]),a=!0)},p(r,[u]){let p=e;e=m(r),e===p?c[e].p(r,u):(q(),k(c[p],1,1,()=>{c[p]=null}),Y(),n=c[e],n?n.p(r,u):(n=c[e]=i[e](r),n.c()),b(n,1),n.m(t.parentNode,t))},i(r){o||(b(n),o=!0)},o(r){k(n),o=!1},d(r){r&&$(t),c[e].d(r),a=!1,s()}}}function nt(l,e,n){let t,o,a,s,i;O(l,K,h=>n(1,t=h)),O(l,X,h=>n(2,o=h)),O(l,J,h=>n(3,a=h)),O(l,pe,h=>n(11,s=h)),O(l,ue,h=>n(12,i=h));let c;async function m(h){r();let j=await c.files[0].arrayBuffer(),ge=new Blob([new Uint8Array(j)]);D(J,a=URL.createObjectURL(ge),a),D(ue,i={lng:0,lat:0},i),D(pe,s={lng:0,lat:0},s);let be=c.files[0].name.toLowerCase();[".gif",".jpg",".jpeg",".png"].some(he=>be.endsWith(he))||window.alert("You can only georeference image files (GIF, JPEG, PNG). If you don't see anything on the map, try a different file type.")}function r(){D(J,a=null,a),D(X,o=100,o)}function u(h){t&&h.key=="Escape"&&(h.stopPropagation(),D(K,t=!1,t))}const p=()=>D(K,t=!1,t);function f(h){T[h?"unshift":"push"](()=>{c=h,n(0,c)})}function _(){o=ve(this.value),X.set(o)}return[c,t,o,a,m,r,u,p,f,_,()=>D(K,t=!0,t)]}class yt extends W{constructor(e){super(),F(this,e,nt,tt,R,{})}}export{bt as B,yt as G,ht as M,kt as S,pe as b,J as i,X as o,K as s,ue as t};
