import{s as T,e as y,t as D,a as E,c as S,b as B,d as G,f as h,g as I,q as $,I as pe,E as X,i as w,h as b,y as L,j as se,x as ae,l as _e,u as ge,m as he,o as be,C as W,U as ve,k as q,Y as ie,r as K,D as M,w as re,V as C,ad as ke,p as Q,v as Z,n as $e,J as x}from"./scheduler.4ZNDCSWA.js";import{S as j,i as O,t as v,g as Y,b as k,f as H,e as fe,c as V,a as U,m as z,d as R}from"./index.xRKM1n3P.js";import"./index.B8qs9HuP.js";import{m as we,l as ye,n as Se}from"./index.wZY95nEU.js";import{g as ce}from"./globals.D0QH3NT1.js";import{C as Ce}from"./Marker.BAPbltUC.js";import{R as Ee}from"./Radio.CeDi-hel.js";import"./index.B4rHHoX7.js";import{B as Ie}from"./ButtonGroup.Ddi3jvIy.js";import{D as De}from"./DefaultButton.CEkMkJr5.js";import{F as Ge}from"./FormElement.DnliNpKu.js";import{S as Le}from"./SecondaryButton.yCPBUDia.js";import{W as Ne}from"./WarningButton.DAgnty13.js";import{w as P}from"./entry.Doim8BV3.js";const Be="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20height='800px'%20width='800px'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20330%20330'%20xml:space='preserve'%3e%3cpath%20id='XMLID_222_'%20d='M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001%20c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213%20C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606%20C255,161.018,253.42,157.202,250.606,154.389z'/%3e%3c/svg%3e";function ee(s){let e,t;const n=s[4].default,a=_e(n,s,s[3],null);return{c(){e=y("div"),a&&a.c(),this.h()},l(o){e=S(o,"DIV",{class:!0});var i=B(e);a&&a.l(i),i.forEach(h),this.h()},h(){$(e,"class","section svelte-zax3q3")},m(o,i){w(o,e,i),a&&a.m(e,null),t=!0},p(o,i){a&&a.p&&(!t||i&8)&&ge(a,n,o,o[3],t?be(n,o[3],i,null):he(o[3]),null)},i(o){t||(v(a,o),t=!0)},o(o){k(a,o),t=!1},d(o){o&&h(e),a&&a.d(o)}}}function Ve(s){let e,t,n,a,o,i,f,c,_,l,r,m,u=s[2]&&ee(s);return{c(){e=y("button"),t=y("div"),n=y("span"),a=D(s[0]),o=E(),i=y("img"),_=E(),u&&u.c(),this.h()},l(d){e=S(d,"BUTTON",{class:!0});var p=B(e);t=S(p,"DIV",{class:!0});var g=B(t);n=S(g,"SPAN",{});var N=B(n);a=G(N,s[0]),N.forEach(h),o=I(g),i=S(g,"IMG",{class:!0,src:!0,alt:!0}),g.forEach(h),_=I(p),u&&u.l(p),p.forEach(h),this.h()},h(){$(i,"class","arrow svelte-zax3q3"),pe(i.src,f=Be)||$(i,"src",f),$(i,"alt",c="Select "+s[0]),$(t,"class","top-section section svelte-zax3q3"),X(t,"bordered",s[2]),$(e,"class","clickable-card govuk-button govuk-button--secondary svelte-zax3q3"),e.disabled=s[1]},m(d,p){w(d,e,p),b(e,t),b(t,n),b(n,a),b(t,o),b(t,i),b(e,_),u&&u.m(e,null),l=!0,r||(m=[L(e,"click",s[5]),L(e,"mouseenter",s[6]),L(e,"mouseleave",s[7])],r=!0)},p(d,[p]){(!l||p&1)&&se(a,d[0]),(!l||p&1&&c!==(c="Select "+d[0]))&&$(i,"alt",c),(!l||p&4)&&X(t,"bordered",d[2]),d[2]?u?(u.p(d,p),p&4&&v(u,1)):(u=ee(d),u.c(),v(u,1),u.m(e,null)):u&&(Y(),k(u,1,1,()=>{u=null}),H()),(!l||p&2)&&(e.disabled=d[1])},i(d){l||(v(u),l=!0)},o(d){k(u),l=!1},d(d){d&&h(e),u&&u.d(),r=!1,ae(m)}}}function Ue(s,e,t){let{$$slots:n={},$$scope:a}=e,{name:o}=e,{disabled:i=!1}=e,{hasSlot:f=!0}=e;function c(r){W.call(this,s,r)}function _(r){W.call(this,s,r)}function l(r){W.call(this,s,r)}return s.$$set=r=>{"name"in r&&t(0,o=r.name),"disabled"in r&&t(1,i=r.disabled),"hasSlot"in r&&t(2,f=r.hasSlot),"$$scope"in r&&t(3,a=r.$$scope)},[o,i,f,a,n,c,_,l]}class ct extends j{constructor(e){super(),O(this,e,Ue,Ve,T,{name:0,disabled:1,hasSlot:2})}}function ze(s,e,t){let n;const a=ve();let{layer:o=void 0}=e;const{map:i}=we();q(s,i,l=>t(2,n=l));function f(l){a(l.type,{...l,map:i})}const c=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],_=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return ie(()=>{if(n)if(o)for(const l of c)n.off(l,o,f);else for(const l of _)n.off(l,f)}),s.$$set=l=>{"layer"in l&&t(1,o=l.layer)},s.$$.update=()=>{if(s.$$.dirty&6&&n)if(o)for(const l of c)n.on(l,o,f);else for(const l of _)n.on(l,f)},[i,o,n]}class ut extends j{constructor(e){super(),O(this,e,ze,null,T,{layer:1})}}const{window:Re}=ce;function qe(s){let e;return{c(){e=D("StreetView")},l(t){e=G(t,"StreetView")},m(t,n){w(t,e,n)},d(t){t&&h(e)}}}function te(s){let e,t,n;function a(i){s[5](i)}let o={label:"Source",choices:[["google","Google StreetView"],["bing","Bing Streetside"]],inlineSmall:!0};return s[1]!==void 0&&(o.value=s[1]),e=new Ee({props:o}),K.push(()=>fe(e,"value",a)),{c(){V(e.$$.fragment)},l(i){U(e.$$.fragment,i)},m(i,f){z(e,i,f),n=!0},p(i,f){const c={};!t&&f&2&&(t=!0,c.value=i[1],re(()=>t=!1)),e.$set(c)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){R(e,i)}}}function Pe(s){let e,t,n,a,o,i,f;function c(r){s[4](r)}let _={$$slots:{default:[qe]},$$scope:{ctx:s}};s[0]!==void 0&&(_.checked=s[0]),e=new Ce({props:_}),K.push(()=>fe(e,"checked",c));let l=s[0]&&te(s);return{c(){V(e.$$.fragment),n=E(),l&&l.c(),a=M()},l(r){U(e.$$.fragment,r),n=I(r),l&&l.l(r),a=M()},m(r,m){z(e,r,m),w(r,n,m),l&&l.m(r,m),w(r,a,m),o=!0,i||(f=L(Re,"keydown",s[2]),i=!0)},p(r,[m]){const u={};m&512&&(u.$$scope={dirty:m,ctx:r}),!t&&m&1&&(t=!0,u.checked=r[0],re(()=>t=!1)),e.$set(u),r[0]?l?(l.p(r,m),m&1&&v(l,1)):(l=te(r),l.c(),v(l,1),l.m(a.parentNode,a)):l&&(Y(),k(l,1,1,()=>{l=null}),H())},i(r){o||(v(e.$$.fragment,r),v(l),o=!0)},o(r){k(e.$$.fragment,r),k(l),o=!1},d(r){r&&(h(n),h(a)),R(e,r),l&&l.d(r),i=!1,f()}}}function Ae(s,e,t){let{map:n}=e,{enabled:a=!1}=e,o="google";function i(){n&&(n.on("click",c),n.getCanvas().style.cursor="zoom-in")}function f(){n&&(n.off("click",c),n.getCanvas().style.cursor="auto")}ie(f);function c(m){window.open(o=="google"?ye(m.lngLat.toArray()):Se(m.lngLat.toArray()),"_blank"),t(0,a=!1)}function _(m){a&&m.key=="Escape"&&t(0,a=!1)}function l(m){a=m,t(0,a)}function r(m){o=m,t(1,o)}return s.$$set=m=>{"map"in m&&t(3,n=m.map),"enabled"in m&&t(0,a=m.enabled)},s.$$.update=()=>{s.$$.dirty&1&&(a?i():f())},[a,o,_,n,l,r]}class mt extends j{constructor(e){super(),O(this,e,Ae,Pe,T,{map:3,enabled:0})}}const A=P(!1),F=P(null),J=P(100),ne=P({lng:0,lat:0}),oe=P({lng:0,lat:0}),{window:Me}=ce;function Te(s){let e,t;return e=new Le({props:{$$slots:{default:[Oe]},$$scope:{ctx:s}}}),e.$on("click",s[10]),{c(){V(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,a){z(e,n,a),t=!0},p(n,a){const o={};a&8192&&(o.$$scope={dirty:a,ctx:n}),e.$set(o)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function je(s){let e,t,n="Georeference an image",a,o,i,f,c,_,l,r=`Note this image isn't saved as part of this scheme. When you close this
      page, it'll be lost.`,m;o=new Ie({props:{$$slots:{default:[Je]},$$scope:{ctx:s}}}),f=new Ge({props:{label:"Load an image",id:"load-image",$$slots:{default:[Ke]},$$scope:{ctx:s}}});let u=s[3]&&le(s);return{c(){e=y("div"),t=y("h2"),t.textContent=n,a=E(),V(o.$$.fragment),i=E(),V(f.$$.fragment),c=E(),u&&u.c(),_=E(),l=y("p"),l.textContent=r,this.h()},l(d){e=S(d,"DIV",{style:!0});var p=B(e);t=S(p,"H2",{"data-svelte-h":!0}),Q(t)!=="svelte-fociiu"&&(t.textContent=n),a=I(p),U(o.$$.fragment,p),i=I(p),U(f.$$.fragment,p),c=I(p),u&&u.l(p),_=I(p),l=S(p,"P",{"data-svelte-h":!0}),Q(l)!=="svelte-d8uklv"&&(l.textContent=r),p.forEach(h),this.h()},h(){Z(e,"border","1px solid black"),Z(e,"padding","4px")},m(d,p){w(d,e,p),b(e,t),b(e,a),z(o,e,null),b(e,i),z(f,e,null),b(e,c),u&&u.m(e,null),b(e,_),b(e,l),m=!0},p(d,p){const g={};p&8202&&(g.$$scope={dirty:p,ctx:d}),o.$set(g);const N={};p&8193&&(N.$$scope={dirty:p,ctx:d}),f.$set(N),d[3]?u?u.p(d,p):(u=le(d),u.c(),u.m(e,_)):u&&(u.d(1),u=null)},i(d){m||(v(o.$$.fragment,d),v(f.$$.fragment,d),m=!0)},o(d){k(o.$$.fragment,d),k(f.$$.fragment,d),m=!1},d(d){d&&h(e),R(o),R(f),u&&u.d()}}}function Oe(s){let e;return{c(){e=D("Georeference an image")},l(t){e=G(t,"Georeference an image")},m(t,n){w(t,e,n)},d(t){t&&h(e)}}}function We(s){let e;return{c(){e=D("Save")},l(t){e=G(t,"Save")},m(t,n){w(t,e,n)},d(t){t&&h(e)}}}function Fe(s){let e;return{c(){e=D("Delete")},l(t){e=G(t,"Delete")},m(t,n){w(t,e,n)},d(t){t&&h(e)}}}function Je(s){let e,t,n,a;return e=new De({props:{$$slots:{default:[We]},$$scope:{ctx:s}}}),e.$on("click",s[7]),n=new Ne({props:{disabled:!s[3],$$slots:{default:[Fe]},$$scope:{ctx:s}}}),n.$on("click",s[5]),{c(){V(e.$$.fragment),t=E(),V(n.$$.fragment)},l(o){U(e.$$.fragment,o),t=I(o),U(n.$$.fragment,o)},m(o,i){z(e,o,i),w(o,t,i),z(n,o,i),a=!0},p(o,i){const f={};i&8192&&(f.$$scope={dirty:i,ctx:o}),e.$set(f);const c={};i&8&&(c.disabled=!o[3]),i&8192&&(c.$$scope={dirty:i,ctx:o}),n.$set(c)},i(o){a||(v(e.$$.fragment,o),v(n.$$.fragment,o),a=!0)},o(o){k(e.$$.fragment,o),k(n.$$.fragment,o),a=!1},d(o){o&&h(t),R(e,o),R(n,o)}}}function Ke(s){let e,t,n;return{c(){e=y("input"),this.h()},l(a){e=S(a,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){$(e,"class","govuk-file-upload"),$(e,"id","load-image"),$(e,"type","file")},m(a,o){w(a,e,o),s[8](e),t||(n=L(e,"change",s[4]),t=!0)},p:$e,d(a){a&&h(e),s[8](null),t=!1,n()}}}function le(s){let e,t,n,a,o,i,f,c;return{c(){e=y("div"),t=y("label"),n=y("input"),a=D(`
          Opacity: `),o=D(s[2]),i=D("%"),this.h()},l(_){e=S(_,"DIV",{});var l=B(e);t=S(l,"LABEL",{});var r=B(t);n=S(r,"INPUT",{type:!0,min:!0,max:!0}),a=G(r,`
          Opacity: `),o=G(r,s[2]),i=G(r,"%"),r.forEach(h),l.forEach(h),this.h()},h(){$(n,"type","range"),$(n,"min","0"),$(n,"max","100")},m(_,l){w(_,e,l),b(e,t),b(t,n),x(n,s[2]),b(t,a),b(t,o),b(t,i),f||(c=[L(n,"change",s[9]),L(n,"input",s[9])],f=!0)},p(_,l){l&4&&x(n,_[2]),l&4&&se(o,_[2])},d(_){_&&h(e),f=!1,ae(c)}}}function Ye(s){let e,t,n,a,o,i;const f=[je,Te],c=[];function _(l,r){return l[1]?0:1}return e=_(s),t=c[e]=f[e](s),{c(){t.c(),n=M()},l(l){t.l(l),n=M()},m(l,r){c[e].m(l,r),w(l,n,r),a=!0,o||(i=L(Me,"keydown",s[6]),o=!0)},p(l,[r]){let m=e;e=_(l),e===m?c[e].p(l,r):(Y(),k(c[m],1,1,()=>{c[m]=null}),H(),t=c[e],t?t.p(l,r):(t=c[e]=f[e](l),t.c()),v(t,1),t.m(n.parentNode,n))},i(l){a||(v(t),a=!0)},o(l){k(t),a=!1},d(l){l&&h(n),c[e].d(l),o=!1,i()}}}function He(s,e,t){let n,a,o,i,f;q(s,A,g=>t(1,n=g)),q(s,J,g=>t(2,a=g)),q(s,F,g=>t(3,o=g)),q(s,oe,g=>t(11,i=g)),q(s,ne,g=>t(12,f=g));let c;async function _(g){l();let N=await c.files[0].arrayBuffer(),ue=new Blob([new Uint8Array(N)]);C(F,o=URL.createObjectURL(ue),o),C(ne,f={lng:0,lat:0},f),C(oe,i={lng:0,lat:0},i);let me=c.files[0].name.toLowerCase();[".gif",".jpg",".jpeg",".png"].some(de=>me.endsWith(de))||window.alert("You can only georeference image files (GIF, JPEG, PNG). If you don't see anything on the map, try a different file type.")}function l(){C(F,o=null,o),C(J,a=100,a)}function r(g){n&&g.key=="Escape"&&(g.stopPropagation(),C(A,n=!1,n))}const m=()=>C(A,n=!1,n);function u(g){K[g?"unshift":"push"](()=>{c=g,t(0,c)})}function d(){a=ke(this.value),J.set(a)}return[c,n,a,o,_,l,r,m,u,d,()=>C(A,n=!0,n)]}class dt extends j{constructor(e){super(),O(this,e,He,Ye,T,{})}}export{ct as C,dt as G,ut as M,mt as S,oe as b,F as i,J as o,A as s,ne as t};
