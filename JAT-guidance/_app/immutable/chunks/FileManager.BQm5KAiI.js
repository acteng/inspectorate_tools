import{s as re,e as y,t as Z,L as me,c as S,b as P,d as O,M as ce,f as m,q as p,i as w,h as x,n as N,a as C,g as L,T as Le,z as ye,r as be,p as X,l as ke,u as xe,m as Ie,o as Fe,ab as pe,V as W,Y as oe,w as Se}from"./scheduler.Bxdx0f0B.js";import{S as ie,i as ae,c as q,a as B,m as D,t as k,b as I,d as R,g as se,f as ne,e as Me}from"./index.itOPPQ0R.js";import{L as He,d as Ee}from"./download.CMXpWSSj.js";import{b as de}from"./paths.BzBSLzYC.js";import{B as Te}from"./ButtonGroup.CFC5gCUN.js";import{F as Ae}from"./FileInput.DLjAlByA.js";import{R as je}from"./Radio.Ce05WshA.js";import{b as Ce,p as _e}from"./index.BD2i7xLG.js";import{S as le}from"./SecondaryButton.C3WEK5d3.js";import{W as qe}from"./WarningButton.DE8BQTXW.js";import{F as Be}from"./FormElement.Jlp14U3V.js";import{W as De}from"./WarningText.5NwKqynh.js";function Re(i){let e,s,t,r;return{c(){e=y("a"),s=Z(`Start
  `),t=me("svg"),r=me("path"),this.h()},l(l){e=S(l,"A",{href:!0,role:!0,draggable:!0,class:!0,"data-module":!0});var n=P(e);s=O(n,`Start
  `),t=ce(n,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,"aria-hidden":!0,focusable:!0});var a=P(t);r=ce(a,"path",{fill:!0,d:!0}),P(r).forEach(m),a.forEach(m),n.forEach(m),this.h()},h(){p(r,"fill","currentColor"),p(r,"d","M0 0h13l20 20-20 20H0l20-20z"),p(t,"class","govuk-button__start-icon"),p(t,"xmlns","http://www.w3.org/2000/svg"),p(t,"width","17.5"),p(t,"height","19"),p(t,"viewBox","0 0 33 40"),p(t,"aria-hidden","true"),p(t,"focusable","false"),p(e,"href",i[0]),p(e,"role","button"),p(e,"draggable","false"),p(e,"class","govuk-button govuk-button--start"),p(e,"data-module","govuk-button")},m(l,n){w(l,e,n),x(e,s),x(e,t),x(t,r)},p(l,[n]){n&1&&p(e,"href",l[0])},i:N,o:N,d(l){l&&m(e)}}}function Ge(i,e,s){let{href:t}=e;return i.$$set=r=>{"href"in r&&s(0,t=r.href)},[t]}class Ne extends ie{constructor(e){super(),ae(this,e,Ge,Re,re,{href:0})}}const Ve="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M200-200h57l391-391-57-57-391%20391v57Zm-80%2080v-170l528-527q12-11%2026.5-17t30.5-6q16%200%2031%206t26%2018l55%2056q12%2011%2017.5%2026t5.5%2030q0%2016-5.5%2030.5T817-647L290-120H120Zm640-584-56-56%2056%2056Zm-141%2085-28-29%2057%2057-29-28Z'/%3e%3c/svg%3e",Ue="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='white'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M6%2019c0%201.1.9%202%202%202h8c1.1%200%202-.9%202-2V7H6v12zM19%204h-3.5l-1-1h-5l-1%201H5v2h14V4z'/%3e%3c/svg%3e";function Ye(i){let e,s=`You can import from an existing route check .xlsx file, <b>only if there&#39;s an up-to-date DALOG sheet added</b>
      . After importing, there will still be some problems:`,t,r,l=`<li>You must fill out the Junction Assessment Tool (JAT); it won&#39;t be
        imported</li> <li>Some text fields on the Summary of Scheme page will be missing</li>`;return{c(){e=y("p"),e.innerHTML=s,t=C(),r=y("ul"),r.innerHTML=l},l(n){e=S(n,"P",{"data-svelte-h":!0}),X(e)!=="svelte-1ykh4hv"&&(e.innerHTML=s),t=L(n),r=S(n,"UL",{"data-svelte-h":!0}),X(r)!=="svelte-1tt4pqo"&&(r.innerHTML=l)},m(n,a){w(n,e,a),w(n,t,a),w(n,r,a)},p:N,d(n){n&&(m(e),m(t),m(r))}}}function ze(i){let e,s,t,r,l,n;return t=new De({props:{$$slots:{default:[Ye]},$$scope:{ctx:i}}}),{c(){e=y("input"),s=C(),q(t.$$.fragment),this.h()},l(a){e=S(a,"INPUT",{class:!0,id:!0,type:!0}),s=L(a),B(t.$$.fragment,a),this.h()},h(){p(e,"class","govuk-file-upload"),p(e,"id","import-xlsx"),p(e,"type","file")},m(a,$){w(a,e,$),i[4](e),w(a,s,$),D(t,a,$),r=!0,l||(n=ye(e,"change",i[2]),l=!0)},p(a,$){const d={};$&64&&(d.$$scope={dirty:$,ctx:a}),t.$set(d)},i(a){r||(k(t.$$.fragment,a),r=!0)},o(a){I(t.$$.fragment,a),r=!1},d(a){a&&(m(e),m(s)),i[4](null),R(t,a),l=!1,n()}}}function Pe(i){let e,s,t,r;return e=new Be({props:{label:"Import from XLSX file",id:"import-xlsx",$$slots:{default:[ze]},$$scope:{ctx:i}}}),t=new He({props:{loading:i[0]}}),{c(){q(e.$$.fragment),s=C(),q(t.$$.fragment)},l(l){B(e.$$.fragment,l),s=L(l),B(t.$$.fragment,l)},m(l,n){D(e,l,n),w(l,s,n),D(t,l,n),r=!0},p(l,[n]){const a={};n&66&&(a.$$scope={dirty:n,ctx:l}),e.$set(a);const $={};n&1&&($.loading=l[0]),t.$set($)},i(l){r||(k(e.$$.fragment,l),k(t.$$.fragment,l),r=!0)},o(l){I(e.$$.fragment,l),I(t.$$.fragment,l),r=!1},d(l){l&&m(s),R(e,l),R(t,l)}}}function Je(i,e,s){let t=Le(),{xlsxImporter:r}=e,l="",n;async function a(d){let H=n.files[0].name;try{s(0,l=`Loading ${H}`);let f=await n.files[0].arrayBuffer(),o=await r(f);s(0,l=""),t("imported",{filename:Ce(H,".xlsx"),data:o})}catch(f){window.alert(`Couldn't import ${H}: ${f}`),s(0,l="")}}function $(d){be[d?"unshift":"push"](()=>{n=d,s(1,n)})}return i.$$set=d=>{"xlsxImporter"in d&&s(3,r=d.xlsxImporter)},[l,n,a,r,$]}class We extends ie{constructor(e){super(),ae(this,e,Je,Pe,re,{xlsxImporter:3})}}const Xe=i=>({}),$e=i=>({}),Ze=i=>({}),ge=i=>({});function he(i){let e,s="<b>You are editing:</b>",t,r,l,n,a,$,d,H;return a=new Ne({props:{href:`${de}/${i[0].prefix}overview`}}),d=new Te({props:{$$slots:{default:[Ke]},$$scope:{ctx:i}}}),{c(){e=y("p"),e.innerHTML=s,t=C(),r=y("div"),l=y("input"),n=C(),q(a.$$.fragment),$=C(),q(d.$$.fragment),this.h()},l(f){e=S(f,"P",{"data-svelte-h":!0}),X(e)!=="svelte-st3pjg"&&(e.innerHTML=s),t=L(f),r=S(f,"DIV",{});var o=P(r);l=S(o,"INPUT",{class:!0}),n=L(o),B(a.$$.fragment,o),o.forEach(m),$=L(f),B(d.$$.fragment,f),this.h()},h(){p(l,"class","govuk-input govuk-!-width-three-quarters"),l.value=i[6],l.disabled=!0},m(f,o){w(f,e,o),w(f,t,o),w(f,r,o),x(r,l),x(r,n),D(a,r,null),w(f,$,o),D(d,f,o),H=!0},p(f,o){(!H||o&64&&l.value!==f[6])&&(l.value=f[6]);const c={};o&1&&(c.href=`${de}/${f[0].prefix}overview`),a.$set(c);const j={};o&65536&&(j.$$scope={dirty:o,ctx:f}),d.$set(j)},i(f){H||(k(a.$$.fragment,f),k(d.$$.fragment,f),H=!0)},o(f){I(a.$$.fragment,f),I(d.$$.fragment,f),H=!1},d(f){f&&(m(e),m(t),m(r),m($)),R(a),R(d,f)}}}function Oe(i){let e,s,t;return{c(){e=y("img"),t=Z(`
            Export .json`),this.h()},l(r){e=S(r,"IMG",{src:!0,alt:!0,class:!0}),t=O(r,`
            Export .json`),this.h()},h(){oe(e.src,s=Ee)||p(e,"src",s),p(e,"alt","Export .json"),p(e,"class","svelte-1f2msch")},m(r,l){w(r,e,l),w(r,t,l)},p:N,d(r){r&&(m(e),m(t))}}}function Ke(i){let e,s,t;e=new le({props:{$$slots:{default:[Oe]},$$scope:{ctx:i}}}),e.$on("click",i[10]);const r=i[14].export,l=ke(r,i,i[16],$e);return{c(){q(e.$$.fragment),s=C(),l&&l.c()},l(n){B(e.$$.fragment,n),s=L(n),l&&l.l(n)},m(n,a){D(e,n,a),w(n,s,a),l&&l.m(n,a),t=!0},p(n,a){const $={};a&65536&&($.$$scope={dirty:a,ctx:n}),e.$set($),l&&l.p&&(!t||a&65536)&&xe(l,r,n,n[16],t?Fe(r,n[16],a,Xe):Ie(n[16]),$e)},i(n){t||(k(e.$$.fragment,n),k(l,n),t=!0)},o(n){I(e.$$.fragment,n),I(l,n),t=!1},d(n){n&&m(s),R(e,n),l&&l.d(n)}}}function Qe(i){let e;return{c(){e=Z("New blank file")},l(s){e=O(s,"New blank file")},m(s,t){w(s,e,t)},d(s){s&&m(e)}}}function ve(i){let e,s,t,r;return t=new We({props:{xlsxImporter:i[3]}}),t.$on("imported",i[13]),{c(){e=y("hr"),s=C(),q(t.$$.fragment)},l(l){e=S(l,"HR",{}),s=L(l),B(t.$$.fragment,l)},m(l,n){w(l,e,n),w(l,s,n),D(t,l,n),r=!0},p(l,n){const a={};n&8&&(a.xlsxImporter=l[3]),t.$set(a)},i(l){r||(k(t.$$.fragment,l),r=!0)},o(l){I(t.$$.fragment,l),r=!1},d(l){l&&(m(e),m(s)),R(t,l)}}}function et(i){let e,s="No saved files";return{c(){e=y("p"),e.textContent=s},l(t){e=S(t,"P",{"data-svelte-h":!0}),X(e)!=="svelte-yojds1"&&(e.textContent=s)},m(t,r){w(t,e,r)},p:N,i:N,o:N,d(t){t&&m(e)}}}function tt(i){let e,s,t,r,l,n,a,$,d;e=new le({props:{disabled:i[4]=="",$$slots:{default:[lt]},$$scope:{ctx:i}}}),e.$on("click",i[7]),t=new le({props:{disabled:i[4]=="",$$slots:{default:[st]},$$scope:{ctx:i}}}),t.$on("click",i[8]),l=new qe({props:{disabled:i[4]=="",$$slots:{default:[nt]},$$scope:{ctx:i}}}),l.$on("click",i[9]);function H(o){i[15](o)}let f={label:"Manage existing file",choices:_e(i[5])};return i[4]!==void 0&&(f.value=i[4]),a=new je({props:f}),be.push(()=>Me(a,"value",H)),{c(){q(e.$$.fragment),s=C(),q(t.$$.fragment),r=C(),q(l.$$.fragment),n=C(),q(a.$$.fragment)},l(o){B(e.$$.fragment,o),s=L(o),B(t.$$.fragment,o),r=L(o),B(l.$$.fragment,o),n=L(o),B(a.$$.fragment,o)},m(o,c){D(e,o,c),w(o,s,c),D(t,o,c),w(o,r,c),D(l,o,c),w(o,n,c),D(a,o,c),d=!0},p(o,c){const j={};c&16&&(j.disabled=o[4]==""),c&65536&&(j.$$scope={dirty:c,ctx:o}),e.$set(j);const b={};c&16&&(b.disabled=o[4]==""),c&65536&&(b.$$scope={dirty:c,ctx:o}),t.$set(b);const M={};c&16&&(M.disabled=o[4]==""),c&65536&&(M.$$scope={dirty:c,ctx:o}),l.$set(M);const V={};c&32&&(V.choices=_e(o[5])),!$&&c&16&&($=!0,V.value=o[4],Se(()=>$=!1)),a.$set(V)},i(o){d||(k(e.$$.fragment,o),k(t.$$.fragment,o),k(l.$$.fragment,o),k(a.$$.fragment,o),d=!0)},o(o){I(e.$$.fragment,o),I(t.$$.fragment,o),I(l.$$.fragment,o),I(a.$$.fragment,o),d=!1},d(o){o&&(m(s),m(r),m(n)),R(e,o),R(t,o),R(l,o),R(a,o)}}}function lt(i){let e;return{c(){e=Z("Load saved file")},l(s){e=O(s,"Load saved file")},m(s,t){w(s,e,t)},d(s){s&&m(e)}}}function st(i){let e,s,t;return{c(){e=y("img"),t=Z(`
          Rename saved file`),this.h()},l(r){e=S(r,"IMG",{src:!0,alt:!0,class:!0}),t=O(r,`
          Rename saved file`),this.h()},h(){oe(e.src,s=Ve)||p(e,"src",s),p(e,"alt","Rename saved file"),p(e,"class","svelte-1f2msch")},m(r,l){w(r,e,l),w(r,t,l)},p:N,d(r){r&&(m(e),m(t))}}}function nt(i){let e,s,t;return{c(){e=y("img"),t=Z(`
          Delete saved file`),this.h()},l(r){e=S(r,"IMG",{src:!0,alt:!0,class:!0}),t=O(r,`
          Delete saved file`),this.h()},h(){oe(e.src,s=Ue)||p(e,"src",s),p(e,"alt","Delete saved file"),p(e,"class","svelte-1f2msch")},m(r,l){w(r,e,l),w(r,t,l)},p:N,d(r){r&&(m(e),m(t))}}}function rt(i){let e,s,t,r,l,n=`All files are auto-saved in your browser's local storage. You can close
        your browser and resume later. You can export the file to your computer
        to share with someone else, and import from a file below.`,a,$,d,H="Create or import a file",f,o,c,j,b,M,V,K,G,U,ee="Manage existing files",Q,A,E,Y;const u=i[14].description,h=ke(u,i,i[16],ge);let g=i[6]&&he(i);o=new le({props:{$$slots:{default:[Qe]},$$scope:{ctx:i}}}),o.$on("click",i[11]),M=new Ae({props:{label:"Import from a .json file",onLoad:i[12]}});let v=i[3]!=null&&ve(i);const fe=[tt,et],z=[];function ue(_,T){return _[5].length>0?0:1}return A=ue(i),E=z[A]=fe[A](i),{c(){e=y("div"),s=y("div"),t=y("div"),h&&h.c(),r=C(),l=y("p"),l.textContent=n,a=C(),g&&g.c(),$=C(),d=y("h2"),d.textContent=H,f=C(),q(o.$$.fragment),c=C(),j=y("hr"),b=C(),q(M.$$.fragment),V=C(),v&&v.c(),K=C(),G=y("div"),U=y("h2"),U.textContent=ee,Q=C(),E.c(),this.h()},l(_){e=S(_,"DIV",{class:!0});var T=P(e);s=S(T,"DIV",{class:!0});var J=P(s);t=S(J,"DIV",{class:!0});var F=P(t);h&&h.l(F),r=L(F),l=S(F,"P",{"data-svelte-h":!0}),X(l)!=="svelte-wkz669"&&(l.textContent=n),a=L(F),g&&g.l(F),$=L(F),d=S(F,"H2",{"data-svelte-h":!0}),X(d)!=="svelte-1yqhw3l"&&(d.textContent=H),f=L(F),B(o.$$.fragment,F),c=L(F),j=S(F,"HR",{}),b=L(F),B(M.$$.fragment,F),V=L(F),v&&v.l(F),F.forEach(m),K=L(J),G=S(J,"DIV",{class:!0});var te=P(G);U=S(te,"H2",{class:!0,"data-svelte-h":!0}),X(U)!=="svelte-7j9603"&&(U.textContent=ee),Q=L(te),E.l(te),te.forEach(m),J.forEach(m),T.forEach(m),this.h()},h(){p(t,"class","govuk-grid-column-two-thirds"),p(U,"class","green-bar svelte-1f2msch"),p(G,"class","govuk-grid-column-one-third"),p(s,"class","govuk-grid-row"),p(e,"class","govuk-width-container")},m(_,T){w(_,e,T),x(e,s),x(s,t),h&&h.m(t,null),x(t,r),x(t,l),x(t,a),g&&g.m(t,null),x(t,$),x(t,d),x(t,f),D(o,t,null),x(t,c),x(t,j),x(t,b),D(M,t,null),x(t,V),v&&v.m(t,null),x(s,K),x(s,G),x(G,U),x(G,Q),z[A].m(G,null),Y=!0},p(_,[T]){h&&h.p&&(!Y||T&65536)&&xe(h,u,_,_[16],Y?Fe(u,_[16],T,Ze):Ie(_[16]),ge),_[6]?g?(g.p(_,T),T&64&&k(g,1)):(g=he(_),g.c(),k(g,1),g.m(t,$)):g&&(se(),I(g,1,1,()=>{g=null}),ne());const J={};T&65536&&(J.$$scope={dirty:T,ctx:_}),o.$set(J),_[3]!=null?v?(v.p(_,T),T&8&&k(v,1)):(v=ve(_),v.c(),k(v,1),v.m(t,null)):v&&(se(),I(v,1,1,()=>{v=null}),ne());let F=A;A=ue(_),A===F?z[A].p(_,T):(se(),I(z[F],1,1,()=>{z[F]=null}),ne(),E=z[A],E?E.p(_,T):(E=z[A]=fe[A](_),E.c()),k(E,1),E.m(G,null))},i(_){Y||(k(h,_),k(g),k(o.$$.fragment,_),k(M.$$.fragment,_),k(v),k(E),Y=!0)},o(_){I(h,_),I(g),I(o.$$.fragment,_),I(M.$$.fragment,_),I(v),I(E),Y=!1},d(_){_&&m(e),h&&h.d(_),g&&g.d(),R(o),R(M),v&&v.d(),z[A].d()}}}function we(i,e){let s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),s.setAttribute("download",i),document.body.appendChild(s),s.click(),document.body.removeChild(s)}function ot(i,e,s){let t,r=N,l=()=>(r(),r=pe(c,u=>s(17,t=u)),c),n,a=N,$=()=>(a(),a=pe(o,u=>s(6,n=u)),o);i.$$.on_destroy.push(()=>r()),i.$$.on_destroy.push(()=>a());let{$$slots:d={},$$scope:H}=e,{files:f}=e,{currentFile:o}=e;$();let{state:c}=e;l();let{xlsxImporter:j=null}=e,b=n,M=f.getFileList();function V(){b&&E(b)}function K(){if(!b)return;let u=b==n,h=window.prompt(`Rename file ${b} to what?`,b);if(h){let g=f.key(b),v=window.localStorage.getItem(g);window.localStorage.setItem(f.key(h),v),window.localStorage.removeItem(g),u&&W(o,n=h,n),s(4,b=h),s(5,M=f.getFileList())}}function G(){if(!b||!window.confirm(`Really delete file ${b}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let u=f.key(b);we(`${b}.json`,window.localStorage.getItem(u)),window.localStorage.removeItem(u),b==n&&(W(o,n="",n),W(c,t=f.emptyState(),t)),s(4,b=""),s(5,M=f.getFileList())}function U(){we(n+".json",JSON.stringify(t))}function ee(){let u=window.prompt("What do you want to name your new file?");u&&(W(o,n=u,n),W(c,t=f.emptyState(),t),s(5,M=f.saveAndGetFileList(n,t)))}function Q(u,h){let g=Ce(u,".json");try{let v=JSON.parse(h);f.validate(v),s(5,M=f.saveAndGetFileList(g,v)),E(g)}catch(v){window.alert(`Couldn't load ${g}: ${v}`)}}function A(u){let{filename:h,data:g}=u.detail;s(5,M=f.saveAndGetFileList(h,g)),E(h)}function E(u){try{let h=f.loadFile(u);W(o,n=u,n),W(c,t=h,t)}catch(h){window.alert(`Couldn't load ${u}: ${h}`)}}function Y(u){b=u,s(4,b)}return i.$$set=u=>{"files"in u&&s(0,f=u.files),"currentFile"in u&&$(s(1,o=u.currentFile)),"state"in u&&l(s(2,c=u.state)),"xlsxImporter"in u&&s(3,j=u.xlsxImporter),"$$scope"in u&&s(16,H=u.$$scope)},[f,o,c,j,b,M,n,V,K,G,U,ee,Q,A,d,Y,H]}class vt extends ie{constructor(e){super(),ae(this,e,ot,rt,re,{files:0,currentFile:1,state:2,xlsxImporter:3})}}export{vt as F};
