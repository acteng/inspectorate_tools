import{s as we,w as te,x as re,a as C,e as L,g as E,c as N,p as Y,i as S,F as Nt,z as ot,f as _,y as rn,l as cn,t as j,b as I,d as A,q as ve,P as st,h as v,ab as dn,j as fe,u as pn,r as mn,v as hn,m as De,k as ze,U as _n,G as gn,E as Pe,n as Je,a7 as $n,T as ln}from"../chunks/scheduler.BwufR8Ly.js";import{S as ke,i as ye,e as le,c as M,a as W,m as R,t as w,b as T,d as P,g as se,f as oe}from"../chunks/index.BYv68wXE.js";import{e as G,u as be,o as Ue,d as _t}from"../chunks/each.CK1lPdNc.js";import{D as gt}from"../chunks/DefaultButton.DUjKpF0Y.js";import{S as bn}from"../chunks/Select.DQYWgocE.js";/* empty css                                                    */import{S as Te}from"../chunks/SecondaryButton.Bcl2fE5V.js";import{W as an}from"../chunks/WarningButton.BZEdAdvT.js";import{W as vn}from"../chunks/WarningText.DeMLIEbM.js";import{s as X,a as sn,b as wn}from"../chunks/data.CO2qbINJ.js";import{a as on,c as kn,n as yn,g as ft}from"../chunks/logic.QIc_5A2T.js";import{E as Dn}from"../chunks/ExternalLink.DUwZ2Ga_.js";import"../chunks/paths.QluR0b5H.js";import{D as Tn}from"../chunks/DecimalInput.-4G3QHcH.js";import{E as fn}from"../chunks/ErrorMessage.Dx-1Gn_Z.js";import{T as Sn}from"../chunks/TextInput.DQAdVYnU.js";import{v as Fn}from"../chunks/v4.b0td5MfA.js";import{C as ut}from"../chunks/CollapsibleCard.CXcgKIt2.js";import{p as Re}from"../chunks/index.ClU2r4Ky.js";import{F as Cn}from"../chunks/FormElement.CyZFqvfE.js";import{v as En}from"../chunks/v4.D8aEg3BZ.js";import{R as We}from"../chunks/Radio.xwGHvsDf.js";function Ln(r){let e,n,t;function l(a){r[9](a)}let i={label:r[0],hint:r[1],choices:r[5],emptyOption:r[2],disabled:r[3]};return r[4]!==void 0&&(i.value=r[4]),e=new bn({props:i}),te.push(()=>le(e,"value",l)),e.$on("change",r[6]),{c(){M(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,o){R(e,a,o),t=!0},p(a,[o]){const s={};o&1&&(s.label=a[0]),o&2&&(s.hint=a[1]),o&32&&(s.choices=a[5]),o&4&&(s.emptyOption=a[2]),o&8&&(s.disabled=a[3]),!n&&o&16&&(n=!0,s.value=a[4],re(()=>n=!1)),e.$set(s)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){T(e.$$.fragment,a),t=!1},d(a){P(e,a)}}}function Nn(r){return r.map(e=>[JSON.stringify(e[0]),e[1]])}function Bn(r,e,n){let t,l,{label:i}=e,{hint:a=""}=e,{choices:o}=e,{emptyOption:s=!1}=e,{disabled:f=!1}=e,{value:m}=e;function u(){n(7,m=l==""?"":JSON.parse(l))}function h($){l=$,n(4,l),n(7,m)}return r.$$set=$=>{"label"in $&&n(0,i=$.label),"hint"in $&&n(1,a=$.hint),"choices"in $&&n(8,o=$.choices),"emptyOption"in $&&n(2,s=$.emptyOption),"disabled"in $&&n(3,f=$.disabled),"value"in $&&n(7,m=$.value)},r.$$.update=()=>{r.$$.dirty&256&&n(5,t=Nn(o)),r.$$.dirty&128&&n(4,l=JSON.stringify(m))},[i,a,s,f,l,t,u,m,o,h]}class Mn extends ke{constructor(e){super(),ye(this,e,Bn,Ln,we,{label:0,hint:1,choices:8,emptyOption:2,disabled:3,value:7})}}function Wn(r){let e,n,t,l,i,a,o;return e=new fn({props:{errorMessage:r[5](r[2])}}),{c(){M(e.$$.fragment),n=C(),t=L("input"),this.h()},l(s){W(e.$$.fragment,s),n=E(s),t=N(s,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){Y(t,"type","text"),Y(t,"inputmode","numeric"),Y(t,"class",l=`govuk-input govuk-input--width-${r[1]}`),Y(t,"id",r[3])},m(s,f){R(e,s,f),S(s,n,f),S(s,t,f),Nt(t,r[2]),i=!0,a||(o=[ot(t,"input",r[9]),ot(t,"change",r[4])],a=!0)},p(s,f){const m={};f&4&&(m.errorMessage=s[5](s[2])),e.$set(m),(!i||f&2&&l!==(l=`govuk-input govuk-input--width-${s[1]}`))&&Y(t,"class",l),f&4&&t.value!==s[2]&&Nt(t,s[2])},i(s){i||(w(e.$$.fragment,s),i=!0)},o(s){T(e.$$.fragment,s),i=!1},d(s){s&&(_(n),_(t)),P(e,s),a=!1,rn(o)}}}function Rn(r){let e,n;return e=new Cn({props:{label:r[0],id:r[3],$$slots:{default:[Wn]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,[l]){const i={};l&1&&(i.label=t[0]),l&1030&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function Pn(r,e,n){let{label:t}=e,{value:l}=e,{width:i}=e,{min:a=void 0}=e,{max:o=void 0}=e,s=l==null?void 0:l.toString(),f=En();function m(){n(6,l=s==null?void 0:parseInt(s,10))}function u($){if($==""||$==null)return"";if($.includes("."))return"Please enter a number without decimals";let g=Number($);return isNaN(g)?"Please enter a valid number":a!=null&&g<a?`Please enter a number that's at least ${a};`:o!=null&&g>o?`Please enter a number that's at most ${o};`:""}function h(){s=this.value,n(2,s)}return r.$$set=$=>{"label"in $&&n(0,t=$.label),"value"in $&&n(6,l=$.value),"width"in $&&n(1,i=$.width),"min"in $&&n(7,a=$.min),"max"in $&&n(8,o=$.max)},[t,i,s,f,m,u,l,a,o,h]}class In extends ke{constructor(e){super(),ye(this,e,Pn,Rn,we,{label:0,value:6,width:1,min:7,max:8})}}function Bt(r){let e,n;return e=new Te({props:{$$slots:{default:[On]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,l){const i={};l&128&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function On(r){let e;return{c(){e=j("X")},l(n){e=A(n,"X")},m(n,t){S(n,e,t)},d(n){n&&_(e)}}}function qn(r){let e,n,t,l,i,a,o,s,f,m,u=r[2]&&Bt(r);const h=r[4].default,$=cn(h,r,r[7],null);return{c(){e=L("div"),n=L("div"),t=L("div"),l=L("h1"),i=j(r[1]),a=C(),u&&u.c(),o=C(),$&&$.c(),this.h()},l(g){e=N(g,"DIV",{class:!0});var d=I(e);n=N(d,"DIV",{class:!0});var y=I(n);t=N(y,"DIV",{style:!0});var b=I(t);l=N(b,"H1",{class:!0});var B=I(l);i=A(B,r[1]),B.forEach(_),a=E(b),u&&u.l(b),b.forEach(_),o=E(y),$&&$.l(y),y.forEach(_),d.forEach(_),this.h()},h(){Y(l,"class","govuk-heading-l"),ve(t,"display","flex"),ve(t,"justify-content","space-between"),Y(n,"class","content centered-fullscreen svelte-1bl3d9w"),Y(e,"class","background svelte-1bl3d9w"),st(e,"open",r[0]),st(e,"closed",!r[0])},m(g,d){S(g,e,d),v(e,n),v(n,t),v(t,l),v(l,i),v(t,a),u&&u.m(t,null),v(n,o),$&&$.m(n,null),s=!0,f||(m=[ot(n,"click",dn(Vn)),ot(e,"click",r[6])],f=!0)},p(g,[d]){(!s||d&2)&&fe(i,g[1]),g[2]?u?(u.p(g,d),d&4&&w(u,1)):(u=Bt(g),u.c(),w(u,1),u.m(t,null)):u&&(se(),T(u,1,1,()=>{u=null}),oe()),$&&$.p&&(!s||d&128)&&pn($,h,g,g[7],s?hn(h,g[7],d,null):mn(g[7]),null),(!s||d&1)&&st(e,"open",g[0]),(!s||d&1)&&st(e,"closed",!g[0])},i(g){s||(w(u),w($,g),s=!0)},o(g){T(u),T($,g),s=!1},d(g){g&&_(e),u&&u.d(),$&&$.d(g),f=!1,rn(m)}}}const Vn=()=>null;function jn(r,e,n){let{$$slots:t={},$$scope:l}=e,{title:i}=e,{open:a=!1}=e,{displayEscapeButton:o=!0}=e,{canCloseByClickingBackground:s=!0}=e;const f=()=>n(0,a=!1),m=()=>{s&&n(0,a=!1)};return r.$$set=u=>{"title"in u&&n(1,i=u.title),"open"in u&&n(0,a=u.open),"displayEscapeButton"in u&&n(2,o=u.displayEscapeButton),"canCloseByClickingBackground"in u&&n(3,s=u.canCloseByClickingBackground),"$$scope"in u&&n(7,l=u.$$scope)},[a,i,o,s,t,f,m,l]}class An extends ke{constructor(e){super(),ye(this,e,jn,qn,we,{title:1,open:0,displayEscapeButton:2,canCloseByClickingBackground:3})}}function Mt(r){return typeof r=="object"||r==""?[]:Hn[r]}let Hn={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",ae(76)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",ae(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",ae(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",ae(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",ae(54)]]};function ae(r){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${r}`}function Wt(r,e){let n=on(e.speedLimit,e.observedSpeed);switch(r){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&n==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&n==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return n==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":n==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":n==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return n==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":n==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":n==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Rt(r,e,n){const t=r.slice();return t[19]=e[n],t[21]=n,t}function Pt(r,e,n){const t=r.slice();return t[19]=e[n],t[21]=n,t}function It(r,e,n){const t=r.slice();return t[23]=e[n][0],t[24]=e[n][1],t}function Ot(r,e,n){const t=r.slice();t[19]=e[n],t[21]=n;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const i=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=i,t}function qt(r,e,n){const t=r.slice();t[19]=e[n],t[21]=n;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const i=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=i,t}function Vt(r,e,n){const t=r.slice();t[19]=e[n],t[21]=n;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const i=t[21]==t[0].length-1?"":t[0][t[21]+1];t[28]=i;const a=yn(t[19],t[27],t[28]);return t[31]=a,t}function jt(r,e,n){const t=r.slice();return t[19]=e[n],t[33]=e,t[21]=n,t}function At(r,e,n){const t=r.slice();return t[19]=e[n],t[21]=n,t}function Un(r){let e;return{c(){e=j("Add feature")},l(n){e=A(n,"Add feature")},m(n,t){S(n,e,t)},d(n){n&&_(e)}}}function Jn(r){let e;return{c(){e=j("←")},l(n){e=A(n,"←")},m(n,t){S(n,e,t)},d(n){n&&_(e)}}}function zn(r){let e;return{c(){e=j("Delete")},l(n){e=A(n,"Delete")},m(n,t){S(n,e,t)},d(n){n&&_(e)}}}function Gn(r){let e;return{c(){e=j("→")},l(n){e=A(n,"→")},m(n,t){S(n,e,t)},d(n){n&&_(e)}}}function Ht(r,e){let n,t,l,i,a,o,s,f,m;function u(){return e[11](e[21])}l=new Te({props:{disabled:e[21]==0,$$slots:{default:[Jn]},$$scope:{ctx:e}}}),l.$on("click",u);function h(){return e[12](e[21])}a=new an({props:{$$slots:{default:[zn]},$$scope:{ctx:e}}}),a.$on("click",h);function $(){return e[13](e[21])}return s=new Te({props:{disabled:e[21]==e[0].length-1,$$slots:{default:[Gn]},$$scope:{ctx:e}}}),s.$on("click",$),{key:r,first:null,c(){n=L("td"),t=L("div"),M(l.$$.fragment),i=C(),M(a.$$.fragment),o=C(),M(s.$$.fragment),f=C(),this.h()},l(g){n=N(g,"TD",{class:!0});var d=I(n);t=N(d,"DIV",{style:!0});var y=I(t);W(l.$$.fragment,y),i=E(y),W(a.$$.fragment,y),o=E(y),W(s.$$.fragment,y),y.forEach(_),f=E(d),d.forEach(_),this.h()},h(){ve(t,"display","flex"),ve(t,"justify-content","space-between"),Y(n,"class","svelte-18bftjb"),this.first=n},m(g,d){S(g,n,d),v(n,t),R(l,t,null),v(t,i),R(a,t,null),v(t,o),R(s,t,null),v(n,f),m=!0},p(g,d){e=g;const y={};d[0]&1&&(y.disabled=e[21]==0),d[1]&16&&(y.$$scope={dirty:d,ctx:e}),l.$set(y);const b={};d[1]&16&&(b.$$scope={dirty:d,ctx:e}),a.$set(b);const B={};d[0]&1&&(B.disabled=e[21]==e[0].length-1),d[1]&16&&(B.$$scope={dirty:d,ctx:e}),s.$set(B)},i(g){m||(w(l.$$.fragment,g),w(a.$$.fragment,g),w(s.$$.fragment,g),m=!0)},o(g){T(l.$$.fragment,g),T(a.$$.fragment,g),T(s.$$.fragment,g),m=!1},d(g){g&&_(n),P(l),P(a),P(s)}}}function Ut(r,e){let n,t,l,i,a;function o(f){e[14](f,e[19],e[33],e[21])}let s={label:"Street feature type",emptyOption:!0,choices:e[3]};return e[19]!==void 0&&(s.value=e[19]),t=new Mn({props:s}),te.push(()=>le(t,"value",o)),{key:r,first:null,c(){n=L("td"),M(t.$$.fragment),i=C(),this.h()},l(f){n=N(f,"TD",{class:!0});var m=I(n);W(t.$$.fragment,m),i=E(m),m.forEach(_),this.h()},h(){Y(n,"class","svelte-18bftjb"),this.first=n},m(f,m){S(f,n,m),R(t,n,null),v(n,i),a=!0},p(f,m){e=f;const u={};m[0]&8&&(u.choices=e[3]),!l&&m[0]&1&&(l=!0,u.value=e[19],re(()=>l=!1)),t.$set(u)},i(f){a||(w(t.$$.fragment,f),a=!0)},o(f){T(t.$$.fragment,f),a=!1},d(f){f&&_(n),P(t)}}}function Jt(r){let e,n;return e=new vn({props:{$$slots:{default:[Yn]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,l){const i={};l[0]&1|l[1]&16&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function Xn(r){let e;return{c(){e=j("Add")},l(n){e=A(n,"Add")},m(n,t){S(n,e,t)},d(n){n&&_(e)}}}function Yn(r){let e=r[31].warning+"",n,t,l,i;function a(){return r[15](r[21],r[31])}return l=new Te({props:{style:"margin-bottom: 0px; float: right",$$slots:{default:[Xn]},$$scope:{ctx:r}}}),l.$on("click",a),{c(){n=j(e),t=C(),M(l.$$.fragment)},l(o){n=A(o,e),t=E(o),W(l.$$.fragment,o)},m(o,s){S(o,n,s),S(o,t,s),R(l,o,s),i=!0},p(o,s){r=o,(!i||s[0]&1)&&e!==(e=r[31].warning+"")&&fe(n,e);const f={};s[1]&16&&(f.$$scope={dirty:s,ctx:r}),l.$set(f)},i(o){i||(w(l.$$.fragment,o),i=!0)},o(o){T(l.$$.fragment,o),i=!1},d(o){o&&(_(n),_(t)),P(l,o)}}}function zt(r,e){let n,t,l,i=e[31].warning!=""&&Jt(e);return{key:r,first:null,c(){n=L("td"),i&&i.c(),t=C(),this.h()},l(a){n=N(a,"TD",{class:!0});var o=I(n);i&&i.l(o),t=E(o),o.forEach(_),this.h()},h(){Y(n,"class","svelte-18bftjb"),this.first=n},m(a,o){S(a,n,o),i&&i.m(n,null),v(n,t),l=!0},p(a,o){e=a,e[31].warning!=""?i?(i.p(e,o),o[0]&1&&w(i,1)):(i=Jt(e),i.c(),w(i,1),i.m(n,t)):i&&(se(),T(i,1,1,()=>{i=null}),oe())},i(a){l||(w(i),l=!0)},o(a){T(i),l=!1},d(a){a&&_(n),i&&i.d()}}}function Gt(r,e){let n,t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"",l,i;return{key:r,first:null,c(){n=L("td"),l=j(t),i=C(),this.h()},l(a){n=N(a,"TD",{class:!0});var o=I(n);l=A(o,t),i=E(o),o.forEach(_),this.h()},h(){Y(n,"class","svelte-18bftjb"),this.first=n},m(a,o){S(a,n,o),v(n,l),v(n,i)},p(a,o){e=a,o[0]&3&&t!==(t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"")&&fe(l,t)},d(a){a&&_(n)}}}function Xt(r,e){let n,t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"",l,i;return{key:r,first:null,c(){n=L("td"),l=j(t),i=C(),this.h()},l(a){n=N(a,"TD",{class:!0});var o=I(n);l=A(o,t),i=E(o),o.forEach(_),this.h()},h(){Y(n,"class","svelte-18bftjb"),this.first=n},m(a,o){S(a,n,o),v(n,l),v(n,i)},p(a,o){e=a,o[0]&3&&t!==(t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"")&&fe(l,t)},d(a){a&&_(n)}}}function Kn(r){let e,n=r[23]+"",t;return{c(){e=L("li"),t=j(n)},l(l){e=N(l,"LI",{});var i=I(e);t=A(i,n),i.forEach(_)},m(l,i){S(l,e,i),v(e,t)},p(l,i){i[0]&1&&n!==(n=l[23]+"")&&fe(t,n)},i:Je,o:Je,d(l){l&&_(e)}}}function Qn(r){let e,n,t;return n=new Dn({props:{href:r[24],$$slots:{default:[Zn]},$$scope:{ctx:r}}}),{c(){e=L("li"),M(n.$$.fragment)},l(l){e=N(l,"LI",{});var i=I(e);W(n.$$.fragment,i),i.forEach(_)},m(l,i){S(l,e,i),R(n,e,null),t=!0},p(l,i){const a={};i[0]&1&&(a.href=l[24]),i[0]&1|i[1]&16&&(a.$$scope={dirty:i,ctx:l}),n.$set(a)},i(l){t||(w(n.$$.fragment,l),t=!0)},o(l){T(n.$$.fragment,l),t=!1},d(l){l&&_(e),P(n)}}}function Zn(r){let e=r[23]+"",n;return{c(){n=j(e)},l(t){n=A(t,e)},m(t,l){S(t,n,l)},p(t,l){l[0]&1&&e!==(e=t[23]+"")&&fe(n,e)},d(t){t&&_(n)}}}function Yt(r){let e,n,t,l;const i=[Qn,Kn],a=[];function o(s,f){return s[24]?0:1}return e=o(r),n=a[e]=i[e](r),{c(){n.c(),t=Pe()},l(s){n.l(s),t=Pe()},m(s,f){a[e].m(s,f),S(s,t,f),l=!0},p(s,f){let m=e;e=o(s),e===m?a[e].p(s,f):(se(),T(a[m],1,1,()=>{a[m]=null}),oe(),n=a[e],n?n.p(s,f):(n=a[e]=i[e](s),n.c()),w(n,1),n.m(t.parentNode,t))},i(s){l||(w(n),l=!0)},o(s){T(n),l=!1},d(s){s&&_(t),a[e].d(s)}}}function Kt(r,e){let n,t,l,i,a=G(Mt(e[19])),o=[];for(let f=0;f<a.length;f+=1)o[f]=Yt(It(e,a,f));const s=f=>T(o[f],1,1,()=>{o[f]=null});return{key:r,first:null,c(){n=L("td"),t=L("ul");for(let f=0;f<o.length;f+=1)o[f].c();l=C(),this.h()},l(f){n=N(f,"TD",{class:!0});var m=I(n);t=N(m,"UL",{});var u=I(t);for(let h=0;h<o.length;h+=1)o[h].l(u);u.forEach(_),l=E(m),m.forEach(_),this.h()},h(){Y(n,"class","svelte-18bftjb"),this.first=n},m(f,m){S(f,n,m),v(n,t);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null);v(n,l),i=!0},p(f,m){if(e=f,m[0]&1){a=G(Mt(e[19]));let u;for(u=0;u<a.length;u+=1){const h=It(e,a,u);o[u]?(o[u].p(h,m),w(o[u],1)):(o[u]=Yt(h),o[u].c(),w(o[u],1),o[u].m(t,null))}for(se(),u=a.length;u<o.length;u+=1)s(u);oe()}},i(f){if(!i){for(let m=0;m<a.length;m+=1)w(o[m]);i=!0}},o(f){o=o.filter(Boolean);for(let m=0;m<o.length;m+=1)T(o[m]);i=!1},d(f){f&&_(n),gn(o,f)}}}function Qt(r,e){let n,t,l=Wt(e[19],e[1].proposed.trafficData)+"",i,a;return{key:r,first:null,c(){n=L("td"),t=L("p"),i=j(l),a=C(),this.h()},l(o){n=N(o,"TD",{class:!0});var s=I(n);t=N(s,"P",{style:!0});var f=I(t);i=A(f,l),f.forEach(_),a=E(s),s.forEach(_),this.h()},h(){ve(t,"max-width","400px"),Y(n,"class","svelte-18bftjb"),this.first=n},m(o,s){S(o,n,s),v(n,t),v(t,i),v(n,a)},p(o,s){e=o,s[0]&3&&l!==(l=Wt(e[19],e[1].proposed.trafficData)+"")&&fe(i,l)},d(o){o&&_(n)}}}function xn(r){let e,n,t,l,i,a=r[4][0].toFixed(2)+"",o,s,f,m,u,h=r[4][1].toFixed(2)+"",$,g,d,y,b,B,Q,V=[],ue=new Map,F,O,K,ce="Street Feature",Ie,J=[],Ge=new Map,Se,de,me,Xe="Buffers",Fe,q=[],Ye=new Map,Ce,pe,he,Ke="Desirable minimum width (m)",Ee,D=[],z=new Map,Z,U,_e,Oe="Absolute minimum width (m)",Le,x=[],qe=new Map,ct,ge,Ne,$t="References",dt,ee=[],bt=new Map,pt,$e,Be,vt="Guidance",mt,ie=[],wt=new Map,Me;e=new gt({props:{$$slots:{default:[Un]},$$scope:{ctx:r}}}),e.$on("click",r[5]);let Ve=G(r[0]);const kt=c=>c[21];for(let c=0;c<Ve.length;c+=1){let p=At(r,Ve,c),k=kt(p);ue.set(k,V[c]=Ht(k,p))}let je=G(r[0]);const yt=c=>c[21];for(let c=0;c<je.length;c+=1){let p=jt(r,je,c),k=yt(p);Ge.set(k,J[c]=Ut(k,p))}let Ae=G(r[0]);const Dt=c=>c[21];for(let c=0;c<Ae.length;c+=1){let p=Vt(r,Ae,c),k=Dt(p);Ye.set(k,q[c]=zt(k,p))}let Qe=G(r[0]);const Tt=c=>c[21];for(let c=0;c<Qe.length;c+=1){let p=qt(r,Qe,c),k=Tt(p);z.set(k,D[c]=Gt(k,p))}let Ze=G(r[0]);const St=c=>c[21];for(let c=0;c<Ze.length;c+=1){let p=Ot(r,Ze,c),k=St(p);qe.set(k,x[c]=Xt(k,p))}let He=G(r[0]);const Ft=c=>c[21];for(let c=0;c<He.length;c+=1){let p=Pt(r,He,c),k=Ft(p);bt.set(k,ee[c]=Kt(k,p))}let xe=G(r[0]);const Ct=c=>c[21];for(let c=0;c<xe.length;c+=1){let p=Rt(r,xe,c),k=Ct(p);wt.set(k,ie[c]=Qt(k,p))}return{c(){M(e.$$.fragment),n=C(),t=L("p"),l=j("Desirable minimum total width required (m): "),i=L("b"),o=j(a),s=C(),f=L("p"),m=j("Absolute minimum total width required (m): "),u=L("b"),$=j(h),g=C(),d=L("div"),y=L("table"),b=L("tr"),B=L("th"),Q=C();for(let c=0;c<V.length;c+=1)V[c].c();F=C(),O=L("tr"),K=L("th"),K.textContent=ce,Ie=C();for(let c=0;c<J.length;c+=1)J[c].c();Se=C(),de=L("tr"),me=L("th"),me.textContent=Xe,Fe=C();for(let c=0;c<q.length;c+=1)q[c].c();Ce=C(),pe=L("tr"),he=L("th"),he.textContent=Ke,Ee=C();for(let c=0;c<D.length;c+=1)D[c].c();Z=C(),U=L("tr"),_e=L("th"),_e.textContent=Oe,Le=C();for(let c=0;c<x.length;c+=1)x[c].c();ct=C(),ge=L("tr"),Ne=L("th"),Ne.textContent=$t,dt=C();for(let c=0;c<ee.length;c+=1)ee[c].c();pt=C(),$e=L("tr"),Be=L("th"),Be.textContent=vt,mt=C();for(let c=0;c<ie.length;c+=1)ie[c].c();this.h()},l(c){W(e.$$.fragment,c),n=E(c),t=N(c,"P",{});var p=I(t);l=A(p,"Desirable minimum total width required (m): "),i=N(p,"B",{});var k=I(i);o=A(k,a),k.forEach(_),p.forEach(_),s=E(c),f=N(c,"P",{});var ht=I(f);m=A(ht,"Absolute minimum total width required (m): "),u=N(ht,"B",{});var Et=I(u);$=A(Et,h),Et.forEach(_),ht.forEach(_),g=E(c),d=N(c,"DIV",{style:!0});var Lt=I(d);y=N(Lt,"TABLE",{});var ne=I(y);b=N(ne,"TR",{});var et=I(b);B=N(et,"TH",{}),I(B).forEach(_),Q=E(et);for(let H=0;H<V.length;H+=1)V[H].l(et);et.forEach(_),F=E(ne),O=N(ne,"TR",{});var tt=I(O);K=N(tt,"TH",{"data-svelte-h":!0}),De(K)!=="svelte-16tcugb"&&(K.textContent=ce),Ie=E(tt);for(let H=0;H<J.length;H+=1)J[H].l(tt);tt.forEach(_),Se=E(ne),de=N(ne,"TR",{});var nt=I(de);me=N(nt,"TH",{"data-svelte-h":!0}),De(me)!=="svelte-11hw9wb"&&(me.textContent=Xe),Fe=E(nt);for(let H=0;H<q.length;H+=1)q[H].l(nt);nt.forEach(_),Ce=E(ne),pe=N(ne,"TR",{});var rt=I(pe);he=N(rt,"TH",{"data-svelte-h":!0}),De(he)!=="svelte-i7hz1h"&&(he.textContent=Ke),Ee=E(rt);for(let H=0;H<D.length;H+=1)D[H].l(rt);rt.forEach(_),Z=E(ne),U=N(ne,"TR",{});var lt=I(U);_e=N(lt,"TH",{"data-svelte-h":!0}),De(_e)!=="svelte-zhiq21"&&(_e.textContent=Oe),Le=E(lt);for(let H=0;H<x.length;H+=1)x[H].l(lt);lt.forEach(_),ct=E(ne),ge=N(ne,"TR",{});var it=I(ge);Ne=N(it,"TH",{"data-svelte-h":!0}),De(Ne)!=="svelte-o075z0"&&(Ne.textContent=$t),dt=E(it);for(let H=0;H<ee.length;H+=1)ee[H].l(it);it.forEach(_),pt=E(ne),$e=N(ne,"TR",{});var at=I($e);Be=N(at,"TH",{"data-svelte-h":!0}),De(Be)!=="svelte-pnu4jc"&&(Be.textContent=vt),mt=E(at);for(let H=0;H<ie.length;H+=1)ie[H].l(at);at.forEach(_),ne.forEach(_),Lt.forEach(_),this.h()},h(){ve(d,"display","flex"),ve(d,"flex-direction","row"),ve(d,"overflow-x","scroll")},m(c,p){R(e,c,p),S(c,n,p),S(c,t,p),v(t,l),v(t,i),v(i,o),S(c,s,p),S(c,f,p),v(f,m),v(f,u),v(u,$),S(c,g,p),S(c,d,p),v(d,y),v(y,b),v(b,B),v(b,Q);for(let k=0;k<V.length;k+=1)V[k]&&V[k].m(b,null);v(y,F),v(y,O),v(O,K),v(O,Ie);for(let k=0;k<J.length;k+=1)J[k]&&J[k].m(O,null);v(y,Se),v(y,de),v(de,me),v(de,Fe);for(let k=0;k<q.length;k+=1)q[k]&&q[k].m(de,null);v(y,Ce),v(y,pe),v(pe,he),v(pe,Ee);for(let k=0;k<D.length;k+=1)D[k]&&D[k].m(pe,null);v(y,Z),v(y,U),v(U,_e),v(U,Le);for(let k=0;k<x.length;k+=1)x[k]&&x[k].m(U,null);v(y,ct),v(y,ge),v(ge,Ne),v(ge,dt);for(let k=0;k<ee.length;k+=1)ee[k]&&ee[k].m(ge,null);v(y,pt),v(y,$e),v($e,Be),v($e,mt);for(let k=0;k<ie.length;k+=1)ie[k]&&ie[k].m($e,null);r[16](d),Me=!0},p(c,p){const k={};p[1]&16&&(k.$$scope={dirty:p,ctx:c}),e.$set(k),(!Me||p[0]&16)&&a!==(a=c[4][0].toFixed(2)+"")&&fe(o,a),(!Me||p[0]&16)&&h!==(h=c[4][1].toFixed(2)+"")&&fe($,h),p[0]&449&&(Ve=G(c[0]),se(),V=be(V,p,kt,1,c,Ve,ue,b,Ue,Ht,null,At),oe()),p[0]&9&&(je=G(c[0]),se(),J=be(J,p,yt,1,c,je,Ge,O,Ue,Ut,null,jt),oe()),p[0]&513&&(Ae=G(c[0]),se(),q=be(q,p,Dt,1,c,Ae,Ye,de,Ue,zt,null,Vt),oe()),p[0]&3&&(Qe=G(c[0]),D=be(D,p,Tt,1,c,Qe,z,pe,_t,Gt,null,qt)),p[0]&3&&(Ze=G(c[0]),x=be(x,p,St,1,c,Ze,qe,U,_t,Xt,null,Ot)),p[0]&1&&(He=G(c[0]),se(),ee=be(ee,p,Ft,1,c,He,bt,ge,Ue,Kt,null,Pt),oe()),p[0]&3&&(xe=G(c[0]),ie=be(ie,p,Ct,1,c,xe,wt,$e,_t,Qt,null,Rt))},i(c){if(!Me){w(e.$$.fragment,c);for(let p=0;p<Ve.length;p+=1)w(V[p]);for(let p=0;p<je.length;p+=1)w(J[p]);for(let p=0;p<Ae.length;p+=1)w(q[p]);for(let p=0;p<He.length;p+=1)w(ee[p]);Me=!0}},o(c){T(e.$$.fragment,c);for(let p=0;p<V.length;p+=1)T(V[p]);for(let p=0;p<J.length;p+=1)T(J[p]);for(let p=0;p<q.length;p+=1)T(q[p]);for(let p=0;p<ee.length;p+=1)T(ee[p]);Me=!1},d(c){c&&(_(n),_(t),_(s),_(f),_(g),_(d)),P(e,c);for(let p=0;p<V.length;p+=1)V[p].d();for(let p=0;p<J.length;p+=1)J[p].d();for(let p=0;p<q.length;p+=1)q[p].d();for(let p=0;p<D.length;p+=1)D[p].d();for(let p=0;p<x.length;p+=1)x[p].d();for(let p=0;p<ee.length;p+=1)ee[p].d();for(let p=0;p<ie.length;p+=1)ie[p].d();r[16](null)}}}function er(r,e,n){let t,l,i;ze(r,X,F=>n(1,i=F));let{streetFeaturesLeftToRight:a}=e,{sectionType:o}=e,s,f=!1;_n(()=>{f&&(f=!1,n(2,s.scrollLeft=s.scrollWidth,s))});function m(){n(0,a=[...a,""]),f=!0}function u(F){a.splice(F,1),n(0,a)}function h(F){n(0,[a[F-1],a[F]]=[a[F],a[F-1]],a)}function $(F){n(0,[a[F+1],a[F]]=[a[F],a[F+1]],a)}function g(F){let O=sn.map(K=>[K,K]);for(let[K,ce]of Object.entries(F))O.push([{custom:K},`Custom: ${ce.name}`]);return O}function d(F,O){(O=="right"||O=="both")&&a.splice(F+1,0,"Buffer / Verge"),(O=="left"||O=="both")&&a.splice(F,0,"Buffer / Verge"),n(0,a)}const y=F=>h(F),b=F=>u(F),B=F=>$(F);function Q(F,O,K,ce){K[ce]=F,n(0,a)}const V=(F,O)=>d(F,O.fix);function ue(F){te[F?"unshift":"push"](()=>{s=F,n(2,s)})}return r.$$set=F=>{"streetFeaturesLeftToRight"in F&&n(0,a=F.streetFeaturesLeftToRight),"sectionType"in F&&n(10,o=F.sectionType)},r.$$.update=()=>{r.$$.dirty[0]&1026&&n(4,t=kn(i,o)),r.$$.dirty[0]&2&&n(3,l=g(i.proposed.customFeatures))},[a,i,s,l,t,m,u,h,$,d,o,y,b,B,Q,V,ue]}class un extends ke{constructor(e){super(),ye(this,e,er,xn,we,{streetFeaturesLeftToRight:0,sectionType:10},null,[-1,-1])}}function tr(r){let e;return{c(){e=j("Confirm")},l(n){e=A(n,"Confirm")},m(n,t){S(n,e,t)},d(n){n&&_(e)}}}function nr(r){let e;return{c(){e=j("Cancel")},l(n){e=A(n,"Cancel")},m(n,t){S(n,e,t)},d(n){n&&_(e)}}}function rr(r){let e,n,t,l,i,a,o,s,f,m,u,h;function $(b){r[6](b)}let g={label:"Name"};r[0]!==void 0&&(g.value=r[0]),e=new Sn({props:g}),te.push(()=>le(e,"value",$));function d(b){r[7](b)}let y={label:"Minimum width (m)",width:4,min:0};return r[1]!==void 0&&(y.value=r[1]),l=new Tn({props:y}),te.push(()=>le(l,"value",d)),o=new fn({props:{errorMessage:r[2]}}),f=new gt({props:{disabled:r[2]!="",$$slots:{default:[tr]},$$scope:{ctx:r}}}),f.$on("click",r[8]),u=new Te({props:{$$slots:{default:[nr]},$$scope:{ctx:r}}}),u.$on("click",r[9]),{c(){M(e.$$.fragment),t=C(),M(l.$$.fragment),a=C(),M(o.$$.fragment),s=C(),M(f.$$.fragment),m=C(),M(u.$$.fragment)},l(b){W(e.$$.fragment,b),t=E(b),W(l.$$.fragment,b),a=E(b),W(o.$$.fragment,b),s=E(b),W(f.$$.fragment,b),m=E(b),W(u.$$.fragment,b)},m(b,B){R(e,b,B),S(b,t,B),R(l,b,B),S(b,a,B),R(o,b,B),S(b,s,B),R(f,b,B),S(b,m,B),R(u,b,B),h=!0},p(b,B){const Q={};!n&&B&1&&(n=!0,Q.value=b[0],re(()=>n=!1)),e.$set(Q);const V={};!i&&B&2&&(i=!0,V.value=b[1],re(()=>i=!1)),l.$set(V);const ue={};B&4&&(ue.errorMessage=b[2]),o.$set(ue);const F={};B&4&&(F.disabled=b[2]!=""),B&4096&&(F.$$scope={dirty:B,ctx:b}),f.$set(F);const O={};B&4096&&(O.$$scope={dirty:B,ctx:b}),u.$set(O)},i(b){h||(w(e.$$.fragment,b),w(l.$$.fragment,b),w(o.$$.fragment,b),w(f.$$.fragment,b),w(u.$$.fragment,b),h=!0)},o(b){T(e.$$.fragment,b),T(l.$$.fragment,b),T(o.$$.fragment,b),T(f.$$.fragment,b),T(u.$$.fragment,b),h=!1},d(b){b&&(_(t),_(a),_(s),_(m)),P(e,b),P(l,b),P(o,b),P(f,b),P(u,b)}}}function lr(r){let e,n;return e=new An({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[rr]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,[l]){const i={};l&4103&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function ir(r,e,n){let t,l;ze(r,X,d=>n(10,l=d));let{initialName:i}=e,{initialWidth:a}=e,o=$n(),s=i,f=a;function m(d,y){return d==""?"Name must be specified":d!=i&&Object.values(l.proposed.customFeatures).some(b=>b.name==d)?"That name is already used by another custom feature":sn.includes(d)?"That name is the same as one of the built-in features":isNaN(y)?"Enter a valid width":y<=0?"Enter a positive width":""}function u(d){s=d,n(0,s)}function h(d){f=d,n(1,f)}const $=()=>o("confirm",{name:s,width:f}),g=()=>o("cancel");return r.$$set=d=>{"initialName"in d&&n(4,i=d.initialName),"initialWidth"in d&&n(5,a=d.initialWidth)},r.$$.update=()=>{r.$$.dirty&3&&n(2,t=m(s,f))},[s,f,t,o,i,a,u,h,$,g]}class ar extends ke{constructor(e){super(),ye(this,e,ir,lr,we,{initialName:4,initialWidth:5})}}function Zt(r,e,n){const t=r.slice();return t[9]=e[n],t}function sr(r){let e;return{c(){e=j("Add custom feature")},l(n){e=A(n,"Add custom feature")},m(n,t){S(n,e,t)},d(n){n&&_(e)}}}function or(r){let e,n=r[1].proposed.customFeatures[r[9]].name+"",t,l,i=r[1].proposed.customFeatures[r[9]].width+"",a,o;return{c(){e=L("u"),t=j(n),l=j(`
      : `),a=j(i),o=j(" m minimum width")},l(s){e=N(s,"U",{});var f=I(e);t=A(f,n),f.forEach(_),l=A(s,`
      : `),a=A(s,i),o=A(s," m minimum width")},m(s,f){S(s,e,f),v(e,t),S(s,l,f),S(s,a,f),S(s,o,f)},p(s,f){f&2&&n!==(n=s[1].proposed.customFeatures[s[9]].name+"")&&fe(t,n),f&2&&i!==(i=s[1].proposed.customFeatures[s[9]].width+"")&&fe(a,i)},d(s){s&&(_(e),_(l),_(a),_(o))}}}function fr(r){let e;return{c(){e=j("Delete")},l(n){e=A(n,"Delete")},m(n,t){S(n,e,t)},d(n){n&&_(e)}}}function xt(r,e){let n,t,l,i,a;function o(){return e[6](e[9])}t=new Te({props:{$$slots:{default:[or]},$$scope:{ctx:e}}}),t.$on("click",o);function s(){return e[7](e[9])}return i=new an({props:{$$slots:{default:[fr]},$$scope:{ctx:e}}}),i.$on("click",s),{key:r,first:null,c(){n=L("div"),M(t.$$.fragment),l=C(),M(i.$$.fragment),this.h()},l(f){n=N(f,"DIV",{});var m=I(n);W(t.$$.fragment,m),l=E(m),W(i.$$.fragment,m),m.forEach(_),this.h()},h(){this.first=n},m(f,m){S(f,n,m),R(t,n,null),v(n,l),R(i,n,null),a=!0},p(f,m){e=f;const u={};m&4098&&(u.$$scope={dirty:m,ctx:e}),t.$set(u);const h={};m&4096&&(h.$$scope={dirty:m,ctx:e}),i.$set(h)},i(f){a||(w(t.$$.fragment,f),w(i.$$.fragment,f),a=!0)},o(f){T(t.$$.fragment,f),T(i.$$.fragment,f),a=!1},d(f){f&&_(n),P(t),P(i)}}}function en(r){let e,n;return e=new ar({props:{initialName:r[0].initialName,initialWidth:r[0].initialWidth}}),e.$on("cancel",r[8]),e.$on("confirm",r[5]),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,l){const i={};l&1&&(i.initialName=t[0].initialName),l&1&&(i.initialWidth=t[0].initialWidth),e.$set(i)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function ur(r){let e,n,t=[],l=new Map,i,a,o;e=new gt({props:{$$slots:{default:[sr]},$$scope:{ctx:r}}}),e.$on("click",r[2]);let s=G(Object.keys(r[1].proposed.customFeatures));const f=u=>u[9];for(let u=0;u<s.length;u+=1){let h=Zt(r,s,u),$=f(h);l.set($,t[u]=xt($,h))}let m=r[0]&&en(r);return{c(){M(e.$$.fragment),n=C();for(let u=0;u<t.length;u+=1)t[u].c();i=C(),m&&m.c(),a=Pe()},l(u){W(e.$$.fragment,u),n=E(u);for(let h=0;h<t.length;h+=1)t[h].l(u);i=E(u),m&&m.l(u),a=Pe()},m(u,h){R(e,u,h),S(u,n,h);for(let $=0;$<t.length;$+=1)t[$]&&t[$].m(u,h);S(u,i,h),m&&m.m(u,h),S(u,a,h),o=!0},p(u,[h]){const $={};h&4096&&($.$$scope={dirty:h,ctx:u}),e.$set($),h&26&&(s=G(Object.keys(u[1].proposed.customFeatures)),se(),t=be(t,h,f,1,u,s,l,i.parentNode,Ue,xt,i,Zt),oe()),u[0]?m?(m.p(u,h),h&1&&w(m,1)):(m=en(u),m.c(),w(m,1),m.m(a.parentNode,a)):m&&(se(),T(m,1,1,()=>{m=null}),oe())},i(u){if(!o){w(e.$$.fragment,u);for(let h=0;h<s.length;h+=1)w(t[h]);w(m),o=!0}},o(u){T(e.$$.fragment,u);for(let h=0;h<t.length;h+=1)T(t[h]);T(m),o=!1},d(u){u&&(_(n),_(i),_(a)),P(e,u);for(let h=0;h<t.length;h+=1)t[h].d(u);m&&m.d(u)}}}function cr(r,e,n){let t;ze(r,X,h=>n(1,t=h));let l=null;function i(){n(0,l={id:Fn(),initialName:"",initialWidth:0})}function a(h){let $=t.proposed.customFeatures[h].name,g=JSON.stringify({custom:h});if(t.proposed.desirableMinimumCrossSection.some(d=>JSON.stringify(d)==g)){window.alert(`The ${$} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(t.proposed.absoluteMinimumCrossSection.some(d=>JSON.stringify(d)==g)){window.alert(`The ${$} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete t.proposed.customFeatures[h],X.set(t)}function o(h){n(0,l={id:h,initialName:t.proposed.customFeatures[h].name,initialWidth:t.proposed.customFeatures[h].width})}function s(h){ln(X,t.proposed.customFeatures[l.id]={name:h.detail.name,width:h.detail.width},t),X.set(t),n(0,l=null)}return[l,t,i,a,o,s,h=>o(h),h=>a(h),()=>n(0,l=null)]}class dr extends ke{constructor(e){super(),ye(this,e,cr,ur,we,{})}}function tn(r){let e,n,t,l,i;return{c(){e=L("p"),n=L("i"),t=j("Effective speed limit, based on the limit and 85 percentile: "),l=j(r[1]),i=j(`
            mph`)},l(a){e=N(a,"P",{});var o=I(e);n=N(o,"I",{});var s=I(n);t=A(s,"Effective speed limit, based on the limit and 85 percentile: "),l=A(s,r[1]),i=A(s,`
            mph`),s.forEach(_),o.forEach(_)},m(a,o){S(a,e,o),v(e,n),v(n,t),v(n,l),v(n,i)},p(a,o){o&2&&fe(l,a[1])},d(a){a&&_(e)}}}function pr(r){let e,n,t,l,i,a,o,s,f,m,u,h,$,g,d,y,b,B,Q,V,ue,F,O,K,ce;function Ie(D){r[4](D)}let J={legend:"Expected peak hour cycle flow: 1-way cycle tracks",inlineSmall:!0,choices:Re(["<200","200-800",">800"])};r[0].proposed.trafficData.flowOneWay!==void 0&&(J.value=r[0].proposed.trafficData.flowOneWay),t=new We({props:J}),te.push(()=>le(t,"value",Ie));function Ge(D){r[5](D)}let Se={legend:"Expected peak hour cycle flow: 2-way cycle tracks",inlineSmall:!0,choices:Re(["<300","300-1,000",">1,000"])};r[0].proposed.trafficData.flowTwoWay!==void 0&&(Se.value=r[0].proposed.trafficData.flowTwoWay),a=new We({props:Se}),te.push(()=>le(a,"value",Ge));function de(D){r[6](D)}let me={legend:"Expected peak hour cycle flow: shared use cycle tracks",inlineSmall:!0,choices:Re(["<300",">300"])};r[0].proposed.trafficData.flowSharedUse!==void 0&&(me.value=r[0].proposed.trafficData.flowSharedUse),f=new We({props:me}),te.push(()=>le(f,"value",de));function Xe(D){r[7](D)}let Fe={legend:"Traffic flow (vpd)",inlineSmall:!0,choices:Re(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};r[0].proposed.trafficData.trafficFlow!==void 0&&(Fe.value=r[0].proposed.trafficData.trafficFlow),h=new We({props:Fe}),te.push(()=>le(h,"value",Xe));let q=r[1]&&tn(r);function Ye(D){r[8](D)}let Ce={legend:"Speed limit (MPH)",inlineSmall:!0,choices:r[2]};r[0].proposed.trafficData.speedLimit!==void 0&&(Ce.value=r[0].proposed.trafficData.speedLimit),b=new We({props:Ce}),te.push(()=>le(b,"value",Ye));function pe(D){r[9](D)}let he={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};r[0].proposed.trafficData.observedSpeed!==void 0&&(he.value=r[0].proposed.trafficData.observedSpeed),V=new In({props:he}),te.push(()=>le(V,"value",pe));function Ke(D){r[10](D)}let Ee={legend:"Street function",inlineSmall:!0,choices:Re(["High Street (active frontages)","Residential street","Local distributor road"])};return r[0].proposed.trafficData.streetFunction!==void 0&&(Ee.value=r[0].proposed.trafficData.streetFunction),O=new We({props:Ee}),te.push(()=>le(O,"value",Ke)),{c(){e=L("div"),n=L("div"),M(t.$$.fragment),i=C(),M(a.$$.fragment),s=C(),M(f.$$.fragment),u=C(),M(h.$$.fragment),g=C(),d=L("div"),q&&q.c(),y=C(),M(b.$$.fragment),Q=C(),M(V.$$.fragment),F=C(),M(O.$$.fragment),this.h()},l(D){e=N(D,"DIV",{class:!0});var z=I(e);n=N(z,"DIV",{class:!0});var Z=I(n);W(t.$$.fragment,Z),i=E(Z),W(a.$$.fragment,Z),s=E(Z),W(f.$$.fragment,Z),u=E(Z),W(h.$$.fragment,Z),Z.forEach(_),g=E(z),d=N(z,"DIV",{class:!0});var U=I(d);q&&q.l(U),y=E(U),W(b.$$.fragment,U),Q=E(U),W(V.$$.fragment,U),F=E(U),W(O.$$.fragment,U),U.forEach(_),z.forEach(_),this.h()},h(){Y(n,"class","govuk-grid-column-one-half"),Y(d,"class","govuk-grid-column-one-half"),Y(e,"class","govuk-grid-row")},m(D,z){S(D,e,z),v(e,n),R(t,n,null),v(n,i),R(a,n,null),v(n,s),R(f,n,null),v(n,u),R(h,n,null),v(e,g),v(e,d),q&&q.m(d,null),v(d,y),R(b,d,null),v(d,Q),R(V,d,null),v(d,F),R(O,d,null),ce=!0},p(D,z){const Z={};!l&&z&1&&(l=!0,Z.value=D[0].proposed.trafficData.flowOneWay,re(()=>l=!1)),t.$set(Z);const U={};!o&&z&1&&(o=!0,U.value=D[0].proposed.trafficData.flowTwoWay,re(()=>o=!1)),a.$set(U);const _e={};!m&&z&1&&(m=!0,_e.value=D[0].proposed.trafficData.flowSharedUse,re(()=>m=!1)),f.$set(_e);const Oe={};!$&&z&1&&($=!0,Oe.value=D[0].proposed.trafficData.trafficFlow,re(()=>$=!1)),h.$set(Oe),D[1]?q?q.p(D,z):(q=tn(D),q.c(),q.m(d,y)):q&&(q.d(1),q=null);const Le={};!B&&z&1&&(B=!0,Le.value=D[0].proposed.trafficData.speedLimit,re(()=>B=!1)),b.$set(Le);const x={};!ue&&z&1&&(ue=!0,x.value=D[0].proposed.trafficData.observedSpeed,re(()=>ue=!1)),V.$set(x);const qe={};!K&&z&1&&(K=!0,qe.value=D[0].proposed.trafficData.streetFunction,re(()=>K=!1)),O.$set(qe)},i(D){ce||(w(t.$$.fragment,D),w(a.$$.fragment,D),w(f.$$.fragment,D),w(h.$$.fragment,D),w(b.$$.fragment,D),w(V.$$.fragment,D),w(O.$$.fragment,D),ce=!0)},o(D){T(t.$$.fragment,D),T(a.$$.fragment,D),T(f.$$.fragment,D),T(h.$$.fragment,D),T(b.$$.fragment,D),T(V.$$.fragment,D),T(O.$$.fragment,D),ce=!1},d(D){D&&_(e),P(t),P(a),P(f),P(h),q&&q.d(),P(b),P(V),P(O)}}}function mr(r){let e,n;return e=new ut({props:{label:"Traffic data and additional information",open:!0,$$slots:{default:[pr]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,[l]){const i={};l&2051&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function hr(r,e,n){let t,l;ze(r,X,g=>n(0,l=g));let{valid:i}=e,a=Re(wn);function o(g){r.$$.not_equal(l.proposed.trafficData.flowOneWay,g)&&(l.proposed.trafficData.flowOneWay=g,X.set(l))}function s(g){r.$$.not_equal(l.proposed.trafficData.flowTwoWay,g)&&(l.proposed.trafficData.flowTwoWay=g,X.set(l))}function f(g){r.$$.not_equal(l.proposed.trafficData.flowSharedUse,g)&&(l.proposed.trafficData.flowSharedUse=g,X.set(l))}function m(g){r.$$.not_equal(l.proposed.trafficData.trafficFlow,g)&&(l.proposed.trafficData.trafficFlow=g,X.set(l))}function u(g){r.$$.not_equal(l.proposed.trafficData.speedLimit,g)&&(l.proposed.trafficData.speedLimit=g,X.set(l))}function h(g){r.$$.not_equal(l.proposed.trafficData.observedSpeed,g)&&(l.proposed.trafficData.observedSpeed=g,X.set(l))}function $(g){r.$$.not_equal(l.proposed.trafficData.streetFunction,g)&&(l.proposed.trafficData.streetFunction=g,X.set(l))}return r.$$set=g=>{"valid"in g&&n(3,i=g.valid)},r.$$.update=()=>{r.$$.dirty&1&&n(3,i=l.proposed.trafficData.flowOneWay!=""&&l.proposed.trafficData.flowTwoWay!=""&&l.proposed.trafficData.flowSharedUse!=""&&l.proposed.trafficData.trafficFlow!=""&&l.proposed.trafficData.speedLimit!=""&&l.proposed.trafficData.observedSpeed!=null&&l.proposed.trafficData.streetFunction!=""),r.$$.dirty&1&&n(1,t=on(l.proposed.trafficData.speedLimit,l.proposed.trafficData.observedSpeed))},[l,t,a,i,o,s,f,m,u,h,$]}class _r extends ke{constructor(e){super(),ye(this,e,hr,mr,we,{valid:3})}}function gr(r){let e,n;return e=new dr({}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function $r(r){let e,n="Fill out all traffic data above to continue";return{c(){e=L("p"),e.textContent=n},l(t){e=N(t,"P",{"data-svelte-h":!0}),De(e)!=="svelte-72a5ry"&&(e.textContent=n)},m(t,l){S(t,e,l)},p:Je,i:Je,o:Je,d(t){t&&_(e)}}}function br(r){let e,n,t,l;return e=new ut({props:{label:"Preferred Cross-Section",open:!0,$$slots:{default:[vr]},$$scope:{ctx:r}}}),t=new ut({props:{label:"Compromised Cross-Section",open:!0,$$slots:{default:[kr]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),n=C(),M(t.$$.fragment)},l(i){W(e.$$.fragment,i),n=E(i),W(t.$$.fragment,i)},m(i,a){R(e,i,a),S(i,n,a),R(t,i,a),l=!0},p(i,a){const o={};a&66&&(o.$$scope={dirty:a,ctx:i}),e.$set(o);const s={};a&66&&(s.$$scope={dirty:a,ctx:i}),t.$set(s)},i(i){l||(w(e.$$.fragment,i),w(t.$$.fragment,i),l=!0)},o(i){T(e.$$.fragment,i),T(t.$$.fragment,i),l=!1},d(i){i&&_(n),P(e,i),P(t,i)}}}function vr(r){let e,n,t;function l(a){r[4](a)}let i={sectionType:"Preferred"};return r[1].proposed.desirableMinimumCrossSection!==void 0&&(i.streetFeaturesLeftToRight=r[1].proposed.desirableMinimumCrossSection),e=new un({props:i}),te.push(()=>le(e,"streetFeaturesLeftToRight",l)),{c(){M(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,o){R(e,a,o),t=!0},p(a,o){const s={};!n&&o&2&&(n=!0,s.streetFeaturesLeftToRight=a[1].proposed.desirableMinimumCrossSection,re(()=>n=!1)),e.$set(s)},i(a){t||(w(e.$$.fragment,a),t=!0)},o(a){T(e.$$.fragment,a),t=!1},d(a){P(e,a)}}}function nn(r){let e,n;return e=new Te({props:{$$slots:{default:[wr]},$$scope:{ctx:r}}}),e.$on("click",r[2]),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){R(e,t,l),n=!0},p(t,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function wr(r){let e;return{c(){e=j("Copy Preferred")},l(n){e=A(n,"Copy Preferred")},m(n,t){S(n,e,t)},d(n){n&&_(e)}}}function kr(r){let e,n,t,l,i=r[1].proposed.absoluteMinimumCrossSection.length==0&&nn(r);function a(s){r[5](s)}let o={sectionType:"Compromised"};return r[1].proposed.absoluteMinimumCrossSection!==void 0&&(o.streetFeaturesLeftToRight=r[1].proposed.absoluteMinimumCrossSection),n=new un({props:o}),te.push(()=>le(n,"streetFeaturesLeftToRight",a)),{c(){i&&i.c(),e=C(),M(n.$$.fragment)},l(s){i&&i.l(s),e=E(s),W(n.$$.fragment,s)},m(s,f){i&&i.m(s,f),S(s,e,f),R(n,s,f),l=!0},p(s,f){s[1].proposed.absoluteMinimumCrossSection.length==0?i?(i.p(s,f),f&2&&w(i,1)):(i=nn(s),i.c(),w(i,1),i.m(e.parentNode,e)):i&&(se(),T(i,1,1,()=>{i=null}),oe());const m={};!t&&f&2&&(t=!0,m.streetFeaturesLeftToRight=s[1].proposed.absoluteMinimumCrossSection,re(()=>t=!1)),n.$set(m)},i(s){l||(w(i),w(n.$$.fragment,s),l=!0)},o(s){T(i),T(n.$$.fragment,s),l=!1},d(s){s&&_(e),i&&i.d(s),P(n,s)}}}function yr(r){let e,n,t,l,i,a,o,s,f;function m(d){r[3](d)}let u={};r[0]!==void 0&&(u.valid=r[0]),e=new _r({props:u}),te.push(()=>le(e,"valid",m)),l=new ut({props:{label:"Custom Street Features",$$slots:{default:[gr]},$$scope:{ctx:r}}});const h=[br,$r],$=[];function g(d,y){return d[0]?0:1}return a=g(r),o=$[a]=h[a](r),{c(){M(e.$$.fragment),t=C(),M(l.$$.fragment),i=C(),o.c(),s=Pe()},l(d){W(e.$$.fragment,d),t=E(d),W(l.$$.fragment,d),i=E(d),o.l(d),s=Pe()},m(d,y){R(e,d,y),S(d,t,y),R(l,d,y),S(d,i,y),$[a].m(d,y),S(d,s,y),f=!0},p(d,[y]){const b={};!n&&y&1&&(n=!0,b.valid=d[0],re(()=>n=!1)),e.$set(b);const B={};y&64&&(B.$$scope={dirty:y,ctx:d}),l.$set(B);let Q=a;a=g(d),a===Q?$[a].p(d,y):(se(),T($[Q],1,1,()=>{$[Q]=null}),oe(),o=$[a],o?o.p(d,y):(o=$[a]=h[a](d),o.c()),w(o,1),o.m(s.parentNode,s))},i(d){f||(w(e.$$.fragment,d),w(l.$$.fragment,d),w(o),f=!0)},o(d){T(e.$$.fragment,d),T(l.$$.fragment,d),T(o),f=!1},d(d){d&&(_(t),_(i),_(s)),P(e,d),P(l,d),$[a].d(d)}}}function Dr(r,e,n){let t;ze(r,X,f=>n(1,t=f));let l=!1;function i(){ln(X,t.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(t.proposed.desirableMinimumCrossSection)),t)}function a(f){l=f,n(0,l)}function o(f){r.$$.not_equal(t.proposed.desirableMinimumCrossSection,f)&&(t.proposed.desirableMinimumCrossSection=f,X.set(t))}function s(f){r.$$.not_equal(t.proposed.absoluteMinimumCrossSection,f)&&(t.proposed.absoluteMinimumCrossSection=f,X.set(t))}return[l,t,i,a,o,s]}class Gr extends ke{constructor(e){super(),ye(this,e,Dr,yr,we,{})}}export{Gr as component};
