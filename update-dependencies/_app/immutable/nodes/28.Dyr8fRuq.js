import{s as _e,n as Ue,d as _,K as qe,i as $,D as te,a as ce,b as E,p as ue,c as M,e as O,f as N,g as S,h as D,t as I,j as W,q as Z,r as le,v as oe,k as Me,U as st,y as it,w as z,T as at,V as et,E as je}from"../chunks/hklQk-fT.js";import{S as ge,i as $e,e as se,d as q,t as T,a as k,g as me,f as he,m as A,c as L,b as H}from"../chunks/4RGf_tlt.js";import{e as ne,u as rt,o as ft}from"../chunks/BrDnhTDH.js";import"../chunks/9zY2Kmcu.js";import{S as tt}from"../chunks/DA7LY1yu.js";import{s as R}from"../chunks/CKTBbuqi.js";import{c as Oe}from"../chunks/QIc_5A2T.js";import{D as nt}from"../chunks/Dme3KfYF.js";import{T as lt}from"../chunks/B5wqblEL.js";import{W as ot}from"../chunks/Ds1ziPsG.js";import{G as ct,C as ut,S as mt}from"../chunks/B237b6SO.js";import{B as ht,C as pt,M as dt}from"../chunks/CeGUsx_D.js";import{C as _t}from"../chunks/CjPY_yZ9.js";import{D as gt}from"../chunks/DMA4LSaw.js";import"../chunks/5Kj5P_jt.js";import"../chunks/BiW_FGx4.js";import"../chunks/Blz861IN.js";import{M as $t,b as bt,o as vt}from"../chunks/NSC2e-l3.js";import{C as kt}from"../chunks/CUJcIf5h.js";function Ge(o,e,n){const t=o.slice();return t[5]=e[n][0],t[6]=e[n][1][0],t[7]=e[n][1][1],t}function wt(o){let e,n="Insufficient Space";return{c(){e=D("strong"),e.textContent=n,this.h()},l(t){e=M(t,"STRONG",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-9xvf61"&&(e.textContent=n),this.h()},h(){ue(e,"class","govuk-tag govuk-tag--red")},m(t,s){$(t,e,s)},d(t){t&&_(e)}}}function Tt(o){let e,n="Absolute Minimum";return{c(){e=D("strong"),e.textContent=n,this.h()},l(t){e=M(t,"STRONG",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-hmipw0"&&(e.textContent=n),this.h()},h(){ue(e,"class","govuk-tag govuk-tag--yellow")},m(t,s){$(t,e,s)},d(t){t&&_(e)}}}function Ct(o){let e,n="Desirable Minimum";return{c(){e=D("strong"),e.textContent=n,this.h()},l(t){e=M(t,"STRONG",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-11simwv"&&(e.textContent=n),this.h()},h(){ue(e,"class","govuk-tag govuk-tag--green")},m(t,s){$(t,e,s)},d(t){t&&_(e)}}}function Re(o){let e,n=o[5]+"",t,s=o[1]?"cross sections possible:":":",r,l,c;function i(a,u){return a[0]>=a[6]?Ct:a[0]>a[7]?Tt:wt}let m=i(o),f=m(o);return{c(){e=D("p"),t=I(n),r=I(s),l=W(),f.c(),c=W(),this.h()},l(a){e=M(a,"P",{class:!0});var u=O(e);t=N(u,n),r=N(u,s),l=S(u),f.l(u),c=S(u),u.forEach(_),this.h()},h(){ue(e,"class","svelte-1d0pd4t")},m(a,u){$(a,e,u),E(e,t),E(e,r),E(e,l),f.m(e,null),E(e,c)},p(a,u){u&2&&s!==(s=a[1]?"cross sections possible:":":")&&ce(r,s),m!==(m=i(a))&&(f.d(1),f=m(a),f&&(f.c(),f.m(e,c)))},d(a){a&&_(e),f.d()}}}function Pt(o){let e,n=ne(o[2]),t=[];for(let s=0;s<n.length;s+=1)t[s]=Re(Ge(o,n,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=te()},l(s){for(let r=0;r<t.length;r+=1)t[r].l(s);e=te()},m(s,r){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(s,r);$(s,e,r)},p(s,[r]){if(r&7){n=ne(s[2]);let l;for(l=0;l<n.length;l+=1){const c=Ge(s,n,l);t[l]?t[l].p(c,r):(t[l]=Re(c),t[l].c(),t[l].m(e.parentNode,e))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},i:Ue,o:Ue,d(s){s&&_(e),qe(t,s)}}}function St(o,e,n){let{available:t}=e,{preferredTotals:s}=e,{compromisedTotals:r}=e,{verbose:l=!0}=e,c=[["Preferred",s],["Compromised",r]];return o.$$set=i=>{"available"in i&&n(0,t=i.available),"preferredTotals"in i&&n(3,s=i.preferredTotals),"compromisedTotals"in i&&n(4,r=i.compromisedTotals),"verbose"in i&&n(1,l=i.verbose)},[t,l,c,s,r]}class Ae extends ge{constructor(e){super(),$e(this,e,St,Pt,_e,{available:0,preferredTotals:3,compromisedTotals:4,verbose:1})}}function ye(o){let e,n,t;function s(l){o[6](l)}let r={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return o[3].checks.homogeneousSections[o[0]].notes!==void 0&&(r.value=o[3].checks.homogeneousSections[o[0]].notes),e=new lt({props:r}),le.push(()=>se(e,"value",s)),{c(){H(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,c){A(e,l,c),t=!0},p(l,c){const i={};!n&&c&9&&(n=!0,i.value=l[3].checks.homogeneousSections[l[0]].notes,oe(()=>n=!1)),e.$set(i)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Wt(o){let e;return{c(){e=I("Delete")},l(n){e=N(n,"Delete")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Et(o){let e,n,t,s=o[0]+1+"",r,l,c,i,m,f,a,u,d,p;function P(v){o[5](v)}let F={label:"Available width (m)",width:4,min:0};o[3].checks.homogeneousSections[o[0]].availableWidth!==void 0&&(F.value=o[3].checks.homogeneousSections[o[0]].availableWidth),c=new nt({props:F}),le.push(()=>se(c,"value",P)),f=new Ae({props:{available:o[3].checks.homogeneousSections[o[0]].availableWidth,preferredTotals:o[1],compromisedTotals:o[2]}});let b=o[3].checks.homogeneousSections[o[0]].availableWidth<o[1][0]&&ye(o);return d=new ot({props:{$$slots:{default:[Wt]},$$scope:{ctx:o}}}),d.$on("click",o[7]),{c(){e=D("div"),n=D("u"),t=I("Cross-section #"),r=I(s),l=W(),H(c.$$.fragment),m=W(),H(f.$$.fragment),a=W(),b&&b.c(),u=W(),H(d.$$.fragment),this.h()},l(v){e=M(v,"DIV",{class:!0});var C=O(e);n=M(C,"U",{});var B=O(n);t=N(B,"Cross-section #"),r=N(B,s),B.forEach(_),l=S(C),L(c.$$.fragment,C),m=S(C),L(f.$$.fragment,C),a=S(C),b&&b.l(C),u=S(C),L(d.$$.fragment,C),C.forEach(_),this.h()},h(){ue(e,"class","svelte-d4ufy0")},m(v,C){$(v,e,C),E(e,n),E(n,t),E(n,r),E(e,l),A(c,e,null),E(e,m),A(f,e,null),E(e,a),b&&b.m(e,null),E(e,u),A(d,e,null),p=!0},p(v,[C]){(!p||C&1)&&s!==(s=v[0]+1+"")&&ce(r,s);const B={};!i&&C&9&&(i=!0,B.value=v[3].checks.homogeneousSections[v[0]].availableWidth,oe(()=>i=!1)),c.$set(B);const y={};C&9&&(y.available=v[3].checks.homogeneousSections[v[0]].availableWidth),C&2&&(y.preferredTotals=v[1]),C&4&&(y.compromisedTotals=v[2]),f.$set(y),v[3].checks.homogeneousSections[v[0]].availableWidth<v[1][0]?b?(b.p(v,C),C&11&&k(b,1)):(b=ye(v),b.c(),k(b,1),b.m(e,u)):b&&(me(),T(b,1,1,()=>{b=null}),he());const G={};C&256&&(G.$$scope={dirty:C,ctx:v}),d.$set(G)},i(v){p||(k(c.$$.fragment,v),k(f.$$.fragment,v),k(b),k(d.$$.fragment,v),p=!0)},o(v){T(c.$$.fragment,v),T(f.$$.fragment,v),T(b),T(d.$$.fragment,v),p=!1},d(v){v&&_(e),q(c),q(f),b&&b.d(),q(d)}}}function Mt(o,e,n){let t;Me(o,R,a=>n(3,t=a));let{i:s}=e,{preferredTotals:r}=e,{compromisedTotals:l}=e,c=st();function i(a){o.$$.not_equal(t.checks.homogeneousSections[s].availableWidth,a)&&(t.checks.homogeneousSections[s].availableWidth=a,R.set(t))}function m(a){o.$$.not_equal(t.checks.homogeneousSections[s].notes,a)&&(t.checks.homogeneousSections[s].notes=a,R.set(t))}const f=()=>c("delete");return o.$$set=a=>{"i"in a&&n(0,s=a.i),"preferredTotals"in a&&n(1,r=a.preferredTotals),"compromisedTotals"in a&&n(2,l=a.compromisedTotals)},[s,r,l,t,c,i,m,f]}class Dt extends ge{constructor(e){super(),$e(this,e,Mt,Et,_e,{i:0,preferredTotals:1,compromisedTotals:2})}}function Ke(o){let e,n,t;function s(l){o[5](l)}let r={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return o[3].checks.pinchPoints[o[0]].notes!==void 0&&(r.value=o[3].checks.pinchPoints[o[0]].notes),e=new lt({props:r}),le.push(()=>se(e,"value",s)),{c(){H(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,c){A(e,l,c),t=!0},p(l,c){const i={};!n&&c&9&&(n=!0,i.value=l[3].checks.pinchPoints[l[0]].notes,oe(()=>n=!1)),e.$set(i)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function qt(o){let e,n,t,s,r,l,c;function i(a){o[4](a)}let m={label:"Available width (m)",width:4,min:0};o[3].checks.pinchPoints[o[0]].availableWidth!==void 0&&(m.value=o[3].checks.pinchPoints[o[0]].availableWidth),n=new nt({props:m}),le.push(()=>se(n,"value",i)),r=new Ae({props:{available:o[3].checks.pinchPoints[o[0]].availableWidth,preferredTotals:o[1],compromisedTotals:o[2]}});let f=o[3].checks.pinchPoints[o[0]].availableWidth<o[1][0]&&Ke(o);return{c(){e=D("div"),H(n.$$.fragment),s=W(),H(r.$$.fragment),l=W(),f&&f.c(),this.h()},l(a){e=M(a,"DIV",{class:!0});var u=O(e);L(n.$$.fragment,u),s=S(u),L(r.$$.fragment,u),l=S(u),f&&f.l(u),u.forEach(_),this.h()},h(){ue(e,"class","svelte-jig4ga")},m(a,u){$(a,e,u),A(n,e,null),E(e,s),A(r,e,null),E(e,l),f&&f.m(e,null),c=!0},p(a,[u]){const d={};!t&&u&9&&(t=!0,d.value=a[3].checks.pinchPoints[a[0]].availableWidth,oe(()=>t=!1)),n.$set(d);const p={};u&9&&(p.available=a[3].checks.pinchPoints[a[0]].availableWidth),u&2&&(p.preferredTotals=a[1]),u&4&&(p.compromisedTotals=a[2]),r.$set(p),a[3].checks.pinchPoints[a[0]].availableWidth<a[1][0]?f?(f.p(a,u),u&11&&k(f,1)):(f=Ke(a),f.c(),k(f,1),f.m(e,null)):f&&(me(),T(f,1,1,()=>{f=null}),he())},i(a){c||(k(n.$$.fragment,a),k(r.$$.fragment,a),k(f),c=!0)},o(a){T(n.$$.fragment,a),T(r.$$.fragment,a),T(f),c=!1},d(a){a&&_(e),q(n),q(r),f&&f.d()}}}function At(o,e,n){let t;Me(o,R,m=>n(3,t=m));let{i:s}=e,{preferredTotals:r}=e,{compromisedTotals:l}=e;function c(m){o.$$.not_equal(t.checks.pinchPoints[s].availableWidth,m)&&(t.checks.pinchPoints[s].availableWidth=m,R.set(t))}function i(m){o.$$.not_equal(t.checks.pinchPoints[s].notes,m)&&(t.checks.pinchPoints[s].notes=m,R.set(t))}return o.$$set=m=>{"i"in m&&n(0,s=m.i),"preferredTotals"in m&&n(1,r=m.preferredTotals),"compromisedTotals"in m&&n(2,l=m.compromisedTotals)},[s,r,l,t,c,i]}class Lt extends ge{constructor(e){super(),$e(this,e,At,qt,_e,{i:0,preferredTotals:1,compromisedTotals:2})}}function Ze(o,e,n){const t=o.slice();return t[24]=e[n],t[25]=e,t[26]=n,t}function ze(o,e,n){const t=o.slice();return t[27]=e[n],t[26]=n,t}function Ht(o){let e,n,t=o[5]+1+"",s,r,l,c,i,m,f,a;return l=new gt({props:{$$slots:{default:[Nt]},$$scope:{ctx:o}}}),l.$on("click",o[19]),i=new ot({props:{$$slots:{default:[It]},$$scope:{ctx:o}}}),i.$on("click",o[20]),f=new Lt({props:{i:o[5],preferredTotals:o[0],compromisedTotals:o[1]}}),{c(){e=D("h2"),n=I("Pinch point "),s=I(t),r=W(),H(l.$$.fragment),c=W(),H(i.$$.fragment),m=W(),H(f.$$.fragment)},l(u){e=M(u,"H2",{});var d=O(e);n=N(d,"Pinch point "),s=N(d,t),d.forEach(_),r=S(u),L(l.$$.fragment,u),c=S(u),L(i.$$.fragment,u),m=S(u),L(f.$$.fragment,u)},m(u,d){$(u,e,d),E(e,n),E(e,s),$(u,r,d),A(l,u,d),$(u,c,d),A(i,u,d),$(u,m,d),A(f,u,d),a=!0},p(u,d){(!a||d&32)&&t!==(t=u[5]+1+"")&&ce(s,t);const p={};d&536870912&&(p.$$scope={dirty:d,ctx:u}),l.$set(p);const P={};d&536870912&&(P.$$scope={dirty:d,ctx:u}),i.$set(P);const F={};d&32&&(F.i=u[5]),d&1&&(F.preferredTotals=u[0]),d&2&&(F.compromisedTotals=u[1]),f.$set(F)},i(u){a||(k(l.$$.fragment,u),k(i.$$.fragment,u),k(f.$$.fragment,u),a=!0)},o(u){T(l.$$.fragment,u),T(i.$$.fragment,u),T(f.$$.fragment,u),a=!1},d(u){u&&(_(e),_(r),_(c),_(m)),q(l,u),q(i,u),q(f,u)}}}function Ft(o){let e,n,t,s;e=new _t({props:{label:"Tools",$$slots:{default:[Ut]},$$scope:{ctx:o}}});let r=ne(o[7].checks.pinchPoints),l=[];for(let i=0;i<r.length;i+=1)l[i]=Je(ze(o,r,i));const c=i=>T(l[i],1,1,()=>{l[i]=null});return{c(){H(e.$$.fragment),n=W();for(let i=0;i<l.length;i+=1)l[i].c();t=te()},l(i){L(e.$$.fragment,i),n=S(i);for(let m=0;m<l.length;m+=1)l[m].l(i);t=te()},m(i,m){A(e,i,m),$(i,n,m);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(i,m);$(i,t,m),s=!0},p(i,m){const f={};if(m&536870940&&(f.$$scope={dirty:m,ctx:i}),e.$set(f),m&451){r=ne(i[7].checks.pinchPoints);let a;for(a=0;a<r.length;a+=1){const u=ze(i,r,a);l[a]?(l[a].p(u,m),k(l[a],1)):(l[a]=Je(u),l[a].c(),k(l[a],1),l[a].m(t.parentNode,t))}for(me(),a=r.length;a<l.length;a+=1)c(a);he()}},i(i){if(!s){k(e.$$.fragment,i);for(let m=0;m<r.length;m+=1)k(l[m]);s=!0}},o(i){T(e.$$.fragment,i),l=l.filter(Boolean);for(let m=0;m<l.length;m+=1)T(l[m]);s=!1},d(i){i&&(_(n),_(t)),q(e,i),qe(l,i)}}}function Nt(o){let e;return{c(){e=I("Save")},l(n){e=N(n,"Save")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function It(o){let e;return{c(){e=I("Delete")},l(n){e=N(n,"Delete")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Bt(o){let e;return{c(){e=I("Zoom to fit")},l(n){e=N(n,"Zoom to fit")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Xe(o){let e,n,t;function s(l){o[14](l)}let r={map:o[2]};return o[3]!==void 0&&(r.enabled=o[3]),e=new mt({props:r}),le.push(()=>se(e,"enabled",s)),{c(){H(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,c){A(e,l,c),t=!0},p(l,c){const i={};c&4&&(i.map=l[2]),!n&&c&8&&(n=!0,i.enabled=l[3],oe(()=>n=!1)),e.$set(i)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Vt(o){let e;return{c(){e=I("Show scheme context")},l(n){e=N(n,"Show scheme context")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Ut(o){let e,n,t,s,r,l,c,i,m,f;e=new tt({props:{$$slots:{default:[Bt]},$$scope:{ctx:o}}}),e.$on("click",o[13]),t=new ht({}),r=new ct({});let a=o[2]&&Xe(o);function u(p){o[15](p)}let d={$$slots:{default:[Vt]},$$scope:{ctx:o}};return o[4]!==void 0&&(d.checked=o[4]),i=new pt({props:d}),le.push(()=>se(i,"checked",u)),{c(){H(e.$$.fragment),n=W(),H(t.$$.fragment),s=W(),H(r.$$.fragment),l=W(),a&&a.c(),c=W(),H(i.$$.fragment)},l(p){L(e.$$.fragment,p),n=S(p),L(t.$$.fragment,p),s=S(p),L(r.$$.fragment,p),l=S(p),a&&a.l(p),c=S(p),L(i.$$.fragment,p)},m(p,P){A(e,p,P),$(p,n,P),A(t,p,P),$(p,s,P),A(r,p,P),$(p,l,P),a&&a.m(p,P),$(p,c,P),A(i,p,P),f=!0},p(p,P){const F={};P&536870912&&(F.$$scope={dirty:P,ctx:p}),e.$set(F),p[2]?a?(a.p(p,P),P&4&&k(a,1)):(a=Xe(p),a.c(),k(a,1),a.m(c.parentNode,c)):a&&(me(),T(a,1,1,()=>{a=null}),he());const b={};P&536870912&&(b.$$scope={dirty:P,ctx:p}),!m&&P&16&&(m=!0,b.checked=p[4],oe(()=>m=!1)),i.$set(b)},i(p){f||(k(e.$$.fragment,p),k(t.$$.fragment,p),k(r.$$.fragment,p),k(a),k(i.$$.fragment,p),f=!0)},o(p){T(e.$$.fragment,p),T(t.$$.fragment,p),T(r.$$.fragment,p),T(a),T(i.$$.fragment,p),f=!1},d(p){p&&(_(n),_(s),_(l),_(c)),q(e,p),q(t,p),q(r,p),a&&a.d(p),q(i,p)}}}function jt(o){let e,n,t;return e=new Ae({props:{available:o[27].availableWidth,preferredTotals:o[0],compromisedTotals:o[1],verbose:!1}}),{c(){H(e.$$.fragment),n=W()},l(s){L(e.$$.fragment,s),n=S(s)},m(s,r){A(e,s,r),$(s,n,r),t=!0},p(s,r){const l={};r&128&&(l.available=s[27].availableWidth),r&1&&(l.preferredTotals=s[0]),r&2&&(l.compromisedTotals=s[1]),e.$set(l)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){s&&_(n),q(e,s)}}}function Je(o){let e,n;function t(){return o[16](o[26])}function s(){return o[17](o[26])}return e=new ut({props:{name:`Pinch point ${o[26]+1}: ${o[27].availableWidth}m`,$$slots:{default:[jt]},$$scope:{ctx:o}}}),e.$on("click",t),e.$on("mouseenter",s),e.$on("mouseleave",o[18]),{c(){H(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,l){A(e,r,l),n=!0},p(r,l){o=r;const c={};l&128&&(c.name=`Pinch point ${o[26]+1}: ${o[27].availableWidth}m`),l&536871043&&(c.$$scope={dirty:l,ctx:o}),e.$set(c)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Ot(o){let e,n=o[26]+1+"",t,s;return{c(){e=D("span"),t=I(n),s=W(),this.h()},l(r){e=M(r,"SPAN",{class:!0});var l=O(e);t=N(l,n),l.forEach(_),s=S(r),this.h()},h(){ue(e,"class","dot svelte-48lsk4"),je(e,"highlight",o[26]==o[5]||o[26]==o[6])},m(r,l){$(r,e,l),E(e,t),$(r,s,l)},p(r,l){l&96&&je(e,"highlight",r[26]==r[5]||r[26]==r[6])},d(r){r&&(_(e),_(s))}}}function Qe(o){let e,n,t;function s(c){o[21](c,o[24])}function r(){return o[22](o[26])}let l={draggable:!0,$$slots:{default:[Ot]},$$scope:{ctx:o}};return o[24].location!==void 0&&(l.lngLat=o[24].location),e=new dt({props:l}),le.push(()=>se(e,"lngLat",s)),e.$on("click",r),{c(){H(e.$$.fragment)},l(c){L(e.$$.fragment,c)},m(c,i){A(e,c,i),t=!0},p(c,i){o=c;const m={};i&536871008&&(m.$$scope={dirty:i,ctx:o}),!n&&i&128&&(n=!0,m.lngLat=o[24].location,oe(()=>n=!1)),e.$set(m)},i(c){t||(k(e.$$.fragment,c),t=!0)},o(c){T(e.$$.fragment,c),t=!1},d(c){q(e,c)}}}function Gt(o){let e,n,t,s,r,l;e=new vt({}),e.$on("click",o[10]),t=new kt({props:{gj:o[7].summary.networkMap,show:o[4]}});let c=ne(o[7].checks.pinchPoints),i=[];for(let f=0;f<c.length;f+=1)i[f]=Qe(Ze(o,c,f));const m=f=>T(i[f],1,1,()=>{i[f]=null});return{c(){H(e.$$.fragment),n=W(),H(t.$$.fragment),s=W();for(let f=0;f<i.length;f+=1)i[f].c();r=te()},l(f){L(e.$$.fragment,f),n=S(f),L(t.$$.fragment,f),s=S(f);for(let a=0;a<i.length;a+=1)i[a].l(f);r=te()},m(f,a){A(e,f,a),$(f,n,a),A(t,f,a),$(f,s,a);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(f,a);$(f,r,a),l=!0},p(f,a){const u={};if(a&128&&(u.gj=f[7].summary.networkMap),a&16&&(u.show=f[4]),t.$set(u),a&480){c=ne(f[7].checks.pinchPoints);let d;for(d=0;d<c.length;d+=1){const p=Ze(f,c,d);i[d]?(i[d].p(p,a),k(i[d],1)):(i[d]=Qe(p),i[d].c(),k(i[d],1),i[d].m(r.parentNode,r))}for(me(),d=c.length;d<i.length;d+=1)m(d);he()}},i(f){if(!l){k(e.$$.fragment,f),k(t.$$.fragment,f);for(let a=0;a<c.length;a+=1)k(i[a]);l=!0}},o(f){T(e.$$.fragment,f),T(t.$$.fragment,f),i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)T(i[a]);l=!1},d(f){f&&(_(n),_(s),_(r)),q(e,f),q(t,f),qe(i,f)}}}function Rt(o){let e,n,t,s,r,l,c,i,m,f,a;const u=[Ft,Ht],d=[];function p(b,v){return b[5]==null?0:1}t=p(o),s=d[t]=u[t](o);function P(b){o[23](b)}let F={$$slots:{default:[Gt]},$$scope:{ctx:o}};return o[2]!==void 0&&(F.map=o[2]),c=new $t({props:F}),le.push(()=>se(c,"map",P)),{c(){e=D("div"),n=D("div"),s.c(),r=W(),l=D("div"),H(c.$$.fragment),this.h()},l(b){e=M(b,"DIV",{style:!0});var v=O(e);n=M(v,"DIV",{style:!0});var C=O(n);s.l(C),C.forEach(_),r=S(v),l=M(v,"DIV",{style:!0});var B=O(l);L(c.$$.fragment,B),B.forEach(_),v.forEach(_),this.h()},h(){z(n,"width","30%"),z(n,"overflow-y","scroll"),z(n,"padding","10px"),z(n,"border","1px solid black"),z(l,"position","relative"),z(l,"width","100%"),z(e,"display","flex"),z(e,"height","80vh")},m(b,v){$(b,e,v),E(e,n),d[t].m(n,null),E(e,r),E(e,l),A(c,l,null),m=!0,f||(a=it(window,"keydown",o[12]),f=!0)},p(b,[v]){let C=t;t=p(b),t===C?d[t].p(b,v):(me(),T(d[C],1,1,()=>{d[C]=null}),he(),s=d[t],s?s.p(b,v):(s=d[t]=u[t](b),s.c()),k(s,1),s.m(n,null));const B={};v&536871152&&(B.$$scope={dirty:v,ctx:b}),!i&&v&4&&(i=!0,B.map=b[2],oe(()=>i=!1)),c.$set(B)},i(b){m||(k(s),k(c.$$.fragment,b),m=!0)},o(b){T(s),T(c.$$.fragment,b),m=!1},d(b){b&&_(e),d[t].d(),q(c),f=!1,a()}}}function yt(o,e,n){let t;Me(o,R,w=>n(7,t=w));let{preferredTotals:s}=e,{compromisedTotals:r}=e,l,c=!1,i=!0,m,f;at(()=>{u(!1)});function a(w){n(5,m=w),n(6,f=null)}function u(w){let j={type:"FeatureCollection",features:t.checks.pinchPoints.map(K=>({type:"Feature",properties:{},geometry:{type:"Point",coordinates:K.location}}))};for(let K of t.summary.networkMap.features)j.features.push(K);j.features.length>0&&l.fitBounds(bt(j),{padding:20,animate:w})}function d(w){if(!c){if(m!=null){n(5,m=null);return}et(R,t.checks.pinchPoints=[...t.checks.pinchPoints,{location:w.detail.lngLat.toArray(),availableWidth:0,notes:""}],t),a(t.checks.pinchPoints.length-1)}}function p(){t.checks.pinchPoints.splice(m,1),R.set(t),n(5,m=null)}function P(w){if(m!=null&&w.key=="Escape")w.stopPropagation(),n(5,m=null);else if(m!=null&&w.key=="Delete"){let j=w.target.tagName;if(j=="INPUT"||j=="TEXTAREA")return;w.stopPropagation(),p()}}const F=()=>u(!0);function b(w){c=w,n(3,c)}function v(w){i=w,n(4,i)}const C=w=>a(w),B=w=>n(6,f=w),y=()=>n(6,f=null),G=()=>n(5,m=null),Q=()=>p();function be(w,j){o.$$.not_equal(j.location,w)&&(j.location=w,R.set(t))}const pe=w=>a(w);function ie(w){l=w,n(2,l)}return o.$$set=w=>{"preferredTotals"in w&&n(0,s=w.preferredTotals),"compromisedTotals"in w&&n(1,r=w.compromisedTotals)},[s,r,l,c,i,m,f,t,a,u,d,p,P,F,b,v,C,B,y,G,Q,be,pe,ie]}class Kt extends ge{constructor(e){super(),$e(this,e,yt,Rt,_e,{preferredTotals:0,compromisedTotals:1})}}function Ye(o,e,n){const t=o.slice();return t[6]=e[n],t[8]=n,t}function Zt(o){let e;return{c(){e=I("Add")},l(n){e=N(n,"Add")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function xe(o,e){let n,t,s;function r(){return e[5](e[8])}return t=new Dt({props:{i:e[8],preferredTotals:e[2],compromisedTotals:e[1]}}),t.$on("delete",r),{key:o,first:null,c(){n=te(),H(t.$$.fragment),this.h()},l(l){n=te(),L(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,c){$(l,n,c),A(t,l,c),s=!0},p(l,c){e=l;const i={};c&1&&(i.i=e[8]),c&4&&(i.preferredTotals=e[2]),c&2&&(i.compromisedTotals=e[1]),t.$set(i)},i(l){s||(k(t.$$.fragment,l),s=!0)},o(l){T(t.$$.fragment,l),s=!1},d(l){l&&_(n),q(t,l)}}}function zt(o){let e,n,t="Preferred",s,r=o[2][0].toFixed(2)+"",l,c,i,m,f="Preferred",a,u=o[2][1].toFixed(2)+"",d,p,P,F,b="Compromised",v,C=o[1][0].toFixed(2)+"",B,y,G,Q,be="Compromised",pe,ie=o[1][1].toFixed(2)+"",w,j,K,Le=`Checking possible cross-sections of <u>homogeneous sections</u>
  of route along the proposed corridor`,ve,ae,He=`At regular intervals along the corridor measure and enter the available width
  to see if your proposed cross-sections can be accommodated`,ke,J,we,X,V=[],Fe=new Map,Te,Ce,Pe,re,Ne=`Checking possible cross-sections of any <u>constrained or atypical locations</u>
  along the proposed corridor`,Se,fe,Ie=`At key constraints along the corridor, measure and enter the available width
  to see if your proposed cross-sections can be accommodated. Click the map to
  add a pinch point.`,We,Y,x;J=new tt({props:{$$slots:{default:[Zt]},$$scope:{ctx:o}}}),J.$on("click",o[3]);let de=ne(o[0].checks.homogeneousSections);const Be=h=>h[6];for(let h=0;h<de.length;h+=1){let g=Ye(o,de,h),U=Be(g);Fe.set(U,V[h]=xe(U,g))}return Y=new Kt({props:{preferredTotals:o[2],compromisedTotals:o[1]}}),{c(){e=D("p"),n=D("u"),n.textContent=t,s=I(`
  cross-section requites a desirable minimum width (m): `),l=I(r),c=W(),i=D("p"),m=D("u"),m.textContent=f,a=I(`
  cross-section requites an absolute minimum width (m): `),d=I(u),p=W(),P=D("p"),F=D("u"),F.textContent=b,v=I(`
  cross-section requites a desirable minimum width (m): `),B=I(C),y=W(),G=D("p"),Q=D("u"),Q.textContent=be,pe=I(`
  cross-section requites an absolute minimum width (m): `),w=I(ie),j=W(),K=D("h2"),K.innerHTML=Le,ve=W(),ae=D("p"),ae.textContent=He,ke=W(),H(J.$$.fragment),we=W(),X=D("div");for(let h=0;h<V.length;h+=1)V[h].c();Te=W(),Ce=D("hr"),Pe=W(),re=D("h2"),re.innerHTML=Ne,Se=W(),fe=D("p"),fe.textContent=Ie,We=W(),H(Y.$$.fragment),this.h()},l(h){e=M(h,"P",{});var g=O(e);n=M(g,"U",{"data-svelte-h":!0}),Z(n)!=="svelte-1gb9n3v"&&(n.textContent=t),s=N(g,`
  cross-section requites a desirable minimum width (m): `),l=N(g,r),g.forEach(_),c=S(h),i=M(h,"P",{});var U=O(i);m=M(U,"U",{"data-svelte-h":!0}),Z(m)!=="svelte-1gb9n3v"&&(m.textContent=f),a=N(U,`
  cross-section requites an absolute minimum width (m): `),d=N(U,u),U.forEach(_),p=S(h),P=M(h,"P",{});var ee=O(P);F=M(ee,"U",{"data-svelte-h":!0}),Z(F)!=="svelte-svpwa8"&&(F.textContent=b),v=N(ee,`
  cross-section requites a desirable minimum width (m): `),B=N(ee,C),ee.forEach(_),y=S(h),G=M(h,"P",{});var Ee=O(G);Q=M(Ee,"U",{"data-svelte-h":!0}),Z(Q)!=="svelte-svpwa8"&&(Q.textContent=be),pe=N(Ee,`
  cross-section requites an absolute minimum width (m): `),w=N(Ee,ie),Ee.forEach(_),j=S(h),K=M(h,"H2",{"data-svelte-h":!0}),Z(K)!=="svelte-1x2x8kb"&&(K.innerHTML=Le),ve=S(h),ae=M(h,"P",{"data-svelte-h":!0}),Z(ae)!=="svelte-x0c18j"&&(ae.textContent=He),ke=S(h),L(J.$$.fragment,h),we=S(h),X=M(h,"DIV",{style:!0});var Ve=O(X);for(let De=0;De<V.length;De+=1)V[De].l(Ve);Ve.forEach(_),Te=S(h),Ce=M(h,"HR",{}),Pe=S(h),re=M(h,"H2",{"data-svelte-h":!0}),Z(re)!=="svelte-1m1bgig"&&(re.innerHTML=Ne),Se=S(h),fe=M(h,"P",{"data-svelte-h":!0}),Z(fe)!=="svelte-x52uk0"&&(fe.textContent=Ie),We=S(h),L(Y.$$.fragment,h),this.h()},h(){z(X,"display","flex"),z(X,"flex-direction","row"),z(X,"overflow-x","scroll")},m(h,g){$(h,e,g),E(e,n),E(e,s),E(e,l),$(h,c,g),$(h,i,g),E(i,m),E(i,a),E(i,d),$(h,p,g),$(h,P,g),E(P,F),E(P,v),E(P,B),$(h,y,g),$(h,G,g),E(G,Q),E(G,pe),E(G,w),$(h,j,g),$(h,K,g),$(h,ve,g),$(h,ae,g),$(h,ke,g),A(J,h,g),$(h,we,g),$(h,X,g);for(let U=0;U<V.length;U+=1)V[U]&&V[U].m(X,null);$(h,Te,g),$(h,Ce,g),$(h,Pe,g),$(h,re,g),$(h,Se,g),$(h,fe,g),$(h,We,g),A(Y,h,g),x=!0},p(h,[g]){(!x||g&4)&&r!==(r=h[2][0].toFixed(2)+"")&&ce(l,r),(!x||g&4)&&u!==(u=h[2][1].toFixed(2)+"")&&ce(d,u),(!x||g&2)&&C!==(C=h[1][0].toFixed(2)+"")&&ce(B,C),(!x||g&2)&&ie!==(ie=h[1][1].toFixed(2)+"")&&ce(w,ie);const U={};g&512&&(U.$$scope={dirty:g,ctx:h}),J.$set(U),g&23&&(de=ne(h[0].checks.homogeneousSections),me(),V=rt(V,g,Be,1,h,de,Fe,X,ft,xe,null,Ye),he());const ee={};g&4&&(ee.preferredTotals=h[2]),g&2&&(ee.compromisedTotals=h[1]),Y.$set(ee)},i(h){if(!x){k(J.$$.fragment,h);for(let g=0;g<de.length;g+=1)k(V[g]);k(Y.$$.fragment,h),x=!0}},o(h){T(J.$$.fragment,h);for(let g=0;g<V.length;g+=1)T(V[g]);T(Y.$$.fragment,h),x=!1},d(h){h&&(_(e),_(c),_(i),_(p),_(P),_(y),_(G),_(j),_(K),_(ve),_(ae),_(ke),_(we),_(X),_(Te),_(Ce),_(Pe),_(re),_(Se),_(fe),_(We)),q(J,h);for(let g=0;g<V.length;g+=1)V[g].d();q(Y,h)}}}function Xt(o,e,n){let t,s,r;Me(o,R,m=>n(0,r=m));function l(){et(R,r.checks.homogeneousSections=[...r.checks.homogeneousSections,{availableWidth:0,notes:""}],r)}function c(m){r.checks.homogeneousSections.splice(m,1),R.set(r)}const i=m=>c(m);return o.$$.update=()=>{o.$$.dirty&1&&n(2,t=Oe(r,"Preferred")),o.$$.dirty&1&&n(1,s=Oe(r,"Compromised"))},[r,s,t,l,c,i]}class _n extends ge{constructor(e){super(),$e(this,e,Xt,zt,_e,{})}}export{_n as component};
