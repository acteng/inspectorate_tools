import{s as se,a as q,e as A,g as I,c as V,r as x,i as k,C as Ee,z as Be,f as g,B as lt,v as H,w as z,b as U,x as ce,h as W,k as de,R as He,t as P,D as ee,d as R,j as te,p as ge,q as ot,n as me,V as ft,T as Ge}from"../chunks/scheduler.BBS-fkhU.js";import{S as ae,i as le,c as C,a as N,m as E,t as w,b as y,d as B,e as Y,g as re,f as ne}from"../chunks/index.B8H3ypVf.js";import{e as pe,u as ze,o as Ye}from"../chunks/each.D79A5KlB.js";import"../chunks/paths.9rwmRqyU.js";import{S as ie,W as Ke}from"../chunks/WarningButton.CaqyhU7y.js";import{W as be}from"../chunks/WarningText.BbLDYiUO.js";import{S as oe}from"../chunks/Select.DqyoFzIJ.js";import{E as ut}from"../chunks/ExternalLink.RofZqUC8.js";/* empty css                                                               */import{s as j,a as Qe,b as ct}from"../chunks/data.xE_U2mJW.js";import{a as Xe,n as pt,g as dt,c as mt}from"../chunks/logic.DoW_FSUv.js";import{D as ht,C as he}from"../chunks/DefaultButton.Pbp5mObw.js";import{E as Ze}from"../chunks/ErrorMessage.BCIKj4J0.js";import{T as _t}from"../chunks/TextInput.C_aBwF72.js";import{D as $t}from"../chunks/DecimalInput.B1u8YNyQ.js";import{M as gt}from"../chunks/Modal.BeZKr1PV.js";import{F as bt,v as xe}from"../chunks/FormElement.Cy4womqK.js";import{p as ue}from"../chunks/index.KCb8LDPu.js";function vt(i){let e,t,r,n,s,a,l;return e=new Ze({props:{errorMessage:i[5](i[2])}}),{c(){C(e.$$.fragment),t=q(),r=A("input"),this.h()},l(o){N(e.$$.fragment,o),t=I(o),r=V(o,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){x(r,"type","text"),x(r,"inputmode","numeric"),x(r,"class",n=`govuk-input govuk-input--width-${i[1]}`),x(r,"id",i[3])},m(o,f){E(e,o,f),k(o,t,f),k(o,r,f),Ee(r,i[2]),s=!0,a||(l=[Be(r,"input",i[9]),Be(r,"change",i[4])],a=!0)},p(o,f){const b={};f&4&&(b.errorMessage=o[5](o[2])),e.$set(b),(!s||f&2&&n!==(n=`govuk-input govuk-input--width-${o[1]}`))&&x(r,"class",n),f&4&&r.value!==o[2]&&Ee(r,o[2])},i(o){s||(w(e.$$.fragment,o),s=!0)},o(o){y(e.$$.fragment,o),s=!1},d(o){o&&(g(t),g(r)),B(e,o),a=!1,lt(l)}}}function wt(i){let e,t;return e=new bt({props:{label:i[0],id:i[3],$$slots:{default:[vt]},$$scope:{ctx:i}}}),{c(){C(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,n){E(e,r,n),t=!0},p(r,[n]){const s={};n&1&&(s.label=r[0]),n&1030&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function kt(i,e,t){let{label:r}=e,{value:n}=e,{width:s}=e,{min:a=void 0}=e,{max:l=void 0}=e,o=n==null?void 0:n.toString(),f=xe();function b(){t(6,n=o==null?void 0:parseInt(o,10))}function d(p){if(p==""||p==null)return"";if(p.includes("."))return"Please enter a number without decimals";let _=Number(p);return isNaN(_)?"Please enter a valid number":a!=null&&_<a?`Please enter a number that's at least ${a};`:l!=null&&_>l?`Please enter a number that's at most ${l};`:""}function u(){o=this.value,t(2,o)}return i.$$set=p=>{"label"in p&&t(0,r=p.label),"value"in p&&t(6,n=p.value),"width"in p&&t(1,s=p.width),"min"in p&&t(7,a=p.min),"max"in p&&t(8,l=p.max)},[r,s,o,f,b,d,n,a,l,u]}class yt extends ae{constructor(e){super(),le(this,e,kt,wt,se,{label:0,value:6,width:1,min:7,max:8})}}function Ft(i){let e,t,r;function n(a){i[9](a)}let s={label:i[0],hint:i[1],choices:i[5],emptyOption:i[2],disabled:i[3]};return i[4]!==void 0&&(s.value=i[4]),e=new oe({props:s}),H.push(()=>Y(e,"value",n)),e.$on("change",i[6]),{c(){C(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,l){E(e,a,l),r=!0},p(a,[l]){const o={};l&1&&(o.label=a[0]),l&2&&(o.hint=a[1]),l&32&&(o.choices=a[5]),l&4&&(o.emptyOption=a[2]),l&8&&(o.disabled=a[3]),!t&&l&16&&(t=!0,o.value=a[4],z(()=>t=!1)),e.$set(o)},i(a){r||(w(e.$$.fragment,a),r=!0)},o(a){y(e.$$.fragment,a),r=!1},d(a){B(e,a)}}}function Dt(i){return i.map(e=>[JSON.stringify(e[0]),e[1]])}function St(i,e,t){let r,n,{label:s}=e,{hint:a=""}=e,{choices:l}=e,{emptyOption:o=!1}=e,{disabled:f=!1}=e,{value:b}=e;function d(){t(7,b=n==""?"":JSON.parse(n))}function u(p){n=p,t(4,n),t(7,b)}return i.$$set=p=>{"label"in p&&t(0,s=p.label),"hint"in p&&t(1,a=p.hint),"choices"in p&&t(8,l=p.choices),"emptyOption"in p&&t(2,o=p.emptyOption),"disabled"in p&&t(3,f=p.disabled),"value"in p&&t(7,b=p.value)},i.$$.update=()=>{i.$$.dirty&256&&t(5,r=Dt(l)),i.$$.dirty&128&&t(4,n=JSON.stringify(b))},[s,a,o,f,n,r,d,b,l,u]}class Lt extends ae{constructor(e){super(),le(this,e,St,Ft,se,{label:0,hint:1,choices:8,emptyOption:2,disabled:3,value:7})}}function _e(i){return typeof i=="object"?[]:Tt[i]}let Tt={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",Q(76)],["LTN 1/20 Figure 4.1 pp. 33",Q(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",Q(43)],["LTN 1/20 Figure 4.1 pp. 33",Q(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",Q(43)],["LTN 1/20 Figure 4.1 pp. 33",Q(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",Q(43)],["LTN 1/20 Figure 4.1 pp. 33",Q(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",Q(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",Q(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",Q(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",Q(54)]]};function Q(i){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${i}`}function $e(i,e){let t=Xe(e.speedLimit,e.observedSpeed);switch(i){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&t==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&t==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Oe(i,e,t){const r=i.slice();return r[18]=e[t][0],r[19]=e[t][1],r}function We(i){let e,t,r=i[5][0].toFixed(2)+"",n,s,a,l,o=i[5][1].toFixed(2)+"",f,b,d,u,p,_=_e(i[0]).length>0,c,$=$e(i[0],i[3].proposed.trafficData),h,D;const O=[Et,Nt,Ct],L=[];function m(F,M){return F[6]=="left"?0:F[6]=="right"?1:F[6]=="both"?2:-1}~(d=m(i))&&(u=L[d]=O[d](i));let v=_&&Pe(i),S=$&&Me(i);return{c(){e=A("p"),t=P("Desirable minimum width (m): "),n=P(r),s=q(),a=A("p"),l=P("Absolute minimum width (m): "),f=P(o),b=q(),u&&u.c(),p=q(),v&&v.c(),c=q(),S&&S.c(),h=ee()},l(F){e=V(F,"P",{});var M=U(e);t=R(M,"Desirable minimum width (m): "),n=R(M,r),M.forEach(g),s=I(F),a=V(F,"P",{});var K=U(a);l=R(K,"Absolute minimum width (m): "),f=R(K,o),K.forEach(g),b=I(F),u&&u.l(F),p=I(F),v&&v.l(F),c=I(F),S&&S.l(F),h=ee()},m(F,M){k(F,e,M),W(e,t),W(e,n),k(F,s,M),k(F,a,M),W(a,l),W(a,f),k(F,b,M),~d&&L[d].m(F,M),k(F,p,M),v&&v.m(F,M),k(F,c,M),S&&S.m(F,M),k(F,h,M),D=!0},p(F,M){(!D||M&32)&&r!==(r=F[5][0].toFixed(2)+"")&&te(n,r),(!D||M&32)&&o!==(o=F[5][1].toFixed(2)+"")&&te(f,o);let K=d;d=m(F),d===K?~d&&L[d].p(F,M):(u&&(re(),y(L[K],1,1,()=>{L[K]=null}),ne()),~d?(u=L[d],u?u.p(F,M):(u=L[d]=O[d](F),u.c()),w(u,1),u.m(p.parentNode,p)):u=null),M&1&&(_=_e(F[0]).length>0),_?v?(v.p(F,M),M&1&&w(v,1)):(v=Pe(F),v.c(),w(v,1),v.m(c.parentNode,c)):v&&(re(),y(v,1,1,()=>{v=null}),ne()),M&9&&($=$e(F[0],F[3].proposed.trafficData)),$?S?S.p(F,M):(S=Me(F),S.c(),S.m(h.parentNode,h)):S&&(S.d(1),S=null)},i(F){D||(w(u),w(v),D=!0)},o(F){y(u),y(v),D=!1},d(F){F&&(g(e),g(s),g(a),g(b),g(p),g(c),g(h)),~d&&L[d].d(F),v&&v.d(F),S&&S.d(F)}}}function Ct(i){let e,t;return e=new be({props:{$$slots:{default:[Ot]},$$scope:{ctx:i}}}),{c(){C(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,n){E(e,r,n),t=!0},p(r,n){const s={};n&4194304&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Nt(i){let e,t;return e=new be({props:{$$slots:{default:[Pt]},$$scope:{ctx:i}}}),{c(){C(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,n){E(e,r,n),t=!0},p(r,n){const s={};n&4194304&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Et(i){let e,t;return e=new be({props:{$$slots:{default:[Mt]},$$scope:{ctx:i}}}),{c(){C(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,n){E(e,r,n),t=!0},p(r,n){const s={};n&4194304&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Bt(i){let e;return{c(){e=P("Add buffers")},l(t){e=R(t,"Add buffers")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function Ot(i){let e,t,r;return t=new ie({props:{$$slots:{default:[Bt]},$$scope:{ctx:i}}}),t.$on("click",i[13]),{c(){e=P("Consider buffer to left and right "),C(t.$$.fragment)},l(n){e=R(n,"Consider buffer to left and right "),N(t.$$.fragment,n)},m(n,s){k(n,e,s),E(t,n,s),r=!0},p(n,s){const a={};s&4194304&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(w(t.$$.fragment,n),r=!0)},o(n){y(t.$$.fragment,n),r=!1},d(n){n&&g(e),B(t,n)}}}function Wt(i){let e;return{c(){e=P("Add buffer")},l(t){e=R(t,"Add buffer")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function Pt(i){let e,t,r;return t=new ie({props:{$$slots:{default:[Wt]},$$scope:{ctx:i}}}),t.$on("click",i[12]),{c(){e=P("Consider buffer to right "),C(t.$$.fragment)},l(n){e=R(n,"Consider buffer to right "),N(t.$$.fragment,n)},m(n,s){k(n,e,s),E(t,n,s),r=!0},p(n,s){const a={};s&4194304&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(w(t.$$.fragment,n),r=!0)},o(n){y(t.$$.fragment,n),r=!1},d(n){n&&g(e),B(t,n)}}}function Rt(i){let e;return{c(){e=P("Add buffer")},l(t){e=R(t,"Add buffer")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function Mt(i){let e,t,r;return t=new ie({props:{$$slots:{default:[Rt]},$$scope:{ctx:i}}}),t.$on("click",i[11]),{c(){e=P("Consider buffer to left "),C(t.$$.fragment)},l(n){e=R(n,"Consider buffer to left "),N(t.$$.fragment,n)},m(n,s){k(n,e,s),E(t,n,s),r=!0},p(n,s){const a={};s&4194304&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(w(t.$$.fragment,n),r=!0)},o(n){y(t.$$.fragment,n),r=!1},d(n){n&&g(e),B(t,n)}}}function Pe(i){let e,t="References",r,n,s,a=pe(_e(i[0])),l=[];for(let f=0;f<a.length;f+=1)l[f]=Re(Oe(i,a,f));const o=f=>y(l[f],1,1,()=>{l[f]=null});return{c(){e=A("u"),e.textContent=t,r=P(`
      :
      `),n=A("ul");for(let f=0;f<l.length;f+=1)l[f].c()},l(f){e=V(f,"U",{"data-svelte-h":!0}),ge(e)!=="svelte-fk7cdq"&&(e.textContent=t),r=R(f,`
      :
      `),n=V(f,"UL",{});var b=U(n);for(let d=0;d<l.length;d+=1)l[d].l(b);b.forEach(g)},m(f,b){k(f,e,b),k(f,r,b),k(f,n,b);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(n,null);s=!0},p(f,b){if(b&1){a=pe(_e(f[0]));let d;for(d=0;d<a.length;d+=1){const u=Oe(f,a,d);l[d]?(l[d].p(u,b),w(l[d],1)):(l[d]=Re(u),l[d].c(),w(l[d],1),l[d].m(n,null))}for(re(),d=a.length;d<l.length;d+=1)o(d);ne()}},i(f){if(!s){for(let b=0;b<a.length;b+=1)w(l[b]);s=!0}},o(f){l=l.filter(Boolean);for(let b=0;b<l.length;b+=1)y(l[b]);s=!1},d(f){f&&(g(e),g(r),g(n)),ot(l,f)}}}function qt(i){let e,t=i[18]+"",r;return{c(){e=A("li"),r=P(t)},l(n){e=V(n,"LI",{});var s=U(e);r=R(s,t),s.forEach(g)},m(n,s){k(n,e,s),W(e,r)},p(n,s){s&1&&t!==(t=n[18]+"")&&te(r,t)},i:me,o:me,d(n){n&&g(e)}}}function It(i){let e,t,r;return t=new ut({props:{href:i[19],$$slots:{default:[At]},$$scope:{ctx:i}}}),{c(){e=A("li"),C(t.$$.fragment)},l(n){e=V(n,"LI",{});var s=U(e);N(t.$$.fragment,s),s.forEach(g)},m(n,s){k(n,e,s),E(t,e,null),r=!0},p(n,s){const a={};s&1&&(a.href=n[19]),s&4194305&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(w(t.$$.fragment,n),r=!0)},o(n){y(t.$$.fragment,n),r=!1},d(n){n&&g(e),B(t)}}}function At(i){let e=i[18]+"",t;return{c(){t=P(e)},l(r){t=R(r,e)},m(r,n){k(r,t,n)},p(r,n){n&1&&e!==(e=r[18]+"")&&te(t,e)},d(r){r&&g(t)}}}function Re(i){let e,t,r,n;const s=[It,qt],a=[];function l(o,f){return o[19]?0:1}return e=l(i),t=a[e]=s[e](i),{c(){t.c(),r=ee()},l(o){t.l(o),r=ee()},m(o,f){a[e].m(o,f),k(o,r,f),n=!0},p(o,f){let b=e;e=l(o),e===b?a[e].p(o,f):(re(),y(a[b],1,1,()=>{a[b]=null}),ne(),t=a[e],t?t.p(o,f):(t=a[e]=s[e](o),t.c()),w(t,1),t.m(r.parentNode,r))},i(o){n||(w(t),n=!0)},o(o){y(t),n=!1},d(o){o&&g(r),a[e].d(o)}}}function Me(i){let e,t="Guidance",r,n,s=$e(i[0],i[3].proposed.trafficData)+"",a;return{c(){e=A("u"),e.textContent=t,r=P(`
      :
      `),n=A("p"),a=P(s),this.h()},l(l){e=V(l,"U",{"data-svelte-h":!0}),ge(e)!=="svelte-qh7mhq"&&(e.textContent=t),r=R(l,`
      :
      `),n=V(l,"P",{style:!0});var o=U(n);a=R(o,s),o.forEach(g),this.h()},h(){ce(n,"max-width","400px")},m(l,o){k(l,e,o),k(l,r,o),k(l,n,o),W(n,a)},p(l,o){o&9&&s!==(s=$e(l[0],l[3].proposed.trafficData)+"")&&te(a,s)},d(l){l&&(g(e),g(r),g(n))}}}function Vt(i){let e;return{c(){e=P("←")},l(t){e=R(t,"←")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function Ut(i){let e;return{c(){e=P("Delete")},l(t){e=R(t,"Delete")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function jt(i){let e;return{c(){e=P("→")},l(t){e=R(t,"→")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function Jt(i){let e,t,r,n,s,a,l,o,f,b,d,u;function p($){i[10]($)}let _={label:"Street feature type",emptyOption:!0,choices:i[4]};i[0]!==void 0&&(_.value=i[0]),t=new Lt({props:_}),H.push(()=>Y(t,"value",p));let c=i[0]&&We(i);return l=new ie({props:{disabled:i[1],$$slots:{default:[Vt]},$$scope:{ctx:i}}}),l.$on("click",i[14]),f=new Ke({props:{$$slots:{default:[Ut]},$$scope:{ctx:i}}}),f.$on("click",i[15]),d=new ie({props:{disabled:i[2],$$slots:{default:[jt]},$$scope:{ctx:i}}}),d.$on("click",i[16]),{c(){e=A("div"),C(t.$$.fragment),n=q(),c&&c.c(),s=q(),a=A("div"),C(l.$$.fragment),o=q(),C(f.$$.fragment),b=q(),C(d.$$.fragment),this.h()},l($){e=V($,"DIV",{class:!0});var h=U(e);N(t.$$.fragment,h),n=I(h),c&&c.l(h),s=I(h),a=V(h,"DIV",{style:!0,class:!0});var D=U(a);N(l.$$.fragment,D),o=I(D),N(f.$$.fragment,D),b=I(D),N(d.$$.fragment,D),D.forEach(g),h.forEach(g),this.h()},h(){ce(a,"display","flex"),ce(a,"justify-content","space-between"),x(a,"class","svelte-jig4ga"),x(e,"class","svelte-jig4ga")},m($,h){k($,e,h),E(t,e,null),W(e,n),c&&c.m(e,null),W(e,s),W(e,a),E(l,a,null),W(a,o),E(f,a,null),W(a,b),E(d,a,null),u=!0},p($,[h]){const D={};h&16&&(D.choices=$[4]),!r&&h&1&&(r=!0,D.value=$[0],z(()=>r=!1)),t.$set(D),$[0]?c?(c.p($,h),h&1&&w(c,1)):(c=We($),c.c(),w(c,1),c.m(e,s)):c&&(re(),y(c,1,1,()=>{c=null}),ne());const O={};h&2&&(O.disabled=$[1]),h&4194304&&(O.$$scope={dirty:h,ctx:$}),l.$set(O);const L={};h&4194304&&(L.$$scope={dirty:h,ctx:$}),f.$set(L);const m={};h&4&&(m.disabled=$[2]),h&4194304&&(m.$$scope={dirty:h,ctx:$}),d.$set(m)},i($){u||(w(t.$$.fragment,$),w(c),w(l.$$.fragment,$),w(f.$$.fragment,$),w(d.$$.fragment,$),u=!0)},o($){y(t.$$.fragment,$),y(c),y(l.$$.fragment,$),y(f.$$.fragment,$),y(d.$$.fragment,$),u=!1},d($){$&&g(e),B(t),c&&c.d(),B(l),B(f),B(d)}}}function Ht(i,e,t){let r,n,s,a;de(i,j,m=>t(3,a=m));let{value:l}=e,{isFirst:o}=e,{isLast:f}=e,{leftFeature:b}=e,{rightFeature:d}=e,u=He();function p(m){let v=Qe.map(S=>[S,S]);for(let[S,F]of Object.entries(m))v.push([{custom:S},`Custom: ${F.name}`]);return v}function _(m){l=m,t(0,l)}const c=()=>u("addLeftBuffer"),$=()=>u("addRightBuffer"),h=()=>{u("addRightBuffer"),u("addLeftBuffer")},D=()=>u("moveLeft"),O=()=>u("delete"),L=()=>u("moveRight");return i.$$set=m=>{"value"in m&&t(0,l=m.value),"isFirst"in m&&t(1,o=m.isFirst),"isLast"in m&&t(2,f=m.isLast),"leftFeature"in m&&t(8,b=m.leftFeature),"rightFeature"in m&&t(9,d=m.rightFeature)},i.$$.update=()=>{i.$$.dirty&769&&t(6,r=l&&pt(l,b,d)),i.$$.dirty&777&&t(5,n=l?dt(l,a.proposed.trafficData,a.proposed.customFeatures,b,d):[0,0]),i.$$.dirty&8&&t(4,s=p(a.proposed.customFeatures))},[l,o,f,a,s,n,r,u,b,d,_,c,$,h,D,O,L]}class Gt extends ae{constructor(e){super(),le(this,e,Ht,Jt,se,{value:0,isFirst:1,isLast:2,leftFeature:8,rightFeature:9})}}function qe(i,e,t){const r=i.slice();return r[18]=e[t],r[19]=e,r[20]=t,r}function zt(i){let e;return{c(){e=P("Add feature")},l(t){e=R(t,"Add feature")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function Ie(i,e){let t,r,n,s;function a(p){e[10](p,e[18],e[19],e[20])}function l(){return e[11](e[20])}function o(){return e[12](e[20])}function f(){return e[13](e[20])}function b(){return e[14](e[20])}function d(){return e[15](e[20])}let u={isFirst:e[20]==0,isLast:e[20]==e[0].length-1,leftFeature:e[20]==0?"":e[0][e[20]-1],rightFeature:e[20]==e[0].length-1?"":e[0][e[20]+1]};return e[18]!==void 0&&(u.value=e[18]),r=new Gt({props:u}),H.push(()=>Y(r,"value",a)),r.$on("delete",l),r.$on("moveLeft",o),r.$on("moveRight",f),r.$on("addLeftBuffer",b),r.$on("addRightBuffer",d),{key:i,first:null,c(){t=ee(),C(r.$$.fragment),this.h()},l(p){t=ee(),N(r.$$.fragment,p),this.h()},h(){this.first=t},m(p,_){k(p,t,_),E(r,p,_),s=!0},p(p,_){e=p;const c={};_&1&&(c.isFirst=e[20]==0),_&1&&(c.isLast=e[20]==e[0].length-1),_&1&&(c.leftFeature=e[20]==0?"":e[0][e[20]-1]),_&1&&(c.rightFeature=e[20]==e[0].length-1?"":e[0][e[20]+1]),!n&&_&1&&(n=!0,c.value=e[18],z(()=>n=!1)),r.$set(c)},i(p){s||(w(r.$$.fragment,p),s=!0)},o(p){y(r.$$.fragment,p),s=!1},d(p){p&&g(t),B(r,p)}}}function Yt(i){let e,t,r,n,s,a=i[2][0].toFixed(2)+"",l,o,f,b,d,u=i[2][1].toFixed(2)+"",p,_,c,$=[],h=new Map,D;e=new ie({props:{$$slots:{default:[zt]},$$scope:{ctx:i}}}),e.$on("click",i[3]);let O=pe(i[0]);const L=m=>m[20];for(let m=0;m<O.length;m+=1){let v=qe(i,O,m),S=L(v);h.set(S,$[m]=Ie(S,v))}return{c(){C(e.$$.fragment),t=q(),r=A("p"),n=P("Desirable minimum total width required (m): "),s=A("b"),l=P(a),o=q(),f=A("p"),b=P("Absolute minimum total width required (m): "),d=A("b"),p=P(u),_=q(),c=A("div");for(let m=0;m<$.length;m+=1)$[m].c();this.h()},l(m){N(e.$$.fragment,m),t=I(m),r=V(m,"P",{});var v=U(r);n=R(v,"Desirable minimum total width required (m): "),s=V(v,"B",{});var S=U(s);l=R(S,a),S.forEach(g),v.forEach(g),o=I(m),f=V(m,"P",{});var F=U(f);b=R(F,"Absolute minimum total width required (m): "),d=V(F,"B",{});var M=U(d);p=R(M,u),M.forEach(g),F.forEach(g),_=I(m),c=V(m,"DIV",{style:!0});var K=U(c);for(let fe=0;fe<$.length;fe+=1)$[fe].l(K);K.forEach(g),this.h()},h(){ce(c,"display","flex"),ce(c,"flex-direction","row"),ce(c,"overflow-x","scroll")},m(m,v){E(e,m,v),k(m,t,v),k(m,r,v),W(r,n),W(r,s),W(s,l),k(m,o,v),k(m,f,v),W(f,b),W(f,d),W(d,p),k(m,_,v),k(m,c,v);for(let S=0;S<$.length;S+=1)$[S]&&$[S].m(c,null);i[16](c),D=!0},p(m,[v]){const S={};v&2097152&&(S.$$scope={dirty:v,ctx:m}),e.$set(S),(!D||v&4)&&a!==(a=m[2][0].toFixed(2)+"")&&te(l,a),(!D||v&4)&&u!==(u=m[2][1].toFixed(2)+"")&&te(p,u),v&241&&(O=pe(m[0]),re(),$=ze($,v,L,1,m,O,h,c,Ye,Ie,null,qe),ne())},i(m){if(!D){w(e.$$.fragment,m);for(let v=0;v<O.length;v+=1)w($[v]);D=!0}},o(m){y(e.$$.fragment,m);for(let v=0;v<$.length;v+=1)y($[v]);D=!1},d(m){m&&(g(t),g(r),g(o),g(f),g(_),g(c)),B(e,m);for(let v=0;v<$.length;v+=1)$[v].d();i[16](null)}}}function Kt(i,e,t){let r,n;de(i,j,m=>t(9,n=m));let{streetFeaturesLeftToRight:s}=e,{sectionType:a}=e,l,o=!1;ft(()=>{o&&(o=!1,t(1,l.scrollLeft=l.scrollWidth,l))});function f(){t(0,s=[...s,""]),o=!0}function b(m){s.splice(m,1),t(0,s)}function d(m){t(0,[s[m-1],s[m]]=[s[m],s[m-1]],s)}function u(m){t(0,[s[m+1],s[m]]=[s[m],s[m+1]],s)}function p(m){s.splice(m,0,"Buffer / Verge"),t(0,s)}function _(m,v,S,F){S[F]=m,t(0,s)}const c=m=>b(m),$=m=>d(m),h=m=>u(m),D=m=>p(m),O=m=>p(m+1);function L(m){H[m?"unshift":"push"](()=>{l=m,t(1,l)})}return i.$$set=m=>{"streetFeaturesLeftToRight"in m&&t(0,s=m.streetFeaturesLeftToRight),"sectionType"in m&&t(8,a=m.sectionType)},i.$$.update=()=>{i.$$.dirty&768&&t(2,r=mt(n,a))},[s,l,r,f,b,d,u,p,a,n,_,c,$,h,D,O,L]}class et extends ae{constructor(e){super(),le(this,e,Kt,Yt,se,{streetFeaturesLeftToRight:0,sectionType:8})}}function Qt(i){let e;return{c(){e=P("Confirm")},l(t){e=R(t,"Confirm")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function Xt(i){let e;return{c(){e=P("Cancel")},l(t){e=R(t,"Cancel")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function Zt(i){let e,t,r,n,s,a,l,o,f,b,d,u;function p(h){i[6](h)}let _={label:"Name"};i[0]!==void 0&&(_.value=i[0]),e=new _t({props:_}),H.push(()=>Y(e,"value",p));function c(h){i[7](h)}let $={label:"Minimum width (m)",width:4,min:0};return i[1]!==void 0&&($.value=i[1]),n=new $t({props:$}),H.push(()=>Y(n,"value",c)),l=new Ze({props:{errorMessage:i[2]}}),f=new ht({props:{disabled:i[2]!="",$$slots:{default:[Qt]},$$scope:{ctx:i}}}),f.$on("click",i[8]),d=new ie({props:{$$slots:{default:[Xt]},$$scope:{ctx:i}}}),d.$on("click",i[9]),{c(){C(e.$$.fragment),r=q(),C(n.$$.fragment),a=q(),C(l.$$.fragment),o=q(),C(f.$$.fragment),b=q(),C(d.$$.fragment)},l(h){N(e.$$.fragment,h),r=I(h),N(n.$$.fragment,h),a=I(h),N(l.$$.fragment,h),o=I(h),N(f.$$.fragment,h),b=I(h),N(d.$$.fragment,h)},m(h,D){E(e,h,D),k(h,r,D),E(n,h,D),k(h,a,D),E(l,h,D),k(h,o,D),E(f,h,D),k(h,b,D),E(d,h,D),u=!0},p(h,D){const O={};!t&&D&1&&(t=!0,O.value=h[0],z(()=>t=!1)),e.$set(O);const L={};!s&&D&2&&(s=!0,L.value=h[1],z(()=>s=!1)),n.$set(L);const m={};D&4&&(m.errorMessage=h[2]),l.$set(m);const v={};D&4&&(v.disabled=h[2]!=""),D&4096&&(v.$$scope={dirty:D,ctx:h}),f.$set(v);const S={};D&4096&&(S.$$scope={dirty:D,ctx:h}),d.$set(S)},i(h){u||(w(e.$$.fragment,h),w(n.$$.fragment,h),w(l.$$.fragment,h),w(f.$$.fragment,h),w(d.$$.fragment,h),u=!0)},o(h){y(e.$$.fragment,h),y(n.$$.fragment,h),y(l.$$.fragment,h),y(f.$$.fragment,h),y(d.$$.fragment,h),u=!1},d(h){h&&(g(r),g(a),g(o),g(b)),B(e,h),B(n,h),B(l,h),B(f,h),B(d,h)}}}function xt(i){let e,t;return e=new gt({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[Zt]},$$scope:{ctx:i}}}),{c(){C(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,n){E(e,r,n),t=!0},p(r,[n]){const s={};n&4103&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function er(i,e,t){let r,n;de(i,j,c=>t(10,n=c));let{initialName:s}=e,{initialWidth:a}=e,l=He(),o=s,f=a;function b(c,$){return c==""?"Name must be specified":c!=s&&Object.values(n.proposed.customFeatures).some(h=>h.name==c)?"That name is already used by another custom feature":Qe.includes(c)?"That name is the same as one of the built-in features":isNaN($)?"Enter a valid width":$<=0?"Enter a positive width":""}function d(c){o=c,t(0,o)}function u(c){f=c,t(1,f)}const p=()=>l("confirm",{name:o,width:f}),_=()=>l("cancel");return i.$$set=c=>{"initialName"in c&&t(4,s=c.initialName),"initialWidth"in c&&t(5,a=c.initialWidth)},i.$$.update=()=>{i.$$.dirty&3&&t(2,r=b(o,f))},[o,f,r,l,s,a,d,u,p,_]}class tr extends ae{constructor(e){super(),le(this,e,er,xt,se,{initialName:4,initialWidth:5})}}function Ae(i,e,t){const r=i.slice();return r[9]=e[t],r}function rr(i){let e;return{c(){e=P("Add feature")},l(t){e=R(t,"Add feature")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function nr(i){let e;return{c(){e=P("Edit")},l(t){e=R(t,"Edit")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function ir(i){let e;return{c(){e=P("Delete")},l(t){e=R(t,"Delete")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function Ve(i,e){let t,r,n,s=e[1].proposed.customFeatures[e[9]].name+"",a,l,o=e[1].proposed.customFeatures[e[9]].width+"",f,b,d,u,p,_,c,$;function h(){return e[6](e[9])}u=new ie({props:{$$slots:{default:[nr]},$$scope:{ctx:e}}}),u.$on("click",h);function D(){return e[7](e[9])}return _=new Ke({props:{$$slots:{default:[ir]},$$scope:{ctx:e}}}),_.$on("click",D),{key:i,first:null,c(){t=A("li"),r=A("span"),n=A("u"),a=P(s),l=P(`
        : `),f=P(o),b=P(" m minimum width"),d=q(),C(u.$$.fragment),p=q(),C(_.$$.fragment),c=q(),this.h()},l(O){t=V(O,"LI",{});var L=U(t);r=V(L,"SPAN",{});var m=U(r);n=V(m,"U",{});var v=U(n);a=R(v,s),v.forEach(g),l=R(m,`
        : `),f=R(m,o),b=R(m," m minimum width"),m.forEach(g),d=I(L),N(u.$$.fragment,L),p=I(L),N(_.$$.fragment,L),c=I(L),L.forEach(g),this.h()},h(){this.first=t},m(O,L){k(O,t,L),W(t,r),W(r,n),W(n,a),W(r,l),W(r,f),W(r,b),W(t,d),E(u,t,null),W(t,p),E(_,t,null),W(t,c),$=!0},p(O,L){e=O,(!$||L&2)&&s!==(s=e[1].proposed.customFeatures[e[9]].name+"")&&te(a,s),(!$||L&2)&&o!==(o=e[1].proposed.customFeatures[e[9]].width+"")&&te(f,o);const m={};L&4096&&(m.$$scope={dirty:L,ctx:e}),u.$set(m);const v={};L&4096&&(v.$$scope={dirty:L,ctx:e}),_.$set(v)},i(O){$||(w(u.$$.fragment,O),w(_.$$.fragment,O),$=!0)},o(O){y(u.$$.fragment,O),y(_.$$.fragment,O),$=!1},d(O){O&&g(t),B(u),B(_)}}}function Ue(i){let e,t;return e=new tr({props:{initialName:i[0].initialName,initialWidth:i[0].initialWidth}}),e.$on("cancel",i[8]),e.$on("confirm",i[5]),{c(){C(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,n){E(e,r,n),t=!0},p(r,n){const s={};n&1&&(s.initialName=r[0].initialName),n&1&&(s.initialWidth=r[0].initialWidth),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function sr(i){let e,t,r,n=[],s=new Map,a,l,o;e=new ie({props:{$$slots:{default:[rr]},$$scope:{ctx:i}}}),e.$on("click",i[2]);let f=pe(Object.keys(i[1].proposed.customFeatures));const b=u=>u[9];for(let u=0;u<f.length;u+=1){let p=Ae(i,f,u),_=b(p);s.set(_,n[u]=Ve(_,p))}let d=i[0]&&Ue(i);return{c(){C(e.$$.fragment),t=q(),r=A("ol");for(let u=0;u<n.length;u+=1)n[u].c();a=q(),d&&d.c(),l=ee()},l(u){N(e.$$.fragment,u),t=I(u),r=V(u,"OL",{});var p=U(r);for(let _=0;_<n.length;_+=1)n[_].l(p);p.forEach(g),a=I(u),d&&d.l(u),l=ee()},m(u,p){E(e,u,p),k(u,t,p),k(u,r,p);for(let _=0;_<n.length;_+=1)n[_]&&n[_].m(r,null);k(u,a,p),d&&d.m(u,p),k(u,l,p),o=!0},p(u,[p]){const _={};p&4096&&(_.$$scope={dirty:p,ctx:u}),e.$set(_),p&26&&(f=pe(Object.keys(u[1].proposed.customFeatures)),re(),n=ze(n,p,b,1,u,f,s,r,Ye,Ve,null,Ae),ne()),u[0]?d?(d.p(u,p),p&1&&w(d,1)):(d=Ue(u),d.c(),w(d,1),d.m(l.parentNode,l)):d&&(re(),y(d,1,1,()=>{d=null}),ne())},i(u){if(!o){w(e.$$.fragment,u);for(let p=0;p<f.length;p+=1)w(n[p]);w(d),o=!0}},o(u){y(e.$$.fragment,u);for(let p=0;p<n.length;p+=1)y(n[p]);y(d),o=!1},d(u){u&&(g(t),g(r),g(a),g(l)),B(e,u);for(let p=0;p<n.length;p+=1)n[p].d();d&&d.d(u)}}}function ar(i,e,t){let r;de(i,j,u=>t(1,r=u));let n=null;function s(){t(0,n={id:xe(),initialName:"",initialWidth:0})}function a(u){let p=r.proposed.customFeatures[u].name,_=JSON.stringify({custom:u});if(r.proposed.desirableMinimumCrossSection.some(c=>JSON.stringify(c)==_)){window.alert(`The ${p} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(r.proposed.absoluteMinimumCrossSection.some(c=>JSON.stringify(c)==_)){window.alert(`The ${p} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete r.proposed.customFeatures[u],j.set(r)}function l(u){t(0,n={id:u,initialName:r.proposed.customFeatures[u].name,initialWidth:r.proposed.customFeatures[u].width})}function o(u){Ge(j,r.proposed.customFeatures[n.id]={name:u.detail.name,width:u.detail.width},r),j.set(r),t(0,n=null)}return[n,r,s,a,l,o,u=>l(u),u=>a(u),()=>t(0,n=null)]}class lr extends ae{constructor(e){super(),le(this,e,ar,sr,se,{})}}function je(i){let e,t,r,n,s;return{c(){e=A("p"),t=A("i"),r=P("Effective speed limit, based on the limit and 85 percentile: "),n=P(i[1]),s=P(`
            mph`)},l(a){e=V(a,"P",{});var l=U(e);t=V(l,"I",{});var o=U(t);r=R(o,"Effective speed limit, based on the limit and 85 percentile: "),n=R(o,i[1]),s=R(o,`
            mph`),o.forEach(g),l.forEach(g)},m(a,l){k(a,e,l),W(e,t),W(t,r),W(t,n),W(t,s)},p(a,l){l&2&&te(n,a[1])},d(a){a&&g(e)}}}function or(i){let e,t,r,n,s,a,l,o,f,b,d,u,p,_,c,$,h,D,O,L,m,v,S,F,M;function K(T){i[4](T)}let fe={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:ue(["<200","200-800",">800"])};i[0].proposed.trafficData.flowOneWay!==void 0&&(fe.value=i[0].proposed.trafficData.flowOneWay),r=new oe({props:fe}),H.push(()=>Y(r,"value",K));function tt(T){i[5](T)}let ve={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:ue(["<300","300-1,000",">1,000"])};i[0].proposed.trafficData.flowTwoWay!==void 0&&(ve.value=i[0].proposed.trafficData.flowTwoWay),a=new oe({props:ve}),H.push(()=>Y(a,"value",tt));function rt(T){i[6](T)}let we={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:ue(["<300",">300"])};i[0].proposed.trafficData.flowSharedUse!==void 0&&(we.value=i[0].proposed.trafficData.flowSharedUse),f=new oe({props:we}),H.push(()=>Y(f,"value",rt));function nt(T){i[7](T)}let ke={label:"Traffic flow (vpd)",emptyOption:!0,choices:ue(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};i[0].proposed.trafficData.trafficFlow!==void 0&&(ke.value=i[0].proposed.trafficData.trafficFlow),u=new oe({props:ke}),H.push(()=>Y(u,"value",nt));let J=i[1]&&je(i);function it(T){i[8](T)}let ye={label:"Speed limit (MPH)",emptyOption:!0,choices:i[2]};i[0].proposed.trafficData.speedLimit!==void 0&&(ye.value=i[0].proposed.trafficData.speedLimit),h=new oe({props:ye}),H.push(()=>Y(h,"value",it));function st(T){i[9](T)}let Fe={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};i[0].proposed.trafficData.observedSpeed!==void 0&&(Fe.value=i[0].proposed.trafficData.observedSpeed),L=new yt({props:Fe}),H.push(()=>Y(L,"value",st));function at(T){i[10](T)}let De={label:"Street function",emptyOption:!0,choices:ue(["High Street (active frontages)","Residential street","Local distributor road"])};return i[0].proposed.trafficData.streetFunction!==void 0&&(De.value=i[0].proposed.trafficData.streetFunction),S=new oe({props:De}),H.push(()=>Y(S,"value",at)),{c(){e=A("div"),t=A("div"),C(r.$$.fragment),s=q(),C(a.$$.fragment),o=q(),C(f.$$.fragment),d=q(),C(u.$$.fragment),_=q(),c=A("div"),J&&J.c(),$=q(),C(h.$$.fragment),O=q(),C(L.$$.fragment),v=q(),C(S.$$.fragment),this.h()},l(T){e=V(T,"DIV",{class:!0});var G=U(e);t=V(G,"DIV",{class:!0});var X=U(t);N(r.$$.fragment,X),s=I(X),N(a.$$.fragment,X),o=I(X),N(f.$$.fragment,X),d=I(X),N(u.$$.fragment,X),X.forEach(g),_=I(G),c=V(G,"DIV",{class:!0});var Z=U(c);J&&J.l(Z),$=I(Z),N(h.$$.fragment,Z),O=I(Z),N(L.$$.fragment,Z),v=I(Z),N(S.$$.fragment,Z),Z.forEach(g),G.forEach(g),this.h()},h(){x(t,"class","govuk-grid-column-one-half"),x(c,"class","govuk-grid-column-one-half"),x(e,"class","govuk-grid-row")},m(T,G){k(T,e,G),W(e,t),E(r,t,null),W(t,s),E(a,t,null),W(t,o),E(f,t,null),W(t,d),E(u,t,null),W(e,_),W(e,c),J&&J.m(c,null),W(c,$),E(h,c,null),W(c,O),E(L,c,null),W(c,v),E(S,c,null),M=!0},p(T,G){const X={};!n&&G&1&&(n=!0,X.value=T[0].proposed.trafficData.flowOneWay,z(()=>n=!1)),r.$set(X);const Z={};!l&&G&1&&(l=!0,Z.value=T[0].proposed.trafficData.flowTwoWay,z(()=>l=!1)),a.$set(Z);const Se={};!b&&G&1&&(b=!0,Se.value=T[0].proposed.trafficData.flowSharedUse,z(()=>b=!1)),f.$set(Se);const Le={};!p&&G&1&&(p=!0,Le.value=T[0].proposed.trafficData.trafficFlow,z(()=>p=!1)),u.$set(Le),T[1]?J?J.p(T,G):(J=je(T),J.c(),J.m(c,$)):J&&(J.d(1),J=null);const Te={};!D&&G&1&&(D=!0,Te.value=T[0].proposed.trafficData.speedLimit,z(()=>D=!1)),h.$set(Te);const Ce={};!m&&G&1&&(m=!0,Ce.value=T[0].proposed.trafficData.observedSpeed,z(()=>m=!1)),L.$set(Ce);const Ne={};!F&&G&1&&(F=!0,Ne.value=T[0].proposed.trafficData.streetFunction,z(()=>F=!1)),S.$set(Ne)},i(T){M||(w(r.$$.fragment,T),w(a.$$.fragment,T),w(f.$$.fragment,T),w(u.$$.fragment,T),w(h.$$.fragment,T),w(L.$$.fragment,T),w(S.$$.fragment,T),M=!0)},o(T){y(r.$$.fragment,T),y(a.$$.fragment,T),y(f.$$.fragment,T),y(u.$$.fragment,T),y(h.$$.fragment,T),y(L.$$.fragment,T),y(S.$$.fragment,T),M=!1},d(T){T&&g(e),B(r),B(a),B(f),B(u),J&&J.d(),B(h),B(L),B(S)}}}function fr(i){let e,t;return e=new he({props:{label:"Traffic data and additional information",open:!0,$$slots:{default:[or]},$$scope:{ctx:i}}}),{c(){C(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,n){E(e,r,n),t=!0},p(r,[n]){const s={};n&2051&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function ur(i,e,t){let r,n;de(i,j,_=>t(0,n=_));let{valid:s}=e,a=ue(ct);function l(_){i.$$.not_equal(n.proposed.trafficData.flowOneWay,_)&&(n.proposed.trafficData.flowOneWay=_,j.set(n))}function o(_){i.$$.not_equal(n.proposed.trafficData.flowTwoWay,_)&&(n.proposed.trafficData.flowTwoWay=_,j.set(n))}function f(_){i.$$.not_equal(n.proposed.trafficData.flowSharedUse,_)&&(n.proposed.trafficData.flowSharedUse=_,j.set(n))}function b(_){i.$$.not_equal(n.proposed.trafficData.trafficFlow,_)&&(n.proposed.trafficData.trafficFlow=_,j.set(n))}function d(_){i.$$.not_equal(n.proposed.trafficData.speedLimit,_)&&(n.proposed.trafficData.speedLimit=_,j.set(n))}function u(_){i.$$.not_equal(n.proposed.trafficData.observedSpeed,_)&&(n.proposed.trafficData.observedSpeed=_,j.set(n))}function p(_){i.$$.not_equal(n.proposed.trafficData.streetFunction,_)&&(n.proposed.trafficData.streetFunction=_,j.set(n))}return i.$$set=_=>{"valid"in _&&t(3,s=_.valid)},i.$$.update=()=>{i.$$.dirty&1&&t(3,s=n.proposed.trafficData.flowOneWay!=""&&n.proposed.trafficData.flowTwoWay!=""&&n.proposed.trafficData.flowSharedUse!=""&&n.proposed.trafficData.trafficFlow!=""&&n.proposed.trafficData.speedLimit!=""&&n.proposed.trafficData.observedSpeed!=null&&n.proposed.trafficData.streetFunction!=""),i.$$.dirty&1&&t(1,r=Xe(n.proposed.trafficData.speedLimit,n.proposed.trafficData.observedSpeed))},[n,r,a,s,l,o,f,b,d,u,p]}class cr extends ae{constructor(e){super(),le(this,e,ur,fr,se,{valid:3})}}function pr(i){let e,t;return e=new lr({}),{c(){C(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,n){E(e,r,n),t=!0},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function dr(i){let e,t="Fill out all traffic data above to continue";return{c(){e=A("p"),e.textContent=t},l(r){e=V(r,"P",{"data-svelte-h":!0}),ge(e)!=="svelte-72a5ry"&&(e.textContent=t)},m(r,n){k(r,e,n)},p:me,i:me,o:me,d(r){r&&g(e)}}}function mr(i){let e,t,r,n;return e=new he({props:{label:"Preferred Cross-Section",open:!0,$$slots:{default:[hr]},$$scope:{ctx:i}}}),r=new he({props:{label:"Compromised Cross-Section",open:!0,$$slots:{default:[$r]},$$scope:{ctx:i}}}),{c(){C(e.$$.fragment),t=q(),C(r.$$.fragment)},l(s){N(e.$$.fragment,s),t=I(s),N(r.$$.fragment,s)},m(s,a){E(e,s,a),k(s,t,a),E(r,s,a),n=!0},p(s,a){const l={};a&66&&(l.$$scope={dirty:a,ctx:s}),e.$set(l);const o={};a&66&&(o.$$scope={dirty:a,ctx:s}),r.$set(o)},i(s){n||(w(e.$$.fragment,s),w(r.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),y(r.$$.fragment,s),n=!1},d(s){s&&g(t),B(e,s),B(r,s)}}}function hr(i){let e,t,r;function n(a){i[4](a)}let s={sectionType:"Preferred"};return i[1].proposed.desirableMinimumCrossSection!==void 0&&(s.streetFeaturesLeftToRight=i[1].proposed.desirableMinimumCrossSection),e=new et({props:s}),H.push(()=>Y(e,"streetFeaturesLeftToRight",n)),{c(){C(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,l){E(e,a,l),r=!0},p(a,l){const o={};!t&&l&2&&(t=!0,o.streetFeaturesLeftToRight=a[1].proposed.desirableMinimumCrossSection,z(()=>t=!1)),e.$set(o)},i(a){r||(w(e.$$.fragment,a),r=!0)},o(a){y(e.$$.fragment,a),r=!1},d(a){B(e,a)}}}function Je(i){let e,t;return e=new ie({props:{$$slots:{default:[_r]},$$scope:{ctx:i}}}),e.$on("click",i[2]),{c(){C(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,n){E(e,r,n),t=!0},p(r,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function _r(i){let e;return{c(){e=P("Copy Preferred")},l(t){e=R(t,"Copy Preferred")},m(t,r){k(t,e,r)},d(t){t&&g(e)}}}function $r(i){let e,t,r,n,s=i[1].proposed.absoluteMinimumCrossSection.length==0&&Je(i);function a(o){i[5](o)}let l={sectionType:"Compromised"};return i[1].proposed.absoluteMinimumCrossSection!==void 0&&(l.streetFeaturesLeftToRight=i[1].proposed.absoluteMinimumCrossSection),t=new et({props:l}),H.push(()=>Y(t,"streetFeaturesLeftToRight",a)),{c(){s&&s.c(),e=q(),C(t.$$.fragment)},l(o){s&&s.l(o),e=I(o),N(t.$$.fragment,o)},m(o,f){s&&s.m(o,f),k(o,e,f),E(t,o,f),n=!0},p(o,f){o[1].proposed.absoluteMinimumCrossSection.length==0?s?(s.p(o,f),f&2&&w(s,1)):(s=Je(o),s.c(),w(s,1),s.m(e.parentNode,e)):s&&(re(),y(s,1,1,()=>{s=null}),ne());const b={};!r&&f&2&&(r=!0,b.streetFeaturesLeftToRight=o[1].proposed.absoluteMinimumCrossSection,z(()=>r=!1)),t.$set(b)},i(o){n||(w(s),w(t.$$.fragment,o),n=!0)},o(o){y(s),y(t.$$.fragment,o),n=!1},d(o){o&&g(e),s&&s.d(o),B(t,o)}}}function gr(i){let e,t,r,n,s,a,l,o,f;function b(c){i[3](c)}let d={};i[0]!==void 0&&(d.valid=i[0]),e=new cr({props:d}),H.push(()=>Y(e,"valid",b)),n=new he({props:{label:"Custom Street Features",$$slots:{default:[pr]},$$scope:{ctx:i}}});const u=[mr,dr],p=[];function _(c,$){return c[0]?0:1}return a=_(i),l=p[a]=u[a](i),{c(){C(e.$$.fragment),r=q(),C(n.$$.fragment),s=q(),l.c(),o=ee()},l(c){N(e.$$.fragment,c),r=I(c),N(n.$$.fragment,c),s=I(c),l.l(c),o=ee()},m(c,$){E(e,c,$),k(c,r,$),E(n,c,$),k(c,s,$),p[a].m(c,$),k(c,o,$),f=!0},p(c,[$]){const h={};!t&&$&1&&(t=!0,h.valid=c[0],z(()=>t=!1)),e.$set(h);const D={};$&64&&(D.$$scope={dirty:$,ctx:c}),n.$set(D);let O=a;a=_(c),a===O?p[a].p(c,$):(re(),y(p[O],1,1,()=>{p[O]=null}),ne(),l=p[a],l?l.p(c,$):(l=p[a]=u[a](c),l.c()),w(l,1),l.m(o.parentNode,o))},i(c){f||(w(e.$$.fragment,c),w(n.$$.fragment,c),w(l),f=!0)},o(c){y(e.$$.fragment,c),y(n.$$.fragment,c),y(l),f=!1},d(c){c&&(g(r),g(s),g(o)),B(e,c),B(n,c),p[a].d(c)}}}function br(i,e,t){let r;de(i,j,f=>t(1,r=f));let n=!1;function s(){Ge(j,r.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(r.proposed.desirableMinimumCrossSection)),r)}function a(f){n=f,t(0,n)}function l(f){i.$$.not_equal(r.proposed.desirableMinimumCrossSection,f)&&(r.proposed.desirableMinimumCrossSection=f,j.set(r))}function o(f){i.$$.not_equal(r.proposed.absoluteMinimumCrossSection,f)&&(r.proposed.absoluteMinimumCrossSection=f,j.set(r))}return[n,r,s,a,l,o]}class qr extends ae{constructor(e){super(),le(this,e,br,gr,se,{})}}export{qr as component};
