var Dn=Object.defineProperty;var Un=(n,e,t)=>e in n?Dn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Se=(n,e,t)=>(Un(n,typeof e!="symbol"?e+"":e,t),t);import{s as he,_ as rt,$ as nt,b as oe,f as P,h as C,i as Z,j as U,n as fe,e as $,a as j,t as Pe,c as ee,d as x,k as ze,a2 as $e,z as Ie,o as dt,A as vr,C as pe,a3 as Fe,g as Qt,q as tt,r as at,a4 as jt,J as Ir,a5 as Nn,u as st,v as ut,w as ft,a1 as _r,a6 as ot,D as Me,F as Oe,L as Zn,x as dr,y as Fr,B as Or,a7 as cn,a8 as qn,l as Te,m as it,E as Ce,N as Xn,a9 as Yn,aa as Gn}from"../chunks/scheduler.sl9iHgNe.js";import{S as ve,i as _e,c as W,a as V,m as J,t as B,g as Ge,b as O,f as He,d as K,e as Ee}from"../chunks/index.D_OJ5df6.js";import{p as Pt}from"../chunks/index.BGbmy92u.js";import{S as zt}from"../chunks/Select.Dd7G2vy8.js";import{T as Jt}from"../chunks/TextArea.C3m7Ql5u.js";import{T as Bt,a as Hn,t as Wn,r as Vn,f as Jn,d as Kn}from"../chunks/lists.B20EEKlG.js";import{s as Le}from"../chunks/data.DU728Df_.js";import{g as Qn,W as jn}from"../chunks/WarningButton.C0MMjp56.js";import{S as fr}from"../chunks/SecondaryButton.C5h-xA5p.js";import{c as xn,h as $n,m as Mt,a as ei,g as mn,b as ti}from"../chunks/Geocoder.svelte_svelte_type_style_lang.DUwqPKpW.js";import{w as Ke,r as cr}from"../chunks/index.mY10Xj4w.js";import"../chunks/paths.uqBrvAh-.js";import{e as Rr,u as ri,o as ni,B as ii}from"../chunks/Breadcrumbs.Db6Wjfgx.js";function oi(n){let e,t;return{c(){e=rt("svg"),t=rt("path"),this.h()},l(r){e=nt(r,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var i=oe(e);t=nt(i,"path",{d:!0}),oe(t).forEach(P),i.forEach(P),this.h()},h(){C(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),C(e,"viewBox","0 0 14 14"),C(e,"width","13"),C(e,"height","13"),C(e,"class","svelte-en2qvf")},m(r,i){Z(r,e,i),U(e,t)},p:fe,i:fe,o:fe,d(r){r&&P(e)}}}class hn extends ve{constructor(e){super(),_e(this,e,null,oi,he,{})}}function li(n){let e,t;return{c(){e=rt("svg"),t=rt("path"),this.h()},l(r){e=nt(r,"svg",{viewBox:!0,fill:!0,xmlns:!0,class:!0});var i=oe(e);t=nt(i,"path",{d:!0}),oe(t).forEach(P),i.forEach(P),this.h()},h(){C(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),C(e,"viewBox","0 0 30 30"),C(e,"fill","none"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"class","svelte-d2loi5")},m(r,i){Z(r,e,i),U(e,t)},p:fe,i:fe,o:fe,d(r){r&&P(e)}}}class dn extends ve{constructor(e){super(),_e(this,e,null,li,he,{})}}function ai(n){let e,t;return{c(){e=$("img"),this.h()},l(r){e=ee(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Fe(e.src,t=n[3]+"area.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(r,i){Z(r,e,i)},p(r,i){i&8&&!Fe(e.src,t=r[3]+"area.svg")&&C(e,"src",t),i&64&&C(e,"alt",r[6])},d(r){r&&P(e)}}}function si(n){let e,t;return{c(){e=$("img"),this.h()},l(r){e=ee(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Fe(e.src,t=n[3]+"reverse.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(r,i){Z(r,e,i)},p(r,i){i&8&&!Fe(e.src,t=r[3]+"reverse.svg")&&C(e,"src",t),i&64&&C(e,"alt",r[6])},d(r){r&&P(e)}}}function ui(n){let e,t;return{c(){e=$("img"),this.h()},l(r){e=ee(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Fe(e.src,t=n[3]+"poi.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(r,i){Z(r,e,i)},p(r,i){i&8&&!Fe(e.src,t=r[3]+"poi.svg")&&C(e,"src",t),i&64&&C(e,"alt",r[6])},d(r){r&&P(e)}}}function fi(n){let e,t;return{c(){e=$("img"),this.h()},l(r){e=ee(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Fe(e.src,t=n[3]+"postal_code.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(r,i){Z(r,e,i)},p(r,i){i&8&&!Fe(e.src,t=r[3]+"postal_code.svg")&&C(e,"src",t),i&64&&C(e,"alt",r[6])},d(r){r&&P(e)}}}function ci(n){let e,t;return{c(){e=$("img"),this.h()},l(r){e=ee(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Fe(e.src,t=n[3]+"street.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(r,i){Z(r,e,i)},p(r,i){i&8&&!Fe(e.src,t=r[3]+"street.svg")&&C(e,"src",t),i&64&&C(e,"alt",r[6])},d(r){r&&P(e)}}}function mi(n){let e,t;return{c(){e=$("img"),this.h()},l(r){e=ee(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Fe(e.src,t=n[3]+"road.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(r,i){Z(r,e,i)},p(r,i){i&8&&!Fe(e.src,t=r[3]+"road.svg")&&C(e,"src",t),i&64&&C(e,"alt",r[6])},d(r){r&&P(e)}}}function hi(n){let e,t;return{c(){e=$("img"),this.h()},l(r){e=ee(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Fe(e.src,t=n[3]+"housenumber.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(r,i){Z(r,e,i)},p(r,i){i&8&&!Fe(e.src,t=r[3]+"housenumber.svg")&&C(e,"src",t),i&64&&C(e,"alt",r[6])},d(r){r&&P(e)}}}function di(n){let e,t,r,i;return{c(){e=$("img"),this.h()},l(o){e=ee(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Fe(e.src,t=n[5])||C(e,"src",t),C(e,"alt",n[4]),C(e,"class","svelte-ltkwvy")},m(o,l){Z(o,e,l),r||(i=Ie(e,"error",n[14]),r=!0)},p(o,l){l&32&&!Fe(e.src,t=o[5])&&C(e,"src",t),l&16&&C(e,"alt",o[4])},d(o){o&&P(e),r=!1,i()}}}function Dr(n){let e,t;return{c(){e=$("span"),t=Pe(n[6]),this.h()},l(r){e=ee(r,"SPAN",{class:!0});var i=oe(e);t=ze(i,n[6]),i.forEach(P),this.h()},h(){C(e,"class","secondary svelte-ltkwvy")},m(r,i){Z(r,e,i),U(e,t)},p(r,i){i&64&&dt(t,r[6])},d(r){r&&P(e)}}}function gi(n){var S,E;let e,t,r,i,o,l,a,s,u=(n[7]?n[0].place_name:n[0].place_name.replace(/,.*/,""))+"",c,h,k=n[2]==="always"||n[2]&&!n[0].address&&((S=n[0].properties)==null?void 0:S.kind)!=="road"&&((E=n[0].properties)==null?void 0:E.kind)!=="road_relation"&&!n[0].id.startsWith("address.")&&!n[0].id.startsWith("postal_code.")&&(!n[0].id.startsWith("poi.")||!n[5])&&!n[7],b,w,R=(n[7]?"":n[0].place_name.replace(/[^,]*,?\s*/,""))+"",A,D,f;function m(L,T){var g,_;return T&1&&(t=null),T&1&&(r=null),T&1&&(i=null),L[5]?di:L[0].address?hi:((g=L[0].properties)==null?void 0:g.kind)==="road"||((_=L[0].properties)==null?void 0:_.kind)==="road_relation"?mi:(t==null&&(t=!!L[0].id.startsWith("address.")),t?ci:(r==null&&(r=!!L[0].id.startsWith("postal_code.")),r?fi:(i==null&&(i=!!L[0].id.startsWith("poi.")),i?ui:L[7]?si:ai)))}let d=m(n,-1),y=d(n),M=k&&Dr(n);return{c(){e=$("li"),y.c(),o=j(),l=$("span"),a=$("span"),s=$("span"),c=Pe(u),h=j(),M&&M.c(),b=j(),w=$("span"),A=Pe(R),this.h()},l(L){e=ee(L,"LI",{tabindex:!0,"data-selected":!0,class:!0});var T=oe(e);y.l(T),o=x(T),l=ee(T,"SPAN",{class:!0});var g=oe(l);a=ee(g,"SPAN",{class:!0});var _=oe(a);s=ee(_,"SPAN",{class:!0});var X=oe(s);c=ze(X,u),X.forEach(P),h=x(_),M&&M.l(_),_.forEach(P),b=x(g),w=ee(g,"SPAN",{class:!0});var I=oe(w);A=ze(I,R),I.forEach(P),g.forEach(P),T.forEach(P),this.h()},h(){C(s,"class","primary svelte-ltkwvy"),C(a,"class","svelte-ltkwvy"),C(w,"class","line2 svelte-ltkwvy"),C(l,"class","texts svelte-ltkwvy"),C(e,"tabindex","0"),C(e,"data-selected",n[1]),C(e,"class","svelte-ltkwvy"),$e(e,"selected",n[1])},m(L,T){Z(L,e,T),y.m(e,null),U(e,o),U(e,l),U(l,a),U(a,s),U(s,c),U(a,h),M&&M.m(a,null),U(l,b),U(l,w),U(w,A),D||(f=[Ie(e,"mouseenter",n[12]),Ie(e,"focus",n[13])],D=!0)},p(L,[T]){var g,_;d===(d=m(L,T))&&y?y.p(L,T):(y.d(1),y=d(L),y&&(y.c(),y.m(e,o))),T&1&&u!==(u=(L[7]?L[0].place_name:L[0].place_name.replace(/,.*/,""))+"")&&dt(c,u),T&37&&(k=L[2]==="always"||L[2]&&!L[0].address&&((g=L[0].properties)==null?void 0:g.kind)!=="road"&&((_=L[0].properties)==null?void 0:_.kind)!=="road_relation"&&!L[0].id.startsWith("address.")&&!L[0].id.startsWith("postal_code.")&&(!L[0].id.startsWith("poi.")||!L[5])&&!L[7]),k?M?M.p(L,T):(M=Dr(L),M.c(),M.m(a,null)):M&&(M.d(1),M=null),T&1&&R!==(R=(L[7]?"":L[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&dt(A,R),T&2&&C(e,"data-selected",L[1]),T&2&&$e(e,"selected",L[1])},i:fe,o:fe,d(L){L&&P(e),y.d(),M&&M.d(),D=!1,vr(f)}}}function yi(n,e,t){var m;let r,i,{feature:o}=e,{selected:l=!1}=e,{showPlaceType:a}=e,{missingIconsCache:s}=e,{iconsBaseUrl:u}=e;const c=(m=o.properties)==null?void 0:m.categories;let h,k,b=0,w=o.place_type[0]==="reverse";function R(d){k&&s.add(k),t(10,b++,b)}function A(d){pe.call(this,n,d)}function D(d){pe.call(this,n,d)}const f=d=>R(d.currentTarget);return n.$$set=d=>{"feature"in d&&t(0,o=d.feature),"selected"in d&&t(1,l=d.selected),"showPlaceType"in d&&t(2,a=d.showPlaceType),"missingIconsCache"in d&&t(9,s=d.missingIconsCache),"iconsBaseUrl"in d&&t(3,u=d.iconsBaseUrl)},n.$$.update=()=>{var d,y,M,S;if(n.$$.dirty&3640)do t(11,r--,r),t(4,h=c==null?void 0:c[r]),t(5,k=h?u+h.replace(/ /g,"_")+".svg":void 0);while(r>-1&&(!k||s.has(k)));n.$$.dirty&1&&t(6,i=o.id.startsWith("poi.")?(y=(d=o.properties)==null?void 0:d.categories)==null?void 0:y.join(", "):((S=(M=o.properties)==null?void 0:M.place_type_name)==null?void 0:S[0])??o.place_type[0])},t(11,r=(c==null?void 0:c.length)??0),[o,l,a,u,h,k,i,w,R,s,b,r,A,D,f]}class vi extends ve{constructor(e){super(),_e(this,e,yi,gi,he,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function _i(n){let e,t='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>';return{c(){e=$("div"),e.innerHTML=t,this.h()},l(r){e=ee(r,"DIV",{class:!0,"data-svelte-h":!0}),Qt(e)!=="svelte-r6ogid"&&(e.innerHTML=t),this.h()},h(){C(e,"class","svelte-7cmwmc")},m(r,i){Z(r,e,i)},p:fe,i:fe,o:fe,d(r){r&&P(e)}}}class bi extends ve{constructor(e){super(),_e(this,e,null,_i,he,{})}}function pi(n){let e,t;return{c(){e=rt("svg"),t=rt("path"),this.h()},l(r){e=nt(r,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var i=oe(e);t=nt(i,"path",{d:!0}),oe(t).forEach(P),i.forEach(P),this.h()},h(){C(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),C(e,"viewBox","0 0 60.006 21.412"),C(e,"width","14"),C(e,"height","20"),C(e,"class","svelte-en2qvf")},m(r,i){Z(r,e,i),U(e,t)},p:fe,i:fe,o:fe,d(r){r&&P(e)}}}class wi extends ve{constructor(e){super(),_e(this,e,null,pi,he,{})}}function ki(n){let e,t,r;return{c(){e=rt("svg"),t=rt("circle"),r=rt("path"),this.h()},l(i){e=nt(i,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var o=oe(e);t=nt(o,"circle",{cx:!0,cy:!0,r:!0,style:!0}),oe(t).forEach(P),r=nt(o,"path",{d:!0,style:!0}),oe(r).forEach(P),o.forEach(P),this.h()},h(){C(t,"cx","4.789"),C(t,"cy","4.787"),C(t,"r","3.85"),tt(t,"stroke-width","1.875"),tt(t,"fill","none"),C(r,"d","M12.063 12.063 7.635 7.635"),tt(r,"stroke-width","1.875"),tt(r,"stroke-linecap","round"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"width","13"),C(e,"height","13"),C(e,"viewBox","0 0 13 13"),C(e,"class","svelte-1bpbt60")},m(i,o){Z(i,e,o),U(e,t),U(e,r)},p:fe,i:fe,o:fe,d(i){i&&P(e)}}}class Mi extends ve{constructor(e){super(),_e(this,e,null,ki,he,{})}}function Si(n,e,t){const r=e[1],i=e[0],o=r-i;return n===r&&t?n:((n-i)%o+o)%o+i}function Ur(n){const e=[...n];return e[2]<e[0]&&(e[2]+=360),e}let At;async function Li(n,e,t){const r=n==null?void 0:n.getCenterAndZoom();for(const i of e??[])if(!(r&&(i.minZoom!=null&&i.minZoom>r[0]||i.maxZoom!=null&&i.maxZoom<r[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(At&&i.cachedLocationExpiry&&At.time+i.cachedLocationExpiry>Date.now()){if(!At.coords)break e;return At.coords}let o;try{return o=await new Promise((l,a)=>{t.signal.addEventListener("abort",()=>{a(Error("aborted"))}),navigator.geolocation.getCurrentPosition(s=>{l([s.coords.longitude,s.coords.latitude].map(u=>u.toFixed(6)).join(","))},s=>{a(s)},i)}),o}catch{}finally{i.cachedLocationExpiry&&(At={time:Date.now(),coords:o})}if(t.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(r&&i.type==="map-center")return r[1].toFixed(6)+","+r[2].toFixed(6)}}function Nr(n,e,t){const r=n.slice();return r[81]=e[t],r[83]=t,r}function Zr(n){let e,t;return e=new bi({}),{c(){W(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,i){J(e,r,i),t=!0},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function qr(n){let e,t,r,i,o;return t=new wi({}),{c(){e=$("button"),W(t.$$.fragment),this.h()},l(l){e=ee(l,"BUTTON",{type:!0,title:!0,class:!0});var a=oe(e);V(t.$$.fragment,a),a.forEach(P),this.h()},h(){C(e,"type","button"),C(e,"title",n[9]),C(e,"class","svelte-zh3kmv"),$e(e,"active",n[0])},m(l,a){Z(l,e,a),J(t,e,null),r=!0,i||(o=Ie(e,"click",n[67]),i=!0)},p(l,a){(!r||a[0]&512)&&C(e,"title",l[9]),(!r||a[0]&1)&&$e(e,"active",l[0])},i(l){r||(B(t.$$.fragment,l),r=!0)},o(l){O(t.$$.fragment,l),r=!1},d(l){l&&P(e),K(t),i=!1,o()}}}function Ci(n){let e,t=[],r=new Map,i,o,l,a=Rr(n[14]);const s=u=>u[81].id+(u[81].address?","+u[81].address:"");for(let u=0;u<a.length;u+=1){let c=Nr(n,a,u),h=s(c);r.set(h,t[u]=Xr(h,c))}return{c(){e=$("ul");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=ee(u,"UL",{class:!0});var c=oe(e);for(let h=0;h<t.length;h+=1)t[h].l(c);c.forEach(P),this.h()},h(){C(e,"class","svelte-zh3kmv")},m(u,c){Z(u,e,c);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(e,null);i=!0,o||(l=[Ie(e,"mouseleave",n[71]),Ie(e,"blur",n[72])],o=!0)},p(u,c){c[0]&17880064&&(a=Rr(u[14]),Ge(),t=ri(t,c,s,1,u,a,r,e,ni,Xr,null,Nr),He())},i(u){if(!i){for(let c=0;c<a.length;c+=1)B(t[c]);i=!0}},o(u){for(let c=0;c<t.length;c+=1)O(t[c]);i=!1},d(u){u&&P(e);for(let c=0;c<t.length;c+=1)t[c].d();o=!1,vr(l)}}}function Ei(n){let e,t,r,i,o,l;return t=new dn({}),{c(){e=$("div"),W(t.$$.fragment),r=j(),i=$("div"),o=Pe(n[7]),this.h()},l(a){e=ee(a,"DIV",{class:!0});var s=oe(e);V(t.$$.fragment,s),r=x(s),i=ee(s,"DIV",{class:!0});var u=oe(i);o=ze(u,n[7]),u.forEach(P),s.forEach(P),this.h()},h(){C(i,"class","svelte-zh3kmv"),C(e,"class","no-results svelte-zh3kmv")},m(a,s){Z(a,e,s),J(t,e,null),U(e,r),U(e,i),U(i,o),l=!0},p(a,s){(!l||s[0]&128)&&dt(o,a[7])},i(a){l||(B(t.$$.fragment,a),l=!0)},o(a){O(t.$$.fragment,a),l=!1},d(a){a&&P(e),K(t)}}}function Ti(n){let e="",t;return{c(){t=Pe(e)},l(r){t=ze(r,e)},m(r,i){Z(r,t,i)},p:fe,i:fe,o:fe,d(r){r&&P(t)}}}function Pi(n){let e,t,r,i,o,l,a,s,u,c,h;return t=new dn({}),s=new hn({}),{c(){e=$("div"),W(t.$$.fragment),r=j(),i=$("div"),o=Pe(n[6]),l=j(),a=$("button"),W(s.$$.fragment),this.h()},l(k){e=ee(k,"DIV",{class:!0});var b=oe(e);V(t.$$.fragment,b),r=x(b),i=ee(b,"DIV",{class:!0});var w=oe(i);o=ze(w,n[6]),w.forEach(P),l=x(b),a=ee(b,"BUTTON",{class:!0});var R=oe(a);V(s.$$.fragment,R),R.forEach(P),b.forEach(P),this.h()},h(){C(i,"class","svelte-zh3kmv"),C(a,"class","svelte-zh3kmv"),C(e,"class","error svelte-zh3kmv")},m(k,b){Z(k,e,b),J(t,e,null),U(e,r),U(e,i),U(i,o),U(e,l),U(e,a),J(s,a,null),u=!0,c||(h=Ie(a,"click",n[68]),c=!0)},p(k,b){(!u||b[0]&64)&&dt(o,k[6])},i(k){u||(B(t.$$.fragment,k),B(s.$$.fragment,k),u=!0)},o(k){O(t.$$.fragment,k),O(s.$$.fragment,k),u=!1},d(k){k&&P(e),K(t),K(s),c=!1,h()}}}function Xr(n,e){let t,r,i;function o(){return e[69](e[83])}function l(){return e[70](e[81])}return r=new vi({props:{feature:e[81],showPlaceType:e[10],selected:e[15]===e[83],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),r.$on("mouseenter",o),r.$on("focus",l),{key:n,first:null,c(){t=Oe(),W(r.$$.fragment),this.h()},l(a){t=Oe(),V(r.$$.fragment,a),this.h()},h(){this.first=t},m(a,s){Z(a,t,s),J(r,a,s),i=!0},p(a,s){e=a;const u={};s[0]&16384&&(u.feature=e[81]),s[0]&1024&&(u.showPlaceType=e[10]),s[0]&49152&&(u.selected=e[15]===e[83]),s[0]&4096&&(u.iconsBaseUrl=e[12]),r.$set(u)},i(a){i||(B(r.$$.fragment,a),i=!0)},o(a){O(r.$$.fragment,a),i=!1},d(a){a&&P(t),K(r,a)}}}function zi(n){let e,t,r,i,o,l,a,s,u,c,h,k,b,w,R,A,D,f,m,d,y,M=!1;o=new Mi({}),h=new hn({});let S=n[19]&&Zr(),E=n[5]===!0&&qr(n);const L=n[59].default,T=at(L,n,n[58],null),g=[Pi,Ti,Ei,Ci],_=[];function X(I,N){var G,te;return I[18]?0:I[16]?((G=I[14])==null?void 0:G.length)===0?2:I[16]&&((te=I[14])!=null&&te.length)?3:-1:1}return~(A=X(n))&&(D=_[A]=g[A](n)),{c(){e=j(),t=$("form"),r=$("div"),i=$("button"),W(o.$$.fragment),l=j(),a=$("input"),s=j(),u=$("div"),c=$("button"),W(h.$$.fragment),k=j(),S&&S.c(),b=j(),E&&E.c(),w=j(),T&&T.c(),R=j(),D&&D.c(),this.h()},l(I){e=x(I),t=ee(I,"FORM",{tabindex:!0,class:!0});var N=oe(t);r=ee(N,"DIV",{class:!0});var G=oe(r);i=ee(G,"BUTTON",{class:!0,type:!0});var te=oe(i);V(o.$$.fragment,te),te.forEach(P),l=x(G),a=ee(G,"INPUT",{placeholder:!0,"aria-label":!0,class:!0}),s=x(G),u=ee(G,"DIV",{class:!0});var re=oe(u);c=ee(re,"BUTTON",{type:!0,title:!0,class:!0});var me=oe(c);V(h.$$.fragment,me),me.forEach(P),k=x(re),S&&S.l(re),re.forEach(P),b=x(G),E&&E.l(G),w=x(G),T&&T.l(G),G.forEach(P),R=x(N),D&&D.l(N),N.forEach(P),this.h()},h(){C(i,"class","search-button svelte-zh3kmv"),C(i,"type","button"),C(a,"placeholder",n[8]),C(a,"aria-label",n[8]),C(a,"class","svelte-zh3kmv"),C(c,"type","button"),C(c,"title",n[3]),C(c,"class","svelte-zh3kmv"),C(u,"class","clear-button-container svelte-zh3kmv"),$e(u,"displayable",n[1]!==""),C(r,"class","input-group svelte-zh3kmv"),C(t,"tabindex","0"),C(t,"class",f=jt(n[2])+" svelte-zh3kmv"),$e(t,"can-collapse",n[4]&&n[1]==="")},m(I,N){Z(I,e,N),Z(I,t,N),U(t,r),U(r,i),J(o,i,null),U(r,l),U(r,a),n[61](a),Ir(a,n[1]),U(r,s),U(r,u),U(u,c),J(h,c,null),U(u,k),S&&S.m(u,null),U(r,b),E&&E.m(r,null),U(r,w),T&&T.m(r,null),U(t,R),~A&&_[A].m(t,null),m=!0,d||(y=[Ie(i,"click",n[60]),Ie(a,"input",n[62]),Ie(a,"focus",n[63]),Ie(a,"blur",n[64]),Ie(a,"keydown",n[22]),Ie(a,"input",n[65]),Ie(c,"click",n[66]),Ie(t,"submit",Nn(n[21]))],d=!0)},p(I,N){(!m||N[0]&256)&&C(a,"placeholder",I[8]),(!m||N[0]&256)&&C(a,"aria-label",I[8]),N[0]&2&&a.value!==I[1]&&Ir(a,I[1]),(!m||N[0]&8)&&C(c,"title",I[3]),I[19]?S?N[0]&524288&&B(S,1):(S=Zr(),S.c(),B(S,1),S.m(u,null)):S&&(Ge(),O(S,1,1,()=>{S=null}),He()),(!m||N[0]&2)&&$e(u,"displayable",I[1]!==""),I[5]===!0?E?(E.p(I,N),N[0]&32&&B(E,1)):(E=qr(I),E.c(),B(E,1),E.m(r,w)):E&&(Ge(),O(E,1,1,()=>{E=null}),He()),T&&T.p&&(!m||N[1]&134217728)&&st(T,L,I,I[58],m?ft(L,I[58],N,null):ut(I[58]),null);let G=A;A=X(I),A===G?~A&&_[A].p(I,N):(D&&(Ge(),O(_[G],1,1,()=>{_[G]=null}),He()),~A?(D=_[A],D?D.p(I,N):(D=_[A]=g[A](I),D.c()),B(D,1),D.m(t,null)):D=null),(!m||N[0]&4&&f!==(f=jt(I[2])+" svelte-zh3kmv"))&&C(t,"class",f),(!m||N[0]&22)&&$e(t,"can-collapse",I[4]&&I[1]==="")},i(I){m||(B(M),B(o.$$.fragment,I),B(h.$$.fragment,I),B(S),B(E),B(T,I),B(D),m=!0)},o(I){O(M),O(o.$$.fragment,I),O(h.$$.fragment,I),O(S),O(E),O(T,I),O(D),m=!1},d(I){I&&(P(e),P(t)),K(o),n[61](null),K(h),S&&S.d(),E&&E.d(),T&&T.d(I),~A&&_[A].d(),d=!1,vr(y)}}}function Bi(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{class:l=void 0}=e,{apiKey:a}=e,{bbox:s=void 0}=e,{clearButtonTitle:u="clear"}=e,{clearOnBlur:c=!1}=e,{collapsed:h=!1}=e,{country:k=void 0}=e,{debounceSearch:b=200}=e,{enableReverse:w=!1}=e,{errorMessage:R="Something went wrong…"}=e,{filter:A=()=>!0}=e,{flyTo:D=!0}=e,{fuzzyMatch:f=!0}=e,{language:m=void 0}=e,{limit:d=void 0}=e,{mapController:y=void 0}=e,{minLength:M=2}=e,{noResultsMessage:S="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:E="Search"}=e,{proximity:L=[{type:"server-geolocation"}]}=e,{reverseActive:T=w==="always"}=e,{reverseButtonTitle:g="toggle reverse geocoding"}=e,{searchValue:_=""}=e,{showFullGeometry:X=!0}=e,{showPlaceType:I="ifNeeded"}=e,{showResultsWhileTyping:N=!0}=e,{selectFirst:G=!0}=e,{flyToSelected:te=!1}=e,{markerOnSelected:re=!0}=e,{types:me=void 0}=e,{excludeTypes:ge=!1}=e,{zoom:ue=16}=e,{maxZoom:se=18}=e,{apiUrl:Re="https://api.maptiler.com/geocoding"}=e,{fetchParameters:be={}}=e,{iconsBaseUrl:De="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.2/icons/"}=e,{adjustUrlQuery:we=v=>{}}=e;function ye(){ce.focus()}function z(){ce.blur()}function H(v,de=!0){t(1,_=v),de?(t(15,ie=-1),Ct()):(_t(),setTimeout(()=>{ce.focus(),ce.select()}))}function le(){t(14,p=void 0),t(55,Y=void 0),t(15,ie=-1)}function Ne(){t(54,Q=[]),t(55,Y=void 0)}let qe=!1,p,Q,Y,ke="",ce,ie=-1,Be,yt=[],Qe,lt,ct,Lt;const Zt=new Set,je=_r();ot(()=>{y&&(y.setEventHandler(void 0),y.indicateReverse(!1),y.setSelectedMarker(-1),y.setMarkers(void 0,void 0))});function Ct(v){if(lt&&(clearTimeout(lt),lt=void 0),ie>-1&&p)t(55,Y=p[ie]),t(1,_=Y.place_type[0]==="reverse"?Y.place_name:Y.place_name.replace(/,.*/,"")),t(18,Be=void 0),t(54,Q=void 0),t(15,ie=-1);else if(_){const de=v||!Et(_);vt(_,{exact:!0}).then(()=>{t(54,Q=p),t(55,Y=void 0),de&&nr()}).catch(Xe=>t(18,Be=Xe))}}function Et(v){try{return xn(v,6)}catch{return!1}}async function vt(v,{byId:de=!1,exact:Xe=!1}={}){t(18,Be=void 0),Qe==null||Qe.abort();const Ye=new AbortController;t(19,Qe=Ye);try{const ne=Et(v),Ue=new URLSearchParams;if(m!==void 0&&Ue.set("language",Array.isArray(m)?m.join(","):m??""),me&&Ue.set("types",me.join(",")),ge&&Ue.set("excludeTypes",String(ge)),s&&Ue.set("bbox",s.map(ht=>ht.toFixed(6)).join(",")),k&&Ue.set("country",Array.isArray(k)?k.join(","):k),!de&&!ne){const ht=await Li(y,L,Ye);ht&&Ue.set("proximity",ht),(Xe||!N)&&Ue.set("autocomplete","false"),Ue.set("fuzzyMatch",String(f))}d!==void 0&&(!ne||(me==null?void 0:me.length)===1)&&Ue.set("limit",String(d)),Ue.set("key",a),we(Ue);const mt=Re+"/"+encodeURIComponent(ne?ne.decimalLongitude+","+ne.decimalLatitude:v)+".json?"+Ue.toString();if(mt===ke){de?(t(14,p=void 0),t(55,Y=yt[0])):t(14,p=yt);return}ke=mt;const bt=await fetch(mt,{signal:Ye.signal,...be});if(!bt.ok)throw new Error(await bt.text());const pt=await bt.json();je("response",{url:mt,featureCollection:pt}),de?(t(14,p=void 0),t(55,Y=pt.features[0]),yt=[Y]):(t(14,p=pt.features.filter(A)),ne&&p.unshift({type:"Feature",properties:{},id:"reverse_"+ne.decimalLongitude+"_"+ne.decimalLatitude,text:ne.decimalLatitude+", "+ne.decimalLongitude,place_name:ne.decimalLatitude+", "+ne.decimalLongitude,place_type:["reverse"],center:[ne.decimalLongitude,ne.decimalLatitude],bbox:[ne.decimalLongitude,ne.decimalLatitude,ne.decimalLongitude,ne.decimalLatitude],geometry:{type:"Point",coordinates:[ne.decimalLongitude,ne.decimalLatitude]}}),yt=p,ne&&ce.focus())}catch(ne){if(ne&&typeof ne=="object"&&"name"in ne&&ne.name==="AbortError")return;throw ne}finally{Ye===Qe&&t(19,Qe=void 0)}}function nr(){var Xe;if(!(Q!=null&&Q.length)||!D)return;const v=[180,90,-180,-90],de=!Q.some(Ye=>!Ye.matching_text);for(const Ye of Q)if(de||!Ye.matching_text)for(const ne of[0,1,2,3])v[ne]=Math[ne<2?"min":"max"](v[ne],((Xe=Ye.bbox)==null?void 0:Xe[ne])??Ye.center[ne%2]);y&&Q.length>0&&(Y&&v[0]===v[2]&&v[1]===v[3]?y.flyTo(Y.center,ue):y.fitBounds(Ur(v),50,se))}function qt(v){t(0,T=w==="always"),t(14,p=void 0),t(55,Y=void 0),t(15,ie=-1),H(v[1].toFixed(6)+", "+Si(v[0],[-180,180],!0).toFixed(6),!1)}function ir(v){if(!p)return;let de=v.key==="ArrowDown"?1:v.key==="ArrowUp"?-1:0;de&&(ie===(G?0:-1)&&de===-1&&t(15,ie=p.length),t(15,ie+=de),ie>=p.length&&t(15,ie=-1),ie<0&&G&&t(15,ie=0),v.preventDefault())}function _t(v=!0){if(t(18,Be=void 0),N){if(lt&&clearTimeout(lt),_.length<M)return;const de=_;lt=window.setTimeout(()=>{vt(de).catch(Xe=>t(18,Be=Xe))},v?b:0)}else t(14,p=void 0),t(18,Be=void 0)}function Tt(v){t(55,Y=v),t(1,_=v.place_name),t(15,ie=-1)}const Xt=()=>ce.focus();function or(v){Me[v?"unshift":"push"](()=>{ce=v,t(17,ce)})}function Yt(){_=this.value,t(1,_),t(13,qe),t(27,c)}const lr=()=>t(13,qe=!0),Gt=()=>t(13,qe=!1),ar=()=>_t(),Ht=()=>{t(1,_=""),ce.focus()},sr=()=>t(0,T=!T),Wt=()=>t(18,Be=void 0),ur=v=>t(15,ie=v),Vt=v=>Tt(v),F=()=>{G||t(15,ie=-1)},q=()=>{};return n.$$set=v=>{"class"in v&&t(2,l=v.class),"apiKey"in v&&t(25,a=v.apiKey),"bbox"in v&&t(26,s=v.bbox),"clearButtonTitle"in v&&t(3,u=v.clearButtonTitle),"clearOnBlur"in v&&t(27,c=v.clearOnBlur),"collapsed"in v&&t(4,h=v.collapsed),"country"in v&&t(28,k=v.country),"debounceSearch"in v&&t(29,b=v.debounceSearch),"enableReverse"in v&&t(5,w=v.enableReverse),"errorMessage"in v&&t(6,R=v.errorMessage),"filter"in v&&t(30,A=v.filter),"flyTo"in v&&t(31,D=v.flyTo),"fuzzyMatch"in v&&t(32,f=v.fuzzyMatch),"language"in v&&t(33,m=v.language),"limit"in v&&t(34,d=v.limit),"mapController"in v&&t(35,y=v.mapController),"minLength"in v&&t(36,M=v.minLength),"noResultsMessage"in v&&t(7,S=v.noResultsMessage),"placeholder"in v&&t(8,E=v.placeholder),"proximity"in v&&t(37,L=v.proximity),"reverseActive"in v&&t(0,T=v.reverseActive),"reverseButtonTitle"in v&&t(9,g=v.reverseButtonTitle),"searchValue"in v&&t(1,_=v.searchValue),"showFullGeometry"in v&&t(38,X=v.showFullGeometry),"showPlaceType"in v&&t(10,I=v.showPlaceType),"showResultsWhileTyping"in v&&t(39,N=v.showResultsWhileTyping),"selectFirst"in v&&t(11,G=v.selectFirst),"flyToSelected"in v&&t(40,te=v.flyToSelected),"markerOnSelected"in v&&t(41,re=v.markerOnSelected),"types"in v&&t(42,me=v.types),"excludeTypes"in v&&t(43,ge=v.excludeTypes),"zoom"in v&&t(44,ue=v.zoom),"maxZoom"in v&&t(45,se=v.maxZoom),"apiUrl"in v&&t(46,Re=v.apiUrl),"fetchParameters"in v&&t(47,be=v.fetchParameters),"iconsBaseUrl"in v&&t(12,De=v.iconsBaseUrl),"adjustUrlQuery"in v&&t(48,we=v.adjustUrlQuery),"$$scope"in v&&t(58,o=v.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&134225920&&setTimeout(()=>{t(16,ct=qe),c&&!qe&&t(1,_="")}),n.$$.dirty[0]&16386|n.$$.dirty[1]&32&&_.length<M&&(t(55,Y=void 0),t(14,p=void 0),t(18,Be=void 0),t(54,Q=p)),n.$$.dirty[1]&16777344&&X&&Y&&!Y.address&&Y.geometry.type==="Point"&&Y.place_type[0]!=="reverse"&&vt(Y.id,{byId:!0}).catch(v=>t(18,Be=v)),n.$$.dirty[1]&50356241&&(y&&Y&&Y.id!==Lt&&D&&(!Y.bbox||Y.bbox[0]===Y.bbox[2]&&Y.bbox[1]===Y.bbox[3]?y.flyTo(Y.center,Y.id.startsWith("poi.")||Y.id.startsWith("address.")?se:ue):y.fitBounds(Ur(Y.bbox),50,se),t(14,p=void 0),t(54,Q=void 0),t(15,ie=-1)),t(56,Lt=Y==null?void 0:Y.id)),n.$$.dirty[0]&18432&&G&&p!=null&&p.length&&t(15,ie=0),n.$$.dirty[0]&2050&&(G||t(15,ie=-1)),n.$$.dirty[0]&16384|n.$$.dirty[1]&8388608&&Q!==p&&t(54,Q=void 0),n.$$.dirty[0]&81921|n.$$.dirty[1]&8388624&&y&&y.setEventHandler(v=>{switch(v.type){case"mapClick":T&&qt(v.coordinates);break;case"markerClick":{const de=p==null?void 0:p.find(Xe=>Xe.id===v.id);de&&Tt(de)}break;case"markerMouseEnter":Q&&t(15,ie=ct?(p==null?void 0:p.findIndex(de=>de.id===v.id))??-1:-1);break;case"markerMouseLeave":Q&&t(15,ie=-1);break}}),n.$$.dirty[0]&49152&&t(57,r=p==null?void 0:p[ie]),n.$$.dirty[1]&67133969&&y&&r&&D&&te&&y.flyTo(r.center,r.id.startsWith("poi.")||r.id.startsWith("address.")?se:ue),n.$$.dirty[1]&1040&&(re||y==null||y.setMarkers(void 0,void 0)),n.$$.dirty[1]&75498512&&y&&re&&!Q&&(y.setMarkers(r?[r]:void 0,void 0),y.setSelectedMarker(r?0:-1)),n.$$.dirty[1]&25165840&&y&&y.setMarkers(Q,Y),n.$$.dirty[0]&32768|n.$$.dirty[1]&8388624&&Q&&y&&y.setSelectedMarker(ie),n.$$.dirty[0]&2|n.$$.dirty[1]&16&&y){const v=Et(_);y.setReverseMarker(v?[v.decimalLongitude,v.decimalLatitude]:void 0)}n.$$.dirty[1]&67108864&&je("select",r),n.$$.dirty[1]&16777216&&je("pick",Y),n.$$.dirty[0]&81920&&je("optionsVisibilityChange",ct&&!!p),n.$$.dirty[0]&16384&&je("featuresListed",p),n.$$.dirty[1]&8388608&&je("featuresMarked",Q),n.$$.dirty[0]&1&&je("reverseToggle",T),n.$$.dirty[0]&2&&je("queryChange",_),n.$$.dirty[0]&1|n.$$.dirty[1]&16&&y&&y.indicateReverse(T)},[T,_,l,u,h,w,R,S,E,g,I,G,De,qe,p,ie,ct,ce,Be,Qe,Zt,Ct,ir,_t,Tt,a,s,c,k,b,A,D,f,m,d,y,M,L,X,N,te,re,me,ge,ue,se,Re,be,we,ye,z,H,le,Ne,Q,Y,Lt,r,o,i,Xt,or,Yt,lr,Gt,ar,Ht,sr,Wt,ur,Vt,F,q]}class Ai extends ve{constructor(e){super(),_e(this,e,Bi,zi,he,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}}function Yr(n){let e,t,r;return t=new Ai({props:{mapController:n[0],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=$("div"),W(t.$$.fragment),this.h()},l(i){e=ee(i,"DIV",{class:!0});var o=oe(e);V(t.$$.fragment,o),o.forEach(P),this.h()},h(){C(e,"class","svelte-ixhnie")},m(i,o){Z(i,e,o),J(t,e,null),r=!0},p(i,o){const l={};o&1&&(l.mapController=i[0]),t.$set(l)},i(i){r||(B(t.$$.fragment,i),r=!0)},o(i){O(t.$$.fragment,i),r=!1},d(i){i&&P(e),K(t)}}}function Ii(n){let e,t,r=n[0]&&Yr(n);return{c(){r&&r.c(),e=Oe()},l(i){r&&r.l(i),e=Oe()},m(i,o){r&&r.m(i,o),Z(i,e,o),t=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&B(r,1)):(r=Yr(i),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(Ge(),O(r,1,1,()=>{r=null}),He())},i(i){t||(B(r),t=!0)},o(i){O(r),t=!1},d(i){i&&P(e),r&&r.d(i)}}}function Fi(n,e,t){let{map:r}=e,i;return Zn(()=>{t(0,i=$n(r,Mt))}),n.$$set=o=>{"map"in o&&t(1,r=o.map)},[i,r]}class Oi extends ve{constructor(e){super(),_e(this,e,Fi,Ii,he,{map:1})}}function Ri(n){let e,t,r,i;const o=n[2].default,l=at(o,n,n[1],null);let a=[{type:"button"},{class:"govuk-button"},{"data-module":"govuk-button"},n[0]],s={};for(let u=0;u<a.length;u+=1)s=dr(s,a[u]);return{c(){e=$("button"),l&&l.c(),this.h()},l(u){e=ee(u,"BUTTON",{type:!0,class:!0,"data-module":!0});var c=oe(e);l&&l.l(c),c.forEach(P),this.h()},h(){Fr(e,s)},m(u,c){Z(u,e,c),l&&l.m(e,null),e.autofocus&&e.focus(),t=!0,r||(i=Ie(e,"click",n[3]),r=!0)},p(u,[c]){l&&l.p&&(!t||c&2)&&st(l,o,u,u[1],t?ft(o,u[1],c,null):ut(u[1]),null),Fr(e,s=Qn(a,[{type:"button"},{class:"govuk-button"},{"data-module":"govuk-button"},c&1&&u[0]]))},i(u){t||(B(l,u),t=!0)},o(u){O(l,u),t=!1},d(u){u&&P(e),l&&l.d(u),r=!1,i()}}}function Di(n,e,t){let{$$slots:r={},$$scope:i}=e;function o(l){pe.call(this,n,l)}return n.$$set=l=>{t(0,e=dr(dr({},e),Or(l))),"$$scope"in l&&t(1,i=l.$$scope)},e=Or(e),[e,i,r,o]}class Ui extends ve{constructor(e){super(),_e(this,e,Di,Ri,he,{})}}var Ae=63710088e-1,br={centimeters:Ae*100,centimetres:Ae*100,degrees:Ae/111325,feet:Ae*3.28084,inches:Ae*39.37,kilometers:Ae/1e3,kilometres:Ae/1e3,meters:Ae,metres:Ae,miles:Ae/1609.344,millimeters:Ae*1e3,millimetres:Ae*1e3,nauticalmiles:Ae/1852,radians:1,yards:Ae*1.0936},Ni={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Ae,yards:1.0936133},gr={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Je(n,e,t){t===void 0&&(t={});var r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=n,r}function Zi(n,e,t){switch(n){case"Point":return Ze(e).geometry;case"LineString":return We(e).geometry;case"Polygon":return pr(e).geometry;case"MultiPoint":return yn(e).geometry;case"MultiLineString":return gn(e).geometry;case"MultiPolygon":return vn(e).geometry;default:throw new Error(n+" is invalid")}}function Ze(n,e,t){if(t===void 0&&(t={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!xt(n[0])||!xt(n[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:n};return Je(r,e,t)}function qi(n,e,t){return t===void 0&&(t={}),gt(n.map(function(r){return Ze(r,e)}),t)}function pr(n,e,t){t===void 0&&(t={});for(var r=0,i=n;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<o[o.length-1].length;l++)if(o[o.length-1][l]!==o[0][l])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:n};return Je(a,e,t)}function Xi(n,e,t){return t===void 0&&(t={}),gt(n.map(function(r){return pr(r,e)}),t)}function We(n,e,t){if(t===void 0&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:n};return Je(r,e,t)}function Yi(n,e,t){return t===void 0&&(t={}),gt(n.map(function(r){return We(r,e)}),t)}function gt(n,e){e===void 0&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function gn(n,e,t){t===void 0&&(t={});var r={type:"MultiLineString",coordinates:n};return Je(r,e,t)}function yn(n,e,t){t===void 0&&(t={});var r={type:"MultiPoint",coordinates:n};return Je(r,e,t)}function vn(n,e,t){t===void 0&&(t={});var r={type:"MultiPolygon",coordinates:n};return Je(r,e,t)}function Gi(n,e,t){t===void 0&&(t={});var r={type:"GeometryCollection",geometries:n};return Je(r,e,t)}function Hi(n,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(n*t)/t}function wr(n,e){e===void 0&&(e="kilometers");var t=br[e];if(!t)throw new Error(e+" units is invalid");return n*t}function tr(n,e){e===void 0&&(e="kilometers");var t=br[e];if(!t)throw new Error(e+" units is invalid");return n/t}function Wi(n,e){return Ft(tr(n,e))}function Vi(n){var e=n%360;return e<0&&(e+=360),e}function Ft(n){var e=n%(2*Math.PI);return e*180/Math.PI}function Ve(n){var e=n%360;return e*Math.PI/180}function Ji(n,e,t){if(e===void 0&&(e="kilometers"),t===void 0&&(t="kilometers"),!(n>=0))throw new Error("length must be a positive number");return wr(tr(n,e),t)}function Ki(n,e,t){if(e===void 0&&(e="meters"),t===void 0&&(t="kilometers"),!(n>=0))throw new Error("area must be a positive number");var r=gr[e];if(!r)throw new Error("invalid original units");var i=gr[t];if(!i)throw new Error("invalid final units");return n/r*i}function xt(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function kr(n){return!!n&&n.constructor===Object}function Qi(n){if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be an Array");if(n.length!==4&&n.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");n.forEach(function(e){if(!xt(e))throw new Error("bbox must only contain numbers")})}function ji(n){if(!n)throw new Error("id is required");if(["string","number"].indexOf(typeof n)===-1)throw new Error("id must be a number or a string")}const xi=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:gr,bearingToAzimuth:Vi,convertArea:Ki,convertLength:Ji,degreesToRadians:Ve,earthRadius:Ae,factors:br,feature:Je,featureCollection:gt,geometry:Zi,geometryCollection:Gi,isNumber:xt,isObject:kr,lengthToDegrees:Wi,lengthToRadians:tr,lineString:We,lineStrings:Yi,multiLineString:gn,multiPoint:yn,multiPolygon:vn,point:Ze,points:qi,polygon:pr,polygons:Xi,radiansToDegrees:Ft,radiansToLength:wr,round:Hi,unitsFactors:Ni,validateBBox:Qi,validateId:ji},Symbol.toStringTag,{value:"Module"}));function Rt(n,e,t){if(n!==null)for(var r,i,o,l,a,s,u,c=0,h=0,k,b=n.type,w=b==="FeatureCollection",R=b==="Feature",A=w?n.features.length:1,D=0;D<A;D++){u=w?n.features[D].geometry:R?n.geometry:n,k=u?u.type==="GeometryCollection":!1,a=k?u.geometries.length:1;for(var f=0;f<a;f++){var m=0,d=0;if(l=k?u.geometries[f]:u,l!==null){s=l.coordinates;var y=l.type;switch(c=t&&(y==="Polygon"||y==="MultiPolygon")?1:0,y){case null:break;case"Point":if(e(s,h,D,m,d)===!1)return!1;h++,m++;break;case"LineString":case"MultiPoint":for(r=0;r<s.length;r++){if(e(s[r],h,D,m,d)===!1)return!1;h++,y==="MultiPoint"&&m++}y==="LineString"&&m++;break;case"Polygon":case"MultiLineString":for(r=0;r<s.length;r++){for(i=0;i<s[r].length-c;i++){if(e(s[r][i],h,D,m,d)===!1)return!1;h++}y==="MultiLineString"&&m++,y==="Polygon"&&d++}y==="Polygon"&&m++;break;case"MultiPolygon":for(r=0;r<s.length;r++){for(d=0,i=0;i<s[r].length;i++){for(o=0;o<s[r][i].length-c;o++){if(e(s[r][i][o],h,D,m,d)===!1)return!1;h++}d++}m++}break;case"GeometryCollection":for(r=0;r<l.geometries.length;r++)if(Rt(l.geometries[r],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $i(n,e,t,r){var i=t;return Rt(n,function(o,l,a,s,u){l===0&&t===void 0?i=o:i=e(i,o,l,a,s,u)},r),i}function _n(n,e){var t;switch(n.type){case"FeatureCollection":for(t=0;t<n.features.length&&e(n.features[t].properties,t)!==!1;t++);break;case"Feature":e(n.properties,0);break}}function eo(n,e,t){var r=t;return _n(n,function(i,o){o===0&&t===void 0?r=i:r=e(r,i,o)}),r}function $t(n,e){if(n.type==="Feature")e(n,0);else if(n.type==="FeatureCollection")for(var t=0;t<n.features.length&&e(n.features[t],t)!==!1;t++);}function to(n,e,t){var r=t;return $t(n,function(i,o){o===0&&t===void 0?r=i:r=e(r,i,o)}),r}function ro(n){var e=[];return Rt(n,function(t){e.push(t)}),e}function Mr(n,e){var t,r,i,o,l,a,s,u,c,h,k=0,b=n.type==="FeatureCollection",w=n.type==="Feature",R=b?n.features.length:1;for(t=0;t<R;t++){for(a=b?n.features[t].geometry:w?n.geometry:n,u=b?n.features[t].properties:w?n.properties:{},c=b?n.features[t].bbox:w?n.bbox:void 0,h=b?n.features[t].id:w?n.id:void 0,s=a?a.type==="GeometryCollection":!1,l=s?a.geometries.length:1,i=0;i<l;i++){if(o=s?a.geometries[i]:a,o===null){if(e(null,k,u,c,h)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,k,u,c,h)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(e(o.geometries[r],k,u,c,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}k++}}function bn(n,e,t){var r=t;return Mr(n,function(i,o,l,a,s){o===0&&t===void 0?r=i:r=e(r,i,o,l,a,s)}),r}function St(n,e){Mr(n,function(t,r,i,o,l){var a=t===null?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Je(t,i,{bbox:o,id:l}),r,0)===!1?!1:void 0}var s;switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var c=t.coordinates[u],h={type:s,coordinates:c};if(e(Je(h,i),r,u)===!1)return!1}})}function no(n,e,t){var r=t;return St(n,function(i,o,l){o===0&&l===0&&t===void 0?r=i:r=e(r,i,o,l)}),r}function pn(n,e){St(n,function(t,r,i){var o=0;if(t.geometry){var l=t.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var a,s=0,u=0,c=0;if(Rt(t,function(h,k,b,w,R){if(a===void 0||r>s||w>u||R>c){a=h,s=r,u=w,c=R,o=0;return}var A=We([a,h],t.properties);if(e(A,r,i,R,o)===!1)return!1;o++,a=h})===!1)return!1}}})}function io(n,e,t){var r=t,i=!1;return pn(n,function(o,l,a,s,u){i===!1&&t===void 0?r=o:r=e(r,o,l,a,s,u),i=!0}),r}function wn(n,e){if(!n)throw new Error("geojson is required");St(n,function(t,r,i){if(t.geometry!==null){var o=t.geometry.type,l=t.geometry.coordinates;switch(o){case"LineString":if(e(t,r,i,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<l.length;a++)if(e(We(l[a],t.properties),r,i,a)===!1)return!1;break}}})}function oo(n,e,t){var r=t;return wn(n,function(i,o,l,a){o===0&&t===void 0?r=i:r=e(r,i,o,l,a)}),r}function lo(n,e){if(e=e||{},!kr(e))throw new Error("options is invalid");var t=e.featureIndex||0,r=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.segmentIndex||0,l=e.properties,a;switch(n.type){case"FeatureCollection":t<0&&(t=n.features.length+t),l=l||n.features[t].properties,a=n.features[t].geometry;break;case"Feature":l=l||n.properties,a=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=n;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var s=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=s.length+o-1),We([s[o],s[o+1]],l,e);case"Polygon":return i<0&&(i=s.length+i),o<0&&(o=s[i].length+o-1),We([s[i][o],s[i][o+1]],l,e);case"MultiLineString":return r<0&&(r=s.length+r),o<0&&(o=s[r].length+o-1),We([s[r][o],s[r][o+1]],l,e);case"MultiPolygon":return r<0&&(r=s.length+r),i<0&&(i=s[r].length+i),o<0&&(o=s[r][i].length-o-1),We([s[r][i][o],s[r][i][o+1]],l,e)}throw new Error("geojson is invalid")}function ao(n,e){if(e=e||{},!kr(e))throw new Error("options is invalid");var t=e.featureIndex||0,r=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.coordIndex||0,l=e.properties,a;switch(n.type){case"FeatureCollection":t<0&&(t=n.features.length+t),l=l||n.features[t].properties,a=n.features[t].geometry;break;case"Feature":l=l||n.properties,a=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=n;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var s=a.coordinates;switch(a.type){case"Point":return Ze(s,l,e);case"MultiPoint":return r<0&&(r=s.length+r),Ze(s[r],l,e);case"LineString":return o<0&&(o=s.length+o),Ze(s[o],l,e);case"Polygon":return i<0&&(i=s.length+i),o<0&&(o=s[i].length+o),Ze(s[i][o],l,e);case"MultiLineString":return r<0&&(r=s.length+r),o<0&&(o=s[r].length+o),Ze(s[r][o],l,e);case"MultiPolygon":return r<0&&(r=s.length+r),i<0&&(i=s[r].length+i),o<0&&(o=s[r][i].length-o),Ze(s[r][i][o],l,e)}throw new Error("geojson is invalid")}const so=Object.freeze(Object.defineProperty({__proto__:null,coordAll:ro,coordEach:Rt,coordReduce:$i,featureEach:$t,featureReduce:to,findPoint:ao,findSegment:lo,flattenEach:St,flattenReduce:no,geomEach:Mr,geomReduce:bn,lineEach:wn,lineReduce:oo,propEach:_n,propReduce:eo,segmentEach:pn,segmentReduce:io},Symbol.toStringTag,{value:"Module"}));var Gr=6378137;function Hr(n){return bn(n,function(e,t){return e+uo(t)},0)}function uo(n){var e=0,t;switch(n.type){case"Polygon":return Wr(n.coordinates);case"MultiPolygon":for(t=0;t<n.coordinates.length;t++)e+=Wr(n.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Wr(n){var e=0;if(n&&n.length>0){e+=Math.abs(Vr(n[0]));for(var t=1;t<n.length;t++)e-=Math.abs(Vr(n[t]))}return e}function Vr(n){var e,t,r,i,o,l,a,s=0,u=n.length;if(u>2){for(a=0;a<u;a++)a===u-2?(i=u-2,o=u-1,l=0):a===u-1?(i=u-1,o=0,l=1):(i=a,o=a+1,l=a+2),e=n[i],t=n[o],r=n[l],s+=(mr(r[0])-mr(e[0]))*Math.sin(mr(t[1]));s=s*Gr*Gr/2}return s}function mr(n){return n*Math.PI/180}function Ot(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function kt(n){if(Array.isArray(n))return n;if(n.type==="Feature"){if(n.geometry!==null)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function kn(n,e,t){if(t===void 0&&(t={}),t.final===!0)return fo(n,e);var r=Ot(n),i=Ot(e),o=Ve(r[0]),l=Ve(i[0]),a=Ve(r[1]),s=Ve(i[1]),u=Math.sin(l-o)*Math.cos(s),c=Math.cos(a)*Math.sin(s)-Math.sin(a)*Math.cos(s)*Math.cos(l-o);return Ft(Math.atan2(u,c))}function fo(n,e){var t=kn(e,n);return t=(t+180)%360,t}function It(n,e,t){t===void 0&&(t={});var r=Ot(n),i=Ot(e),o=Ve(i[1]-r[1]),l=Ve(i[0]-r[0]),a=Ve(r[1]),s=Ve(i[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(a)*Math.cos(s);return wr(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),t.units)}function Jr(n,e,t,r){r===void 0&&(r={});var i=Ot(n),o=Ve(i[0]),l=Ve(i[1]),a=Ve(t),s=tr(e,r.units),u=Math.asin(Math.sin(l)*Math.cos(s)+Math.cos(l)*Math.sin(s)*Math.cos(a)),c=o+Math.atan2(Math.sin(a)*Math.sin(s)*Math.cos(l),Math.cos(s)-Math.sin(l)*Math.sin(u)),h=Ft(c),k=Ft(u);return Ze([h,k],r.properties)}function Kr(n){if(!n)throw new Error("geojson is required");var e=[];return St(n,function(t){co(t,e)}),gt(e)}function co(n,e){var t=[],r=n.geometry;if(r!==null){switch(r.type){case"Polygon":t=kt(r);break;case"LineString":t=[kt(r)]}t.forEach(function(i){var o=mo(i,n.properties);o.forEach(function(l){l.id=e.length,e.push(l)})})}}function mo(n,e){var t=[];return n.reduce(function(r,i){var o=We([r,i],e);return o.bbox=ho(r,i),t.push(o),i}),t}function ho(n,e){var t=n[0],r=n[1],i=e[0],o=e[1],l=t<i?t:i,a=r<o?r:o,s=t>i?t:i,u=r>o?r:o;return[l,a,s,u]}var Sr={exports:{}},Mn={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(ei,function(){function t(f,m,d,y,M){(function S(E,L,T,g,_){for(;g>T;){if(g-T>600){var X=g-T+1,I=L-T+1,N=Math.log(X),G=.5*Math.exp(2*N/3),te=.5*Math.sqrt(N*G*(X-G)/X)*(I-X/2<0?-1:1),re=Math.max(T,Math.floor(L-I*G/X+te)),me=Math.min(g,Math.floor(L+(X-I)*G/X+te));S(E,L,re,me,_)}var ge=E[L],ue=T,se=g;for(r(E,T,L),_(E[g],ge)>0&&r(E,T,g);ue<se;){for(r(E,ue,se),ue++,se--;_(E[ue],ge)<0;)ue++;for(;_(E[se],ge)>0;)se--}_(E[T],ge)===0?r(E,T,se):r(E,++se,g),se<=L&&(T=se+1),L<=se&&(g=se-1)}})(f,m,d||0,y||f.length-1,M||i)}function r(f,m,d){var y=f[m];f[m]=f[d],f[d]=y}function i(f,m){return f<m?-1:f>m?1:0}var o=function(f){f===void 0&&(f=9),this._maxEntries=Math.max(4,f),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(f,m,d){if(!d)return m.indexOf(f);for(var y=0;y<m.length;y++)if(d(f,m[y]))return y;return-1}function a(f,m){s(f,0,f.children.length,m,f)}function s(f,m,d,y,M){M||(M=A(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var S=m;S<d;S++){var E=f.children[S];u(M,f.leaf?y(E):E)}return M}function u(f,m){return f.minX=Math.min(f.minX,m.minX),f.minY=Math.min(f.minY,m.minY),f.maxX=Math.max(f.maxX,m.maxX),f.maxY=Math.max(f.maxY,m.maxY),f}function c(f,m){return f.minX-m.minX}function h(f,m){return f.minY-m.minY}function k(f){return(f.maxX-f.minX)*(f.maxY-f.minY)}function b(f){return f.maxX-f.minX+(f.maxY-f.minY)}function w(f,m){return f.minX<=m.minX&&f.minY<=m.minY&&m.maxX<=f.maxX&&m.maxY<=f.maxY}function R(f,m){return m.minX<=f.maxX&&m.minY<=f.maxY&&m.maxX>=f.minX&&m.maxY>=f.minY}function A(f){return{children:f,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function D(f,m,d,y,M){for(var S=[m,d];S.length;)if(!((d=S.pop())-(m=S.pop())<=y)){var E=m+Math.ceil((d-m)/y/2)*y;t(f,E,m,d,M),S.push(m,E,E,d)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(f){var m=this.data,d=[];if(!R(f,m))return d;for(var y=this.toBBox,M=[];m;){for(var S=0;S<m.children.length;S++){var E=m.children[S],L=m.leaf?y(E):E;R(f,L)&&(m.leaf?d.push(E):w(f,L)?this._all(E,d):M.push(E))}m=M.pop()}return d},o.prototype.collides=function(f){var m=this.data;if(!R(f,m))return!1;for(var d=[];m;){for(var y=0;y<m.children.length;y++){var M=m.children[y],S=m.leaf?this.toBBox(M):M;if(R(f,S)){if(m.leaf||w(f,S))return!0;d.push(M)}}m=d.pop()}return!1},o.prototype.load=function(f){if(!f||!f.length)return this;if(f.length<this._minEntries){for(var m=0;m<f.length;m++)this.insert(f[m]);return this}var d=this._build(f.slice(),0,f.length-1,0);if(this.data.children.length)if(this.data.height===d.height)this._splitRoot(this.data,d);else{if(this.data.height<d.height){var y=this.data;this.data=d,d=y}this._insert(d,this.data.height-d.height-1,!0)}else this.data=d;return this},o.prototype.insert=function(f){return f&&this._insert(f,this.data.height-1),this},o.prototype.clear=function(){return this.data=A([]),this},o.prototype.remove=function(f,m){if(!f)return this;for(var d,y,M,S=this.data,E=this.toBBox(f),L=[],T=[];S||L.length;){if(S||(S=L.pop(),y=L[L.length-1],d=T.pop(),M=!0),S.leaf){var g=l(f,S.children,m);if(g!==-1)return S.children.splice(g,1),L.push(S),this._condense(L),this}M||S.leaf||!w(S,E)?y?(d++,S=y.children[d],M=!1):S=null:(L.push(S),T.push(d),d=0,y=S,S=S.children[0])}return this},o.prototype.toBBox=function(f){return f},o.prototype.compareMinX=function(f,m){return f.minX-m.minX},o.prototype.compareMinY=function(f,m){return f.minY-m.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(f){return this.data=f,this},o.prototype._all=function(f,m){for(var d=[];f;)f.leaf?m.push.apply(m,f.children):d.push.apply(d,f.children),f=d.pop();return m},o.prototype._build=function(f,m,d,y){var M,S=d-m+1,E=this._maxEntries;if(S<=E)return a(M=A(f.slice(m,d+1)),this.toBBox),M;y||(y=Math.ceil(Math.log(S)/Math.log(E)),E=Math.ceil(S/Math.pow(E,y-1))),(M=A([])).leaf=!1,M.height=y;var L=Math.ceil(S/E),T=L*Math.ceil(Math.sqrt(E));D(f,m,d,T,this.compareMinX);for(var g=m;g<=d;g+=T){var _=Math.min(g+T-1,d);D(f,g,_,L,this.compareMinY);for(var X=g;X<=_;X+=L){var I=Math.min(X+L-1,_);M.children.push(this._build(f,X,I,y-1))}}return a(M,this.toBBox),M},o.prototype._chooseSubtree=function(f,m,d,y){for(;y.push(m),!m.leaf&&y.length-1!==d;){for(var M=1/0,S=1/0,E=void 0,L=0;L<m.children.length;L++){var T=m.children[L],g=k(T),_=(X=f,I=T,(Math.max(I.maxX,X.maxX)-Math.min(I.minX,X.minX))*(Math.max(I.maxY,X.maxY)-Math.min(I.minY,X.minY))-g);_<S?(S=_,M=g<M?g:M,E=T):_===S&&g<M&&(M=g,E=T)}m=E||m.children[0]}var X,I;return m},o.prototype._insert=function(f,m,d){var y=d?f:this.toBBox(f),M=[],S=this._chooseSubtree(y,this.data,m,M);for(S.children.push(f),u(S,y);m>=0&&M[m].children.length>this._maxEntries;)this._split(M,m),m--;this._adjustParentBBoxes(y,M,m)},o.prototype._split=function(f,m){var d=f[m],y=d.children.length,M=this._minEntries;this._chooseSplitAxis(d,M,y);var S=this._chooseSplitIndex(d,M,y),E=A(d.children.splice(S,d.children.length-S));E.height=d.height,E.leaf=d.leaf,a(d,this.toBBox),a(E,this.toBBox),m?f[m-1].children.push(E):this._splitRoot(d,E)},o.prototype._splitRoot=function(f,m){this.data=A([f,m]),this.data.height=f.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(f,m,d){for(var y,M,S,E,L,T,g,_=1/0,X=1/0,I=m;I<=d-m;I++){var N=s(f,0,I,this.toBBox),G=s(f,I,d,this.toBBox),te=(M=N,S=G,E=void 0,L=void 0,T=void 0,g=void 0,E=Math.max(M.minX,S.minX),L=Math.max(M.minY,S.minY),T=Math.min(M.maxX,S.maxX),g=Math.min(M.maxY,S.maxY),Math.max(0,T-E)*Math.max(0,g-L)),re=k(N)+k(G);te<_?(_=te,y=I,X=re<X?re:X):te===_&&re<X&&(X=re,y=I)}return y||d-m},o.prototype._chooseSplitAxis=function(f,m,d){var y=f.leaf?this.compareMinX:c,M=f.leaf?this.compareMinY:h;this._allDistMargin(f,m,d,y)<this._allDistMargin(f,m,d,M)&&f.children.sort(y)},o.prototype._allDistMargin=function(f,m,d,y){f.children.sort(y);for(var M=this.toBBox,S=s(f,0,m,M),E=s(f,d-m,d,M),L=b(S)+b(E),T=m;T<d-m;T++){var g=f.children[T];u(S,f.leaf?M(g):g),L+=b(S)}for(var _=d-m-1;_>=m;_--){var X=f.children[_];u(E,f.leaf?M(X):X),L+=b(E)}return L},o.prototype._adjustParentBBoxes=function(f,m,d){for(var y=d;y>=0;y--)u(m[y],f)},o.prototype._condense=function(f){for(var m=f.length-1,d=void 0;m>=0;m--)f[m].children.length===0?m>0?(d=f[m-1].children).splice(d.indexOf(f[m]),1):this.clear():a(f[m],this.toBBox)},o})})(Mn);var go=Mn.exports;const yo=mn(xi),Sn=mn(so);var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});var vo=Sn;function yr(n){var e=[1/0,1/0,-1/0,-1/0];return vo.coordEach(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}yr.default=yr;Lr.default=yr;var xe=go,Ln=yo,Cn=Sn,wt=Lr.default,_o=Cn.featureEach;Cn.coordEach;Ln.polygon;var Qr=Ln.featureCollection;function En(n){var e=new xe(n);return e.insert=function(t){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:wt(t),xe.prototype.insert.call(this,t)},e.load=function(t){var r=[];return Array.isArray(t)?t.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:wt(i),r.push(i)}):_o(t,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:wt(i),r.push(i)}),xe.prototype.load.call(this,r)},e.remove=function(t,r){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:wt(t),xe.prototype.remove.call(this,t,r)},e.clear=function(){return xe.prototype.clear.call(this)},e.search=function(t){var r=xe.prototype.search.call(this,this.toBBox(t));return Qr(r)},e.collides=function(t){return xe.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=xe.prototype.all.call(this);return Qr(t)},e.toJSON=function(){return xe.prototype.toJSON.call(this)},e.fromJSON=function(t){return xe.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var r;if(t.bbox)r=t.bbox;else if(Array.isArray(t)&&t.length===4)r=t;else if(Array.isArray(t)&&t.length===6)r=[t[0],t[1],t[3],t[4]];else if(t.type==="Feature")r=wt(t);else if(t.type==="FeatureCollection")r=wt(t);else throw new Error("invalid geojson");return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}},e}Sr.exports=En;Sr.exports.default=En;var bo=Sr.exports;const po=ti(bo);function wo(n,e){var t={},r=[];if(n.type==="LineString"&&(n=Je(n)),e.type==="LineString"&&(e=Je(e)),n.type==="Feature"&&e.type==="Feature"&&n.geometry!==null&&e.geometry!==null&&n.geometry.type==="LineString"&&e.geometry.type==="LineString"&&n.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var i=jr(n,e);return i&&r.push(i),gt(r)}var o=po();return o.load(Kr(e)),$t(Kr(n),function(l){$t(o.search(l),function(a){var s=jr(l,a);if(s){var u=kt(s).join(",");t[u]||(t[u]=!0,r.push(s))}})}),gt(r)}function jr(n,e){var t=kt(n),r=kt(e);if(t.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(r.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=t[0][0],o=t[0][1],l=t[1][0],a=t[1][1],s=r[0][0],u=r[0][1],c=r[1][0],h=r[1][1],k=(h-u)*(l-i)-(c-s)*(a-o),b=(c-s)*(o-u)-(h-u)*(i-s),w=(l-i)*(o-u)-(a-o)*(i-s);if(k===0)return null;var R=b/k,A=w/k;if(R>=0&&R<=1&&A>=0&&A<=1){var D=i+R*(l-i),f=o+R*(a-o);return Ze([D,f])}return null}function ko(n,e,t){t===void 0&&(t={});var r=Ze([1/0,1/0],{dist:1/0}),i=0;return St(n,function(o){for(var l=kt(o),a=0;a<l.length-1;a++){var s=Ze(l[a]);s.properties.dist=It(e,s,t);var u=Ze(l[a+1]);u.properties.dist=It(e,u,t);var c=It(s,u,t),h=Math.max(s.properties.dist,u.properties.dist),k=kn(s,u),b=Jr(e,h,k+90,t),w=Jr(e,h,k-90,t),R=wo(We([b.geometry.coordinates,w.geometry.coordinates]),We([s.geometry.coordinates,u.geometry.coordinates])),A=null;R.features.length>0&&(A=R.features[0],A.properties.dist=It(e,A,t),A.properties.location=i+It(s,A,t)),s.properties.dist<r.properties.dist&&(r=s,r.properties.index=a,r.properties.location=i),u.properties.dist<r.properties.dist&&(r=u,r.properties.index=a+1,r.properties.location=i+c),A&&A.properties.dist<r.properties.dist&&(r=A,r.properties.index=a),i+=c}}),r}const Mo=["==",["geometry-type"],"Polygon"],So=["==",["geometry-type"],"LineString"],Lo=["==",["geometry-type"],"Point"];function hr(n){return{type:"Feature",properties:{},geometry:{type:"Point",coordinates:Tn(n)}}}function Tn(n){return[Math.round(n[0]*1e7)/1e7,Math.round(n[1]*1e7)/1e7]}const Pn=Ke({type:"FeatureCollection",features:[]}),zn=Ke(0),Co=100;class Eo{constructor(e){Se(this,"map");Se(this,"active");Se(this,"eventListenersSuccess");Se(this,"eventListenersUpdated");Se(this,"eventListenersFailure");Se(this,"points");Se(this,"cursor");Se(this,"hover");Se(this,"dragFrom");Se(this,"previousStates");Se(this,"onMouseMove",e=>{if(this.active&&!this.dragFrom)this.recalculateHovering(e);else if(this.active&&this.dragFrom){if(this.hover=="polygon"){let t=this.dragFrom[0]-e.lngLat.lng,r=this.dragFrom[1]-e.lngLat.lat;for(let i of this.points)i[0]-=t,i[1]-=r}else this.points[this.hover]=e.lngLat.toArray();this.dragFrom=e.lngLat.toArray(),this.redraw()}});Se(this,"onClick",e=>{if(this.beforeUpdate(),this.active&&this.cursor){let t=[];if(xr(this.points).forEach((r,i)=>{t.push([i+1,ko(r,this.cursor).properties.dist])}),t.sort((r,i)=>r[1]-i[1]),t.length>0){let r=t[0][0];this.points.splice(r,0,this.cursor.geometry.coordinates),this.hover=r}else this.points.push(this.cursor.geometry.coordinates),this.hover=this.points.length-1;this.redraw(),this.pointsUpdated()}else this.active&&typeof this.hover=="number"&&(this.points.splice(this.hover,1),this.hover=null,this.redraw(),this.pointsUpdated(),this.recalculateHovering(e))});Se(this,"onDoubleClick",e=>{this.active&&(e.preventDefault(),this.cursor=hr(e.lngLat.toArray()),this.onClick(e),this.finish())});Se(this,"onMouseDown",e=>{this.active&&!this.dragFrom&&this.hover!=null&&(e.preventDefault(),this.cursor=null,this.dragFrom=e.lngLat.toArray(),this.beforeUpdate(),this.redraw())});Se(this,"onMouseUp",()=>{this.active&&this.dragFrom&&(this.dragFrom=null,this.redraw(),this.pointsUpdated())});Se(this,"onKeypress",e=>{this.active&&(e.key=="Enter"?(e.stopPropagation(),this.finish()):e.key=="z"&&e.ctrlKey&&this.undo())});Se(this,"onKeyDown",e=>{this.active&&e.key=="Escape"&&(e.stopPropagation(),this.cancel())});this.map=e,this.active=!1,this.eventListenersSuccess=[],this.eventListenersUpdated=[],this.eventListenersFailure=[],this.points=[],this.cursor=null,this.hover=null,this.dragFrom=null,this.previousStates=[],this.map.on("mousemove",this.onMouseMove),this.map.on("click",this.onClick),this.map.on("dblclick",this.onDoubleClick),this.map.on("mousedown",this.onMouseDown),this.map.on("mouseup",this.onMouseUp),document.addEventListener("keypress",this.onKeypress),document.addEventListener("keydown",this.onKeyDown)}tearDown(){this.map.off("mousemove",this.onMouseMove),this.map.off("click",this.onClick),this.map.off("dblclick",this.onDoubleClick),this.map.off("mousedown",this.onMouseDown),this.map.off("mouseup",this.onMouseUp),document.removeEventListener("keypress",this.onKeypress),document.removeEventListener("keydown",this.onKeyDown)}finish(){let e=this.polygonFeature();if(e)for(let t of this.eventListenersSuccess)t(e);else for(let t of this.eventListenersFailure)t();this.stop()}cancel(){for(let e of this.eventListenersFailure)e();this.stop()}addEventListenerSuccess(e){this.eventListenersSuccess.push(e)}addEventListenerUpdated(e){this.eventListenersUpdated.push(e)}addEventListenerFailure(e){this.eventListenersFailure.push(e)}clearEventListeners(){this.eventListenersSuccess=[],this.eventListenersUpdated=[],this.eventListenersFailure=[]}startNew(){this.active=!0,this.map.doubleClickZoom.disable()}editExisting(e){this.active=!0,this.map.doubleClickZoom.disable(),this.points=JSON.parse(JSON.stringify(e.geometry.coordinates[0])),this.points.pop(),this.redraw()}stop(){this.map.doubleClickZoom.enable(),this.points=[],this.cursor=null,this.active=!1,this.hover=null,this.dragFrom=null,this.previousStates=[],this.redraw(),this.map.getCanvas().style.cursor="inherit"}undo(){this.dragFrom!=null||this.previousStates.length==0||(this.points=this.previousStates.pop(),this.hover=null,this.redraw())}redraw(){let e={type:"FeatureCollection",features:[]};this.points.forEach((i,o)=>{let l=hr(i);l.properties.hover=this.hover==o,l.properties.idx=o,e.features.push(l)}),e.features=e.features.concat(xr(this.points));let t=this.polygonFeature();t&&(t.properties.hover=this.hover=="polygon",e.features.push(t)),Pn.set(e);let r="crosshair";this.hover!=null&&(r=this.dragFrom?"grabbing":"pointer"),this.map.getCanvas().style.cursor=r,zn.set(this.previousStates.length)}pointsUpdated(){let e=this.polygonFeature();if(e)for(let t of this.eventListenersUpdated)t(e)}recalculateHovering(e){this.cursor=null,this.hover=null;for(let t of this.map.queryRenderedFeatures(e.point,{layers:["edit-polygon-fill","edit-polygon-vertices"]}))if(t.geometry.type=="Polygon"){this.hover="polygon";break}else if(t.geometry.type=="Point"&&Object.hasOwn(t.properties,"idx")){this.hover=t.properties.idx;break}this.hover==null&&(this.cursor=hr(e.lngLat.toArray())),this.redraw()}polygonFeature(){if(this.points.length<3)return null;let e=this.points.map(Tn),t=[JSON.parse(JSON.stringify(e))];return t[0].push(JSON.parse(JSON.stringify(t[0][0]))),{type:"Feature",geometry:{type:"Polygon",coordinates:t},properties:{}}}beforeUpdate(){this.previousStates.push(JSON.parse(JSON.stringify(this.points))),this.previousStates.length>Co&&this.previousStates.shift()}}function xr(n){let e=[];for(let t=0;t<n.length-1;t++)e.push({type:"Feature",geometry:{type:"LineString",coordinates:[n[t],n[t+1]]},properties:{}});return n.length>=3&&e.push({type:"Feature",geometry:{type:"LineString",coordinates:[n[n.length-1],n[0]]},properties:{}}),e}let To=Date.now();function Dt(n){return`${n}-${To++}`}const Cr=Symbol.for("svelte-maplibre");function Ut(){return qn(Cr)}function Po(n){let e=new WeakMap;return t=>{var l;let r=e.get(t.originalEvent);if(r!==void 0)return r;let o=(l=t.target.queryRenderedFeatures(t.point).find(a=>{var s;return(s=n.get(a.layer.id))==null?void 0:s.interactive}))==null?void 0:l.layer.id;return e.set(t.originalEvent,o),o}}function zo(){let n=new Map;return cn(Cr,{map:Ke(null),source:cr(null),layer:cr(null),popupTarget:cr(null),cluster:Ke(),loadedImages:Ke(new Set),minzoom:Ke(0),maxzoom:Ke(24),layerEvent:Ke(null),layerInfo:n,eventTopMost:Po(n)})}function $r(n){return{subscribe:n.subscribe}}function Bn({key:n,setPopupTarget:e=!1,setCluster:t=!1,setMouseEvent:r=!1}){let i=Ut(),o=Ke(null),l=$r(o),a={...i,[n]:$r(o)};if(e&&(a.popupTarget=l),r){let s=Ke(null);a.layerEvent=s,i.layerEvent=s}return t&&(a.cluster=Ke()),cn(Cr,a),{...i,self:o}}function Bo(){return Bn({key:"source",setCluster:!0})}function Ao(n=!0){return Bn({key:"layer",setPopupTarget:n,setMouseEvent:n})}function en(n){let e;return t=>{if(t)for(let r in t){let i=e==null?void 0:e[r],o=t[r];i!==o&&n(r,o,i)}else if(e)for(let r in e)n(r,void 0,e[r]);e=t}}function Io(n,...e){let t=[n];for(let r of e)if(r)Array.isArray(r)&&r[0]===n?t.push(...r.slice(1)):t.push(r);else continue;if(t.length!==1)return t.length===2?t[1]:t}function Fo(n){return n===!0?["has","point_count"]:n===!1?["!",["has","point_count"]]:void 0}var er=Oo;function Oo(n){var e,t,r;if(n){if(Array.isArray(n)){for(e=[],t=n.length,r=0;r<t;r++){var i=n[r];i!=null&&e.push(i)}return e}if(typeof n=="object"){e={};var o=Object.keys(n);for(t=o.length,r=0;r<t;r++){var l=o[r],a=n[l];a!=null&&(e[l]=a)}return e}}}function tn(n){let e=n[0],t,r,i=rn(n);return{c(){i.c(),t=Oe()},l(o){i.l(o),t=Oe()},m(o,l){i.m(o,l),Z(o,t,l),r=!0},p(o,l){l[0]&1&&he(e,e=o[0])?(Ge(),O(i,1,1,fe),He(),i=rn(o),i.c(),B(i,1),i.m(t.parentNode,t)):i.p(o,l)},i(o){r||(B(i),r=!0)},o(o){O(i),r=!1},d(o){o&&P(t),i.d(o)}}}function rn(n){let e;const t=n[36].default,r=at(t,n,n[35],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o[1]&16)&&st(r,t,i,i[35],e?ft(t,i[35],o,null):ut(i[35]),null)},i(i){e||(B(r,i),e=!0)},o(i){O(r,i),e=!1},d(i){r&&r.d(i)}}}function Ro(n){let e,t,r=n[0]&&tn(n);return{c(){r&&r.c(),e=Oe()},l(i){r&&r.l(i),e=Oe()},m(i,o){r&&r.m(i,o),Z(i,e,o),t=!0},p(i,o){i[0]?r?(r.p(i,o),o[0]&1&&B(r,1)):(r=tn(i),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(Ge(),O(r,1,1,()=>{r=null}),He())},i(i){t||(B(r),t=!0)},o(i){O(r),t=!1},d(i){i&&P(e),r&&r.d(i)}}}function Do(n,e,t){let r,i,o,l,a,s,u,c,h,k,b,w,{$$slots:R={},$$scope:A}=e,{id:D=Dt("layer")}=e,{source:f=void 0}=e,{sourceLayer:m=void 0}=e,{beforeId:d=void 0}=e,{beforeLayerType:y=void 0}=e,{type:M}=e,{paint:S=void 0}=e,{layout:E=void 0}=e,{filter:L=void 0}=e,{applyToClusters:T=void 0}=e,{minzoom:g=void 0}=e,{maxzoom:_=void 0}=e,{manageHoverState:X=!1}=e,{hovered:I=null}=e,{interactive:N=!0}=e,{hoverCursor:G=void 0}=e,{eventsIfTopMost:te=!1}=e;const re=_r(),{map:me,source:ge,self:ue,minzoom:se,maxzoom:Re,eventTopMost:be,layerInfo:De}=Ao();Te(n,me,p=>t(31,h=p)),Te(n,ge,p=>t(32,k=p)),Te(n,ue,p=>t(0,c=p)),Te(n,se,p=>t(34,w=p)),Te(n,Re,p=>t(33,b=p)),ot(()=>{c&&h&&(De.delete(c),h==null||h.removeLayer(c))});let we;function ye(p){var ce,ie;if(!N||!c||!h||te&&be(p)!==c)return;let Q=p.features??[],Y=(ie=(ce=Q[0])==null?void 0:ce.properties)==null?void 0:ie.cluster_id,ke={event:p,map:h,clusterId:Y,layer:c,source:a,features:Q};re(p.type,ke)}function z(p){var ce,ie;if(!N||!c||!h||te&&be(p)!==c)return;G&&(h.getCanvas().style.cursor=G);let Q=p.features??[];t(6,I=Q[0]??null);let Y=(ie=(ce=Q[0])==null?void 0:ce.properties)==null?void 0:ie.cluster_id;re("mouseenter",{event:p,map:h,clusterId:Y,layer:c,source:a,features:Q})}function H(p){var ce,ie,Be;if(!N||!h)return;if(te&&be(p)!==c){t(6,I=null),X&&we!==void 0&&(h==null||h.setFeatureState({source:a,sourceLayer:m,id:we},{hover:!1}),we=void 0);return}h.getCanvas().style.cursor=G;let Q=p.features??[],Y=(ie=(ce=Q[0])==null?void 0:ce.properties)==null?void 0:ie.cluster_id,ke=(Be=Q[0])==null?void 0:Be.id;ke!==we&&(X&&(we!==void 0&&(h==null||h.setFeatureState({source:a,id:we,sourceLayer:m},{hover:!1})),h==null||h.setFeatureState({source:a,id:ke,sourceLayer:m},{hover:!0})),we=ke,t(6,I=Q[0]??null)),re("mousemove",{event:p,map:h,clusterId:Y,layer:c,source:a,features:Q})}function le(p){if(!(!N||!c||!h)){if(G&&(h.getCanvas().style.cursor=""),t(6,I=null),X&&we!==void 0){const Q={source:a,id:we,sourceLayer:m};h==null||h.setFeatureState(Q,{hover:!1}),we=void 0}re("mouseleave",{map:h,layer:c,source:a})}}let Ne=!0;function qe(p){h&&(h.off("click",p,ye),h.off("dblclick",p,ye),h.off("contextmenu",p,ye),h.off("mouseenter",p,z),h.off("mousemove",p,H),h.off("mouseleave",p,le))}return ot(()=>{h&&c&&qe(c)}),n.$$set=p=>{"id"in p&&t(7,D=p.id),"source"in p&&t(8,f=p.source),"sourceLayer"in p&&t(9,m=p.sourceLayer),"beforeId"in p&&t(10,d=p.beforeId),"beforeLayerType"in p&&t(11,y=p.beforeLayerType),"type"in p&&t(12,M=p.type),"paint"in p&&t(13,S=p.paint),"layout"in p&&t(14,E=p.layout),"filter"in p&&t(15,L=p.filter),"applyToClusters"in p&&t(16,T=p.applyToClusters),"minzoom"in p&&t(17,g=p.minzoom),"maxzoom"in p&&t(18,_=p.maxzoom),"manageHoverState"in p&&t(19,X=p.manageHoverState),"hovered"in p&&t(6,I=p.hovered),"interactive"in p&&t(20,N=p.interactive),"hoverCursor"in p&&t(21,G=p.hoverCursor),"eventsIfTopMost"in p&&t(22,te=p.eventsIfTopMost),"$$scope"in p&&t(35,A=p.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&65536&&t(30,r=Fo(T)),n.$$.dirty[0]&1073774592&&t(24,i=Io("all",r,L)),n.$$.dirty[0]&131072|n.$$.dirty[1]&8&&t(26,o=g??w),n.$$.dirty[0]&262144|n.$$.dirty[1]&4&&t(25,l=_??b),n.$$.dirty[0]&256|n.$$.dirty[1]&2&&t(29,a=f||k),n.$$.dirty[0]&654343809|n.$$.dirty[1]&1&&h&&c!==D&&a){c&&(qe(c),De.delete(c));let p=d;if(!d&&y){let Q=h.getStyle().layers,Y=typeof y=="function"?y:ce=>ce.type===y,ke=Q==null?void 0:Q.find(Y);ke&&(p=ke.id)}it(ue,c=D,c),h.addLayer(er({id:c,type:M,source:a,"source-layer":m,filter:i,paint:S,layout:E,minzoom:o,maxzoom:l}),p),t(23,Ne=!0),h.on("click",c,ye),h.on("dblclick",c,ye),h.on("contextmenu",c,ye),h.on("mouseenter",c,z),h.on("mousemove",c,H),h.on("mouseleave",c,le)}n.$$.dirty[0]&1048577&&c&&De.set(c,{interactive:N}),n.$$.dirty[0]&1|n.$$.dirty[1]&1&&t(28,s=c?en((p,Q)=>h==null?void 0:h.setPaintProperty(c,p,Q)):void 0),n.$$.dirty[0]&1|n.$$.dirty[1]&1&&t(27,u=c?en((p,Q)=>h==null?void 0:h.setLayoutProperty(c,p,Q)):void 0),n.$$.dirty[0]&268443648&&(s==null||s(S)),n.$$.dirty[0]&134234112&&(u==null||u(E)),n.$$.dirty[0]&100663297|n.$$.dirty[1]&1&&c&&(h==null||h.setLayerZoomRange(c,o,l)),n.$$.dirty[0]&25165825|n.$$.dirty[1]&1&&c&&(Ne?t(23,Ne=!1):h==null||h.setFilter(c,i))},[c,me,ge,ue,se,Re,I,D,f,m,d,y,M,S,E,L,T,g,_,X,N,G,te,Ne,i,l,o,u,s,a,r,h,k,b,w,A,R]}class Er extends ve{constructor(e){super(),_e(this,e,Do,Ro,he,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,interactive:20,hoverCursor:21,eventsIfTopMost:22},null,[-1,-1])}}function Uo(n){let e;const t=n[16].default,r=at(t,n,n[24],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&16777216)&&st(r,t,i,i[24],e?ft(t,i[24],o,null):ut(i[24]),null)},i(i){e||(B(r,i),e=!0)},o(i){O(r,i),e=!1},d(i){r&&r.d(i)}}}function No(n){let e,t,r;function i(l){n[17](l)}let o={id:n[1],type:"circle",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],applyToClusters:n[9],minzoom:n[10],maxzoom:n[11],hoverCursor:n[12],manageHoverState:n[13],eventsIfTopMost:n[14],interactive:n[15],$$slots:{default:[Uo]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.hovered=n[0]),e=new Er({props:o}),Me.push(()=>Ee(e,"hovered",i)),e.$on("click",n[18]),e.$on("dblclick",n[19]),e.$on("contextmenu",n[20]),e.$on("mouseenter",n[21]),e.$on("mousemove",n[22]),e.$on("mouseleave",n[23]),{c(){W(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,a){J(e,l,a),r=!0},p(l,[a]){const s={};a&2&&(s.id=l[1]),a&4&&(s.source=l[2]),a&8&&(s.sourceLayer=l[3]),a&16&&(s.beforeId=l[4]),a&32&&(s.beforeLayerType=l[5]),a&64&&(s.paint=l[6]),a&128&&(s.layout=l[7]),a&256&&(s.filter=l[8]),a&512&&(s.applyToClusters=l[9]),a&1024&&(s.minzoom=l[10]),a&2048&&(s.maxzoom=l[11]),a&4096&&(s.hoverCursor=l[12]),a&8192&&(s.manageHoverState=l[13]),a&16384&&(s.eventsIfTopMost=l[14]),a&32768&&(s.interactive=l[15]),a&16777216&&(s.$$scope={dirty:a,ctx:l}),!t&&a&1&&(t=!0,s.hovered=l[0],Ce(()=>t=!1)),e.$set(s)},i(l){r||(B(e.$$.fragment,l),r=!0)},o(l){O(e.$$.fragment,l),r=!1},d(l){K(e,l)}}}function Zo(n,e,t){let{$$slots:r={},$$scope:i}=e,{id:o=Dt("circle")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:c}=e,{layout:h=void 0}=e,{filter:k=void 0}=e,{applyToClusters:b=void 0}=e,{minzoom:w=void 0}=e,{maxzoom:R=void 0}=e,{hoverCursor:A=void 0}=e,{manageHoverState:D=!1}=e,{hovered:f=null}=e,{eventsIfTopMost:m=!1}=e,{interactive:d=!0}=e;function y(_){f=_,t(0,f)}function M(_){pe.call(this,n,_)}function S(_){pe.call(this,n,_)}function E(_){pe.call(this,n,_)}function L(_){pe.call(this,n,_)}function T(_){pe.call(this,n,_)}function g(_){pe.call(this,n,_)}return n.$$set=_=>{"id"in _&&t(1,o=_.id),"source"in _&&t(2,l=_.source),"sourceLayer"in _&&t(3,a=_.sourceLayer),"beforeId"in _&&t(4,s=_.beforeId),"beforeLayerType"in _&&t(5,u=_.beforeLayerType),"paint"in _&&t(6,c=_.paint),"layout"in _&&t(7,h=_.layout),"filter"in _&&t(8,k=_.filter),"applyToClusters"in _&&t(9,b=_.applyToClusters),"minzoom"in _&&t(10,w=_.minzoom),"maxzoom"in _&&t(11,R=_.maxzoom),"hoverCursor"in _&&t(12,A=_.hoverCursor),"manageHoverState"in _&&t(13,D=_.manageHoverState),"hovered"in _&&t(0,f=_.hovered),"eventsIfTopMost"in _&&t(14,m=_.eventsIfTopMost),"interactive"in _&&t(15,d=_.interactive),"$$scope"in _&&t(24,i=_.$$scope)},[f,o,l,a,s,u,c,h,k,b,w,R,A,D,m,d,r,y,M,S,E,L,T,g,i]}class qo extends ve{constructor(e){super(),_e(this,e,Zo,No,he,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Xo(n){let e;const t=n[15].default,r=at(t,n,n[23],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8388608)&&st(r,t,i,i[23],e?ft(t,i[23],o,null):ut(i[23]),null)},i(i){e||(B(r,i),e=!0)},o(i){O(r,i),e=!1},d(i){r&&r.d(i)}}}function Yo(n){let e,t,r;function i(l){n[16](l)}let o={id:n[1],type:"fill",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],minzoom:n[9],maxzoom:n[10],hoverCursor:n[11],manageHoverState:n[12],eventsIfTopMost:n[13],interactive:n[14],$$slots:{default:[Xo]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.hovered=n[0]),e=new Er({props:o}),Me.push(()=>Ee(e,"hovered",i)),e.$on("click",n[17]),e.$on("dblclick",n[18]),e.$on("contextmenu",n[19]),e.$on("mouseenter",n[20]),e.$on("mousemove",n[21]),e.$on("mouseleave",n[22]),{c(){W(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,a){J(e,l,a),r=!0},p(l,[a]){const s={};a&2&&(s.id=l[1]),a&4&&(s.source=l[2]),a&8&&(s.sourceLayer=l[3]),a&16&&(s.beforeId=l[4]),a&32&&(s.beforeLayerType=l[5]),a&64&&(s.paint=l[6]),a&128&&(s.layout=l[7]),a&256&&(s.filter=l[8]),a&512&&(s.minzoom=l[9]),a&1024&&(s.maxzoom=l[10]),a&2048&&(s.hoverCursor=l[11]),a&4096&&(s.manageHoverState=l[12]),a&8192&&(s.eventsIfTopMost=l[13]),a&16384&&(s.interactive=l[14]),a&8388608&&(s.$$scope={dirty:a,ctx:l}),!t&&a&1&&(t=!0,s.hovered=l[0],Ce(()=>t=!1)),e.$set(s)},i(l){r||(B(e.$$.fragment,l),r=!0)},o(l){O(e.$$.fragment,l),r=!1},d(l){K(e,l)}}}function Go(n,e,t){let{$$slots:r={},$$scope:i}=e,{id:o=Dt("fill")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:c}=e,{layout:h=void 0}=e,{filter:k=void 0}=e,{minzoom:b=void 0}=e,{maxzoom:w=void 0}=e,{hoverCursor:R=void 0}=e,{manageHoverState:A=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:f=!1}=e,{interactive:m=!0}=e;function d(g){D=g,t(0,D)}function y(g){pe.call(this,n,g)}function M(g){pe.call(this,n,g)}function S(g){pe.call(this,n,g)}function E(g){pe.call(this,n,g)}function L(g){pe.call(this,n,g)}function T(g){pe.call(this,n,g)}return n.$$set=g=>{"id"in g&&t(1,o=g.id),"source"in g&&t(2,l=g.source),"sourceLayer"in g&&t(3,a=g.sourceLayer),"beforeId"in g&&t(4,s=g.beforeId),"beforeLayerType"in g&&t(5,u=g.beforeLayerType),"paint"in g&&t(6,c=g.paint),"layout"in g&&t(7,h=g.layout),"filter"in g&&t(8,k=g.filter),"minzoom"in g&&t(9,b=g.minzoom),"maxzoom"in g&&t(10,w=g.maxzoom),"hoverCursor"in g&&t(11,R=g.hoverCursor),"manageHoverState"in g&&t(12,A=g.manageHoverState),"hovered"in g&&t(0,D=g.hovered),"eventsIfTopMost"in g&&t(13,f=g.eventsIfTopMost),"interactive"in g&&t(14,m=g.interactive),"$$scope"in g&&t(23,i=g.$$scope)},[D,o,l,a,s,u,c,h,k,b,w,R,A,f,m,r,d,y,M,S,E,L,T,i]}class An extends ve{constructor(e){super(),_e(this,e,Go,Yo,he,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function Ho(n,e,t){let r;const{map:i}=Ut();Te(n,i,s=>t(4,r=s));let{position:o="top-left"}=e,{container:l=void 0}=e,a=null;return ot(()=>{r!=null&&r.loaded()&&a&&r.removeControl(a)}),n.$$set=s=>{"position"in s&&t(1,o=s.position),"container"in s&&t(2,l=s.container)},n.$$.update=()=>{if(n.$$.dirty&30&&r&&!a){let s;typeof l=="string"?s=document.querySelector(l)??void 0:s=l,t(3,a=new Mt.FullscreenControl({container:s})),r.addControl(a,o)}},[i,o,l,a,r]}class Wo extends ve{constructor(e){super(),_e(this,e,Ho,null,he,{position:1,container:2})}}function Vo(n,e,t,r,i){let o=!1;n.getSource(e)&&(o=!0,n.removeSource(e));const l=()=>{r(e)&&(n.addSource(e,t),i())};if(o){const a=()=>{e&&(n.getSource(e)?setTimeout(a,1):l())};a()}else l()}function Jo(n,e,t){Xn().then(()=>{let r=Yn(n);if(!r)return;r.getSource(e)===t&&r.removeSource(e)})}function nn(n){let e=n[0],t,r,i=on(n);return{c(){i.c(),t=Oe()},l(o){i.l(o),t=Oe()},m(o,l){i.m(o,l),Z(o,t,l),r=!0},p(o,l){l&1&&he(e,e=o[0])?(Ge(),O(i,1,1,fe),He(),i=on(o),i.c(),B(i,1),i.m(t.parentNode,t)):i.p(o,l)},i(o){r||(B(i),r=!0)},o(o){O(i),r=!1},d(o){o&&P(t),i.d(o)}}}function on(n){let e;const t=n[15].default,r=at(t,n,n[14],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&16384)&&st(r,t,i,i[14],e?ft(t,i[14],o,null):ut(i[14]),null)},i(i){e||(B(r,i),e=!0)},o(i){O(r,i),e=!1},d(i){r&&r.d(i)}}}function Ko(n){let e,t,r=n[0]&&nn(n);return{c(){r&&r.c(),e=Oe()},l(i){r&&r.l(i),e=Oe()},m(i,o){r&&r.m(i,o),Z(i,e,o),t=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&B(r,1)):(r=nn(i),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(Ge(),O(r,1,1,()=>{r=null}),He())},i(i){t||(B(r),t=!0)},o(i){O(r),t=!1},d(i){i&&P(e),r&&r.d(i)}}}function Qo(n,e,t){let r,i,o,{$$slots:l={},$$scope:a}=e,{id:s=Dt("geojson")}=e,{data:u}=e,{generateId:c=!1}=e,{promoteId:h=void 0}=e,{filter:k=void 0}=e,{lineMetrics:b=void 0}=e,{cluster:w=void 0}=e;const{map:R,cluster:A,self:D}=Bo();Te(n,R,d=>t(13,i=d)),Te(n,A,d=>t(16,o=d)),Te(n,D,d=>t(0,r=d));let f,m=!0;return ot(()=>{r&&f&&i&&(Jo(R,r,f),it(D,r=null,r),t(11,f=void 0))}),n.$$set=d=>{"id"in d&&t(4,s=d.id),"data"in d&&t(5,u=d.data),"generateId"in d&&t(6,c=d.generateId),"promoteId"in d&&t(7,h=d.promoteId),"filter"in d&&t(8,k=d.filter),"lineMetrics"in d&&t(9,b=d.lineMetrics),"cluster"in d&&t(10,w=d.cluster),"$$scope"in d&&t(14,a=d.$$scope)},n.$$.update=()=>{n.$$.dirty&1024&&it(A,o=w,o),n.$$.dirty&12273&&i&&r!==s&&(it(D,r=s,r),Vo(i,r,er({type:"geojson",data:u,filter:k,lineMetrics:b,generateId:c,promoteId:h,cluster:!!w,clusterMinPoints:w==null?void 0:w.minPoints,clusterMaxZoom:w==null?void 0:w.maxZoom,clusterRadius:w==null?void 0:w.radius,clusterProperties:w==null?void 0:w.properties}),d=>i&&d===r,()=>{r&&(t(11,f=i==null?void 0:i.getSource(r)),t(12,m=!0))})),n.$$.dirty&8208&&(i==null||i.on("style.load",()=>{t(11,f=i==null?void 0:i.getSource(s))})),n.$$.dirty&6176&&f&&(m?t(12,m=!1):f.setData(u)),n.$$.dirty&3072&&(f==null||f.setClusterOptions(er({cluster:!!w,clusterMaxZoom:w==null?void 0:w.maxZoom,clusterRadius:w==null?void 0:w.radius})))},[r,R,A,D,s,u,c,h,k,b,w,f,m,i,a,l]}class In extends ve{constructor(e){super(),_e(this,e,Qo,Ko,he,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}function jo(n,e,t){let r;const{map:i}=Ut();Te(n,i,k=>t(8,r=k));let{position:o="top-left"}=e,{positionOptions:l=void 0}=e,{fitBoundsOptions:a=void 0}=e,{trackUserLocation:s=!1}=e,{showAccuracyCircle:u=!0}=e,{showUserLocation:c=!0}=e,h=null;return ot(()=>{r!=null&&r.loaded()&&h&&r.removeControl(h)}),n.$$set=k=>{"position"in k&&t(1,o=k.position),"positionOptions"in k&&t(2,l=k.positionOptions),"fitBoundsOptions"in k&&t(3,a=k.fitBoundsOptions),"trackUserLocation"in k&&t(4,s=k.trackUserLocation),"showAccuracyCircle"in k&&t(5,u=k.showAccuracyCircle),"showUserLocation"in k&&t(6,c=k.showUserLocation)},n.$$.update=()=>{n.$$.dirty&510&&r&&!h&&(t(7,h=new Mt.GeolocateControl({positionOptions:l,fitBoundsOptions:a,trackUserLocation:s,showAccuracyCircle:u,showUserLocation:c})),r.addControl(h,o))},[i,o,l,a,s,u,c,h,r]}class xo extends ve{constructor(e){super(),_e(this,e,jo,null,he,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function $o(n){let e;const t=n[15].default,r=at(t,n,n[23],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&8388608)&&st(r,t,i,i[23],e?ft(t,i[23],o,null):ut(i[23]),null)},i(i){e||(B(r,i),e=!0)},o(i){O(r,i),e=!1},d(i){r&&r.d(i)}}}function el(n){let e,t,r;function i(l){n[16](l)}let o={id:n[1],type:"line",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],minzoom:n[9],maxzoom:n[10],hoverCursor:n[11],manageHoverState:n[12],eventsIfTopMost:n[13],interactive:n[14],$$slots:{default:[$o]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.hovered=n[0]),e=new Er({props:o}),Me.push(()=>Ee(e,"hovered",i)),e.$on("click",n[17]),e.$on("dblclick",n[18]),e.$on("contextmenu",n[19]),e.$on("mouseenter",n[20]),e.$on("mousemove",n[21]),e.$on("mouseleave",n[22]),{c(){W(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,a){J(e,l,a),r=!0},p(l,[a]){const s={};a&2&&(s.id=l[1]),a&4&&(s.source=l[2]),a&8&&(s.sourceLayer=l[3]),a&16&&(s.beforeId=l[4]),a&32&&(s.beforeLayerType=l[5]),a&64&&(s.paint=l[6]),a&128&&(s.layout=l[7]),a&256&&(s.filter=l[8]),a&512&&(s.minzoom=l[9]),a&1024&&(s.maxzoom=l[10]),a&2048&&(s.hoverCursor=l[11]),a&4096&&(s.manageHoverState=l[12]),a&8192&&(s.eventsIfTopMost=l[13]),a&16384&&(s.interactive=l[14]),a&8388608&&(s.$$scope={dirty:a,ctx:l}),!t&&a&1&&(t=!0,s.hovered=l[0],Ce(()=>t=!1)),e.$set(s)},i(l){r||(B(e.$$.fragment,l),r=!0)},o(l){O(e.$$.fragment,l),r=!1},d(l){K(e,l)}}}function tl(n,e,t){let{$$slots:r={},$$scope:i}=e,{id:o=Dt("line")}=e,{source:l=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:c}=e,{layout:h=void 0}=e,{filter:k=void 0}=e,{minzoom:b=void 0}=e,{maxzoom:w=void 0}=e,{hoverCursor:R=void 0}=e,{manageHoverState:A=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:f=!1}=e,{interactive:m=!0}=e;function d(g){D=g,t(0,D)}function y(g){pe.call(this,n,g)}function M(g){pe.call(this,n,g)}function S(g){pe.call(this,n,g)}function E(g){pe.call(this,n,g)}function L(g){pe.call(this,n,g)}function T(g){pe.call(this,n,g)}return n.$$set=g=>{"id"in g&&t(1,o=g.id),"source"in g&&t(2,l=g.source),"sourceLayer"in g&&t(3,a=g.sourceLayer),"beforeId"in g&&t(4,s=g.beforeId),"beforeLayerType"in g&&t(5,u=g.beforeLayerType),"paint"in g&&t(6,c=g.paint),"layout"in g&&t(7,h=g.layout),"filter"in g&&t(8,k=g.filter),"minzoom"in g&&t(9,b=g.minzoom),"maxzoom"in g&&t(10,w=g.maxzoom),"hoverCursor"in g&&t(11,R=g.hoverCursor),"manageHoverState"in g&&t(12,A=g.manageHoverState),"hovered"in g&&t(0,D=g.hovered),"eventsIfTopMost"in g&&t(13,f=g.eventsIfTopMost),"interactive"in g&&t(14,m=g.interactive),"$$scope"in g&&t(23,i=g.$$scope)},[D,o,l,a,s,u,c,h,k,b,w,R,A,f,m,r,d,y,M,S,E,L,T,i]}class rl extends ve{constructor(e){super(),_e(this,e,tl,el,he,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function nl(n){let e=n.getCenter(),t=Math.round(n.getZoom()*100)/100,r=Math.ceil((t*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lat*i)/i,l=Math.round(e.lng*i)/i,a=`${t}/${o}/${l}`,s=n.getBearing(),u=n.getPitch();return(s||u)&&(a+=`/${Math.round(s*10)/10}`),u&&(a+=`/${Math.round(u)}`),`#${a}`}function il(n){return n.replace("#","").split("/").map(parseFloat)}var Kt=Tr;function Tr(n,e){return n===e||n!==n&&e!==e?!0:typeof n!=typeof e||{}.toString.call(n)!={}.toString.call(e)||n!==Object(n)||!n?!1:Array.isArray(n)?ln(n,e):{}.toString.call(n)=="[object Set]"?ln(Array.from(n),Array.from(e)):{}.toString.call(n)=="[object Object]"?ll(n,e):ol(n,e)}function ol(n,e){return n.toString()===e.toString()}function ln(n,e){var t=n.length;if(t!=e.length)return!1;for(var r=0;r<t;r++)if(!Tr(n[r],e[r]))return!1;return!0}function ll(n,e){var t=Object.keys(n),r=t.length;if(r!=Object.keys(e).length)return!1;for(var i=0;i<r;i++){var o=t[i];if(!(e.hasOwnProperty(o)&&Tr(n[o],e[o])))return!1}return!0}function al(n,e,t){let r;const{map:i}=Ut();Te(n,i,c=>t(6,r=c));let{position:o="top-left"}=e,{showCompass:l=!0}=e,{showZoom:a=!0}=e,{visualizePitch:s=!1}=e,u=null;return ot(()=>{r!=null&&r.loaded()&&u&&r.removeControl(u)}),n.$$set=c=>{"position"in c&&t(1,o=c.position),"showCompass"in c&&t(2,l=c.showCompass),"showZoom"in c&&t(3,a=c.showZoom),"visualizePitch"in c&&t(4,s=c.visualizePitch)},n.$$.update=()=>{n.$$.dirty&126&&r&&!u&&(t(5,u=new Mt.NavigationControl({showCompass:l,showZoom:a,visualizePitch:s})),r.addControl(u,o))},[i,o,l,a,s,u,r]}class sl extends ve{constructor(e){super(),_e(this,e,al,null,he,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function ul(n,e,t){let r;const{map:i}=Ut();Te(n,i,u=>t(5,r=u));let{position:o="bottom-left"}=e,{maxWidth:l=void 0}=e,{unit:a="metric"}=e,s=null;return ot(()=>{r!=null&&r.loaded()&&s&&r.removeControl(s)}),n.$$set=u=>{"position"in u&&t(1,o=u.position),"maxWidth"in u&&t(2,l=u.maxWidth),"unit"in u&&t(3,a=u.unit)},n.$$.update=()=>{n.$$.dirty&62&&r&&!s&&(t(4,s=new Mt.ScaleControl({maxWidth:l,unit:a})),r.addControl(s,o))},[i,o,l,a,s,r]}class fl extends ve{constructor(e){super(),_e(this,e,ul,null,he,{position:1,maxWidth:2,unit:3})}}const cl=n=>({map:n[0]&8,loadedImages:n[0]&16,allImagesLoaded:n[0]&32}),an=n=>({map:n[3],loadedImages:n[4],allImagesLoaded:n[5]});function sn(n){let e,t,r=n[2]&&un(n);const i=n[36].default,o=at(i,n,n[35],an);return{c(){r&&r.c(),e=j(),o&&o.c()},l(l){r&&r.l(l),e=x(l),o&&o.l(l)},m(l,a){r&&r.m(l,a),Z(l,e,a),o&&o.m(l,a),t=!0},p(l,a){l[2]?r?(r.p(l,a),a[0]&4&&B(r,1)):(r=un(l),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(Ge(),O(r,1,1,()=>{r=null}),He()),o&&o.p&&(!t||a[0]&56|a[1]&16)&&st(o,i,l,l[35],t?ft(i,l[35],a,cl):ut(l[35]),an)},i(l){t||(B(r),B(o,l),t=!0)},o(l){O(r),O(o,l),t=!1},d(l){l&&P(e),r&&r.d(l),o&&o.d(l)}}}function un(n){let e,t,r,i,o,l,a,s;return e=new sl({props:{position:n[6]}}),r=new xo({props:{position:n[6],fitBoundsOptions:{maxZoom:12}}}),o=new Wo({props:{position:n[6]}}),a=new fl({props:{position:n[6]}}),{c(){W(e.$$.fragment),t=j(),W(r.$$.fragment),i=j(),W(o.$$.fragment),l=j(),W(a.$$.fragment)},l(u){V(e.$$.fragment,u),t=x(u),V(r.$$.fragment,u),i=x(u),V(o.$$.fragment,u),l=x(u),V(a.$$.fragment,u)},m(u,c){J(e,u,c),Z(u,t,c),J(r,u,c),Z(u,i,c),J(o,u,c),Z(u,l,c),J(a,u,c),s=!0},p(u,c){const h={};c[0]&64&&(h.position=u[6]),e.$set(h);const k={};c[0]&64&&(k.position=u[6]),r.$set(k);const b={};c[0]&64&&(b.position=u[6]),o.$set(b);const w={};c[0]&64&&(w.position=u[6]),a.$set(w)},i(u){s||(B(e.$$.fragment,u),B(r.$$.fragment,u),B(o.$$.fragment,u),B(a.$$.fragment,u),s=!0)},o(u){O(e.$$.fragment,u),O(r.$$.fragment,u),O(o.$$.fragment,u),O(a.$$.fragment,u),s=!1},d(u){u&&(P(t),P(i),P(l)),K(e,u),K(r,u),K(o,u),K(a,u)}}}function ml(n){let e,t,r,i,o,l=n[3]&&n[0]&&sn(n);return{c(){e=$("div"),l&&l.c(),this.h()},l(a){e=ee(a,"DIV",{class:!0});var s=oe(e);l&&l.l(s),s.forEach(P),this.h()},h(){C(e,"class",t=jt(n[1])+" svelte-p00lfq"),$e(e,"expand-map",!n[1])},m(a,s){Z(a,e,s),l&&l.m(e,null),r=!0,i||(o=Gn(n[9].call(null,e)),i=!0)},p(a,s){a[3]&&a[0]?l?(l.p(a,s),s[0]&9&&B(l,1)):(l=sn(a),l.c(),B(l,1),l.m(e,null)):l&&(Ge(),O(l,1,1,()=>{l=null}),He()),(!r||s[0]&2&&t!==(t=jt(a[1])+" svelte-p00lfq"))&&C(e,"class",t),(!r||s[0]&2)&&$e(e,"expand-map",!a[1])},i(a){r||(B(l),r=!0)},o(a){O(l),r=!1},d(a){a&&P(e),l&&l.d(),i=!1,o()}}}function hl(n,e,t){let r,i,o,l,{$$slots:a={},$$scope:s}=e,{map:u=null}=e,{class:c=void 0}=e,{style:h}=e,{diffStyleUpdates:k=!1}=e,{center:b=void 0}=e,{zoom:w=void 0}=e,{pitch:R=0}=e,{bearing:A=0}=e,{bounds:D=void 0}=e,{hash:f=!1}=e,{loaded:m=!1}=e,{minZoom:d=0}=e,{maxZoom:y=22}=e,{zoomOnDoubleClick:M=!0}=e,{locale:S=void 0}=e,{interactive:E=!0}=e,{attributionControl:L=!0}=e,{cooperativeGestures:T=!1}=e,{preserveDrawingBuffer:g=!1}=e,{maxBounds:_=void 0}=e,{images:X=[]}=e,{standardControls:I=!1}=e,{filterLayers:N=void 0}=e,{transformRequest:G=void 0}=e;const te=_r(),{map:re,loadedImages:me}=zo();Te(n,re,z=>t(3,o=z)),Te(n,me,z=>t(4,l=z));let ge=new Set;async function ue(z,H=!1){if(o&&!(!o.loaded()&&!H))if("url"in z){ge.add(z.id);try{let le=await o.loadImage(z.url);o==null||o.addImage(z.id,le.data,z.options),l.add(z.id),me.set(l)}catch(le){te("error",le)}finally{ge.delete(z.id)}}else o.addImage(z.id,z.data,z.options),l.add(z.id),me.set(l)}let se,Re,be,De;function we(z){if(f){let H=il(window.location.hash);H.length>=3&&(t(11,w=H[0]),t(10,b=[H[2],H[1]])),H.length==5&&(t(15,A=H[3]),t(14,R=H[4]))}return it(re,o=new Mt.Map(er({container:z,style:h,locale:S,center:b,zoom:w,pitch:R,bearing:A,minZoom:d,maxZoom:y,interactive:E,preserveDrawingBuffer:g,maxBounds:_,bounds:D,attributionControl:L,transformRequest:G,cooperativeGestures:T})),o),o.on("load",H=>{t(0,m=!0),te("load",o)}),o.on("error",H=>te("error",{...H,map:o})),o.on("movestart",H=>te("movestart",{...H,map:o})),o.on("moveend",H=>{if(t(10,b=H.target.getCenter()),t(11,w=H.target.getZoom()),t(12,D=H.target.getBounds()),te("moveend",{...H,map:o}),f){let le=window.location.href.replace(/(#.+)?$/,nl(o));window.history.replaceState(window.history.state,"",le)}}),o.on("zoomstart",H=>te("zoomstart",{...H,map:o})),o.on("zoom",H=>{t(11,w=H.target.getZoom()),te("zoom",{...H,map:o})}),o.on("zoomend",H=>{t(11,w=H.target.getZoom()),te("zoomend",{...H,map:o})}),o.on("style.load",()=>{if(o){const H=o.getStyle();if(t(32,se=H.layers.map(le=>le.id)),t(33,Re=Object.keys(H.sources)),De)for(const[le,Ne]of Object.entries(De))o.addSource(le,Ne);if(be)for(const le of be)o.addLayer(le);for(const le of X)ue(le,!0)}}),o.on("styledata",H=>{if(o&&N){const le=o.getStyle().layers;if(le)for(let Ne of le)N(Ne)||o.setLayoutProperty(Ne.id,"visibility","none")}te("styledata",{...H,map:o})}),{destroy(){t(0,m=!1),o==null||o.remove(),it(re,o=null,o)}}}let ye=h;return n.$$set=z=>{"map"in z&&t(13,u=z.map),"class"in z&&t(1,c=z.class),"style"in z&&t(16,h=z.style),"diffStyleUpdates"in z&&t(17,k=z.diffStyleUpdates),"center"in z&&t(10,b=z.center),"zoom"in z&&t(11,w=z.zoom),"pitch"in z&&t(14,R=z.pitch),"bearing"in z&&t(15,A=z.bearing),"bounds"in z&&t(12,D=z.bounds),"hash"in z&&t(18,f=z.hash),"loaded"in z&&t(0,m=z.loaded),"minZoom"in z&&t(19,d=z.minZoom),"maxZoom"in z&&t(20,y=z.maxZoom),"zoomOnDoubleClick"in z&&t(21,M=z.zoomOnDoubleClick),"locale"in z&&t(22,S=z.locale),"interactive"in z&&t(23,E=z.interactive),"attributionControl"in z&&t(24,L=z.attributionControl),"cooperativeGestures"in z&&t(25,T=z.cooperativeGestures),"preserveDrawingBuffer"in z&&t(26,g=z.preserveDrawingBuffer),"maxBounds"in z&&t(27,_=z.maxBounds),"images"in z&&t(28,X=z.images),"standardControls"in z&&t(2,I=z.standardControls),"filterLayers"in z&&t(29,N=z.filterLayers),"transformRequest"in z&&t(30,G=z.transformRequest),"$$scope"in z&&t(35,s=z.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&4&&t(6,r=typeof I=="boolean"?void 0:I),n.$$.dirty[0]&8&&t(13,u=o),n.$$.dirty[0]&196616|n.$$.dirty[1]&14&&o&&!Kt(h,ye)){const z=o.getStyle();if(se&&(be=z.layers.filter(H=>!se.includes(H.id))),Re){const H=Object.keys(z.sources).filter(le=>!Re.includes(le));De={};for(const le of H)De[le]=z.sources[le]}t(34,ye=h),o.setStyle(h,{diff:k}),it(me,l=new Set,l),t(31,ge=new Set)}if(n.$$.dirty[0]&268435481|n.$$.dirty[1]&1&&m&&o!=null&&o.loaded())for(let z of X)!l.has(z.id)&&!ge.has(z.id)&&!o.hasImage(z.id)&&ue(z);n.$$.dirty[0]&268435472&&t(5,i=X.every(z=>l.has(z.id))),n.$$.dirty[0]&1032&&b&&!Kt(b,o==null?void 0:o.getCenter())&&(o==null||o.panTo(b)),n.$$.dirty[0]&2056&&w&&!Kt(w,o==null?void 0:o.getZoom())&&(o==null||o.zoomTo(w)),n.$$.dirty[0]&4104&&D&&!Kt(D,o==null?void 0:o.getBounds())&&(o==null||o.fitBounds(D)),n.$$.dirty[0]&2097160&&(M?o==null||o.doubleClickZoom.enable():o==null||o.doubleClickZoom.disable())},[m,c,I,o,l,i,r,re,me,we,b,w,D,u,R,A,h,k,f,d,y,M,S,E,L,T,g,_,X,N,G,ge,se,Re,ye,s,a]}class dl extends ve{constructor(e){super(),_e(this,e,hl,ml,he,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,locale:22,interactive:23,attributionControl:24,cooperativeGestures:25,preserveDrawingBuffer:26,maxBounds:27,images:28,standardControls:2,filterLayers:29,transformRequest:30},null,[-1,-1])}}var Nt=Uint8Array,Fn=Uint16Array,gl=Int32Array,yl=new Nt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),vl=new Nt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),On=function(n,e){for(var t=new Fn(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new gl(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},Rn=On(yl,2),_l=Rn.b,bl=Rn.r;_l[28]=258,bl[258]=28;On(vl,0);var pl=new Fn(32768);for(ae=0;ae<32768;++ae)et=(ae&43690)>>1|(ae&21845)<<1,et=(et&52428)>>2|(et&13107)<<2,et=(et&61680)>>4|(et&3855)<<4,pl[ae]=((et&65280)>>8|(et&255)<<8)>>1;var et,ae,rr=new Nt(288);for(ae=0;ae<144;++ae)rr[ae]=8;var ae;for(ae=144;ae<256;++ae)rr[ae]=9;var ae;for(ae=256;ae<280;++ae)rr[ae]=7;var ae;for(ae=280;ae<288;++ae)rr[ae]=8;var ae,wl=new Nt(32);for(ae=0;ae<32;++ae)wl[ae]=5;var ae,kl=new Nt(0),Ml=typeof TextDecoder<"u"&&new TextDecoder,Sl=0;try{Ml.decode(kl,{stream:!0}),Sl=1}catch{}function Ll(n){let e,t,r,i,o,l;return e=new An({props:{id:"edit-polygon-fill",filter:Mo,paint:{"fill-color":"red","fill-opacity":["case",["boolean",["get","hover"],"false"],1,.5]}}}),r=new rl({props:{id:"edit-polygon-lines",filter:So,paint:{"line-color":"black","line-width":8,"line-opacity":.5}}}),o=new qo({props:{id:"edit-polygon-vertices",filter:Lo,paint:{"circle-color":"black","circle-opacity":["case",["has","hovered"],1,.5],"circle-radius":10}}}),{c(){W(e.$$.fragment),t=j(),W(r.$$.fragment),i=j(),W(o.$$.fragment)},l(a){V(e.$$.fragment,a),t=x(a),V(r.$$.fragment,a),i=x(a),V(o.$$.fragment,a)},m(a,s){J(e,a,s),Z(a,t,s),J(r,a,s),Z(a,i,s),J(o,a,s),l=!0},p:fe,i(a){l||(B(e.$$.fragment,a),B(r.$$.fragment,a),B(o.$$.fragment,a),l=!0)},o(a){O(e.$$.fragment,a),O(r.$$.fragment,a),O(o.$$.fragment,a),l=!1},d(a){a&&(P(t),P(i)),K(e,a),K(r,a),K(o,a)}}}function Cl(n){let e,t;return e=new In({props:{data:n[0],$$slots:{default:[Ll]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,i){J(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.data=r[0]),i&2&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function El(n,e,t){let r;return Te(n,Pn,i=>t(0,r=i)),[r]}class Tl extends ve{constructor(e){super(),_e(this,e,El,Cl,he,{})}}function Pl(n){let e,t="Map loading...";return{c(){e=$("p"),e.textContent=t},l(r){e=ee(r,"P",{"data-svelte-h":!0}),Qt(e)!=="svelte-1r8199k"&&(e.textContent=t)},m(r,i){Z(r,e,i)},p:fe,i:fe,o:fe,d(r){r&&P(e)}}}function zl(n){let e,t,r,i;e=new Ui({props:{$$slots:{default:[Al]},$$scope:{ctx:n}}}),e.$on("click",n[5]);let o=n[0].summary.polygon&&fn(n);return{c(){W(e.$$.fragment),t=j(),o&&o.c(),r=Oe()},l(l){V(e.$$.fragment,l),t=x(l),o&&o.l(l),r=Oe()},m(l,a){J(e,l,a),Z(l,t,a),o&&o.m(l,a),Z(l,r,a),i=!0},p(l,a){const s={};a&4096&&(s.$$scope={dirty:a,ctx:l}),e.$set(s),l[0].summary.polygon?o?(o.p(l,a),a&1&&B(o,1)):(o=fn(l),o.c(),B(o,1),o.m(r.parentNode,r)):o&&(Ge(),O(o,1,1,()=>{o=null}),He())},i(l){i||(B(e.$$.fragment,l),B(o),i=!0)},o(l){O(e.$$.fragment,l),O(o),i=!1},d(l){l&&(P(t),P(r)),K(e,l),o&&o.d(l)}}}function Bl(n){let e,t,r,i,o,l,a;return t=new fr({props:{$$slots:{default:[Fl]},$$scope:{ctx:n}}}),t.$on("click",n[7]),i=new fr({props:{$$slots:{default:[Ol]},$$scope:{ctx:n}}}),i.$on("click",n[8]),l=new fr({props:{disabled:n[4]==0,$$slots:{default:[Ul]},$$scope:{ctx:n}}}),l.$on("click",n[9]),{c(){e=$("div"),W(t.$$.fragment),r=j(),W(i.$$.fragment),o=j(),W(l.$$.fragment),this.h()},l(s){e=ee(s,"DIV",{style:!0});var u=oe(e);V(t.$$.fragment,u),r=x(u),V(i.$$.fragment,u),o=x(u),V(l.$$.fragment,u),u.forEach(P),this.h()},h(){tt(e,"display","flex"),tt(e,"justify-content","space-between")},m(s,u){Z(s,e,u),J(t,e,null),U(e,r),J(i,e,null),U(e,o),J(l,e,null),a=!0},p(s,u){const c={};u&4096&&(c.$$scope={dirty:u,ctx:s}),t.$set(c);const h={};u&4096&&(h.$$scope={dirty:u,ctx:s}),i.$set(h);const k={};u&16&&(k.disabled=s[4]==0),u&4112&&(k.$$scope={dirty:u,ctx:s}),l.$set(k)},i(s){a||(B(t.$$.fragment,s),B(i.$$.fragment,s),B(l.$$.fragment,s),a=!0)},o(s){O(t.$$.fragment,s),O(i.$$.fragment,s),O(l.$$.fragment,s),a=!1},d(s){s&&P(e),K(t),K(i),K(l)}}}function Al(n){let e;return{c(){e=Pe("Edit polygon")},l(t){e=ze(t,"Edit polygon")},m(t,r){Z(t,e,r)},d(t){t&&P(e)}}}function fn(n){let e,t,r,i,o=Hr(n[0].summary.polygon).toFixed(1)+"",l,a,s;return e=new jn({props:{$$slots:{default:[Il]},$$scope:{ctx:n}}}),e.$on("click",n[6]),{c(){W(e.$$.fragment),t=j(),r=$("p"),i=Pe("Polygon area: "),l=Pe(o),a=Pe(" square meters")},l(u){V(e.$$.fragment,u),t=x(u),r=ee(u,"P",{});var c=oe(r);i=ze(c,"Polygon area: "),l=ze(c,o),a=ze(c," square meters"),c.forEach(P)},m(u,c){J(e,u,c),Z(u,t,c),Z(u,r,c),U(r,i),U(r,l),U(r,a),s=!0},p(u,c){const h={};c&4096&&(h.$$scope={dirty:c,ctx:u}),e.$set(h),(!s||c&1)&&o!==(o=Hr(u[0].summary.polygon).toFixed(1)+"")&&dt(l,o)},i(u){s||(B(e.$$.fragment,u),s=!0)},o(u){O(e.$$.fragment,u),s=!1},d(u){u&&(P(t),P(r)),K(e,u)}}}function Il(n){let e;return{c(){e=Pe("Delete and start over")},l(t){e=ze(t,"Delete and start over")},m(t,r){Z(t,e,r)},d(t){t&&P(e)}}}function Fl(n){let e;return{c(){e=Pe("Finish")},l(t){e=ze(t,"Finish")},m(t,r){Z(t,e,r)},d(t){t&&P(e)}}}function Ol(n){let e;return{c(){e=Pe("Cancel")},l(t){e=ze(t,"Cancel")},m(t,r){Z(t,e,r)},d(t){t&&P(e)}}}function Rl(n){let e,t,r;return{c(){e=Pe("Undo ("),t=Pe(n[4]),r=Pe(")")},l(i){e=ze(i,"Undo ("),t=ze(i,n[4]),r=ze(i,")")},m(i,o){Z(i,e,o),Z(i,t,o),Z(i,r,o)},p(i,o){o&16&&dt(t,i[4])},d(i){i&&(P(e),P(t),P(r))}}}function Dl(n){let e;return{c(){e=Pe("Undo")},l(t){e=ze(t,"Undo")},m(t,r){Z(t,e,r)},p:fe,d(t){t&&P(e)}}}function Ul(n){let e;function t(o,l){return o[4]==0?Dl:Rl}let r=t(n),i=r(n);return{c(){i.c(),e=Oe()},l(o){i.l(o),e=Oe()},m(o,l){i.m(o,l),Z(o,e,l)},p(o,l){r===(r=t(o))&&i?i.p(o,l):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&P(e),i.d(o)}}}function Nl(n){let e,t;return e=new An({props:{layout:{visibility:n[2]?"none":"visible"},paint:{"fill-color":"red","fill-opacity":.8}}}),{c(){W(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,i){J(e,r,i),t=!0},p(r,i){const o={};i&4&&(o.layout={visibility:r[2]?"none":"visible"}),e.$set(o)},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function Zl(n){let e,t,r,i,o,l;return e=new Oi({props:{map:n[1]}}),r=new Tl({}),o=new In({props:{data:n[3],$$slots:{default:[Nl]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment),t=j(),W(r.$$.fragment),i=j(),W(o.$$.fragment)},l(a){V(e.$$.fragment,a),t=x(a),V(r.$$.fragment,a),i=x(a),V(o.$$.fragment,a)},m(a,s){J(e,a,s),Z(a,t,s),J(r,a,s),Z(a,i,s),J(o,a,s),l=!0},p(a,s){const u={};s&2&&(u.map=a[1]),e.$set(u);const c={};s&8&&(c.data=a[3]),s&4100&&(c.$$scope={dirty:s,ctx:a}),o.$set(c)},i(a){l||(B(e.$$.fragment,a),B(r.$$.fragment,a),B(o.$$.fragment,a),l=!0)},o(a){O(e.$$.fragment,a),O(r.$$.fragment,a),O(o.$$.fragment,a),l=!1},d(a){a&&(P(t),P(i)),K(e,a),K(r,a),K(o,a)}}}function ql(n){let e,t,r,i,o,l,a;const s=[Bl,zl,Pl],u=[];function c(b,w){return b[2]?0:b[1]?1:2}e=c(n),t=u[e]=s[e](n);function h(b){n[10](b)}let k={style:"https://api.maptiler.com/maps/uk-openzoomstack-light/style.json?key=MZEJTanw3WpxRvt7qDfo",standardControls:!0,$$slots:{default:[Zl,({map:b})=>({1:b}),({map:b})=>b?2:0]},$$scope:{ctx:n}};return n[1]!==void 0&&(k.map=n[1]),o=new dl({props:k}),Me.push(()=>Ee(o,"map",h)),o.$on("error",n[11]),{c(){t.c(),r=j(),i=$("div"),W(o.$$.fragment),this.h()},l(b){t.l(b),r=x(b),i=ee(b,"DIV",{style:!0});var w=oe(i);V(o.$$.fragment,w),w.forEach(P),this.h()},h(){tt(i,"position","relative"),tt(i,"width","100%"),tt(i,"height","300px")},m(b,w){u[e].m(b,w),Z(b,r,w),Z(b,i,w),J(o,i,null),a=!0},p(b,[w]){let R=e;e=c(b),e===R?u[e].p(b,w):(Ge(),O(u[R],1,1,()=>{u[R]=null}),He(),t=u[e],t?t.p(b,w):(t=u[e]=s[e](b),t.c()),B(t,1),t.m(r.parentNode,r));const A={};w&4110&&(A.$$scope={dirty:w,ctx:b}),!l&&w&2&&(l=!0,A.map=b[1],Ce(()=>l=!1)),o.$set(A)},i(b){a||(B(t),B(o.$$.fragment,b),a=!0)},o(b){O(t),O(o.$$.fragment,b),a=!1},d(b){b&&(P(r),P(i)),u[e].d(b),K(o)}}}function Xl(n,e,t){let r,i,o;Te(n,Le,R=>t(0,i=R)),Te(n,zn,R=>t(4,o=R));let l=null,a=null;ot(()=>{a==null||a.tearDown()});function s(){l&&(t(2,a=new Eo(l)),i.summary.polygon?a.editExisting(i.summary.polygon):a.startNew(),a.addEventListenerSuccess(async R=>{t(2,a=null),it(Le,i.summary.polygon=R,i)}),a.addEventListenerFailure(()=>{t(2,a=null)}))}function u(){it(Le,i.summary.polygon=null,i),s()}const c=()=>a==null?void 0:a.finish(),h=()=>a==null?void 0:a.cancel(),k=()=>a==null?void 0:a.undo();function b(R){l=R,t(1,l)}const w=R=>{console.log(R.detail.error)};return n.$$.update=()=>{n.$$.dirty&1&&t(3,r=i.summary.polygon??{type:"FeatureCollection",features:[]}),n.$$.dirty&2&&l&&s()},[i,l,a,r,o,s,u,c,h,k,b,w]}class Yl extends ve{constructor(e){super(),_e(this,e,Xl,ql,he,{})}}function Gl(n){let e,t,r,i,o,l,a,s,u,c,h,k,b,w,R,A,D,f,m,d,y,M,S,E,L,T,g,_,X,I,N,G,te,re,me,ge,ue,se,Re,be,De,we,ye,z,H,le,Ne="Network context",qe,p,Q=`Please add a drawing of the area being assessed below, including the
    location of measures proposed by the scheme.`,Y,ke,ce;t=new ii({props:{links:[["Tools","/"],["Area check tool","/area_check"]],current:"Summary of Scheme"}});function ie(F){n[1](F)}let Be={label:"Date of design review"};n[0].summary.dateDesignReview!==void 0&&(Be.value=n[0].summary.dateDesignReview),i=new Bt({props:Be}),Me.push(()=>Ee(i,"value",ie));function yt(F){n[2](F)}let Qe={label:"Scheme reference"};n[0].summary.schemeReference!==void 0&&(Qe.value=n[0].summary.schemeReference),a=new Bt({props:Qe}),Me.push(()=>Ee(a,"value",yt));function lt(F){n[3](F)}let ct={label:"Scheme name"};n[0].summary.schemeName!==void 0&&(ct.value=n[0].summary.schemeName),c=new Bt({props:ct}),Me.push(()=>Ee(c,"value",lt));function Lt(F){n[4](F)}let Zt={label:"Scheme summary"};n[0].summary.schemeSummary!==void 0&&(Zt.value=n[0].summary.schemeSummary),b=new Jt({props:Zt}),Me.push(()=>Ee(b,"value",Lt));function je(F){n[5](F)}let Ct={label:"Scheme information reviewed"};n[0].summary.schemeInfoReviewed!==void 0&&(Ct.value=n[0].summary.schemeInfoReviewed),A=new Jt({props:Ct}),Me.push(()=>Ee(A,"value",je));function Et(F){n[6](F)}let vt={label:"Authority",emptyOption:!0,choices:Pt(Hn)};n[0].summary.authority!==void 0&&(vt.value=n[0].summary.authority),m=new zt({props:vt}),Me.push(()=>Ee(m,"value",Et));function nr(F){n[7](F)}let qt={label:"Transport / Combined Authority",emptyOption:!0,choices:Pt(Wn)};n[0].summary.transportOrCombinedAuthority!==void 0&&(qt.value=n[0].summary.transportOrCombinedAuthority),M=new zt({props:qt}),Me.push(()=>Ee(M,"value",nr));function ir(F){n[8](F)}let _t={label:"Region",emptyOption:!0,choices:Pt(Vn)};n[0].summary.region!==void 0&&(_t.value=n[0].summary.region),L=new zt({props:_t}),Me.push(()=>Ee(L,"value",ir));function Tt(F){n[9](F)}let Xt={label:"Funding programme",emptyOption:!0,choices:Pt(Jn)};n[0].summary.fundingProgramme!==void 0&&(Xt.value=n[0].summary.fundingProgramme),_=new zt({props:Xt}),Me.push(()=>Ee(_,"value",Tt));function or(F){n[10](F)}let Yt={label:"Design stage",emptyOption:!0,choices:Pt(Kn)};n[0].summary.designStage!==void 0&&(Yt.value=n[0].summary.designStage),N=new zt({props:Yt}),Me.push(()=>Ee(N,"value",or));function lr(F){n[11](F)}let Gt={label:"Funding conditions"};n[0].summary.fundingConditions!==void 0&&(Gt.value=n[0].summary.fundingConditions),re=new Jt({props:Gt}),Me.push(()=>Ee(re,"value",lr));function ar(F){n[12](F)}let Ht={label:"Inspector email address"};n[0].summary.inspectorEmail!==void 0&&(Ht.value=n[0].summary.inspectorEmail),ue=new Bt({props:Ht}),Me.push(()=>Ee(ue,"value",ar));function sr(F){n[13](F)}let Wt={label:"Scheme area size (km²)"};n[0].summary.schemeAreaSizeKm2!==void 0&&(Wt.value=n[0].summary.schemeAreaSizeKm2),be=new Bt({props:Wt}),Me.push(()=>Ee(be,"value",sr));function ur(F){n[14](F)}let Vt={label:"Notes"};return n[0].summary.notes!==void 0&&(Vt.value=n[0].summary.notes),ye=new Jt({props:Vt}),Me.push(()=>Ee(ye,"value",ur)),ke=new Yl({}),{c(){e=$("div"),W(t.$$.fragment),r=j(),W(i.$$.fragment),l=j(),W(a.$$.fragment),u=j(),W(c.$$.fragment),k=j(),W(b.$$.fragment),R=j(),W(A.$$.fragment),f=j(),W(m.$$.fragment),y=j(),W(M.$$.fragment),E=j(),W(L.$$.fragment),g=j(),W(_.$$.fragment),I=j(),W(N.$$.fragment),te=j(),W(re.$$.fragment),ge=j(),W(ue.$$.fragment),Re=j(),W(be.$$.fragment),we=j(),W(ye.$$.fragment),H=j(),le=$("h2"),le.textContent=Ne,qe=j(),p=$("p"),p.textContent=Q,Y=j(),W(ke.$$.fragment),this.h()},l(F){e=ee(F,"DIV",{class:!0});var q=oe(e);V(t.$$.fragment,q),r=x(q),V(i.$$.fragment,q),l=x(q),V(a.$$.fragment,q),u=x(q),V(c.$$.fragment,q),k=x(q),V(b.$$.fragment,q),R=x(q),V(A.$$.fragment,q),f=x(q),V(m.$$.fragment,q),y=x(q),V(M.$$.fragment,q),E=x(q),V(L.$$.fragment,q),g=x(q),V(_.$$.fragment,q),I=x(q),V(N.$$.fragment,q),te=x(q),V(re.$$.fragment,q),ge=x(q),V(ue.$$.fragment,q),Re=x(q),V(be.$$.fragment,q),we=x(q),V(ye.$$.fragment,q),H=x(q),le=ee(q,"H2",{"data-svelte-h":!0}),Qt(le)!=="svelte-1tcb68x"&&(le.textContent=Ne),qe=x(q),p=ee(q,"P",{"data-svelte-h":!0}),Qt(p)!=="svelte-2zany2"&&(p.textContent=Q),Y=x(q),V(ke.$$.fragment,q),q.forEach(P),this.h()},h(){C(e,"class","govuk-prose")},m(F,q){Z(F,e,q),J(t,e,null),U(e,r),J(i,e,null),U(e,l),J(a,e,null),U(e,u),J(c,e,null),U(e,k),J(b,e,null),U(e,R),J(A,e,null),U(e,f),J(m,e,null),U(e,y),J(M,e,null),U(e,E),J(L,e,null),U(e,g),J(_,e,null),U(e,I),J(N,e,null),U(e,te),J(re,e,null),U(e,ge),J(ue,e,null),U(e,Re),J(be,e,null),U(e,we),J(ye,e,null),U(e,H),U(e,le),U(e,qe),U(e,p),U(e,Y),J(ke,e,null),ce=!0},p(F,[q]){const v={};!o&&q&1&&(o=!0,v.value=F[0].summary.dateDesignReview,Ce(()=>o=!1)),i.$set(v);const de={};!s&&q&1&&(s=!0,de.value=F[0].summary.schemeReference,Ce(()=>s=!1)),a.$set(de);const Xe={};!h&&q&1&&(h=!0,Xe.value=F[0].summary.schemeName,Ce(()=>h=!1)),c.$set(Xe);const Ye={};!w&&q&1&&(w=!0,Ye.value=F[0].summary.schemeSummary,Ce(()=>w=!1)),b.$set(Ye);const ne={};!D&&q&1&&(D=!0,ne.value=F[0].summary.schemeInfoReviewed,Ce(()=>D=!1)),A.$set(ne);const Ue={};!d&&q&1&&(d=!0,Ue.value=F[0].summary.authority,Ce(()=>d=!1)),m.$set(Ue);const mt={};!S&&q&1&&(S=!0,mt.value=F[0].summary.transportOrCombinedAuthority,Ce(()=>S=!1)),M.$set(mt);const bt={};!T&&q&1&&(T=!0,bt.value=F[0].summary.region,Ce(()=>T=!1)),L.$set(bt);const pt={};!X&&q&1&&(X=!0,pt.value=F[0].summary.fundingProgramme,Ce(()=>X=!1)),_.$set(pt);const ht={};!G&&q&1&&(G=!0,ht.value=F[0].summary.designStage,Ce(()=>G=!1)),N.$set(ht);const Pr={};!me&&q&1&&(me=!0,Pr.value=F[0].summary.fundingConditions,Ce(()=>me=!1)),re.$set(Pr);const zr={};!se&&q&1&&(se=!0,zr.value=F[0].summary.inspectorEmail,Ce(()=>se=!1)),ue.$set(zr);const Br={};!De&&q&1&&(De=!0,Br.value=F[0].summary.schemeAreaSizeKm2,Ce(()=>De=!1)),be.$set(Br);const Ar={};!z&&q&1&&(z=!0,Ar.value=F[0].summary.notes,Ce(()=>z=!1)),ye.$set(Ar)},i(F){ce||(B(t.$$.fragment,F),B(i.$$.fragment,F),B(a.$$.fragment,F),B(c.$$.fragment,F),B(b.$$.fragment,F),B(A.$$.fragment,F),B(m.$$.fragment,F),B(M.$$.fragment,F),B(L.$$.fragment,F),B(_.$$.fragment,F),B(N.$$.fragment,F),B(re.$$.fragment,F),B(ue.$$.fragment,F),B(be.$$.fragment,F),B(ye.$$.fragment,F),B(ke.$$.fragment,F),ce=!0)},o(F){O(t.$$.fragment,F),O(i.$$.fragment,F),O(a.$$.fragment,F),O(c.$$.fragment,F),O(b.$$.fragment,F),O(A.$$.fragment,F),O(m.$$.fragment,F),O(M.$$.fragment,F),O(L.$$.fragment,F),O(_.$$.fragment,F),O(N.$$.fragment,F),O(re.$$.fragment,F),O(ue.$$.fragment,F),O(be.$$.fragment,F),O(ye.$$.fragment,F),O(ke.$$.fragment,F),ce=!1},d(F){F&&P(e),K(t),K(i),K(a),K(c),K(b),K(A),K(m),K(M),K(L),K(_),K(N),K(re),K(ue),K(be),K(ye),K(ke)}}}function Hl(n,e,t){let r;Te(n,Le,f=>t(0,r=f));function i(f){n.$$.not_equal(r.summary.dateDesignReview,f)&&(r.summary.dateDesignReview=f,Le.set(r))}function o(f){n.$$.not_equal(r.summary.schemeReference,f)&&(r.summary.schemeReference=f,Le.set(r))}function l(f){n.$$.not_equal(r.summary.schemeName,f)&&(r.summary.schemeName=f,Le.set(r))}function a(f){n.$$.not_equal(r.summary.schemeSummary,f)&&(r.summary.schemeSummary=f,Le.set(r))}function s(f){n.$$.not_equal(r.summary.schemeInfoReviewed,f)&&(r.summary.schemeInfoReviewed=f,Le.set(r))}function u(f){n.$$.not_equal(r.summary.authority,f)&&(r.summary.authority=f,Le.set(r))}function c(f){n.$$.not_equal(r.summary.transportOrCombinedAuthority,f)&&(r.summary.transportOrCombinedAuthority=f,Le.set(r))}function h(f){n.$$.not_equal(r.summary.region,f)&&(r.summary.region=f,Le.set(r))}function k(f){n.$$.not_equal(r.summary.fundingProgramme,f)&&(r.summary.fundingProgramme=f,Le.set(r))}function b(f){n.$$.not_equal(r.summary.designStage,f)&&(r.summary.designStage=f,Le.set(r))}function w(f){n.$$.not_equal(r.summary.fundingConditions,f)&&(r.summary.fundingConditions=f,Le.set(r))}function R(f){n.$$.not_equal(r.summary.inspectorEmail,f)&&(r.summary.inspectorEmail=f,Le.set(r))}function A(f){n.$$.not_equal(r.summary.schemeAreaSizeKm2,f)&&(r.summary.schemeAreaSizeKm2=f,Le.set(r))}function D(f){n.$$.not_equal(r.summary.notes,f)&&(r.summary.notes=f,Le.set(r))}return[r,i,o,l,a,s,u,c,h,k,b,w,R,A,D]}class la extends ve{constructor(e){super(),_e(this,e,Hl,Gl,he,{})}}export{la as component};
