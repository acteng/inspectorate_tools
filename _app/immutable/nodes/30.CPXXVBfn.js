import{s as ce,a as S,e as pe,g as T,c as me,b as de,f as b,v as E,i as w,q as $e,k as ge,t as ne,d as ie,M as _e,E as D,F as M}from"../chunks/scheduler.Bo0JWHHn.js";import{S as ve,i as he,c as y,a as k,m as C,t as v,e as be,b as h,d as A,g as we,f as W}from"../chunks/index.6d5lyPES.js";import{e as X}from"../chunks/each.F4dHItQf.js";import{M as ye}from"../chunks/MapLibreMap.CbD8aa2q.js";import{p as ke}from"../chunks/index.BnL-AC_K.js";import{C as Ce}from"../chunks/CollapsibleCard.Ct8Lp9KK.js";import{S as Ae,W as Be}from"../chunks/WarningButton.CRa3KnfY.js";import{S as Z}from"../chunks/Select.7pc0lYDa.js";import{T as Ie}from"../chunks/TextArea.X92Okm1I.js";import{T as x}from"../chunks/TextInput.BcwDEmNM.js";import{s as I}from"../chunks/data.DJewr1Yq.js";import{Y as Se}from"../chunks/YesNo.DPI3oM3u.js";function ee(t,i,a){const n=t.slice();return n[11]=i[a],n[12]=i,n[13]=a,n}function Te(t){let i;return{c(){i=ne("Add")},l(a){i=ie(a,"Add")},m(a,n){w(a,i,n)},d(a){a&&b(i)}}}function De(t){let i;return{c(){i=ne("Delete")},l(a){i=ie(a,"Delete")},m(a,n){w(a,i,n)},d(a){a&&b(i)}}}function Me(t){let i,a,n,p,d,$,g,o,_,s,l,u,m,r,f,L,q,B,P,N;function se(){return t[4](t[13])}i=new Be({props:{$$slots:{default:[De]},$$scope:{ctx:t}}}),i.$on("click",se);function ae(e){t[5](e,t[11])}let F={label:"Critical Issue",emptyOption:!0,choices:t[1]};t[11].criticalIssue!==void 0&&(F.value=t[11].criticalIssue),n=new Z({props:F}),D.push(()=>W(n,"value",ae));function oe(e){t[6](e,t[11])}let R={label:"Stage",emptyOption:!0,choices:ke(["Existing","Design"])};t[11].stage!==void 0&&(R.value=t[11].stage),$=new Z({props:R}),D.push(()=>W($,"value",oe));function re(e){t[7](e,t[11])}let O={label:"Location"};t[11].point!==void 0&&(O.value=t[11].point),_=new x({props:O}),D.push(()=>W(_,"value",re));function le(e){t[8](e,t[11])}let V={label:"Location Name"};t[11].locationName!==void 0&&(V.value=t[11].locationName),u=new x({props:V}),D.push(()=>W(u,"value",le));function fe(e){t[9](e,t[11])}let j={label:"Resolved by Design"};t[11].resolved!==void 0&&(j.value=t[11].resolved),f=new Se({props:j}),D.push(()=>W(f,"value",fe));function ue(e){t[10](e,t[11])}let G={label:"Commentary & Feedback"};return t[11].notes!==void 0&&(G.value=t[11].notes),B=new Ie({props:G}),D.push(()=>W(B,"value",ue)),{c(){y(i.$$.fragment),a=S(),y(n.$$.fragment),d=S(),y($.$$.fragment),o=S(),y(_.$$.fragment),l=S(),y(u.$$.fragment),r=S(),y(f.$$.fragment),q=S(),y(B.$$.fragment)},l(e){k(i.$$.fragment,e),a=T(e),k(n.$$.fragment,e),d=T(e),k($.$$.fragment,e),o=T(e),k(_.$$.fragment,e),l=T(e),k(u.$$.fragment,e),r=T(e),k(f.$$.fragment,e),q=T(e),k(B.$$.fragment,e)},m(e,c){C(i,e,c),w(e,a,c),C(n,e,c),w(e,d,c),C($,e,c),w(e,o,c),C(_,e,c),w(e,l,c),C(u,e,c),w(e,r,c),C(f,e,c),w(e,q,c),C(B,e,c),N=!0},p(e,c){t=e;const H={};c&16384&&(H.$$scope={dirty:c,ctx:t}),i.$set(H);const J={};!p&&c&1&&(p=!0,J.value=t[11].criticalIssue,M(()=>p=!1)),n.$set(J);const K={};!g&&c&1&&(g=!0,K.value=t[11].stage,M(()=>g=!1)),$.$set(K);const Y={};!s&&c&1&&(s=!0,Y.value=t[11].point,M(()=>s=!1)),_.$set(Y);const z={};!m&&c&1&&(m=!0,z.value=t[11].locationName,M(()=>m=!1)),u.$set(z);const U={};!L&&c&1&&(L=!0,U.value=t[11].resolved,M(()=>L=!1)),f.$set(U);const Q={};!P&&c&1&&(P=!0,Q.value=t[11].notes,M(()=>P=!1)),B.$set(Q)},i(e){N||(v(i.$$.fragment,e),v(n.$$.fragment,e),v($.$$.fragment,e),v(_.$$.fragment,e),v(u.$$.fragment,e),v(f.$$.fragment,e),v(B.$$.fragment,e),N=!0)},o(e){h(i.$$.fragment,e),h(n.$$.fragment,e),h($.$$.fragment,e),h(_.$$.fragment,e),h(u.$$.fragment,e),h(f.$$.fragment,e),h(B.$$.fragment,e),N=!1},d(e){e&&(b(a),b(d),b(o),b(l),b(r),b(q)),A(i,e),A(n,e),A($,e),A(_,e),A(u,e),A(f,e),A(B,e)}}}function te(t){let i,a;return i=new Ce({props:{label:t[11].id,open:!0,$$slots:{default:[Me]},$$scope:{ctx:t}}}),{c(){y(i.$$.fragment)},l(n){k(i.$$.fragment,n)},m(n,p){C(i,n,p),a=!0},p(n,p){const d={};p&1&&(d.label=n[11].id),p&16385&&(d.$$scope={dirty:p,ctx:n}),i.$set(d)},i(n){a||(v(i.$$.fragment,n),a=!0)},o(n){h(i.$$.fragment,n),a=!1},d(n){A(i,n)}}}function We(t){let i,a,n,p,d,$;i=new Ae({props:{$$slots:{default:[Te]},$$scope:{ctx:t}}}),i.$on("click",t[2]);let g=X(t[0].criticalIssues),o=[];for(let s=0;s<g.length;s+=1)o[s]=te(ee(t,g,s));const _=s=>h(o[s],1,1,()=>{o[s]=null});return d=new ye({}),{c(){y(i.$$.fragment),a=S();for(let s=0;s<o.length;s+=1)o[s].c();n=S(),p=pe("div"),y(d.$$.fragment),this.h()},l(s){k(i.$$.fragment,s),a=T(s);for(let u=0;u<o.length;u+=1)o[u].l(s);n=T(s),p=me(s,"DIV",{style:!0});var l=de(p);k(d.$$.fragment,l),l.forEach(b),this.h()},h(){E(p,"position","relative"),E(p,"width","100%"),E(p,"height","300px")},m(s,l){C(i,s,l),w(s,a,l);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(s,l);w(s,n,l),w(s,p,l),C(d,p,null),$=!0},p(s,[l]){const u={};if(l&16384&&(u.$$scope={dirty:l,ctx:s}),i.$set(u),l&11){g=X(s[0].criticalIssues);let m;for(m=0;m<g.length;m+=1){const r=ee(s,g,m);o[m]?(o[m].p(r,l),v(o[m],1)):(o[m]=te(r),o[m].c(),v(o[m],1),o[m].m(n.parentNode,n))}for(we(),m=g.length;m<o.length;m+=1)_(m);be()}},i(s){if(!$){v(i.$$.fragment,s);for(let l=0;l<g.length;l+=1)v(o[l]);v(d.$$.fragment,s),$=!0}},o(s){h(i.$$.fragment,s),o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)h(o[l]);h(d.$$.fragment,s),$=!1},d(s){s&&(b(a),b(n),b(p)),A(i,s),$e(o,s),A(d)}}}function qe(t,i,a){let n;ge(t,I,r=>a(0,n=r));let p=[["1","1 - Conflict at Side Roads and Priority Junctions: >2,500vpd cut across main walking, wheeling or cycling streams"],["2","2 - Conflict at Roundabouts and Signal Junctions: >2,500vpd cut across main walking, wheeling or cycling streams"],["3","3 - Lane Widths: Cyclists unprotected in 3.25-3.9m wide nearside lane"],["4","4 - Trip Hazards: Level differences >13mm with no tactile information and colour contrast"],["5A","5A - Kerbside Activity: Cycle facility next to parking/loading with insufficient buffer"],["5B","5B - Kerbside Activity: Unprotected cycle lane next to a frequently used bus layby"],["6A","6A - Provision of Crossings: on busy streets (>8,000vpd), formal crossings are more than 400m apart"],["6B","6B - Provision of Crossings: on quieter streets (<8,000vpd), desire lines are blocked by parking/loading"],["7A","7A - Standard of Crossings: on busy streets (>8,000vpd), uncontrolled crossings of 2+ lanes with no gaps in traffic"],["7B","7B - Standard of Crossings: at signal junctions, there are arms with no green man for pedestrians"],["8","8 - Motor Traffic Speed: Mean speed > 30mph when cyclists/pedestrians are unprotected"],["9A","9A - Motor Traffic Volume: >1,000 vehicles in busiest hour when cyclists/pedestrians are unprotected"],["9B","9B - Motor Traffic Volume: >5% HGV traffic when cyclists/pedestrians are unprotected and >500 vehicles in busiest hour"],["10","10 - Pedestrian Crossing Speed: Pedestrians must cross at speeds >1.2m/s"],["11A","11A - Footway Width: <1m clear width"],["11B","11B - Footway Width: 1.0-1.5m wide clear width for over 6m"],["11C","11C - Footway Width: <2m clear width and pedestrian comfort level is poor (PCL of D-E)"],["11D","11D - Footway Width: no footway"],["12A","12A - Effective Width next to Tram Lines: <2.4m effective width for cyclists from tramline edge to kerb on a straight run"],["12B","12B - Effective Width next to Tram Lines: insufficient effective width for cyclists on a curved section of tram route"],["13","13 - Crossing Angle of Tram/Train Rails: Cyclist crossing angle <60Â°"],["14",'14 - Cycling Surface and Maintenance Defects: Major defects (provide further information in "commentary and feedback")'],["15",'15 - Walking/Wheeling Surface and Maintenance Defects: Major defects (provide further information in "commentary and feedback")'],["16","16 - Guard Railing: used as standard without consideration of inherent safety risks"]];function d(){_e(I,n.criticalIssues=[...n.criticalIssues,{id:"TODO",criticalIssue:"",stage:"",point:"",locationName:"",resolved:"",notes:""}],n)}function $(r){window.confirm("Delete this entry?")&&(n.criticalIssues.splice(r,1),I.set(n))}const g=r=>$(r);function o(r,f){t.$$.not_equal(f.criticalIssue,r)&&(f.criticalIssue=r,I.set(n))}function _(r,f){t.$$.not_equal(f.stage,r)&&(f.stage=r,I.set(n))}function s(r,f){t.$$.not_equal(f.point,r)&&(f.point=r,I.set(n))}function l(r,f){t.$$.not_equal(f.locationName,r)&&(f.locationName=r,I.set(n))}function u(r,f){t.$$.not_equal(f.resolved,r)&&(f.resolved=r,I.set(n))}function m(r,f){t.$$.not_equal(f.notes,r)&&(f.notes=r,I.set(n))}return[n,p,d,$,g,o,_,s,l,u,m]}class Ke extends ve{constructor(i){super(),he(this,i,qe,We,ce,{})}}export{Ke as component};
