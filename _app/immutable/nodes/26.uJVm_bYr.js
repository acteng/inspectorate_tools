import{s as oe,a as I,e as A,g as O,c as V,r as x,i as y,C as Ee,z as We,f as g,B as lt,v as z,b as j,w as ce,h as M,x as Y,k as de,a7 as He,t as R,E as ee,d as q,j as te,p as ge,q as ot,n as me,T as ft,M as ze}from"../chunks/scheduler.d-ZThAIN.js";import{S as fe,i as ue,c as N,a as E,m as W,t as k,b as F,d as B,e as K,g as re,f as ne}from"../chunks/index.BKLGIcjh.js";import{e as pe,u as Ge,o as Ye}from"../chunks/each.5I2k8VTY.js";import{p as le}from"../chunks/index.R2MjMSdN.js";import{S as ie,W as Ke}from"../chunks/WarningButton.CXBTrJR0.js";import{S as ae}from"../chunks/Select.DYDTV9Cm.js";import{W as be}from"../chunks/WarningText.7hu73wCS.js";import{s as U,a as Qe,b as ut}from"../chunks/data.BhLXyrR4.js";import{a as Xe,n as ct,g as pt,c as dt,D as mt}from"../chunks/logic.osBTuSJ-.js";import{E as _t}from"../chunks/ExternalLink.DDS_whBl.js";import{D as ht}from"../chunks/DefaultButton.gdQzz5EL.js";import{F as $t,v as Ze,E as xe}from"../chunks/FormElement.Br3q6YEJ.js";import{T as gt}from"../chunks/TextInput.DLFUCrlZ.js";import"../chunks/paths.Cv4UJgjh.js";import{M as bt}from"../chunks/Modal.tyyBFs83.js";import{C as _e}from"../chunks/CollapsibleCard.B7A7dHcx.js";function vt(i){let e,t,r,n,s,a,l;return e=new xe({props:{errorMessage:i[5](i[2])}}),{c(){N(e.$$.fragment),t=I(),r=A("input"),this.h()},l(o){E(e.$$.fragment,o),t=O(o),r=V(o,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){x(r,"type","text"),x(r,"inputmode","numeric"),x(r,"class",n=`govuk-input govuk-input--width-${i[1]}`),x(r,"id",i[3])},m(o,f){W(e,o,f),y(o,t,f),y(o,r,f),Ee(r,i[2]),s=!0,a||(l=[We(r,"input",i[9]),We(r,"change",i[4])],a=!0)},p(o,f){const v={};f&4&&(v.errorMessage=o[5](o[2])),e.$set(v),(!s||f&2&&n!==(n=`govuk-input govuk-input--width-${o[1]}`))&&x(r,"class",n),f&4&&r.value!==o[2]&&Ee(r,o[2])},i(o){s||(k(e.$$.fragment,o),s=!0)},o(o){F(e.$$.fragment,o),s=!1},d(o){o&&(g(t),g(r)),B(e,o),a=!1,lt(l)}}}function wt(i){let e,t;return e=new $t({props:{label:i[0],id:i[3],$$slots:{default:[vt]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,n){W(e,r,n),t=!0},p(r,[n]){const s={};n&1&&(s.label=r[0]),n&1030&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function kt(i,e,t){let{label:r}=e,{value:n}=e,{width:s}=e,{min:a=void 0}=e,{max:l=void 0}=e,o=n==null?void 0:n.toString(),f=Ze();function v(){t(6,n=o==null?void 0:parseInt(o,10))}function p(d){if(d==""||d==null)return"";if(d.includes("."))return"Please enter a number without decimals";let h=Number(d);return isNaN(h)?"Please enter a valid number":a!=null&&h<a?`Please enter a number that's at least ${a};`:l!=null&&h>l?`Please enter a number that's at most ${l};`:""}function u(){o=this.value,t(2,o)}return i.$$set=d=>{"label"in d&&t(0,r=d.label),"value"in d&&t(6,n=d.value),"width"in d&&t(1,s=d.width),"min"in d&&t(7,a=d.min),"max"in d&&t(8,l=d.max)},[r,s,o,f,v,p,n,a,l,u]}class yt extends fe{constructor(e){super(),ue(this,e,kt,wt,oe,{label:0,value:6,width:1,min:7,max:8})}}function he(i){return typeof i=="object"?[]:Ft[i]}let Ft={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",Q(76)],["LTN 1/20 Figure 4.1 pp. 33",Q(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",Q(43)],["LTN 1/20 Figure 4.1 pp. 33",Q(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",Q(43)],["LTN 1/20 Figure 4.1 pp. 33",Q(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",Q(43)],["LTN 1/20 Figure 4.1 pp. 33",Q(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",Q(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",Q(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",Q(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",Q(54)]]};function Q(i){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${i}`}function $e(i,e){let t=Xe(e.speedLimit,e.observedSpeed);switch(i){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&t==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&t==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Be(i,e,t){const r=i.slice();return r[21]=e[t][0],r[22]=e[t][1],r}function Me(i){let e,t,r=i[6][0].toFixed(2)+"",n,s,a,l,o=i[6][1].toFixed(2)+"",f,v,p,u,d,h=he(i[0]).length>0,c,$=$e(i[0],i[4].proposed.trafficData),m,D;const C=[Lt,St,Dt],S=[];function _(b,P){return b[7]=="left"?0:b[7]=="right"?1:b[7]=="both"?2:-1}~(p=_(i))&&(u=S[p]=C[p](i));let w=h&&Pe(i),L=$&&qe(i);return{c(){e=A("p"),t=R("Desirable minimum width (m): "),n=R(r),s=I(),a=A("p"),l=R("Absolute minimum width (m): "),f=R(o),v=I(),u&&u.c(),d=I(),w&&w.c(),c=I(),L&&L.c(),m=ee()},l(b){e=V(b,"P",{});var P=j(e);t=q(P,"Desirable minimum width (m): "),n=q(P,r),P.forEach(g),s=O(b),a=V(b,"P",{});var G=j(a);l=q(G,"Absolute minimum width (m): "),f=q(G,o),G.forEach(g),v=O(b),u&&u.l(b),d=O(b),w&&w.l(b),c=O(b),L&&L.l(b),m=ee()},m(b,P){y(b,e,P),M(e,t),M(e,n),y(b,s,P),y(b,a,P),M(a,l),M(a,f),y(b,v,P),~p&&S[p].m(b,P),y(b,d,P),w&&w.m(b,P),y(b,c,P),L&&L.m(b,P),y(b,m,P),D=!0},p(b,P){(!D||P&64)&&r!==(r=b[6][0].toFixed(2)+"")&&te(n,r),(!D||P&64)&&o!==(o=b[6][1].toFixed(2)+"")&&te(f,o);let G=p;p=_(b),p===G?~p&&S[p].p(b,P):(u&&(re(),F(S[G],1,1,()=>{S[G]=null}),ne()),~p?(u=S[p],u?u.p(b,P):(u=S[p]=C[p](b),u.c()),k(u,1),u.m(d.parentNode,d)):u=null),P&1&&(h=he(b[0]).length>0),h?w?(w.p(b,P),P&1&&k(w,1)):(w=Pe(b),w.c(),k(w,1),w.m(c.parentNode,c)):w&&(re(),F(w,1,1,()=>{w=null}),ne()),P&17&&($=$e(b[0],b[4].proposed.trafficData)),$?L?L.p(b,P):(L=qe(b),L.c(),L.m(m.parentNode,m)):L&&(L.d(1),L=null)},i(b){D||(k(u),k(w),D=!0)},o(b){F(u),F(w),D=!1},d(b){b&&(g(e),g(s),g(a),g(v),g(d),g(c),g(m)),~p&&S[p].d(b),w&&w.d(b),L&&L.d(b)}}}function Dt(i){let e,t;return e=new be({props:{$$slots:{default:[Ct]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,n){W(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function St(i){let e,t;return e=new be({props:{$$slots:{default:[Et]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,n){W(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Lt(i){let e,t;return e=new be({props:{$$slots:{default:[Bt]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,n){W(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Tt(i){let e;return{c(){e=R("Add buffers")},l(t){e=q(t,"Add buffers")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function Ct(i){let e,t,r;return t=new ie({props:{$$slots:{default:[Tt]},$$scope:{ctx:i}}}),t.$on("click",i[14]),{c(){e=R("Consider buffer to left and right "),N(t.$$.fragment)},l(n){e=q(n,"Consider buffer to left and right "),E(t.$$.fragment,n)},m(n,s){y(n,e,s),W(t,n,s),r=!0},p(n,s){const a={};s&33554432&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(k(t.$$.fragment,n),r=!0)},o(n){F(t.$$.fragment,n),r=!1},d(n){n&&g(e),B(t,n)}}}function Nt(i){let e;return{c(){e=R("Add buffer")},l(t){e=q(t,"Add buffer")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function Et(i){let e,t,r;return t=new ie({props:{$$slots:{default:[Nt]},$$scope:{ctx:i}}}),t.$on("click",i[13]),{c(){e=R("Consider buffer to right "),N(t.$$.fragment)},l(n){e=q(n,"Consider buffer to right "),E(t.$$.fragment,n)},m(n,s){y(n,e,s),W(t,n,s),r=!0},p(n,s){const a={};s&33554432&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(k(t.$$.fragment,n),r=!0)},o(n){F(t.$$.fragment,n),r=!1},d(n){n&&g(e),B(t,n)}}}function Wt(i){let e;return{c(){e=R("Add buffer")},l(t){e=q(t,"Add buffer")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function Bt(i){let e,t,r;return t=new ie({props:{$$slots:{default:[Wt]},$$scope:{ctx:i}}}),t.$on("click",i[12]),{c(){e=R("Consider buffer to left "),N(t.$$.fragment)},l(n){e=q(n,"Consider buffer to left "),E(t.$$.fragment,n)},m(n,s){y(n,e,s),W(t,n,s),r=!0},p(n,s){const a={};s&33554432&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(k(t.$$.fragment,n),r=!0)},o(n){F(t.$$.fragment,n),r=!1},d(n){n&&g(e),B(t,n)}}}function Pe(i){let e,t="References",r,n,s,a=pe(he(i[0])),l=[];for(let f=0;f<a.length;f+=1)l[f]=Re(Be(i,a,f));const o=f=>F(l[f],1,1,()=>{l[f]=null});return{c(){e=A("u"),e.textContent=t,r=R(`
      :
      `),n=A("ul");for(let f=0;f<l.length;f+=1)l[f].c()},l(f){e=V(f,"U",{"data-svelte-h":!0}),ge(e)!=="svelte-fk7cdq"&&(e.textContent=t),r=q(f,`
      :
      `),n=V(f,"UL",{});var v=j(n);for(let p=0;p<l.length;p+=1)l[p].l(v);v.forEach(g)},m(f,v){y(f,e,v),y(f,r,v),y(f,n,v);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(n,null);s=!0},p(f,v){if(v&1){a=pe(he(f[0]));let p;for(p=0;p<a.length;p+=1){const u=Be(f,a,p);l[p]?(l[p].p(u,v),k(l[p],1)):(l[p]=Re(u),l[p].c(),k(l[p],1),l[p].m(n,null))}for(re(),p=a.length;p<l.length;p+=1)o(p);ne()}},i(f){if(!s){for(let v=0;v<a.length;v+=1)k(l[v]);s=!0}},o(f){l=l.filter(Boolean);for(let v=0;v<l.length;v+=1)F(l[v]);s=!1},d(f){f&&(g(e),g(r),g(n)),ot(l,f)}}}function Mt(i){let e,t=i[21]+"",r;return{c(){e=A("li"),r=R(t)},l(n){e=V(n,"LI",{});var s=j(e);r=q(s,t),s.forEach(g)},m(n,s){y(n,e,s),M(e,r)},p(n,s){s&1&&t!==(t=n[21]+"")&&te(r,t)},i:me,o:me,d(n){n&&g(e)}}}function Pt(i){let e,t,r;return t=new _t({props:{href:i[22],$$slots:{default:[Rt]},$$scope:{ctx:i}}}),{c(){e=A("li"),N(t.$$.fragment)},l(n){e=V(n,"LI",{});var s=j(e);E(t.$$.fragment,s),s.forEach(g)},m(n,s){y(n,e,s),W(t,e,null),r=!0},p(n,s){const a={};s&1&&(a.href=n[22]),s&33554433&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(k(t.$$.fragment,n),r=!0)},o(n){F(t.$$.fragment,n),r=!1},d(n){n&&g(e),B(t)}}}function Rt(i){let e=i[21]+"",t;return{c(){t=R(e)},l(r){t=q(r,e)},m(r,n){y(r,t,n)},p(r,n){n&1&&e!==(e=r[21]+"")&&te(t,e)},d(r){r&&g(t)}}}function Re(i){let e,t,r,n;const s=[Pt,Mt],a=[];function l(o,f){return o[22]?0:1}return e=l(i),t=a[e]=s[e](i),{c(){t.c(),r=ee()},l(o){t.l(o),r=ee()},m(o,f){a[e].m(o,f),y(o,r,f),n=!0},p(o,f){let v=e;e=l(o),e===v?a[e].p(o,f):(re(),F(a[v],1,1,()=>{a[v]=null}),ne(),t=a[e],t?t.p(o,f):(t=a[e]=s[e](o),t.c()),k(t,1),t.m(r.parentNode,r))},i(o){n||(k(t),n=!0)},o(o){F(t),n=!1},d(o){o&&g(r),a[e].d(o)}}}function qe(i){let e,t="Guidance",r,n,s=$e(i[0],i[4].proposed.trafficData)+"",a;return{c(){e=A("u"),e.textContent=t,r=R(`
      :
      `),n=A("p"),a=R(s),this.h()},l(l){e=V(l,"U",{"data-svelte-h":!0}),ge(e)!=="svelte-qh7mhq"&&(e.textContent=t),r=q(l,`
      :
      `),n=V(l,"P",{style:!0});var o=j(n);a=q(o,s),o.forEach(g),this.h()},h(){ce(n,"max-width","400px")},m(l,o){y(l,e,o),y(l,r,o),y(l,n,o),M(n,a)},p(l,o){o&17&&s!==(s=$e(l[0],l[4].proposed.trafficData)+"")&&te(a,s)},d(l){l&&(g(e),g(r),g(n))}}}function qt(i){let e;return{c(){e=R("←")},l(t){e=q(t,"←")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function It(i){let e;return{c(){e=R("Delete")},l(t){e=q(t,"Delete")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function Ot(i){let e;return{c(){e=R("→")},l(t){e=q(t,"→")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function At(i){let e,t,r,n,s,a,l,o,f,v,p,u;function d($){i[11]($)}let h={label:"Street feature type",emptyOption:!0,choices:i[5]};i[3]!==void 0&&(h.value=i[3]),t=new ae({props:h}),z.push(()=>K(t,"value",d));let c=i[0]&&Me(i);return l=new ie({props:{disabled:i[1],$$slots:{default:[qt]},$$scope:{ctx:i}}}),l.$on("click",i[15]),f=new Ke({props:{$$slots:{default:[It]},$$scope:{ctx:i}}}),f.$on("click",i[16]),p=new ie({props:{disabled:i[2],$$slots:{default:[Ot]},$$scope:{ctx:i}}}),p.$on("click",i[17]),{c(){e=A("div"),N(t.$$.fragment),n=I(),c&&c.c(),s=I(),a=A("div"),N(l.$$.fragment),o=I(),N(f.$$.fragment),v=I(),N(p.$$.fragment),this.h()},l($){e=V($,"DIV",{class:!0});var m=j(e);E(t.$$.fragment,m),n=O(m),c&&c.l(m),s=O(m),a=V(m,"DIV",{style:!0,class:!0});var D=j(a);E(l.$$.fragment,D),o=O(D),E(f.$$.fragment,D),v=O(D),E(p.$$.fragment,D),D.forEach(g),m.forEach(g),this.h()},h(){ce(a,"display","flex"),ce(a,"justify-content","space-between"),x(a,"class","svelte-jig4ga"),x(e,"class","svelte-jig4ga")},m($,m){y($,e,m),W(t,e,null),M(e,n),c&&c.m(e,null),M(e,s),M(e,a),W(l,a,null),M(a,o),W(f,a,null),M(a,v),W(p,a,null),u=!0},p($,[m]){const D={};m&32&&(D.choices=$[5]),!r&&m&8&&(r=!0,D.value=$[3],Y(()=>r=!1)),t.$set(D),$[0]?c?(c.p($,m),m&1&&k(c,1)):(c=Me($),c.c(),k(c,1),c.m(e,s)):c&&(re(),F(c,1,1,()=>{c=null}),ne());const C={};m&2&&(C.disabled=$[1]),m&33554432&&(C.$$scope={dirty:m,ctx:$}),l.$set(C);const S={};m&33554432&&(S.$$scope={dirty:m,ctx:$}),f.$set(S);const _={};m&4&&(_.disabled=$[2]),m&33554432&&(_.$$scope={dirty:m,ctx:$}),p.$set(_)},i($){u||(k(t.$$.fragment,$),k(c),k(l.$$.fragment,$),k(f.$$.fragment,$),k(p.$$.fragment,$),u=!0)},o($){F(t.$$.fragment,$),F(c),F(l.$$.fragment,$),F(f.$$.fragment,$),F(p.$$.fragment,$),u=!1},d($){$&&g(e),B(t),c&&c.d(),B(l),B(f),B(p)}}}function Vt(i,e,t){let r,n,s,a;de(i,U,b=>t(4,a=b));let{value:l}=e,{isFirst:o}=e,{isLast:f}=e,{leftFeature:v}=e,{rightFeature:p}=e,u=He(),d=typeof l=="object"?`custom_${l.custom}`:l;function h(b){b.startsWith("custom_")?t(0,l={custom:b.slice(7)}):t(0,l=b)}function c(b){t(3,d=typeof b=="object"?`custom_${b.custom}`:b)}function $(b){let P=le(Qe);for(let[G,se]of Object.entries(b))P.push([`custom_${G}`,`Custom: ${se.name}`]);return P}function m(b){d=b,t(3,d)}const D=()=>u("addLeftBuffer"),C=()=>u("addRightBuffer"),S=()=>{u("addRightBuffer"),u("addLeftBuffer")},_=()=>u("moveLeft"),w=()=>u("delete"),L=()=>u("moveRight");return i.$$set=b=>{"value"in b&&t(0,l=b.value),"isFirst"in b&&t(1,o=b.isFirst),"isLast"in b&&t(2,f=b.isLast),"leftFeature"in b&&t(9,v=b.leftFeature),"rightFeature"in b&&t(10,p=b.rightFeature)},i.$$.update=()=>{i.$$.dirty&1537&&t(7,r=l&&ct(l,v,p)),i.$$.dirty&1553&&t(6,n=l?pt(l,a.proposed.trafficData,a.proposed.customFeatures,v,p):[0,0]),i.$$.dirty&8&&h(d),i.$$.dirty&1&&c(l),i.$$.dirty&16&&t(5,s=$(a.proposed.customFeatures))},[l,o,f,d,a,s,n,r,u,v,p,m,D,C,S,_,w,L]}class jt extends fe{constructor(e){super(),ue(this,e,Vt,At,oe,{value:0,isFirst:1,isLast:2,leftFeature:9,rightFeature:10})}}function Ie(i,e,t){const r=i.slice();return r[18]=e[t],r[19]=e,r[20]=t,r}function Ut(i){let e;return{c(){e=R("Add feature")},l(t){e=q(t,"Add feature")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function Oe(i,e){let t,r,n,s;function a(d){e[10](d,e[18],e[19],e[20])}function l(){return e[11](e[20])}function o(){return e[12](e[20])}function f(){return e[13](e[20])}function v(){return e[14](e[20])}function p(){return e[15](e[20])}let u={isFirst:e[20]==0,isLast:e[20]==e[0].length-1,leftFeature:e[20]==0?"":e[0][e[20]-1],rightFeature:e[20]==e[0].length-1?"":e[0][e[20]+1]};return e[18]!==void 0&&(u.value=e[18]),r=new jt({props:u}),z.push(()=>K(r,"value",a)),r.$on("delete",l),r.$on("moveLeft",o),r.$on("moveRight",f),r.$on("addLeftBuffer",v),r.$on("addRightBuffer",p),{key:i,first:null,c(){t=ee(),N(r.$$.fragment),this.h()},l(d){t=ee(),E(r.$$.fragment,d),this.h()},h(){this.first=t},m(d,h){y(d,t,h),W(r,d,h),s=!0},p(d,h){e=d;const c={};h&1&&(c.isFirst=e[20]==0),h&1&&(c.isLast=e[20]==e[0].length-1),h&1&&(c.leftFeature=e[20]==0?"":e[0][e[20]-1]),h&1&&(c.rightFeature=e[20]==e[0].length-1?"":e[0][e[20]+1]),!n&&h&1&&(n=!0,c.value=e[18],Y(()=>n=!1)),r.$set(c)},i(d){s||(k(r.$$.fragment,d),s=!0)},o(d){F(r.$$.fragment,d),s=!1},d(d){d&&g(t),B(r,d)}}}function Jt(i){let e,t,r,n,s,a=i[2][0].toFixed(2)+"",l,o,f,v,p,u=i[2][1].toFixed(2)+"",d,h,c,$=[],m=new Map,D;e=new ie({props:{$$slots:{default:[Ut]},$$scope:{ctx:i}}}),e.$on("click",i[3]);let C=pe(i[0]);const S=_=>_[20];for(let _=0;_<C.length;_+=1){let w=Ie(i,C,_),L=S(w);m.set(L,$[_]=Oe(L,w))}return{c(){N(e.$$.fragment),t=I(),r=A("p"),n=R("Desirable minimum total width required (m): "),s=A("b"),l=R(a),o=I(),f=A("p"),v=R("Absolute minimum total width required (m): "),p=A("b"),d=R(u),h=I(),c=A("div");for(let _=0;_<$.length;_+=1)$[_].c();this.h()},l(_){E(e.$$.fragment,_),t=O(_),r=V(_,"P",{});var w=j(r);n=q(w,"Desirable minimum total width required (m): "),s=V(w,"B",{});var L=j(s);l=q(L,a),L.forEach(g),w.forEach(g),o=O(_),f=V(_,"P",{});var b=j(f);v=q(b,"Absolute minimum total width required (m): "),p=V(b,"B",{});var P=j(p);d=q(P,u),P.forEach(g),b.forEach(g),h=O(_),c=V(_,"DIV",{style:!0});var G=j(c);for(let se=0;se<$.length;se+=1)$[se].l(G);G.forEach(g),this.h()},h(){ce(c,"display","flex"),ce(c,"flex-direction","row"),ce(c,"overflow-x","scroll")},m(_,w){W(e,_,w),y(_,t,w),y(_,r,w),M(r,n),M(r,s),M(s,l),y(_,o,w),y(_,f,w),M(f,v),M(f,p),M(p,d),y(_,h,w),y(_,c,w);for(let L=0;L<$.length;L+=1)$[L]&&$[L].m(c,null);i[16](c),D=!0},p(_,[w]){const L={};w&2097152&&(L.$$scope={dirty:w,ctx:_}),e.$set(L),(!D||w&4)&&a!==(a=_[2][0].toFixed(2)+"")&&te(l,a),(!D||w&4)&&u!==(u=_[2][1].toFixed(2)+"")&&te(d,u),w&241&&(C=pe(_[0]),re(),$=Ge($,w,S,1,_,C,m,c,Ye,Oe,null,Ie),ne())},i(_){if(!D){k(e.$$.fragment,_);for(let w=0;w<C.length;w+=1)k($[w]);D=!0}},o(_){F(e.$$.fragment,_);for(let w=0;w<$.length;w+=1)F($[w]);D=!1},d(_){_&&(g(t),g(r),g(o),g(f),g(h),g(c)),B(e,_);for(let w=0;w<$.length;w+=1)$[w].d();i[16](null)}}}function Ht(i,e,t){let r,n;de(i,U,_=>t(9,n=_));let{streetFeaturesLeftToRight:s}=e,{sectionType:a}=e,l,o=!1;ft(()=>{o&&(o=!1,t(1,l.scrollLeft=l.scrollWidth,l))});function f(){t(0,s=[...s,""]),o=!0}function v(_){s.splice(_,1),t(0,s)}function p(_){t(0,[s[_-1],s[_]]=[s[_],s[_-1]],s)}function u(_){t(0,[s[_+1],s[_]]=[s[_],s[_+1]],s)}function d(_){s.splice(_,0,"Buffer / Verge"),t(0,s)}function h(_,w,L,b){L[b]=_,t(0,s)}const c=_=>v(_),$=_=>p(_),m=_=>u(_),D=_=>d(_),C=_=>d(_+1);function S(_){z[_?"unshift":"push"](()=>{l=_,t(1,l)})}return i.$$set=_=>{"streetFeaturesLeftToRight"in _&&t(0,s=_.streetFeaturesLeftToRight),"sectionType"in _&&t(8,a=_.sectionType)},i.$$.update=()=>{i.$$.dirty&768&&t(2,r=dt(n,a))},[s,l,r,f,v,p,u,d,a,n,h,c,$,m,D,C,S]}class et extends fe{constructor(e){super(),ue(this,e,Ht,Jt,oe,{streetFeaturesLeftToRight:0,sectionType:8})}}function zt(i){let e;return{c(){e=R("Confirm")},l(t){e=q(t,"Confirm")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function Gt(i){let e;return{c(){e=R("Cancel")},l(t){e=q(t,"Cancel")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function Yt(i){let e,t,r,n,s,a,l,o,f,v,p,u;function d(m){i[6](m)}let h={label:"Name"};i[0]!==void 0&&(h.value=i[0]),e=new gt({props:h}),z.push(()=>K(e,"value",d));function c(m){i[7](m)}let $={label:"Minimum width (m)",width:4,min:0};return i[1]!==void 0&&($.value=i[1]),n=new mt({props:$}),z.push(()=>K(n,"value",c)),l=new xe({props:{errorMessage:i[2]}}),f=new ht({props:{disabled:i[2]!="",$$slots:{default:[zt]},$$scope:{ctx:i}}}),f.$on("click",i[8]),p=new ie({props:{$$slots:{default:[Gt]},$$scope:{ctx:i}}}),p.$on("click",i[9]),{c(){N(e.$$.fragment),r=I(),N(n.$$.fragment),a=I(),N(l.$$.fragment),o=I(),N(f.$$.fragment),v=I(),N(p.$$.fragment)},l(m){E(e.$$.fragment,m),r=O(m),E(n.$$.fragment,m),a=O(m),E(l.$$.fragment,m),o=O(m),E(f.$$.fragment,m),v=O(m),E(p.$$.fragment,m)},m(m,D){W(e,m,D),y(m,r,D),W(n,m,D),y(m,a,D),W(l,m,D),y(m,o,D),W(f,m,D),y(m,v,D),W(p,m,D),u=!0},p(m,D){const C={};!t&&D&1&&(t=!0,C.value=m[0],Y(()=>t=!1)),e.$set(C);const S={};!s&&D&2&&(s=!0,S.value=m[1],Y(()=>s=!1)),n.$set(S);const _={};D&4&&(_.errorMessage=m[2]),l.$set(_);const w={};D&4&&(w.disabled=m[2]!=""),D&4096&&(w.$$scope={dirty:D,ctx:m}),f.$set(w);const L={};D&4096&&(L.$$scope={dirty:D,ctx:m}),p.$set(L)},i(m){u||(k(e.$$.fragment,m),k(n.$$.fragment,m),k(l.$$.fragment,m),k(f.$$.fragment,m),k(p.$$.fragment,m),u=!0)},o(m){F(e.$$.fragment,m),F(n.$$.fragment,m),F(l.$$.fragment,m),F(f.$$.fragment,m),F(p.$$.fragment,m),u=!1},d(m){m&&(g(r),g(a),g(o),g(v)),B(e,m),B(n,m),B(l,m),B(f,m),B(p,m)}}}function Kt(i){let e,t;return e=new bt({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[Yt]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,n){W(e,r,n),t=!0},p(r,[n]){const s={};n&4103&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Qt(i,e,t){let r,n;de(i,U,c=>t(10,n=c));let{initialName:s}=e,{initialWidth:a}=e,l=He(),o=s,f=a;function v(c,$){return c==""?"Name must be specified":c!=s&&Object.values(n.proposed.customFeatures).some(m=>m.name==c)?"That name is already used by another custom feature":Qe.includes(c)?"That name is the same as one of the built-in features":isNaN($)?"Enter a valid width":$<=0?"Enter a positive width":""}function p(c){o=c,t(0,o)}function u(c){f=c,t(1,f)}const d=()=>l("confirm",{name:o,width:f}),h=()=>l("cancel");return i.$$set=c=>{"initialName"in c&&t(4,s=c.initialName),"initialWidth"in c&&t(5,a=c.initialWidth)},i.$$.update=()=>{i.$$.dirty&3&&t(2,r=v(o,f))},[o,f,r,l,s,a,p,u,d,h]}class Xt extends fe{constructor(e){super(),ue(this,e,Qt,Kt,oe,{initialName:4,initialWidth:5})}}function Ae(i,e,t){const r=i.slice();return r[9]=e[t],r}function Zt(i){let e;return{c(){e=R("Add feature")},l(t){e=q(t,"Add feature")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function xt(i){let e;return{c(){e=R("Edit")},l(t){e=q(t,"Edit")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function er(i){let e;return{c(){e=R("Delete")},l(t){e=q(t,"Delete")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function Ve(i,e){let t,r,n,s=e[1].proposed.customFeatures[e[9]].name+"",a,l,o=e[1].proposed.customFeatures[e[9]].width+"",f,v,p,u,d,h,c,$;function m(){return e[6](e[9])}u=new ie({props:{$$slots:{default:[xt]},$$scope:{ctx:e}}}),u.$on("click",m);function D(){return e[7](e[9])}return h=new Ke({props:{$$slots:{default:[er]},$$scope:{ctx:e}}}),h.$on("click",D),{key:i,first:null,c(){t=A("li"),r=A("span"),n=A("u"),a=R(s),l=R(`
        : `),f=R(o),v=R(" m minimum width"),p=I(),N(u.$$.fragment),d=I(),N(h.$$.fragment),c=I(),this.h()},l(C){t=V(C,"LI",{});var S=j(t);r=V(S,"SPAN",{});var _=j(r);n=V(_,"U",{});var w=j(n);a=q(w,s),w.forEach(g),l=q(_,`
        : `),f=q(_,o),v=q(_," m minimum width"),_.forEach(g),p=O(S),E(u.$$.fragment,S),d=O(S),E(h.$$.fragment,S),c=O(S),S.forEach(g),this.h()},h(){this.first=t},m(C,S){y(C,t,S),M(t,r),M(r,n),M(n,a),M(r,l),M(r,f),M(r,v),M(t,p),W(u,t,null),M(t,d),W(h,t,null),M(t,c),$=!0},p(C,S){e=C,(!$||S&2)&&s!==(s=e[1].proposed.customFeatures[e[9]].name+"")&&te(a,s),(!$||S&2)&&o!==(o=e[1].proposed.customFeatures[e[9]].width+"")&&te(f,o);const _={};S&4096&&(_.$$scope={dirty:S,ctx:e}),u.$set(_);const w={};S&4096&&(w.$$scope={dirty:S,ctx:e}),h.$set(w)},i(C){$||(k(u.$$.fragment,C),k(h.$$.fragment,C),$=!0)},o(C){F(u.$$.fragment,C),F(h.$$.fragment,C),$=!1},d(C){C&&g(t),B(u),B(h)}}}function je(i){let e,t;return e=new Xt({props:{initialName:i[0].initialName,initialWidth:i[0].initialWidth}}),e.$on("cancel",i[8]),e.$on("confirm",i[5]),{c(){N(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,n){W(e,r,n),t=!0},p(r,n){const s={};n&1&&(s.initialName=r[0].initialName),n&1&&(s.initialWidth=r[0].initialWidth),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function tr(i){let e,t,r,n=[],s=new Map,a,l,o;e=new ie({props:{$$slots:{default:[Zt]},$$scope:{ctx:i}}}),e.$on("click",i[2]);let f=pe(Object.keys(i[1].proposed.customFeatures));const v=u=>u[9];for(let u=0;u<f.length;u+=1){let d=Ae(i,f,u),h=v(d);s.set(h,n[u]=Ve(h,d))}let p=i[0]&&je(i);return{c(){N(e.$$.fragment),t=I(),r=A("ol");for(let u=0;u<n.length;u+=1)n[u].c();a=I(),p&&p.c(),l=ee()},l(u){E(e.$$.fragment,u),t=O(u),r=V(u,"OL",{});var d=j(r);for(let h=0;h<n.length;h+=1)n[h].l(d);d.forEach(g),a=O(u),p&&p.l(u),l=ee()},m(u,d){W(e,u,d),y(u,t,d),y(u,r,d);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(r,null);y(u,a,d),p&&p.m(u,d),y(u,l,d),o=!0},p(u,[d]){const h={};d&4096&&(h.$$scope={dirty:d,ctx:u}),e.$set(h),d&26&&(f=pe(Object.keys(u[1].proposed.customFeatures)),re(),n=Ge(n,d,v,1,u,f,s,r,Ye,Ve,null,Ae),ne()),u[0]?p?(p.p(u,d),d&1&&k(p,1)):(p=je(u),p.c(),k(p,1),p.m(l.parentNode,l)):p&&(re(),F(p,1,1,()=>{p=null}),ne())},i(u){if(!o){k(e.$$.fragment,u);for(let d=0;d<f.length;d+=1)k(n[d]);k(p),o=!0}},o(u){F(e.$$.fragment,u);for(let d=0;d<n.length;d+=1)F(n[d]);F(p),o=!1},d(u){u&&(g(t),g(r),g(a),g(l)),B(e,u);for(let d=0;d<n.length;d+=1)n[d].d();p&&p.d(u)}}}function rr(i,e,t){let r;de(i,U,u=>t(1,r=u));let n=null;function s(){t(0,n={id:Ze(),initialName:"",initialWidth:0})}function a(u){let d=r.proposed.customFeatures[u].name,h=JSON.stringify({custom:u});if(r.proposed.desirableMinimumCrossSection.some(c=>JSON.stringify(c)==h)){window.alert(`The ${d} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(r.proposed.absoluteMinimumCrossSection.some(c=>JSON.stringify(c)==h)){window.alert(`The ${d} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete r.proposed.customFeatures[u],U.set(r)}function l(u){t(0,n={id:u,initialName:r.proposed.customFeatures[u].name,initialWidth:r.proposed.customFeatures[u].width})}function o(u){ze(U,r.proposed.customFeatures[n.id]={name:u.detail.name,width:u.detail.width},r),U.set(r),t(0,n=null)}return[n,r,s,a,l,o,u=>l(u),u=>a(u),()=>t(0,n=null)]}class nr extends fe{constructor(e){super(),ue(this,e,rr,tr,oe,{})}}function Ue(i){let e,t,r,n,s;return{c(){e=A("p"),t=A("i"),r=R("Effective speed limit, based on the limit and 85 percentile: "),n=R(i[1]),s=R(`
            mph`)},l(a){e=V(a,"P",{});var l=j(e);t=V(l,"I",{});var o=j(t);r=q(o,"Effective speed limit, based on the limit and 85 percentile: "),n=q(o,i[1]),s=q(o,`
            mph`),o.forEach(g),l.forEach(g)},m(a,l){y(a,e,l),M(e,t),M(t,r),M(t,n),M(t,s)},p(a,l){l&2&&te(n,a[1])},d(a){a&&g(e)}}}function ir(i){let e,t,r,n,s,a,l,o,f,v,p,u,d,h,c,$,m,D,C,S,_,w,L,b,P;function G(T){i[4](T)}let se={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:le(["<200","200-800",">800"])};i[0].proposed.trafficData.flowOneWay!==void 0&&(se.value=i[0].proposed.trafficData.flowOneWay),r=new ae({props:se}),z.push(()=>K(r,"value",G));function tt(T){i[5](T)}let ve={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:le(["<300","300-1,000",">1,000"])};i[0].proposed.trafficData.flowTwoWay!==void 0&&(ve.value=i[0].proposed.trafficData.flowTwoWay),a=new ae({props:ve}),z.push(()=>K(a,"value",tt));function rt(T){i[6](T)}let we={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:le(["<300",">300"])};i[0].proposed.trafficData.flowSharedUse!==void 0&&(we.value=i[0].proposed.trafficData.flowSharedUse),f=new ae({props:we}),z.push(()=>K(f,"value",rt));function nt(T){i[7](T)}let ke={label:"Traffic flow (vpd)",emptyOption:!0,choices:le(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};i[0].proposed.trafficData.trafficFlow!==void 0&&(ke.value=i[0].proposed.trafficData.trafficFlow),u=new ae({props:ke}),z.push(()=>K(u,"value",nt));let J=i[1]&&Ue(i);function it(T){i[8](T)}let ye={label:"Speed limit (MPH)",emptyOption:!0,choices:i[2]};i[0].proposed.trafficData.speedLimit!==void 0&&(ye.value=i[0].proposed.trafficData.speedLimit),m=new ae({props:ye}),z.push(()=>K(m,"value",it));function st(T){i[9](T)}let Fe={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};i[0].proposed.trafficData.observedSpeed!==void 0&&(Fe.value=i[0].proposed.trafficData.observedSpeed),S=new yt({props:Fe}),z.push(()=>K(S,"value",st));function at(T){i[10](T)}let De={label:"Street function",emptyOption:!0,choices:le(["High Street (active frontages)","Residential street","Local distributor road"])};return i[0].proposed.trafficData.streetFunction!==void 0&&(De.value=i[0].proposed.trafficData.streetFunction),L=new ae({props:De}),z.push(()=>K(L,"value",at)),{c(){e=A("div"),t=A("div"),N(r.$$.fragment),s=I(),N(a.$$.fragment),o=I(),N(f.$$.fragment),p=I(),N(u.$$.fragment),h=I(),c=A("div"),J&&J.c(),$=I(),N(m.$$.fragment),C=I(),N(S.$$.fragment),w=I(),N(L.$$.fragment),this.h()},l(T){e=V(T,"DIV",{class:!0});var H=j(e);t=V(H,"DIV",{class:!0});var X=j(t);E(r.$$.fragment,X),s=O(X),E(a.$$.fragment,X),o=O(X),E(f.$$.fragment,X),p=O(X),E(u.$$.fragment,X),X.forEach(g),h=O(H),c=V(H,"DIV",{class:!0});var Z=j(c);J&&J.l(Z),$=O(Z),E(m.$$.fragment,Z),C=O(Z),E(S.$$.fragment,Z),w=O(Z),E(L.$$.fragment,Z),Z.forEach(g),H.forEach(g),this.h()},h(){x(t,"class","govuk-grid-column-one-half"),x(c,"class","govuk-grid-column-one-half"),x(e,"class","govuk-grid-row")},m(T,H){y(T,e,H),M(e,t),W(r,t,null),M(t,s),W(a,t,null),M(t,o),W(f,t,null),M(t,p),W(u,t,null),M(e,h),M(e,c),J&&J.m(c,null),M(c,$),W(m,c,null),M(c,C),W(S,c,null),M(c,w),W(L,c,null),P=!0},p(T,H){const X={};!n&&H&1&&(n=!0,X.value=T[0].proposed.trafficData.flowOneWay,Y(()=>n=!1)),r.$set(X);const Z={};!l&&H&1&&(l=!0,Z.value=T[0].proposed.trafficData.flowTwoWay,Y(()=>l=!1)),a.$set(Z);const Se={};!v&&H&1&&(v=!0,Se.value=T[0].proposed.trafficData.flowSharedUse,Y(()=>v=!1)),f.$set(Se);const Le={};!d&&H&1&&(d=!0,Le.value=T[0].proposed.trafficData.trafficFlow,Y(()=>d=!1)),u.$set(Le),T[1]?J?J.p(T,H):(J=Ue(T),J.c(),J.m(c,$)):J&&(J.d(1),J=null);const Te={};!D&&H&1&&(D=!0,Te.value=T[0].proposed.trafficData.speedLimit,Y(()=>D=!1)),m.$set(Te);const Ce={};!_&&H&1&&(_=!0,Ce.value=T[0].proposed.trafficData.observedSpeed,Y(()=>_=!1)),S.$set(Ce);const Ne={};!b&&H&1&&(b=!0,Ne.value=T[0].proposed.trafficData.streetFunction,Y(()=>b=!1)),L.$set(Ne)},i(T){P||(k(r.$$.fragment,T),k(a.$$.fragment,T),k(f.$$.fragment,T),k(u.$$.fragment,T),k(m.$$.fragment,T),k(S.$$.fragment,T),k(L.$$.fragment,T),P=!0)},o(T){F(r.$$.fragment,T),F(a.$$.fragment,T),F(f.$$.fragment,T),F(u.$$.fragment,T),F(m.$$.fragment,T),F(S.$$.fragment,T),F(L.$$.fragment,T),P=!1},d(T){T&&g(e),B(r),B(a),B(f),B(u),J&&J.d(),B(m),B(S),B(L)}}}function sr(i){let e,t;return e=new _e({props:{label:"Traffic data and additional information",open:!0,$$slots:{default:[ir]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,n){W(e,r,n),t=!0},p(r,[n]){const s={};n&2051&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function ar(i,e,t){let r,n;de(i,U,h=>t(0,n=h));let{valid:s}=e,a=le(ut);function l(h){i.$$.not_equal(n.proposed.trafficData.flowOneWay,h)&&(n.proposed.trafficData.flowOneWay=h,U.set(n))}function o(h){i.$$.not_equal(n.proposed.trafficData.flowTwoWay,h)&&(n.proposed.trafficData.flowTwoWay=h,U.set(n))}function f(h){i.$$.not_equal(n.proposed.trafficData.flowSharedUse,h)&&(n.proposed.trafficData.flowSharedUse=h,U.set(n))}function v(h){i.$$.not_equal(n.proposed.trafficData.trafficFlow,h)&&(n.proposed.trafficData.trafficFlow=h,U.set(n))}function p(h){i.$$.not_equal(n.proposed.trafficData.speedLimit,h)&&(n.proposed.trafficData.speedLimit=h,U.set(n))}function u(h){i.$$.not_equal(n.proposed.trafficData.observedSpeed,h)&&(n.proposed.trafficData.observedSpeed=h,U.set(n))}function d(h){i.$$.not_equal(n.proposed.trafficData.streetFunction,h)&&(n.proposed.trafficData.streetFunction=h,U.set(n))}return i.$$set=h=>{"valid"in h&&t(3,s=h.valid)},i.$$.update=()=>{i.$$.dirty&1&&t(3,s=n.proposed.trafficData.flowOneWay!=""&&n.proposed.trafficData.flowTwoWay!=""&&n.proposed.trafficData.flowSharedUse!=""&&n.proposed.trafficData.trafficFlow!=""&&n.proposed.trafficData.speedLimit!=""&&n.proposed.trafficData.observedSpeed!=null&&n.proposed.trafficData.streetFunction!=""),i.$$.dirty&1&&t(1,r=Xe(n.proposed.trafficData.speedLimit,n.proposed.trafficData.observedSpeed))},[n,r,a,s,l,o,f,v,p,u,d]}class lr extends fe{constructor(e){super(),ue(this,e,ar,sr,oe,{valid:3})}}function or(i){let e,t;return e=new nr({}),{c(){N(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,n){W(e,r,n),t=!0},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function fr(i){let e,t="Fill out all traffic data above to continue";return{c(){e=A("p"),e.textContent=t},l(r){e=V(r,"P",{"data-svelte-h":!0}),ge(e)!=="svelte-72a5ry"&&(e.textContent=t)},m(r,n){y(r,e,n)},p:me,i:me,o:me,d(r){r&&g(e)}}}function ur(i){let e,t,r,n;return e=new _e({props:{label:"Preferred Cross-Section",open:!0,$$slots:{default:[cr]},$$scope:{ctx:i}}}),r=new _e({props:{label:"Compromised Cross-Section",open:!0,$$slots:{default:[dr]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),t=I(),N(r.$$.fragment)},l(s){E(e.$$.fragment,s),t=O(s),E(r.$$.fragment,s)},m(s,a){W(e,s,a),y(s,t,a),W(r,s,a),n=!0},p(s,a){const l={};a&66&&(l.$$scope={dirty:a,ctx:s}),e.$set(l);const o={};a&66&&(o.$$scope={dirty:a,ctx:s}),r.$set(o)},i(s){n||(k(e.$$.fragment,s),k(r.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),F(r.$$.fragment,s),n=!1},d(s){s&&g(t),B(e,s),B(r,s)}}}function cr(i){let e,t,r;function n(a){i[4](a)}let s={sectionType:"Preferred"};return i[1].proposed.desirableMinimumCrossSection!==void 0&&(s.streetFeaturesLeftToRight=i[1].proposed.desirableMinimumCrossSection),e=new et({props:s}),z.push(()=>K(e,"streetFeaturesLeftToRight",n)),{c(){N(e.$$.fragment)},l(a){E(e.$$.fragment,a)},m(a,l){W(e,a,l),r=!0},p(a,l){const o={};!t&&l&2&&(t=!0,o.streetFeaturesLeftToRight=a[1].proposed.desirableMinimumCrossSection,Y(()=>t=!1)),e.$set(o)},i(a){r||(k(e.$$.fragment,a),r=!0)},o(a){F(e.$$.fragment,a),r=!1},d(a){B(e,a)}}}function Je(i){let e,t;return e=new ie({props:{$$slots:{default:[pr]},$$scope:{ctx:i}}}),e.$on("click",i[2]),{c(){N(e.$$.fragment)},l(r){E(e.$$.fragment,r)},m(r,n){W(e,r,n),t=!0},p(r,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function pr(i){let e;return{c(){e=R("Copy Preferred")},l(t){e=q(t,"Copy Preferred")},m(t,r){y(t,e,r)},d(t){t&&g(e)}}}function dr(i){let e,t,r,n,s=i[1].proposed.absoluteMinimumCrossSection.length==0&&Je(i);function a(o){i[5](o)}let l={sectionType:"Compromised"};return i[1].proposed.absoluteMinimumCrossSection!==void 0&&(l.streetFeaturesLeftToRight=i[1].proposed.absoluteMinimumCrossSection),t=new et({props:l}),z.push(()=>K(t,"streetFeaturesLeftToRight",a)),{c(){s&&s.c(),e=I(),N(t.$$.fragment)},l(o){s&&s.l(o),e=O(o),E(t.$$.fragment,o)},m(o,f){s&&s.m(o,f),y(o,e,f),W(t,o,f),n=!0},p(o,f){o[1].proposed.absoluteMinimumCrossSection.length==0?s?(s.p(o,f),f&2&&k(s,1)):(s=Je(o),s.c(),k(s,1),s.m(e.parentNode,e)):s&&(re(),F(s,1,1,()=>{s=null}),ne());const v={};!r&&f&2&&(r=!0,v.streetFeaturesLeftToRight=o[1].proposed.absoluteMinimumCrossSection,Y(()=>r=!1)),t.$set(v)},i(o){n||(k(s),k(t.$$.fragment,o),n=!0)},o(o){F(s),F(t.$$.fragment,o),n=!1},d(o){o&&g(e),s&&s.d(o),B(t,o)}}}function mr(i){let e,t,r,n,s,a,l,o,f;function v(c){i[3](c)}let p={};i[0]!==void 0&&(p.valid=i[0]),e=new lr({props:p}),z.push(()=>K(e,"valid",v)),n=new _e({props:{label:"Custom Street Features",$$slots:{default:[or]},$$scope:{ctx:i}}});const u=[ur,fr],d=[];function h(c,$){return c[0]?0:1}return a=h(i),l=d[a]=u[a](i),{c(){N(e.$$.fragment),r=I(),N(n.$$.fragment),s=I(),l.c(),o=ee()},l(c){E(e.$$.fragment,c),r=O(c),E(n.$$.fragment,c),s=O(c),l.l(c),o=ee()},m(c,$){W(e,c,$),y(c,r,$),W(n,c,$),y(c,s,$),d[a].m(c,$),y(c,o,$),f=!0},p(c,[$]){const m={};!t&&$&1&&(t=!0,m.valid=c[0],Y(()=>t=!1)),e.$set(m);const D={};$&64&&(D.$$scope={dirty:$,ctx:c}),n.$set(D);let C=a;a=h(c),a===C?d[a].p(c,$):(re(),F(d[C],1,1,()=>{d[C]=null}),ne(),l=d[a],l?l.p(c,$):(l=d[a]=u[a](c),l.c()),k(l,1),l.m(o.parentNode,o))},i(c){f||(k(e.$$.fragment,c),k(n.$$.fragment,c),k(l),f=!0)},o(c){F(e.$$.fragment,c),F(n.$$.fragment,c),F(l),f=!1},d(c){c&&(g(r),g(s),g(o)),B(e,c),B(n,c),d[a].d(c)}}}function _r(i,e,t){let r;de(i,U,f=>t(1,r=f));let n=!1;function s(){ze(U,r.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(r.proposed.desirableMinimumCrossSection)),r)}function a(f){n=f,t(0,n)}function l(f){i.$$.not_equal(r.proposed.desirableMinimumCrossSection,f)&&(r.proposed.desirableMinimumCrossSection=f,U.set(r))}function o(f){i.$$.not_equal(r.proposed.absoluteMinimumCrossSection,f)&&(r.proposed.absoluteMinimumCrossSection=f,U.set(r))}return[n,r,s,a,l,o]}class Wr extends fe{constructor(e){super(),ue(this,e,_r,mr,oe,{})}}export{Wr as component};
