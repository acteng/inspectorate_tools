import{s as _e,B as te,i as $,n as ye,f as d,r as qe,e as D,t as B,a as W,c as E,b as V,d as F,g as M,h as S,m as Z,o as he,v as le,j as me,w as oe,k as De,P as st,x as K,z as it,T as at,R as tt,S as Oe}from"../chunks/scheduler.DYUcsWQI.js";import{S as ge,i as $e,e as se,c as q,b as L,m as H,t as k,g as ce,a as w,f as ue,d as A}from"../chunks/index.ADnkt-Ju.js";import{e as ne,u as rt,o as ft}from"../chunks/each.DIuDx0dE.js";import{W as nt,S as Le}from"../chunks/WarningButton.BqcOaKQN.js";import{s as G}from"../chunks/data.C7L2cPJs.js";import"../chunks/paths.6b30oxtC.js";import{D as lt}from"../chunks/DecimalInput.CofcPr8A.js";import{T as ot}from"../chunks/TextArea._Thf8ozb.js";/* empty css                                                               */import{B as ct,G as ut,C as mt,a as ht,S as pt,M as dt}from"../chunks/GeoreferenceLayer.svelte_svelte_type_style_lang.C-MJenq1.js";import{D as _t,C as gt}from"../chunks/DefaultButton.CSQ3YXV3.js";import{M as $t,b as bt,C as vt}from"../chunks/index.CQGpYuiQ.js";import{c as Ge}from"../chunks/logic.Ct59EqJd.js";function Re(o,e,n){const t=o.slice();return t[4]=e[n][0],t[5]=e[n][1][0],t[6]=e[n][1][1],t}function kt(o){let e,n="Insufficient Space";return{c(){e=D("strong"),e.textContent=n,this.h()},l(t){e=E(t,"STRONG",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-9xvf61"&&(e.textContent=n),this.h()},h(){he(e,"class","govuk-tag govuk-tag--red")},m(t,a){$(t,e,a)},d(t){t&&d(e)}}}function wt(o){let e,n="Absolute Minimum";return{c(){e=D("strong"),e.textContent=n,this.h()},l(t){e=E(t,"STRONG",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-hmipw0"&&(e.textContent=n),this.h()},h(){he(e,"class","govuk-tag govuk-tag--yellow")},m(t,a){$(t,e,a)},d(t){t&&d(e)}}}function Tt(o){let e,n="Desirable Minimum";return{c(){e=D("strong"),e.textContent=n,this.h()},l(t){e=E(t,"STRONG",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-11simwv"&&(e.textContent=n),this.h()},h(){he(e,"class","govuk-tag govuk-tag--green")},m(t,a){$(t,e,a)},d(t){t&&d(e)}}}function Ue(o){let e,n=o[4]+"",t,a,f;function l(u,c){return u[0]>=u[5]?Tt:u[0]>u[6]?wt:kt}let i=l(o),s=i(o);return{c(){e=D("p"),t=B(n),a=B(` cross sections possible:
    `),s.c(),f=W()},l(u){e=E(u,"P",{});var c=V(e);t=F(c,n),a=F(c,` cross sections possible:
    `),s.l(c),f=M(c),c.forEach(d)},m(u,c){$(u,e,c),S(e,t),S(e,a),s.m(e,null),S(e,f)},p(u,c){i!==(i=l(u))&&(s.d(1),s=i(u),s&&(s.c(),s.m(e,f)))},d(u){u&&d(e),s.d()}}}function Ct(o){let e,n=ne(o[1]),t=[];for(let a=0;a<n.length;a+=1)t[a]=Ue(Re(o,n,a));return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=te()},l(a){for(let f=0;f<t.length;f+=1)t[f].l(a);e=te()},m(a,f){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(a,f);$(a,e,f)},p(a,[f]){if(f&3){n=ne(a[1]);let l;for(l=0;l<n.length;l+=1){const i=Re(a,n,l);t[l]?t[l].p(i,f):(t[l]=Ue(i),t[l].c(),t[l].m(e.parentNode,e))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},i:ye,o:ye,d(a){a&&d(e),qe(t,a)}}}function Pt(o,e,n){let{available:t}=e,{preferredTotals:a}=e,{compromisedTotals:f}=e,l=[["Preferred",a],["Compromised",f]];return o.$$set=i=>{"available"in i&&n(0,t=i.available),"preferredTotals"in i&&n(2,a=i.preferredTotals),"compromisedTotals"in i&&n(3,f=i.compromisedTotals)},[t,l,a,f]}class He extends ge{constructor(e){super(),$e(this,e,Pt,Ct,_e,{available:0,preferredTotals:2,compromisedTotals:3})}}function ze(o){let e,n,t;function a(l){o[6](l)}let f={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return o[3].checks.homogeneousSections[o[0]].notes!==void 0&&(f.value=o[3].checks.homogeneousSections[o[0]].notes),e=new ot({props:f}),le.push(()=>se(e,"value",a)),{c(){q(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,i){H(e,l,i),t=!0},p(l,i){const s={};!n&&i&9&&(n=!0,s.value=l[3].checks.homogeneousSections[l[0]].notes,oe(()=>n=!1)),e.$set(s)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){A(e,l)}}}function St(o){let e;return{c(){e=B("Delete")},l(n){e=F(n,"Delete")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Wt(o){let e,n,t,a=o[0]+1+"",f,l,i,s,u,c,r,m,_,p;function P(v){o[5](v)}let I={label:"Available width (m)",width:4,min:0};o[3].checks.homogeneousSections[o[0]].availableWidth!==void 0&&(I.value=o[3].checks.homogeneousSections[o[0]].availableWidth),i=new lt({props:I}),le.push(()=>se(i,"value",P)),c=new He({props:{available:o[3].checks.homogeneousSections[o[0]].availableWidth,preferredTotals:o[1],compromisedTotals:o[2]}});let b=o[3].checks.homogeneousSections[o[0]].availableWidth<o[1][0]&&ze(o);return _=new nt({props:{$$slots:{default:[St]},$$scope:{ctx:o}}}),_.$on("click",o[7]),{c(){e=D("div"),n=D("u"),t=B("Cross-section #"),f=B(a),l=W(),q(i.$$.fragment),u=W(),q(c.$$.fragment),r=W(),b&&b.c(),m=W(),q(_.$$.fragment),this.h()},l(v){e=E(v,"DIV",{class:!0});var T=V(e);n=E(T,"U",{});var N=V(n);t=F(N,"Cross-section #"),f=F(N,a),N.forEach(d),l=M(T),L(i.$$.fragment,T),u=M(T),L(c.$$.fragment,T),r=M(T),b&&b.l(T),m=M(T),L(_.$$.fragment,T),T.forEach(d),this.h()},h(){he(e,"class","svelte-d4ufy0")},m(v,T){$(v,e,T),S(e,n),S(n,t),S(n,f),S(e,l),H(i,e,null),S(e,u),H(c,e,null),S(e,r),b&&b.m(e,null),S(e,m),H(_,e,null),p=!0},p(v,[T]){(!p||T&1)&&a!==(a=v[0]+1+"")&&me(f,a);const N={};!s&&T&9&&(s=!0,N.value=v[3].checks.homogeneousSections[v[0]].availableWidth,oe(()=>s=!1)),i.$set(N);const R={};T&9&&(R.available=v[3].checks.homogeneousSections[v[0]].availableWidth),T&2&&(R.preferredTotals=v[1]),T&4&&(R.compromisedTotals=v[2]),c.$set(R),v[3].checks.homogeneousSections[v[0]].availableWidth<v[1][0]?b?(b.p(v,T),T&11&&k(b,1)):(b=ze(v),b.c(),k(b,1),b.m(e,m)):b&&(ce(),w(b,1,1,()=>{b=null}),ue());const O={};T&256&&(O.$$scope={dirty:T,ctx:v}),_.$set(O)},i(v){p||(k(i.$$.fragment,v),k(c.$$.fragment,v),k(b),k(_.$$.fragment,v),p=!0)},o(v){w(i.$$.fragment,v),w(c.$$.fragment,v),w(b),w(_.$$.fragment,v),p=!1},d(v){v&&d(e),A(i),A(c),b&&b.d(),A(_)}}}function Mt(o,e,n){let t;De(o,G,r=>n(3,t=r));let{i:a}=e,{preferredTotals:f}=e,{compromisedTotals:l}=e,i=st();function s(r){o.$$.not_equal(t.checks.homogeneousSections[a].availableWidth,r)&&(t.checks.homogeneousSections[a].availableWidth=r,G.set(t))}function u(r){o.$$.not_equal(t.checks.homogeneousSections[a].notes,r)&&(t.checks.homogeneousSections[a].notes=r,G.set(t))}const c=()=>i("delete");return o.$$set=r=>{"i"in r&&n(0,a=r.i),"preferredTotals"in r&&n(1,f=r.preferredTotals),"compromisedTotals"in r&&n(2,l=r.compromisedTotals)},[a,f,l,t,i,s,u,c]}class Dt extends ge{constructor(e){super(),$e(this,e,Mt,Wt,_e,{i:0,preferredTotals:1,compromisedTotals:2})}}function Ze(o){let e,n,t;function a(l){o[5](l)}let f={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return o[3].checks.pinchPoints[o[0]].notes!==void 0&&(f.value=o[3].checks.pinchPoints[o[0]].notes),e=new ot({props:f}),le.push(()=>se(e,"value",a)),{c(){q(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,i){H(e,l,i),t=!0},p(l,i){const s={};!n&&i&9&&(n=!0,s.value=l[3].checks.pinchPoints[l[0]].notes,oe(()=>n=!1)),e.$set(s)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){A(e,l)}}}function Et(o){let e,n,t,a,f,l,i;function s(r){o[4](r)}let u={label:"Available width (m)",width:4,min:0};o[3].checks.pinchPoints[o[0]].availableWidth!==void 0&&(u.value=o[3].checks.pinchPoints[o[0]].availableWidth),n=new lt({props:u}),le.push(()=>se(n,"value",s)),f=new He({props:{available:o[3].checks.pinchPoints[o[0]].availableWidth,preferredTotals:o[1],compromisedTotals:o[2]}});let c=o[3].checks.pinchPoints[o[0]].availableWidth<o[1][0]&&Ze(o);return{c(){e=D("div"),q(n.$$.fragment),a=W(),q(f.$$.fragment),l=W(),c&&c.c(),this.h()},l(r){e=E(r,"DIV",{class:!0});var m=V(e);L(n.$$.fragment,m),a=M(m),L(f.$$.fragment,m),l=M(m),c&&c.l(m),m.forEach(d),this.h()},h(){he(e,"class","svelte-jig4ga")},m(r,m){$(r,e,m),H(n,e,null),S(e,a),H(f,e,null),S(e,l),c&&c.m(e,null),i=!0},p(r,[m]){const _={};!t&&m&9&&(t=!0,_.value=r[3].checks.pinchPoints[r[0]].availableWidth,oe(()=>t=!1)),n.$set(_);const p={};m&9&&(p.available=r[3].checks.pinchPoints[r[0]].availableWidth),m&2&&(p.preferredTotals=r[1]),m&4&&(p.compromisedTotals=r[2]),f.$set(p),r[3].checks.pinchPoints[r[0]].availableWidth<r[1][0]?c?(c.p(r,m),m&11&&k(c,1)):(c=Ze(r),c.c(),k(c,1),c.m(e,null)):c&&(ce(),w(c,1,1,()=>{c=null}),ue())},i(r){i||(k(n.$$.fragment,r),k(f.$$.fragment,r),k(c),i=!0)},o(r){w(n.$$.fragment,r),w(f.$$.fragment,r),w(c),i=!1},d(r){r&&d(e),A(n),A(f),c&&c.d()}}}function qt(o,e,n){let t;De(o,G,u=>n(3,t=u));let{i:a}=e,{preferredTotals:f}=e,{compromisedTotals:l}=e;function i(u){o.$$.not_equal(t.checks.pinchPoints[a].availableWidth,u)&&(t.checks.pinchPoints[a].availableWidth=u,G.set(t))}function s(u){o.$$.not_equal(t.checks.pinchPoints[a].notes,u)&&(t.checks.pinchPoints[a].notes=u,G.set(t))}return o.$$set=u=>{"i"in u&&n(0,a=u.i),"preferredTotals"in u&&n(1,f=u.preferredTotals),"compromisedTotals"in u&&n(2,l=u.compromisedTotals)},[a,f,l,t,i,s]}class Lt extends ge{constructor(e){super(),$e(this,e,qt,Et,_e,{i:0,preferredTotals:1,compromisedTotals:2})}}function Ke(o,e,n){const t=o.slice();return t[24]=e[n],t[25]=e,t[26]=n,t}function Je(o,e,n){const t=o.slice();return t[27]=e[n],t[26]=n,t}function Ht(o){let e,n,t=o[5]+1+"",a,f,l,i,s,u,c,r;return l=new _t({props:{$$slots:{default:[Bt]},$$scope:{ctx:o}}}),l.$on("click",o[19]),s=new nt({props:{$$slots:{default:[Ft]},$$scope:{ctx:o}}}),s.$on("click",o[20]),c=new Lt({props:{i:o[5],preferredTotals:o[0],compromisedTotals:o[1]}}),{c(){e=D("h2"),n=B("Pinch point "),a=B(t),f=W(),q(l.$$.fragment),i=W(),q(s.$$.fragment),u=W(),q(c.$$.fragment)},l(m){e=E(m,"H2",{});var _=V(e);n=F(_,"Pinch point "),a=F(_,t),_.forEach(d),f=M(m),L(l.$$.fragment,m),i=M(m),L(s.$$.fragment,m),u=M(m),L(c.$$.fragment,m)},m(m,_){$(m,e,_),S(e,n),S(e,a),$(m,f,_),H(l,m,_),$(m,i,_),H(s,m,_),$(m,u,_),H(c,m,_),r=!0},p(m,_){(!r||_&32)&&t!==(t=m[5]+1+"")&&me(a,t);const p={};_&536870912&&(p.$$scope={dirty:_,ctx:m}),l.$set(p);const P={};_&536870912&&(P.$$scope={dirty:_,ctx:m}),s.$set(P);const I={};_&32&&(I.i=m[5]),_&1&&(I.preferredTotals=m[0]),_&2&&(I.compromisedTotals=m[1]),c.$set(I)},i(m){r||(k(l.$$.fragment,m),k(s.$$.fragment,m),k(c.$$.fragment,m),r=!0)},o(m){w(l.$$.fragment,m),w(s.$$.fragment,m),w(c.$$.fragment,m),r=!1},d(m){m&&(d(e),d(f),d(i),d(u)),A(l,m),A(s,m),A(c,m)}}}function At(o){let e,n,t,a;e=new gt({props:{label:"Tools",$$slots:{default:[Vt]},$$scope:{ctx:o}}});let f=ne(o[7].checks.pinchPoints),l=[];for(let s=0;s<f.length;s+=1)l[s]=Xe(Je(o,f,s));const i=s=>w(l[s],1,1,()=>{l[s]=null});return{c(){q(e.$$.fragment),n=W();for(let s=0;s<l.length;s+=1)l[s].c();t=te()},l(s){L(e.$$.fragment,s),n=M(s);for(let u=0;u<l.length;u+=1)l[u].l(s);t=te()},m(s,u){H(e,s,u),$(s,n,u);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(s,u);$(s,t,u),a=!0},p(s,u){const c={};if(u&536870940&&(c.$$scope={dirty:u,ctx:s}),e.$set(c),u&451){f=ne(s[7].checks.pinchPoints);let r;for(r=0;r<f.length;r+=1){const m=Je(s,f,r);l[r]?(l[r].p(m,u),k(l[r],1)):(l[r]=Xe(m),l[r].c(),k(l[r],1),l[r].m(t.parentNode,t))}for(ce(),r=f.length;r<l.length;r+=1)i(r);ue()}},i(s){if(!a){k(e.$$.fragment,s);for(let u=0;u<f.length;u+=1)k(l[u]);a=!0}},o(s){w(e.$$.fragment,s),l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)w(l[u]);a=!1},d(s){s&&(d(n),d(t)),A(e,s),qe(l,s)}}}function Bt(o){let e;return{c(){e=B("Save")},l(n){e=F(n,"Save")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Ft(o){let e;return{c(){e=B("Delete")},l(n){e=F(n,"Delete")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function It(o){let e;return{c(){e=B("Zoom to fit")},l(n){e=F(n,"Zoom to fit")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Qe(o){let e,n,t;function a(l){o[14](l)}let f={map:o[2]};return o[3]!==void 0&&(f.enabled=o[3]),e=new pt({props:f}),le.push(()=>se(e,"enabled",a)),{c(){q(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,i){H(e,l,i),t=!0},p(l,i){const s={};i&4&&(s.map=l[2]),!n&&i&8&&(n=!0,s.enabled=l[3],oe(()=>n=!1)),e.$set(s)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){A(e,l)}}}function Nt(o){let e;return{c(){e=B("Show scheme context")},l(n){e=F(n,"Show scheme context")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function Vt(o){let e,n,t,a,f,l,i,s,u,c;e=new Le({props:{$$slots:{default:[It]},$$scope:{ctx:o}}}),e.$on("click",o[13]),t=new ct({}),f=new ut({});let r=o[2]&&Qe(o);function m(p){o[15](p)}let _={$$slots:{default:[Nt]},$$scope:{ctx:o}};return o[4]!==void 0&&(_.checked=o[4]),s=new mt({props:_}),le.push(()=>se(s,"checked",m)),{c(){q(e.$$.fragment),n=W(),q(t.$$.fragment),a=W(),q(f.$$.fragment),l=W(),r&&r.c(),i=W(),q(s.$$.fragment)},l(p){L(e.$$.fragment,p),n=M(p),L(t.$$.fragment,p),a=M(p),L(f.$$.fragment,p),l=M(p),r&&r.l(p),i=M(p),L(s.$$.fragment,p)},m(p,P){H(e,p,P),$(p,n,P),H(t,p,P),$(p,a,P),H(f,p,P),$(p,l,P),r&&r.m(p,P),$(p,i,P),H(s,p,P),c=!0},p(p,P){const I={};P&536870912&&(I.$$scope={dirty:P,ctx:p}),e.$set(I),p[2]?r?(r.p(p,P),P&4&&k(r,1)):(r=Qe(p),r.c(),k(r,1),r.m(i.parentNode,i)):r&&(ce(),w(r,1,1,()=>{r=null}),ue());const b={};P&536870912&&(b.$$scope={dirty:P,ctx:p}),!u&&P&16&&(u=!0,b.checked=p[4],oe(()=>u=!1)),s.$set(b)},i(p){c||(k(e.$$.fragment,p),k(t.$$.fragment,p),k(f.$$.fragment,p),k(r),k(s.$$.fragment,p),c=!0)},o(p){w(e.$$.fragment,p),w(t.$$.fragment,p),w(f.$$.fragment,p),w(r),w(s.$$.fragment,p),c=!1},d(p){p&&(d(n),d(a),d(l),d(i)),A(e,p),A(t,p),A(f,p),r&&r.d(p),A(s,p)}}}function jt(o){let e,n,t=o[26]+1+"",a,f,l,i;return l=new He({props:{available:o[27].availableWidth,preferredTotals:o[0],compromisedTotals:o[1]}}),{c(){e=D("b"),n=B("Pinch point "),a=B(t),f=W(),q(l.$$.fragment)},l(s){e=E(s,"B",{});var u=V(e);n=F(u,"Pinch point "),a=F(u,t),u.forEach(d),f=M(s),L(l.$$.fragment,s)},m(s,u){$(s,e,u),S(e,n),S(e,a),$(s,f,u),H(l,s,u),i=!0},p(s,u){const c={};u&128&&(c.available=s[27].availableWidth),u&1&&(c.preferredTotals=s[0]),u&2&&(c.compromisedTotals=s[1]),l.$set(c)},i(s){i||(k(l.$$.fragment,s),i=!0)},o(s){w(l.$$.fragment,s),i=!1},d(s){s&&(d(e),d(f)),A(l,s)}}}function Xe(o){let e,n,t,a;function f(){return o[16](o[26])}function l(){return o[17](o[26])}return n=new Le({props:{$$slots:{default:[jt]},$$scope:{ctx:o}}}),n.$on("click",f),n.$on("mouseenter",l),n.$on("mouseleave",o[18]),{c(){e=D("div"),q(n.$$.fragment),t=W()},l(i){e=E(i,"DIV",{});var s=V(e);L(n.$$.fragment,s),t=M(s),s.forEach(d)},m(i,s){$(i,e,s),H(n,e,null),S(e,t),a=!0},p(i,s){o=i;const u={};s&536871043&&(u.$$scope={dirty:s,ctx:o}),n.$set(u)},i(i){a||(k(n.$$.fragment,i),a=!0)},o(i){w(n.$$.fragment,i),a=!1},d(i){i&&d(e),A(n)}}}function yt(o){let e,n=o[26]+1+"",t,a;return{c(){e=D("span"),t=B(n),a=W(),this.h()},l(f){e=E(f,"SPAN",{class:!0});var l=V(e);t=F(l,n),l.forEach(d),a=M(f),this.h()},h(){he(e,"class","dot svelte-48lsk4"),Oe(e,"highlight",o[26]==o[5]||o[26]==o[6])},m(f,l){$(f,e,l),S(e,t),$(f,a,l)},p(f,l){l&96&&Oe(e,"highlight",f[26]==f[5]||f[26]==f[6])},d(f){f&&(d(e),d(a))}}}function Ye(o){let e,n,t;function a(i){o[21](i,o[24])}function f(){return o[22](o[26])}let l={draggable:!0,$$slots:{default:[yt]},$$scope:{ctx:o}};return o[24].location!==void 0&&(l.lngLat=o[24].location),e=new dt({props:l}),le.push(()=>se(e,"lngLat",a)),e.$on("click",f),{c(){q(e.$$.fragment)},l(i){L(e.$$.fragment,i)},m(i,s){H(e,i,s),t=!0},p(i,s){o=i;const u={};s&536871008&&(u.$$scope={dirty:s,ctx:o}),!n&&s&128&&(n=!0,u.lngLat=o[24].location,oe(()=>n=!1)),e.$set(u)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){w(e.$$.fragment,i),t=!1},d(i){A(e,i)}}}function Ot(o){let e,n,t,a,f,l;e=new ht({}),e.$on("click",o[10]),t=new vt({props:{gj:o[7].summary.networkMap,show:o[4]}});let i=ne(o[7].checks.pinchPoints),s=[];for(let c=0;c<i.length;c+=1)s[c]=Ye(Ke(o,i,c));const u=c=>w(s[c],1,1,()=>{s[c]=null});return{c(){q(e.$$.fragment),n=W(),q(t.$$.fragment),a=W();for(let c=0;c<s.length;c+=1)s[c].c();f=te()},l(c){L(e.$$.fragment,c),n=M(c),L(t.$$.fragment,c),a=M(c);for(let r=0;r<s.length;r+=1)s[r].l(c);f=te()},m(c,r){H(e,c,r),$(c,n,r),H(t,c,r),$(c,a,r);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(c,r);$(c,f,r),l=!0},p(c,r){const m={};if(r&128&&(m.gj=c[7].summary.networkMap),r&16&&(m.show=c[4]),t.$set(m),r&480){i=ne(c[7].checks.pinchPoints);let _;for(_=0;_<i.length;_+=1){const p=Ke(c,i,_);s[_]?(s[_].p(p,r),k(s[_],1)):(s[_]=Ye(p),s[_].c(),k(s[_],1),s[_].m(f.parentNode,f))}for(ce(),_=i.length;_<s.length;_+=1)u(_);ue()}},i(c){if(!l){k(e.$$.fragment,c),k(t.$$.fragment,c);for(let r=0;r<i.length;r+=1)k(s[r]);l=!0}},o(c){w(e.$$.fragment,c),w(t.$$.fragment,c),s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)w(s[r]);l=!1},d(c){c&&(d(n),d(a),d(f)),A(e,c),A(t,c),qe(s,c)}}}function Gt(o){let e,n,t,a,f,l,i,s,u,c,r;const m=[At,Ht],_=[];function p(b,v){return b[5]==null?0:1}t=p(o),a=_[t]=m[t](o);function P(b){o[23](b)}let I={$$slots:{default:[Ot]},$$scope:{ctx:o}};return o[2]!==void 0&&(I.map=o[2]),i=new $t({props:I}),le.push(()=>se(i,"map",P)),{c(){e=D("div"),n=D("div"),a.c(),f=W(),l=D("div"),q(i.$$.fragment),this.h()},l(b){e=E(b,"DIV",{style:!0});var v=V(e);n=E(v,"DIV",{style:!0});var T=V(n);a.l(T),T.forEach(d),f=M(v),l=E(v,"DIV",{style:!0});var N=V(l);L(i.$$.fragment,N),N.forEach(d),v.forEach(d),this.h()},h(){K(n,"width","30%"),K(n,"overflow-y","scroll"),K(n,"padding","10px"),K(n,"border","1px solid black"),K(l,"position","relative"),K(l,"width","100%"),K(e,"display","flex"),K(e,"height","80vh")},m(b,v){$(b,e,v),S(e,n),_[t].m(n,null),S(e,f),S(e,l),H(i,l,null),u=!0,c||(r=it(window,"keydown",o[12]),c=!0)},p(b,[v]){let T=t;t=p(b),t===T?_[t].p(b,v):(ce(),w(_[T],1,1,()=>{_[T]=null}),ue(),a=_[t],a?a.p(b,v):(a=_[t]=m[t](b),a.c()),k(a,1),a.m(n,null));const N={};v&536871152&&(N.$$scope={dirty:v,ctx:b}),!s&&v&4&&(s=!0,N.map=b[2],oe(()=>s=!1)),i.$set(N)},i(b){u||(k(a),k(i.$$.fragment,b),u=!0)},o(b){w(a),w(i.$$.fragment,b),u=!1},d(b){b&&d(e),_[t].d(),A(i),c=!1,r()}}}function Rt(o,e,n){let t;De(o,G,C=>n(7,t=C));let{preferredTotals:a}=e,{compromisedTotals:f}=e,l,i=!1,s=!0,u,c;at(()=>{m(!1)});function r(C){n(5,u=C),n(6,c=null)}function m(C){let U={type:"FeatureCollection",features:t.checks.pinchPoints.map(z=>({type:"Feature",properties:{},geometry:{type:"Point",coordinates:z.location}}))};for(let z of t.summary.networkMap.features)U.features.push(z);U.features.length>0&&l.fitBounds(bt(U),{padding:20,animate:C})}function _(C){if(!i){if(u!=null){n(5,u=null);return}tt(G,t.checks.pinchPoints=[...t.checks.pinchPoints,{location:C.detail.lngLat.toArray(),availableWidth:0,notes:""}],t),r(t.checks.pinchPoints.length-1)}}function p(){t.checks.pinchPoints.splice(u,1),G.set(t),n(5,u=null)}function P(C){u!=null&&C.key=="Escape"?(C.stopPropagation(),n(5,u=null)):u!=null&&C.key=="Delete"&&p()}const I=()=>m(!0);function b(C){i=C,n(3,i)}function v(C){s=C,n(4,s)}const T=C=>r(C),N=C=>n(6,c=C),R=()=>n(6,c=null),O=()=>n(5,u=null),X=()=>p();function be(C,U){o.$$.not_equal(U.location,C)&&(U.location=C,G.set(t))}const pe=C=>r(C);function ie(C){l=C,n(2,l)}return o.$$set=C=>{"preferredTotals"in C&&n(0,a=C.preferredTotals),"compromisedTotals"in C&&n(1,f=C.compromisedTotals)},[a,f,l,i,s,u,c,t,r,m,_,p,P,I,b,v,T,N,R,O,X,be,pe,ie]}class Ut extends ge{constructor(e){super(),$e(this,e,Rt,Gt,_e,{preferredTotals:0,compromisedTotals:1})}}function xe(o,e,n){const t=o.slice();return t[6]=e[n],t[8]=n,t}function zt(o){let e;return{c(){e=B("Add")},l(n){e=F(n,"Add")},m(n,t){$(n,e,t)},d(n){n&&d(e)}}}function et(o,e){let n,t,a;function f(){return e[5](e[8])}return t=new Dt({props:{i:e[8],preferredTotals:e[2],compromisedTotals:e[1]}}),t.$on("delete",f),{key:o,first:null,c(){n=te(),q(t.$$.fragment),this.h()},l(l){n=te(),L(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,i){$(l,n,i),H(t,l,i),a=!0},p(l,i){e=l;const s={};i&1&&(s.i=e[8]),i&4&&(s.preferredTotals=e[2]),i&2&&(s.compromisedTotals=e[1]),t.$set(s)},i(l){a||(k(t.$$.fragment,l),a=!0)},o(l){w(t.$$.fragment,l),a=!1},d(l){l&&d(n),A(t,l)}}}function Zt(o){let e,n,t="Preferred",a,f=o[2][0].toFixed(2)+"",l,i,s,u,c="Preferred",r,m=o[2][1].toFixed(2)+"",_,p,P,I,b="Compromised",v,T=o[1][0].toFixed(2)+"",N,R,O,X,be="Compromised",pe,ie=o[1][1].toFixed(2)+"",C,U,z,Ae=`Checking possible cross-sections of <u>homogeneous sections</u>
  of route along the proposed corridor`,ve,ae,Be=`At regular intervals along the corridor measure and enter the available width
  to see if your proposed cross-sections can be accommodated`,ke,Q,we,J,j=[],Fe=new Map,Te,Ce,Pe,re,Ie=`Checking possible cross-sections of any <u>constrained or atypical locations</u>
  along the proposed corridor`,Se,fe,Ne=`At key constraints along the corridor, measure and enter the available width
  to see if your proposed cross-sections can be accommodated. Click the map to
  add a pinch point.`,We,Y,x;Q=new Le({props:{$$slots:{default:[zt]},$$scope:{ctx:o}}}),Q.$on("click",o[3]);let de=ne(o[0].checks.homogeneousSections);const Ve=h=>h[6];for(let h=0;h<de.length;h+=1){let g=xe(o,de,h),y=Ve(g);Fe.set(y,j[h]=et(y,g))}return Y=new Ut({props:{preferredTotals:o[2],compromisedTotals:o[1]}}),{c(){e=D("p"),n=D("u"),n.textContent=t,a=B(`
  cross-section requites a desirable minimum width (m): `),l=B(f),i=W(),s=D("p"),u=D("u"),u.textContent=c,r=B(`
  cross-section requites an absolute minimum width (m): `),_=B(m),p=W(),P=D("p"),I=D("u"),I.textContent=b,v=B(`
  cross-section requites a desirable minimum width (m): `),N=B(T),R=W(),O=D("p"),X=D("u"),X.textContent=be,pe=B(`
  cross-section requites an absolute minimum width (m): `),C=B(ie),U=W(),z=D("h2"),z.innerHTML=Ae,ve=W(),ae=D("p"),ae.textContent=Be,ke=W(),q(Q.$$.fragment),we=W(),J=D("div");for(let h=0;h<j.length;h+=1)j[h].c();Te=W(),Ce=D("hr"),Pe=W(),re=D("h2"),re.innerHTML=Ie,Se=W(),fe=D("p"),fe.textContent=Ne,We=W(),q(Y.$$.fragment),this.h()},l(h){e=E(h,"P",{});var g=V(e);n=E(g,"U",{"data-svelte-h":!0}),Z(n)!=="svelte-1gb9n3v"&&(n.textContent=t),a=F(g,`
  cross-section requites a desirable minimum width (m): `),l=F(g,f),g.forEach(d),i=M(h),s=E(h,"P",{});var y=V(s);u=E(y,"U",{"data-svelte-h":!0}),Z(u)!=="svelte-1gb9n3v"&&(u.textContent=c),r=F(y,`
  cross-section requites an absolute minimum width (m): `),_=F(y,m),y.forEach(d),p=M(h),P=E(h,"P",{});var ee=V(P);I=E(ee,"U",{"data-svelte-h":!0}),Z(I)!=="svelte-svpwa8"&&(I.textContent=b),v=F(ee,`
  cross-section requites a desirable minimum width (m): `),N=F(ee,T),ee.forEach(d),R=M(h),O=E(h,"P",{});var Me=V(O);X=E(Me,"U",{"data-svelte-h":!0}),Z(X)!=="svelte-svpwa8"&&(X.textContent=be),pe=F(Me,`
  cross-section requites an absolute minimum width (m): `),C=F(Me,ie),Me.forEach(d),U=M(h),z=E(h,"H2",{"data-svelte-h":!0}),Z(z)!=="svelte-1x2x8kb"&&(z.innerHTML=Ae),ve=M(h),ae=E(h,"P",{"data-svelte-h":!0}),Z(ae)!=="svelte-x0c18j"&&(ae.textContent=Be),ke=M(h),L(Q.$$.fragment,h),we=M(h),J=E(h,"DIV",{style:!0});var je=V(J);for(let Ee=0;Ee<j.length;Ee+=1)j[Ee].l(je);je.forEach(d),Te=M(h),Ce=E(h,"HR",{}),Pe=M(h),re=E(h,"H2",{"data-svelte-h":!0}),Z(re)!=="svelte-1m1bgig"&&(re.innerHTML=Ie),Se=M(h),fe=E(h,"P",{"data-svelte-h":!0}),Z(fe)!=="svelte-x52uk0"&&(fe.textContent=Ne),We=M(h),L(Y.$$.fragment,h),this.h()},h(){K(J,"display","flex"),K(J,"flex-direction","row"),K(J,"overflow-x","scroll")},m(h,g){$(h,e,g),S(e,n),S(e,a),S(e,l),$(h,i,g),$(h,s,g),S(s,u),S(s,r),S(s,_),$(h,p,g),$(h,P,g),S(P,I),S(P,v),S(P,N),$(h,R,g),$(h,O,g),S(O,X),S(O,pe),S(O,C),$(h,U,g),$(h,z,g),$(h,ve,g),$(h,ae,g),$(h,ke,g),H(Q,h,g),$(h,we,g),$(h,J,g);for(let y=0;y<j.length;y+=1)j[y]&&j[y].m(J,null);$(h,Te,g),$(h,Ce,g),$(h,Pe,g),$(h,re,g),$(h,Se,g),$(h,fe,g),$(h,We,g),H(Y,h,g),x=!0},p(h,[g]){(!x||g&4)&&f!==(f=h[2][0].toFixed(2)+"")&&me(l,f),(!x||g&4)&&m!==(m=h[2][1].toFixed(2)+"")&&me(_,m),(!x||g&2)&&T!==(T=h[1][0].toFixed(2)+"")&&me(N,T),(!x||g&2)&&ie!==(ie=h[1][1].toFixed(2)+"")&&me(C,ie);const y={};g&512&&(y.$$scope={dirty:g,ctx:h}),Q.$set(y),g&23&&(de=ne(h[0].checks.homogeneousSections),ce(),j=rt(j,g,Ve,1,h,de,Fe,J,ft,et,null,xe),ue());const ee={};g&4&&(ee.preferredTotals=h[2]),g&2&&(ee.compromisedTotals=h[1]),Y.$set(ee)},i(h){if(!x){k(Q.$$.fragment,h);for(let g=0;g<de.length;g+=1)k(j[g]);k(Y.$$.fragment,h),x=!0}},o(h){w(Q.$$.fragment,h);for(let g=0;g<j.length;g+=1)w(j[g]);w(Y.$$.fragment,h),x=!1},d(h){h&&(d(e),d(i),d(s),d(p),d(P),d(R),d(O),d(U),d(z),d(ve),d(ae),d(ke),d(we),d(J),d(Te),d(Ce),d(Pe),d(re),d(Se),d(fe),d(We)),A(Q,h);for(let g=0;g<j.length;g+=1)j[g].d();A(Y,h)}}}function Kt(o,e,n){let t,a,f;De(o,G,u=>n(0,f=u));function l(){tt(G,f.checks.homogeneousSections=[...f.checks.homogeneousSections,{availableWidth:0,notes:""}],f)}function i(u){f.checks.homogeneousSections.splice(u,1),G.set(f)}const s=u=>i(u);return o.$$.update=()=>{o.$$.dirty&1&&n(2,t=Ge(f,"Preferred")),o.$$.dirty&1&&n(1,a=Ge(f,"Compromised"))},[f,a,t,l,i,s]}class fn extends ge{constructor(e){super(),$e(this,e,Kt,Zt,_e,{})}}export{fn as component};
