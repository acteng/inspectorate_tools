import{s as S,e as d,a as y,t as v,c as p,p as P,g as k,b as x,d as A,f as u,i as m,h as O,j as D,n as f,k as L}from"../chunks/scheduler.Bsni_e59.js";import{S as R,i as $}from"../chunks/index.CCfAUppz.js";import{s as _}from"../chunks/data.Ccr9kS34.js";import{g as T}from"../chunks/results.B_7rBreg.js";function C(t){let e=T(t),i=t.summary.checkType=="street",o=t.summary.checkType=="path",n={Safety:"Sa",Accessibility:"Ac",Comfort:"Cf",Directness:"Di",Attractiveness:"At",Cohesion:"Co",overall:"To"},s={"Social activity":"SA","Personal security":"PS","Character and legibility":"CL",Environment:"En",overall:"To"};return[...E(t),...b(t),...g("SA",0,t.safetyCheck),...g("ST",16,t.streetCheck),...g("SP",0,t.streetPlacemakingCheck),...g("PA",16,t.pathCheck),...g("PP",16,t.pathPlacemakingCheck),...w(t),...I(t),...c("ST-LOS",[...e.levelOfService,e.overall],i,n),...c("ST-LOS",e.byMode,i,{walking:"Wa",wheeling:"Wh",cycling:"Cy"}),...c("SP-LOS",[...e.placemakingCategories,e.placemakingOverall],i,s),...c("PA-LOS",[...e.levelOfService,e.overall],o,n),...c("PA-LOS",e.byMode,o,{walking:"Wa",wheeling:"Wh",cycling:"Cy",horse:"HR"}),...c("PP-LOS",[...e.placemakingCategories,e.placemakingOverall],o,s)]}function E(t){let e=t.summary;return[["Scheme Ref",e.schemeReference],["Date of Design Review",e.dateDesignReview],["Scheme Name",e.schemeName],["Authority",e.authority],["Transport/ Combined Authority",e.transportOrCombinedAuthority],["Region",e.region],["Funding Programme",e.fundingProgramme],["Design Stage",e.designStage],["Funding Conditions",e.fundingConditions],["Inspector",e.inspectorEmail],["RouteLength",e.totalRouteLengthKm],["RouteFileLength",e.assessedRouteLengthKm],["Notes",e.notes],["Tool","Route Check online-alpha"],["Sub-tool",e.checkType=="street"?"Street Check":"Path Check"]]}function b(t){let e=[];for(let[i,o]of t.policyCheck.entries())e.push([`PC${h(i)}-E`,o.existing]),e.push([`PC${h(i)}-D`,o.proposed]);return e}function g(t,e,i){let o=[];for(let n=0;n<i.existingScores.length;n++)o.push([`${t}${h(n+e)}-E`,i.existingScores[n]]),o.push([`${t}${h(n+e)}-D`,i.proposedScores[n]]);return o}function h(t){return(t+1).toString().padStart(2,"0")}function w(t){let e={existing:t.policyConflictLog.filter(i=>i.stage=="Existing").length,designed:t.policyConflictLog.filter(i=>i.stage=="Design").length,removed:t.policyConflictLog.filter(i=>i.resolved=="Yes").length};return[["PC-E",e.existing],["PC-D",e.designed],["PC-Rem",e.removed],["PC-Int",e.designed],["PC-Tot",e.designed+e.existing-e.removed]]}function I(t){let e={existing:t.criticalIssues.filter(i=>i.stage=="Existing").length,designed:t.criticalIssues.filter(i=>i.stage=="Design").length,removed:t.criticalIssues.filter(i=>i.resolved=="Yes").length};return[["SA-E",e.existing],["SA-D",e.designed],["SA-Rem",e.removed],["SA-Int",e.designed],["SA-Tot",e.designed+e.existing-e.removed]]}function c(t,e,i,o){let n=[];for(let s of e){let a=o[s.category];n.push([`${t}-${a}-E`,i?"":`${Math.round(s.existing.scorePercent)}%`]),n.push([`${t}-${a}-D`,i?"":`${Math.round(s.proposed.scorePercent)}%`])}return n}function M(t){let e,i="TODO. Below is the start to the DALOG output.",o,n,s=JSON.stringify(C(t[0]),null,"  ")+"",a;return{c(){e=d("p"),e.textContent=i,o=y(),n=d("pre"),a=v(s)},l(r){e=p(r,"P",{"data-svelte-h":!0}),P(e)!=="svelte-10g90aq"&&(e.textContent=i),o=k(r),n=p(r,"PRE",{});var l=x(n);a=A(l,s),l.forEach(u)},m(r,l){m(r,e,l),m(r,o,l),m(r,n,l),O(n,a)},p(r,[l]){l&1&&s!==(s=JSON.stringify(C(r[0]),null,"  ")+"")&&D(a,s)},i:f,o:f,d(r){r&&(u(e),u(o),u(n))}}}function N(t,e,i){let o;return L(t,_,n=>i(0,o=n)),[o]}class J extends R{constructor(e){super(),$(this,e,N,M,S,{})}}export{J as component};
