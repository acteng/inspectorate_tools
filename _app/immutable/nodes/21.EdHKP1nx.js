import{s as Z,a as P,e as I,d as W,c as O,h as G,i as v,z as Ce,A as Be,f as g,I as Ye,x as U,b as H,q as X,j as E,y as A,l as se,a4 as Je,t as N,F as te,k as q,o as Q,g as de,p as Ke,n as fe}from"../chunks/scheduler.D0-ByWw-.js";import{S as x,i as ee,c as T,a as L,m as F,t as k,b as D,d as S,e as j,g as ne,f as le}from"../chunks/index.kLUmZ0ht.js";import{e as re,u as Qe,o as Xe,B as Ze}from"../chunks/Geocoder.svelte_svelte_type_style_lang.CHSs8LKB.js";import{p as Y}from"../chunks/index.Bk6n0NpB.js";import{S as ue}from"../chunks/SecondaryButton.BodoPf0p.js";import{S as J}from"../chunks/Select.iQ22lYH3.js";import{W as xe}from"../chunks/WarningButton.0Mr93mrJ.js";import{W as me}from"../chunks/WarningText.D2ntxUht.js";import{s as V,a as et}from"../chunks/data.BXVqmEiL.js";import{C as ce}from"../chunks/CollapsibleCard.C4F7qWbE.js";import{F as tt,v as rt,E as it}from"../chunks/FormElement.CfK1PS2A.js";import"../chunks/paths.BCUf19Pg.js";function at(a){let e,r,t,i,s,n,l;return e=new it({props:{errorMessage:a[5](a[2])}}),{c(){T(e.$$.fragment),r=P(),t=I("input"),this.h()},l(o){L(e.$$.fragment,o),r=W(o),t=O(o,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){G(t,"type","text"),G(t,"inputmode","numeric"),G(t,"class",i=`govuk-input govuk-input--width-${a[1]}`),G(t,"id",a[3])},m(o,m){F(e,o,m),v(o,r,m),v(o,t,m),Ce(t,a[2]),s=!0,n||(l=[Be(t,"input",a[9]),Be(t,"change",a[4])],n=!0)},p(o,m){const b={};m&4&&(b.errorMessage=o[5](o[2])),e.$set(b),(!s||m&2&&i!==(i=`govuk-input govuk-input--width-${o[1]}`))&&G(t,"class",i),m&4&&t.value!==o[2]&&Ce(t,o[2])},i(o){s||(k(e.$$.fragment,o),s=!0)},o(o){D(e.$$.fragment,o),s=!1},d(o){o&&(g(r),g(t)),S(e,o),n=!1,Ye(l)}}}function st(a){let e,r;return e=new tt({props:{label:a[0],id:a[3],$$slots:{default:[at]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,i){F(e,t,i),r=!0},p(t,[i]){const s={};i&1&&(s.label=t[0]),i&1030&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){D(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function nt(a,e,r){let{label:t}=e,{value:i}=e,{width:s}=e,{min:n=void 0}=e,{max:l=void 0}=e,o=i==null?void 0:i.toString(),m=rt();function b(){r(6,i=o==null?void 0:parseInt(o,10))}function _(c){if(c==""||c==null)return"";if(c.includes("."))return"Please enter a number without decimals";let B=Number(c);return isNaN(B)?"Please enter a valid number":n!=null&&B<n?`Please enter a number that's at least ${n};`:l!=null&&B>l?`Please enter a number that's at most ${l};`:""}function $(){o=this.value,r(2,o)}return a.$$set=c=>{"label"in c&&r(0,t=c.label),"value"in c&&r(6,i=c.value),"width"in c&&r(1,s=c.width),"min"in c&&r(7,n=c.min),"max"in c&&r(8,l=c.max)},[t,s,o,m,b,_,i,n,l,$]}class lt extends x{constructor(e){super(),ee(this,e,nt,st,Z,{label:0,value:6,width:1,min:7,max:8})}}function pe(a,e,r,t){switch(a){case"Footway":return[2.6,2];case"Narrow Traffic / Bus Lane":return[3.25,3.25];case"Wide Traffic / Bus Lane":return[4.5,3.9];case"Traffic Lane (no buses): speed limit 20/30":return[3,2.75];case"On-highway advisory/mandatory cycle lane":return[2,1.5];case"1-way protected cycle track":if(!e.flowOneWay)throw new Error("missing input");return{"<200":[2.3,1.8],"200-800":[2.5,2.3],">800":[2.8,2.3]}[e.flowOneWay];case"2-way protected cycle track":if(!e.flowTwoWay)throw new Error("missing input");return{"<300":[3.3,2.3],"300-1,000":[3.3,2.8],">1,000":[4.3,3.3]}[e.flowTwoWay];case"Shared use cycle track":if(!e.flowSharedUse)throw new Error("missing input");return{"<300":[3,3],">300":[4.5,4.5]}[e.flowSharedUse];case"Parking Bay":return[2,1.8];case"Disabled Parking Bay":return[2.7,2.7];case"Loading Bay":return[2.7,1.8];case"Buffer / Verge":if(!e.speedLimit)throw new Error("missing input");let i=[.5,.5],s=[1.5,1.5],n=0;if(r&&(n+=z[r]),t&&(n+=z[t]),n<=1||n==4||n==10)return i;let l=e.speedLimit=="<30"||e.speedLimit=="30"||e.speedLimit=="40";return r=="Footway"&&t&&z[t]==2||t=="Footway"&&r&&z[r]==2?l?i:s:{"<30":[.5,0],30:[.5,0],40:[1,.5],50:[2,1.5],60:[2.5,2],70:[3.5,3]}[e.speedLimit]}}let z={Footway:0,"1-way protected cycle track":0,"2-way protected cycle track":0,"Shared use cycle track":0,"Buffer / Verge":1,"Narrow Traffic / Bus Lane":2,"Wide Traffic / Bus Lane":2,"Traffic Lane (no buses): speed limit 20/30":2,"On-highway advisory/mandatory cycle lane":2,"Parking Bay":10,"Disabled Parking Bay":10,"Loading Bay":10};function ot(a,e,r){if(z[a]!=0)return"";let t=e&&(z[e]==2||z[e]==10),i=r&&(z[r]==2||z[r]==10);return t&&i?"both":t?"left":i?"right":""}function Me(a,e){if(!a||!e)return null;let r=a=="<30"?20:parseInt(a);return e>r*1.1?r+10:r}let ie={Footway:["Manual for Streets 2: Section 5 pp.43","DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7"],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":["LTN 1/20 Table 7-2 pp. 76","LTN 1/20 Figure 4.1 pp. 33"],"On-highway advisory/mandatory cycle lane":["LTN 1/20 Table 5-2 pp.43","LTN 1/20 Figure 4.1 pp. 33"],"1-way protected cycle track":["LTN 1/20 Table 5-2 pp.43","LTN 1/20 Figure 4.1 pp. 33"],"2-way protected cycle track":["LTN 1/20 Table 5-2 pp.43","LTN 1/20 Figure 4.1 pp. 33"],"Shared use cycle track":["LTN 1/20 Table 6-3 pp.68"],"Parking Bay":["LTN 1/20 table 7-3 pp77"],"Disabled Parking Bay":[],"Loading Bay":["LTN 1/20 table 7-3 pp77"],"Buffer / Verge":["LTN 1/20 table 6-1 pp54"]};function ae(a,e){let r=Me(e.speedLimit,e.observedSpeed);switch(a){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&r==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&r==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return r==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":r==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":r==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return r==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":r==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":r==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track"}}function Pe(a,e,r){const t=a.slice();return t[14]=e[r],t}function We(a){let e,r,t,i=pe(a[0],a[7].proposed.trafficData,a[4],a[5])[a[3]=="Desirable"?0:1]+"",s,n,l,o,m,b,_=ae(a[0],a[7].proposed.trafficData),$,c;const B=[ct,ut,ft],u=[];function f(h,y){return h[6]=="left"?0:h[6]=="right"?1:h[6]=="both"?2:-1}~(l=f(a))&&(o=u[l]=B[l](a));let d=ie[a[0]]&&Ne(a),w=_&&Ee(a);return{c(){e=I("p"),r=N(a[3]),t=N(" minimum width (m): "),s=N(i),n=P(),o&&o.c(),m=P(),d&&d.c(),b=P(),w&&w.c(),$=te()},l(h){e=O(h,"P",{});var y=H(e);r=q(y,a[3]),t=q(y," minimum width (m): "),s=q(y,i),y.forEach(g),n=W(h),o&&o.l(h),m=W(h),d&&d.l(h),b=W(h),w&&w.l(h),$=te()},m(h,y){v(h,e,y),E(e,r),E(e,t),E(e,s),v(h,n,y),~l&&u[l].m(h,y),v(h,m,y),d&&d.m(h,y),v(h,b,y),w&&w.m(h,y),v(h,$,y),c=!0},p(h,y){(!c||y&8)&&Q(r,h[3]),(!c||y&185)&&i!==(i=pe(h[0],h[7].proposed.trafficData,h[4],h[5])[h[3]=="Desirable"?0:1]+"")&&Q(s,i);let M=l;l=f(h),l!==M&&(o&&(ne(),D(u[M],1,1,()=>{u[M]=null}),le()),~l?(o=u[l],o||(o=u[l]=B[l](h),o.c()),k(o,1),o.m(m.parentNode,m)):o=null),ie[h[0]]?d?d.p(h,y):(d=Ne(h),d.c(),d.m(b.parentNode,b)):d&&(d.d(1),d=null),y&129&&(_=ae(h[0],h[7].proposed.trafficData)),_?w?w.p(h,y):(w=Ee(h),w.c(),w.m($.parentNode,$)):w&&(w.d(1),w=null)},i(h){c||(k(o),c=!0)},o(h){D(o),c=!1},d(h){h&&(g(e),g(n),g(m),g(b),g($)),~l&&u[l].d(h),d&&d.d(h),w&&w.d(h)}}}function ft(a){let e,r;return e=new me({props:{$$slots:{default:[pt]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,i){F(e,t,i),r=!0},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){D(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function ut(a){let e,r;return e=new me({props:{$$slots:{default:[dt]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,i){F(e,t,i),r=!0},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){D(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function ct(a){let e,r;return e=new me({props:{$$slots:{default:[mt]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,i){F(e,t,i),r=!0},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){D(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function pt(a){let e;return{c(){e=N("Consider buffers to left and right")},l(r){e=q(r,"Consider buffers to left and right")},m(r,t){v(r,e,t)},d(r){r&&g(e)}}}function dt(a){let e;return{c(){e=N("Consider buffer to right")},l(r){e=q(r,"Consider buffer to right")},m(r,t){v(r,e,t)},d(r){r&&g(e)}}}function mt(a){let e;return{c(){e=N("Consider buffer to left")},l(r){e=q(r,"Consider buffer to left")},m(r,t){v(r,e,t)},d(r){r&&g(e)}}}function Ne(a){let e,r="References",t,i,s=re(ie[a[0]]),n=[];for(let l=0;l<s.length;l+=1)n[l]=qe(Pe(a,s,l));return{c(){e=I("u"),e.textContent=r,t=N(`
      :
      `),i=I("ul");for(let l=0;l<n.length;l+=1)n[l].c()},l(l){e=O(l,"U",{"data-svelte-h":!0}),de(e)!=="svelte-fk7cdq"&&(e.textContent=r),t=q(l,`
      :
      `),i=O(l,"UL",{});var o=H(i);for(let m=0;m<n.length;m+=1)n[m].l(o);o.forEach(g)},m(l,o){v(l,e,o),v(l,t,o),v(l,i,o);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(i,null)},p(l,o){if(o&1){s=re(ie[l[0]]);let m;for(m=0;m<s.length;m+=1){const b=Pe(l,s,m);n[m]?n[m].p(b,o):(n[m]=qe(b),n[m].c(),n[m].m(i,null))}for(;m<n.length;m+=1)n[m].d(1);n.length=s.length}},d(l){l&&(g(e),g(t),g(i)),Ke(n,l)}}}function qe(a){let e,r=a[14]+"",t;return{c(){e=I("li"),t=N(r)},l(i){e=O(i,"LI",{});var s=H(e);t=q(s,r),s.forEach(g)},m(i,s){v(i,e,s),E(e,t)},p(i,s){s&1&&r!==(r=i[14]+"")&&Q(t,r)},d(i){i&&g(e)}}}function Ee(a){let e,r="Guidance",t,i,s=ae(a[0],a[7].proposed.trafficData)+"",n;return{c(){e=I("u"),e.textContent=r,t=N(`
      :
      `),i=I("p"),n=N(s),this.h()},l(l){e=O(l,"U",{"data-svelte-h":!0}),de(e)!=="svelte-qh7mhq"&&(e.textContent=r),t=q(l,`
      :
      `),i=O(l,"P",{style:!0});var o=H(i);n=q(o,s),o.forEach(g),this.h()},h(){X(i,"max-width","400px")},m(l,o){v(l,e,o),v(l,t,o),v(l,i,o),E(i,n)},p(l,o){o&129&&s!==(s=ae(l[0],l[7].proposed.trafficData)+"")&&Q(n,s)},d(l){l&&(g(e),g(t),g(i))}}}function ht(a){let e;return{c(){e=N("←")},l(r){e=q(r,"←")},m(r,t){v(r,e,t)},d(r){r&&g(e)}}}function _t(a){let e;return{c(){e=N("Delete")},l(r){e=q(r,"Delete")},m(r,t){v(r,e,t)},d(r){r&&g(e)}}}function gt(a){let e;return{c(){e=N("→")},l(r){e=q(r,"→")},m(r,t){v(r,e,t)},d(r){r&&g(e)}}}function bt(a){let e,r,t,i,s,n,l,o,m,b,_,$;function c(f){a[10](f)}let B={label:"Street feature type",emptyOption:!0,choices:a[9]};a[0]!==void 0&&(B.value=a[0]),r=new J({props:B}),U.push(()=>j(r,"value",c));let u=a[0]&&We(a);return l=new ue({props:{disabled:a[1],$$slots:{default:[ht]},$$scope:{ctx:a}}}),l.$on("click",a[11]),m=new xe({props:{$$slots:{default:[_t]},$$scope:{ctx:a}}}),m.$on("click",a[12]),_=new ue({props:{disabled:a[2],$$slots:{default:[gt]},$$scope:{ctx:a}}}),_.$on("click",a[13]),{c(){e=I("div"),T(r.$$.fragment),i=P(),u&&u.c(),s=P(),n=I("div"),T(l.$$.fragment),o=P(),T(m.$$.fragment),b=P(),T(_.$$.fragment),this.h()},l(f){e=O(f,"DIV",{class:!0});var d=H(e);L(r.$$.fragment,d),i=W(d),u&&u.l(d),s=W(d),n=O(d,"DIV",{style:!0,class:!0});var w=H(n);L(l.$$.fragment,w),o=W(w),L(m.$$.fragment,w),b=W(w),L(_.$$.fragment,w),w.forEach(g),d.forEach(g),this.h()},h(){X(n,"display","flex"),X(n,"justify-content","space-between"),G(n,"class","svelte-jig4ga"),G(e,"class","svelte-jig4ga")},m(f,d){v(f,e,d),F(r,e,null),E(e,i),u&&u.m(e,null),E(e,s),E(e,n),F(l,n,null),E(n,o),F(m,n,null),E(n,b),F(_,n,null),$=!0},p(f,[d]){const w={};!t&&d&1&&(t=!0,w.value=f[0],A(()=>t=!1)),r.$set(w),f[0]?u?(u.p(f,d),d&1&&k(u,1)):(u=We(f),u.c(),k(u,1),u.m(e,s)):u&&(ne(),D(u,1,1,()=>{u=null}),le());const h={};d&2&&(h.disabled=f[1]),d&131072&&(h.$$scope={dirty:d,ctx:f}),l.$set(h);const y={};d&131072&&(y.$$scope={dirty:d,ctx:f}),m.$set(y);const M={};d&4&&(M.disabled=f[2]),d&131072&&(M.$$scope={dirty:d,ctx:f}),_.$set(M)},i(f){$||(k(r.$$.fragment,f),k(u),k(l.$$.fragment,f),k(m.$$.fragment,f),k(_.$$.fragment,f),$=!0)},o(f){D(r.$$.fragment,f),D(u),D(l.$$.fragment,f),D(m.$$.fragment,f),D(_.$$.fragment,f),$=!1},d(f){f&&g(e),S(r),u&&u.d(),S(l),S(m),S(_)}}}function $t(a,e,r){let t,i;se(a,V,d=>r(7,i=d));let{value:s}=e,{isFirst:n}=e,{isLast:l}=e,{sectionType:o}=e,{leftFeature:m}=e,{rightFeature:b}=e,_=Je(),$=Y(et);function c(d){s=d,r(0,s)}const B=()=>_("moveLeft"),u=()=>_("delete"),f=()=>_("moveRight");return a.$$set=d=>{"value"in d&&r(0,s=d.value),"isFirst"in d&&r(1,n=d.isFirst),"isLast"in d&&r(2,l=d.isLast),"sectionType"in d&&r(3,o=d.sectionType),"leftFeature"in d&&r(4,m=d.leftFeature),"rightFeature"in d&&r(5,b=d.rightFeature)},a.$$.update=()=>{a.$$.dirty&49&&r(6,t=s&&ot(s,m,b))},[s,n,l,o,m,b,t,i,_,$,c,B,u,f]}class wt extends x{constructor(e){super(),ee(this,e,$t,bt,Z,{value:0,isFirst:1,isLast:2,sectionType:3,leftFeature:4,rightFeature:5})}}function Re(a,e,r){const t=a.slice();return t[13]=e[r],t[14]=e,t[15]=r,t}function vt(a){let e;return{c(){e=N("Add")},l(r){e=q(r,"Add")},m(r,t){v(r,e,t)},d(r){r&&g(e)}}}function Ie(a,e){let r,t,i,s;function n(_){e[8](_,e[13],e[14],e[15])}function l(){return e[9](e[15])}function o(){return e[10](e[15])}function m(){return e[11](e[15])}let b={isFirst:e[15]==0,isLast:e[15]==e[0].length-1,leftFeature:e[15]==0?"":e[0][e[15]-1],rightFeature:e[15]==e[0].length-1?"":e[0][e[15]+1],sectionType:e[1]};return e[13]!==void 0&&(b.value=e[13]),t=new wt({props:b}),U.push(()=>j(t,"value",n)),t.$on("delete",l),t.$on("moveLeft",o),t.$on("moveRight",m),{key:a,first:null,c(){r=te(),T(t.$$.fragment),this.h()},l(_){r=te(),L(t.$$.fragment,_),this.h()},h(){this.first=r},m(_,$){v(_,r,$),F(t,_,$),s=!0},p(_,$){e=_;const c={};$&1&&(c.isFirst=e[15]==0),$&1&&(c.isLast=e[15]==e[0].length-1),$&1&&(c.leftFeature=e[15]==0?"":e[0][e[15]-1]),$&1&&(c.rightFeature=e[15]==e[0].length-1?"":e[0][e[15]+1]),$&2&&(c.sectionType=e[1]),!i&&$&1&&(i=!0,c.value=e[13],A(()=>i=!1)),t.$set(c)},i(_){s||(k(t.$$.fragment,_),s=!0)},o(_){D(t.$$.fragment,_),s=!1},d(_){_&&g(r),S(t,_)}}}function yt(a){let e,r,t,i=[],s=new Map,n,l,o,m,b=a[2].toFixed(2)+"",_,$;e=new ue({props:{$$slots:{default:[vt]},$$scope:{ctx:a}}}),e.$on("click",a[3]);let c=re(a[0]);const B=u=>u[15];for(let u=0;u<c.length;u+=1){let f=Re(a,c,u),d=B(f);s.set(d,i[u]=Ie(d,f))}return{c(){T(e.$$.fragment),r=P(),t=I("div");for(let u=0;u<i.length;u+=1)i[u].c();n=P(),l=I("p"),o=N("Total width required (m): "),m=I("b"),_=N(b),this.h()},l(u){L(e.$$.fragment,u),r=W(u),t=O(u,"DIV",{style:!0});var f=H(t);for(let h=0;h<i.length;h+=1)i[h].l(f);f.forEach(g),n=W(u),l=O(u,"P",{});var d=H(l);o=q(d,"Total width required (m): "),m=O(d,"B",{});var w=H(m);_=q(w,b),w.forEach(g),d.forEach(g),this.h()},h(){X(t,"display","flex"),X(t,"flex-direction","row")},m(u,f){F(e,u,f),v(u,r,f),v(u,t,f);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(t,null);v(u,n,f),v(u,l,f),E(l,o),E(l,m),E(m,_),$=!0},p(u,[f]){const d={};f&65536&&(d.$$scope={dirty:f,ctx:u}),e.$set(d),f&115&&(c=re(u[0]),ne(),i=Qe(i,f,B,1,u,c,s,t,Xe,Ie,null,Re),le()),(!$||f&4)&&b!==(b=u[2].toFixed(2)+"")&&Q(_,b)},i(u){if(!$){k(e.$$.fragment,u);for(let f=0;f<c.length;f+=1)k(i[f]);$=!0}},o(u){D(e.$$.fragment,u);for(let f=0;f<i.length;f+=1)D(i[f]);$=!1},d(u){u&&(g(r),g(t),g(n),g(l)),S(e,u);for(let f=0;f<i.length;f+=1)i[f].d()}}}function kt(a,e,r){let t,i;se(a,V,f=>r(7,i=f));let{streetFeaturesLeftToRight:s}=e,{sectionType:n}=e;function l(){r(0,s=[...s,""])}function o(f){s.splice(f,1),r(0,s)}function m(f){r(0,[s[f-1],s[f]]=[s[f],s[f-1]],s)}function b(f){r(0,[s[f+1],s[f]]=[s[f],s[f+1]],s)}function _(f,d){let w=0;for(let h=0;h<s.length;h++){let y=s[h];if(!y)continue;let M=h==0?"":s[h-1],K=h==s.length-1?"":s[h+1],oe=pe(y,f.proposed.trafficData,M,K)[d=="Desirable"?0:1];w+=oe}return w}function $(f,d,w,h){w[h]=f,r(0,s)}const c=f=>o(f),B=f=>m(f),u=f=>b(f);return a.$$set=f=>{"streetFeaturesLeftToRight"in f&&r(0,s=f.streetFeaturesLeftToRight),"sectionType"in f&&r(1,n=f.sectionType)},a.$$.update=()=>{a.$$.dirty&130&&r(2,t=_(i,n))},[s,n,t,l,o,m,b,i,$,c,B,u]}class Ve extends x{constructor(e){super(),ee(this,e,kt,yt,Z,{streetFeaturesLeftToRight:0,sectionType:1})}}function Oe(a){let e,r,t,i;return{c(){e=I("p"),r=N("Effective speed limit, based on the limit and 85 percentile: "),t=N(a[1]),i=N(`
      mph`)},l(s){e=O(s,"P",{});var n=H(e);r=q(n,"Effective speed limit, based on the limit and 85 percentile: "),t=q(n,a[1]),i=q(n,`
      mph`),n.forEach(g)},m(s,n){v(s,e,n),E(e,r),E(e,t),E(e,i)},p(s,n){n&2&&Q(t,s[1])},d(s){s&&g(e)}}}function Dt(a){let e,r,t,i,s,n,l,o,m,b,_,$,c,B,u,f,d,w,h,y,M,K;function oe(p){a[3](p)}let he={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:Y(["<200","200-800",">800"])};a[0].proposed.trafficData.flowOneWay!==void 0&&(he.value=a[0].proposed.trafficData.flowOneWay),e=new J({props:he}),U.push(()=>j(e,"value",oe));function Ue(p){a[4](p)}let _e={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:Y(["<300","300-1,000",">1,000"])};a[0].proposed.trafficData.flowTwoWay!==void 0&&(_e.value=a[0].proposed.trafficData.flowTwoWay),i=new J({props:_e}),U.push(()=>j(i,"value",Ue));function Ae(p){a[5](p)}let ge={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:Y(["<300",">300"])};a[0].proposed.trafficData.flowSharedUse!==void 0&&(ge.value=a[0].proposed.trafficData.flowSharedUse),l=new J({props:ge}),U.push(()=>j(l,"value",Ae));function je(p){a[6](p)}let be={label:"Traffic flow (vpd)",emptyOption:!0,choices:Y(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};a[0].proposed.trafficData.trafficFlow!==void 0&&(be.value=a[0].proposed.trafficData.trafficFlow),b=new J({props:be}),U.push(()=>j(b,"value",je));function He(p){a[7](p)}let $e={label:"Speed limit (MPH)",emptyOption:!0,choices:Y(["<30","30","40","50","60","70"])};a[0].proposed.trafficData.speedLimit!==void 0&&($e.value=a[0].proposed.trafficData.speedLimit),c=new J({props:$e}),U.push(()=>j(c,"value",He));function ze(p){a[8](p)}let we={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};a[0].proposed.trafficData.observedSpeed!==void 0&&(we.value=a[0].proposed.trafficData.observedSpeed),f=new lt({props:we}),U.push(()=>j(f,"value",ze));let R=a[1]&&Oe(a);function Ge(p){a[9](p)}let ve={label:"Street function",emptyOption:!0,choices:Y(["High Street (active frontages)","Residential street","Local distributor road"])};return a[0].proposed.trafficData.streetFunction!==void 0&&(ve.value=a[0].proposed.trafficData.streetFunction),y=new J({props:ve}),U.push(()=>j(y,"value",Ge)),{c(){T(e.$$.fragment),t=P(),T(i.$$.fragment),n=P(),T(l.$$.fragment),m=P(),T(b.$$.fragment),$=P(),T(c.$$.fragment),u=P(),T(f.$$.fragment),w=P(),R&&R.c(),h=P(),T(y.$$.fragment)},l(p){L(e.$$.fragment,p),t=W(p),L(i.$$.fragment,p),n=W(p),L(l.$$.fragment,p),m=W(p),L(b.$$.fragment,p),$=W(p),L(c.$$.fragment,p),u=W(p),L(f.$$.fragment,p),w=W(p),R&&R.l(p),h=W(p),L(y.$$.fragment,p)},m(p,C){F(e,p,C),v(p,t,C),F(i,p,C),v(p,n,C),F(l,p,C),v(p,m,C),F(b,p,C),v(p,$,C),F(c,p,C),v(p,u,C),F(f,p,C),v(p,w,C),R&&R.m(p,C),v(p,h,C),F(y,p,C),K=!0},p(p,C){const ye={};!r&&C&1&&(r=!0,ye.value=p[0].proposed.trafficData.flowOneWay,A(()=>r=!1)),e.$set(ye);const ke={};!s&&C&1&&(s=!0,ke.value=p[0].proposed.trafficData.flowTwoWay,A(()=>s=!1)),i.$set(ke);const De={};!o&&C&1&&(o=!0,De.value=p[0].proposed.trafficData.flowSharedUse,A(()=>o=!1)),l.$set(De);const Te={};!_&&C&1&&(_=!0,Te.value=p[0].proposed.trafficData.trafficFlow,A(()=>_=!1)),b.$set(Te);const Le={};!B&&C&1&&(B=!0,Le.value=p[0].proposed.trafficData.speedLimit,A(()=>B=!1)),c.$set(Le);const Fe={};!d&&C&1&&(d=!0,Fe.value=p[0].proposed.trafficData.observedSpeed,A(()=>d=!1)),f.$set(Fe),p[1]?R?R.p(p,C):(R=Oe(p),R.c(),R.m(h.parentNode,h)):R&&(R.d(1),R=null);const Se={};!M&&C&1&&(M=!0,Se.value=p[0].proposed.trafficData.streetFunction,A(()=>M=!1)),y.$set(Se)},i(p){K||(k(e.$$.fragment,p),k(i.$$.fragment,p),k(l.$$.fragment,p),k(b.$$.fragment,p),k(c.$$.fragment,p),k(f.$$.fragment,p),k(y.$$.fragment,p),K=!0)},o(p){D(e.$$.fragment,p),D(i.$$.fragment,p),D(l.$$.fragment,p),D(b.$$.fragment,p),D(c.$$.fragment,p),D(f.$$.fragment,p),D(y.$$.fragment,p),K=!1},d(p){p&&(g(t),g(n),g(m),g($),g(u),g(w),g(h)),S(e,p),S(i,p),S(l,p),S(b,p),S(c,p),S(f,p),R&&R.d(p),S(y,p)}}}function Tt(a){let e,r;return e=new ce({props:{label:"Traffic data and additional information",$$slots:{default:[Dt]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,i){F(e,t,i),r=!0},p(t,[i]){const s={};i&1027&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){D(e.$$.fragment,t),r=!1},d(t){S(e,t)}}}function Lt(a,e,r){let t,i;se(a,V,c=>r(0,i=c));let{valid:s}=e;function n(c){a.$$.not_equal(i.proposed.trafficData.flowOneWay,c)&&(i.proposed.trafficData.flowOneWay=c,V.set(i))}function l(c){a.$$.not_equal(i.proposed.trafficData.flowTwoWay,c)&&(i.proposed.trafficData.flowTwoWay=c,V.set(i))}function o(c){a.$$.not_equal(i.proposed.trafficData.flowSharedUse,c)&&(i.proposed.trafficData.flowSharedUse=c,V.set(i))}function m(c){a.$$.not_equal(i.proposed.trafficData.trafficFlow,c)&&(i.proposed.trafficData.trafficFlow=c,V.set(i))}function b(c){a.$$.not_equal(i.proposed.trafficData.speedLimit,c)&&(i.proposed.trafficData.speedLimit=c,V.set(i))}function _(c){a.$$.not_equal(i.proposed.trafficData.observedSpeed,c)&&(i.proposed.trafficData.observedSpeed=c,V.set(i))}function $(c){a.$$.not_equal(i.proposed.trafficData.streetFunction,c)&&(i.proposed.trafficData.streetFunction=c,V.set(i))}return a.$$set=c=>{"valid"in c&&r(2,s=c.valid)},a.$$.update=()=>{a.$$.dirty&1&&r(2,s=i.proposed.trafficData.flowOneWay!=""&&i.proposed.trafficData.flowTwoWay!=""&&i.proposed.trafficData.flowSharedUse!=""&&i.proposed.trafficData.trafficFlow!=""&&i.proposed.trafficData.speedLimit!=""&&i.proposed.trafficData.observedSpeed!=null&&i.proposed.trafficData.streetFunction!=""),a.$$.dirty&1&&r(1,t=Me(i.proposed.trafficData.speedLimit,i.proposed.trafficData.observedSpeed))},[i,t,s,n,l,o,m,b,_,$]}class Ft extends x{constructor(e){super(),ee(this,e,Lt,Tt,Z,{valid:2})}}function St(a){let e,r="Fill out all data above to continue";return{c(){e=I("p"),e.textContent=r},l(t){e=O(t,"P",{"data-svelte-h":!0}),de(e)!=="svelte-ma95"&&(e.textContent=r)},m(t,i){v(t,e,i)},p:fe,i:fe,o:fe,d(t){t&&g(e)}}}function Ct(a){let e,r,t,i;return e=new ce({props:{label:"Desirable Minimum Cross-Section",$$slots:{default:[Bt]},$$scope:{ctx:a}}}),t=new ce({props:{label:"Absolute Minimum Cross-Section",$$slots:{default:[Pt]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment),r=P(),T(t.$$.fragment)},l(s){L(e.$$.fragment,s),r=W(s),L(t.$$.fragment,s)},m(s,n){F(e,s,n),v(s,r,n),F(t,s,n),i=!0},p(s,n){const l={};n&34&&(l.$$scope={dirty:n,ctx:s}),e.$set(l);const o={};n&34&&(o.$$scope={dirty:n,ctx:s}),t.$set(o)},i(s){i||(k(e.$$.fragment,s),k(t.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),i=!1},d(s){s&&g(r),S(e,s),S(t,s)}}}function Bt(a){let e,r,t;function i(n){a[3](n)}let s={sectionType:"Desirable"};return a[1].proposed.desirableMinimumCrossSection!==void 0&&(s.streetFeaturesLeftToRight=a[1].proposed.desirableMinimumCrossSection),e=new Ve({props:s}),U.push(()=>j(e,"streetFeaturesLeftToRight",i)),{c(){T(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,l){F(e,n,l),t=!0},p(n,l){const o={};!r&&l&2&&(r=!0,o.streetFeaturesLeftToRight=n[1].proposed.desirableMinimumCrossSection,A(()=>r=!1)),e.$set(o)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Pt(a){let e,r,t;function i(n){a[4](n)}let s={sectionType:"Absolute"};return a[1].proposed.absoluteMinimumCrossSection!==void 0&&(s.streetFeaturesLeftToRight=a[1].proposed.absoluteMinimumCrossSection),e=new Ve({props:s}),U.push(()=>j(e,"streetFeaturesLeftToRight",i)),{c(){T(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,l){F(e,n,l),t=!0},p(n,l){const o={};!r&&l&2&&(r=!0,o.streetFeaturesLeftToRight=n[1].proposed.absoluteMinimumCrossSection,A(()=>r=!1)),e.$set(o)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){D(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Wt(a){let e,r,t,i,s,n,l,o,m;r=new Ze({props:{links:[["Tools","/"],["Route cross-section","/cross_section"]],current:"Proposed Cross-Sections"}});function b(u){a[2](u)}let _={};a[0]!==void 0&&(_.valid=a[0]),i=new Ft({props:_}),U.push(()=>j(i,"valid",b));const $=[Ct,St],c=[];function B(u,f){return u[0]?0:1}return l=B(a),o=c[l]=$[l](a),{c(){e=I("div"),T(r.$$.fragment),t=P(),T(i.$$.fragment),n=P(),o.c(),this.h()},l(u){e=O(u,"DIV",{class:!0});var f=H(e);L(r.$$.fragment,f),t=W(f),L(i.$$.fragment,f),n=W(f),o.l(f),f.forEach(g),this.h()},h(){G(e,"class","govuk-prose")},m(u,f){v(u,e,f),F(r,e,null),E(e,t),F(i,e,null),E(e,n),c[l].m(e,null),m=!0},p(u,[f]){const d={};!s&&f&1&&(s=!0,d.valid=u[0],A(()=>s=!1)),i.$set(d);let w=l;l=B(u),l===w?c[l].p(u,f):(ne(),D(c[w],1,1,()=>{c[w]=null}),le(),o=c[l],o?o.p(u,f):(o=c[l]=$[l](u),o.c()),k(o,1),o.m(e,null))},i(u){m||(k(r.$$.fragment,u),k(i.$$.fragment,u),k(o),m=!0)},o(u){D(r.$$.fragment,u),D(i.$$.fragment,u),D(o),m=!1},d(u){u&&g(e),S(r),S(i),c[l].d()}}}function Nt(a,e,r){let t;se(a,V,o=>r(1,t=o));let i=!1;function s(o){i=o,r(0,i)}function n(o){a.$$.not_equal(t.proposed.desirableMinimumCrossSection,o)&&(t.proposed.desirableMinimumCrossSection=o,V.set(t))}function l(o){a.$$.not_equal(t.proposed.absoluteMinimumCrossSection,o)&&(t.proposed.absoluteMinimumCrossSection=o,V.set(t))}return[i,t,s,n,l]}class Gt extends x{constructor(e){super(),ee(this,e,Nt,Wt,Z,{})}}export{Gt as component};
