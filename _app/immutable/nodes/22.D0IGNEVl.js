var rn=Object.defineProperty;var nn=(r,e,t)=>e in r?rn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var J=(r,e,t)=>(nn(r,typeof e!="symbol"?e+"":e,t),t);import{s as Ze,v as I,x as V,l as on,u as an,m as sn,o as ln,H as _e,k as Ue,a as G,g as T,i as C,n as Be,f as k,e as $e,c as Me,b as mt,w as xe,a8 as un,M as er,p as st,E as Ke,h as Re,t as le,d as ue,j as ur}from"../chunks/scheduler.d-ZThAIN.js";import{S as We,i as Qe,e as Z,c as q,a as X,m as Y,t as A,b as B,d as D,g as fr,f as cr}from"../chunks/index.BKLGIcjh.js";import{p as Le}from"../chunks/index.BE8SWvcl.js";import{S as ke}from"../chunks/Select.DYDTV9Cm.js";import{T as Je}from"../chunks/TextArea.pNjiCJX9.js";import{T as Ce}from"../chunks/TextInput.DLFUCrlZ.js";import{s as U}from"../chunks/data.DvIB8Goz.js";import{D as fn}from"../chunks/DefaultButton.gdQzz5EL.js";import{S as it,W as cn}from"../chunks/WarningButton.CXBTrJR0.js";import{L as mn,g as hn,e as pn,f as vn,h as ht,i as gn,j as dn,G as mr,M as yn}from"../chunks/MapLibreMap.BSyT-EeN.js";import{w as hr}from"../chunks/entry.B-S-FJbp.js";import{C as bn}from"../chunks/CircleLayer.CAlMisdV.js";import{L as _n}from"../chunks/LineLayer.BFOptaU5.js";import{a as wn,t as $n,r as Mn,f as Pn,d as Sn}from"../chunks/lists.Ci0sBo6t.js";function En(r){let e;const t=r[15].default,n=on(t,r,r[23],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8388608)&&an(n,t,i,i[23],e?ln(t,i[23],o,null):sn(i[23]),null)},i(i){e||(A(n,i),e=!0)},o(i){B(n,i),e=!1},d(i){n&&n.d(i)}}}function Ln(r){let e,t,n;function i(a){r[16](a)}let o={id:r[1],type:"fill",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],minzoom:r[9],maxzoom:r[10],hoverCursor:r[11],manageHoverState:r[12],eventsIfTopMost:r[13],interactive:r[14],$$slots:{default:[En]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new mn({props:o}),I.push(()=>Z(e,"hovered",i)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){q(e.$$.fragment)},l(a){X(e.$$.fragment,a)},m(a,l){Y(e,a,l),n=!0},p(a,[l]){const s={};l&2&&(s.id=a[1]),l&4&&(s.source=a[2]),l&8&&(s.sourceLayer=a[3]),l&16&&(s.beforeId=a[4]),l&32&&(s.beforeLayerType=a[5]),l&64&&(s.paint=a[6]),l&128&&(s.layout=a[7]),l&256&&(s.filter=a[8]),l&512&&(s.minzoom=a[9]),l&1024&&(s.maxzoom=a[10]),l&2048&&(s.hoverCursor=a[11]),l&4096&&(s.manageHoverState=a[12]),l&8192&&(s.eventsIfTopMost=a[13]),l&16384&&(s.interactive=a[14]),l&8388608&&(s.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,s.hovered=a[0],V(()=>t=!1)),e.$set(s)},i(a){n||(A(e.$$.fragment,a),n=!0)},o(a){B(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function kn(r,e,t){let{$$slots:n={},$$scope:i}=e,{id:o=hn("fill")}=e,{source:a=void 0}=e,{sourceLayer:l=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:m=void 0}=e,{paint:g}=e,{layout:b=void 0}=e,{filter:M=void 0}=e,{minzoom:d=void 0}=e,{maxzoom:w=void 0}=e,{hoverCursor:L=void 0}=e,{manageHoverState:E=!1}=e,{hovered:x=null}=e,{eventsIfTopMost:u=!1}=e,{interactive:c=!0}=e;function h(p){x=p,t(0,x)}function v(p){_e.call(this,r,p)}function y(p){_e.call(this,r,p)}function _(p){_e.call(this,r,p)}function $(p){_e.call(this,r,p)}function P(p){_e.call(this,r,p)}function F(p){_e.call(this,r,p)}return r.$$set=p=>{"id"in p&&t(1,o=p.id),"source"in p&&t(2,a=p.source),"sourceLayer"in p&&t(3,l=p.sourceLayer),"beforeId"in p&&t(4,s=p.beforeId),"beforeLayerType"in p&&t(5,m=p.beforeLayerType),"paint"in p&&t(6,g=p.paint),"layout"in p&&t(7,b=p.layout),"filter"in p&&t(8,M=p.filter),"minzoom"in p&&t(9,d=p.minzoom),"maxzoom"in p&&t(10,w=p.maxzoom),"hoverCursor"in p&&t(11,L=p.hoverCursor),"manageHoverState"in p&&t(12,E=p.manageHoverState),"hovered"in p&&t(0,x=p.hovered),"eventsIfTopMost"in p&&t(13,u=p.eventsIfTopMost),"interactive"in p&&t(14,c=p.interactive),"$$scope"in p&&t(23,i=p.$$scope)},[x,o,a,l,s,m,g,b,M,d,w,L,E,u,c,n,h,v,y,_,$,P,F,i]}class pr extends We{constructor(e){super(),Qe(this,e,kn,Ln,Ze,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}var Cn=Object.defineProperty,N=(r,e)=>Cn(r,"name",{value:e,configurable:!0}),Fn=class{constructor(e){this.direction=!1,this.compareProperties=!0;var t,n,i;this.precision=10**-((t=e==null?void 0:e.precision)!=null?t:17),this.direction=(n=e==null?void 0:e.direction)!=null?n:!1,this.compareProperties=(i=e==null?void 0:e.compareProperties)!=null?i:!0}compare(e,t){if(e.type!==t.type||!Ae(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates);case"Polygon":return this.comparePolygon(e,t);case"GeometryCollection":return this.compareGeometryCollection(e,t);case"Feature":return this.compareFeature(e,t);case"FeatureCollection":return this.compareFeatureCollection(e,t);default:if(e.type.startsWith("Multi")){const n=lt(e),i=lt(t);return n.every(o=>i.some(a=>this.compare(o,a)))}}return!1}compareCoord(e,t){return e.length===t.length&&e.every((n,i)=>Math.abs(n-t[i])<this.precision)}compareLine(e,t,n=0,i=!1){if(!Ae(e,t))return!1;const o=e;let a=t;if(i&&!this.compareCoord(o[0],a[0])){const s=this.fixStartIndex(a,o);if(s)a=s;else return!1}const l=this.compareCoord(o[n],a[n]);return this.direction||l?this.comparePath(o,a):this.compareCoord(o[n],a[a.length-(1+n)])?this.comparePath(o.slice().reverse(),a):!1}fixStartIndex(e,t){let n,i=-1;for(let o=0;o<e.length;o++)if(this.compareCoord(e[o],t[0])){i=o;break}return i>=0&&(n=[].concat(e.slice(i,e.length),e.slice(1,i+1))),n}comparePath(e,t){return e.every((n,i)=>this.compareCoord(n,t[i]))}comparePolygon(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){const n=e.coordinates.slice(1,e.coordinates.length),i=t.coordinates.slice(1,t.coordinates.length);return n.every(o=>i.some(a=>this.compareLine(o,a,1,!0)))}return!1}compareGeometryCollection(e,t){return Ae(e.geometries,t.geometries)&&this.compareBBox(e,t)&&e.geometries.every((n,i)=>this.compare(n,t.geometries[i]))}compareFeature(e,t){return e.id===t.id&&(this.compareProperties?pn(e.properties,t.properties):!0)&&this.compareBBox(e,t)&&this.compare(e.geometry,t.geometry)}compareFeatureCollection(e,t){return Ae(e.features,t.features)&&this.compareBBox(e,t)&&e.features.every((n,i)=>this.compare(n,t.features[i]))}compareBBox(e,t){return!e.bbox&&!t.bbox||(e.bbox&&t.bbox?this.compareCoord(e.bbox,t.bbox):!1)}};N(Fn,"GeojsonEquality");function Ae(r,e){return r.coordinates?r.coordinates.length===e.coordinates.length:r.length===e.length}N(Ae,"sameLength");function lt(r){return r.coordinates.map(e=>({type:r.type.replace("Multi",""),coordinates:e}))}N(lt,"explode");var te=63710088e-1,vr={centimeters:te*100,centimetres:te*100,degrees:360/(2*Math.PI),feet:te*3.28084,inches:te*39.37,kilometers:te/1e3,kilometres:te/1e3,meters:te,metres:te,miles:te/1609.344,millimeters:te*1e3,millimetres:te*1e3,nauticalmiles:te/1852,radians:1,yards:te*1.0936},tr={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ce(r,e,t={}){const n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=r,n}N(ce,"feature");function An(r,e,t={}){switch(r){case"Point":return pe(e).geometry;case"LineString":return ve(e).geometry;case"Polygon":return pt(e).geometry;case"MultiPoint":return dr(e).geometry;case"MultiLineString":return gr(e).geometry;case"MultiPolygon":return yr(e).geometry;default:throw new Error(r+" is invalid")}}N(An,"geometry");function pe(r,e,t={}){if(!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!He(r[0])||!He(r[1]))throw new Error("coordinates must contain numbers");return ce({type:"Point",coordinates:r},e,t)}N(pe,"point");function Bn(r,e,t={}){return je(r.map(n=>pe(n,e)),t)}N(Bn,"points");function pt(r,e,t={}){for(const i of r){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}return ce({type:"Polygon",coordinates:r},e,t)}N(pt,"polygon");function xn(r,e,t={}){return je(r.map(n=>pt(n,e)),t)}N(xn,"polygons");function ve(r,e,t={}){if(r.length<2)throw new Error("coordinates must be an array of two or more positions");return ce({type:"LineString",coordinates:r},e,t)}N(ve,"lineString");function Rn(r,e,t={}){return je(r.map(n=>ve(n,e)),t)}N(Rn,"lineStrings");function je(r,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}N(je,"featureCollection");function gr(r,e,t={}){return ce({type:"MultiLineString",coordinates:r},e,t)}N(gr,"multiLineString");function dr(r,e,t={}){return ce({type:"MultiPoint",coordinates:r},e,t)}N(dr,"multiPoint");function yr(r,e,t={}){return ce({type:"MultiPolygon",coordinates:r},e,t)}N(yr,"multiPolygon");function On(r,e,t={}){return ce({type:"GeometryCollection",geometries:r},e,t)}N(On,"geometryCollection");function qn(r,e=0){if(e&&!(e>=0))throw new Error("precision must be a positive number");const t=Math.pow(10,e||0);return Math.round(r*t)/t}N(qn,"round");function br(r,e="kilometers"){const t=vr[e];if(!t)throw new Error(e+" units is invalid");return r*t}N(br,"radiansToLength");function vt(r,e="kilometers"){const t=vr[e];if(!t)throw new Error(e+" units is invalid");return r/t}N(vt,"lengthToRadians");function Xn(r,e){return _r(vt(r,e))}N(Xn,"lengthToDegrees");function Yn(r){let e=r%360;return e<0&&(e+=360),e}N(Yn,"bearingToAzimuth");function _r(r){return r%(2*Math.PI)*180/Math.PI}N(_r,"radiansToDegrees");function Dn(r){return r%360*Math.PI/180}N(Dn,"degreesToRadians");function Nn(r,e="kilometers",t="kilometers"){if(!(r>=0))throw new Error("length must be a positive number");return br(vt(r,e),t)}N(Nn,"convertLength");function Gn(r,e="meters",t="kilometers"){if(!(r>=0))throw new Error("area must be a positive number");const n=tr[e];if(!n)throw new Error("invalid original units");const i=tr[t];if(!i)throw new Error("invalid final units");return r/n*i}N(Gn,"convertArea");function He(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}N(He,"isNumber");function gt(r){return r!==null&&typeof r=="object"&&!Array.isArray(r)}N(gt,"isObject");function Tn(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(r.length!==4&&r.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(e=>{if(!He(e))throw new Error("bbox must only contain numbers")})}N(Tn,"validateBBox");function zn(r){if(!r)throw new Error("id is required");if(["string","number"].indexOf(typeof r)===-1)throw new Error("id must be a number or a string")}N(zn,"validateId");var Jn=Object.defineProperty,K=(r,e)=>Jn(r,"name",{value:e,configurable:!0});function Xe(r,e,t){if(r!==null)for(var n,i,o,a,l,s,m,g=0,b=0,M,d=r.type,w=d==="FeatureCollection",L=d==="Feature",E=w?r.features.length:1,x=0;x<E;x++){m=w?r.features[x].geometry:L?r.geometry:r,M=m?m.type==="GeometryCollection":!1,l=M?m.geometries.length:1;for(var u=0;u<l;u++){var c=0,h=0;if(a=M?m.geometries[u]:m,a!==null){s=a.coordinates;var v=a.type;switch(g=t&&(v==="Polygon"||v==="MultiPolygon")?1:0,v){case null:break;case"Point":if(e(s,b,x,c,h)===!1)return!1;b++,c++;break;case"LineString":case"MultiPoint":for(n=0;n<s.length;n++){if(e(s[n],b,x,c,h)===!1)return!1;b++,v==="MultiPoint"&&c++}v==="LineString"&&c++;break;case"Polygon":case"MultiLineString":for(n=0;n<s.length;n++){for(i=0;i<s[n].length-g;i++){if(e(s[n][i],b,x,c,h)===!1)return!1;b++}v==="MultiLineString"&&c++,v==="Polygon"&&h++}v==="Polygon"&&c++;break;case"MultiPolygon":for(n=0;n<s.length;n++){for(h=0,i=0;i<s[n].length;i++){for(o=0;o<s[n][i].length-g;o++){if(e(s[n][i][o],b,x,c,h)===!1)return!1;b++}h++}c++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(Xe(a.geometries[n],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}K(Xe,"coordEach");function Un(r,e,t,n){var i=t;return Xe(r,function(o,a,l,s,m){a===0&&t===void 0?i=o:i=e(i,o,a,l,s,m)},n),i}K(Un,"coordReduce");function wr(r,e){var t;switch(r.type){case"FeatureCollection":for(t=0;t<r.features.length&&e(r.features[t].properties,t)!==!1;t++);break;case"Feature":e(r.properties,0);break}}K(wr,"propEach");function Kn(r,e,t){var n=t;return wr(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}K(Kn,"propReduce");function $r(r,e){if(r.type==="Feature")e(r,0);else if(r.type==="FeatureCollection")for(var t=0;t<r.features.length&&e(r.features[t],t)!==!1;t++);}K($r,"featureEach");function Hn(r,e,t){var n=t;return $r(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}K(Hn,"featureReduce");function In(r){var e=[];return Xe(r,function(t){e.push(t)}),e}K(In,"coordAll");function dt(r,e){var t,n,i,o,a,l,s,m,g,b,M=0,d=r.type==="FeatureCollection",w=r.type==="Feature",L=d?r.features.length:1;for(t=0;t<L;t++){for(l=d?r.features[t].geometry:w?r.geometry:r,m=d?r.features[t].properties:w?r.properties:{},g=d?r.features[t].bbox:w?r.bbox:void 0,b=d?r.features[t].id:w?r.id:void 0,s=l?l.type==="GeometryCollection":!1,a=s?l.geometries.length:1,i=0;i<a;i++){if(o=s?l.geometries[i]:l,o===null){if(e(null,M,m,g,b)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,M,m,g,b)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(e(o.geometries[n],M,m,g,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}M++}}K(dt,"geomEach");function Mr(r,e,t){var n=t;return dt(r,function(i,o,a,l,s){o===0&&t===void 0?n=i:n=e(n,i,o,a,l,s)}),n}K(Mr,"geomReduce");function et(r,e){dt(r,function(t,n,i,o,a){var l=t===null?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return e(ce(t,i,{bbox:o,id:a}),n,0)===!1?!1:void 0}var s;switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon";break}for(var m=0;m<t.coordinates.length;m++){var g=t.coordinates[m],b={type:s,coordinates:g};if(e(ce(b,i),n,m)===!1)return!1}})}K(et,"flattenEach");function Vn(r,e,t){var n=t;return et(r,function(i,o,a){o===0&&a===0&&t===void 0?n=i:n=e(n,i,o,a)}),n}K(Vn,"flattenReduce");function Pr(r,e){et(r,function(t,n,i){var o=0;if(t.geometry){var a=t.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var l,s=0,m=0,g=0;if(Xe(t,function(b,M,d,w,L){if(l===void 0||n>s||w>m||L>g){l=b,s=n,m=w,g=L,o=0;return}var E=ve([l,b],t.properties);if(e(E,n,i,L,o)===!1)return!1;o++,l=b})===!1)return!1}}})}K(Pr,"segmentEach");function Zn(r,e,t){var n=t,i=!1;return Pr(r,function(o,a,l,s,m){i===!1&&t===void 0?n=o:n=e(n,o,a,l,s,m),i=!0}),n}K(Zn,"segmentReduce");function Sr(r,e){if(!r)throw new Error("geojson is required");et(r,function(t,n,i){if(t.geometry!==null){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(e(t,n,i,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<a.length;l++)if(e(ve(a[l],t.properties),n,i,l)===!1)return!1;break}}})}K(Sr,"lineEach");function Wn(r,e,t){var n=t;return Sr(r,function(i,o,a,l){o===0&&t===void 0?n=i:n=e(n,i,o,a,l)}),n}K(Wn,"lineReduce");function Qn(r,e){if(e=e||{},!gt(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.segmentIndex||0,a=e.properties,l;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,l=r.features[t].geometry;break;case"Feature":a=a||r.properties,l=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=r;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var s=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=s.length+o-1),ve([s[o],s[o+1]],a,e);case"Polygon":return i<0&&(i=s.length+i),o<0&&(o=s[i].length+o-1),ve([s[i][o],s[i][o+1]],a,e);case"MultiLineString":return n<0&&(n=s.length+n),o<0&&(o=s[n].length+o-1),ve([s[n][o],s[n][o+1]],a,e);case"MultiPolygon":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i),o<0&&(o=s[n][i].length-o-1),ve([s[n][i][o],s[n][i][o+1]],a,e)}throw new Error("geojson is invalid")}K(Qn,"findSegment");function jn(r,e){if(e=e||{},!gt(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.coordIndex||0,a=e.properties,l;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,l=r.features[t].geometry;break;case"Feature":a=a||r.properties,l=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=r;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var s=l.coordinates;switch(l.type){case"Point":return pe(s,a,e);case"MultiPoint":return n<0&&(n=s.length+n),pe(s[n],a,e);case"LineString":return o<0&&(o=s.length+o),pe(s[o],a,e);case"Polygon":return i<0&&(i=s.length+i),o<0&&(o=s[i].length+o),pe(s[i][o],a,e);case"MultiLineString":return n<0&&(n=s.length+n),o<0&&(o=s[n].length+o),pe(s[n][o],a,e);case"MultiPolygon":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i),o<0&&(o=s[n][i].length-o),pe(s[n][i][o],a,e)}throw new Error("geojson is invalid")}K(jn,"findPoint");var ei=Object.defineProperty,tt=(r,e)=>ei(r,"name",{value:e,configurable:!0});function Er(r){return Mr(r,(e,t)=>e+Lr(t),0)}tt(Er,"area");function Lr(r){let e=0,t;switch(r.type){case"Polygon":return ut(r.coordinates);case"MultiPolygon":for(t=0;t<r.coordinates.length;t++)e+=ut(r.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}tt(Lr,"calculateArea");function ut(r){let e=0;if(r&&r.length>0){e+=Math.abs(ft(r[0]));for(let t=1;t<r.length;t++)e-=Math.abs(ft(r[t]))}return e}tt(ut,"polygonArea");var ti=te*te/2,ot=Math.PI/180;function ft(r){const e=r.length;if(e<=2)return 0;let t=0,n=0;for(;n<e;){const i=r[n],o=r[n+1===e?0:n+1],a=r[n+2>=e?(n+2)%e:n+2],l=i[0]*ot,s=o[1]*ot,m=a[0]*ot;t+=(m-l)*Math.sin(s),n++}return t*ti}tt(ft,"ringArea");var rr=Er,W=63710088e-1,yt={centimeters:W*100,centimetres:W*100,degrees:W/111325,feet:W*3.28084,inches:W*39.37,kilometers:W/1e3,kilometres:W/1e3,meters:W,metres:W,miles:W/1609.344,millimeters:W*1e3,millimetres:W*1e3,nauticalmiles:W/1852,radians:1,yards:W*1.0936},ri={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/W,yards:1.0936133},ct={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function oe(r,e,t){t===void 0&&(t={});var n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=r,n}function ni(r,e,t){switch(r){case"Point":return re(e).geometry;case"LineString":return ne(e).geometry;case"Polygon":return bt(e).geometry;case"MultiPoint":return Cr(e).geometry;case"MultiLineString":return kr(e).geometry;case"MultiPolygon":return Fr(e).geometry;default:throw new Error(r+" is invalid")}}function re(r,e,t){if(t===void 0&&(t={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ie(r[0])||!Ie(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return oe(n,e,t)}function ii(r,e,t){return t===void 0&&(t={}),be(r.map(function(n){return re(n,e)}),t)}function bt(r,e,t){t===void 0&&(t={});for(var n=0,i=r;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:r};return oe(l,e,t)}function oi(r,e,t){return t===void 0&&(t={}),be(r.map(function(n){return bt(n,e)}),t)}function ne(r,e,t){if(t===void 0&&(t={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:r};return oe(n,e,t)}function ai(r,e,t){return t===void 0&&(t={}),be(r.map(function(n){return ne(n,e)}),t)}function be(r,e){e===void 0&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}function kr(r,e,t){t===void 0&&(t={});var n={type:"MultiLineString",coordinates:r};return oe(n,e,t)}function Cr(r,e,t){t===void 0&&(t={});var n={type:"MultiPoint",coordinates:r};return oe(n,e,t)}function Fr(r,e,t){t===void 0&&(t={});var n={type:"MultiPolygon",coordinates:r};return oe(n,e,t)}function si(r,e,t){t===void 0&&(t={});var n={type:"GeometryCollection",geometries:r};return oe(n,e,t)}function li(r,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(r*t)/t}function _t(r,e){e===void 0&&(e="kilometers");var t=yt[e];if(!t)throw new Error(e+" units is invalid");return r*t}function rt(r,e){e===void 0&&(e="kilometers");var t=yt[e];if(!t)throw new Error(e+" units is invalid");return r/t}function ui(r,e){return Oe(rt(r,e))}function fi(r){var e=r%360;return e<0&&(e+=360),e}function Oe(r){var e=r%(2*Math.PI);return e*180/Math.PI}function ie(r){var e=r%360;return e*Math.PI/180}function ci(r,e,t){if(e===void 0&&(e="kilometers"),t===void 0&&(t="kilometers"),!(r>=0))throw new Error("length must be a positive number");return _t(rt(r,e),t)}function mi(r,e,t){if(e===void 0&&(e="meters"),t===void 0&&(t="kilometers"),!(r>=0))throw new Error("area must be a positive number");var n=ct[e];if(!n)throw new Error("invalid original units");var i=ct[t];if(!i)throw new Error("invalid final units");return r/n*i}function Ie(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function wt(r){return!!r&&r.constructor===Object}function hi(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(r.length!==4&&r.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(e){if(!Ie(e))throw new Error("bbox must only contain numbers")})}function pi(r){if(!r)throw new Error("id is required");if(["string","number"].indexOf(typeof r)===-1)throw new Error("id must be a number or a string")}const vi=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:ct,bearingToAzimuth:fi,convertArea:mi,convertLength:ci,degreesToRadians:ie,earthRadius:W,factors:yt,feature:oe,featureCollection:be,geometry:ni,geometryCollection:si,isNumber:Ie,isObject:wt,lengthToDegrees:ui,lengthToRadians:rt,lineString:ne,lineStrings:ai,multiLineString:kr,multiPoint:Cr,multiPolygon:Fr,point:re,points:ii,polygon:bt,polygons:oi,radiansToDegrees:Oe,radiansToLength:_t,round:li,unitsFactors:ri,validateBBox:hi,validateId:pi},Symbol.toStringTag,{value:"Module"}));function qe(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return r.geometry.coordinates;if(r.type==="Point")return r.coordinates}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return r;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Pe(r){if(Array.isArray(r))return r;if(r.type==="Feature"){if(r.geometry!==null)return r.geometry.coordinates}else if(r.coordinates)return r.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ar(r,e,t){if(t===void 0&&(t={}),t.final===!0)return gi(r,e);var n=qe(r),i=qe(e),o=ie(n[0]),a=ie(i[0]),l=ie(n[1]),s=ie(i[1]),m=Math.sin(a-o)*Math.cos(s),g=Math.cos(l)*Math.sin(s)-Math.sin(l)*Math.cos(s)*Math.cos(a-o);return Oe(Math.atan2(m,g))}function gi(r,e){var t=Ar(e,r);return t=(t+180)%360,t}function Fe(r,e,t){t===void 0&&(t={});var n=qe(r),i=qe(e),o=ie(i[1]-n[1]),a=ie(i[0]-n[0]),l=ie(n[1]),s=ie(i[1]),m=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(l)*Math.cos(s);return _t(2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)),t.units)}function nr(r,e,t,n){n===void 0&&(n={});var i=qe(r),o=ie(i[0]),a=ie(i[1]),l=ie(t),s=rt(e,n.units),m=Math.asin(Math.sin(a)*Math.cos(s)+Math.cos(a)*Math.sin(s)*Math.cos(l)),g=o+Math.atan2(Math.sin(l)*Math.sin(s)*Math.cos(a),Math.cos(s)-Math.sin(a)*Math.sin(m)),b=Oe(g),M=Oe(m);return re([b,M],n.properties)}function Ye(r,e,t){if(r!==null)for(var n,i,o,a,l,s,m,g=0,b=0,M,d=r.type,w=d==="FeatureCollection",L=d==="Feature",E=w?r.features.length:1,x=0;x<E;x++){m=w?r.features[x].geometry:L?r.geometry:r,M=m?m.type==="GeometryCollection":!1,l=M?m.geometries.length:1;for(var u=0;u<l;u++){var c=0,h=0;if(a=M?m.geometries[u]:m,a!==null){s=a.coordinates;var v=a.type;switch(g=t&&(v==="Polygon"||v==="MultiPolygon")?1:0,v){case null:break;case"Point":if(e(s,b,x,c,h)===!1)return!1;b++,c++;break;case"LineString":case"MultiPoint":for(n=0;n<s.length;n++){if(e(s[n],b,x,c,h)===!1)return!1;b++,v==="MultiPoint"&&c++}v==="LineString"&&c++;break;case"Polygon":case"MultiLineString":for(n=0;n<s.length;n++){for(i=0;i<s[n].length-g;i++){if(e(s[n][i],b,x,c,h)===!1)return!1;b++}v==="MultiLineString"&&c++,v==="Polygon"&&h++}v==="Polygon"&&c++;break;case"MultiPolygon":for(n=0;n<s.length;n++){for(h=0,i=0;i<s[n].length;i++){for(o=0;o<s[n][i].length-g;o++){if(e(s[n][i][o],b,x,c,h)===!1)return!1;b++}h++}c++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(Ye(a.geometries[n],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function di(r,e,t,n){var i=t;return Ye(r,function(o,a,l,s,m){a===0&&t===void 0?i=o:i=e(i,o,a,l,s,m)},n),i}function Br(r,e){var t;switch(r.type){case"FeatureCollection":for(t=0;t<r.features.length&&e(r.features[t].properties,t)!==!1;t++);break;case"Feature":e(r.properties,0);break}}function yi(r,e,t){var n=t;return Br(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}function Ve(r,e){if(r.type==="Feature")e(r,0);else if(r.type==="FeatureCollection")for(var t=0;t<r.features.length&&e(r.features[t],t)!==!1;t++);}function bi(r,e,t){var n=t;return Ve(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}function _i(r){var e=[];return Ye(r,function(t){e.push(t)}),e}function $t(r,e){var t,n,i,o,a,l,s,m,g,b,M=0,d=r.type==="FeatureCollection",w=r.type==="Feature",L=d?r.features.length:1;for(t=0;t<L;t++){for(l=d?r.features[t].geometry:w?r.geometry:r,m=d?r.features[t].properties:w?r.properties:{},g=d?r.features[t].bbox:w?r.bbox:void 0,b=d?r.features[t].id:w?r.id:void 0,s=l?l.type==="GeometryCollection":!1,a=s?l.geometries.length:1,i=0;i<a;i++){if(o=s?l.geometries[i]:l,o===null){if(e(null,M,m,g,b)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,M,m,g,b)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(e(o.geometries[n],M,m,g,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}M++}}function wi(r,e,t){var n=t;return $t(r,function(i,o,a,l,s){o===0&&t===void 0?n=i:n=e(n,i,o,a,l,s)}),n}function Se(r,e){$t(r,function(t,n,i,o,a){var l=t===null?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return e(oe(t,i,{bbox:o,id:a}),n,0)===!1?!1:void 0}var s;switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon";break}for(var m=0;m<t.coordinates.length;m++){var g=t.coordinates[m],b={type:s,coordinates:g};if(e(oe(b,i),n,m)===!1)return!1}})}function $i(r,e,t){var n=t;return Se(r,function(i,o,a){o===0&&a===0&&t===void 0?n=i:n=e(n,i,o,a)}),n}function xr(r,e){Se(r,function(t,n,i){var o=0;if(t.geometry){var a=t.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var l,s=0,m=0,g=0;if(Ye(t,function(b,M,d,w,L){if(l===void 0||n>s||w>m||L>g){l=b,s=n,m=w,g=L,o=0;return}var E=ne([l,b],t.properties);if(e(E,n,i,L,o)===!1)return!1;o++,l=b})===!1)return!1}}})}function Mi(r,e,t){var n=t,i=!1;return xr(r,function(o,a,l,s,m){i===!1&&t===void 0?n=o:n=e(n,o,a,l,s,m),i=!0}),n}function Rr(r,e){if(!r)throw new Error("geojson is required");Se(r,function(t,n,i){if(t.geometry!==null){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(e(t,n,i,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<a.length;l++)if(e(ne(a[l],t.properties),n,i,l)===!1)return!1;break}}})}function Pi(r,e,t){var n=t;return Rr(r,function(i,o,a,l){o===0&&t===void 0?n=i:n=e(n,i,o,a,l)}),n}function Si(r,e){if(e=e||{},!wt(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.segmentIndex||0,a=e.properties,l;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,l=r.features[t].geometry;break;case"Feature":a=a||r.properties,l=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=r;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var s=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=s.length+o-1),ne([s[o],s[o+1]],a,e);case"Polygon":return i<0&&(i=s.length+i),o<0&&(o=s[i].length+o-1),ne([s[i][o],s[i][o+1]],a,e);case"MultiLineString":return n<0&&(n=s.length+n),o<0&&(o=s[n].length+o-1),ne([s[n][o],s[n][o+1]],a,e);case"MultiPolygon":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i),o<0&&(o=s[n][i].length-o-1),ne([s[n][i][o],s[n][i][o+1]],a,e)}throw new Error("geojson is invalid")}function Ei(r,e){if(e=e||{},!wt(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.coordIndex||0,a=e.properties,l;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,l=r.features[t].geometry;break;case"Feature":a=a||r.properties,l=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=r;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var s=l.coordinates;switch(l.type){case"Point":return re(s,a,e);case"MultiPoint":return n<0&&(n=s.length+n),re(s[n],a,e);case"LineString":return o<0&&(o=s.length+o),re(s[o],a,e);case"Polygon":return i<0&&(i=s.length+i),o<0&&(o=s[i].length+o),re(s[i][o],a,e);case"MultiLineString":return n<0&&(n=s.length+n),o<0&&(o=s[n].length+o),re(s[n][o],a,e);case"MultiPolygon":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i),o<0&&(o=s[n][i].length-o),re(s[n][i][o],a,e)}throw new Error("geojson is invalid")}const Li=Object.freeze(Object.defineProperty({__proto__:null,coordAll:_i,coordEach:Ye,coordReduce:di,featureEach:Ve,featureReduce:bi,findPoint:Ei,findSegment:Si,flattenEach:Se,flattenReduce:$i,geomEach:$t,geomReduce:wi,lineEach:Rr,lineReduce:Pi,propEach:Br,propReduce:yi,segmentEach:xr,segmentReduce:Mi},Symbol.toStringTag,{value:"Module"}));function ir(r){if(!r)throw new Error("geojson is required");var e=[];return Se(r,function(t){ki(t,e)}),be(e)}function ki(r,e){var t=[],n=r.geometry;if(n!==null){switch(n.type){case"Polygon":t=Pe(n);break;case"LineString":t=[Pe(n)]}t.forEach(function(i){var o=Ci(i,r.properties);o.forEach(function(a){a.id=e.length,e.push(a)})})}}function Ci(r,e){var t=[];return r.reduce(function(n,i){var o=ne([n,i],e);return o.bbox=Fi(n,i),t.push(o),i}),t}function Fi(r,e){var t=r[0],n=r[1],i=e[0],o=e[1],a=t<i?t:i,l=n<o?n:o,s=t>i?t:i,m=n>o?n:o;return[a,l,s,m]}var Mt={exports:{}},Or={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(vn,function(){function t(u,c,h,v,y){(function _($,P,F,p,R){for(;p>F;){if(p-F>600){var O=p-F+1,z=P-F+1,Q=Math.log(O),ae=.5*Math.exp(2*Q/3),se=.5*Math.sqrt(Q*ae*(O-ae)/O)*(z-O/2<0?-1:1),H=Math.max(F,Math.floor(P-z*ae/O+se)),Ee=Math.min(p,Math.floor(P+(O-z)*ae/O+se));_($,P,H,Ee,R)}var me=$[P],j=F,ee=p;for(n($,F,P),R($[p],me)>0&&n($,F,p);j<ee;){for(n($,j,ee),j++,ee--;R($[j],me)<0;)j++;for(;R($[ee],me)>0;)ee--}R($[F],me)===0?n($,F,ee):n($,++ee,p),ee<=P&&(F=ee+1),P<=ee&&(p=ee-1)}})(u,c,h||0,v||u.length-1,y||i)}function n(u,c,h){var v=u[c];u[c]=u[h],u[h]=v}function i(u,c){return u<c?-1:u>c?1:0}var o=function(u){u===void 0&&(u=9),this._maxEntries=Math.max(4,u),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(u,c,h){if(!h)return c.indexOf(u);for(var v=0;v<c.length;v++)if(h(u,c[v]))return v;return-1}function l(u,c){s(u,0,u.children.length,c,u)}function s(u,c,h,v,y){y||(y=E(null)),y.minX=1/0,y.minY=1/0,y.maxX=-1/0,y.maxY=-1/0;for(var _=c;_<h;_++){var $=u.children[_];m(y,u.leaf?v($):$)}return y}function m(u,c){return u.minX=Math.min(u.minX,c.minX),u.minY=Math.min(u.minY,c.minY),u.maxX=Math.max(u.maxX,c.maxX),u.maxY=Math.max(u.maxY,c.maxY),u}function g(u,c){return u.minX-c.minX}function b(u,c){return u.minY-c.minY}function M(u){return(u.maxX-u.minX)*(u.maxY-u.minY)}function d(u){return u.maxX-u.minX+(u.maxY-u.minY)}function w(u,c){return u.minX<=c.minX&&u.minY<=c.minY&&c.maxX<=u.maxX&&c.maxY<=u.maxY}function L(u,c){return c.minX<=u.maxX&&c.minY<=u.maxY&&c.maxX>=u.minX&&c.maxY>=u.minY}function E(u){return{children:u,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(u,c,h,v,y){for(var _=[c,h];_.length;)if(!((h=_.pop())-(c=_.pop())<=v)){var $=c+Math.ceil((h-c)/v/2)*v;t(u,$,c,h,y),_.push(c,$,$,h)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(u){var c=this.data,h=[];if(!L(u,c))return h;for(var v=this.toBBox,y=[];c;){for(var _=0;_<c.children.length;_++){var $=c.children[_],P=c.leaf?v($):$;L(u,P)&&(c.leaf?h.push($):w(u,P)?this._all($,h):y.push($))}c=y.pop()}return h},o.prototype.collides=function(u){var c=this.data;if(!L(u,c))return!1;for(var h=[];c;){for(var v=0;v<c.children.length;v++){var y=c.children[v],_=c.leaf?this.toBBox(y):y;if(L(u,_)){if(c.leaf||w(u,_))return!0;h.push(y)}}c=h.pop()}return!1},o.prototype.load=function(u){if(!u||!u.length)return this;if(u.length<this._minEntries){for(var c=0;c<u.length;c++)this.insert(u[c]);return this}var h=this._build(u.slice(),0,u.length-1,0);if(this.data.children.length)if(this.data.height===h.height)this._splitRoot(this.data,h);else{if(this.data.height<h.height){var v=this.data;this.data=h,h=v}this._insert(h,this.data.height-h.height-1,!0)}else this.data=h;return this},o.prototype.insert=function(u){return u&&this._insert(u,this.data.height-1),this},o.prototype.clear=function(){return this.data=E([]),this},o.prototype.remove=function(u,c){if(!u)return this;for(var h,v,y,_=this.data,$=this.toBBox(u),P=[],F=[];_||P.length;){if(_||(_=P.pop(),v=P[P.length-1],h=F.pop(),y=!0),_.leaf){var p=a(u,_.children,c);if(p!==-1)return _.children.splice(p,1),P.push(_),this._condense(P),this}y||_.leaf||!w(_,$)?v?(h++,_=v.children[h],y=!1):_=null:(P.push(_),F.push(h),h=0,v=_,_=_.children[0])}return this},o.prototype.toBBox=function(u){return u},o.prototype.compareMinX=function(u,c){return u.minX-c.minX},o.prototype.compareMinY=function(u,c){return u.minY-c.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(u){return this.data=u,this},o.prototype._all=function(u,c){for(var h=[];u;)u.leaf?c.push.apply(c,u.children):h.push.apply(h,u.children),u=h.pop();return c},o.prototype._build=function(u,c,h,v){var y,_=h-c+1,$=this._maxEntries;if(_<=$)return l(y=E(u.slice(c,h+1)),this.toBBox),y;v||(v=Math.ceil(Math.log(_)/Math.log($)),$=Math.ceil(_/Math.pow($,v-1))),(y=E([])).leaf=!1,y.height=v;var P=Math.ceil(_/$),F=P*Math.ceil(Math.sqrt($));x(u,c,h,F,this.compareMinX);for(var p=c;p<=h;p+=F){var R=Math.min(p+F-1,h);x(u,p,R,P,this.compareMinY);for(var O=p;O<=R;O+=P){var z=Math.min(O+P-1,R);y.children.push(this._build(u,O,z,v-1))}}return l(y,this.toBBox),y},o.prototype._chooseSubtree=function(u,c,h,v){for(;v.push(c),!c.leaf&&v.length-1!==h;){for(var y=1/0,_=1/0,$=void 0,P=0;P<c.children.length;P++){var F=c.children[P],p=M(F),R=(O=u,z=F,(Math.max(z.maxX,O.maxX)-Math.min(z.minX,O.minX))*(Math.max(z.maxY,O.maxY)-Math.min(z.minY,O.minY))-p);R<_?(_=R,y=p<y?p:y,$=F):R===_&&p<y&&(y=p,$=F)}c=$||c.children[0]}var O,z;return c},o.prototype._insert=function(u,c,h){var v=h?u:this.toBBox(u),y=[],_=this._chooseSubtree(v,this.data,c,y);for(_.children.push(u),m(_,v);c>=0&&y[c].children.length>this._maxEntries;)this._split(y,c),c--;this._adjustParentBBoxes(v,y,c)},o.prototype._split=function(u,c){var h=u[c],v=h.children.length,y=this._minEntries;this._chooseSplitAxis(h,y,v);var _=this._chooseSplitIndex(h,y,v),$=E(h.children.splice(_,h.children.length-_));$.height=h.height,$.leaf=h.leaf,l(h,this.toBBox),l($,this.toBBox),c?u[c-1].children.push($):this._splitRoot(h,$)},o.prototype._splitRoot=function(u,c){this.data=E([u,c]),this.data.height=u.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(u,c,h){for(var v,y,_,$,P,F,p,R=1/0,O=1/0,z=c;z<=h-c;z++){var Q=s(u,0,z,this.toBBox),ae=s(u,z,h,this.toBBox),se=(y=Q,_=ae,$=void 0,P=void 0,F=void 0,p=void 0,$=Math.max(y.minX,_.minX),P=Math.max(y.minY,_.minY),F=Math.min(y.maxX,_.maxX),p=Math.min(y.maxY,_.maxY),Math.max(0,F-$)*Math.max(0,p-P)),H=M(Q)+M(ae);se<R?(R=se,v=z,O=H<O?H:O):se===R&&H<O&&(O=H,v=z)}return v||h-c},o.prototype._chooseSplitAxis=function(u,c,h){var v=u.leaf?this.compareMinX:g,y=u.leaf?this.compareMinY:b;this._allDistMargin(u,c,h,v)<this._allDistMargin(u,c,h,y)&&u.children.sort(v)},o.prototype._allDistMargin=function(u,c,h,v){u.children.sort(v);for(var y=this.toBBox,_=s(u,0,c,y),$=s(u,h-c,h,y),P=d(_)+d($),F=c;F<h-c;F++){var p=u.children[F];m(_,u.leaf?y(p):p),P+=d(_)}for(var R=h-c-1;R>=c;R--){var O=u.children[R];m($,u.leaf?y(O):O),P+=d($)}return P},o.prototype._adjustParentBBoxes=function(u,c,h){for(var v=h;v>=0;v--)m(c[v],u)},o.prototype._condense=function(u){for(var c=u.length-1,h=void 0;c>=0;c--)u[c].children.length===0?c>0?(h=u[c-1].children).splice(h.indexOf(u[c]),1):this.clear():l(u[c],this.toBBox)},o})})(Or);var Ai=Or.exports;const Bi=ht(vi),xi=ht(Li),Ri=ht(gn);var fe=Ai,qr=Bi,Xr=xi,we=Ri.default,Oi=Xr.featureEach;Xr.coordEach;qr.polygon;var or=qr.featureCollection;function Yr(r){var e=new fe(r);return e.insert=function(t){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:we(t),fe.prototype.insert.call(this,t)},e.load=function(t){var n=[];return Array.isArray(t)?t.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:we(i),n.push(i)}):Oi(t,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:we(i),n.push(i)}),fe.prototype.load.call(this,n)},e.remove=function(t,n){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:we(t),fe.prototype.remove.call(this,t,n)},e.clear=function(){return fe.prototype.clear.call(this)},e.search=function(t){var n=fe.prototype.search.call(this,this.toBBox(t));return or(n)},e.collides=function(t){return fe.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=fe.prototype.all.call(this);return or(t)},e.toJSON=function(){return fe.prototype.toJSON.call(this)},e.fromJSON=function(t){return fe.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var n;if(t.bbox)n=t.bbox;else if(Array.isArray(t)&&t.length===4)n=t;else if(Array.isArray(t)&&t.length===6)n=[t[0],t[1],t[3],t[4]];else if(t.type==="Feature")n=we(t);else if(t.type==="FeatureCollection")n=we(t);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},e}Mt.exports=Yr;Mt.exports.default=Yr;var qi=Mt.exports;const Xi=dn(qi);function Yi(r,e){var t={},n=[];if(r.type==="LineString"&&(r=oe(r)),e.type==="LineString"&&(e=oe(e)),r.type==="Feature"&&e.type==="Feature"&&r.geometry!==null&&e.geometry!==null&&r.geometry.type==="LineString"&&e.geometry.type==="LineString"&&r.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var i=ar(r,e);return i&&n.push(i),be(n)}var o=Xi();return o.load(ir(e)),Ve(ir(r),function(a){Ve(o.search(a),function(l){var s=ar(a,l);if(s){var m=Pe(s).join(",");t[m]||(t[m]=!0,n.push(s))}})}),be(n)}function ar(r,e){var t=Pe(r),n=Pe(e);if(t.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=t[0][0],o=t[0][1],a=t[1][0],l=t[1][1],s=n[0][0],m=n[0][1],g=n[1][0],b=n[1][1],M=(b-m)*(a-i)-(g-s)*(l-o),d=(g-s)*(o-m)-(b-m)*(i-s),w=(a-i)*(o-m)-(l-o)*(i-s);if(M===0)return null;var L=d/M,E=w/M;if(L>=0&&L<=1&&E>=0&&E<=1){var x=i+L*(a-i),u=o+L*(l-o);return re([x,u])}return null}function Di(r,e,t){t===void 0&&(t={});var n=re([1/0,1/0],{dist:1/0}),i=0;return Se(r,function(o){for(var a=Pe(o),l=0;l<a.length-1;l++){var s=re(a[l]);s.properties.dist=Fe(e,s,t);var m=re(a[l+1]);m.properties.dist=Fe(e,m,t);var g=Fe(s,m,t),b=Math.max(s.properties.dist,m.properties.dist),M=Ar(s,m),d=nr(e,b,M+90,t),w=nr(e,b,M-90,t),L=Yi(ne([d.geometry.coordinates,w.geometry.coordinates]),ne([s.geometry.coordinates,m.geometry.coordinates])),E=null;L.features.length>0&&(E=L.features[0],E.properties.dist=Fe(e,E,t),E.properties.location=i+Fe(s,E,t)),s.properties.dist<n.properties.dist&&(n=s,n.properties.index=l,n.properties.location=i),m.properties.dist<n.properties.dist&&(n=m,n.properties.index=l+1,n.properties.location=i+g),E&&E.properties.dist<n.properties.dist&&(n=E,n.properties.index=l),i+=g}}),n}const Ni=["==",["geometry-type"],"Polygon"],Gi=["==",["geometry-type"],"LineString"],Ti=["==",["geometry-type"],"Point"];function at(r){return{type:"Feature",properties:{},geometry:{type:"Point",coordinates:Dr(r)}}}function Dr(r){return[Math.round(r[0]*1e7)/1e7,Math.round(r[1]*1e7)/1e7]}const Nr=hr({type:"FeatureCollection",features:[]}),Gr=hr(0),zi=100;class Ji{constructor(e){J(this,"map");J(this,"active");J(this,"eventListenersSuccess");J(this,"eventListenersUpdated");J(this,"eventListenersFailure");J(this,"points");J(this,"cursor");J(this,"hover");J(this,"dragFrom");J(this,"previousStates");J(this,"onMouseMove",e=>{if(this.active&&!this.dragFrom)this.recalculateHovering(e);else if(this.active&&this.dragFrom){if(this.hover=="polygon"){let t=this.dragFrom[0]-e.lngLat.lng,n=this.dragFrom[1]-e.lngLat.lat;for(let i of this.points)i[0]-=t,i[1]-=n}else this.points[this.hover]=e.lngLat.toArray();this.dragFrom=e.lngLat.toArray(),this.redraw()}});J(this,"onClick",e=>{if(this.beforeUpdate(),this.active&&this.cursor){let t=[];if(sr(this.points).forEach((n,i)=>{t.push([i+1,Di(n,this.cursor).properties.dist])}),t.sort((n,i)=>n[1]-i[1]),t.length>0){let n=t[0][0];this.points.splice(n,0,this.cursor.geometry.coordinates),this.hover=n}else this.points.push(this.cursor.geometry.coordinates),this.hover=this.points.length-1;this.redraw(),this.pointsUpdated()}else this.active&&typeof this.hover=="number"&&(this.points.splice(this.hover,1),this.hover=null,this.redraw(),this.pointsUpdated(),this.recalculateHovering(e))});J(this,"onDoubleClick",e=>{this.active&&(e.preventDefault(),this.cursor=at(e.lngLat.toArray()),this.onClick(e),this.finish())});J(this,"onMouseDown",e=>{this.active&&!this.dragFrom&&this.hover!=null&&(e.preventDefault(),this.cursor=null,this.dragFrom=e.lngLat.toArray(),this.beforeUpdate(),this.redraw())});J(this,"onMouseUp",()=>{this.active&&this.dragFrom&&(this.dragFrom=null,this.redraw(),this.pointsUpdated())});J(this,"onKeypress",e=>{this.active&&(e.key=="Enter"?(e.stopPropagation(),this.finish()):e.key=="z"&&e.ctrlKey&&this.undo())});J(this,"onKeyDown",e=>{this.active&&e.key=="Escape"&&(e.stopPropagation(),this.cancel())});this.map=e,this.active=!1,this.eventListenersSuccess=[],this.eventListenersUpdated=[],this.eventListenersFailure=[],this.points=[],this.cursor=null,this.hover=null,this.dragFrom=null,this.previousStates=[],this.map.on("mousemove",this.onMouseMove),this.map.on("click",this.onClick),this.map.on("dblclick",this.onDoubleClick),this.map.on("mousedown",this.onMouseDown),this.map.on("mouseup",this.onMouseUp),document.addEventListener("keypress",this.onKeypress),document.addEventListener("keydown",this.onKeyDown)}tearDown(){this.map.off("mousemove",this.onMouseMove),this.map.off("click",this.onClick),this.map.off("dblclick",this.onDoubleClick),this.map.off("mousedown",this.onMouseDown),this.map.off("mouseup",this.onMouseUp),document.removeEventListener("keypress",this.onKeypress),document.removeEventListener("keydown",this.onKeyDown)}finish(){let e=this.polygonFeature();if(e)for(let t of this.eventListenersSuccess)t(e);else for(let t of this.eventListenersFailure)t();this.stop()}cancel(){for(let e of this.eventListenersFailure)e();this.stop()}addEventListenerSuccess(e){this.eventListenersSuccess.push(e)}addEventListenerUpdated(e){this.eventListenersUpdated.push(e)}addEventListenerFailure(e){this.eventListenersFailure.push(e)}clearEventListeners(){this.eventListenersSuccess=[],this.eventListenersUpdated=[],this.eventListenersFailure=[]}startNew(){this.active=!0,this.map.doubleClickZoom.disable()}editExisting(e){this.active=!0,this.map.doubleClickZoom.disable(),this.points=JSON.parse(JSON.stringify(e.geometry.coordinates[0])),this.points.pop(),this.redraw()}stop(){this.map.doubleClickZoom.enable(),this.points=[],this.cursor=null,this.active=!1,this.hover=null,this.dragFrom=null,this.previousStates=[],this.redraw(),this.map.getCanvas().style.cursor="inherit"}undo(){this.dragFrom!=null||this.previousStates.length==0||(this.points=this.previousStates.pop(),this.hover=null,this.redraw())}redraw(){let e={type:"FeatureCollection",features:[]};this.points.forEach((i,o)=>{let a=at(i);a.properties.hover=this.hover==o,a.properties.idx=o,e.features.push(a)}),e.features=e.features.concat(sr(this.points));let t=this.polygonFeature();t&&(t.properties.hover=this.hover=="polygon",e.features.push(t)),Nr.set(e);let n="crosshair";this.hover!=null&&(n=this.dragFrom?"grabbing":"pointer"),this.map.getCanvas().style.cursor=n,Gr.set(this.previousStates.length)}pointsUpdated(){let e=this.polygonFeature();if(e)for(let t of this.eventListenersUpdated)t(e)}recalculateHovering(e){this.cursor=null,this.hover=null;for(let t of this.map.queryRenderedFeatures(e.point,{layers:["edit-polygon-fill","edit-polygon-vertices"]}))if(t.geometry.type=="Polygon"){this.hover="polygon";break}else if(t.geometry.type=="Point"&&Object.hasOwn(t.properties,"idx")){this.hover=t.properties.idx;break}this.hover==null&&(this.cursor=at(e.lngLat.toArray())),this.redraw()}polygonFeature(){if(this.points.length<3)return null;let e=this.points.map(Dr),t=[JSON.parse(JSON.stringify(e))];return t[0].push(JSON.parse(JSON.stringify(t[0][0]))),{type:"Feature",geometry:{type:"Polygon",coordinates:t},properties:{}}}beforeUpdate(){this.previousStates.push(JSON.parse(JSON.stringify(this.points))),this.previousStates.length>zi&&this.previousStates.shift()}}function sr(r){let e=[];for(let t=0;t<r.length-1;t++)e.push({type:"Feature",geometry:{type:"LineString",coordinates:[r[t],r[t+1]]},properties:{}});return r.length>=3&&e.push({type:"Feature",geometry:{type:"LineString",coordinates:[r[r.length-1],r[0]]},properties:{}}),e}function Ui(r){let e,t,n,i,o,a;return e=new pr({props:{id:"edit-polygon-fill",filter:Ni,paint:{"fill-color":"red","fill-opacity":["case",["boolean",["get","hover"],"false"],1,.5]}}}),n=new _n({props:{id:"edit-polygon-lines",filter:Gi,paint:{"line-color":"black","line-width":8,"line-opacity":.5}}}),o=new bn({props:{id:"edit-polygon-vertices",filter:Ti,paint:{"circle-color":"black","circle-opacity":["case",["has","hovered"],1,.5],"circle-radius":10}}}),{c(){q(e.$$.fragment),t=G(),q(n.$$.fragment),i=G(),q(o.$$.fragment)},l(l){X(e.$$.fragment,l),t=T(l),X(n.$$.fragment,l),i=T(l),X(o.$$.fragment,l)},m(l,s){Y(e,l,s),C(l,t,s),Y(n,l,s),C(l,i,s),Y(o,l,s),a=!0},p:Be,i(l){a||(A(e.$$.fragment,l),A(n.$$.fragment,l),A(o.$$.fragment,l),a=!0)},o(l){B(e.$$.fragment,l),B(n.$$.fragment,l),B(o.$$.fragment,l),a=!1},d(l){l&&(k(t),k(i)),D(e,l),D(n,l),D(o,l)}}}function Ki(r){let e,t;return e=new mr({props:{data:r[0],$$slots:{default:[Ui]},$$scope:{ctx:r}}}),{c(){q(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,[i]){const o={};i&1&&(o.data=n[0]),i&2&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Hi(r,e,t){let n;return Ue(r,Nr,i=>t(0,n=i)),[n]}class Ii extends We{constructor(e){super(),Qe(this,e,Hi,Ki,Ze,{})}}function Vi(r){let e,t="Map loading...";return{c(){e=$e("p"),e.textContent=t},l(n){e=Me(n,"P",{"data-svelte-h":!0}),st(e)!=="svelte-1r8199k"&&(e.textContent=t)},m(n,i){C(n,e,i)},p:Be,i:Be,o:Be,d(n){n&&k(e)}}}function Zi(r){let e,t,n,i;e=new fn({props:{$$slots:{default:[Qi]},$$scope:{ctx:r}}}),e.$on("click",r[5]);let o=r[1].summary.polygon&&lr(r);return{c(){q(e.$$.fragment),t=G(),o&&o.c(),n=Ke()},l(a){X(e.$$.fragment,a),t=T(a),o&&o.l(a),n=Ke()},m(a,l){Y(e,a,l),C(a,t,l),o&&o.m(a,l),C(a,n,l),i=!0},p(a,l){const s={};l&2048&&(s.$$scope={dirty:l,ctx:a}),e.$set(s),a[1].summary.polygon?o?(o.p(a,l),l&2&&A(o,1)):(o=lr(a),o.c(),A(o,1),o.m(n.parentNode,n)):o&&(fr(),B(o,1,1,()=>{o=null}),cr())},i(a){i||(A(e.$$.fragment,a),A(o),i=!0)},o(a){B(e.$$.fragment,a),B(o),i=!1},d(a){a&&(k(t),k(n)),D(e,a),o&&o.d(a)}}}function Wi(r){let e,t,n,i,o,a,l;return t=new it({props:{$$slots:{default:[eo]},$$scope:{ctx:r}}}),t.$on("click",r[7]),i=new it({props:{$$slots:{default:[to]},$$scope:{ctx:r}}}),i.$on("click",r[8]),a=new it({props:{disabled:r[4]==0,$$slots:{default:[io]},$$scope:{ctx:r}}}),a.$on("click",r[9]),{c(){e=$e("div"),q(t.$$.fragment),n=G(),q(i.$$.fragment),o=G(),q(a.$$.fragment),this.h()},l(s){e=Me(s,"DIV",{style:!0});var m=mt(e);X(t.$$.fragment,m),n=T(m),X(i.$$.fragment,m),o=T(m),X(a.$$.fragment,m),m.forEach(k),this.h()},h(){xe(e,"display","flex"),xe(e,"justify-content","space-between")},m(s,m){C(s,e,m),Y(t,e,null),Re(e,n),Y(i,e,null),Re(e,o),Y(a,e,null),l=!0},p(s,m){const g={};m&2048&&(g.$$scope={dirty:m,ctx:s}),t.$set(g);const b={};m&2048&&(b.$$scope={dirty:m,ctx:s}),i.$set(b);const M={};m&16&&(M.disabled=s[4]==0),m&2064&&(M.$$scope={dirty:m,ctx:s}),a.$set(M)},i(s){l||(A(t.$$.fragment,s),A(i.$$.fragment,s),A(a.$$.fragment,s),l=!0)},o(s){B(t.$$.fragment,s),B(i.$$.fragment,s),B(a.$$.fragment,s),l=!1},d(s){s&&k(e),D(t),D(i),D(a)}}}function Qi(r){let e;return{c(){e=le("Edit polygon")},l(t){e=ue(t,"Edit polygon")},m(t,n){C(t,e,n)},d(t){t&&k(e)}}}function lr(r){let e,t,n,i,o=rr(r[1].summary.polygon).toFixed(1)+"",a,l,s;return e=new cn({props:{$$slots:{default:[ji]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){q(e.$$.fragment),t=G(),n=$e("p"),i=le("Polygon area: "),a=le(o),l=le(" square meters")},l(m){X(e.$$.fragment,m),t=T(m),n=Me(m,"P",{});var g=mt(n);i=ue(g,"Polygon area: "),a=ue(g,o),l=ue(g," square meters"),g.forEach(k)},m(m,g){Y(e,m,g),C(m,t,g),C(m,n,g),Re(n,i),Re(n,a),Re(n,l),s=!0},p(m,g){const b={};g&2048&&(b.$$scope={dirty:g,ctx:m}),e.$set(b),(!s||g&2)&&o!==(o=rr(m[1].summary.polygon).toFixed(1)+"")&&ur(a,o)},i(m){s||(A(e.$$.fragment,m),s=!0)},o(m){B(e.$$.fragment,m),s=!1},d(m){m&&(k(t),k(n)),D(e,m)}}}function ji(r){let e;return{c(){e=le("Delete and start over")},l(t){e=ue(t,"Delete and start over")},m(t,n){C(t,e,n)},d(t){t&&k(e)}}}function eo(r){let e;return{c(){e=le("Finish")},l(t){e=ue(t,"Finish")},m(t,n){C(t,e,n)},d(t){t&&k(e)}}}function to(r){let e;return{c(){e=le("Cancel")},l(t){e=ue(t,"Cancel")},m(t,n){C(t,e,n)},d(t){t&&k(e)}}}function ro(r){let e,t,n;return{c(){e=le("Undo ("),t=le(r[4]),n=le(")")},l(i){e=ue(i,"Undo ("),t=ue(i,r[4]),n=ue(i,")")},m(i,o){C(i,e,o),C(i,t,o),C(i,n,o)},p(i,o){o&16&&ur(t,i[4])},d(i){i&&(k(e),k(t),k(n))}}}function no(r){let e;return{c(){e=le("Undo")},l(t){e=ue(t,"Undo")},m(t,n){C(t,e,n)},p:Be,d(t){t&&k(e)}}}function io(r){let e;function t(o,a){return o[4]==0?no:ro}let n=t(r),i=n(r);return{c(){i.c(),e=Ke()},l(o){i.l(o),e=Ke()},m(o,a){i.m(o,a),C(o,e,a)},p(o,a){n===(n=t(o))&&i?i.p(o,a):(i.d(1),i=n(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&k(e),i.d(o)}}}function oo(r){let e,t;return e=new pr({props:{layout:{visibility:r[2]?"none":"visible"},paint:{"fill-color":"red","fill-opacity":.8}}}),{c(){q(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,i){const o={};i&4&&(o.layout={visibility:n[2]?"none":"visible"}),e.$set(o)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ao(r){let e,t,n,i;return e=new Ii({}),n=new mr({props:{data:r[3],$$slots:{default:[oo]},$$scope:{ctx:r}}}),{c(){q(e.$$.fragment),t=G(),q(n.$$.fragment)},l(o){X(e.$$.fragment,o),t=T(o),X(n.$$.fragment,o)},m(o,a){Y(e,o,a),C(o,t,a),Y(n,o,a),i=!0},p(o,a){const l={};a&8&&(l.data=o[3]),a&2052&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){i||(A(e.$$.fragment,o),A(n.$$.fragment,o),i=!0)},o(o){B(e.$$.fragment,o),B(n.$$.fragment,o),i=!1},d(o){o&&k(t),D(e,o),D(n,o)}}}function so(r){let e,t,n,i,o,a,l;const s=[Wi,Zi,Vi],m=[];function g(d,w){return d[2]?0:d[0]?1:2}e=g(r),t=m[e]=s[e](r);function b(d){r[10](d)}let M={$$slots:{default:[ao]},$$scope:{ctx:r}};return r[0]!==void 0&&(M.map=r[0]),o=new yn({props:M}),I.push(()=>Z(o,"map",b)),{c(){t.c(),n=G(),i=$e("div"),q(o.$$.fragment),this.h()},l(d){t.l(d),n=T(d),i=Me(d,"DIV",{style:!0});var w=mt(i);X(o.$$.fragment,w),w.forEach(k),this.h()},h(){xe(i,"position","relative"),xe(i,"width","100%"),xe(i,"height","300px")},m(d,w){m[e].m(d,w),C(d,n,w),C(d,i,w),Y(o,i,null),l=!0},p(d,[w]){let L=e;e=g(d),e===L?m[e].p(d,w):(fr(),B(m[L],1,1,()=>{m[L]=null}),cr(),t=m[e],t?t.p(d,w):(t=m[e]=s[e](d),t.c()),A(t,1),t.m(n.parentNode,n));const E={};w&2060&&(E.$$scope={dirty:w,ctx:d}),!a&&w&1&&(a=!0,E.map=d[0],V(()=>a=!1)),o.$set(E)},i(d){l||(A(t),A(o.$$.fragment,d),l=!0)},o(d){B(t),B(o.$$.fragment,d),l=!1},d(d){d&&(k(n),k(i)),m[e].d(d),D(o)}}}function lo(r,e,t){let n,i,o;Ue(r,U,w=>t(1,i=w)),Ue(r,Gr,w=>t(4,o=w));let a=null,l=null;un(()=>{l==null||l.tearDown()});function s(){a&&(t(2,l=new Ji(a)),i.summary.polygon?l.editExisting(i.summary.polygon):l.startNew(),l.addEventListenerSuccess(async w=>{t(2,l=null),er(U,i.summary.polygon=w,i)}),l.addEventListenerFailure(()=>{t(2,l=null)}))}function m(){er(U,i.summary.polygon=null,i),s()}const g=()=>l==null?void 0:l.finish(),b=()=>l==null?void 0:l.cancel(),M=()=>l==null?void 0:l.undo();function d(w){a=w,t(0,a)}return r.$$.update=()=>{r.$$.dirty&2&&t(3,n=i.summary.polygon??{type:"FeatureCollection",features:[]}),r.$$.dirty&1&&a&&s()},[a,i,l,n,o,s,m,g,b,M,d]}class uo extends We{constructor(e){super(),Qe(this,e,lo,so,Ze,{})}}function fo(r){let e,t,n,i,o,a,l,s,m,g,b,M,d,w,L,E,x,u,c,h,v,y,_,$,P,F,p,R,O,z,Q,ae,se,H,Ee,me,j,ee,De,he,nt,Ne,ge,Pt="Network context",Ge,de,St=`Please add a drawing of the area being assessed below, including the location
  of measures proposed by the scheme.`,Te,ye,ze;function Tr(f){r[1](f)}let Et={label:"Date of design review"};r[0].summary.dateDesignReview!==void 0&&(Et.value=r[0].summary.dateDesignReview),e=new Ce({props:Et}),I.push(()=>Z(e,"value",Tr));function zr(f){r[2](f)}let Lt={label:"Scheme reference"};r[0].summary.schemeReference!==void 0&&(Lt.value=r[0].summary.schemeReference),i=new Ce({props:Lt}),I.push(()=>Z(i,"value",zr));function Jr(f){r[3](f)}let kt={label:"Scheme name"};r[0].summary.schemeName!==void 0&&(kt.value=r[0].summary.schemeName),l=new Ce({props:kt}),I.push(()=>Z(l,"value",Jr));function Ur(f){r[4](f)}let Ct={label:"Scheme summary"};r[0].summary.schemeSummary!==void 0&&(Ct.value=r[0].summary.schemeSummary),g=new Je({props:Ct}),I.push(()=>Z(g,"value",Ur));function Kr(f){r[5](f)}let Ft={label:"Scheme information reviewed"};r[0].summary.schemeInfoReviewed!==void 0&&(Ft.value=r[0].summary.schemeInfoReviewed),d=new Je({props:Ft}),I.push(()=>Z(d,"value",Kr));function Hr(f){r[6](f)}let At={label:"Authority",emptyOption:!0,choices:Le(wn)};r[0].summary.authority!==void 0&&(At.value=r[0].summary.authority),E=new ke({props:At}),I.push(()=>Z(E,"value",Hr));function Ir(f){r[7](f)}let Bt={label:"Transport / Combined Authority",emptyOption:!0,choices:Le($n)};r[0].summary.transportOrCombinedAuthority!==void 0&&(Bt.value=r[0].summary.transportOrCombinedAuthority),c=new ke({props:Bt}),I.push(()=>Z(c,"value",Ir));function Vr(f){r[8](f)}let xt={label:"Region",emptyOption:!0,choices:Le(Mn)};r[0].summary.region!==void 0&&(xt.value=r[0].summary.region),y=new ke({props:xt}),I.push(()=>Z(y,"value",Vr));function Zr(f){r[9](f)}let Rt={label:"Funding programme",emptyOption:!0,choices:Le(Pn)};r[0].summary.fundingProgramme!==void 0&&(Rt.value=r[0].summary.fundingProgramme),P=new ke({props:Rt}),I.push(()=>Z(P,"value",Zr));function Wr(f){r[10](f)}let Ot={label:"Design stage",emptyOption:!0,choices:Le(Sn)};r[0].summary.designStage!==void 0&&(Ot.value=r[0].summary.designStage),R=new ke({props:Ot}),I.push(()=>Z(R,"value",Wr));function Qr(f){r[11](f)}let qt={label:"Funding conditions"};r[0].summary.fundingConditions!==void 0&&(qt.value=r[0].summary.fundingConditions),Q=new Je({props:qt}),I.push(()=>Z(Q,"value",Qr));function jr(f){r[12](f)}let Xt={label:"Inspector email address"};r[0].summary.inspectorEmail!==void 0&&(Xt.value=r[0].summary.inspectorEmail),H=new Ce({props:Xt}),I.push(()=>Z(H,"value",jr));function en(f){r[13](f)}let Yt={label:"Scheme area size (km²)"};r[0].summary.schemeAreaSizeKm2!==void 0&&(Yt.value=r[0].summary.schemeAreaSizeKm2),j=new Ce({props:Yt}),I.push(()=>Z(j,"value",en));function tn(f){r[14](f)}let Dt={label:"Notes"};return r[0].summary.notes!==void 0&&(Dt.value=r[0].summary.notes),he=new Je({props:Dt}),I.push(()=>Z(he,"value",tn)),ye=new uo({}),{c(){q(e.$$.fragment),n=G(),q(i.$$.fragment),a=G(),q(l.$$.fragment),m=G(),q(g.$$.fragment),M=G(),q(d.$$.fragment),L=G(),q(E.$$.fragment),u=G(),q(c.$$.fragment),v=G(),q(y.$$.fragment),$=G(),q(P.$$.fragment),p=G(),q(R.$$.fragment),z=G(),q(Q.$$.fragment),se=G(),q(H.$$.fragment),me=G(),q(j.$$.fragment),De=G(),q(he.$$.fragment),Ne=G(),ge=$e("h2"),ge.textContent=Pt,Ge=G(),de=$e("p"),de.textContent=St,Te=G(),q(ye.$$.fragment)},l(f){X(e.$$.fragment,f),n=T(f),X(i.$$.fragment,f),a=T(f),X(l.$$.fragment,f),m=T(f),X(g.$$.fragment,f),M=T(f),X(d.$$.fragment,f),L=T(f),X(E.$$.fragment,f),u=T(f),X(c.$$.fragment,f),v=T(f),X(y.$$.fragment,f),$=T(f),X(P.$$.fragment,f),p=T(f),X(R.$$.fragment,f),z=T(f),X(Q.$$.fragment,f),se=T(f),X(H.$$.fragment,f),me=T(f),X(j.$$.fragment,f),De=T(f),X(he.$$.fragment,f),Ne=T(f),ge=Me(f,"H2",{"data-svelte-h":!0}),st(ge)!=="svelte-1tcb68x"&&(ge.textContent=Pt),Ge=T(f),de=Me(f,"P",{"data-svelte-h":!0}),st(de)!=="svelte-1unchfe"&&(de.textContent=St),Te=T(f),X(ye.$$.fragment,f)},m(f,S){Y(e,f,S),C(f,n,S),Y(i,f,S),C(f,a,S),Y(l,f,S),C(f,m,S),Y(g,f,S),C(f,M,S),Y(d,f,S),C(f,L,S),Y(E,f,S),C(f,u,S),Y(c,f,S),C(f,v,S),Y(y,f,S),C(f,$,S),Y(P,f,S),C(f,p,S),Y(R,f,S),C(f,z,S),Y(Q,f,S),C(f,se,S),Y(H,f,S),C(f,me,S),Y(j,f,S),C(f,De,S),Y(he,f,S),C(f,Ne,S),C(f,ge,S),C(f,Ge,S),C(f,de,S),C(f,Te,S),Y(ye,f,S),ze=!0},p(f,[S]){const Nt={};!t&&S&1&&(t=!0,Nt.value=f[0].summary.dateDesignReview,V(()=>t=!1)),e.$set(Nt);const Gt={};!o&&S&1&&(o=!0,Gt.value=f[0].summary.schemeReference,V(()=>o=!1)),i.$set(Gt);const Tt={};!s&&S&1&&(s=!0,Tt.value=f[0].summary.schemeName,V(()=>s=!1)),l.$set(Tt);const zt={};!b&&S&1&&(b=!0,zt.value=f[0].summary.schemeSummary,V(()=>b=!1)),g.$set(zt);const Jt={};!w&&S&1&&(w=!0,Jt.value=f[0].summary.schemeInfoReviewed,V(()=>w=!1)),d.$set(Jt);const Ut={};!x&&S&1&&(x=!0,Ut.value=f[0].summary.authority,V(()=>x=!1)),E.$set(Ut);const Kt={};!h&&S&1&&(h=!0,Kt.value=f[0].summary.transportOrCombinedAuthority,V(()=>h=!1)),c.$set(Kt);const Ht={};!_&&S&1&&(_=!0,Ht.value=f[0].summary.region,V(()=>_=!1)),y.$set(Ht);const It={};!F&&S&1&&(F=!0,It.value=f[0].summary.fundingProgramme,V(()=>F=!1)),P.$set(It);const Vt={};!O&&S&1&&(O=!0,Vt.value=f[0].summary.designStage,V(()=>O=!1)),R.$set(Vt);const Zt={};!ae&&S&1&&(ae=!0,Zt.value=f[0].summary.fundingConditions,V(()=>ae=!1)),Q.$set(Zt);const Wt={};!Ee&&S&1&&(Ee=!0,Wt.value=f[0].summary.inspectorEmail,V(()=>Ee=!1)),H.$set(Wt);const Qt={};!ee&&S&1&&(ee=!0,Qt.value=f[0].summary.schemeAreaSizeKm2,V(()=>ee=!1)),j.$set(Qt);const jt={};!nt&&S&1&&(nt=!0,jt.value=f[0].summary.notes,V(()=>nt=!1)),he.$set(jt)},i(f){ze||(A(e.$$.fragment,f),A(i.$$.fragment,f),A(l.$$.fragment,f),A(g.$$.fragment,f),A(d.$$.fragment,f),A(E.$$.fragment,f),A(c.$$.fragment,f),A(y.$$.fragment,f),A(P.$$.fragment,f),A(R.$$.fragment,f),A(Q.$$.fragment,f),A(H.$$.fragment,f),A(j.$$.fragment,f),A(he.$$.fragment,f),A(ye.$$.fragment,f),ze=!0)},o(f){B(e.$$.fragment,f),B(i.$$.fragment,f),B(l.$$.fragment,f),B(g.$$.fragment,f),B(d.$$.fragment,f),B(E.$$.fragment,f),B(c.$$.fragment,f),B(y.$$.fragment,f),B(P.$$.fragment,f),B(R.$$.fragment,f),B(Q.$$.fragment,f),B(H.$$.fragment,f),B(j.$$.fragment,f),B(he.$$.fragment,f),B(ye.$$.fragment,f),ze=!1},d(f){f&&(k(n),k(a),k(m),k(M),k(L),k(u),k(v),k($),k(p),k(z),k(se),k(me),k(De),k(Ne),k(ge),k(Ge),k(de),k(Te)),D(e,f),D(i,f),D(l,f),D(g,f),D(d,f),D(E,f),D(c,f),D(y,f),D(P,f),D(R,f),D(Q,f),D(H,f),D(j,f),D(he,f),D(ye,f)}}}function co(r,e,t){let n;Ue(r,U,u=>t(0,n=u));function i(u){r.$$.not_equal(n.summary.dateDesignReview,u)&&(n.summary.dateDesignReview=u,U.set(n))}function o(u){r.$$.not_equal(n.summary.schemeReference,u)&&(n.summary.schemeReference=u,U.set(n))}function a(u){r.$$.not_equal(n.summary.schemeName,u)&&(n.summary.schemeName=u,U.set(n))}function l(u){r.$$.not_equal(n.summary.schemeSummary,u)&&(n.summary.schemeSummary=u,U.set(n))}function s(u){r.$$.not_equal(n.summary.schemeInfoReviewed,u)&&(n.summary.schemeInfoReviewed=u,U.set(n))}function m(u){r.$$.not_equal(n.summary.authority,u)&&(n.summary.authority=u,U.set(n))}function g(u){r.$$.not_equal(n.summary.transportOrCombinedAuthority,u)&&(n.summary.transportOrCombinedAuthority=u,U.set(n))}function b(u){r.$$.not_equal(n.summary.region,u)&&(n.summary.region=u,U.set(n))}function M(u){r.$$.not_equal(n.summary.fundingProgramme,u)&&(n.summary.fundingProgramme=u,U.set(n))}function d(u){r.$$.not_equal(n.summary.designStage,u)&&(n.summary.designStage=u,U.set(n))}function w(u){r.$$.not_equal(n.summary.fundingConditions,u)&&(n.summary.fundingConditions=u,U.set(n))}function L(u){r.$$.not_equal(n.summary.inspectorEmail,u)&&(n.summary.inspectorEmail=u,U.set(n))}function E(u){r.$$.not_equal(n.summary.schemeAreaSizeKm2,u)&&(n.summary.schemeAreaSizeKm2=u,U.set(n))}function x(u){r.$$.not_equal(n.summary.notes,u)&&(n.summary.notes=u,U.set(n))}return[n,i,o,a,l,s,m,g,b,M,d,w,L,E,x]}class Co extends We{constructor(e){super(),Qe(this,e,co,fo,Ze,{})}}export{Co as component};
