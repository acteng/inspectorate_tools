import{s as pe,e as me,a as S,c as de,b as $e,d as T,f as b,h as ge,i as w,j as X,w as _e,l as ve,t as se,k as ae,m as he,r as D,v as W}from"../chunks/scheduler.C7sFXDHP.js";import{S as be,i as we,c as y,a as k,m as C,t as v,f as ye,b as h,d as A,g as ke,e as q}from"../chunks/index.D6IPCUr9.js";import{B as Ce,e as Z}from"../chunks/Geocoder.svelte_svelte_type_style_lang.DxzexNQm.js";import{p as Ae}from"../chunks/index.CbvUSLjI.js";import{C as Be}from"../chunks/CollapsibleCard.C5nLQiJP.js";import{S as Ie}from"../chunks/SecondaryButton.Du9pHCQb.js";import{S as x}from"../chunks/Select.CEiqBpKI.js";import{T as Se}from"../chunks/TextArea.CRW6lZsX.js";import{T as ee}from"../chunks/TextInput.CMPwon1p.js";import{W as Te}from"../chunks/WarningButton.CBoGtuPS.js";import{s as I}from"../chunks/data.BoAYlYXF.js";import{Y as De}from"../chunks/YesNo.XoFC2cJV.js";function te(t,s,a){const n=t.slice();return n[11]=s[a],n[12]=s,n[13]=a,n}function We(t){let s;return{c(){s=se("Add")},l(a){s=ae(a,"Add")},m(a,n){w(a,s,n)},d(a){a&&b(s)}}}function qe(t){let s;return{c(){s=se("Delete")},l(a){s=ae(a,"Delete")},m(a,n){w(a,s,n)},d(a){a&&b(s)}}}function Le(t){let s,a,n,p,$,d,g,o,_,i,l,f,m,r,u,P,L,B,R,M,N;function ie(){return t[4](t[13])}s=new Te({props:{$$slots:{default:[qe]},$$scope:{ctx:t}}}),s.$on("click",ie);function oe(e){t[5](e,t[11])}let E={label:"Critical Issue",emptyOption:!0,choices:t[1]};t[11].criticalIssue!==void 0&&(E.value=t[11].criticalIssue),n=new x({props:E}),D.push(()=>q(n,"value",oe));function re(e){t[6](e,t[11])}let F={label:"Stage",emptyOption:!0,choices:Ae(["Existing","Design"])};t[11].stage!==void 0&&(F.value=t[11].stage),d=new x({props:F}),D.push(()=>q(d,"value",re));function le(e){t[7](e,t[11])}let j={label:"Location"};t[11].point!==void 0&&(j.value=t[11].point),_=new ee({props:j}),D.push(()=>q(_,"value",le));function ue(e){t[8](e,t[11])}let O={label:"Location Name"};t[11].locationName!==void 0&&(O.value=t[11].locationName),f=new ee({props:O}),D.push(()=>q(f,"value",ue));function fe(e){t[9](e,t[11])}let V={label:"Resolved by Design"};t[11].resolved!==void 0&&(V.value=t[11].resolved),u=new De({props:V}),D.push(()=>q(u,"value",fe));function ce(e){t[10](e,t[11])}let G={label:"Commentary & Feedback"};return t[11].notes!==void 0&&(G.value=t[11].notes),B=new Se({props:G}),D.push(()=>q(B,"value",ce)),{c(){y(s.$$.fragment),a=S(),y(n.$$.fragment),$=S(),y(d.$$.fragment),o=S(),y(_.$$.fragment),l=S(),y(f.$$.fragment),r=S(),y(u.$$.fragment),L=S(),y(B.$$.fragment),M=S()},l(e){k(s.$$.fragment,e),a=T(e),k(n.$$.fragment,e),$=T(e),k(d.$$.fragment,e),o=T(e),k(_.$$.fragment,e),l=T(e),k(f.$$.fragment,e),r=T(e),k(u.$$.fragment,e),L=T(e),k(B.$$.fragment,e),M=T(e)},m(e,c){C(s,e,c),w(e,a,c),C(n,e,c),w(e,$,c),C(d,e,c),w(e,o,c),C(_,e,c),w(e,l,c),C(f,e,c),w(e,r,c),C(u,e,c),w(e,L,c),C(B,e,c),w(e,M,c),N=!0},p(e,c){t=e;const H={};c&16384&&(H.$$scope={dirty:c,ctx:t}),s.$set(H);const J={};!p&&c&1&&(p=!0,J.value=t[11].criticalIssue,W(()=>p=!1)),n.$set(J);const K={};!g&&c&1&&(g=!0,K.value=t[11].stage,W(()=>g=!1)),d.$set(K);const Y={};!i&&c&1&&(i=!0,Y.value=t[11].point,W(()=>i=!1)),_.$set(Y);const z={};!m&&c&1&&(m=!0,z.value=t[11].locationName,W(()=>m=!1)),f.$set(z);const U={};!P&&c&1&&(P=!0,U.value=t[11].resolved,W(()=>P=!1)),u.$set(U);const Q={};!R&&c&1&&(R=!0,Q.value=t[11].notes,W(()=>R=!1)),B.$set(Q)},i(e){N||(v(s.$$.fragment,e),v(n.$$.fragment,e),v(d.$$.fragment,e),v(_.$$.fragment,e),v(f.$$.fragment,e),v(u.$$.fragment,e),v(B.$$.fragment,e),N=!0)},o(e){h(s.$$.fragment,e),h(n.$$.fragment,e),h(d.$$.fragment,e),h(_.$$.fragment,e),h(f.$$.fragment,e),h(u.$$.fragment,e),h(B.$$.fragment,e),N=!1},d(e){e&&(b(a),b($),b(o),b(l),b(r),b(L),b(M)),A(s,e),A(n,e),A(d,e),A(_,e),A(f,e),A(u,e),A(B,e)}}}function ne(t){let s,a;return s=new Be({props:{label:t[11].id,open:!0,$$slots:{default:[Le]},$$scope:{ctx:t}}}),{c(){y(s.$$.fragment)},l(n){k(s.$$.fragment,n)},m(n,p){C(s,n,p),a=!0},p(n,p){const $={};p&1&&($.label=n[11].id),p&16385&&($.$$scope={dirty:p,ctx:n}),s.$set($)},i(n){a||(v(s.$$.fragment,n),a=!0)},o(n){h(s.$$.fragment,n),a=!1},d(n){A(s,n)}}}function Me(t){let s,a,n,p,$,d;a=new Ce({props:{links:[["Tools","/"],["Route check tool","/route_check"]],current:"Critical Issue Log"}}),p=new Ie({props:{$$slots:{default:[We]},$$scope:{ctx:t}}}),p.$on("click",t[2]);let g=Z(t[0].criticalIssues),o=[];for(let i=0;i<g.length;i+=1)o[i]=ne(te(t,g,i));const _=i=>h(o[i],1,1,()=>{o[i]=null});return{c(){s=me("div"),y(a.$$.fragment),n=S(),y(p.$$.fragment),$=S();for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){s=de(i,"DIV",{class:!0});var l=$e(s);k(a.$$.fragment,l),n=T(l),k(p.$$.fragment,l),$=T(l);for(let f=0;f<o.length;f+=1)o[f].l(l);l.forEach(b),this.h()},h(){ge(s,"class","govuk-prose")},m(i,l){w(i,s,l),C(a,s,null),X(s,n),C(p,s,null),X(s,$);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null);d=!0},p(i,[l]){const f={};if(l&16384&&(f.$$scope={dirty:l,ctx:i}),p.$set(f),l&11){g=Z(i[0].criticalIssues);let m;for(m=0;m<g.length;m+=1){const r=te(i,g,m);o[m]?(o[m].p(r,l),v(o[m],1)):(o[m]=ne(r),o[m].c(),v(o[m],1),o[m].m(s,null))}for(ke(),m=g.length;m<o.length;m+=1)_(m);ye()}},i(i){if(!d){v(a.$$.fragment,i),v(p.$$.fragment,i);for(let l=0;l<g.length;l+=1)v(o[l]);d=!0}},o(i){h(a.$$.fragment,i),h(p.$$.fragment,i),o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)h(o[l]);d=!1},d(i){i&&b(s),A(a),A(p),_e(o,i)}}}function Ne(t,s,a){let n;ve(t,I,r=>a(0,n=r));let p=[["1","1 - Conflict at Side Roads and Priority Junctions: >2,500vpd cut across main walking, wheeling or cycling streams"],["2","2 - Conflict at Roundabouts and Signal Junctions: >2,500vpd cut across main walking, wheeling or cycling streams"],["3","3 - Lane Widths: Cyclists unprotected in 3.25-3.9m wide nearside lane"],["4","4 - Trip Hazards: Level differences >13mm with no tactile information and colour contrast"],["5A","5A - Kerbside Activity: Cycle facility next to parking/loading with insufficient buffer"],["5B","5B - Kerbside Activity: Unprotected cycle lane next to a frequently used bus layby"],["6A","6A - Provision of Crossings: on busy streets (>8,000vpd), formal crossings are more than 400m apart"],["6B","6B - Provision of Crossings: on quieter streets (<8,000vpd), desire lines are blocked by parking/loading"],["7A","7A - Standard of Crossings: on busy streets (>8,000vpd), uncontrolled crossings of 2+ lanes with no gaps in traffic"],["7B","7B - Standard of Crossings: at signal junctions, there are arms with no green man for pedestrians"],["8","8 - Motor Traffic Speed: Mean speed > 30mph when cyclists/pedestrians are unprotected"],["9A","9A - Motor Traffic Volume: >1,000 vehicles in busiest hour when cyclists/pedestrians are unprotected"],["9B","9B - Motor Traffic Volume: >5% HGV traffic when cyclists/pedestrians are unprotected and >500 vehicles in busiest hour"],["10","10 - Pedestrian Crossing Speed: Pedestrians must cross at speeds >1.2m/s"],["11A","11A - Footway Width: <1m clear width"],["11B","11B - Footway Width: 1.0-1.5m wide clear width for over 6m"],["11C","11C - Footway Width: <2m clear width and pedestrian comfort level is poor (PCL of D-E)"],["11D","11D - Footway Width: no footway"],["12A","12A - Effective Width next to Tram Lines: <2.4m effective width for cyclists from tramline edge to kerb on a straight run"],["12B","12B - Effective Width next to Tram Lines: insufficient effective width for cyclists on a curved section of tram route"],["13","13 - Crossing Angle of Tram/Train Rails: Cyclist crossing angle <60Â°"],["14",'14 - Cycling Surface and Maintenance Defects: Major defects (provide further information in "commentary and feedback")'],["15",'15 - Walking/Wheeling Surface and Maintenance Defects: Major defects (provide further information in "commentary and feedback")'],["16","16 - Guard Railing: used as standard without consideration of inherent safety risks"]];function $(){he(I,n.criticalIssues=[...n.criticalIssues,{id:"TODO",criticalIssue:"",stage:"",point:"",locationName:"",resolved:"",notes:""}],n)}function d(r){window.confirm("Delete this entry?")&&(n.criticalIssues.splice(r,1),I.set(n))}const g=r=>d(r);function o(r,u){t.$$.not_equal(u.criticalIssue,r)&&(u.criticalIssue=r,I.set(n))}function _(r,u){t.$$.not_equal(u.stage,r)&&(u.stage=r,I.set(n))}function i(r,u){t.$$.not_equal(u.point,r)&&(u.point=r,I.set(n))}function l(r,u){t.$$.not_equal(u.locationName,r)&&(u.locationName=r,I.set(n))}function f(r,u){t.$$.not_equal(u.resolved,r)&&(u.resolved=r,I.set(n))}function m(r,u){t.$$.not_equal(u.notes,r)&&(u.notes=r,I.set(n))}return[n,p,$,d,g,o,_,i,l,f,m]}class ze extends be{constructor(s){super(),we(this,s,Ne,Me,pe,{})}}export{ze as component};
