import{s as C,e as p,a as y,t as v,c as d,p as P,g as k,b as $,d as x,f as u,i as m,h as A,j as O,n as f,k as L}from"../chunks/scheduler.Bsni_e59.js";import{S as D,i as R}from"../chunks/index.CCfAUppz.js";import{s as T}from"../chunks/data.Bw75fHqo.js";import{g as _}from"../chunks/results.B9aw-lYC.js";function S(t){let e=_(t),n=t.summary.checkType=="street",o=t.summary.checkType=="path",i={Safety:"Sa",Accessibility:"Ac",Comfort:"Cf",Directness:"Di",Attractiveness:"At",Cohesion:"Co",overall:"To"},s={"Social activity":"SA","Personal security":"PS","Character and legibility":"CL",Environment:"En",overall:"To"};return[...E(t),...b(t),...g("SA",0,t.safetyCheck),...g("ST",16,t.streetCheck),...g("SP",0,t.streetPlacemakingCheck),...g("PA",16,t.pathCheck),...g("PP",16,t.pathPlacemakingCheck),...j(t),...w(t),...c("ST-LOS",[...e.levelOfService,e.overall],n,i),...c("ST-LOS",e.byMode,n,{walking:"Wa",wheeling:"Wh",cycling:"Cy"}),...c("SP-LOS",[...e.placemakingCategories,e.placemakingOverall],n,s),...c("PA-LOS",[...e.levelOfService,e.overall],o,i),...c("PA-LOS",e.byMode,o,{walking:"Wa",wheeling:"Wh",cycling:"Cy",horse:"HR"}),...c("PP-LOS",[...e.placemakingCategories,e.placemakingOverall],o,s),...I(t,e)]}function E(t){let e=t.summary;return[["Scheme Ref",e.schemeReference],["Date of Design Review",e.dateDesignReview],["Scheme Name",e.schemeName],["Authority",e.authority],["Transport/ Combined Authority",e.transportOrCombinedAuthority],["Region",e.region],["Funding Programme",e.fundingProgramme],["Design Stage",e.designStage],["Funding Conditions",e.fundingConditions],["Inspector",e.inspectorEmail],["RouteLength",e.totalRouteLengthKm],["RouteFileLength",e.assessedRouteLengthKm],["Notes",e.notes],["Tool","Route Check online-alpha"],["Sub-tool",e.checkType=="street"?"Street Check":"Path Check"]]}function b(t){let e=[];for(let[n,o]of t.policyCheck.entries())e.push([`PC${h(n)}-E`,o.existing]),e.push([`PC${h(n)}-D`,o.proposed]);return e}function g(t,e,n){let o=[];for(let i=0;i<n.existingScores.length;i++)o.push([`${t}${h(i+e)}-E`,n.existingScores[i]]),o.push([`${t}${h(i+e)}-D`,n.proposedScores[i]]);return o}function h(t){return(t+1).toString().padStart(2,"0")}function j(t){let e={existing:t.policyConflictLog.filter(n=>n.stage=="Existing").length,designed:t.policyConflictLog.filter(n=>n.stage=="Design").length,removed:t.policyConflictLog.filter(n=>n.resolved=="Yes").length};return[["PC-E",e.existing],["PC-D",e.designed],["PC-Rem",e.removed],["PC-Int",e.designed],["PC-Tot",e.designed+e.existing-e.removed]]}function w(t){let e={existing:t.criticalIssues.filter(n=>n.stage=="Existing").length,designed:t.criticalIssues.filter(n=>n.stage=="Design").length,removed:t.criticalIssues.filter(n=>n.resolved=="Yes").length};return[["SA-E",e.existing],["SA-D",e.designed],["SA-Rem",e.removed],["SA-Int",e.designed],["SA-Tot",e.designed+e.existing-e.removed]]}function c(t,e,n,o){let i=[];for(let s of e){let l=o[s.category];i.push([`${t}-${l}-E`,n?"":`${Math.round(s.existing.scorePercent)}%`]),i.push([`${t}-${l}-D`,n?"":`${Math.round(s.proposed.scorePercent)}%`])}return i}function I(t,e){let n=[],o=12;for(let i=1;i<=o;i++)for(let[s,l]of[["walkingWheeling","WW"],["cycling","Cy"],["total","To"]])n.push([`J${i}-LOS-${l}-E`,i<=e.jat.length?e.jat[i-1][s].existing:""]),n.push([`J${i}-LOS-${l}-D`,i<=e.jat.length?e.jat[i-1][s].proposed:""]);for(let i=1;i<=o;i++)i<=e.jat.length?n.push([`J${i}-Arms`,t.jat[i-1].proposed.movements.filter(s=>s.kind=="pedestrian").length]):n.push([`J${i}-Arms`,0]);return n}function J(t){let e,n="TODO. Below is the start to the DALOG output.",o,i,s=JSON.stringify(S(t[0]),null,"  ")+"",l;return{c(){e=p("p"),e.textContent=n,o=y(),i=p("pre"),l=v(s)},l(r){e=d(r,"P",{"data-svelte-h":!0}),P(e)!=="svelte-10g90aq"&&(e.textContent=n),o=k(r),i=d(r,"PRE",{});var a=$(i);l=x(a,s),a.forEach(u)},m(r,a){m(r,e,a),m(r,o,a),m(r,i,a),A(i,l)},p(r,[a]){a&1&&s!==(s=JSON.stringify(S(r[0]),null,"  ")+"")&&O(l,s)},i:f,o:f,d(r){r&&(u(e),u(o),u(i))}}}function W(t,e,n){let o;return L(t,T,i=>n(0,o=i)),[o]}class B extends D{constructor(e){super(),R(this,e,W,J,C,{})}}export{B as component};
