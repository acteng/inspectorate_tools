import{B as ge,s as Z,o as he,e as U,t as G,b as C,c as I,f as W,h as Q,d as g,j as F,a as R,i as y,k as O,l as se,u as pe,p as be,q as ve,r as le,n as re,g as we,P as te,Q as x,R as ie,S as ue,T as ce,U as oe,G as st,V as We,W as lt,X as it,y as J,x as me,Y as X,m as ke,Z as rt,_ as ot}from"../chunks/scheduler.C6wGf0y2.js";import{a as b,t as v,S as z,i as K,c as T,b as L,m as M,d as E,f as Y,g as Ge,e as Qe}from"../chunks/index.D-aa-kS0.js";import{w as ft}from"../chunks/index.D-aZuUzx.js";import{b as Be}from"../chunks/paths.CBx5kgwU.js";function de(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function ut(n,e){b(n,1,1,()=>{e.delete(n.key)})}function ct(n,e,a,t,s,l,i,f,o,r,u,c){let m=n.length,d=l.length,h=m;const P={};for(;h--;)P[n[h].key]=h;const $=[],B=new Map,w=new Map,k=[];for(h=d;h--;){const S=c(s,l,h),H=a(S);let A=i.get(H);A?t&&k.push(()=>A.p(S,e)):(A=r(H,S),A.c()),B.set(H,$[h]=A),H in P&&w.set(H,Math.abs(h-P[H]))}const p=new Set,D=new Set;function q(S){v(S,1),S.m(f,u),i.set(S.key,S),u=S.first,d--}for(;m&&d;){const S=$[d-1],H=n[m-1],A=S.key,ne=H.key;S===H?(u=S.first,m--,d--):B.has(ne)?!i.has(A)||p.has(A)?q(S):D.has(ne)?m--:w.get(A)>w.get(ne)?(D.add(A),q(S)):(p.add(ne),m--):(o(H,i),m--)}for(;m--;){const S=n[m];B.has(S.key)||o(S,i)}for(;d;)q($[d-1]);return ge(k),$}function Ze(n,e){const a={},t={},s={$$scope:1};let l=n.length;for(;l--;){const i=n[l],f=e[l];if(f){for(const o in i)o in f||(t[o]=1);for(const o in f)s[o]||(a[o]=f[o],s[o]=1);n[l]=f}else for(const o in i)s[o]=1}for(const i in t)i in a||(a[i]=void 0);return a}let fe;const mt=new Uint8Array(16);function dt(){if(!fe&&(fe=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fe(mt)}const V=[];for(let n=0;n<256;++n)V.push((n+256).toString(16).slice(1));function _t(n,e=0){return V[n[e+0]]+V[n[e+1]]+V[n[e+2]]+V[n[e+3]]+"-"+V[n[e+4]]+V[n[e+5]]+"-"+V[n[e+6]]+V[n[e+7]]+"-"+V[n[e+8]]+V[n[e+9]]+"-"+V[n[e+10]]+V[n[e+11]]+V[n[e+12]]+V[n[e+13]]+V[n[e+14]]+V[n[e+15]]}const gt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ae={randomUUID:gt};function ye(n,e,a){if(Ae.randomUUID&&!e&&!n)return Ae.randomUUID();n=n||{};const t=n.random||(n.rng||dt)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){a=a||0;for(let s=0;s<16;++s)e[a+s]=t[s];return e}return _t(t)}function ht(n){let e,a,t,s,l,i,f;const o=n[3].default,r=he(o,n,n[2],null);return{c(){e=U("details"),a=U("summary"),t=U("span"),s=G(n[0]),l=C(),i=U("div"),r&&r.c(),this.h()},l(u){e=I(u,"DETAILS",{class:!0,"data-module":!0});var c=W(e);a=I(c,"SUMMARY",{class:!0});var m=W(a);t=I(m,"SPAN",{class:!0});var d=W(t);s=Q(d,n[0]),d.forEach(g),m.forEach(g),l=F(c),i=I(c,"DIV",{class:!0});var h=W(i);r&&r.l(h),h.forEach(g),c.forEach(g),this.h()},h(){R(t,"class","govuk-details__summary-text"),R(a,"class","govuk-details__summary"),R(i,"class","govuk-details__text"),e.open=n[1],R(e,"class","govuk-details"),R(e,"data-module","govuk-details")},m(u,c){y(u,e,c),O(e,a),O(a,t),O(t,s),O(e,l),O(e,i),r&&r.m(i,null),f=!0},p(u,[c]){(!f||c&1)&&se(s,u[0]),r&&r.p&&(!f||c&4)&&pe(r,o,u,u[2],f?ve(o,u[2],c,null):be(u[2]),null),(!f||c&2)&&(e.open=u[1])},i(u){f||(v(r,u),f=!0)},o(u){b(r,u),f=!1},d(u){u&&g(e),r&&r.d(u)}}}function pt(n,e,a){let{$$slots:t={},$$scope:s}=e,{label:l}=e,{open:i=!1}=e;return n.$$set=f=>{"label"in f&&a(0,l=f.label),"open"in f&&a(1,i=f.open),"$$scope"in f&&a(2,s=f.$$scope)},[l,i,s,t]}class _e extends z{constructor(e){super(),K(this,e,pt,ht,Z,{label:0,open:1})}}function Ve(n){let e,a,t="Error:",s,l;return{c(){e=U("div"),a=U("span"),a.textContent=t,s=C(),l=G(n[0]),this.h()},l(i){e=I(i,"DIV",{class:!0});var f=W(e);a=I(f,"SPAN",{class:!0,"data-svelte-h":!0}),we(a)!=="svelte-1gidx8i"&&(a.textContent=t),s=F(f),l=Q(f,n[0]),f.forEach(g),this.h()},h(){R(a,"class","govuk-visually-hidden"),R(e,"class","govuk-error-message")},m(i,f){y(i,e,f),O(e,a),O(e,s),O(e,l)},p(i,f){f&1&&se(l,i[0])},d(i){i&&g(e)}}}function bt(n){let e,a=n[0]&&Ve(n);return{c(){a&&a.c(),e=le()},l(t){a&&a.l(t),e=le()},m(t,s){a&&a.m(t,s),y(t,e,s)},p(t,[s]){t[0]?a?a.p(t,s):(a=Ve(t),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},i:re,o:re,d(t){t&&g(e),a&&a.d(t)}}}function vt(n,e,a){let{errorMessage:t}=e;return n.$$set=s=>{"errorMessage"in s&&a(0,t=s.errorMessage)},[t]}class De extends z{constructor(e){super(),K(this,e,vt,bt,Z,{errorMessage:0})}}function $t(n){let e,a,t,s,l;const i=n[3].default,f=he(i,n,n[2],null);return{c(){e=U("div"),a=U("label"),t=G(n[0]),s=C(),f&&f.c(),this.h()},l(o){e=I(o,"DIV",{class:!0});var r=W(e);a=I(r,"LABEL",{class:!0,for:!0});var u=W(a);t=Q(u,n[0]),u.forEach(g),s=F(r),f&&f.l(r),r.forEach(g),this.h()},h(){R(a,"class","govuk-label govuk-label--s"),R(a,"for",n[1]),R(e,"class","govuk-form-group")},m(o,r){y(o,e,r),O(e,a),O(a,t),O(e,s),f&&f.m(e,null),l=!0},p(o,[r]){(!l||r&1)&&se(t,o[0]),(!l||r&2)&&R(a,"for",o[1]),f&&f.p&&(!l||r&4)&&pe(f,i,o,o[2],l?ve(i,o[2],r,null):be(o[2]),null)},i(o){l||(v(f,o),l=!0)},o(o){b(f,o),l=!1},d(o){o&&g(e),f&&f.d(o)}}}function wt(n,e,a){let{$$slots:t={},$$scope:s}=e,{label:l}=e,{id:i}=e;return n.$$set=f=>{"label"in f&&a(0,l=f.label),"id"in f&&a(1,i=f.id),"$$scope"in f&&a(2,s=f.$$scope)},[l,i,s,t]}class Se extends z{constructor(e){super(),K(this,e,wt,$t,Z,{label:0,id:1})}}function kt(n){let e,a,t,s,l,i,f;return e=new De({props:{errorMessage:n[5](n[2])}}),{c(){T(e.$$.fragment),a=C(),t=U("input"),this.h()},l(o){L(e.$$.fragment,o),a=F(o),t=I(o,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){R(t,"type","text"),R(t,"inputmode","numeric"),R(t,"class",s=`govuk-input govuk-input--width-${n[1]}`),R(t,"id",n[3])},m(o,r){M(e,o,r),y(o,a,r),y(o,t,r),te(t,n[2]),l=!0,i||(f=[x(t,"input",n[9]),x(t,"change",n[4])],i=!0)},p(o,r){const u={};r&4&&(u.errorMessage=o[5](o[2])),e.$set(u),(!l||r&2&&s!==(s=`govuk-input govuk-input--width-${o[1]}`))&&R(t,"class",s),r&4&&t.value!==o[2]&&te(t,o[2])},i(o){l||(v(e.$$.fragment,o),l=!0)},o(o){b(e.$$.fragment,o),l=!1},d(o){o&&(g(a),g(t)),E(e,o),i=!1,ge(f)}}}function yt(n){let e,a;return e=new Se({props:{label:n[0],id:n[3],$$slots:{default:[kt]},$$scope:{ctx:n}}}),{c(){T(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,s){M(e,t,s),a=!0},p(t,[s]){const l={};s&1&&(l.label=t[0]),s&1030&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){a||(v(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function Dt(n,e,a){let{label:t}=e,{value:s}=e,{width:l}=e,{min:i=void 0}=e,{max:f=void 0}=e,o=s==null?void 0:s.toString(),r=ye();function u(){a(6,s=o==null?void 0:parseInt(o,10))}function c(d){if(d==""||d==null)return"";if(d.includes("."))return"Please enter a number without decimals";let h=Number(d);return isNaN(h)?"Please enter a valid number":i!=null&&h<i?`Please enter a number that's at least ${i};`:f!=null&&h>f?`Please enter a number that's at most ${f};`:""}function m(){o=this.value,a(2,o)}return n.$$set=d=>{"label"in d&&a(0,t=d.label),"value"in d&&a(6,s=d.value),"width"in d&&a(1,l=d.width),"min"in d&&a(7,i=d.min),"max"in d&&a(8,f=d.max)},[t,l,o,r,u,c,s,i,f,m]}class St extends z{constructor(e){super(),K(this,e,Dt,yt,Z,{label:0,value:6,width:1,min:7,max:8})}}function Tt(n){let e,a,t,s;const l=n[2].default,i=he(l,n,n[1],null);let f=[{type:"button"},{class:"govuk-button govuk-button--secondary"},{"data-module":"govuk-button"},n[0]],o={};for(let r=0;r<f.length;r+=1)o=ie(o,f[r]);return{c(){e=U("button"),i&&i.c(),this.h()},l(r){e=I(r,"BUTTON",{type:!0,class:!0,"data-module":!0});var u=W(e);i&&i.l(u),u.forEach(g),this.h()},h(){ue(e,o)},m(r,u){y(r,e,u),i&&i.m(e,null),e.autofocus&&e.focus(),a=!0,t||(s=[x(e,"click",n[3]),x(e,"mouseenter",n[4]),x(e,"mouseleave",n[5])],t=!0)},p(r,[u]){i&&i.p&&(!a||u&2)&&pe(i,l,r,r[1],a?ve(l,r[1],u,null):be(r[1]),null),ue(e,o=Ze(f,[{type:"button"},{class:"govuk-button govuk-button--secondary"},{"data-module":"govuk-button"},u&1&&r[0]]))},i(r){a||(v(i,r),a=!0)},o(r){b(i,r),a=!1},d(r){r&&g(e),i&&i.d(r),t=!1,ge(s)}}}function Lt(n,e,a){let{$$slots:t={},$$scope:s}=e;function l(o){oe.call(this,n,o)}function i(o){oe.call(this,n,o)}function f(o){oe.call(this,n,o)}return n.$$set=o=>{a(0,e=ie(ie({},e),ce(o))),"$$scope"in o&&a(1,s=o.$$scope)},e=ce(e),[e,s,t,l,i,f]}class $e extends z{constructor(e){super(),K(this,e,Lt,Tt,Z,{})}}function qe(n,e,a){const t=n.slice();return t[9]=e[a][0],t[10]=e[a][1],t}function He(n){let e;return{c(){e=U("option"),this.h()},l(a){e=I(a,"OPTION",{}),W(e).forEach(g),this.h()},h(){e.__value="",te(e,e.__value)},m(a,t){y(a,e,t)},d(a){a&&g(e)}}}function je(n){let e,a=n[10]+"",t,s;return{c(){e=U("option"),t=G(a),this.h()},l(l){e=I(l,"OPTION",{});var i=W(e);t=Q(i,a),i.forEach(g),this.h()},h(){e.__value=s=n[9],te(e,e.__value)},m(l,i){y(l,e,i),O(e,t)},p(l,i){i&4&&a!==(a=l[10]+"")&&se(t,a),i&4&&s!==(s=l[9])&&(e.__value=s,te(e,e.__value))},d(l){l&&g(e)}}}function Mt(n){let e,a,t,s,l,i,f;e=new De({props:{errorMessage:n[5]}});let o=n[3]&&He(),r=de(n[2]),u=[];for(let c=0;c<r.length;c+=1)u[c]=je(qe(n,r,c));return{c(){T(e.$$.fragment),a=C(),t=U("select"),o&&o.c(),s=le();for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){L(e.$$.fragment,c),a=F(c),t=I(c,"SELECT",{class:!0,id:!0});var m=W(t);o&&o.l(m),s=le();for(let d=0;d<u.length;d+=1)u[d].l(m);m.forEach(g),this.h()},h(){R(t,"class","govuk-select"),R(t,"id",n[6]),t.disabled=n[4],n[0]===void 0&&st(()=>n[8].call(t))},m(c,m){M(e,c,m),y(c,a,m),y(c,t,m),o&&o.m(t,null),O(t,s);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(t,null);We(t,n[0],!0),l=!0,i||(f=[x(t,"change",n[8]),x(t,"change",n[7])],i=!0)},p(c,m){const d={};if(m&32&&(d.errorMessage=c[5]),e.$set(d),c[3]?o||(o=He(),o.c(),o.m(t,s)):o&&(o.d(1),o=null),m&4){r=de(c[2]);let h;for(h=0;h<r.length;h+=1){const P=qe(c,r,h);u[h]?u[h].p(P,m):(u[h]=je(P),u[h].c(),u[h].m(t,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=r.length}(!l||m&16)&&(t.disabled=c[4]),m&5&&We(t,c[0])},i(c){l||(v(e.$$.fragment,c),l=!0)},o(c){b(e.$$.fragment,c),l=!1},d(c){c&&(g(a),g(t)),E(e,c),o&&o.d(),lt(u,c),i=!1,ge(f)}}}function Et(n){let e,a;return e=new Se({props:{label:n[1],id:n[6],$$slots:{default:[Mt]},$$scope:{ctx:n}}}),{c(){T(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,s){M(e,t,s),a=!0},p(t,[s]){const l={};s&2&&(l.label=t[1]),s&8253&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){a||(v(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function Ot(n,e,a){let{label:t}=e,{choices:s}=e,{emptyOption:l=!1}=e,{disabled:i=!1}=e,{errorMessage:f=""}=e,{value:o}=e,r=ye();function u(m){oe.call(this,n,m)}function c(){o=it(this),a(0,o),a(2,s)}return n.$$set=m=>{"label"in m&&a(1,t=m.label),"choices"in m&&a(2,s=m.choices),"emptyOption"in m&&a(3,l=m.emptyOption),"disabled"in m&&a(4,i=m.disabled),"errorMessage"in m&&a(5,f=m.errorMessage),"value"in m&&a(0,o=m.value)},[o,t,s,l,i,f,r,u,c]}class ee extends z{constructor(e){super(),K(this,e,Ot,Et,Z,{label:1,choices:2,emptyOption:3,disabled:4,errorMessage:5,value:0})}}function Rt(n){let e,a,t,s,l,i;return e=new De({props:{errorMessage:n[3]}}),{c(){T(e.$$.fragment),a=C(),t=U("textarea"),this.h()},l(f){L(e.$$.fragment,f),a=F(f),t=I(f,"TEXTAREA",{class:!0,id:!0,rows:!0}),W(t).forEach(g),this.h()},h(){R(t,"class","govuk-textarea"),R(t,"id",n[4]),R(t,"rows",n[2])},m(f,o){M(e,f,o),y(f,a,o),y(f,t,o),te(t,n[0]),s=!0,l||(i=x(t,"input",n[5]),l=!0)},p(f,o){const r={};o&8&&(r.errorMessage=f[3]),e.$set(r),(!s||o&4)&&R(t,"rows",f[2]),o&1&&te(t,f[0])},i(f){s||(v(e.$$.fragment,f),s=!0)},o(f){b(e.$$.fragment,f),s=!1},d(f){f&&(g(a),g(t)),E(e,f),l=!1,i()}}}function Ct(n){let e,a;return e=new Se({props:{label:n[1],id:n[4],$$slots:{default:[Rt]},$$scope:{ctx:n}}}),{c(){T(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,s){M(e,t,s),a=!0},p(t,[s]){const l={};s&2&&(l.label=t[1]),s&77&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){a||(v(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function Ft(n,e,a){let{label:t}=e,{value:s}=e,{rows:l=5}=e,{errorMessage:i=""}=e,f=ye();function o(){s=this.value,a(0,s)}return n.$$set=r=>{"label"in r&&a(1,t=r.label),"value"in r&&a(0,s=r.value),"rows"in r&&a(2,l=r.rows),"errorMessage"in r&&a(3,i=r.errorMessage)},[s,t,l,i,f,o]}class Ut extends z{constructor(e){super(),K(this,e,Ft,Ct,Z,{label:1,value:0,rows:2,errorMessage:3})}}function It(n){let e,a,t,s;const l=n[2].default,i=he(l,n,n[1],null);let f=[{type:"button"},{class:"govuk-button govuk-button--warning"},{"data-module":"govuk-button"},n[0]],o={};for(let r=0;r<f.length;r+=1)o=ie(o,f[r]);return{c(){e=U("button"),i&&i.c(),this.h()},l(r){e=I(r,"BUTTON",{type:!0,class:!0,"data-module":!0});var u=W(e);i&&i.l(u),u.forEach(g),this.h()},h(){ue(e,o)},m(r,u){y(r,e,u),i&&i.m(e,null),e.autofocus&&e.focus(),a=!0,t||(s=x(e,"click",n[3]),t=!0)},p(r,[u]){i&&i.p&&(!a||u&2)&&pe(i,l,r,r[1],a?ve(l,r[1],u,null):be(r[1]),null),ue(e,o=Ze(f,[{type:"button"},{class:"govuk-button govuk-button--warning"},{"data-module":"govuk-button"},u&1&&r[0]]))},i(r){a||(v(i,r),a=!0)},o(r){b(i,r),a=!1},d(r){r&&g(e),i&&i.d(r),t=!1,s()}}}function Nt(n,e,a){let{$$slots:t={},$$scope:s}=e;function l(i){oe.call(this,n,i)}return n.$$set=i=>{a(0,e=ie(ie({},e),ce(i))),"$$scope"in i&&a(1,s=i.$$scope)},e=ce(e),[e,s,t,l]}class ze extends z{constructor(e){super(),K(this,e,Nt,It,Z,{})}}let j=ft(Pt());j.subscribe(n=>window.localStorage.setItem("cross-section",JSON.stringify(n)));function Pt(){let n=JSON.parse(window.localStorage.getItem("cross-section")||"{}");return n.trafficData?n:Ke()}function Ke(){return{trafficData:{flowOneWay:"",flowTwoWay:"",flowSharedUse:"",trafficFlow:"",speedLimit:"",observedSpeed:void 0,streetFunction:""},desirableMinimumCrossSection:[],absoluteMinimumCrossSection:[]}}let Wt=["Footway","Narrow Traffic / Bus Lane","Wide Traffic / Bus Lane","Traffic Lane (no buses): speed limit 20/30","On-highway advisory/mandatory cycle lane","1-way protected cycle track","2-way protected cycle track","Shared use cycle track","Parking Bay","Disabled Parking Bay","Loading Bay","Buffer / Verge"],Bt=[["Footway","2.60","2.60","2.60","","","2.00","2.00","2.00",""],["Narrow Traffic / Bus Lane","3.25","","","","","3.25","","",""],["Wide Traffic / Bus Lane","4.50","","","","","3.90","","",""],["Traffic Lane (no buses): speed limit 20/30","3.00","","","","","2.75","","",""],["On-highway advisory/mandatory cycle Lane","2.00","","","","","1.50","","",""],["1-way protected cycle track","2.30","2.50","2.80","","","1.80","2.30","2.30",""],["2-way protected cycle track","3.30","3.30","4.30","","","2.30","2.80","3.30",""],["Shared use cycle track","3.00","4.50","","","","3.00","4.50","",""],["Parking Bay","2.00","","","","","1.80","","",""],["Disabled Parking Bay","2.70","","","","","2.70","","",""],["Loading Bay","2.70","","","","","1.80","","",""],["Buffer / Verge","0.50","1.00","2.00","2.50","3.50","-  ","0.50","1.50","2.00","3.00"],["Footway buffer / verge","0.50","1.50","","","","0.50","1.50","",""]];function Je(n,e,a){if(n=="")return"";let t=Bt.find(l=>l[0]==n),s=a=="Desirable"?t.slice(1,6):t.slice(6,11);if(e=="High Street (active frontages)")return s[0];if(e=="Residential Street")return s[1];if(e=="Local distributor road")return s[2];throw new Error(`Unknown streetFunction ${e}`)}function At(n){let e;return{c(){e=G("←")},l(a){e=Q(a,"←")},m(a,t){y(a,e,t)},d(a){a&&g(e)}}}function Vt(n){let e;return{c(){e=G("Delete")},l(a){e=Q(a,"Delete")},m(a,t){y(a,e,t)},d(a){a&&g(e)}}}function qt(n){let e;return{c(){e=G("→")},l(a){e=Q(a,"→")},m(a,t){y(a,e,t)},d(a){a&&g(e)}}}function Ht(n){let e,a,t,s,l,i,f,o=Je(n[0],n[4].trafficData.streetFunction,n[3])+"",r,u,c,m,d,h,P,$,B;function w(p){n[6](p)}let k={label:"Lane type",emptyOption:!0,choices:jt(Wt)};return n[0]!==void 0&&(k.value=n[0]),a=new ee({props:k}),J.push(()=>Y(a,"value",w)),m=new $e({props:{disabled:n[1],$$slots:{default:[At]},$$scope:{ctx:n}}}),m.$on("click",n[7]),h=new ze({props:{$$slots:{default:[Vt]},$$scope:{ctx:n}}}),h.$on("click",n[8]),$=new $e({props:{disabled:n[2],$$slots:{default:[qt]},$$scope:{ctx:n}}}),$.$on("click",n[9]),{c(){e=U("div"),T(a.$$.fragment),s=C(),l=U("p"),i=G(n[3]),f=G(" minimum width (m): "),r=G(o),u=C(),c=U("div"),T(m.$$.fragment),d=C(),T(h.$$.fragment),P=C(),T($.$$.fragment),this.h()},l(p){e=I(p,"DIV",{class:!0});var D=W(e);L(a.$$.fragment,D),s=F(D),l=I(D,"P",{});var q=W(l);i=Q(q,n[3]),f=Q(q," minimum width (m): "),r=Q(q,o),q.forEach(g),u=F(D),c=I(D,"DIV",{style:!0,class:!0});var S=W(c);L(m.$$.fragment,S),d=F(S),L(h.$$.fragment,S),P=F(S),L($.$$.fragment,S),S.forEach(g),D.forEach(g),this.h()},h(){me(c,"display","flex"),me(c,"justify-content","space-between"),R(c,"class","svelte-jig4ga"),R(e,"class","svelte-jig4ga")},m(p,D){y(p,e,D),M(a,e,null),O(e,s),O(e,l),O(l,i),O(l,f),O(l,r),O(e,u),O(e,c),M(m,c,null),O(c,d),M(h,c,null),O(c,P),M($,c,null),B=!0},p(p,[D]){const q={};!t&&D&1&&(t=!0,q.value=p[0],X(()=>t=!1)),a.$set(q),(!B||D&8)&&se(i,p[3]),(!B||D&25)&&o!==(o=Je(p[0],p[4].trafficData.streetFunction,p[3])+"")&&se(r,o);const S={};D&2&&(S.disabled=p[1]),D&1024&&(S.$$scope={dirty:D,ctx:p}),m.$set(S);const H={};D&1024&&(H.$$scope={dirty:D,ctx:p}),h.$set(H);const A={};D&4&&(A.disabled=p[2]),D&1024&&(A.$$scope={dirty:D,ctx:p}),$.$set(A)},i(p){B||(v(a.$$.fragment,p),v(m.$$.fragment,p),v(h.$$.fragment,p),v($.$$.fragment,p),B=!0)},o(p){b(a.$$.fragment,p),b(m.$$.fragment,p),b(h.$$.fragment,p),b($.$$.fragment,p),B=!1},d(p){p&&g(e),E(a),E(m),E(h),E($)}}}function jt(n){return n.map(e=>[e,e])}function Jt(n,e,a){let t;ke(n,j,d=>a(4,t=d));let{value:s}=e,{isFirst:l}=e,{isLast:i}=e,{sectionType:f}=e,o=rt();function r(d){s=d,a(0,s)}const u=()=>o("moveLeft"),c=()=>o("delete"),m=()=>o("moveRight");return n.$$set=d=>{"value"in d&&a(0,s=d.value),"isFirst"in d&&a(1,l=d.isFirst),"isLast"in d&&a(2,i=d.isLast),"sectionType"in d&&a(3,f=d.sectionType)},[s,l,i,f,t,o,r,u,c,m]}class Xt extends z{constructor(e){super(),K(this,e,Jt,Ht,Z,{value:0,isFirst:1,isLast:2,sectionType:3})}}function Xe(n,e,a){const t=n.slice();return t[10]=e[a],t[11]=e,t[12]=a,t}function Yt(n){let e;return{c(){e=G("Add")},l(a){e=Q(a,"Add")},m(a,t){y(a,e,t)},d(a){a&&g(e)}}}function Ye(n,e){let a,t,s,l;function i(c){e[6](c,e[10],e[11],e[12])}function f(){return e[7](e[12])}function o(){return e[8](e[12])}function r(){return e[9](e[12])}let u={isFirst:e[12]==0,isLast:e[12]==e[0].length-1,sectionType:e[1]};return e[10]!==void 0&&(u.value=e[10]),t=new Xt({props:u}),J.push(()=>Y(t,"value",i)),t.$on("delete",f),t.$on("moveLeft",o),t.$on("moveRight",r),{key:n,first:null,c(){a=le(),T(t.$$.fragment),this.h()},l(c){a=le(),L(t.$$.fragment,c),this.h()},h(){this.first=a},m(c,m){y(c,a,m),M(t,c,m),l=!0},p(c,m){e=c;const d={};m&1&&(d.isFirst=e[12]==0),m&1&&(d.isLast=e[12]==e[0].length-1),m&2&&(d.sectionType=e[1]),!s&&m&1&&(s=!0,d.value=e[10],X(()=>s=!1)),t.$set(d)},i(c){l||(v(t.$$.fragment,c),l=!0)},o(c){b(t.$$.fragment,c),l=!1},d(c){c&&g(a),E(t,c)}}}function Gt(n){let e,a,t,s=[],l=new Map,i;e=new $e({props:{$$slots:{default:[Yt]},$$scope:{ctx:n}}}),e.$on("click",n[2]);let f=de(n[0]);const o=r=>r[12];for(let r=0;r<f.length;r+=1){let u=Xe(n,f,r),c=o(u);l.set(c,s[r]=Ye(c,u))}return{c(){T(e.$$.fragment),a=C(),t=U("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){L(e.$$.fragment,r),a=F(r),t=I(r,"DIV",{style:!0});var u=W(t);for(let c=0;c<s.length;c+=1)s[c].l(u);u.forEach(g),this.h()},h(){me(t,"display","flex"),me(t,"flex-direction","row")},m(r,u){M(e,r,u),y(r,a,u),y(r,t,u);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(t,null);i=!0},p(r,[u]){const c={};u&8192&&(c.$$scope={dirty:u,ctx:r}),e.$set(c),u&59&&(f=de(r[0]),Ge(),s=ct(s,u,o,1,r,f,l,t,ut,Ye,null,Xe),Qe())},i(r){if(!i){v(e.$$.fragment,r);for(let u=0;u<f.length;u+=1)v(s[u]);i=!0}},o(r){b(e.$$.fragment,r);for(let u=0;u<s.length;u+=1)b(s[u]);i=!1},d(r){r&&(g(a),g(t)),E(e,r);for(let u=0;u<s.length;u+=1)s[u].d()}}}function Qt(n,e,a){let{lanesLeftToRight:t}=e,{sectionType:s}=e;function l(){a(0,t=[...t,""])}function i(d){t.splice(d,1),a(0,t)}function f(d){a(0,[t[d-1],t[d]]=[t[d],t[d-1]],t)}function o(d){a(0,[t[d+1],t[d]]=[t[d],t[d+1]],t)}function r(d,h,P,$){P[$]=d,a(0,t)}const u=d=>i(d),c=d=>f(d),m=d=>o(d);return n.$$set=d=>{"lanesLeftToRight"in d&&a(0,t=d.lanesLeftToRight),"sectionType"in d&&a(1,s=d.sectionType)},[t,s,l,i,f,o,r,u,c,m]}class xe extends z{constructor(e){super(),K(this,e,Qt,Gt,Z,{lanesLeftToRight:0,sectionType:1})}}function Zt(n){let e,a,t,s,l,i,f,o,r,u,c,m,d,h,P,$,B,w,k,p,D;function q(_){n[2](_)}let S={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:ae(["<200","200-800",">800"])};n[0].trafficData.flowOneWay!==void 0&&(S.value=n[0].trafficData.flowOneWay),e=new ee({props:S}),J.push(()=>Y(e,"value",q));function H(_){n[3](_)}let A={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:ae(["<300","300-1,000",">1,000"])};n[0].trafficData.flowTwoWay!==void 0&&(A.value=n[0].trafficData.flowTwoWay),s=new ee({props:A}),J.push(()=>Y(s,"value",H));function ne(_){n[4](_)}let Te={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:ae(["<300",">300"])};n[0].trafficData.flowSharedUse!==void 0&&(Te.value=n[0].trafficData.flowSharedUse),f=new ee({props:Te}),J.push(()=>Y(f,"value",ne));function et(_){n[5](_)}let Le={label:"Traffic flow (vpd)",emptyOption:!0,choices:ae(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};n[0].trafficData.trafficFlow!==void 0&&(Le.value=n[0].trafficData.trafficFlow),u=new ee({props:Le}),J.push(()=>Y(u,"value",et));function tt(_){n[6](_)}let Me={label:"Speed limit (MPH)",emptyOption:!0,choices:ae(["<30","30","40","50","60","70"])};n[0].trafficData.speedLimit!==void 0&&(Me.value=n[0].trafficData.speedLimit),d=new ee({props:Me}),J.push(()=>Y(d,"value",tt));function nt(_){n[7](_)}let Ee={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};n[0].trafficData.observedSpeed!==void 0&&(Ee.value=n[0].trafficData.observedSpeed),$=new St({props:Ee}),J.push(()=>Y($,"value",nt));function at(_){n[8](_)}let Oe={label:"Street function",emptyOption:!0,choices:ae(["High Street (active frontages)","Residential street","Local distributor road"])};return n[0].trafficData.streetFunction!==void 0&&(Oe.value=n[0].trafficData.streetFunction),k=new ee({props:Oe}),J.push(()=>Y(k,"value",at)),{c(){T(e.$$.fragment),t=C(),T(s.$$.fragment),i=C(),T(f.$$.fragment),r=C(),T(u.$$.fragment),m=C(),T(d.$$.fragment),P=C(),T($.$$.fragment),w=C(),T(k.$$.fragment)},l(_){L(e.$$.fragment,_),t=F(_),L(s.$$.fragment,_),i=F(_),L(f.$$.fragment,_),r=F(_),L(u.$$.fragment,_),m=F(_),L(d.$$.fragment,_),P=F(_),L($.$$.fragment,_),w=F(_),L(k.$$.fragment,_)},m(_,N){M(e,_,N),y(_,t,N),M(s,_,N),y(_,i,N),M(f,_,N),y(_,r,N),M(u,_,N),y(_,m,N),M(d,_,N),y(_,P,N),M($,_,N),y(_,w,N),M(k,_,N),D=!0},p(_,N){const Re={};!a&&N&1&&(a=!0,Re.value=_[0].trafficData.flowOneWay,X(()=>a=!1)),e.$set(Re);const Ce={};!l&&N&1&&(l=!0,Ce.value=_[0].trafficData.flowTwoWay,X(()=>l=!1)),s.$set(Ce);const Fe={};!o&&N&1&&(o=!0,Fe.value=_[0].trafficData.flowSharedUse,X(()=>o=!1)),f.$set(Fe);const Ue={};!c&&N&1&&(c=!0,Ue.value=_[0].trafficData.trafficFlow,X(()=>c=!1)),u.$set(Ue);const Ie={};!h&&N&1&&(h=!0,Ie.value=_[0].trafficData.speedLimit,X(()=>h=!1)),d.$set(Ie);const Ne={};!B&&N&1&&(B=!0,Ne.value=_[0].trafficData.observedSpeed,X(()=>B=!1)),$.$set(Ne);const Pe={};!p&&N&1&&(p=!0,Pe.value=_[0].trafficData.streetFunction,X(()=>p=!1)),k.$set(Pe)},i(_){D||(v(e.$$.fragment,_),v(s.$$.fragment,_),v(f.$$.fragment,_),v(u.$$.fragment,_),v(d.$$.fragment,_),v($.$$.fragment,_),v(k.$$.fragment,_),D=!0)},o(_){b(e.$$.fragment,_),b(s.$$.fragment,_),b(f.$$.fragment,_),b(u.$$.fragment,_),b(d.$$.fragment,_),b($.$$.fragment,_),b(k.$$.fragment,_),D=!1},d(_){_&&(g(t),g(i),g(r),g(m),g(P),g(w)),E(e,_),E(s,_),E(f,_),E(u,_),E(d,_),E($,_),E(k,_)}}}function zt(n){let e,a;return e=new _e({props:{label:"Traffic data and additional information",$$slots:{default:[Zt]},$$scope:{ctx:n}}}),{c(){T(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,s){M(e,t,s),a=!0},p(t,[s]){const l={};s&513&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){a||(v(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function ae(n){return n.map(e=>[e,e])}function Kt(n,e,a){let t;ke(n,j,m=>a(0,t=m));let{valid:s}=e;function l(m){n.$$.not_equal(t.trafficData.flowOneWay,m)&&(t.trafficData.flowOneWay=m,j.set(t))}function i(m){n.$$.not_equal(t.trafficData.flowTwoWay,m)&&(t.trafficData.flowTwoWay=m,j.set(t))}function f(m){n.$$.not_equal(t.trafficData.flowSharedUse,m)&&(t.trafficData.flowSharedUse=m,j.set(t))}function o(m){n.$$.not_equal(t.trafficData.trafficFlow,m)&&(t.trafficData.trafficFlow=m,j.set(t))}function r(m){n.$$.not_equal(t.trafficData.speedLimit,m)&&(t.trafficData.speedLimit=m,j.set(t))}function u(m){n.$$.not_equal(t.trafficData.observedSpeed,m)&&(t.trafficData.observedSpeed=m,j.set(t))}function c(m){n.$$.not_equal(t.trafficData.streetFunction,m)&&(t.trafficData.streetFunction=m,j.set(t))}return n.$$set=m=>{"valid"in m&&a(1,s=m.valid)},n.$$.update=()=>{n.$$.dirty&1&&a(1,s=t.trafficData.flowOneWay!=""&&t.trafficData.flowTwoWay!=""&&t.trafficData.flowSharedUse!=""&&t.trafficData.trafficFlow!=""&&t.trafficData.speedLimit!=""&&t.trafficData.observedSpeed!=null&&t.trafficData.streetFunction!="")},[t,s,l,i,f,o,r,u,c]}class xt extends z{constructor(e){super(),K(this,e,Kt,zt,Z,{valid:1})}}function en(n){let e,a="Fill out all data above to continue";return{c(){e=U("p"),e.textContent=a},l(t){e=I(t,"P",{"data-svelte-h":!0}),we(e)!=="svelte-ma95"&&(e.textContent=a)},m(t,s){y(t,e,s)},p:re,i:re,o:re,d(t){t&&g(e)}}}function tn(n){let e,a,t,s;return e=new _e({props:{label:"Desirable Minimum Cross-Section",$$slots:{default:[nn]},$$scope:{ctx:n}}}),t=new _e({props:{label:"Absolute Minimum Cross-Section",$$slots:{default:[an]},$$scope:{ctx:n}}}),{c(){T(e.$$.fragment),a=C(),T(t.$$.fragment)},l(l){L(e.$$.fragment,l),a=F(l),L(t.$$.fragment,l)},m(l,i){M(e,l,i),y(l,a,i),M(t,l,i),s=!0},p(l,i){const f={};i&66&&(f.$$scope={dirty:i,ctx:l}),e.$set(f);const o={};i&66&&(o.$$scope={dirty:i,ctx:l}),t.$set(o)},i(l){s||(v(e.$$.fragment,l),v(t.$$.fragment,l),s=!0)},o(l){b(e.$$.fragment,l),b(t.$$.fragment,l),s=!1},d(l){l&&g(a),E(e,l),E(t,l)}}}function nn(n){let e,a,t;function s(i){n[4](i)}let l={sectionType:"Desirable"};return n[1].desirableMinimumCrossSection!==void 0&&(l.lanesLeftToRight=n[1].desirableMinimumCrossSection),e=new xe({props:l}),J.push(()=>Y(e,"lanesLeftToRight",s)),{c(){T(e.$$.fragment)},l(i){L(e.$$.fragment,i)},m(i,f){M(e,i,f),t=!0},p(i,f){const o={};!a&&f&2&&(a=!0,o.lanesLeftToRight=i[1].desirableMinimumCrossSection,X(()=>a=!1)),e.$set(o)},i(i){t||(v(e.$$.fragment,i),t=!0)},o(i){b(e.$$.fragment,i),t=!1},d(i){E(e,i)}}}function an(n){let e,a,t;function s(i){n[5](i)}let l={sectionType:"Absolute"};return n[1].absoluteMinimumCrossSection!==void 0&&(l.lanesLeftToRight=n[1].absoluteMinimumCrossSection),e=new xe({props:l}),J.push(()=>Y(e,"lanesLeftToRight",s)),{c(){T(e.$$.fragment)},l(i){L(e.$$.fragment,i)},m(i,f){M(e,i,f),t=!0},p(i,f){const o={};!a&&f&2&&(a=!0,o.lanesLeftToRight=i[1].absoluteMinimumCrossSection,X(()=>a=!1)),e.$set(o)},i(i){t||(v(e.$$.fragment,i),t=!0)},o(i){b(e.$$.fragment,i),t=!1},d(i){E(e,i)}}}function sn(n){let e;return{c(){e=G("Reset")},l(a){e=Q(a,"Reset")},m(a,t){y(a,e,t)},d(a){a&&g(e)}}}function ln(n){let e,a,t,s;return e=new ze({props:{$$slots:{default:[sn]},$$scope:{ctx:n}}}),e.$on("click",n[2]),t=new Ut({props:{label:"JSON",value:JSON.stringify(n[1],null,"  "),rows:10}}),{c(){T(e.$$.fragment),a=C(),T(t.$$.fragment)},l(l){L(e.$$.fragment,l),a=F(l),L(t.$$.fragment,l)},m(l,i){M(e,l,i),y(l,a,i),M(t,l,i),s=!0},p(l,i){const f={};i&64&&(f.$$scope={dirty:i,ctx:l}),e.$set(f);const o={};i&2&&(o.value=JSON.stringify(l[1],null,"  ")),t.$set(o)},i(l){s||(v(e.$$.fragment,l),v(t.$$.fragment,l),s=!0)},o(l){b(e.$$.fragment,l),b(t.$$.fragment,l),s=!1},d(l){l&&g(a),E(e,l),E(t,l)}}}function rn(n){let e,a,t=`<ol class="govuk-breadcrumbs__list"><li class="govuk-breadcrumbs__list-item"><a class="govuk-breadcrumbs__link" href="${Be}/">Tools</a></li> <li class="govuk-breadcrumbs__list-item"><a class="govuk-breadcrumbs__link" href="${Be}/cross_section">Route cross-section</a></li> <li class="govuk-breadcrumbs__list-item">Proposed Cross-Sections</li></ol>`,s,l,i,f,o,r,u,c,m;function d(w){n[3](w)}let h={};n[0]!==void 0&&(h.valid=n[0]),l=new xt({props:h}),J.push(()=>Y(l,"valid",d));const P=[tn,en],$=[];function B(w,k){return w[0]?0:1}return o=B(n),r=$[o]=P[o](n),c=new _e({props:{label:"Debug",$$slots:{default:[ln]},$$scope:{ctx:n}}}),{c(){e=U("div"),a=U("div"),a.innerHTML=t,s=C(),T(l.$$.fragment),f=C(),r.c(),u=C(),T(c.$$.fragment),this.h()},l(w){e=I(w,"DIV",{class:!0});var k=W(e);a=I(k,"DIV",{class:!0,"data-svelte-h":!0}),we(a)!=="svelte-7mvyxb"&&(a.innerHTML=t),s=F(k),L(l.$$.fragment,k),f=F(k),r.l(k),u=F(k),L(c.$$.fragment,k),k.forEach(g),this.h()},h(){R(a,"class","govuk-breadcrumbs"),R(e,"class","govuk-prose")},m(w,k){y(w,e,k),O(e,a),O(e,s),M(l,e,null),O(e,f),$[o].m(e,null),O(e,u),M(c,e,null),m=!0},p(w,[k]){const p={};!i&&k&1&&(i=!0,p.valid=w[0],X(()=>i=!1)),l.$set(p);let D=o;o=B(w),o===D?$[o].p(w,k):(Ge(),b($[D],1,1,()=>{$[D]=null}),Qe(),r=$[o],r?r.p(w,k):(r=$[o]=P[o](w),r.c()),v(r,1),r.m(e,u));const q={};k&66&&(q.$$scope={dirty:k,ctx:w}),c.$set(q)},i(w){m||(v(l.$$.fragment,w),v(r),v(c.$$.fragment,w),m=!0)},o(w){b(l.$$.fragment,w),b(r),b(c.$$.fragment,w),m=!1},d(w){w&&g(e),E(l),$[o].d(),E(c)}}}function on(n,e,a){let t;ke(n,j,r=>a(1,t=r));let s=!1;function l(){ot(j,t=Ke(),t)}function i(r){s=r,a(0,s)}function f(r){n.$$.not_equal(t.desirableMinimumCrossSection,r)&&(t.desirableMinimumCrossSection=r,j.set(t))}function o(r){n.$$.not_equal(t.absoluteMinimumCrossSection,r)&&(t.absoluteMinimumCrossSection=r,j.set(t))}return[s,t,l,i,f,o]}class dn extends z{constructor(e){super(),K(this,e,on,rn,Z,{})}}export{dn as component};
