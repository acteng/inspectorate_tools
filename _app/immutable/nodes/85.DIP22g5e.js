import{s as y,e as m,a as S,t as P,c as h,p as v,g as D,b as L,d as $,f as p,i as f,h as k,j as E,n as C,k as W}from"../chunks/scheduler.BBS-fkhU.js";import{S as R,i as T}from"../chunks/index.B8H3ypVf.js";import{s as A}from"../chunks/data.CbGUpOzd.js";import{g as I}from"../chunks/results.DK57EWvj.js";import{p as x,c as O}from"../chunks/lists.BnA5ucEg.js";function d(t){let e=I(t),o=t.summary.checkType=="street",n=t.summary.checkType=="path",i={Safety:"Sa",Accessibility:"Ac",Comfort:"Cf",Directness:"Di",Attractiveness:"At",Cohesion:"Co",overall:"To"},r={"Social activity":"SA","Personal security":"PS","Character and legibility":"CL",Environment:"En",overall:"To"};return[..._(t),...j(t),...g("SA",0,t.safetyCheck),...g("ST",16,t.streetCheck),...g("SP",0,t.streetPlacemakingCheck),...g("PA",16,t.pathCheck),...g("PP",16,t.pathPlacemakingCheck),...M(t),...b(t),...a("ST-LOS",[...e.levelOfService,e.overall],o,i),...a("ST-LOS",e.byMode,o,{Walking:"Wa",Wheeling:"Wh",Cycling:"Cy"}),...a("SP-LOS",[...e.placemakingCategories,e.placemakingOverall],o,r),...a("PA-LOS",[...e.levelOfService,e.overall],n,i),...a("PA-LOS",e.byMode,n,{Walking:"Wa",Wheeling:"Wh",Cycling:"Cy","Horse Riding":"HR"}),...a("PP-LOS",[...e.placemakingCategories,e.placemakingOverall],n,r),...J(t,e),...w(t),...G(t),...q()]}function _(t){let e=t.summary;return[["Scheme Ref",e.schemeReference],["Date of Design Review",e.dateDesignReview],["Scheme Name",e.schemeName],["Authority",e.authority],["Transport/ Combined Authority",e.transportOrCombinedAuthority],["Region",e.region],["Funding Programme",e.fundingProgramme],["Design Stage",e.designStage],["Funding Conditions",e.fundingConditions],["Inspector",e.inspectorEmail],["RouteLength",e.totalRouteLengthKm],["RouteFileLength",e.assessedRouteLengthKm],["Notes",e.notes],["Tool","Route Check online-alpha"],["Sub-tool",e.checkType=="street"?"Street Check":"Path Check"]]}function j(t){let e=[];for(let[o,n]of t.policyCheck.entries())e.push([`PC${u(o)}-E`,n.existing]),e.push([`PC${u(o)}-D`,n.proposed]);return e}function g(t,e,o){let n=[];for(let i=0;i<o.existingScores.length;i++)n.push([`${t}${u(i+e)}-E`,o.existingScores[i]]),n.push([`${t}${u(i+e)}-D`,o.proposedScores[i]]);return n}function u(t){return(t+1).toString().padStart(2,"0")}function M(t){let e={existing:t.policyConflictLog.filter(o=>o.stage=="Existing").length,designed:t.policyConflictLog.filter(o=>o.stage=="Design").length,removed:t.policyConflictLog.filter(o=>o.resolved=="Yes").length};return[["PC-E",e.existing],["PC-D",e.designed],["PC-Rem",e.removed],["PC-Int",e.designed],["PC-Tot",e.designed+e.existing-e.removed]]}function b(t){let e={existing:t.criticalIssues.filter(o=>o.stage=="Existing").length,designed:t.criticalIssues.filter(o=>o.stage=="Design").length,removed:t.criticalIssues.filter(o=>o.resolved=="Yes").length};return[["SA-E",e.existing],["SA-D",e.designed],["SA-Rem",e.removed],["SA-Int",e.designed],["SA-Tot",e.designed+e.existing-e.removed]]}function a(t,e,o,n){let i=[];for(let r of e){let s=n[r.category];i.push([`${t}-${s}-E`,o?"":`${Math.round(r.existing.scorePercent)}%`]),i.push([`${t}-${s}-D`,o?"":`${Math.round(r.proposed.scorePercent)}%`])}return i}function J(t,e){let o=[],n=12;for(let i=1;i<=n;i++)for(let[r,s]of[["walkingWheeling","WW"],["cycling","Cy"],["total","To"]])o.push([`J${i}-LOS-${s}-E`,i<=e.jat.length?e.jat[i-1][r].existing:""]),o.push([`J${i}-LOS-${s}-D`,i<=e.jat.length?e.jat[i-1][r].proposed:""]);for(let i=1;i<=n;i++)i<=e.jat.length?o.push([`J${i}-Arms`,t.jat[i-1].proposed.arms.length]):o.push([`J${i}-Arms`,0]);return o}function N(t,e){let o=t.policyConflictLog[e],n=0;for(let r=0;r<=e;r++)t.policyConflictLog[r].conflict==o.conflict&&n++;return[t.summary.schemeReference,`P${o.conflict.padStart(3,"0")}`,`${n.toString().padStart(2,"0")}P`].join("_")}function w(t){let e=[],o=35;for(let n=0;n<o;n++){let i;if(n<t.policyConflictLog.length){let r=t.policyConflictLog[n];i={Ref:N(t,n),Typ:x.find(s=>s[0]==r.conflict)[1],Sta:r.stage,LaL:`${r.point[1]}, ${r.point[0]}`,Loc:r.locationName,Res:r.resolved,Com:r.notes}}else i={Ref:"",Typ:"",Sta:"",LaL:"",Loc:"",Res:"",Com:""};for(let[r,s]of Object.entries(i))e.push([`${u(n)}PC${r}`,s])}return e}function F(t,e){let o=t.criticalIssues[e],n=0;for(let r=0;r<=e;r++)t.criticalIssues[r].criticalIssue==o.criticalIssue&&n++;return[t.summary.schemeReference,`SA${o.criticalIssue.padStart(2,"0")}`,`${n.toString().padStart(2,"0")}P`].join("_")}function G(t){let e=[],o=35;for(let n=0;n<o;n++){let i;if(n<t.criticalIssues.length){let r=t.criticalIssues[n];i={Ref:F(t,n),Typ:O.find(s=>s[0]==r.criticalIssue)[1],Sta:r.stage,LaL:`${r.point[1]}, ${r.point[0]}`,Loc:r.locationName,Res:r.resolved,Com:r.notes}}else i={Ref:"",Typ:"",Sta:"",LaL:"",Loc:"",Res:"",Com:""};for(let[r,s]of Object.entries(i))e.push([`${u(n)}SA${r}`,s])}return e}function q(){return["Area-E","Area-D","Po-WW-E","Po-WW-D","Po-Cy-E","Po-Cy-D","Cr-WW-E","Cr-WW-D","Cr-Cy-E","Cr-Cy-D","Pe-WW-D","Pe-WW-E","Pe-Cy-D","Pe-Cy-E","MD-WW-D","MD-WW-E","MD-Cy-D","MD-Cy-E","MT-E","MT-D","PT-E","PT-D","GI-E","GI-D","IT-E","IT-D","EP-E","EP-D","TM-Comments","AC-Comments"].map(e=>[e,""])}function B(t){let e,o="TODO. Below is the start to the DALOG output.",n,i,r=JSON.stringify(d(t[0]),null,"  ")+"",s;return{c(){e=m("p"),e.textContent=o,n=S(),i=m("pre"),s=P(r)},l(l){e=h(l,"P",{"data-svelte-h":!0}),v(e)!=="svelte-10g90aq"&&(e.textContent=o),n=D(l),i=h(l,"PRE",{});var c=L(i);s=$(c,r),c.forEach(p)},m(l,c){f(l,e,c),f(l,n,c),f(l,i,c),k(i,s)},p(l,[c]){c&1&&r!==(r=JSON.stringify(d(l[0]),null,"  ")+"")&&E(s,r)},i:C,o:C,d(l){l&&(p(e),p(n),p(i))}}}function H(t,e,o){let n;return W(t,A,i=>o(0,n=i)),[n]}class V extends R{constructor(e){super(),T(this,e,H,B,y,{})}}export{V as component};
