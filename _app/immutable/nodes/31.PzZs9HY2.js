import{s as ue,a as P,e as V,g as R,c as A,o as Z,i as w,A as We,z as ve,f as g,y as Ye,v as z,w as K,l as ut,t as I,b as J,d as q,x as oe,S as be,h as C,a7 as ct,j as x,u as pt,p as dt,q as mt,k as ge,P as Ke,B as ae,m as Fe,r as ht,n as $e,U as _t,R as Qe}from"../chunks/scheduler.m7IKQRbw.js";import{S as ce,i as pe,c as E,b as N,m as B,t as b,a as y,d as O,e as Q,g as re,f as se}from"../chunks/index.C-QTsuEM.js";import{e as _e,u as Ze,o as xe}from"../chunks/each.BxQYadko.js";import"../chunks/paths.qh-Nf8h4.js";import{S as fe,W as et}from"../chunks/WarningButton.Db2ClVAa.js";import{W as gt}from"../chunks/WarningText.B5EpuI9Z.js";import{S as de}from"../chunks/Select.Dl617Kt1.js";import{E as $t}from"../chunks/ExternalLink.D-xtQx-X.js";/* empty css                                                               */import{s as G,a as tt,b as bt}from"../chunks/data.COMa0n41.js";import{a as it,n as vt,g as wt,c as kt}from"../chunks/logic.Ct59EqJd.js";import{D as yt,C as we}from"../chunks/DefaultButton.l38qR7w4.js";import{E as nt}from"../chunks/ErrorMessage.DrQvb2Hi.js";import{T as Ft}from"../chunks/TextInput.N5lXdWVz.js";import{D as Dt}from"../chunks/DecimalInput.DvKmhbZy.js";import{F as St,v as rt}from"../chunks/FormElement.Dz2mRAiA.js";import{p as he}from"../chunks/index.dhkQJK72.js";function Lt(r){let e,t,i,n,l,a,o;return e=new nt({props:{errorMessage:r[5](r[2])}}),{c(){E(e.$$.fragment),t=P(),i=V("input"),this.h()},l(s){N(e.$$.fragment,s),t=R(s),i=A(s,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){Z(i,"type","text"),Z(i,"inputmode","numeric"),Z(i,"class",n=`govuk-input govuk-input--width-${r[1]}`),Z(i,"id",r[3])},m(s,f){B(e,s,f),w(s,t,f),w(s,i,f),We(i,r[2]),l=!0,a||(o=[ve(i,"input",r[9]),ve(i,"change",r[4])],a=!0)},p(s,f){const _={};f&4&&(_.errorMessage=s[5](s[2])),e.$set(_),(!l||f&2&&n!==(n=`govuk-input govuk-input--width-${s[1]}`))&&Z(i,"class",n),f&4&&i.value!==s[2]&&We(i,s[2])},i(s){l||(b(e.$$.fragment,s),l=!0)},o(s){y(e.$$.fragment,s),l=!1},d(s){s&&(g(t),g(i)),O(e,s),a=!1,Ye(o)}}}function Tt(r){let e,t;return e=new St({props:{label:r[0],id:r[3],$$slots:{default:[Lt]},$$scope:{ctx:r}}}),{c(){E(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,n){B(e,i,n),t=!0},p(i,[n]){const l={};n&1&&(l.label=i[0]),n&1030&&(l.$$scope={dirty:n,ctx:i}),e.$set(l)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function Ct(r,e,t){let{label:i}=e,{value:n}=e,{width:l}=e,{min:a=void 0}=e,{max:o=void 0}=e,s=n==null?void 0:n.toString(),f=rt();function _(){t(6,n=s==null?void 0:parseInt(s,10))}function u(c){if(c==""||c==null)return"";if(c.includes("."))return"Please enter a number without decimals";let d=Number(c);return isNaN(d)?"Please enter a valid number":a!=null&&d<a?`Please enter a number that's at least ${a};`:o!=null&&d>o?`Please enter a number that's at most ${o};`:""}function p(){s=this.value,t(2,s)}return r.$$set=c=>{"label"in c&&t(0,i=c.label),"value"in c&&t(6,n=c.value),"width"in c&&t(1,l=c.width),"min"in c&&t(7,a=c.min),"max"in c&&t(8,o=c.max)},[i,l,s,f,_,u,n,a,o,p]}class Et extends ce{constructor(e){super(),pe(this,e,Ct,Tt,ue,{label:0,value:6,width:1,min:7,max:8})}}function Nt(r){let e,t,i;function n(a){r[9](a)}let l={label:r[0],hint:r[1],choices:r[5],emptyOption:r[2],disabled:r[3]};return r[4]!==void 0&&(l.value=r[4]),e=new de({props:l}),z.push(()=>Q(e,"value",n)),e.$on("change",r[6]),{c(){E(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,o){B(e,a,o),i=!0},p(a,[o]){const s={};o&1&&(s.label=a[0]),o&2&&(s.hint=a[1]),o&32&&(s.choices=a[5]),o&4&&(s.emptyOption=a[2]),o&8&&(s.disabled=a[3]),!t&&o&16&&(t=!0,s.value=a[4],K(()=>t=!1)),e.$set(s)},i(a){i||(b(e.$$.fragment,a),i=!0)},o(a){y(e.$$.fragment,a),i=!1},d(a){O(e,a)}}}function Bt(r){return r.map(e=>[JSON.stringify(e[0]),e[1]])}function Ot(r,e,t){let i,n,{label:l}=e,{hint:a=""}=e,{choices:o}=e,{emptyOption:s=!1}=e,{disabled:f=!1}=e,{value:_}=e;function u(){t(7,_=n==""?"":JSON.parse(n))}function p(c){n=c,t(4,n),t(7,_)}return r.$$set=c=>{"label"in c&&t(0,l=c.label),"hint"in c&&t(1,a=c.hint),"choices"in c&&t(8,o=c.choices),"emptyOption"in c&&t(2,s=c.emptyOption),"disabled"in c&&t(3,f=c.disabled),"value"in c&&t(7,_=c.value)},r.$$.update=()=>{r.$$.dirty&256&&t(5,i=Bt(o)),r.$$.dirty&128&&t(4,n=JSON.stringify(_))},[l,a,s,f,n,i,u,_,o,p]}class Wt extends ce{constructor(e){super(),pe(this,e,Ot,Nt,ue,{label:0,hint:1,choices:8,emptyOption:2,disabled:3,value:7})}}function Pe(r){let e,t;return e=new fe({props:{$$slots:{default:[Pt]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){E(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,n){B(e,i,n),t=!0},p(i,n){const l={};n&128&&(l.$$scope={dirty:n,ctx:i}),e.$set(l)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function Pt(r){let e;return{c(){e=I("X")},l(t){e=q(t,"X")},m(t,i){w(t,e,i)},d(t){t&&g(e)}}}function Rt(r){let e,t,i,n,l,a,o,s,f,_,u=r[2]&&Pe(r);const p=r[4].default,c=ut(p,r,r[7],null);return{c(){e=V("div"),t=V("div"),i=V("div"),n=V("h1"),l=I(r[1]),a=P(),u&&u.c(),o=P(),c&&c.c(),this.h()},l(d){e=A(d,"DIV",{class:!0});var m=J(e);t=A(m,"DIV",{class:!0});var v=J(t);i=A(v,"DIV",{style:!0});var $=J(i);n=A($,"H1",{class:!0});var S=J(n);l=q(S,r[1]),S.forEach(g),a=R($),u&&u.l($),$.forEach(g),o=R(v),c&&c.l(v),v.forEach(g),m.forEach(g),this.h()},h(){Z(n,"class","govuk-heading-l"),oe(i,"display","flex"),oe(i,"justify-content","space-between"),Z(t,"class","content centered-fullscreen svelte-1bl3d9w"),Z(e,"class","background svelte-1bl3d9w"),be(e,"open",r[0]),be(e,"closed",!r[0])},m(d,m){w(d,e,m),C(e,t),C(t,i),C(i,n),C(n,l),C(i,a),u&&u.m(i,null),C(t,o),c&&c.m(t,null),s=!0,f||(_=[ve(t,"click",ct(Mt)),ve(e,"click",r[6])],f=!0)},p(d,[m]){(!s||m&2)&&x(l,d[1]),d[2]?u?(u.p(d,m),m&4&&b(u,1)):(u=Pe(d),u.c(),b(u,1),u.m(i,null)):u&&(re(),y(u,1,1,()=>{u=null}),se()),c&&c.p&&(!s||m&128)&&pt(c,p,d,d[7],s?mt(p,d[7],m,null):dt(d[7]),null),(!s||m&1)&&be(e,"open",d[0]),(!s||m&1)&&be(e,"closed",!d[0])},i(d){s||(b(u),b(c,d),s=!0)},o(d){y(u),y(c,d),s=!1},d(d){d&&g(e),u&&u.d(),c&&c.d(d),f=!1,Ye(_)}}}const Mt=()=>null;function It(r,e,t){let{$$slots:i={},$$scope:n}=e,{title:l}=e,{open:a=!1}=e,{displayEscapeButton:o=!0}=e,{canCloseByClickingBackground:s=!0}=e;const f=()=>t(0,a=!1),_=()=>{s&&t(0,a=!1)};return r.$$set=u=>{"title"in u&&t(1,l=u.title),"open"in u&&t(0,a=u.open),"displayEscapeButton"in u&&t(2,o=u.displayEscapeButton),"canCloseByClickingBackground"in u&&t(3,s=u.canCloseByClickingBackground),"$$scope"in u&&t(7,n=u.$$scope)},[a,l,o,s,i,f,_,n]}class qt extends ce{constructor(e){super(),pe(this,e,It,Rt,ue,{title:1,open:0,displayEscapeButton:2,canCloseByClickingBackground:3})}}function ke(r){return typeof r=="object"?[]:Vt[r]}let Vt={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",ee(76)],["LTN 1/20 Figure 4.1 pp. 33",ee(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",ee(43)],["LTN 1/20 Figure 4.1 pp. 33",ee(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ee(43)],["LTN 1/20 Figure 4.1 pp. 33",ee(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ee(43)],["LTN 1/20 Figure 4.1 pp. 33",ee(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",ee(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",ee(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",ee(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",ee(54)]]};function ee(r){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${r}`}function ye(r,e){let t=it(e.speedLimit,e.observedSpeed);switch(r){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&t==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&t==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Re(r,e,t){const i=r.slice();return i[16]=e[t][0],i[17]=e[t][1],i}function Me(r){let e,t,i=r[5][0].toFixed(2)+"",n,l,a,o,s=r[5][1].toFixed(2)+"",f,_,u,p,c,d,m,v,$,S,D=ke(r[0]).length>0,T,h=ye(r[0],r[3].proposed.trafficData),F,M;p=new fe({props:{disabled:r[1],$$slots:{default:[At]},$$scope:{ctx:r}}}),p.$on("click",r[11]),d=new et({props:{$$slots:{default:[Ut]},$$scope:{ctx:r}}}),d.$on("click",r[12]),v=new fe({props:{disabled:r[2],$$slots:{default:[jt]},$$scope:{ctx:r}}}),v.$on("click",r[13]);let U=r[6].warning!==""&&Ie(r),j=D&&qe(r),H=h&&Ae(r);return{c(){e=V("p"),t=I("Desirable minimum width (m): "),n=I(i),l=P(),a=V("p"),o=I("Absolute minimum width (m): "),f=I(s),_=P(),u=V("div"),E(p.$$.fragment),c=P(),E(d.$$.fragment),m=P(),E(v.$$.fragment),$=P(),U&&U.c(),S=P(),j&&j.c(),T=P(),H&&H.c(),F=ae(),this.h()},l(k){e=A(k,"P",{});var W=J(e);t=q(W,"Desirable minimum width (m): "),n=q(W,i),W.forEach(g),l=R(k),a=A(k,"P",{});var le=J(a);o=q(le,"Absolute minimum width (m): "),f=q(le,s),le.forEach(g),_=R(k),u=A(k,"DIV",{style:!0,class:!0});var te=J(u);N(p.$$.fragment,te),c=R(te),N(d.$$.fragment,te),m=R(te),N(v.$$.fragment,te),te.forEach(g),$=R(k),U&&U.l(k),S=R(k),j&&j.l(k),T=R(k),H&&H.l(k),F=ae(),this.h()},h(){oe(u,"display","flex"),oe(u,"justify-content","space-between"),Z(u,"class","svelte-jig4ga")},m(k,W){w(k,e,W),C(e,t),C(e,n),w(k,l,W),w(k,a,W),C(a,o),C(a,f),w(k,_,W),w(k,u,W),B(p,u,null),C(u,c),B(d,u,null),C(u,m),B(v,u,null),w(k,$,W),U&&U.m(k,W),w(k,S,W),j&&j.m(k,W),w(k,T,W),H&&H.m(k,W),w(k,F,W),M=!0},p(k,W){(!M||W&32)&&i!==(i=k[5][0].toFixed(2)+"")&&x(n,i),(!M||W&32)&&s!==(s=k[5][1].toFixed(2)+"")&&x(f,s);const le={};W&2&&(le.disabled=k[1]),W&1048576&&(le.$$scope={dirty:W,ctx:k}),p.$set(le);const te={};W&1048576&&(te.$$scope={dirty:W,ctx:k}),d.$set(te);const me={};W&4&&(me.disabled=k[2]),W&1048576&&(me.$$scope={dirty:W,ctx:k}),v.$set(me),k[6].warning!==""?U?(U.p(k,W),W&64&&b(U,1)):(U=Ie(k),U.c(),b(U,1),U.m(S.parentNode,S)):U&&(re(),y(U,1,1,()=>{U=null}),se()),W&1&&(D=ke(k[0]).length>0),D?j?(j.p(k,W),W&1&&b(j,1)):(j=qe(k),j.c(),b(j,1),j.m(T.parentNode,T)):j&&(re(),y(j,1,1,()=>{j=null}),se()),W&9&&(h=ye(k[0],k[3].proposed.trafficData)),h?H?H.p(k,W):(H=Ae(k),H.c(),H.m(F.parentNode,F)):H&&(H.d(1),H=null)},i(k){M||(b(p.$$.fragment,k),b(d.$$.fragment,k),b(v.$$.fragment,k),b(U),b(j),M=!0)},o(k){y(p.$$.fragment,k),y(d.$$.fragment,k),y(v.$$.fragment,k),y(U),y(j),M=!1},d(k){k&&(g(e),g(l),g(a),g(_),g(u),g($),g(S),g(T),g(F)),O(p),O(d),O(v),U&&U.d(k),j&&j.d(k),H&&H.d(k)}}}function At(r){let e;return{c(){e=I("←")},l(t){e=q(t,"←")},m(t,i){w(t,e,i)},d(t){t&&g(e)}}}function Ut(r){let e;return{c(){e=I("Delete")},l(t){e=q(t,"Delete")},m(t,i){w(t,e,i)},d(t){t&&g(e)}}}function jt(r){let e;return{c(){e=I("→")},l(t){e=q(t,"→")},m(t,i){w(t,e,i)},d(t){t&&g(e)}}}function Ie(r){let e,t;return e=new gt({props:{$$slots:{default:[Ht]},$$scope:{ctx:r}}}),{c(){E(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,n){B(e,i,n),t=!0},p(i,n){const l={};n&1048640&&(l.$$scope={dirty:n,ctx:i}),e.$set(l)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function Jt(r){let e,t=r[6].functionsToDispatch.length>1?"s":"",i;return{c(){e=I("Add buffer"),i=I(t)},l(n){e=q(n,"Add buffer"),i=q(n,t)},m(n,l){w(n,e,l),w(n,i,l)},p(n,l){l&64&&t!==(t=n[6].functionsToDispatch.length>1?"s":"")&&x(i,t)},d(n){n&&(g(e),g(i))}}}function Ht(r){let e=r[6].warning+"",t,i,n,l,a,o;return a=new fe({props:{$$slots:{default:[Jt]},$$scope:{ctx:r}}}),a.$on("click",r[14]),{c(){t=I(e),i=P(),n=V("br"),l=P(),E(a.$$.fragment)},l(s){t=q(s,e),i=R(s),n=A(s,"BR",{}),l=R(s),N(a.$$.fragment,s)},m(s,f){w(s,t,f),w(s,i,f),w(s,n,f),w(s,l,f),B(a,s,f),o=!0},p(s,f){(!o||f&64)&&e!==(e=s[6].warning+"")&&x(t,e);const _={};f&1048640&&(_.$$scope={dirty:f,ctx:s}),a.$set(_)},i(s){o||(b(a.$$.fragment,s),o=!0)},o(s){y(a.$$.fragment,s),o=!1},d(s){s&&(g(t),g(i),g(n),g(l)),O(a,s)}}}function qe(r){let e,t="References",i,n,l,a=_e(ke(r[0])),o=[];for(let f=0;f<a.length;f+=1)o[f]=Ve(Re(r,a,f));const s=f=>y(o[f],1,1,()=>{o[f]=null});return{c(){e=V("u"),e.textContent=t,i=I(`
      :
      `),n=V("ul");for(let f=0;f<o.length;f+=1)o[f].c()},l(f){e=A(f,"U",{"data-svelte-h":!0}),Fe(e)!=="svelte-fk7cdq"&&(e.textContent=t),i=q(f,`
      :
      `),n=A(f,"UL",{});var _=J(n);for(let u=0;u<o.length;u+=1)o[u].l(_);_.forEach(g)},m(f,_){w(f,e,_),w(f,i,_),w(f,n,_);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(n,null);l=!0},p(f,_){if(_&1){a=_e(ke(f[0]));let u;for(u=0;u<a.length;u+=1){const p=Re(f,a,u);o[u]?(o[u].p(p,_),b(o[u],1)):(o[u]=Ve(p),o[u].c(),b(o[u],1),o[u].m(n,null))}for(re(),u=a.length;u<o.length;u+=1)s(u);se()}},i(f){if(!l){for(let _=0;_<a.length;_+=1)b(o[_]);l=!0}},o(f){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)y(o[_]);l=!1},d(f){f&&(g(e),g(i),g(n)),ht(o,f)}}}function Gt(r){let e,t=r[16]+"",i;return{c(){e=V("li"),i=I(t)},l(n){e=A(n,"LI",{});var l=J(e);i=q(l,t),l.forEach(g)},m(n,l){w(n,e,l),C(e,i)},p(n,l){l&1&&t!==(t=n[16]+"")&&x(i,t)},i:$e,o:$e,d(n){n&&g(e)}}}function Xt(r){let e,t,i;return t=new $t({props:{href:r[17],$$slots:{default:[zt]},$$scope:{ctx:r}}}),{c(){e=V("li"),E(t.$$.fragment)},l(n){e=A(n,"LI",{});var l=J(e);N(t.$$.fragment,l),l.forEach(g)},m(n,l){w(n,e,l),B(t,e,null),i=!0},p(n,l){const a={};l&1&&(a.href=n[17]),l&1048577&&(a.$$scope={dirty:l,ctx:n}),t.$set(a)},i(n){i||(b(t.$$.fragment,n),i=!0)},o(n){y(t.$$.fragment,n),i=!1},d(n){n&&g(e),O(t)}}}function zt(r){let e=r[16]+"",t;return{c(){t=I(e)},l(i){t=q(i,e)},m(i,n){w(i,t,n)},p(i,n){n&1&&e!==(e=i[16]+"")&&x(t,e)},d(i){i&&g(t)}}}function Ve(r){let e,t,i,n;const l=[Xt,Gt],a=[];function o(s,f){return s[17]?0:1}return e=o(r),t=a[e]=l[e](r),{c(){t.c(),i=ae()},l(s){t.l(s),i=ae()},m(s,f){a[e].m(s,f),w(s,i,f),n=!0},p(s,f){let _=e;e=o(s),e===_?a[e].p(s,f):(re(),y(a[_],1,1,()=>{a[_]=null}),se(),t=a[e],t?t.p(s,f):(t=a[e]=l[e](s),t.c()),b(t,1),t.m(i.parentNode,i))},i(s){n||(b(t),n=!0)},o(s){y(t),n=!1},d(s){s&&g(i),a[e].d(s)}}}function Ae(r){let e,t="Guidance",i,n,l=ye(r[0],r[3].proposed.trafficData)+"",a;return{c(){e=V("u"),e.textContent=t,i=I(`
      :
      `),n=V("p"),a=I(l),this.h()},l(o){e=A(o,"U",{"data-svelte-h":!0}),Fe(e)!=="svelte-qh7mhq"&&(e.textContent=t),i=q(o,`
      :
      `),n=A(o,"P",{style:!0});var s=J(n);a=q(s,l),s.forEach(g),this.h()},h(){oe(n,"max-width","400px")},m(o,s){w(o,e,s),w(o,i,s),w(o,n,s),C(n,a)},p(o,s){s&9&&l!==(l=ye(o[0],o[3].proposed.trafficData)+"")&&x(a,l)},d(o){o&&(g(e),g(i),g(n))}}}function Yt(r){let e,t,i,n,l;function a(f){r[10](f)}let o={label:"Street feature type",emptyOption:!0,choices:r[4]};r[0]!==void 0&&(o.value=r[0]),t=new Wt({props:o}),z.push(()=>Q(t,"value",a));let s=r[0]&&Me(r);return{c(){e=V("div"),E(t.$$.fragment),n=P(),s&&s.c(),this.h()},l(f){e=A(f,"DIV",{style:!0,class:!0});var _=J(e);N(t.$$.fragment,_),n=R(_),s&&s.l(_),_.forEach(g),this.h()},h(){oe(e,"width","400px"),Z(e,"class","svelte-jig4ga")},m(f,_){w(f,e,_),B(t,e,null),C(e,n),s&&s.m(e,null),l=!0},p(f,[_]){const u={};_&16&&(u.choices=f[4]),!i&&_&1&&(i=!0,u.value=f[0],K(()=>i=!1)),t.$set(u),f[0]?s?(s.p(f,_),_&1&&b(s,1)):(s=Me(f),s.c(),b(s,1),s.m(e,null)):s&&(re(),y(s,1,1,()=>{s=null}),se())},i(f){l||(b(t.$$.fragment,f),b(s),l=!0)},o(f){y(t.$$.fragment,f),y(s),l=!1},d(f){f&&g(e),O(t),s&&s.d()}}}function Kt(r,e,t){let i,n,l,a;ge(r,G,D=>t(3,a=D));let{value:o}=e,{isFirst:s}=e,{isLast:f}=e,{leftFeature:_}=e,{rightFeature:u}=e,p=Ke();function c(D){let T=tt.map(h=>[h,h]);for(let[h,F]of Object.entries(D))T.push([{custom:h},`Custom: ${F.name}`]);return T}function d(D){o=D,t(0,o)}const m=()=>p("moveLeft"),v=()=>p("delete"),$=()=>p("moveRight"),S=()=>{i.functionsToDispatch.forEach(D=>{p(D)})};return r.$$set=D=>{"value"in D&&t(0,o=D.value),"isFirst"in D&&t(1,s=D.isFirst),"isLast"in D&&t(2,f=D.isLast),"leftFeature"in D&&t(8,_=D.leftFeature),"rightFeature"in D&&t(9,u=D.rightFeature)},r.$$.update=()=>{r.$$.dirty&769&&t(6,i=o?vt(o,_,u):{warning:"",functionsToDispatch:[]}),r.$$.dirty&777&&t(5,n=o?wt(o,a.proposed.trafficData,a.proposed.customFeatures,_,u):[0,0]),r.$$.dirty&8&&t(4,l=c(a.proposed.customFeatures))},[o,s,f,a,l,n,i,p,_,u,d,m,v,$,S]}class Qt extends ce{constructor(e){super(),pe(this,e,Kt,Yt,ue,{value:0,isFirst:1,isLast:2,leftFeature:8,rightFeature:9})}}function Ue(r,e,t){const i=r.slice();return i[18]=e[t],i[19]=e,i[20]=t,i}function Zt(r){let e;return{c(){e=I("Add feature")},l(t){e=q(t,"Add feature")},m(t,i){w(t,e,i)},d(t){t&&g(e)}}}function je(r,e){let t,i,n,l;function a(c){e[10](c,e[18],e[19],e[20])}function o(){return e[11](e[20])}function s(){return e[12](e[20])}function f(){return e[13](e[20])}function _(){return e[14](e[20])}function u(){return e[15](e[20])}let p={isFirst:e[20]==0,isLast:e[20]==e[0].length-1,leftFeature:e[20]==0?"":e[0][e[20]-1],rightFeature:e[20]==e[0].length-1?"":e[0][e[20]+1]};return e[18]!==void 0&&(p.value=e[18]),i=new Qt({props:p}),z.push(()=>Q(i,"value",a)),i.$on("delete",o),i.$on("moveLeft",s),i.$on("moveRight",f),i.$on("addLeftBuffer",_),i.$on("addRightBuffer",u),{key:r,first:null,c(){t=ae(),E(i.$$.fragment),this.h()},l(c){t=ae(),N(i.$$.fragment,c),this.h()},h(){this.first=t},m(c,d){w(c,t,d),B(i,c,d),l=!0},p(c,d){e=c;const m={};d&1&&(m.isFirst=e[20]==0),d&1&&(m.isLast=e[20]==e[0].length-1),d&1&&(m.leftFeature=e[20]==0?"":e[0][e[20]-1]),d&1&&(m.rightFeature=e[20]==e[0].length-1?"":e[0][e[20]+1]),!n&&d&1&&(n=!0,m.value=e[18],K(()=>n=!1)),i.$set(m)},i(c){l||(b(i.$$.fragment,c),l=!0)},o(c){y(i.$$.fragment,c),l=!1},d(c){c&&g(t),O(i,c)}}}function xt(r){let e,t,i,n,l,a=r[2][0].toFixed(2)+"",o,s,f,_,u,p=r[2][1].toFixed(2)+"",c,d,m,v=[],$=new Map,S;e=new fe({props:{$$slots:{default:[Zt]},$$scope:{ctx:r}}}),e.$on("click",r[3]);let D=_e(r[0]);const T=h=>h[20];for(let h=0;h<D.length;h+=1){let F=Ue(r,D,h),M=T(F);$.set(M,v[h]=je(M,F))}return{c(){E(e.$$.fragment),t=P(),i=V("p"),n=I("Desirable minimum total width required (m): "),l=V("b"),o=I(a),s=P(),f=V("p"),_=I("Absolute minimum total width required (m): "),u=V("b"),c=I(p),d=P(),m=V("div");for(let h=0;h<v.length;h+=1)v[h].c();this.h()},l(h){N(e.$$.fragment,h),t=R(h),i=A(h,"P",{});var F=J(i);n=q(F,"Desirable minimum total width required (m): "),l=A(F,"B",{});var M=J(l);o=q(M,a),M.forEach(g),F.forEach(g),s=R(h),f=A(h,"P",{});var U=J(f);_=q(U,"Absolute minimum total width required (m): "),u=A(U,"B",{});var j=J(u);c=q(j,p),j.forEach(g),U.forEach(g),d=R(h),m=A(h,"DIV",{style:!0});var H=J(m);for(let k=0;k<v.length;k+=1)v[k].l(H);H.forEach(g),this.h()},h(){oe(m,"display","flex"),oe(m,"flex-direction","row"),oe(m,"overflow-x","scroll")},m(h,F){B(e,h,F),w(h,t,F),w(h,i,F),C(i,n),C(i,l),C(l,o),w(h,s,F),w(h,f,F),C(f,_),C(f,u),C(u,c),w(h,d,F),w(h,m,F);for(let M=0;M<v.length;M+=1)v[M]&&v[M].m(m,null);r[16](m),S=!0},p(h,[F]){const M={};F&2097152&&(M.$$scope={dirty:F,ctx:h}),e.$set(M),(!S||F&4)&&a!==(a=h[2][0].toFixed(2)+"")&&x(o,a),(!S||F&4)&&p!==(p=h[2][1].toFixed(2)+"")&&x(c,p),F&241&&(D=_e(h[0]),re(),v=Ze(v,F,T,1,h,D,$,m,xe,je,null,Ue),se())},i(h){if(!S){b(e.$$.fragment,h);for(let F=0;F<D.length;F+=1)b(v[F]);S=!0}},o(h){y(e.$$.fragment,h);for(let F=0;F<v.length;F+=1)y(v[F]);S=!1},d(h){h&&(g(t),g(i),g(s),g(f),g(d),g(m)),O(e,h);for(let F=0;F<v.length;F+=1)v[F].d();r[16](null)}}}function ei(r,e,t){let i,n;ge(r,G,h=>t(9,n=h));let{streetFeaturesLeftToRight:l}=e,{sectionType:a}=e,o,s=!1;_t(()=>{s&&(s=!1,t(1,o.scrollLeft=o.scrollWidth,o))});function f(){t(0,l=[...l,""]),s=!0}function _(h){l.splice(h,1),t(0,l)}function u(h){t(0,[l[h-1],l[h]]=[l[h],l[h-1]],l)}function p(h){t(0,[l[h+1],l[h]]=[l[h],l[h+1]],l)}function c(h){l.splice(h,0,"Buffer / Verge"),t(0,l)}function d(h,F,M,U){M[U]=h,t(0,l)}const m=h=>_(h),v=h=>u(h),$=h=>p(h),S=h=>c(h),D=h=>c(h+1);function T(h){z[h?"unshift":"push"](()=>{o=h,t(1,o)})}return r.$$set=h=>{"streetFeaturesLeftToRight"in h&&t(0,l=h.streetFeaturesLeftToRight),"sectionType"in h&&t(8,a=h.sectionType)},r.$$.update=()=>{r.$$.dirty&768&&t(2,i=kt(n,a))},[l,o,i,f,_,u,p,c,a,n,d,m,v,$,S,D,T]}class st extends ce{constructor(e){super(),pe(this,e,ei,xt,ue,{streetFeaturesLeftToRight:0,sectionType:8})}}function ti(r){let e;return{c(){e=I("Confirm")},l(t){e=q(t,"Confirm")},m(t,i){w(t,e,i)},d(t){t&&g(e)}}}function ii(r){let e;return{c(){e=I("Cancel")},l(t){e=q(t,"Cancel")},m(t,i){w(t,e,i)},d(t){t&&g(e)}}}function ni(r){let e,t,i,n,l,a,o,s,f,_,u,p;function c($){r[6]($)}let d={label:"Name"};r[0]!==void 0&&(d.value=r[0]),e=new Ft({props:d}),z.push(()=>Q(e,"value",c));function m($){r[7]($)}let v={label:"Minimum width (m)",width:4,min:0};return r[1]!==void 0&&(v.value=r[1]),n=new Dt({props:v}),z.push(()=>Q(n,"value",m)),o=new nt({props:{errorMessage:r[2]}}),f=new yt({props:{disabled:r[2]!="",$$slots:{default:[ti]},$$scope:{ctx:r}}}),f.$on("click",r[8]),u=new fe({props:{$$slots:{default:[ii]},$$scope:{ctx:r}}}),u.$on("click",r[9]),{c(){E(e.$$.fragment),i=P(),E(n.$$.fragment),a=P(),E(o.$$.fragment),s=P(),E(f.$$.fragment),_=P(),E(u.$$.fragment)},l($){N(e.$$.fragment,$),i=R($),N(n.$$.fragment,$),a=R($),N(o.$$.fragment,$),s=R($),N(f.$$.fragment,$),_=R($),N(u.$$.fragment,$)},m($,S){B(e,$,S),w($,i,S),B(n,$,S),w($,a,S),B(o,$,S),w($,s,S),B(f,$,S),w($,_,S),B(u,$,S),p=!0},p($,S){const D={};!t&&S&1&&(t=!0,D.value=$[0],K(()=>t=!1)),e.$set(D);const T={};!l&&S&2&&(l=!0,T.value=$[1],K(()=>l=!1)),n.$set(T);const h={};S&4&&(h.errorMessage=$[2]),o.$set(h);const F={};S&4&&(F.disabled=$[2]!=""),S&4096&&(F.$$scope={dirty:S,ctx:$}),f.$set(F);const M={};S&4096&&(M.$$scope={dirty:S,ctx:$}),u.$set(M)},i($){p||(b(e.$$.fragment,$),b(n.$$.fragment,$),b(o.$$.fragment,$),b(f.$$.fragment,$),b(u.$$.fragment,$),p=!0)},o($){y(e.$$.fragment,$),y(n.$$.fragment,$),y(o.$$.fragment,$),y(f.$$.fragment,$),y(u.$$.fragment,$),p=!1},d($){$&&(g(i),g(a),g(s),g(_)),O(e,$),O(n,$),O(o,$),O(f,$),O(u,$)}}}function ri(r){let e,t;return e=new qt({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[ni]},$$scope:{ctx:r}}}),{c(){E(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,n){B(e,i,n),t=!0},p(i,[n]){const l={};n&4103&&(l.$$scope={dirty:n,ctx:i}),e.$set(l)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function si(r,e,t){let i,n;ge(r,G,m=>t(10,n=m));let{initialName:l}=e,{initialWidth:a}=e,o=Ke(),s=l,f=a;function _(m,v){return m==""?"Name must be specified":m!=l&&Object.values(n.proposed.customFeatures).some($=>$.name==m)?"That name is already used by another custom feature":tt.includes(m)?"That name is the same as one of the built-in features":isNaN(v)?"Enter a valid width":v<=0?"Enter a positive width":""}function u(m){s=m,t(0,s)}function p(m){f=m,t(1,f)}const c=()=>o("confirm",{name:s,width:f}),d=()=>o("cancel");return r.$$set=m=>{"initialName"in m&&t(4,l=m.initialName),"initialWidth"in m&&t(5,a=m.initialWidth)},r.$$.update=()=>{r.$$.dirty&3&&t(2,i=_(s,f))},[s,f,i,o,l,a,u,p,c,d]}class li extends ce{constructor(e){super(),pe(this,e,si,ri,ue,{initialName:4,initialWidth:5})}}function Je(r,e,t){const i=r.slice();return i[9]=e[t],i}function ai(r){let e;return{c(){e=I("Add feature")},l(t){e=q(t,"Add feature")},m(t,i){w(t,e,i)},d(t){t&&g(e)}}}function oi(r){let e;return{c(){e=I("Edit")},l(t){e=q(t,"Edit")},m(t,i){w(t,e,i)},d(t){t&&g(e)}}}function fi(r){let e;return{c(){e=I("Delete")},l(t){e=q(t,"Delete")},m(t,i){w(t,e,i)},d(t){t&&g(e)}}}function He(r,e){let t,i,n,l=e[1].proposed.customFeatures[e[9]].name+"",a,o,s=e[1].proposed.customFeatures[e[9]].width+"",f,_,u,p,c,d,m,v;function $(){return e[6](e[9])}p=new fe({props:{$$slots:{default:[oi]},$$scope:{ctx:e}}}),p.$on("click",$);function S(){return e[7](e[9])}return d=new et({props:{$$slots:{default:[fi]},$$scope:{ctx:e}}}),d.$on("click",S),{key:r,first:null,c(){t=V("li"),i=V("span"),n=V("u"),a=I(l),o=I(`
        : `),f=I(s),_=I(" m minimum width"),u=P(),E(p.$$.fragment),c=P(),E(d.$$.fragment),m=P(),this.h()},l(D){t=A(D,"LI",{});var T=J(t);i=A(T,"SPAN",{});var h=J(i);n=A(h,"U",{});var F=J(n);a=q(F,l),F.forEach(g),o=q(h,`
        : `),f=q(h,s),_=q(h," m minimum width"),h.forEach(g),u=R(T),N(p.$$.fragment,T),c=R(T),N(d.$$.fragment,T),m=R(T),T.forEach(g),this.h()},h(){this.first=t},m(D,T){w(D,t,T),C(t,i),C(i,n),C(n,a),C(i,o),C(i,f),C(i,_),C(t,u),B(p,t,null),C(t,c),B(d,t,null),C(t,m),v=!0},p(D,T){e=D,(!v||T&2)&&l!==(l=e[1].proposed.customFeatures[e[9]].name+"")&&x(a,l),(!v||T&2)&&s!==(s=e[1].proposed.customFeatures[e[9]].width+"")&&x(f,s);const h={};T&4096&&(h.$$scope={dirty:T,ctx:e}),p.$set(h);const F={};T&4096&&(F.$$scope={dirty:T,ctx:e}),d.$set(F)},i(D){v||(b(p.$$.fragment,D),b(d.$$.fragment,D),v=!0)},o(D){y(p.$$.fragment,D),y(d.$$.fragment,D),v=!1},d(D){D&&g(t),O(p),O(d)}}}function Ge(r){let e,t;return e=new li({props:{initialName:r[0].initialName,initialWidth:r[0].initialWidth}}),e.$on("cancel",r[8]),e.$on("confirm",r[5]),{c(){E(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,n){B(e,i,n),t=!0},p(i,n){const l={};n&1&&(l.initialName=i[0].initialName),n&1&&(l.initialWidth=i[0].initialWidth),e.$set(l)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function ui(r){let e,t,i,n=[],l=new Map,a,o,s;e=new fe({props:{$$slots:{default:[ai]},$$scope:{ctx:r}}}),e.$on("click",r[2]);let f=_e(Object.keys(r[1].proposed.customFeatures));const _=p=>p[9];for(let p=0;p<f.length;p+=1){let c=Je(r,f,p),d=_(c);l.set(d,n[p]=He(d,c))}let u=r[0]&&Ge(r);return{c(){E(e.$$.fragment),t=P(),i=V("ol");for(let p=0;p<n.length;p+=1)n[p].c();a=P(),u&&u.c(),o=ae()},l(p){N(e.$$.fragment,p),t=R(p),i=A(p,"OL",{});var c=J(i);for(let d=0;d<n.length;d+=1)n[d].l(c);c.forEach(g),a=R(p),u&&u.l(p),o=ae()},m(p,c){B(e,p,c),w(p,t,c),w(p,i,c);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(i,null);w(p,a,c),u&&u.m(p,c),w(p,o,c),s=!0},p(p,[c]){const d={};c&4096&&(d.$$scope={dirty:c,ctx:p}),e.$set(d),c&26&&(f=_e(Object.keys(p[1].proposed.customFeatures)),re(),n=Ze(n,c,_,1,p,f,l,i,xe,He,null,Je),se()),p[0]?u?(u.p(p,c),c&1&&b(u,1)):(u=Ge(p),u.c(),b(u,1),u.m(o.parentNode,o)):u&&(re(),y(u,1,1,()=>{u=null}),se())},i(p){if(!s){b(e.$$.fragment,p);for(let c=0;c<f.length;c+=1)b(n[c]);b(u),s=!0}},o(p){y(e.$$.fragment,p);for(let c=0;c<n.length;c+=1)y(n[c]);y(u),s=!1},d(p){p&&(g(t),g(i),g(a),g(o)),O(e,p);for(let c=0;c<n.length;c+=1)n[c].d();u&&u.d(p)}}}function ci(r,e,t){let i;ge(r,G,p=>t(1,i=p));let n=null;function l(){t(0,n={id:rt(),initialName:"",initialWidth:0})}function a(p){let c=i.proposed.customFeatures[p].name,d=JSON.stringify({custom:p});if(i.proposed.desirableMinimumCrossSection.some(m=>JSON.stringify(m)==d)){window.alert(`The ${c} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(i.proposed.absoluteMinimumCrossSection.some(m=>JSON.stringify(m)==d)){window.alert(`The ${c} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete i.proposed.customFeatures[p],G.set(i)}function o(p){t(0,n={id:p,initialName:i.proposed.customFeatures[p].name,initialWidth:i.proposed.customFeatures[p].width})}function s(p){Qe(G,i.proposed.customFeatures[n.id]={name:p.detail.name,width:p.detail.width},i),G.set(i),t(0,n=null)}return[n,i,l,a,o,s,p=>o(p),p=>a(p),()=>t(0,n=null)]}class pi extends ce{constructor(e){super(),pe(this,e,ci,ui,ue,{})}}function Xe(r){let e,t,i,n,l;return{c(){e=V("p"),t=V("i"),i=I("Effective speed limit, based on the limit and 85 percentile: "),n=I(r[1]),l=I(`
            mph`)},l(a){e=A(a,"P",{});var o=J(e);t=A(o,"I",{});var s=J(t);i=q(s,"Effective speed limit, based on the limit and 85 percentile: "),n=q(s,r[1]),l=q(s,`
            mph`),s.forEach(g),o.forEach(g)},m(a,o){w(a,e,o),C(e,t),C(t,i),C(t,n),C(t,l)},p(a,o){o&2&&x(n,a[1])},d(a){a&&g(e)}}}function di(r){let e,t,i,n,l,a,o,s,f,_,u,p,c,d,m,v,$,S,D,T,h,F,M,U,j;function H(L){r[4](L)}let k={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:he(["<200","200-800",">800"])};r[0].proposed.trafficData.flowOneWay!==void 0&&(k.value=r[0].proposed.trafficData.flowOneWay),i=new de({props:k}),z.push(()=>Q(i,"value",H));function W(L){r[5](L)}let le={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:he(["<300","300-1,000",">1,000"])};r[0].proposed.trafficData.flowTwoWay!==void 0&&(le.value=r[0].proposed.trafficData.flowTwoWay),a=new de({props:le}),z.push(()=>Q(a,"value",W));function te(L){r[6](L)}let me={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:he(["<300",">300"])};r[0].proposed.trafficData.flowSharedUse!==void 0&&(me.value=r[0].proposed.trafficData.flowSharedUse),f=new de({props:me}),z.push(()=>Q(f,"value",te));function lt(L){r[7](L)}let De={label:"Traffic flow (vpd)",emptyOption:!0,choices:he(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};r[0].proposed.trafficData.trafficFlow!==void 0&&(De.value=r[0].proposed.trafficData.trafficFlow),p=new de({props:De}),z.push(()=>Q(p,"value",lt));let X=r[1]&&Xe(r);function at(L){r[8](L)}let Se={label:"Speed limit (MPH)",emptyOption:!0,choices:r[2]};r[0].proposed.trafficData.speedLimit!==void 0&&(Se.value=r[0].proposed.trafficData.speedLimit),$=new de({props:Se}),z.push(()=>Q($,"value",at));function ot(L){r[9](L)}let Le={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};r[0].proposed.trafficData.observedSpeed!==void 0&&(Le.value=r[0].proposed.trafficData.observedSpeed),T=new Et({props:Le}),z.push(()=>Q(T,"value",ot));function ft(L){r[10](L)}let Te={label:"Street function",emptyOption:!0,choices:he(["High Street (active frontages)","Residential street","Local distributor road"])};return r[0].proposed.trafficData.streetFunction!==void 0&&(Te.value=r[0].proposed.trafficData.streetFunction),M=new de({props:Te}),z.push(()=>Q(M,"value",ft)),{c(){e=V("div"),t=V("div"),E(i.$$.fragment),l=P(),E(a.$$.fragment),s=P(),E(f.$$.fragment),u=P(),E(p.$$.fragment),d=P(),m=V("div"),X&&X.c(),v=P(),E($.$$.fragment),D=P(),E(T.$$.fragment),F=P(),E(M.$$.fragment),this.h()},l(L){e=A(L,"DIV",{class:!0});var Y=J(e);t=A(Y,"DIV",{class:!0});var ie=J(t);N(i.$$.fragment,ie),l=R(ie),N(a.$$.fragment,ie),s=R(ie),N(f.$$.fragment,ie),u=R(ie),N(p.$$.fragment,ie),ie.forEach(g),d=R(Y),m=A(Y,"DIV",{class:!0});var ne=J(m);X&&X.l(ne),v=R(ne),N($.$$.fragment,ne),D=R(ne),N(T.$$.fragment,ne),F=R(ne),N(M.$$.fragment,ne),ne.forEach(g),Y.forEach(g),this.h()},h(){Z(t,"class","govuk-grid-column-one-half"),Z(m,"class","govuk-grid-column-one-half"),Z(e,"class","govuk-grid-row")},m(L,Y){w(L,e,Y),C(e,t),B(i,t,null),C(t,l),B(a,t,null),C(t,s),B(f,t,null),C(t,u),B(p,t,null),C(e,d),C(e,m),X&&X.m(m,null),C(m,v),B($,m,null),C(m,D),B(T,m,null),C(m,F),B(M,m,null),j=!0},p(L,Y){const ie={};!n&&Y&1&&(n=!0,ie.value=L[0].proposed.trafficData.flowOneWay,K(()=>n=!1)),i.$set(ie);const ne={};!o&&Y&1&&(o=!0,ne.value=L[0].proposed.trafficData.flowTwoWay,K(()=>o=!1)),a.$set(ne);const Ce={};!_&&Y&1&&(_=!0,Ce.value=L[0].proposed.trafficData.flowSharedUse,K(()=>_=!1)),f.$set(Ce);const Ee={};!c&&Y&1&&(c=!0,Ee.value=L[0].proposed.trafficData.trafficFlow,K(()=>c=!1)),p.$set(Ee),L[1]?X?X.p(L,Y):(X=Xe(L),X.c(),X.m(m,v)):X&&(X.d(1),X=null);const Ne={};!S&&Y&1&&(S=!0,Ne.value=L[0].proposed.trafficData.speedLimit,K(()=>S=!1)),$.$set(Ne);const Be={};!h&&Y&1&&(h=!0,Be.value=L[0].proposed.trafficData.observedSpeed,K(()=>h=!1)),T.$set(Be);const Oe={};!U&&Y&1&&(U=!0,Oe.value=L[0].proposed.trafficData.streetFunction,K(()=>U=!1)),M.$set(Oe)},i(L){j||(b(i.$$.fragment,L),b(a.$$.fragment,L),b(f.$$.fragment,L),b(p.$$.fragment,L),b($.$$.fragment,L),b(T.$$.fragment,L),b(M.$$.fragment,L),j=!0)},o(L){y(i.$$.fragment,L),y(a.$$.fragment,L),y(f.$$.fragment,L),y(p.$$.fragment,L),y($.$$.fragment,L),y(T.$$.fragment,L),y(M.$$.fragment,L),j=!1},d(L){L&&g(e),O(i),O(a),O(f),O(p),X&&X.d(),O($),O(T),O(M)}}}function mi(r){let e,t;return e=new we({props:{label:"Traffic data and additional information",open:!0,$$slots:{default:[di]},$$scope:{ctx:r}}}),{c(){E(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,n){B(e,i,n),t=!0},p(i,[n]){const l={};n&2051&&(l.$$scope={dirty:n,ctx:i}),e.$set(l)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function hi(r,e,t){let i,n;ge(r,G,d=>t(0,n=d));let{valid:l}=e,a=he(bt);function o(d){r.$$.not_equal(n.proposed.trafficData.flowOneWay,d)&&(n.proposed.trafficData.flowOneWay=d,G.set(n))}function s(d){r.$$.not_equal(n.proposed.trafficData.flowTwoWay,d)&&(n.proposed.trafficData.flowTwoWay=d,G.set(n))}function f(d){r.$$.not_equal(n.proposed.trafficData.flowSharedUse,d)&&(n.proposed.trafficData.flowSharedUse=d,G.set(n))}function _(d){r.$$.not_equal(n.proposed.trafficData.trafficFlow,d)&&(n.proposed.trafficData.trafficFlow=d,G.set(n))}function u(d){r.$$.not_equal(n.proposed.trafficData.speedLimit,d)&&(n.proposed.trafficData.speedLimit=d,G.set(n))}function p(d){r.$$.not_equal(n.proposed.trafficData.observedSpeed,d)&&(n.proposed.trafficData.observedSpeed=d,G.set(n))}function c(d){r.$$.not_equal(n.proposed.trafficData.streetFunction,d)&&(n.proposed.trafficData.streetFunction=d,G.set(n))}return r.$$set=d=>{"valid"in d&&t(3,l=d.valid)},r.$$.update=()=>{r.$$.dirty&1&&t(3,l=n.proposed.trafficData.flowOneWay!=""&&n.proposed.trafficData.flowTwoWay!=""&&n.proposed.trafficData.flowSharedUse!=""&&n.proposed.trafficData.trafficFlow!=""&&n.proposed.trafficData.speedLimit!=""&&n.proposed.trafficData.observedSpeed!=null&&n.proposed.trafficData.streetFunction!=""),r.$$.dirty&1&&t(1,i=it(n.proposed.trafficData.speedLimit,n.proposed.trafficData.observedSpeed))},[n,i,a,l,o,s,f,_,u,p,c]}class _i extends ce{constructor(e){super(),pe(this,e,hi,mi,ue,{valid:3})}}function gi(r){let e,t;return e=new pi({}),{c(){E(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,n){B(e,i,n),t=!0},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function $i(r){let e,t="Fill out all traffic data above to continue";return{c(){e=V("p"),e.textContent=t},l(i){e=A(i,"P",{"data-svelte-h":!0}),Fe(e)!=="svelte-72a5ry"&&(e.textContent=t)},m(i,n){w(i,e,n)},p:$e,i:$e,o:$e,d(i){i&&g(e)}}}function bi(r){let e,t,i,n;return e=new we({props:{label:"Preferred Cross-Section",open:!0,$$slots:{default:[vi]},$$scope:{ctx:r}}}),i=new we({props:{label:"Compromised Cross-Section",open:!0,$$slots:{default:[ki]},$$scope:{ctx:r}}}),{c(){E(e.$$.fragment),t=P(),E(i.$$.fragment)},l(l){N(e.$$.fragment,l),t=R(l),N(i.$$.fragment,l)},m(l,a){B(e,l,a),w(l,t,a),B(i,l,a),n=!0},p(l,a){const o={};a&66&&(o.$$scope={dirty:a,ctx:l}),e.$set(o);const s={};a&66&&(s.$$scope={dirty:a,ctx:l}),i.$set(s)},i(l){n||(b(e.$$.fragment,l),b(i.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),y(i.$$.fragment,l),n=!1},d(l){l&&g(t),O(e,l),O(i,l)}}}function vi(r){let e,t,i;function n(a){r[4](a)}let l={sectionType:"Preferred"};return r[1].proposed.desirableMinimumCrossSection!==void 0&&(l.streetFeaturesLeftToRight=r[1].proposed.desirableMinimumCrossSection),e=new st({props:l}),z.push(()=>Q(e,"streetFeaturesLeftToRight",n)),{c(){E(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,o){B(e,a,o),i=!0},p(a,o){const s={};!t&&o&2&&(t=!0,s.streetFeaturesLeftToRight=a[1].proposed.desirableMinimumCrossSection,K(()=>t=!1)),e.$set(s)},i(a){i||(b(e.$$.fragment,a),i=!0)},o(a){y(e.$$.fragment,a),i=!1},d(a){O(e,a)}}}function ze(r){let e,t;return e=new fe({props:{$$slots:{default:[wi]},$$scope:{ctx:r}}}),e.$on("click",r[2]),{c(){E(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,n){B(e,i,n),t=!0},p(i,n){const l={};n&64&&(l.$$scope={dirty:n,ctx:i}),e.$set(l)},i(i){t||(b(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function wi(r){let e;return{c(){e=I("Copy Preferred")},l(t){e=q(t,"Copy Preferred")},m(t,i){w(t,e,i)},d(t){t&&g(e)}}}function ki(r){let e,t,i,n,l=r[1].proposed.absoluteMinimumCrossSection.length==0&&ze(r);function a(s){r[5](s)}let o={sectionType:"Compromised"};return r[1].proposed.absoluteMinimumCrossSection!==void 0&&(o.streetFeaturesLeftToRight=r[1].proposed.absoluteMinimumCrossSection),t=new st({props:o}),z.push(()=>Q(t,"streetFeaturesLeftToRight",a)),{c(){l&&l.c(),e=P(),E(t.$$.fragment)},l(s){l&&l.l(s),e=R(s),N(t.$$.fragment,s)},m(s,f){l&&l.m(s,f),w(s,e,f),B(t,s,f),n=!0},p(s,f){s[1].proposed.absoluteMinimumCrossSection.length==0?l?(l.p(s,f),f&2&&b(l,1)):(l=ze(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(re(),y(l,1,1,()=>{l=null}),se());const _={};!i&&f&2&&(i=!0,_.streetFeaturesLeftToRight=s[1].proposed.absoluteMinimumCrossSection,K(()=>i=!1)),t.$set(_)},i(s){n||(b(l),b(t.$$.fragment,s),n=!0)},o(s){y(l),y(t.$$.fragment,s),n=!1},d(s){s&&g(e),l&&l.d(s),O(t,s)}}}function yi(r){let e,t,i,n,l,a,o,s,f;function _(m){r[3](m)}let u={};r[0]!==void 0&&(u.valid=r[0]),e=new _i({props:u}),z.push(()=>Q(e,"valid",_)),n=new we({props:{label:"Custom Street Features",$$slots:{default:[gi]},$$scope:{ctx:r}}});const p=[bi,$i],c=[];function d(m,v){return m[0]?0:1}return a=d(r),o=c[a]=p[a](r),{c(){E(e.$$.fragment),i=P(),E(n.$$.fragment),l=P(),o.c(),s=ae()},l(m){N(e.$$.fragment,m),i=R(m),N(n.$$.fragment,m),l=R(m),o.l(m),s=ae()},m(m,v){B(e,m,v),w(m,i,v),B(n,m,v),w(m,l,v),c[a].m(m,v),w(m,s,v),f=!0},p(m,[v]){const $={};!t&&v&1&&(t=!0,$.valid=m[0],K(()=>t=!1)),e.$set($);const S={};v&64&&(S.$$scope={dirty:v,ctx:m}),n.$set(S);let D=a;a=d(m),a===D?c[a].p(m,v):(re(),y(c[D],1,1,()=>{c[D]=null}),se(),o=c[a],o?o.p(m,v):(o=c[a]=p[a](m),o.c()),b(o,1),o.m(s.parentNode,s))},i(m){f||(b(e.$$.fragment,m),b(n.$$.fragment,m),b(o),f=!0)},o(m){y(e.$$.fragment,m),y(n.$$.fragment,m),y(o),f=!1},d(m){m&&(g(i),g(l),g(s)),O(e,m),O(n,m),c[a].d(m)}}}function Fi(r,e,t){let i;ge(r,G,f=>t(1,i=f));let n=!1;function l(){Qe(G,i.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(i.proposed.desirableMinimumCrossSection)),i)}function a(f){n=f,t(0,n)}function o(f){r.$$.not_equal(i.proposed.desirableMinimumCrossSection,f)&&(i.proposed.desirableMinimumCrossSection=f,G.set(i))}function s(f){r.$$.not_equal(i.proposed.absoluteMinimumCrossSection,f)&&(i.proposed.absoluteMinimumCrossSection=f,G.set(i))}return[n,i,l,a,o,s]}class Ui extends ce{constructor(e){super(),pe(this,e,Fi,yi,ue,{})}}export{Ui as component};
