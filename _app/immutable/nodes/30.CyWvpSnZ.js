import{s as _e,v as Q,x as ne,l as De,u as He,m as Re,o as Ue,H as fe,E as me,i as M,f as k,a9 as bn,a8 as yn,k as be,U as Jt,a7 as Kt,N as Fe,e as Y,c as x,b as oe,r as Je,a as H,g as R,q as Be,n as Ke,t as K,d as W,w as ee,h as ue,j as ye,z as vn,p as yt}from"../chunks/scheduler.Bsni_e59.js";import{S as ve,i as we,e as re,c as F,a as B,m as q,t as w,b as E,d as N,g as ie,f as le}from"../chunks/index.CCfAUppz.js";import{e as ge}from"../chunks/each.ChCadThl.js";import{B as wn}from"../chunks/ButtonGroup.hr9f_7ak.js";import{W as Wt,S as pe}from"../chunks/WarningButton.D9QeV9gM.js";import{T as it}from"../chunks/TextInput.CLSFolLv.js";import{s as X}from"../chunks/data.Cq4X59SB.js";import{L as Vt,a as Xt,e as kn,m as Me,i as jn,f as Zt,M as Cn,G as vt,h as wt,g as En}from"../chunks/MapLibreMap.BatzhJK2.js";import{c as Ne}from"../chunks/colors.CYEpEtTL.js";import{a as Ln,c as $n,M as et,C as Mn,R as Pn,B as In,G as On,S as Tn}from"../chunks/GeoreferenceLayer.DSeZGWnj.js";import{C as An}from"../chunks/CollapsibleCard.DoOZ0Bze.js";import{D as Sn}from"../chunks/DefaultButton.DyQsHGbh.js";import{T as Qt}from"../chunks/TextArea.B6Unmhyb.js";import{p as Fn}from"../chunks/index.DDCXRzdJ.js";import{S as kt}from"../chunks/Select.CYYT6Sg-.js";function Bn(t){let e;const n=t[15].default,r=De(n,t,t[23],null);return{c(){r&&r.c()},l(o){r&&r.l(o)},m(o,l){r&&r.m(o,l),e=!0},p(o,l){r&&r.p&&(!e||l&8388608)&&He(r,n,o,o[23],e?Ue(n,o[23],l,null):Re(o[23]),null)},i(o){e||(w(r,o),e=!0)},o(o){E(r,o),e=!1},d(o){r&&r.d(o)}}}function qn(t){let e,n,r;function o(i){t[16](i)}let l={id:t[1],type:"line",source:t[2],sourceLayer:t[3],beforeId:t[4],beforeLayerType:t[5],paint:t[6],layout:t[7],filter:t[8],minzoom:t[9],maxzoom:t[10],hoverCursor:t[11],manageHoverState:t[12],eventsIfTopMost:t[13],interactive:t[14],$$slots:{default:[Bn]},$$scope:{ctx:t}};return t[0]!==void 0&&(l.hovered=t[0]),e=new Vt({props:l}),Q.push(()=>re(e,"hovered",o)),e.$on("click",t[17]),e.$on("dblclick",t[18]),e.$on("contextmenu",t[19]),e.$on("mouseenter",t[20]),e.$on("mousemove",t[21]),e.$on("mouseleave",t[22]),{c(){F(e.$$.fragment)},l(i){B(e.$$.fragment,i)},m(i,a){q(e,i,a),r=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.minzoom=i[9]),a&1024&&(s.maxzoom=i[10]),a&2048&&(s.hoverCursor=i[11]),a&4096&&(s.manageHoverState=i[12]),a&8192&&(s.eventsIfTopMost=i[13]),a&16384&&(s.interactive=i[14]),a&8388608&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],ne(()=>n=!1)),e.$set(s)},i(i){r||(w(e.$$.fragment,i),r=!0)},o(i){E(e.$$.fragment,i),r=!1},d(i){N(e,i)}}}function Nn(t,e,n){let{$$slots:r={},$$scope:o}=e,{id:l=Xt("line")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:c=void 0}=e,{paint:u}=e,{layout:d=void 0}=e,{filter:f=void 0}=e,{minzoom:g=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:m=void 0}=e,{manageHoverState:p=!1}=e,{hovered:A=null}=e,{eventsIfTopMost:T=!1}=e,{interactive:P=!0}=e;function L(I){A=I,n(0,A)}function y(I){fe.call(this,t,I)}function b(I){fe.call(this,t,I)}function G(I){fe.call(this,t,I)}function z(I){fe.call(this,t,I)}function D(I){fe.call(this,t,I)}function S(I){fe.call(this,t,I)}return t.$$set=I=>{"id"in I&&n(1,l=I.id),"source"in I&&n(2,i=I.source),"sourceLayer"in I&&n(3,a=I.sourceLayer),"beforeId"in I&&n(4,s=I.beforeId),"beforeLayerType"in I&&n(5,c=I.beforeLayerType),"paint"in I&&n(6,u=I.paint),"layout"in I&&n(7,d=I.layout),"filter"in I&&n(8,f=I.filter),"minzoom"in I&&n(9,g=I.minzoom),"maxzoom"in I&&n(10,O=I.maxzoom),"hoverCursor"in I&&n(11,m=I.hoverCursor),"manageHoverState"in I&&n(12,p=I.manageHoverState),"hovered"in I&&n(0,A=I.hovered),"eventsIfTopMost"in I&&n(13,T=I.eventsIfTopMost),"interactive"in I&&n(14,P=I.interactive),"$$scope"in I&&n(23,o=I.$$scope)},[A,l,i,a,s,c,u,d,f,g,O,m,p,T,P,r,L,y,b,G,z,D,S,o]}class tt extends ve{constructor(e){super(),we(this,e,Nn,qn,_e,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}const Gn=t=>({features:t[0]&16,data:t[0]&16,map:t[0]&4,close:t[0]&1}),jt=t=>{var e;return{features:t[4],data:(e=t[4])==null?void 0:e[0],map:t[2],close:t[31]}};function Ct(t){let e,n,r=(t[4]||t[3]instanceof Me.Marker)&&Et(t);return{c(){e=Y("div"),r&&r.c()},l(o){e=x(o,"DIV",{});var l=oe(e);r&&r.l(l),l.forEach(k)},m(o,l){M(o,e,l),r&&r.m(e,null),t[32](e),n=!0},p(o,l){o[4]||o[3]instanceof Me.Marker?r?(r.p(o,l),l[0]&24&&w(r,1)):(r=Et(o),r.c(),w(r,1),r.m(e,null)):r&&(ie(),E(r,1,1,()=>{r=null}),le())},i(o){n||(w(r),n=!0)},o(o){E(r),n=!1},d(o){o&&k(e),r&&r.d(),t[32](null)}}}function Et(t){let e;const n=t[30].default,r=De(n,t,t[29],jt);return{c(){r&&r.c()},l(o){r&&r.l(o)},m(o,l){r&&r.m(o,l),e=!0},p(o,l){r&&r.p&&(!e||l[0]&536870933)&&He(r,n,o,o[29],e?Ue(n,o[29],l,Gn):Re(o[29]),jt)},i(o){e||(w(r,o),e=!0)},o(o){E(r,o),e=!1},d(o){r&&r.d(o)}}}function zn(t){let e,n,r=t[9].default&&Ct(t);return{c(){r&&r.c(),e=me()},l(o){r&&r.l(o),e=me()},m(o,l){r&&r.m(o,l),M(o,e,l),n=!0},p(o,l){o[9].default?r?(r.p(o,l),l[0]&512&&w(r,1)):(r=Ct(o),r.c(),w(r,1),r.m(e.parentNode,e)):r&&(ie(),E(r,1,1,()=>{r=null}),le())},i(o){n||(w(r),n=!0)},o(o){E(r),n=!1},d(o){o&&k(e),r&&r.d(o)}}}function Dn(t,e,n){let r,o,l,i,a,s,{$$slots:c={},$$scope:u}=e;const d=bn(c);let{closeButton:f=void 0}=e,{closeOnClickOutside:g=!0}=e,{closeOnClickInside:O=!1}=e,{closeOnMove:m=!1}=e,{openOn:p="click"}=e,{openIfTopMost:A=!0}=e,{focusAfterOpen:T=!0}=e,{anchor:P=void 0}=e,{offset:L=void 0}=e,{popupClass:y=void 0}=e,{maxWidth:b=void 0}=e,{lngLat:G=void 0}=e,{html:z=void 0}=e,{open:D=!1}=e;const S=yn(),{map:I,popupTarget:$,layerEvent:_,layer:v,eventTopMost:Z}=kn();be(t,I,C=>n(2,l=C)),be(t,$,C=>n(3,a=C)),be(t,_,C=>n(28,i=C)),be(t,v,C=>n(35,s=C));const j=["click","dblclick","contextmenu"];let h,V=!1,te;function he(){if(!h)return;let C=h.getElement();!C||C===te||(te=C,p==="hover"&&(te.style.pointerEvents="none"),te.addEventListener("mouseenter",()=>{n(24,V=!0)},{passive:!0}),te.addEventListener("mouseleave",()=>{n(24,V=!1)},{passive:!0}),te.addEventListener("click",()=>{O&&n(0,D=!1)},{passive:!0}))}Jt(()=>{if(l)return l.on("click",qe),l.on("contextmenu",qe),typeof a=="string"&&(l.on("click",a,Le),l.on("dblclick",a,Le),l.on("contextmenu",a,Le),l.on("mousemove",a,bt),l.on("mouseleave",a,ht),l.on("touchstart",a,_t),l.on("touchend",a,pt)),()=>{l!=null&&l.loaded()&&(h==null||h.remove(),l.off("click",qe),l.off("contextmenu",qe),a instanceof Me.Marker?a.getPopup()===h&&a.setPopup(void 0):typeof a=="string"&&(l.off("click",a,Le),l.off("dblclick",a,Le),l.off("contextmenu",a,Le),l.off("mousemove",a,bt),l.off("mouseleave",a,ht),l.off("touchstart",a,_t),l.off("touchend",a,pt)))}});function dt(C){return A?!("marker"in C)&&!jn(C)&&Z(C)!==s:!1}let ce=null,de="normal";function Le(C){C.type===p&&(dt(C)||("layerType"in C?C.layerType==="deckgl"?(n(10,G=C.coordinate),n(4,ce=C.object?[C.object]:null)):(n(10,G=C.lngLat),n(4,ce=C.features??[])):(n(10,G=C.lngLat),n(4,ce=C.features??[])),setTimeout(()=>n(0,D=!0))))}let $e=null;function _t(C){$e=C.point}function pt(C){if(!$e||p!=="hover")return;let Qe=$e.dist(C.point);$e=null,Qe<3&&(n(10,G=C.lngLat),n(4,ce=C.features??[]),h.isOpen()?n(25,de="justOpened"):(n(25,de="opening"),n(0,D=!0)))}function ht(C){p!=="hover"||$e||de!=="normal"||(n(0,D=!1),n(4,ce=null))}function bt(C){if(!(p!=="hover"||$e||de!=="normal")){if(dt(C)){n(0,D=!1),n(4,ce=null);return}n(0,D=!0),n(4,ce=C.features??[]),n(10,G=C.lngLat)}}function qe(C){if(de==="justOpened"){n(25,de="normal");return}if(!g)return;let Qe=[te,a instanceof Me.Marker?a==null?void 0:a.getElement():null];D&&h.isOpen()&&!Qe.some(Ye=>Ye==null?void 0:Ye.contains(C.originalEvent.target))&&(C.type==="contextmenu"&&p==="contextmenu"||C.type!=="contextmenu")&&n(0,D=!1)}Kt(()=>{l&&(h!=null&&h.isOpen())&&h.remove()});let Oe;const pn=()=>n(0,D=!1);function hn(C){Q[C?"unshift":"push"](()=>{Oe=C,n(1,Oe)})}return t.$$set=C=>{"closeButton"in C&&n(11,f=C.closeButton),"closeOnClickOutside"in C&&n(12,g=C.closeOnClickOutside),"closeOnClickInside"in C&&n(13,O=C.closeOnClickInside),"closeOnMove"in C&&n(14,m=C.closeOnMove),"openOn"in C&&n(15,p=C.openOn),"openIfTopMost"in C&&n(16,A=C.openIfTopMost),"focusAfterOpen"in C&&n(17,T=C.focusAfterOpen),"anchor"in C&&n(18,P=C.anchor),"offset"in C&&n(19,L=C.offset),"popupClass"in C&&n(20,y=C.popupClass),"maxWidth"in C&&n(21,b=C.maxWidth),"lngLat"in C&&n(10,G=C.lngLat),"html"in C&&n(22,z=C.html),"open"in C&&n(0,D=C.open),"$$scope"in C&&n(29,u=C.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&14336&&n(27,r=f??(!g&&!O)),t.$$.dirty[0]&146685952&&(h||(n(23,h=new Me.Popup({closeButton:r,closeOnClick:!1,closeOnMove:m,focusAfterOpen:T,maxWidth:b,className:y,anchor:P,offset:L})),te=h.getElement(),h.on("open",()=>{n(0,D=!0),he(),S("open",h)}),h.on("close",()=>{n(0,D=!1),S("close",h)}),h.on("hover",()=>{S("hover",h)}))),t.$$.dirty[0]&8421384&&h&&a instanceof Me.Marker&&(p==="click"?a.setPopup(h):a.getPopup()===h&&a.setPopup(void 0)),t.$$.dirty[0]&268468224&&j.includes(p)&&(i==null?void 0:i.type)===p&&(Le(i),Fe(_,i=null,i)),t.$$.dirty[0]&268468224&&n(26,o=p==="hover"&&((i==null?void 0:i.type)==="mousemove"||(i==null?void 0:i.type)==="mouseenter")),t.$$.dirty[0]&352354304&&p==="hover"&&_&&(o&&i&&(i.layerType==="deckgl"?(n(10,G=i.coordinate),n(4,ce=i.object?[i.object]:null)):(n(10,G=i.lngLat),n(4,ce=i.features??[]))),n(0,D=(o||V)??!1)),t.$$.dirty[0]&12582914&&(Oe?h.setDOMContent(Oe):z&&h.setHTML(z)),t.$$.dirty[0]&8389632&&G&&h.setLngLat(G),t.$$.dirty[0]&41943045&&l){let C=h.isOpen();D&&!C?(h.addTo(l),de==="opening"&&n(25,de="justOpened")):!D&&C&&h.remove()}},[D,Oe,l,a,ce,I,$,_,v,d,G,f,g,O,m,p,A,T,P,L,y,b,z,h,V,de,o,r,i,u,c,pn,hn]}class Hn extends ve{constructor(e){super(),we(this,e,Dn,zn,_e,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}function Rn(t){let e;const n=t[16].default,r=De(n,t,t[24],null);return{c(){r&&r.c()},l(o){r&&r.l(o)},m(o,l){r&&r.m(o,l),e=!0},p(o,l){r&&r.p&&(!e||l&16777216)&&He(r,n,o,o[24],e?Ue(n,o[24],l,null):Re(o[24]),null)},i(o){e||(w(r,o),e=!0)},o(o){E(r,o),e=!1},d(o){r&&r.d(o)}}}function Un(t){let e,n,r;function o(i){t[17](i)}let l={id:t[1],type:"symbol",source:t[2],sourceLayer:t[3],beforeId:t[4],beforeLayerType:t[5],paint:t[6],layout:t[7],filter:t[8],applyToClusters:t[9],minzoom:t[10],maxzoom:t[11],hoverCursor:t[12],manageHoverState:t[13],eventsIfTopMost:t[14],interactive:t[15],$$slots:{default:[Rn]},$$scope:{ctx:t}};return t[0]!==void 0&&(l.hovered=t[0]),e=new Vt({props:l}),Q.push(()=>re(e,"hovered",o)),e.$on("click",t[18]),e.$on("dblclick",t[19]),e.$on("contextmenu",t[20]),e.$on("mouseenter",t[21]),e.$on("mousemove",t[22]),e.$on("mouseleave",t[23]),{c(){F(e.$$.fragment)},l(i){B(e.$$.fragment,i)},m(i,a){q(e,i,a),r=!0},p(i,[a]){const s={};a&2&&(s.id=i[1]),a&4&&(s.source=i[2]),a&8&&(s.sourceLayer=i[3]),a&16&&(s.beforeId=i[4]),a&32&&(s.beforeLayerType=i[5]),a&64&&(s.paint=i[6]),a&128&&(s.layout=i[7]),a&256&&(s.filter=i[8]),a&512&&(s.applyToClusters=i[9]),a&1024&&(s.minzoom=i[10]),a&2048&&(s.maxzoom=i[11]),a&4096&&(s.hoverCursor=i[12]),a&8192&&(s.manageHoverState=i[13]),a&16384&&(s.eventsIfTopMost=i[14]),a&32768&&(s.interactive=i[15]),a&16777216&&(s.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,s.hovered=i[0],ne(()=>n=!1)),e.$set(s)},i(i){r||(w(e.$$.fragment,i),r=!0)},o(i){E(e.$$.fragment,i),r=!1},d(i){N(e,i)}}}function Jn(t,e,n){let{$$slots:r={},$$scope:o}=e,{id:l=Xt("symbol")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:c=void 0}=e,{paint:u=void 0}=e,{layout:d=void 0}=e,{filter:f=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:O=void 0}=e,{maxzoom:m=void 0}=e,{hoverCursor:p=void 0}=e,{manageHoverState:A=!1}=e,{hovered:T=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:L=!0}=e;function y($){T=$,n(0,T)}function b($){fe.call(this,t,$)}function G($){fe.call(this,t,$)}function z($){fe.call(this,t,$)}function D($){fe.call(this,t,$)}function S($){fe.call(this,t,$)}function I($){fe.call(this,t,$)}return t.$$set=$=>{"id"in $&&n(1,l=$.id),"source"in $&&n(2,i=$.source),"sourceLayer"in $&&n(3,a=$.sourceLayer),"beforeId"in $&&n(4,s=$.beforeId),"beforeLayerType"in $&&n(5,c=$.beforeLayerType),"paint"in $&&n(6,u=$.paint),"layout"in $&&n(7,d=$.layout),"filter"in $&&n(8,f=$.filter),"applyToClusters"in $&&n(9,g=$.applyToClusters),"minzoom"in $&&n(10,O=$.minzoom),"maxzoom"in $&&n(11,m=$.maxzoom),"hoverCursor"in $&&n(12,p=$.hoverCursor),"manageHoverState"in $&&n(13,A=$.manageHoverState),"hovered"in $&&n(0,T=$.hovered),"eventsIfTopMost"in $&&n(14,P=$.eventsIfTopMost),"interactive"in $&&n(15,L=$.interactive),"$$scope"in $&&n(24,o=$.$$scope)},[T,l,i,a,s,c,u,d,f,g,O,m,p,A,P,L,r,y,b,G,z,D,S,I,o]}class Kn extends ve{constructor(e){super(),we(this,e,Jn,Un,_e,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}const Wn=t=>({props:t&8}),Lt=t=>({props:Zn(t[3])});function Vn(t){let e,n;const r=t[1].default,o=De(r,t,t[2],Lt);return{c(){e=Y("div"),o&&o.c(),this.h()},l(l){e=x(l,"DIV",{class:!0});var i=oe(e);o&&o.l(i),i.forEach(k),this.h()},h(){Je(e,"class","govuk-prose")},m(l,i){M(l,e,i),o&&o.m(e,null),n=!0},p(l,i){o&&o.p&&(!n||i&12)&&He(o,r,l,l[2],n?Ue(r,l[2],i,Wn):Re(l[2]),Lt)},i(l){n||(w(o,l),n=!0)},o(l){E(o,l),n=!1},d(l){l&&k(e),o&&o.d(l)}}}function Xn(t){let e,n;return e=new Hn({props:{openOn:t[0],$$slots:{default:[Vn,({features:r})=>({3:r}),({features:r})=>r?8:0]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){q(e,r,o),n=!0},p(r,[o]){const l={};o&1&&(l.openOn=r[0]),o&12&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Zn(t){return t?t[0].properties??{}:{}}function Qn(t,e,n){let{$$slots:r={},$$scope:o}=e,{openOn:l="hover"}=e;return t.$$set=i=>{"openOn"in i&&n(0,l=i.openOn),"$$scope"in i&&n(2,o=i.$$scope)},[l,r,o]}class Yt extends ve{constructor(e){super(),we(this,e,Qn,Xn,_e,{openOn:0})}}var Yn=Object.defineProperty,U=(t,e)=>Yn(t,"name",{value:e,configurable:!0}),xn=class{constructor(e){this.direction=!1,this.compareProperties=!0;var n,r,o;this.precision=10**-((n=e==null?void 0:e.precision)!=null?n:17),this.direction=(r=e==null?void 0:e.direction)!=null?r:!1,this.compareProperties=(o=e==null?void 0:e.compareProperties)!=null?o:!0}compare(e,n){if(e.type!==n.type||!Te(e,n))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,n.coordinates);case"LineString":return this.compareLine(e.coordinates,n.coordinates);case"Polygon":return this.comparePolygon(e,n);case"GeometryCollection":return this.compareGeometryCollection(e,n);case"Feature":return this.compareFeature(e,n);case"FeatureCollection":return this.compareFeatureCollection(e,n);default:if(e.type.startsWith("Multi")){const r=nt(e),o=nt(n);return r.every(l=>o.some(i=>this.compare(l,i)))}}return!1}compareCoord(e,n){return e.length===n.length&&e.every((r,o)=>Math.abs(r-n[o])<this.precision)}compareLine(e,n,r=0,o=!1){if(!Te(e,n))return!1;const l=e;let i=n;if(o&&!this.compareCoord(l[0],i[0])){const s=this.fixStartIndex(i,l);if(s)i=s;else return!1}const a=this.compareCoord(l[r],i[r]);return this.direction||a?this.comparePath(l,i):this.compareCoord(l[r],i[i.length-(1+r)])?this.comparePath(l.slice().reverse(),i):!1}fixStartIndex(e,n){let r,o=-1;for(let l=0;l<e.length;l++)if(this.compareCoord(e[l],n[0])){o=l;break}return o>=0&&(r=[].concat(e.slice(o,e.length),e.slice(1,o+1))),r}comparePath(e,n){return e.every((r,o)=>this.compareCoord(r,n[o]))}comparePolygon(e,n){if(this.compareLine(e.coordinates[0],n.coordinates[0],1,!0)){const r=e.coordinates.slice(1,e.coordinates.length),o=n.coordinates.slice(1,n.coordinates.length);return r.every(l=>o.some(i=>this.compareLine(l,i,1,!0)))}return!1}compareGeometryCollection(e,n){return Te(e.geometries,n.geometries)&&this.compareBBox(e,n)&&e.geometries.every((r,o)=>this.compare(r,n.geometries[o]))}compareFeature(e,n){return e.id===n.id&&(this.compareProperties?Zt(e.properties,n.properties):!0)&&this.compareBBox(e,n)&&this.compare(e.geometry,n.geometry)}compareFeatureCollection(e,n){return Te(e.features,n.features)&&this.compareBBox(e,n)&&e.features.every((r,o)=>this.compare(r,n.features[o]))}compareBBox(e,n){return!e.bbox&&!n.bbox||(e.bbox&&n.bbox?this.compareCoord(e.bbox,n.bbox):!1)}};U(xn,"GeojsonEquality");function Te(t,e){return t.coordinates?t.coordinates.length===e.coordinates.length:t.length===e.length}U(Te,"sameLength");function nt(t){return t.coordinates.map(e=>({type:t.type.replace("Multi",""),coordinates:e}))}U(nt,"explode");var ae=63710088e-1,xt={centimeters:ae*100,centimetres:ae*100,degrees:360/(2*Math.PI),feet:ae*3.28084,inches:ae*39.37,kilometers:ae/1e3,kilometres:ae/1e3,meters:ae,metres:ae,miles:ae/1609.344,millimeters:ae*1e3,millimetres:ae*1e3,nauticalmiles:ae/1852,radians:1,yards:ae*1.0936},$t={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ke(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}U(ke,"feature");function er(t,e,n={}){switch(t){case"Point":return We(e).geometry;case"LineString":return at(e).geometry;case"Polygon":return lt(e).geometry;case"MultiPoint":return tn(e).geometry;case"MultiLineString":return en(e).geometry;case"MultiPolygon":return nn(e).geometry;default:throw new Error(t+" is invalid")}}U(er,"geometry");function We(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Pe(t[0])||!Pe(t[1]))throw new Error("coordinates must contain numbers");return ke({type:"Point",coordinates:t},e,n)}U(We,"point");function tr(t,e,n={}){return Ve(t.map(r=>We(r,e)),n)}U(tr,"points");function lt(t,e,n={}){for(const o of t){if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(let l=0;l<o[o.length-1].length;l++)if(o[o.length-1][l]!==o[0][l])throw new Error("First and last Position are not equivalent.")}return ke({type:"Polygon",coordinates:t},e,n)}U(lt,"polygon");function nr(t,e,n={}){return Ve(t.map(r=>lt(r,e)),n)}U(nr,"polygons");function at(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return ke({type:"LineString",coordinates:t},e,n)}U(at,"lineString");function rr(t,e,n={}){return Ve(t.map(r=>at(r,e)),n)}U(rr,"lineStrings");function Ve(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}U(Ve,"featureCollection");function en(t,e,n={}){return ke({type:"MultiLineString",coordinates:t},e,n)}U(en,"multiLineString");function tn(t,e,n={}){return ke({type:"MultiPoint",coordinates:t},e,n)}U(tn,"multiPoint");function nn(t,e,n={}){return ke({type:"MultiPolygon",coordinates:t},e,n)}U(nn,"multiPolygon");function or(t,e,n={}){return ke({type:"GeometryCollection",geometries:t},e,n)}U(or,"geometryCollection");function ir(t,e=0){if(e&&!(e>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,e||0);return Math.round(t*n)/n}U(ir,"round");function rn(t,e="kilometers"){const n=xt[e];if(!n)throw new Error(e+" units is invalid");return t*n}U(rn,"radiansToLength");function Xe(t,e="kilometers"){const n=xt[e];if(!n)throw new Error(e+" units is invalid");return t/n}U(Xe,"lengthToRadians");function lr(t,e){return ze(Xe(t,e))}U(lr,"lengthToDegrees");function ar(t){let e=t%360;return e<0&&(e+=360),e}U(ar,"bearingToAzimuth");function ze(t){return t%(2*Math.PI)*180/Math.PI}U(ze,"radiansToDegrees");function Ge(t){return t%360*Math.PI/180}U(Ge,"degreesToRadians");function sr(t,e="kilometers",n="kilometers"){if(!(t>=0))throw new Error("length must be a positive number");return rn(Xe(t,e),n)}U(sr,"convertLength");function ur(t,e="meters",n="kilometers"){if(!(t>=0))throw new Error("area must be a positive number");const r=$t[e];if(!r)throw new Error("invalid original units");const o=$t[n];if(!o)throw new Error("invalid final units");return t/r*o}U(ur,"convertArea");function Pe(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}U(Pe,"isNumber");function fr(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}U(fr,"isObject");function mr(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(t.length!==4&&t.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(e=>{if(!Pe(e))throw new Error("bbox must only contain numbers")})}U(mr,"validateBBox");function cr(t){if(!t)throw new Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw new Error("id must be a number or a string")}U(cr,"validateId");var gr=Object.defineProperty,je=(t,e)=>gr(t,"name",{value:e,configurable:!0});function on(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}je(on,"getCoord");function dr(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}je(dr,"getCoords");function ln(t){if(t.length>1&&Pe(t[0])&&Pe(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return ln(t[0]);throw new Error("coordinates must only contain numbers")}je(ln,"containsNumber");function _r(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}je(_r,"geojsonType");function pr(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||t.type!=="Feature"||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}je(pr,"featureOf");function hr(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||t.type!=="FeatureCollection")throw new Error("Invalid input to "+n+", FeatureCollection required");for(const r of t.features){if(!r||r.type!=="Feature"||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+r.geometry.type)}}je(hr,"collectionOf");function br(t){return t.type==="Feature"?t.geometry:t}je(br,"getGeom");function yr(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}je(yr,"getType");var vr=Object.defineProperty,wr=(t,e)=>vr(t,"name",{value:e,configurable:!0});function an(t,e,n,r={}){const o=on(t),l=Ge(o[0]),i=Ge(o[1]),a=Ge(n),s=Xe(e,r.units),c=Math.asin(Math.sin(i)*Math.cos(s)+Math.cos(i)*Math.sin(s)*Math.cos(a)),u=l+Math.atan2(Math.sin(a)*Math.sin(s)*Math.cos(i),Math.cos(s)-Math.sin(i)*Math.sin(c)),d=ze(u),f=ze(c);return We([d,f],r.properties)}wr(an,"destination");var kr=an,jr=Object.defineProperty,J=(t,e)=>jr(t,"name",{value:e,configurable:!0}),Cr=class{constructor(e){this.direction=!1,this.compareProperties=!0;var n,r,o;this.precision=10**-((n=e==null?void 0:e.precision)!=null?n:17),this.direction=(r=e==null?void 0:e.direction)!=null?r:!1,this.compareProperties=(o=e==null?void 0:e.compareProperties)!=null?o:!0}compare(e,n){if(e.type!==n.type||!Ae(e,n))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,n.coordinates);case"LineString":return this.compareLine(e.coordinates,n.coordinates);case"Polygon":return this.comparePolygon(e,n);case"GeometryCollection":return this.compareGeometryCollection(e,n);case"Feature":return this.compareFeature(e,n);case"FeatureCollection":return this.compareFeatureCollection(e,n);default:if(e.type.startsWith("Multi")){const r=rt(e),o=rt(n);return r.every(l=>o.some(i=>this.compare(l,i)))}}return!1}compareCoord(e,n){return e.length===n.length&&e.every((r,o)=>Math.abs(r-n[o])<this.precision)}compareLine(e,n,r=0,o=!1){if(!Ae(e,n))return!1;const l=e;let i=n;if(o&&!this.compareCoord(l[0],i[0])){const s=this.fixStartIndex(i,l);if(s)i=s;else return!1}const a=this.compareCoord(l[r],i[r]);return this.direction||a?this.comparePath(l,i):this.compareCoord(l[r],i[i.length-(1+r)])?this.comparePath(l.slice().reverse(),i):!1}fixStartIndex(e,n){let r,o=-1;for(let l=0;l<e.length;l++)if(this.compareCoord(e[l],n[0])){o=l;break}return o>=0&&(r=[].concat(e.slice(o,e.length),e.slice(1,o+1))),r}comparePath(e,n){return e.every((r,o)=>this.compareCoord(r,n[o]))}comparePolygon(e,n){if(this.compareLine(e.coordinates[0],n.coordinates[0],1,!0)){const r=e.coordinates.slice(1,e.coordinates.length),o=n.coordinates.slice(1,n.coordinates.length);return r.every(l=>o.some(i=>this.compareLine(l,i,1,!0)))}return!1}compareGeometryCollection(e,n){return Ae(e.geometries,n.geometries)&&this.compareBBox(e,n)&&e.geometries.every((r,o)=>this.compare(r,n.geometries[o]))}compareFeature(e,n){return e.id===n.id&&(this.compareProperties?Zt(e.properties,n.properties):!0)&&this.compareBBox(e,n)&&this.compare(e.geometry,n.geometry)}compareFeatureCollection(e,n){return Ae(e.features,n.features)&&this.compareBBox(e,n)&&e.features.every((r,o)=>this.compare(r,n.features[o]))}compareBBox(e,n){return!e.bbox&&!n.bbox||(e.bbox&&n.bbox?this.compareCoord(e.bbox,n.bbox):!1)}};J(Cr,"GeojsonEquality");function Ae(t,e){return t.coordinates?t.coordinates.length===e.coordinates.length:t.length===e.length}J(Ae,"sameLength");function rt(t){return t.coordinates.map(e=>({type:t.type.replace("Multi",""),coordinates:e}))}J(rt,"explode");var se=63710088e-1,sn={centimeters:se*100,centimetres:se*100,degrees:360/(2*Math.PI),feet:se*3.28084,inches:se*39.37,kilometers:se/1e3,kilometres:se/1e3,meters:se,metres:se,miles:se/1609.344,millimeters:se*1e3,millimetres:se*1e3,nauticalmiles:se/1852,radians:1,yards:se*1.0936},Mt={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Ce(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}J(Ce,"feature");function Er(t,e,n={}){switch(t){case"Point":return st(e).geometry;case"LineString":return ft(e).geometry;case"Polygon":return ut(e).geometry;case"MultiPoint":return fn(e).geometry;case"MultiLineString":return un(e).geometry;case"MultiPolygon":return mn(e).geometry;default:throw new Error(t+" is invalid")}}J(Er,"geometry");function st(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ie(t[0])||!Ie(t[1]))throw new Error("coordinates must contain numbers");return Ce({type:"Point",coordinates:t},e,n)}J(st,"point");function Lr(t,e,n={}){return Ze(t.map(r=>st(r,e)),n)}J(Lr,"points");function ut(t,e,n={}){for(const o of t){if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(let l=0;l<o[o.length-1].length;l++)if(o[o.length-1][l]!==o[0][l])throw new Error("First and last Position are not equivalent.")}return Ce({type:"Polygon",coordinates:t},e,n)}J(ut,"polygon");function $r(t,e,n={}){return Ze(t.map(r=>ut(r,e)),n)}J($r,"polygons");function ft(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return Ce({type:"LineString",coordinates:t},e,n)}J(ft,"lineString");function Mr(t,e,n={}){return Ze(t.map(r=>ft(r,e)),n)}J(Mr,"lineStrings");function Ze(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}J(Ze,"featureCollection");function un(t,e,n={}){return Ce({type:"MultiLineString",coordinates:t},e,n)}J(un,"multiLineString");function fn(t,e,n={}){return Ce({type:"MultiPoint",coordinates:t},e,n)}J(fn,"multiPoint");function mn(t,e,n={}){return Ce({type:"MultiPolygon",coordinates:t},e,n)}J(mn,"multiPolygon");function Pr(t,e,n={}){return Ce({type:"GeometryCollection",geometries:t},e,n)}J(Pr,"geometryCollection");function Ir(t,e=0){if(e&&!(e>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,e||0);return Math.round(t*n)/n}J(Ir,"round");function cn(t,e="kilometers"){const n=sn[e];if(!n)throw new Error(e+" units is invalid");return t*n}J(cn,"radiansToLength");function mt(t,e="kilometers"){const n=sn[e];if(!n)throw new Error(e+" units is invalid");return t/n}J(mt,"lengthToRadians");function Or(t,e){return ct(mt(t,e))}J(Or,"lengthToDegrees");function Tr(t){let e=t%360;return e<0&&(e+=360),e}J(Tr,"bearingToAzimuth");function ct(t){return t%(2*Math.PI)*180/Math.PI}J(ct,"radiansToDegrees");function Se(t){return t%360*Math.PI/180}J(Se,"degreesToRadians");function Ar(t,e="kilometers",n="kilometers"){if(!(t>=0))throw new Error("length must be a positive number");return cn(mt(t,e),n)}J(Ar,"convertLength");function Sr(t,e="meters",n="kilometers"){if(!(t>=0))throw new Error("area must be a positive number");const r=Mt[e];if(!r)throw new Error("invalid original units");const o=Mt[n];if(!o)throw new Error("invalid final units");return t/r*o}J(Sr,"convertArea");function Ie(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}J(Ie,"isNumber");function Fr(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}J(Fr,"isObject");function Br(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(t.length!==4&&t.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(e=>{if(!Ie(e))throw new Error("bbox must only contain numbers")})}J(Br,"validateBBox");function qr(t){if(!t)throw new Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw new Error("id must be a number or a string")}J(qr,"validateId");var Nr=Object.defineProperty,Ee=(t,e)=>Nr(t,"name",{value:e,configurable:!0});function ot(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}Ee(ot,"getCoord");function Gr(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}Ee(Gr,"getCoords");function gn(t){if(t.length>1&&Ie(t[0])&&Ie(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return gn(t[0]);throw new Error("coordinates must only contain numbers")}Ee(gn,"containsNumber");function zr(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}Ee(zr,"geojsonType");function Dr(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||t.type!=="Feature"||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}Ee(Dr,"featureOf");function Hr(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||t.type!=="FeatureCollection")throw new Error("Invalid input to "+n+", FeatureCollection required");for(const r of t.features){if(!r||r.type!=="Feature"||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+r.geometry.type)}}Ee(Hr,"collectionOf");function Rr(t){return t.type==="Feature"?t.geometry:t}Ee(Rr,"getGeom");function Ur(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}Ee(Ur,"getType");var Jr=Object.defineProperty,dn=(t,e)=>Jr(t,"name",{value:e,configurable:!0});function gt(t,e,n={}){if(n.final===!0)return _n(t,e);const r=ot(t),o=ot(e),l=Se(r[0]),i=Se(o[0]),a=Se(r[1]),s=Se(o[1]),c=Math.sin(i-l)*Math.cos(s),u=Math.cos(a)*Math.sin(s)-Math.sin(a)*Math.cos(s)*Math.cos(i-l);return ct(Math.atan2(c,u))}dn(gt,"bearing");function _n(t,e){let n=gt(e,t);return n=(n+180)%360,n}dn(_n,"calculateFinalBearing");var Kr=gt;function Pt(t,e,n){const r=t.slice();return r[30]=e[n],r[31]=e,r[32]=n,r}function It(t,e,n){const r=t.slice();return r[33]=e[n],r[34]=e,r[32]=n,r}function Wr(t){let e,n=oo(t[32])+"",r;return{c(){e=Y("span"),r=K(n),this.h()},l(o){e=x(o,"SPAN",{class:!0});var l=oe(e);r=W(l,n),l.forEach(k),this.h()},h(){Je(e,"class","dot svelte-o3xbby"),ee(e,"color","#4472c4"),ee(e,"background-color","white")},m(o,l){M(o,e,l),ue(e,r)},p:Ke,d(o){o&&k(e)}}}function Ot(t){let e,n,r;function o(s){t[15](s,t[33])}function l(){return t[16](t[32])}function i(){return t[17](t[32])}let a={draggable:!0,$$slots:{default:[Wr]},$$scope:{ctx:t}};return t[33].point!==void 0&&(a.lngLat=t[33].point),e=new et({props:a}),Q.push(()=>re(e,"lngLat",o)),e.$on("dragend",l),e.$on("click",i),{c(){F(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,c){q(e,s,c),r=!0},p(s,c){t=s;const u={};c[1]&16&&(u.$$scope={dirty:c,ctx:t}),!n&&c[0]&7&&(n=!0,u.lngLat=t[33].point,ne(()=>n=!1)),e.$set(u)},i(s){r||(w(e.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),r=!1},d(s){N(e,s)}}}function Vr(t){let e;return{c(){e=Y("span"),this.h()},l(n){e=x(n,"SPAN",{class:!0}),oe(e).forEach(k),this.h()},h(){Je(e,"class","dot svelte-o3xbby"),ee(e,"background-color",t[5][t[30].score]),ee(e,"opacity",t[30].kind=="pedestrian"?"0%":"100%")},m(n,r){M(n,e,r)},p(n,r){r[0]&7&&ee(e,"background-color",n[5][n[30].score]),r[0]&7&&ee(e,"opacity",n[30].kind=="pedestrian"?"0%":"100%")},d(n){n&&k(e)}}}function Xr(t){let e;return{c(){e=Y("span"),this.h()},l(n){e=x(n,"SPAN",{class:!0}),oe(e).forEach(k),this.h()},h(){Je(e,"class","dot svelte-o3xbby"),ee(e,"background-color",t[5][t[30].score]),ee(e,"opacity","0%")},m(n,r){M(n,e,r)},p(n,r){r[0]&7&&ee(e,"background-color",n[5][n[30].score])},d(n){n&&k(e)}}}function Tt(t){let e,n,r,o,l,i;function a(m){t[18](m,t[30])}function s(){return t[19](t[32])}function c(){return t[20](t[32])}let u={draggable:!0,$$slots:{default:[Vr]},$$scope:{ctx:t}};t[30].point1!==void 0&&(u.lngLat=t[30].point1),e=new et({props:u}),Q.push(()=>re(e,"lngLat",a)),e.$on("dragend",s),e.$on("click",c);function d(m){t[21](m,t[30])}function f(){return t[22](t[32])}function g(){return t[23](t[32])}let O={draggable:!0,$$slots:{default:[Xr]},$$scope:{ctx:t}};return t[30].point2!==void 0&&(O.lngLat=t[30].point2),o=new et({props:O}),Q.push(()=>re(o,"lngLat",d)),o.$on("dragend",f),o.$on("click",g),{c(){F(e.$$.fragment),r=H(),F(o.$$.fragment)},l(m){B(e.$$.fragment,m),r=R(m),B(o.$$.fragment,m)},m(m,p){q(e,m,p),M(m,r,p),q(o,m,p),i=!0},p(m,p){t=m;const A={};p[0]&7|p[1]&16&&(A.$$scope={dirty:p,ctx:t}),!n&&p[0]&7&&(n=!0,A.lngLat=t[30].point1,ne(()=>n=!1)),e.$set(A);const T={};p[0]&7|p[1]&16&&(T.$$scope={dirty:p,ctx:t}),!l&&p[0]&7&&(l=!0,T.lngLat=t[30].point2,ne(()=>l=!1)),o.$set(T)},i(m){i||(w(e.$$.fragment,m),w(o.$$.fragment,m),i=!0)},o(m){E(e.$$.fragment,m),E(o.$$.fragment,m),i=!1},d(m){m&&k(r),N(e,m),N(o,m)}}}function Zr(t){let e=(t[29].name||"Untitled movement")+"",n;return{c(){n=K(e)},l(r){n=W(r,e)},m(r,o){M(r,n,o)},p(r,o){o[0]&536870912&&e!==(e=(r[29].name||"Untitled movement")+"")&&ye(n,e)},d(r){r&&k(n)}}}function Qr(t){let e,n;return e=new Yt({props:{$$slots:{default:[Zr,({props:r})=>({29:r}),({props:r})=>[r?536870912:0]]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){q(e,r,o),n=!0},p(r,o){const l={};o[0]&536870912|o[1]&16&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Yr(t){let e=(t[29].name||"Untitled movement")+"",n;return{c(){n=K(e)},l(r){n=W(r,e)},m(r,o){M(r,n,o)},p(r,o){o[0]&536870912&&e!==(e=(r[29].name||"Untitled movement")+"")&&ye(n,e)},d(r){r&&k(n)}}}function xr(t){let e,n;return e=new Yt({props:{$$slots:{default:[Yr,({props:r})=>({29:r}),({props:r})=>[r?536870912:0]]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){q(e,r,o),n=!0},p(r,o){const l={};o[0]&536870912|o[1]&16&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function eo(t){let e,n,r,o,l,i;return e=new tt({props:{id:"jat-cycling",manageHoverState:!0,paint:{"line-width":wt(6,10),"line-color":["get","color"]},filter:["!=",["get","kind"],"pedestrian"],$$slots:{default:[Qr]},$$scope:{ctx:t}}}),e.$on("click",t[7]),r=new tt({props:{id:"jat-pedestrian",manageHoverState:!0,paint:{"line-width":wt(6,8),"line-color":["get","color"],"line-dasharray":[3,2]},filter:["==",["get","kind"],"pedestrian"],$$slots:{default:[xr]},$$scope:{ctx:t}}}),r.$on("click",t[7]),l=new Kn({props:{id:"jat-arrow",filter:["has","angle"],paint:{"text-color":["get","color"],"text-halo-color":"white","text-halo-width":3},layout:{"text-field":"⬆","text-overlap":"always","text-rotate":["+",["get","angle"],["match",["get","kind"],"cycling-left-turn",-90,"cycling-right-turn",90,0]],"text-size":70}}}),{c(){F(e.$$.fragment),n=H(),F(r.$$.fragment),o=H(),F(l.$$.fragment)},l(a){B(e.$$.fragment,a),n=R(a),B(r.$$.fragment,a),o=R(a),B(l.$$.fragment,a)},m(a,s){q(e,a,s),M(a,n,s),q(r,a,s),M(a,o,s),q(l,a,s),i=!0},p(a,s){const c={};s[1]&16&&(c.$$scope={dirty:s,ctx:a}),e.$set(c);const u={};s[1]&16&&(u.$$scope={dirty:s,ctx:a}),r.$set(u)},i(a){i||(w(e.$$.fragment,a),w(r.$$.fragment,a),w(l.$$.fragment,a),i=!0)},o(a){E(e.$$.fragment,a),E(r.$$.fragment,a),E(l.$$.fragment,a),i=!1},d(a){a&&(k(n),k(o)),N(e,a),N(r,a),N(l,a)}}}function to(t){let e,n,r,o;return e=new tt({props:{paint:{"line-width":5,"line-color":"yellow","line-gap-width":45}}}),r=new Mn({props:{filter:["==",["get","kind"],"arm"],paint:{"circle-radius":20,"circle-opacity":0,"circle-stroke-width":5,"circle-stroke-color":"yellow"}}}),{c(){F(e.$$.fragment),n=H(),F(r.$$.fragment)},l(l){B(e.$$.fragment,l),n=R(l),B(r.$$.fragment,l)},m(l,i){q(e,l,i),M(l,n,i),q(r,l,i),o=!0},p:Ke,i(l){o||(w(e.$$.fragment,l),w(r.$$.fragment,l),o=!0)},o(l){E(e.$$.fragment,l),E(r.$$.fragment,l),o=!1},d(l){l&&k(n),N(e,l),N(r,l)}}}function no(t){let e,n,r,o,l,i,a,s,c=ge(t[2].jat[t[0]][t[1]].arms),u=[];for(let m=0;m<c.length;m+=1)u[m]=Ot(It(t,c,m));const d=m=>E(u[m],1,1,()=>{u[m]=null});let f=ge(t[2].jat[t[0]][t[1]].movements),g=[];for(let m=0;m<f.length;m+=1)g[m]=Tt(Pt(t,f,m));const O=m=>E(g[m],1,1,()=>{g[m]=null});return r=new vt({props:{data:t[8](t[2]),$$slots:{default:[eo]},$$scope:{ctx:t}}}),l=new vt({props:{data:t[4],$$slots:{default:[to]},$$scope:{ctx:t}}}),a=new $n({props:{map:t[3]}}),{c(){for(let m=0;m<u.length;m+=1)u[m].c();e=H();for(let m=0;m<g.length;m+=1)g[m].c();n=H(),F(r.$$.fragment),o=H(),F(l.$$.fragment),i=H(),F(a.$$.fragment)},l(m){for(let p=0;p<u.length;p+=1)u[p].l(m);e=R(m);for(let p=0;p<g.length;p+=1)g[p].l(m);n=R(m),B(r.$$.fragment,m),o=R(m),B(l.$$.fragment,m),i=R(m),B(a.$$.fragment,m)},m(m,p){for(let A=0;A<u.length;A+=1)u[A]&&u[A].m(m,p);M(m,e,p);for(let A=0;A<g.length;A+=1)g[A]&&g[A].m(m,p);M(m,n,p),q(r,m,p),M(m,o,p),q(l,m,p),M(m,i,p),q(a,m,p),s=!0},p(m,p){if(p[0]&71){c=ge(m[2].jat[m[0]][m[1]].arms);let L;for(L=0;L<c.length;L+=1){const y=It(m,c,L);u[L]?(u[L].p(y,p),w(u[L],1)):(u[L]=Ot(y),u[L].c(),w(u[L],1),u[L].m(e.parentNode,e))}for(ie(),L=c.length;L<u.length;L+=1)d(L);le()}if(p[0]&103){f=ge(m[2].jat[m[0]][m[1]].movements);let L;for(L=0;L<f.length;L+=1){const y=Pt(m,f,L);g[L]?(g[L].p(y,p),w(g[L],1)):(g[L]=Tt(y),g[L].c(),w(g[L],1),g[L].m(n.parentNode,n))}for(ie(),L=f.length;L<g.length;L+=1)O(L);le()}const A={};p[0]&4&&(A.data=m[8](m[2])),p[1]&16&&(A.$$scope={dirty:p,ctx:m}),r.$set(A);const T={};p[0]&16&&(T.data=m[4]),p[1]&16&&(T.$$scope={dirty:p,ctx:m}),l.$set(T);const P={};p[0]&8&&(P.map=m[3]),a.$set(P)},i(m){if(!s){for(let p=0;p<c.length;p+=1)w(u[p]);for(let p=0;p<f.length;p+=1)w(g[p]);w(r.$$.fragment,m),w(l.$$.fragment,m),w(a.$$.fragment,m),s=!0}},o(m){u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)E(u[p]);g=g.filter(Boolean);for(let p=0;p<g.length;p+=1)E(g[p]);E(r.$$.fragment,m),E(l.$$.fragment,m),E(a.$$.fragment,m),s=!1},d(m){m&&(k(e),k(n),k(o),k(i)),Be(u,m),Be(g,m),N(r,m),N(l,m),N(a,m)}}}function ro(t){let e,n,r;function o(i){t[24](i)}let l={$$slots:{default:[no]},$$scope:{ctx:t}};return t[3]!==void 0&&(l.map=t[3]),e=new Cn({props:l}),Q.push(()=>re(e,"map",o)),{c(){F(e.$$.fragment)},l(i){B(e.$$.fragment,i)},m(i,a){q(e,i,a),r=!0},p(i,a){const s={};a[0]&31|a[1]&16&&(s.$$scope={dirty:a,ctx:i}),!n&&a[0]&8&&(n=!0,s.map=i[3],ne(()=>n=!1)),e.$set(s)},i(i){r||(w(e.$$.fragment,i),r=!0)},o(i){E(e.$$.fragment,i),r=!1},d(i){N(e,i)}}}function At(t,e){return{type:"Feature",id:e,properties:{kind:"arm"},geometry:{type:"Point",coordinates:t.point}}}function oo(t){return String.fromCharCode(t+65)}function io(t,e,n){let r,o;be(t,X,j=>n(2,o=j));let{junctionIdx:l}=e,{stage:i}=e,{newKind:a}=e,{editing:s}=e,{hoveringSidebar:c}=e,{streetviewOn:u}=e,d,f={0:Ne.red.background,1:Ne.amber.background,2:Ne.green.background,X:Ne.critical.background};function g(j,h,V){let te={type:"FeatureCollection",features:[]},he=h??V;return he!=null&&(he.kind=="arm"?te.features.push(At(j.jat[l][i].arms[he.idx],he.idx)):te.features.push(T(j.jat[l][i].movements[he.idx],he.idx))),te}function O(j){n(9,s=j),n(10,c=null)}function m(j){if(!u){for(let h of d.queryRenderedFeatures(j.point,{layers:["jat-cycling","jat-pedestrian"]}))return;if(s!=null){n(9,s=null);return}a=="arm"?(Fe(X,o.jat[l][i].arms=[...o.jat[l][i].arms,{point:j.lngLat.toArray(),name:""}],o),n(9,s={kind:"arm",idx:o.jat[l][i].arms.length-1})):(Fe(X,o.jat[l][i].movements=[...o.jat[l][i].movements,{point1:j.lngLat.toArray(),point2:kr(j.lngLat.toArray(),.01,0).geometry.coordinates,kind:"cycling-straight",score:"X",name:"",notes:""}],o),n(9,s={kind:"movement",idx:o.jat[l][i].movements.length-1})),n(10,c=null)}}function p(j){O({kind:"movement",idx:j.detail.features[0].id})}Jt(()=>{d.on("click",m),L(!1)}),Kt(()=>{d.off("click",m)});function A(j){let h={type:"FeatureCollection",features:j.jat[l][i].movements.map((V,te)=>T(V,te))};for(let V of j.jat[l][i].movements)if(h.features.push(P(V,h.features.length)),V.kind=="pedestrian"){let te={...V,point1:V.point2,point2:V.point1};h.features.push(P(te,h.features.length))}for(let V of j.jat[l][i].arms)h.features.push(At(V,h.features.length));return h}function T(j,h){return{type:"Feature",id:h,properties:{name:j.name,kind:j.kind,color:f[j.score]},geometry:{type:"LineString",coordinates:[j.point1,j.point2]}}}function P(j,h){return{type:"Feature",id:h,properties:{kind:j.kind,color:f[j.score],angle:Kr(j.point1,j.point2)},geometry:{type:"Point",coordinates:j.point2}}}function L(j){let h=A(o);h.features.length>0&&d.fitBounds(Ln(h),{padding:20,animate:j})}function y(){return d}function b(j,h){t.$$.not_equal(h.point,j)&&(h.point=j,X.set(o))}const G=j=>O({kind:"arm",idx:j}),z=j=>O({kind:"arm",idx:j});function D(j,h){t.$$.not_equal(h.point1,j)&&(h.point1=j,X.set(o))}const S=j=>O({kind:"movement",idx:j}),I=j=>O({kind:"movement",idx:j});function $(j,h){t.$$.not_equal(h.point2,j)&&(h.point2=j,X.set(o))}const _=j=>O({kind:"movement",idx:j}),v=j=>O({kind:"movement",idx:j});function Z(j){d=j,n(3,d)}return t.$$set=j=>{"junctionIdx"in j&&n(0,l=j.junctionIdx),"stage"in j&&n(1,i=j.stage),"newKind"in j&&n(11,a=j.newKind),"editing"in j&&n(9,s=j.editing),"hoveringSidebar"in j&&n(10,c=j.hoveringSidebar),"streetviewOn"in j&&n(12,u=j.streetviewOn)},t.$$.update=()=>{t.$$.dirty[0]&1540&&n(4,r=g(o,s,c))},[l,i,o,d,r,f,O,p,A,s,c,a,u,L,y,b,G,z,D,S,I,$,_,v,Z]}class lo extends ve{constructor(e){super(),we(this,e,io,ro,_e,{junctionIdx:0,stage:1,newKind:11,editing:9,hoveringSidebar:10,streetviewOn:12,zoom:13,getMap:14},null,[-1,-1])}get zoom(){return this.$$.ctx[13]}get getMap(){return this.$$.ctx[14]}}function ao(t){let e,n,r,o,l,i,a,s,c,u,d,f;function g(y){t[6](y)}let O={label:"Name"};t[3].jat[t[0]][t[1]].movements[t[2]].name!==void 0&&(O.value=t[3].jat[t[0]][t[1]].movements[t[2]].name),e=new it({props:O}),Q.push(()=>re(e,"value",g));function m(y){t[7](y)}let p={label:"Movement",choices:t[4]};t[3].jat[t[0]][t[1]].movements[t[2]].kind!==void 0&&(p.value=t[3].jat[t[0]][t[1]].movements[t[2]].kind),o=new kt({props:p}),Q.push(()=>re(o,"value",m));function A(y){t[8](y)}let T={label:"Score",choices:t[5]};t[3].jat[t[0]][t[1]].movements[t[2]].score!==void 0&&(T.value=t[3].jat[t[0]][t[1]].movements[t[2]].score),a=new kt({props:T}),Q.push(()=>re(a,"value",A));function P(y){t[9](y)}let L={label:"Comments"};return t[3].jat[t[0]][t[1]].movements[t[2]].notes!==void 0&&(L.value=t[3].jat[t[0]][t[1]].movements[t[2]].notes),u=new Qt({props:L}),Q.push(()=>re(u,"value",P)),{c(){F(e.$$.fragment),r=H(),F(o.$$.fragment),i=H(),F(a.$$.fragment),c=H(),F(u.$$.fragment)},l(y){B(e.$$.fragment,y),r=R(y),B(o.$$.fragment,y),i=R(y),B(a.$$.fragment,y),c=R(y),B(u.$$.fragment,y)},m(y,b){q(e,y,b),M(y,r,b),q(o,y,b),M(y,i,b),q(a,y,b),M(y,c,b),q(u,y,b),f=!0},p(y,[b]){const G={};!n&&b&15&&(n=!0,G.value=y[3].jat[y[0]][y[1]].movements[y[2]].name,ne(()=>n=!1)),e.$set(G);const z={};!l&&b&15&&(l=!0,z.value=y[3].jat[y[0]][y[1]].movements[y[2]].kind,ne(()=>l=!1)),o.$set(z);const D={};!s&&b&15&&(s=!0,D.value=y[3].jat[y[0]][y[1]].movements[y[2]].score,ne(()=>s=!1)),a.$set(D);const S={};!d&&b&15&&(d=!0,S.value=y[3].jat[y[0]][y[1]].movements[y[2]].notes,ne(()=>d=!1)),u.$set(S)},i(y){f||(w(e.$$.fragment,y),w(o.$$.fragment,y),w(a.$$.fragment,y),w(u.$$.fragment,y),f=!0)},o(y){E(e.$$.fragment,y),E(o.$$.fragment,y),E(a.$$.fragment,y),E(u.$$.fragment,y),f=!1},d(y){y&&(k(r),k(i),k(c)),N(e,y),N(o,y),N(a,y),N(u,y)}}}function so(t,e,n){let r;be(t,X,g=>n(3,r=g));let{junctionIdx:o}=e,{stage:l}=e,{idx:i}=e,a=Fn(["cycling-straight","cycling-left-turn","cycling-right-turn","pedestrian"]),s=[["X","X - black"],["0","0 - red"],["1","1 - amber"],["2","2 - green"]];function c(g){t.$$.not_equal(r.jat[o][l].movements[i].name,g)&&(r.jat[o][l].movements[i].name=g,X.set(r))}function u(g){t.$$.not_equal(r.jat[o][l].movements[i].kind,g)&&(r.jat[o][l].movements[i].kind=g,X.set(r))}function d(g){t.$$.not_equal(r.jat[o][l].movements[i].score,g)&&(r.jat[o][l].movements[i].score=g,X.set(r))}function f(g){t.$$.not_equal(r.jat[o][l].movements[i].notes,g)&&(r.jat[o][l].movements[i].notes=g,X.set(r))}return t.$$set=g=>{"junctionIdx"in g&&n(0,o=g.junctionIdx),"stage"in g&&n(1,l=g.stage),"idx"in g&&n(2,i=g.idx)},[o,l,i,r,a,s,c,u,d,f]}class uo extends ve{constructor(e){super(),we(this,e,so,ao,_e,{junctionIdx:0,stage:1,idx:2})}}const{window:fo}=En;function St(t,e,n){const r=t.slice();return r[27]=e[n],r[29]=n,r}function Ft(t,e,n){const r=t.slice();return r[30]=e[n],r[29]=n,r}function mo(t){let e,n,r,o,l,i,a,s;e=new Sn({props:{$$slots:{default:[go]},$$scope:{ctx:t}}}),e.$on("click",t[23]),r=new Wt({props:{$$slots:{default:[_o]},$$scope:{ctx:t}}}),r.$on("click",t[10]);const c=[ho,po],u=[];function d(f,g){return f[3].kind=="movement"?0:1}return l=d(t),i=u[l]=c[l](t),{c(){F(e.$$.fragment),n=H(),F(r.$$.fragment),o=H(),i.c(),a=me()},l(f){B(e.$$.fragment,f),n=R(f),B(r.$$.fragment,f),o=R(f),i.l(f),a=me()},m(f,g){q(e,f,g),M(f,n,g),q(r,f,g),M(f,o,g),u[l].m(f,g),M(f,a,g),s=!0},p(f,g){const O={};g[1]&2&&(O.$$scope={dirty:g,ctx:f}),e.$set(O);const m={};g[1]&2&&(m.$$scope={dirty:g,ctx:f}),r.$set(m);let p=l;l=d(f),l===p?u[l].p(f,g):(ie(),E(u[p],1,1,()=>{u[p]=null}),le(),i=u[l],i?i.p(f,g):(i=u[l]=c[l](f),i.c()),w(i,1),i.m(a.parentNode,a))},i(f){s||(w(e.$$.fragment,f),w(r.$$.fragment,f),w(i),s=!0)},o(f){E(e.$$.fragment,f),E(r.$$.fragment,f),E(i),s=!1},d(f){f&&(k(n),k(o),k(a)),N(e,f),N(r,f),u[l].d(f)}}}function co(t){let e,n,r,o,l,i,a="Arms",s,c,u,d,f,g="Movements",O,m,p,A,T;e=new An({props:{label:"Tools",$$slots:{default:[yo]},$$scope:{ctx:t}}});function P(_){t[16](_)}let L={legend:"Add to map",choices:[["arm","Arm"],["movement","Movement"]],inlineSmall:!0};t[2]!==void 0&&(L.value=t[2]),r=new Pn({props:L}),Q.push(()=>re(r,"value",P));let y=ge(t[7].jat[t[0]][t[1]].arms),b=[];for(let _=0;_<y.length;_+=1)b[_]=qt(Ft(t,y,_));const G=_=>E(b[_],1,1,()=>{b[_]=null});let z=t[7].jat[t[0]][t[8]].arms.length>0&&Nt(t),D=ge(t[7].jat[t[0]][t[1]].movements),S=[];for(let _=0;_<D.length;_+=1)S[_]=Gt(St(t,D,_));const I=_=>E(S[_],1,1,()=>{S[_]=null});let $=t[7].jat[t[0]][t[1]].movements.length>0&&zt(t);return{c(){F(e.$$.fragment),n=H(),F(r.$$.fragment),l=H(),i=Y("h3"),i.textContent=a,s=H(),c=Y("ul");for(let _=0;_<b.length;_+=1)b[_].c();u=H(),z&&z.c(),d=H(),f=Y("h3"),f.textContent=g,O=H(),m=Y("ol");for(let _=0;_<S.length;_+=1)S[_].c();p=H(),$&&$.c(),A=me()},l(_){B(e.$$.fragment,_),n=R(_),B(r.$$.fragment,_),l=R(_),i=x(_,"H3",{"data-svelte-h":!0}),yt(i)!=="svelte-ld74qb"&&(i.textContent=a),s=R(_),c=x(_,"UL",{});var v=oe(c);for(let j=0;j<b.length;j+=1)b[j].l(v);v.forEach(k),u=R(_),z&&z.l(_),d=R(_),f=x(_,"H3",{"data-svelte-h":!0}),yt(f)!=="svelte-1dc52s8"&&(f.textContent=g),O=R(_),m=x(_,"OL",{});var Z=oe(m);for(let j=0;j<S.length;j+=1)S[j].l(Z);Z.forEach(k),p=R(_),$&&$.l(_),A=me()},m(_,v){q(e,_,v),M(_,n,v),q(r,_,v),M(_,l,v),M(_,i,v),M(_,s,v),M(_,c,v);for(let Z=0;Z<b.length;Z+=1)b[Z]&&b[Z].m(c,null);M(_,u,v),z&&z.m(_,v),M(_,d,v),M(_,f,v),M(_,O,v),M(_,m,v);for(let Z=0;Z<S.length;Z+=1)S[Z]&&S[Z].m(m,null);M(_,p,v),$&&$.m(_,v),M(_,A,v),T=!0},p(_,v){const Z={};v[0]&96|v[1]&2&&(Z.$$scope={dirty:v,ctx:_}),e.$set(Z);const j={};if(!o&&v[0]&4&&(o=!0,j.value=_[2],ne(()=>o=!1)),r.$set(j),v[0]&659){y=ge(_[7].jat[_[0]][_[1]].arms);let h;for(h=0;h<y.length;h+=1){const V=Ft(_,y,h);b[h]?(b[h].p(V,v),w(b[h],1)):(b[h]=qt(V),b[h].c(),w(b[h],1),b[h].m(c,null))}for(ie(),h=y.length;h<b.length;h+=1)G(h);le()}if(_[7].jat[_[0]][_[8]].arms.length>0?z?(z.p(_,v),v[0]&129&&w(z,1)):(z=Nt(_),z.c(),w(z,1),z.m(d.parentNode,d)):z&&(ie(),E(z,1,1,()=>{z=null}),le()),v[0]&659){D=ge(_[7].jat[_[0]][_[1]].movements);let h;for(h=0;h<D.length;h+=1){const V=St(_,D,h);S[h]?(S[h].p(V,v),w(S[h],1)):(S[h]=Gt(V),S[h].c(),w(S[h],1),S[h].m(m,null))}for(ie(),h=D.length;h<S.length;h+=1)I(h);le()}_[7].jat[_[0]][_[1]].movements.length>0?$?$.p(_,v):($=zt(_),$.c(),$.m(A.parentNode,A)):$&&($.d(1),$=null)},i(_){if(!T){w(e.$$.fragment,_),w(r.$$.fragment,_);for(let v=0;v<y.length;v+=1)w(b[v]);w(z);for(let v=0;v<D.length;v+=1)w(S[v]);T=!0}},o(_){E(e.$$.fragment,_),E(r.$$.fragment,_),b=b.filter(Boolean);for(let v=0;v<b.length;v+=1)E(b[v]);E(z),S=S.filter(Boolean);for(let v=0;v<S.length;v+=1)E(S[v]);T=!1},d(_){_&&(k(n),k(l),k(i),k(s),k(c),k(u),k(d),k(f),k(O),k(m),k(p),k(A)),N(e,_),N(r,_),Be(b,_),z&&z.d(_),Be(S,_),$&&$.d(_)}}}function go(t){let e;return{c(){e=K("Save")},l(n){e=W(n,"Save")},m(n,r){M(n,e,r)},d(n){n&&k(e)}}}function _o(t){let e;return{c(){e=K("Delete")},l(n){e=W(n,"Delete")},m(n,r){M(n,e,r)},d(n){n&&k(e)}}}function po(t){let e,n,r;function o(i){t[24](i)}let l={label:"Arm Name"};return t[7].jat[t[0]][t[1]].arms[t[3].idx].name!==void 0&&(l.value=t[7].jat[t[0]][t[1]].arms[t[3].idx].name),e=new it({props:l}),Q.push(()=>re(e,"value",o)),{c(){F(e.$$.fragment)},l(i){B(e.$$.fragment,i)},m(i,a){q(e,i,a),r=!0},p(i,a){const s={};!n&&a[0]&139&&(n=!0,s.value=i[7].jat[i[0]][i[1]].arms[i[3].idx].name,ne(()=>n=!1)),e.$set(s)},i(i){r||(w(e.$$.fragment,i),r=!0)},o(i){E(e.$$.fragment,i),r=!1},d(i){N(e,i)}}}function ho(t){let e,n;return e=new uo({props:{junctionIdx:t[0],stage:t[1],idx:t[3].idx}}),{c(){F(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){q(e,r,o),n=!0},p(r,o){const l={};o[0]&1&&(l.junctionIdx=r[0]),o[0]&2&&(l.stage=r[1]),o[0]&8&&(l.idx=r[3].idx),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function bo(t){let e;return{c(){e=K("Zoom to fit")},l(n){e=W(n,"Zoom to fit")},m(n,r){M(n,e,r)},d(n){n&&k(e)}}}function Bt(t){var i;let e,n,r;function o(a){t[15](a)}let l={map:(i=t[6])==null?void 0:i.getMap()};return t[5]!==void 0&&(l.enabled=t[5]),e=new Tn({props:l}),Q.push(()=>re(e,"enabled",o)),{c(){F(e.$$.fragment)},l(a){B(e.$$.fragment,a)},m(a,s){q(e,a,s),r=!0},p(a,s){var u;const c={};s[0]&64&&(c.map=(u=a[6])==null?void 0:u.getMap()),!n&&s[0]&32&&(n=!0,c.enabled=a[5],ne(()=>n=!1)),e.$set(c)},i(a){r||(w(e.$$.fragment,a),r=!0)},o(a){E(e.$$.fragment,a),r=!1},d(a){N(e,a)}}}function yo(t){var d;let e,n,r,o,l,i,a=(d=t[6])==null?void 0:d.getMap(),s,c;e=new pe({props:{$$slots:{default:[bo]},$$scope:{ctx:t}}}),e.$on("click",t[14]),r=new In({}),l=new On({});let u=a&&Bt(t);return{c(){F(e.$$.fragment),n=H(),F(r.$$.fragment),o=H(),F(l.$$.fragment),i=H(),u&&u.c(),s=me()},l(f){B(e.$$.fragment,f),n=R(f),B(r.$$.fragment,f),o=R(f),B(l.$$.fragment,f),i=R(f),u&&u.l(f),s=me()},m(f,g){q(e,f,g),M(f,n,g),q(r,f,g),M(f,o,g),q(l,f,g),M(f,i,g),u&&u.m(f,g),M(f,s,g),c=!0},p(f,g){var m;const O={};g[1]&2&&(O.$$scope={dirty:g,ctx:f}),e.$set(O),g[0]&64&&(a=(m=f[6])==null?void 0:m.getMap()),a?u?(u.p(f,g),g[0]&64&&w(u,1)):(u=Bt(f),u.c(),w(u,1),u.m(s.parentNode,s)):u&&(ie(),E(u,1,1,()=>{u=null}),le())},i(f){c||(w(e.$$.fragment,f),w(r.$$.fragment,f),w(l.$$.fragment,f),w(u),c=!0)},o(f){E(e.$$.fragment,f),E(r.$$.fragment,f),E(l.$$.fragment,f),E(u),c=!1},d(f){f&&(k(n),k(o),k(i),k(s)),N(e,f),N(r,f),N(l,f),u&&u.d(f)}}}function vo(t){let e=Co(t[29])+"",n,r,o=(t[30].name||"Unnamed arm")+"",l;return{c(){n=K(e),r=K(" - "),l=K(o)},l(i){n=W(i,e),r=W(i," - "),l=W(i,o)},m(i,a){M(i,n,a),M(i,r,a),M(i,l,a)},p(i,a){a[0]&131&&o!==(o=(i[30].name||"Unnamed arm")+"")&&ye(l,o)},d(i){i&&(k(n),k(r),k(l))}}}function qt(t){let e,n,r,o;function l(){return t[17](t[29])}function i(){return t[18](t[29])}return n=new pe({props:{$$slots:{default:[vo]},$$scope:{ctx:t}}}),n.$on("click",l),n.$on("mouseenter",i),n.$on("mouseleave",t[19]),{c(){e=Y("li"),F(n.$$.fragment),r=H()},l(a){e=x(a,"LI",{});var s=oe(e);B(n.$$.fragment,s),r=R(s),s.forEach(k)},m(a,s){M(a,e,s),q(n,e,null),ue(e,r),o=!0},p(a,s){t=a;const c={};s[0]&131|s[1]&2&&(c.$$scope={dirty:s,ctx:t}),n.$set(c)},i(a){o||(w(n.$$.fragment,a),o=!0)},o(a){E(n.$$.fragment,a),o=!1},d(a){a&&k(e),N(n)}}}function Nt(t){let e,n;return e=new pe({props:{$$slots:{default:[wo]},$$scope:{ctx:t}}}),e.$on("click",t[12]),{c(){F(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){q(e,r,o),n=!0},p(r,o){const l={};o[1]&2&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function wo(t){let e,n;return{c(){e=K("Copy arms from "),n=K(t[8])},l(r){e=W(r,"Copy arms from "),n=W(r,t[8])},m(r,o){M(r,e,o),M(r,n,o)},p:Ke,d(r){r&&(k(e),k(n))}}}function ko(t){let e=(t[27].name||"Unnamed movement")+"",n;return{c(){n=K(e)},l(r){n=W(r,e)},m(r,o){M(r,n,o)},p(r,o){o[0]&131&&e!==(e=(r[27].name||"Unnamed movement")+"")&&ye(n,e)},d(r){r&&k(n)}}}function Gt(t){let e,n,r,o;function l(){return t[20](t[29])}function i(){return t[21](t[29])}return n=new pe({props:{$$slots:{default:[ko]},$$scope:{ctx:t}}}),n.$on("click",l),n.$on("mouseenter",i),n.$on("mouseleave",t[22]),{c(){e=Y("li"),F(n.$$.fragment),r=H()},l(a){e=x(a,"LI",{});var s=oe(e);B(n.$$.fragment,s),r=R(s),s.forEach(k)},m(a,s){M(a,e,s),q(n,e,null),ue(e,r),o=!0},p(a,s){t=a;const c={};s[0]&131|s[1]&2&&(c.$$scope={dirty:s,ctx:t}),n.$set(c)},i(a){o||(w(n.$$.fragment,a),o=!0)},o(a){E(n.$$.fragment,a),o=!1},d(a){a&&k(e),N(n)}}}function zt(t){let e,n,r=Dt(t[7].jat[t[0]][t[1]])+"",o,l;return{c(){e=Y("p"),n=K("Total JAT score: "),o=K(r),l=K("%")},l(i){e=x(i,"P",{});var a=oe(e);n=W(a,"Total JAT score: "),o=W(a,r),l=W(a,"%"),a.forEach(k)},m(i,a){M(i,e,a),ue(e,n),ue(e,o),ue(e,l)},p(i,a){a[0]&131&&r!==(r=Dt(i[7].jat[i[0]][i[1]])+"")&&ye(o,r)},d(i){i&&k(e)}}}function jo(t){let e,n,r,o,l,i,a,s,c,u,d,f,g,O;function m(b){t[13](b)}let p={label:"Commentary / Notes"};t[7].jat[t[0]][t[1]].notes!==void 0&&(p.value=t[7].jat[t[0]][t[1]].notes),e=new Qt({props:p}),Q.push(()=>re(e,"value",m));const A=[co,mo],T=[];function P(b,G){return b[3]==null?0:1}i=P(t),a=T[i]=A[i](t);function L(b){t[26](b)}let y={junctionIdx:t[0],stage:t[1],newKind:t[2],hoveringSidebar:t[4],streetviewOn:t[5]};return t[3]!==void 0&&(y.editing=t[3]),u=new lo({props:y}),t[25](u),Q.push(()=>re(u,"editing",L)),{c(){F(e.$$.fragment),r=H(),o=Y("div"),l=Y("div"),a.c(),s=H(),c=Y("div"),F(u.$$.fragment),this.h()},l(b){B(e.$$.fragment,b),r=R(b),o=x(b,"DIV",{style:!0});var G=oe(o);l=x(G,"DIV",{style:!0});var z=oe(l);a.l(z),z.forEach(k),s=R(G),c=x(G,"DIV",{style:!0});var D=oe(c);B(u.$$.fragment,D),D.forEach(k),G.forEach(k),this.h()},h(){ee(l,"width","30%"),ee(l,"overflow-y","scroll"),ee(l,"padding","10px"),ee(l,"border","1px solid black"),ee(c,"position","relative"),ee(c,"width","100%"),ee(o,"display","flex"),ee(o,"height","80vh")},m(b,G){q(e,b,G),M(b,r,G),M(b,o,G),ue(o,l),T[i].m(l,null),ue(o,s),ue(o,c),q(u,c,null),f=!0,g||(O=vn(fo,"keydown",t[11]),g=!0)},p(b,G){const z={};!n&&G[0]&131&&(n=!0,z.value=b[7].jat[b[0]][b[1]].notes,ne(()=>n=!1)),e.$set(z);let D=i;i=P(b),i===D?T[i].p(b,G):(ie(),E(T[D],1,1,()=>{T[D]=null}),le(),a=T[i],a?a.p(b,G):(a=T[i]=A[i](b),a.c()),w(a,1),a.m(l,null));const S={};G[0]&1&&(S.junctionIdx=b[0]),G[0]&2&&(S.stage=b[1]),G[0]&4&&(S.newKind=b[2]),G[0]&16&&(S.hoveringSidebar=b[4]),G[0]&32&&(S.streetviewOn=b[5]),!d&&G[0]&8&&(d=!0,S.editing=b[3],ne(()=>d=!1)),u.$set(S)},i(b){f||(w(e.$$.fragment,b),w(a),w(u.$$.fragment,b),f=!0)},o(b){E(e.$$.fragment,b),E(a),E(u.$$.fragment,b),f=!1},d(b){b&&(k(r),k(o)),N(e,b),T[i].d(),t[25](null),N(u),g=!1,O()}}}function Co(t){return String.fromCharCode(t+65)}function Dt(t){let e=0,n=0;for(let r of t.movements)e+={0:0,1:1,2:2,X:0}[r.score],n+=2;return e/n*100}function Eo(t,e,n){let r;be(t,X,v=>n(7,r=v));let{junctionIdx:o}=e,{stage:l}=e,i=l=="existing"?"proposed":"existing",a="arm",s=null,c=null,u=!1,d=null;function f(v){n(3,s=v),n(4,c=null)}function g(){window.confirm(`Delete this ${s.kind}?`)&&(s.kind=="movement"?(r.jat[o][l].movements.splice(s.idx,1),X.set(r)):(r.jat[o][l].arms.splice(s.idx,1),X.set(r)),n(3,s=null))}function O(v){s!=null&&v.key=="Escape"?(v.stopPropagation(),n(3,s=null)):s!=null&&v.key=="Delete"&&g()}function m(){r.jat[o][l].arms.length>0&&!window.confirm("Overwrite arms?")||(Fe(X,r.jat[o][l].arms=JSON.parse(JSON.stringify(r.jat[o][i].arms)),r),X.set(r))}function p(v){t.$$.not_equal(r.jat[o][l].notes,v)&&(r.jat[o][l].notes=v,X.set(r))}const A=()=>d==null?void 0:d.zoom(!0);function T(v){u=v,n(5,u)}function P(v){a=v,n(2,a)}const L=v=>f({kind:"arm",idx:v}),y=v=>n(4,c={kind:"arm",idx:v}),b=()=>n(4,c=null),G=v=>f({kind:"movement",idx:v}),z=v=>n(4,c={kind:"movement",idx:v}),D=()=>n(4,c=null),S=()=>n(3,s=null);function I(v){t.$$.not_equal(r.jat[o][l].arms[s.idx].name,v)&&(r.jat[o][l].arms[s.idx].name=v,X.set(r))}function $(v){Q[v?"unshift":"push"](()=>{d=v,n(6,d)})}function _(v){s=v,n(3,s)}return t.$$set=v=>{"junctionIdx"in v&&n(0,o=v.junctionIdx),"stage"in v&&n(1,l=v.stage)},[o,l,a,s,c,u,d,r,i,f,g,O,m,p,A,T,P,L,y,b,G,z,D,S,I,$,_]}class Lo extends ve{constructor(e){super(),we(this,e,Eo,jo,_e,{junctionIdx:0,stage:1},null,[-1,-1])}}function Ht(t,e,n){const r=t.slice();return r[10]=e[n],r[12]=n,r}function $o(t){let e,n=(t[1].jat[t[0].idx].name||"Untitled junction")+"",r,o,l=t[0].stage+"",i,a,s,c,u,d,f,g=t[0].stage,O,m;s=new wn({props:{$$slots:{default:[Fo]},$$scope:{ctx:t}}});function p(P){t[9](P)}let A={label:"Junction Name"};t[1].jat[t[0].idx].name!==void 0&&(A.value=t[1].jat[t[0].idx].name),u=new it({props:A}),Q.push(()=>re(u,"value",p));let T=Rt(t);return{c(){e=Y("h2"),r=K(n),o=K(" - "),i=K(l),a=H(),F(s.$$.fragment),c=H(),F(u.$$.fragment),f=H(),T.c(),O=me()},l(P){e=x(P,"H2",{});var L=oe(e);r=W(L,n),o=W(L," - "),i=W(L,l),L.forEach(k),a=R(P),B(s.$$.fragment,P),c=R(P),B(u.$$.fragment,P),f=R(P),T.l(P),O=me()},m(P,L){M(P,e,L),ue(e,r),ue(e,o),ue(e,i),M(P,a,L),q(s,P,L),M(P,c,L),q(u,P,L),M(P,f,L),T.m(P,L),M(P,O,L),m=!0},p(P,L){(!m||L&3)&&n!==(n=(P[1].jat[P[0].idx].name||"Untitled junction")+"")&&ye(r,n),(!m||L&1)&&l!==(l=P[0].stage+"")&&ye(i,l);const y={};L&8193&&(y.$$scope={dirty:L,ctx:P}),s.$set(y);const b={};!d&&L&3&&(d=!0,b.value=P[1].jat[P[0].idx].name,ne(()=>d=!1)),u.$set(b),L&1&&_e(g,g=P[0].stage)?(ie(),E(T,1,1,Ke),le(),T=Rt(P),T.c(),w(T,1),T.m(O.parentNode,O)):T.p(P,L)},i(P){m||(w(s.$$.fragment,P),w(u.$$.fragment,P),w(T),m=!0)},o(P){E(s.$$.fragment,P),E(u.$$.fragment,P),E(T),m=!1},d(P){P&&(k(e),k(a),k(c),k(f),k(O)),N(s,P),N(u,P),T.d(P)}}}function Mo(t){let e,n,r,o;e=new pe({props:{$$slots:{default:[Bo]},$$scope:{ctx:t}}}),e.$on("click",t[2]);let l=ge(t[1].jat),i=[];for(let s=0;s<l.length;s+=1)i[s]=Ut(Ht(t,l,s));const a=s=>E(i[s],1,1,()=>{i[s]=null});return{c(){F(e.$$.fragment),n=H(),r=Y("ol");for(let s=0;s<i.length;s+=1)i[s].c()},l(s){B(e.$$.fragment,s),n=R(s),r=x(s,"OL",{});var c=oe(r);for(let u=0;u<i.length;u+=1)i[u].l(c);c.forEach(k)},m(s,c){q(e,s,c),M(s,n,c),M(s,r,c);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(r,null);o=!0},p(s,c){const u={};if(c&8192&&(u.$$scope={dirty:c,ctx:s}),e.$set(u),c&3){l=ge(s[1].jat);let d;for(d=0;d<l.length;d+=1){const f=Ht(s,l,d);i[d]?(i[d].p(f,c),w(i[d],1)):(i[d]=Ut(f),i[d].c(),w(i[d],1),i[d].m(r,null))}for(ie(),d=l.length;d<i.length;d+=1)a(d);le()}},i(s){if(!o){w(e.$$.fragment,s);for(let c=0;c<l.length;c+=1)w(i[c]);o=!0}},o(s){E(e.$$.fragment,s),i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)E(i[c]);o=!1},d(s){s&&(k(n),k(r)),N(e,s),Be(i,s)}}}function Po(t){let e;return{c(){e=K("Back to all junctions")},l(n){e=W(n,"Back to all junctions")},m(n,r){M(n,e,r)},d(n){n&&k(e)}}}function Io(t){let e,n;return e=new pe({props:{$$slots:{default:[To]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){F(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){q(e,r,o),n=!0},p(r,o){const l={};o&8192&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Oo(t){let e,n;return e=new pe({props:{$$slots:{default:[Ao]},$$scope:{ctx:t}}}),e.$on("click",t[6]),{c(){F(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){q(e,r,o),n=!0},p(r,o){const l={};o&8192&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function To(t){let e;return{c(){e=K("Edit Proposed")},l(n){e=W(n,"Edit Proposed")},m(n,r){M(n,e,r)},d(n){n&&k(e)}}}function Ao(t){let e;return{c(){e=K("Edit Existing")},l(n){e=W(n,"Edit Existing")},m(n,r){M(n,e,r)},d(n){n&&k(e)}}}function So(t){let e;return{c(){e=K("Delete")},l(n){e=W(n,"Delete")},m(n,r){M(n,e,r)},d(n){n&&k(e)}}}function Fo(t){let e,n,r,o,l,i,a;e=new pe({props:{$$slots:{default:[Po]},$$scope:{ctx:t}}}),e.$on("click",t[5]);const s=[Oo,Io],c=[];function u(d,f){return d[0].stage=="proposed"?0:1}return r=u(t),o=c[r]=s[r](t),i=new Wt({props:{$$slots:{default:[So]},$$scope:{ctx:t}}}),i.$on("click",t[8]),{c(){F(e.$$.fragment),n=H(),o.c(),l=H(),F(i.$$.fragment)},l(d){B(e.$$.fragment,d),n=R(d),o.l(d),l=R(d),B(i.$$.fragment,d)},m(d,f){q(e,d,f),M(d,n,f),c[r].m(d,f),M(d,l,f),q(i,d,f),a=!0},p(d,f){const g={};f&8192&&(g.$$scope={dirty:f,ctx:d}),e.$set(g);let O=r;r=u(d),r===O?c[r].p(d,f):(ie(),E(c[O],1,1,()=>{c[O]=null}),le(),o=c[r],o?o.p(d,f):(o=c[r]=s[r](d),o.c()),w(o,1),o.m(l.parentNode,l));const m={};f&8192&&(m.$$scope={dirty:f,ctx:d}),i.$set(m)},i(d){a||(w(e.$$.fragment,d),w(o),w(i.$$.fragment,d),a=!0)},o(d){E(e.$$.fragment,d),E(o),E(i.$$.fragment,d),a=!1},d(d){d&&(k(n),k(l)),N(e,d),c[r].d(d),N(i,d)}}}function Rt(t){let e,n;return e=new Lo({props:{junctionIdx:t[0].idx,stage:t[0].stage}}),{c(){F(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,o){q(e,r,o),n=!0},p(r,o){const l={};o&1&&(l.junctionIdx=r[0].idx),o&1&&(l.stage=r[0].stage),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Bo(t){let e;return{c(){e=K("Add new junction")},l(n){e=W(n,"Add new junction")},m(n,r){M(n,e,r)},d(n){n&&k(e)}}}function qo(t){let e=(t[10].name||"Untitled junction")+"",n;return{c(){n=K(e)},l(r){n=W(r,e)},m(r,o){M(r,n,o)},p(r,o){o&2&&e!==(e=(r[10].name||"Untitled junction")+"")&&ye(n,e)},d(r){r&&k(n)}}}function Ut(t){let e,n,r,o;function l(){return t[4](t[12])}return n=new pe({props:{$$slots:{default:[qo]},$$scope:{ctx:t}}}),n.$on("click",l),{c(){e=Y("li"),F(n.$$.fragment),r=H()},l(i){e=x(i,"LI",{});var a=oe(e);B(n.$$.fragment,a),r=R(a),a.forEach(k)},m(i,a){M(i,e,a),q(n,e,null),ue(e,r),o=!0},p(i,a){t=i;const s={};a&8194&&(s.$$scope={dirty:a,ctx:t}),n.$set(s)},i(i){o||(w(n.$$.fragment,i),o=!0)},o(i){E(n.$$.fragment,i),o=!1},d(i){i&&k(e),N(n)}}}function No(t){let e,n,r,o;const l=[Mo,$o],i=[];function a(s,c){return s[0].kind=="list"?0:s[0].kind=="edit"?1:-1}return~(e=a(t))&&(n=i[e]=l[e](t)),{c(){n&&n.c(),r=me()},l(s){n&&n.l(s),r=me()},m(s,c){~e&&i[e].m(s,c),M(s,r,c),o=!0},p(s,[c]){let u=e;e=a(s),e===u?~e&&i[e].p(s,c):(n&&(ie(),E(i[u],1,1,()=>{i[u]=null}),le()),~e?(n=i[e],n?n.p(s,c):(n=i[e]=l[e](s),n.c()),w(n,1),n.m(r.parentNode,r)):n=null)},i(s){o||(w(n),o=!0)},o(s){E(n),o=!1},d(s){s&&k(r),~e&&i[e].d(s)}}}function xe(t){if(t.kind=="list")throw new Error("Unreachable case");return t.idx}function Go(t,e,n){let r;be(t,X,g=>n(1,r=g));let o={kind:"list"};function l(){Fe(X,r.jat=[...r.jat,{name:"",existing:{arms:[],movements:[],notes:""},proposed:{arms:[],movements:[],notes:""}}],r),n(0,o={kind:"edit",idx:r.jat.length-1,stage:"existing"})}function i(g){window.confirm("Delete this junction?")&&(r.jat.splice(g,1),X.set(r),n(0,o={kind:"list"}))}const a=g=>n(0,o={kind:"edit",idx:g,stage:"existing"}),s=()=>n(0,o={kind:"list"}),c=()=>n(0,o={kind:"edit",idx:xe(o),stage:"existing"}),u=()=>n(0,o={kind:"edit",idx:xe(o),stage:"proposed"}),d=()=>i(xe(o));function f(g){t.$$.not_equal(r.jat[o.idx].name,g)&&(r.jat[o.idx].name=g,X.set(r))}return[o,r,l,i,a,s,c,u,d,f]}class ri extends ve{constructor(e){super(),we(this,e,Go,No,_e,{})}}export{ri as component};
