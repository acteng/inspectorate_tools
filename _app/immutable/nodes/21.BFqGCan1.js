import{s as re,w as te,i as _,n as he,d as p,e as N,b as O,g as Y,r as Z,t as ne,a as k,f as ie,h as se,c as T,o as Pe,j as V,y as He,v as x,k as fe,a4 as Se,K as oe,l as me}from"../chunks/scheduler.8Pqdtq9W.js";import{S as ce,i as ue,e as ee,c as y,a as H,m as M,t as S,b as W,d as A,f as de,g as pe}from"../chunks/index.KrNxZzBh.js";import{B as Me,e as ae,u as ge,o as _e}from"../chunks/Geocoder.svelte_svelte_type_style_lang.DnMZpN6q.js";import{S as be}from"../chunks/SecondaryButton.CctJSiA9.js";import{s as E}from"../chunks/data.BGBwZoYo.js";import"../chunks/paths.CjBV00Dy.js";import{N as We,c as $e}from"../chunks/logic.DZBv-01g.js";import{T as le}from"../chunks/TextArea.CjICvxNC.js";import{W as Ce}from"../chunks/WarningButton.Cyr2mll2.js";import{T as Ae}from"../chunks/TextInput.CSx64iaK.js";function De(n){let e,i='Cross sections possible: <strong class="govuk-tag govuk-tag--red">Insufficient Space</strong>';return{c(){e=N("p"),e.innerHTML=i},l(t){e=O(t,"P",{"data-svelte-h":!0}),Y(e)!=="svelte-sq6dx9"&&(e.innerHTML=i)},m(t,a){_(t,e,a)},d(t){t&&p(e)}}}function Le(n){let e,i='Cross sections possible: <strong class="govuk-tag govuk-tag--yellow">Absolute Minimum</strong>';return{c(){e=N("p"),e.innerHTML=i},l(t){e=O(t,"P",{"data-svelte-h":!0}),Y(e)!=="svelte-r0abhc"&&(e.innerHTML=i)},m(t,a){_(t,e,a)},d(t){t&&p(e)}}}function qe(n){let e,i='Cross sections possible: <strong class="govuk-tag govuk-tag--green">Desirable Minimum</strong>';return{c(){e=N("p"),e.innerHTML=i},l(t){e=O(t,"P",{"data-svelte-h":!0}),Y(e)!=="svelte-1t7o0lp"&&(e.innerHTML=i)},m(t,a){_(t,e,a)},d(t){t&&p(e)}}}function Ie(n){let e;function i(l,r){return l[0]>=l[1]?qe:l[0]>l[2]?Le:De}let t=i(n),a=t(n);return{c(){a.c(),e=te()},l(l){a.l(l),e=te()},m(l,r){a.m(l,r),_(l,e,r)},p(l,[r]){t!==(t=i(l))&&(a.d(1),a=t(l),a&&(a.c(),a.m(e.parentNode,e)))},i:he,o:he,d(l){l&&p(e),a.d(l)}}}function Ee(n,e,i){let{available:t}=e,{desirableTotal:a}=e,{absoluteTotal:l}=e;return n.$$set=r=>{"available"in r&&i(0,t=r.available),"desirableTotal"in r&&i(1,a=r.desirableTotal),"absoluteTotal"in r&&i(2,l=r.absoluteTotal)},[t,a,l]}class ye extends ce{constructor(e){super(),ue(this,e,Ee,Ie,re,{available:0,desirableTotal:1,absoluteTotal:2})}}function je(n){let e;return{c(){e=ne("Delete")},l(i){e=se(i,"Delete")},m(i,t){_(i,e,t)},d(i){i&&p(e)}}}function Be(n){let e,i,t,a=n[0]+1+"",l,r,h,d,b,g,$,u,m,R,w,P,C,q,j;function z(s){n[5](s)}let G={label:"Available width (m)",width:3,min:0};n[3].checks.homogeneousSections[n[0]].availableWidth!==void 0&&(G.value=n[3].checks.homogeneousSections[n[0]].availableWidth),h=new We({props:G}),Z.push(()=>ee(h,"value",z)),g=new ye({props:{available:n[3].checks.homogeneousSections[n[0]].availableWidth,desirableTotal:n[1],absoluteTotal:n[2]}});function J(s){n[6](s)}let D={label:"What will need to change to fit this in? Please leave a justification if space has been taken away from pedestrians or cyclists, or if shared use cycle tracks are proposed."};n[3].checks.homogeneousSections[n[0]].notes1!==void 0&&(D.value=n[3].checks.homogeneousSections[n[0]].notes1),u=new le({props:D}),Z.push(()=>ee(u,"value",J));function Q(s){n[7](s)}let L={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return n[3].checks.homogeneousSections[n[0]].notes2!==void 0&&(L.value=n[3].checks.homogeneousSections[n[0]].notes2),w=new le({props:L}),Z.push(()=>ee(w,"value",Q)),q=new Ce({props:{$$slots:{default:[je]},$$scope:{ctx:n}}}),q.$on("click",n[8]),{c(){e=N("div"),i=N("u"),t=ne("Cross-section #"),l=ne(a),r=k(),y(h.$$.fragment),b=k(),y(g.$$.fragment),$=k(),y(u.$$.fragment),R=k(),y(w.$$.fragment),C=k(),y(q.$$.fragment),this.h()},l(s){e=O(s,"DIV",{class:!0});var f=ie(e);i=O(f,"U",{});var I=ie(i);t=se(I,"Cross-section #"),l=se(I,a),I.forEach(p),r=T(f),H(h.$$.fragment,f),b=T(f),H(g.$$.fragment,f),$=T(f),H(u.$$.fragment,f),R=T(f),H(w.$$.fragment,f),C=T(f),H(q.$$.fragment,f),f.forEach(p),this.h()},h(){Pe(e,"class","svelte-d3f4io")},m(s,f){_(s,e,f),V(e,i),V(i,t),V(i,l),V(e,r),M(h,e,null),V(e,b),M(g,e,null),V(e,$),M(u,e,null),V(e,R),M(w,e,null),V(e,C),M(q,e,null),j=!0},p(s,[f]){(!j||f&1)&&a!==(a=s[0]+1+"")&&He(l,a);const I={};!d&&f&9&&(d=!0,I.value=s[3].checks.homogeneousSections[s[0]].availableWidth,x(()=>d=!1)),h.$set(I);const B={};f&9&&(B.available=s[3].checks.homogeneousSections[s[0]].availableWidth),f&2&&(B.desirableTotal=s[1]),f&4&&(B.absoluteTotal=s[2]),g.$set(B);const U={};!m&&f&9&&(m=!0,U.value=s[3].checks.homogeneousSections[s[0]].notes1,x(()=>m=!1)),u.$set(U);const K={};!P&&f&9&&(P=!0,K.value=s[3].checks.homogeneousSections[s[0]].notes2,x(()=>P=!1)),w.$set(K);const X={};f&512&&(X.$$scope={dirty:f,ctx:s}),q.$set(X)},i(s){j||(S(h.$$.fragment,s),S(g.$$.fragment,s),S(u.$$.fragment,s),S(w.$$.fragment,s),S(q.$$.fragment,s),j=!0)},o(s){W(h.$$.fragment,s),W(g.$$.fragment,s),W(u.$$.fragment,s),W(w.$$.fragment,s),W(q.$$.fragment,s),j=!1},d(s){s&&p(e),A(h),A(g),A(u),A(w),A(q)}}}function Ve(n,e,i){let t;fe(n,E,u=>i(3,t=u));let{i:a}=e,{desirableTotal:l}=e,{absoluteTotal:r}=e,h=Se();function d(u){n.$$.not_equal(t.checks.homogeneousSections[a].availableWidth,u)&&(t.checks.homogeneousSections[a].availableWidth=u,E.set(t))}function b(u){n.$$.not_equal(t.checks.homogeneousSections[a].notes1,u)&&(t.checks.homogeneousSections[a].notes1=u,E.set(t))}function g(u){n.$$.not_equal(t.checks.homogeneousSections[a].notes2,u)&&(t.checks.homogeneousSections[a].notes2=u,E.set(t))}const $=()=>h("delete");return n.$$set=u=>{"i"in u&&i(0,a=u.i),"desirableTotal"in u&&i(1,l=u.desirableTotal),"absoluteTotal"in u&&i(2,r=u.absoluteTotal)},[a,l,r,t,h,d,b,g,$]}class Ne extends ce{constructor(e){super(),ue(this,e,Ve,Be,re,{i:0,desirableTotal:1,absoluteTotal:2})}}function Oe(n){let e;return{c(){e=ne("Delete")},l(i){e=se(i,"Delete")},m(i,t){_(i,e,t)},d(i){i&&p(e)}}}function Re(n){let e,i,t,a,l,r,h,d,b,g,$,u,m,R,w,P,C;function q(s){n[5](s)}let j={label:"Location of constraint"};n[3].checks.pinchPoints[n[0]].location!==void 0&&(j.value=n[3].checks.pinchPoints[n[0]].location),i=new Ae({props:j}),Z.push(()=>ee(i,"value",q));function z(s){n[6](s)}let G={label:"Available width (m)",width:3,min:0};n[3].checks.pinchPoints[n[0]].availableWidth!==void 0&&(G.value=n[3].checks.pinchPoints[n[0]].availableWidth),l=new We({props:G}),Z.push(()=>ee(l,"value",z)),d=new ye({props:{available:n[3].checks.pinchPoints[n[0]].availableWidth,desirableTotal:n[1],absoluteTotal:n[2]}});function J(s){n[7](s)}let D={label:"What will need to change to fit this in? Please leave a justification if space has been taken away from pedestrians or cyclists, or if shared use cycle tracks are proposed."};n[3].checks.pinchPoints[n[0]].notes1!==void 0&&(D.value=n[3].checks.pinchPoints[n[0]].notes1),g=new le({props:D}),Z.push(()=>ee(g,"value",J));function Q(s){n[8](s)}let L={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return n[3].checks.pinchPoints[n[0]].notes2!==void 0&&(L.value=n[3].checks.pinchPoints[n[0]].notes2),m=new le({props:L}),Z.push(()=>ee(m,"value",Q)),P=new Ce({props:{$$slots:{default:[Oe]},$$scope:{ctx:n}}}),P.$on("click",n[9]),{c(){e=N("div"),y(i.$$.fragment),a=k(),y(l.$$.fragment),h=k(),y(d.$$.fragment),b=k(),y(g.$$.fragment),u=k(),y(m.$$.fragment),w=k(),y(P.$$.fragment),this.h()},l(s){e=O(s,"DIV",{class:!0});var f=ie(e);H(i.$$.fragment,f),a=T(f),H(l.$$.fragment,f),h=T(f),H(d.$$.fragment,f),b=T(f),H(g.$$.fragment,f),u=T(f),H(m.$$.fragment,f),w=T(f),H(P.$$.fragment,f),f.forEach(p),this.h()},h(){Pe(e,"class","svelte-d3f4io")},m(s,f){_(s,e,f),M(i,e,null),V(e,a),M(l,e,null),V(e,h),M(d,e,null),V(e,b),M(g,e,null),V(e,u),M(m,e,null),V(e,w),M(P,e,null),C=!0},p(s,[f]){const I={};!t&&f&9&&(t=!0,I.value=s[3].checks.pinchPoints[s[0]].location,x(()=>t=!1)),i.$set(I);const B={};!r&&f&9&&(r=!0,B.value=s[3].checks.pinchPoints[s[0]].availableWidth,x(()=>r=!1)),l.$set(B);const U={};f&9&&(U.available=s[3].checks.pinchPoints[s[0]].availableWidth),f&2&&(U.desirableTotal=s[1]),f&4&&(U.absoluteTotal=s[2]),d.$set(U);const K={};!$&&f&9&&($=!0,K.value=s[3].checks.pinchPoints[s[0]].notes1,x(()=>$=!1)),g.$set(K);const X={};!R&&f&9&&(R=!0,X.value=s[3].checks.pinchPoints[s[0]].notes2,x(()=>R=!1)),m.$set(X);const o={};f&1024&&(o.$$scope={dirty:f,ctx:s}),P.$set(o)},i(s){C||(S(i.$$.fragment,s),S(l.$$.fragment,s),S(d.$$.fragment,s),S(g.$$.fragment,s),S(m.$$.fragment,s),S(P.$$.fragment,s),C=!0)},o(s){W(i.$$.fragment,s),W(l.$$.fragment,s),W(d.$$.fragment,s),W(g.$$.fragment,s),W(m.$$.fragment,s),W(P.$$.fragment,s),C=!1},d(s){s&&p(e),A(i),A(l),A(d),A(g),A(m),A(P)}}}function ze(n,e,i){let t;fe(n,E,m=>i(3,t=m));let{i:a}=e,{desirableTotal:l}=e,{absoluteTotal:r}=e,h=Se();function d(m){n.$$.not_equal(t.checks.pinchPoints[a].location,m)&&(t.checks.pinchPoints[a].location=m,E.set(t))}function b(m){n.$$.not_equal(t.checks.pinchPoints[a].availableWidth,m)&&(t.checks.pinchPoints[a].availableWidth=m,E.set(t))}function g(m){n.$$.not_equal(t.checks.pinchPoints[a].notes1,m)&&(t.checks.pinchPoints[a].notes1=m,E.set(t))}function $(m){n.$$.not_equal(t.checks.pinchPoints[a].notes2,m)&&(t.checks.pinchPoints[a].notes2=m,E.set(t))}const u=()=>h("delete");return n.$$set=m=>{"i"in m&&i(0,a=m.i),"desirableTotal"in m&&i(1,l=m.desirableTotal),"absoluteTotal"in m&&i(2,r=m.absoluteTotal)},[a,l,r,t,h,d,b,g,$,u]}class Ke extends ce{constructor(e){super(),ue(this,e,ze,Re,re,{i:0,desirableTotal:1,absoluteTotal:2})}}function ve(n,e,i){const t=n.slice();return t[9]=e[i],t[11]=i,t}function ke(n,e,i){const t=n.slice();return t[9]=e[i],t[11]=i,t}function Ue(n){let e;return{c(){e=ne("Add")},l(i){e=se(i,"Add")},m(i,t){_(i,e,t)},d(i){i&&p(e)}}}function Te(n,e){let i,t,a;function l(){return e[7](e[11])}return t=new Ne({props:{i:e[11],desirableTotal:e[2],absoluteTotal:e[1]}}),t.$on("delete",l),{key:n,first:null,c(){i=te(),y(t.$$.fragment),this.h()},l(r){i=te(),H(t.$$.fragment,r),this.h()},h(){this.first=i},m(r,h){_(r,i,h),M(t,r,h),a=!0},p(r,h){e=r;const d={};h&1&&(d.i=e[11]),h&4&&(d.desirableTotal=e[2]),h&2&&(d.absoluteTotal=e[1]),t.$set(d)},i(r){a||(S(t.$$.fragment,r),a=!0)},o(r){W(t.$$.fragment,r),a=!1},d(r){r&&p(i),A(t,r)}}}function Fe(n){let e;return{c(){e=ne("Add")},l(i){e=se(i,"Add")},m(i,t){_(i,e,t)},d(i){i&&p(e)}}}function we(n,e){let i,t,a;function l(){return e[8](e[11])}return t=new Ke({props:{i:e[11],desirableTotal:e[2],absoluteTotal:e[1]}}),t.$on("delete",l),{key:n,first:null,c(){i=te(),y(t.$$.fragment),this.h()},l(r){i=te(),H(t.$$.fragment,r),this.h()},h(){this.first=i},m(r,h){_(r,i,h),M(t,r,h),a=!0},p(r,h){e=r;const d={};h&1&&(d.i=e[11]),h&4&&(d.desirableTotal=e[2]),h&2&&(d.absoluteTotal=e[1]),t.$set(d)},i(r){a||(S(t.$$.fragment,r),a=!0)},o(r){W(t.$$.fragment,r),a=!1},d(r){r&&p(i),A(t,r)}}}function Ge(n){let e,i,t,a=`Checking possible cross-sections of <u>homogeneous sections</u>
  of route along the proposed corridor`,l,r,h=`At regular intervals along the corridor measure and enter the available width
  to see if your proposed cross-sections can be accommodated`,d,b,g,$,u=[],m=new Map,R,w,P,C,q=`Checking possible cross-sections of any <u>constrained or atypical locations</u>
  along the proposed corridor`,j,z,G=`At key constraints along the corridor, measure and enter the available width
  to see if your proposed cross-sections can be accommodated`,J,D,Q,L,s=[],f=new Map,I;e=new Me({props:{links:[["Tools","/"],["Route cross-section","/cross_section"]],current:"Cross-Section Check"}}),b=new be({props:{$$slots:{default:[Ue]},$$scope:{ctx:n}}}),b.$on("click",n[3]);let B=ae(n[0].checks.homogeneousSections);const U=o=>o[11];for(let o=0;o<B.length;o+=1){let c=ke(n,B,o),v=U(c);m.set(v,u[o]=Te(v,c))}D=new be({props:{$$slots:{default:[Fe]},$$scope:{ctx:n}}}),D.$on("click",n[5]);let K=ae(n[0].checks.pinchPoints);const X=o=>o[11];for(let o=0;o<K.length;o+=1){let c=ve(n,K,o),v=X(c);f.set(v,s[o]=we(v,c))}return{c(){y(e.$$.fragment),i=k(),t=N("h2"),t.innerHTML=a,l=k(),r=N("p"),r.textContent=h,d=k(),y(b.$$.fragment),g=k(),$=N("div");for(let o=0;o<u.length;o+=1)u[o].c();R=k(),w=N("hr"),P=k(),C=N("h2"),C.innerHTML=q,j=k(),z=N("p"),z.textContent=G,J=k(),y(D.$$.fragment),Q=k(),L=N("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){H(e.$$.fragment,o),i=T(o),t=O(o,"H2",{"data-svelte-h":!0}),Y(t)!=="svelte-1x2x8kb"&&(t.innerHTML=a),l=T(o),r=O(o,"P",{"data-svelte-h":!0}),Y(r)!=="svelte-x0c18j"&&(r.textContent=h),d=T(o),H(b.$$.fragment,o),g=T(o),$=O(o,"DIV",{style:!0});var c=ie($);for(let F=0;F<u.length;F+=1)u[F].l(c);c.forEach(p),R=T(o),w=O(o,"HR",{}),P=T(o),C=O(o,"H2",{"data-svelte-h":!0}),Y(C)!=="svelte-1m1bgig"&&(C.innerHTML=q),j=T(o),z=O(o,"P",{"data-svelte-h":!0}),Y(z)!=="svelte-bdzwl6"&&(z.textContent=G),J=T(o),H(D.$$.fragment,o),Q=T(o),L=O(o,"DIV",{style:!0});var v=ie(L);for(let F=0;F<s.length;F+=1)s[F].l(v);v.forEach(p),this.h()},h(){oe($,"display","flex"),oe($,"flex-direction","row"),oe(L,"display","flex"),oe(L,"flex-direction","row")},m(o,c){M(e,o,c),_(o,i,c),_(o,t,c),_(o,l,c),_(o,r,c),_(o,d,c),M(b,o,c),_(o,g,c),_(o,$,c);for(let v=0;v<u.length;v+=1)u[v]&&u[v].m($,null);_(o,R,c),_(o,w,c),_(o,P,c),_(o,C,c),_(o,j,c),_(o,z,c),_(o,J,c),M(D,o,c),_(o,Q,c),_(o,L,c);for(let v=0;v<s.length;v+=1)s[v]&&s[v].m(L,null);I=!0},p(o,[c]){const v={};c&8192&&(v.$$scope={dirty:c,ctx:o}),b.$set(v),c&23&&(B=ae(o[0].checks.homogeneousSections),pe(),u=ge(u,c,U,1,o,B,m,$,_e,Te,null,ke),de());const F={};c&8192&&(F.$$scope={dirty:c,ctx:o}),D.$set(F),c&71&&(K=ae(o[0].checks.pinchPoints),pe(),s=ge(s,c,X,1,o,K,f,L,_e,we,null,ve),de())},i(o){if(!I){S(e.$$.fragment,o),S(b.$$.fragment,o);for(let c=0;c<B.length;c+=1)S(u[c]);S(D.$$.fragment,o);for(let c=0;c<K.length;c+=1)S(s[c]);I=!0}},o(o){W(e.$$.fragment,o),W(b.$$.fragment,o);for(let c=0;c<u.length;c+=1)W(u[c]);W(D.$$.fragment,o);for(let c=0;c<s.length;c+=1)W(s[c]);I=!1},d(o){o&&(p(i),p(t),p(l),p(r),p(d),p(g),p($),p(R),p(w),p(P),p(C),p(j),p(z),p(J),p(Q),p(L)),A(e,o),A(b,o);for(let c=0;c<u.length;c+=1)u[c].d();A(D,o);for(let c=0;c<s.length;c+=1)s[c].d()}}}function Je(n,e,i){let t,a,l;fe(n,E,u=>i(0,l=u));function r(){me(E,l.checks.homogeneousSections=[...l.checks.homogeneousSections,{availableWidth:0,notes1:"",notes2:""}],l)}function h(u){l.checks.homogeneousSections.splice(u,1),E.set(l)}function d(){me(E,l.checks.pinchPoints=[...l.checks.pinchPoints,{location:"",availableWidth:0,notes1:"",notes2:""}],l)}function b(u){l.checks.pinchPoints.splice(u,1),E.set(l)}const g=u=>h(u),$=u=>b(u);return n.$$.update=()=>{n.$$.dirty&1&&i(2,t=$e(l,"Desirable")),n.$$.dirty&1&&i(1,a=$e(l,"Absolute"))},[l,a,t,r,h,d,b,g,$]}class ot extends ce{constructor(e){super(),ue(this,e,Je,Ge,re,{})}}export{ot as component};
