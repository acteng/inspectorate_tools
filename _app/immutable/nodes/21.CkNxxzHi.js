import{s as _e,w as re,i as _,n as Se,d,e as B,b as V,g as ne,r as se,t as N,a as v,f as ie,h as U,c as k,o as je,j as w,y as $e,v as ae,k as ve,a4 as Be,K as me,l as We}from"../chunks/scheduler.8Pqdtq9W.js";import{S as ge,i as be,e as oe,c as q,a as D,m as A,t as C,b as y,d as L,f as Ce,g as ye}from"../chunks/index.KrNxZzBh.js";import{B as Re,e as de,u as Me,o as He}from"../chunks/Geocoder.svelte_svelte_type_style_lang.C9M_1801.js";import{S as qe}from"../chunks/SecondaryButton.CctJSiA9.js";import{s as z}from"../chunks/data.DhlDRbOc.js";import"../chunks/paths.bzagok_L.js";import{D as Ve,c as De}from"../chunks/logic.BnJPKzaS.js";import{T as pe}from"../chunks/TextArea.CjICvxNC.js";import{W as ze}from"../chunks/WarningButton.Cyr2mll2.js";import{T as Ke}from"../chunks/TextInput.CSx64iaK.js";function Ne(n){let e,s='Cross sections possible: <strong class="govuk-tag govuk-tag--red">Insufficient Space</strong>';return{c(){e=B("p"),e.innerHTML=s},l(t){e=V(t,"P",{"data-svelte-h":!0}),ne(e)!=="svelte-sq6dx9"&&(e.innerHTML=s)},m(t,l){_(t,e,l)},d(t){t&&d(e)}}}function Ue(n){let e,s='Cross sections possible: <strong class="govuk-tag govuk-tag--yellow">Absolute Minimum</strong>';return{c(){e=B("p"),e.innerHTML=s},l(t){e=V(t,"P",{"data-svelte-h":!0}),ne(e)!=="svelte-r0abhc"&&(e.innerHTML=s)},m(t,l){_(t,e,l)},d(t){t&&d(e)}}}function Fe(n){let e,s='Cross sections possible: <strong class="govuk-tag govuk-tag--green">Desirable Minimum</strong>';return{c(){e=B("p"),e.innerHTML=s},l(t){e=V(t,"P",{"data-svelte-h":!0}),ne(e)!=="svelte-1t7o0lp"&&(e.innerHTML=s)},m(t,l){_(t,e,l)},d(t){t&&d(e)}}}function Ge(n){let e;function s(r,c){return r[0]>=r[1]?Fe:r[0]>r[2]?Ue:Ne}let t=s(n),l=t(n);return{c(){l.c(),e=re()},l(r){l.l(r),e=re()},m(r,c){l.m(r,c),_(r,e,c)},p(r,[c]){t!==(t=s(r))&&(l.d(1),l=t(r),l&&(l.c(),l.m(e.parentNode,e)))},i:Se,o:Se,d(r){r&&d(e),l.d(r)}}}function Je(n,e,s){let{available:t}=e,{desirableTotal:l}=e,{absoluteTotal:r}=e;return n.$$set=c=>{"available"in c&&s(0,t=c.available),"desirableTotal"in c&&s(1,l=c.desirableTotal),"absoluteTotal"in c&&s(2,r=c.absoluteTotal)},[t,l,r]}class Oe extends ge{constructor(e){super(),be(this,e,Je,Ge,_e,{available:0,desirableTotal:1,absoluteTotal:2})}}function Qe(n){let e;return{c(){e=N("Delete")},l(s){e=U(s,"Delete")},m(s,t){_(s,e,t)},d(s){s&&d(e)}}}function Xe(n){let e,s,t,l=n[0]+1+"",r,c,m,p,P,g,M,f,h,G,S,$,F,H,W;function Y(a){n[5](a)}let E={label:"Available width (m)",width:4,min:0};n[3].checks.homogeneousSections[n[0]].availableWidth!==void 0&&(E.value=n[3].checks.homogeneousSections[n[0]].availableWidth),m=new Ve({props:E}),se.push(()=>oe(m,"value",Y)),g=new Oe({props:{available:n[3].checks.homogeneousSections[n[0]].availableWidth,desirableTotal:n[1],absoluteTotal:n[2]}});function T(a){n[6](a)}let Z={label:"What will need to change to fit this in? Please leave a justification if space has been taken away from pedestrians or cyclists, or if shared use cycle tracks are proposed."};n[3].checks.homogeneousSections[n[0]].notes1!==void 0&&(Z.value=n[3].checks.homogeneousSections[n[0]].notes1),f=new pe({props:Z}),se.push(()=>oe(f,"value",T));function x(a){n[7](a)}let J={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return n[3].checks.homogeneousSections[n[0]].notes2!==void 0&&(J.value=n[3].checks.homogeneousSections[n[0]].notes2),S=new pe({props:J}),se.push(()=>oe(S,"value",x)),H=new ze({props:{$$slots:{default:[Qe]},$$scope:{ctx:n}}}),H.$on("click",n[8]),{c(){e=B("div"),s=B("u"),t=N("Cross-section #"),r=N(l),c=v(),q(m.$$.fragment),P=v(),q(g.$$.fragment),M=v(),q(f.$$.fragment),G=v(),q(S.$$.fragment),F=v(),q(H.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0});var u=ie(e);s=V(u,"U",{});var O=ie(s);t=U(O,"Cross-section #"),r=U(O,l),O.forEach(d),c=k(u),D(m.$$.fragment,u),P=k(u),D(g.$$.fragment,u),M=k(u),D(f.$$.fragment,u),G=k(u),D(S.$$.fragment,u),F=k(u),D(H.$$.fragment,u),u.forEach(d),this.h()},h(){je(e,"class","svelte-zq957y")},m(a,u){_(a,e,u),w(e,s),w(s,t),w(s,r),w(e,c),A(m,e,null),w(e,P),A(g,e,null),w(e,M),A(f,e,null),w(e,G),A(S,e,null),w(e,F),A(H,e,null),W=!0},p(a,[u]){(!W||u&1)&&l!==(l=a[0]+1+"")&&$e(r,l);const O={};!p&&u&9&&(p=!0,O.value=a[3].checks.homogeneousSections[a[0]].availableWidth,ae(()=>p=!1)),m.$set(O);const R={};u&9&&(R.available=a[3].checks.homogeneousSections[a[0]].availableWidth),u&2&&(R.desirableTotal=a[1]),u&4&&(R.absoluteTotal=a[2]),g.$set(R);const I={};!h&&u&9&&(h=!0,I.value=a[3].checks.homogeneousSections[a[0]].notes1,ae(()=>h=!1)),f.$set(I);const ee={};!$&&u&9&&($=!0,ee.value=a[3].checks.homogeneousSections[a[0]].notes2,ae(()=>$=!1)),S.$set(ee);const Q={};u&512&&(Q.$$scope={dirty:u,ctx:a}),H.$set(Q)},i(a){W||(C(m.$$.fragment,a),C(g.$$.fragment,a),C(f.$$.fragment,a),C(S.$$.fragment,a),C(H.$$.fragment,a),W=!0)},o(a){y(m.$$.fragment,a),y(g.$$.fragment,a),y(f.$$.fragment,a),y(S.$$.fragment,a),y(H.$$.fragment,a),W=!1},d(a){a&&d(e),L(m),L(g),L(f),L(S),L(H)}}}function Ye(n,e,s){let t;ve(n,z,f=>s(3,t=f));let{i:l}=e,{desirableTotal:r}=e,{absoluteTotal:c}=e,m=Be();function p(f){n.$$.not_equal(t.checks.homogeneousSections[l].availableWidth,f)&&(t.checks.homogeneousSections[l].availableWidth=f,z.set(t))}function P(f){n.$$.not_equal(t.checks.homogeneousSections[l].notes1,f)&&(t.checks.homogeneousSections[l].notes1=f,z.set(t))}function g(f){n.$$.not_equal(t.checks.homogeneousSections[l].notes2,f)&&(t.checks.homogeneousSections[l].notes2=f,z.set(t))}const M=()=>m("delete");return n.$$set=f=>{"i"in f&&s(0,l=f.i),"desirableTotal"in f&&s(1,r=f.desirableTotal),"absoluteTotal"in f&&s(2,c=f.absoluteTotal)},[l,r,c,t,m,p,P,g,M]}class Ze extends ge{constructor(e){super(),be(this,e,Ye,Xe,_e,{i:0,desirableTotal:1,absoluteTotal:2})}}function xe(n){let e;return{c(){e=N("Delete")},l(s){e=U(s,"Delete")},m(s,t){_(s,e,t)},d(s){s&&d(e)}}}function et(n){let e,s,t,l,r,c,m,p,P,g,M,f,h,G,S,$,F;function H(a){n[5](a)}let W={label:"Location of constraint"};n[3].checks.pinchPoints[n[0]].location!==void 0&&(W.value=n[3].checks.pinchPoints[n[0]].location),s=new Ke({props:W}),se.push(()=>oe(s,"value",H));function Y(a){n[6](a)}let E={label:"Available width (m)",width:4,min:0};n[3].checks.pinchPoints[n[0]].availableWidth!==void 0&&(E.value=n[3].checks.pinchPoints[n[0]].availableWidth),r=new Ve({props:E}),se.push(()=>oe(r,"value",Y)),p=new Oe({props:{available:n[3].checks.pinchPoints[n[0]].availableWidth,desirableTotal:n[1],absoluteTotal:n[2]}});function T(a){n[7](a)}let Z={label:"What will need to change to fit this in? Please leave a justification if space has been taken away from pedestrians or cyclists, or if shared use cycle tracks are proposed."};n[3].checks.pinchPoints[n[0]].notes1!==void 0&&(Z.value=n[3].checks.pinchPoints[n[0]].notes1),g=new pe({props:Z}),se.push(()=>oe(g,"value",T));function x(a){n[8](a)}let J={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return n[3].checks.pinchPoints[n[0]].notes2!==void 0&&(J.value=n[3].checks.pinchPoints[n[0]].notes2),h=new pe({props:J}),se.push(()=>oe(h,"value",x)),$=new ze({props:{$$slots:{default:[xe]},$$scope:{ctx:n}}}),$.$on("click",n[9]),{c(){e=B("div"),q(s.$$.fragment),l=v(),q(r.$$.fragment),m=v(),q(p.$$.fragment),P=v(),q(g.$$.fragment),f=v(),q(h.$$.fragment),S=v(),q($.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0});var u=ie(e);D(s.$$.fragment,u),l=k(u),D(r.$$.fragment,u),m=k(u),D(p.$$.fragment,u),P=k(u),D(g.$$.fragment,u),f=k(u),D(h.$$.fragment,u),S=k(u),D($.$$.fragment,u),u.forEach(d),this.h()},h(){je(e,"class","svelte-zq957y")},m(a,u){_(a,e,u),A(s,e,null),w(e,l),A(r,e,null),w(e,m),A(p,e,null),w(e,P),A(g,e,null),w(e,f),A(h,e,null),w(e,S),A($,e,null),F=!0},p(a,[u]){const O={};!t&&u&9&&(t=!0,O.value=a[3].checks.pinchPoints[a[0]].location,ae(()=>t=!1)),s.$set(O);const R={};!c&&u&9&&(c=!0,R.value=a[3].checks.pinchPoints[a[0]].availableWidth,ae(()=>c=!1)),r.$set(R);const I={};u&9&&(I.available=a[3].checks.pinchPoints[a[0]].availableWidth),u&2&&(I.desirableTotal=a[1]),u&4&&(I.absoluteTotal=a[2]),p.$set(I);const ee={};!M&&u&9&&(M=!0,ee.value=a[3].checks.pinchPoints[a[0]].notes1,ae(()=>M=!1)),g.$set(ee);const Q={};!G&&u&9&&(G=!0,Q.value=a[3].checks.pinchPoints[a[0]].notes2,ae(()=>G=!1)),h.$set(Q);const K={};u&1024&&(K.$$scope={dirty:u,ctx:a}),$.$set(K)},i(a){F||(C(s.$$.fragment,a),C(r.$$.fragment,a),C(p.$$.fragment,a),C(g.$$.fragment,a),C(h.$$.fragment,a),C($.$$.fragment,a),F=!0)},o(a){y(s.$$.fragment,a),y(r.$$.fragment,a),y(p.$$.fragment,a),y(g.$$.fragment,a),y(h.$$.fragment,a),y($.$$.fragment,a),F=!1},d(a){a&&d(e),L(s),L(r),L(p),L(g),L(h),L($)}}}function tt(n,e,s){let t;ve(n,z,h=>s(3,t=h));let{i:l}=e,{desirableTotal:r}=e,{absoluteTotal:c}=e,m=Be();function p(h){n.$$.not_equal(t.checks.pinchPoints[l].location,h)&&(t.checks.pinchPoints[l].location=h,z.set(t))}function P(h){n.$$.not_equal(t.checks.pinchPoints[l].availableWidth,h)&&(t.checks.pinchPoints[l].availableWidth=h,z.set(t))}function g(h){n.$$.not_equal(t.checks.pinchPoints[l].notes1,h)&&(t.checks.pinchPoints[l].notes1=h,z.set(t))}function M(h){n.$$.not_equal(t.checks.pinchPoints[l].notes2,h)&&(t.checks.pinchPoints[l].notes2=h,z.set(t))}const f=()=>m("delete");return n.$$set=h=>{"i"in h&&s(0,l=h.i),"desirableTotal"in h&&s(1,r=h.desirableTotal),"absoluteTotal"in h&&s(2,c=h.absoluteTotal)},[l,r,c,t,m,p,P,g,M,f]}class nt extends ge{constructor(e){super(),be(this,e,tt,et,_e,{i:0,desirableTotal:1,absoluteTotal:2})}}function Ae(n,e,s){const t=n.slice();return t[9]=e[s],t[11]=s,t}function Le(n,e,s){const t=n.slice();return t[9]=e[s],t[11]=s,t}function st(n){let e;return{c(){e=N("Add")},l(s){e=U(s,"Add")},m(s,t){_(s,e,t)},d(s){s&&d(e)}}}function Ee(n,e){let s,t,l;function r(){return e[7](e[11])}return t=new Ze({props:{i:e[11],desirableTotal:e[2],absoluteTotal:e[1]}}),t.$on("delete",r),{key:n,first:null,c(){s=re(),q(t.$$.fragment),this.h()},l(c){s=re(),D(t.$$.fragment,c),this.h()},h(){this.first=s},m(c,m){_(c,s,m),A(t,c,m),l=!0},p(c,m){e=c;const p={};m&1&&(p.i=e[11]),m&4&&(p.desirableTotal=e[2]),m&2&&(p.absoluteTotal=e[1]),t.$set(p)},i(c){l||(C(t.$$.fragment,c),l=!0)},o(c){y(t.$$.fragment,c),l=!1},d(c){c&&d(s),L(t,c)}}}function it(n){let e;return{c(){e=N("Add")},l(s){e=U(s,"Add")},m(s,t){_(s,e,t)},d(s){s&&d(e)}}}function Ie(n,e){let s,t,l;function r(){return e[8](e[11])}return t=new nt({props:{i:e[11],desirableTotal:e[2],absoluteTotal:e[1]}}),t.$on("delete",r),{key:n,first:null,c(){s=re(),q(t.$$.fragment),this.h()},l(c){s=re(),D(t.$$.fragment,c),this.h()},h(){this.first=s},m(c,m){_(c,s,m),A(t,c,m),l=!0},p(c,m){e=c;const p={};m&1&&(p.i=e[11]),m&4&&(p.desirableTotal=e[2]),m&2&&(p.absoluteTotal=e[1]),t.$set(p)},i(c){l||(C(t.$$.fragment,c),l=!0)},o(c){y(t.$$.fragment,c),l=!1},d(c){c&&d(s),L(t,c)}}}function at(n){let e,s,t,l,r,c,m,p,P,g,M,f,h,G=`Checking possible cross-sections of <u>homogeneous sections</u>
  of route along the proposed corridor`,S,$,F=`At regular intervals along the corridor measure and enter the available width
  to see if your proposed cross-sections can be accommodated`,H,W,Y,E,T=[],Z=new Map,x,J,a,u,O=`Checking possible cross-sections of any <u>constrained or atypical locations</u>
  along the proposed corridor`,R,I,ee=`At key constraints along the corridor, measure and enter the available width
  to see if your proposed cross-sections can be accommodated`,Q,K,he,X,j=[],ke=new Map,le;e=new Re({props:{links:[["Tools","/"],["Route cross-section","/cross_section"]],current:"Cross-Section Check"}}),W=new qe({props:{$$slots:{default:[st]},$$scope:{ctx:n}}}),W.$on("click",n[3]);let ce=de(n[0].checks.homogeneousSections);const Te=i=>i[11];for(let i=0;i<ce.length;i+=1){let o=Le(n,ce,i),b=Te(o);Z.set(b,T[i]=Ee(b,o))}K=new qe({props:{$$slots:{default:[it]},$$scope:{ctx:n}}}),K.$on("click",n[5]);let ue=de(n[0].checks.pinchPoints);const we=i=>i[11];for(let i=0;i<ue.length;i+=1){let o=Ae(n,ue,i),b=we(o);ke.set(b,j[i]=Ie(b,o))}return{c(){q(e.$$.fragment),s=v(),t=B("p"),l=N("Desirable Minimum requires: "),r=N(n[2]),c=N(" m"),m=v(),p=B("p"),P=N("Absolute Minimum requires: "),g=N(n[1]),M=N(" m"),f=v(),h=B("h2"),h.innerHTML=G,S=v(),$=B("p"),$.textContent=F,H=v(),q(W.$$.fragment),Y=v(),E=B("div");for(let i=0;i<T.length;i+=1)T[i].c();x=v(),J=B("hr"),a=v(),u=B("h2"),u.innerHTML=O,R=v(),I=B("p"),I.textContent=ee,Q=v(),q(K.$$.fragment),he=v(),X=B("div");for(let i=0;i<j.length;i+=1)j[i].c();this.h()},l(i){D(e.$$.fragment,i),s=k(i),t=V(i,"P",{});var o=ie(t);l=U(o,"Desirable Minimum requires: "),r=U(o,n[2]),c=U(o," m"),o.forEach(d),m=k(i),p=V(i,"P",{});var b=ie(p);P=U(b,"Absolute Minimum requires: "),g=U(b,n[1]),M=U(b," m"),b.forEach(d),f=k(i),h=V(i,"H2",{"data-svelte-h":!0}),ne(h)!=="svelte-1x2x8kb"&&(h.innerHTML=G),S=k(i),$=V(i,"P",{"data-svelte-h":!0}),ne($)!=="svelte-x0c18j"&&($.textContent=F),H=k(i),D(W.$$.fragment,i),Y=k(i),E=V(i,"DIV",{style:!0});var fe=ie(E);for(let te=0;te<T.length;te+=1)T[te].l(fe);fe.forEach(d),x=k(i),J=V(i,"HR",{}),a=k(i),u=V(i,"H2",{"data-svelte-h":!0}),ne(u)!=="svelte-1m1bgig"&&(u.innerHTML=O),R=k(i),I=V(i,"P",{"data-svelte-h":!0}),ne(I)!=="svelte-bdzwl6"&&(I.textContent=ee),Q=k(i),D(K.$$.fragment,i),he=k(i),X=V(i,"DIV",{style:!0});var Pe=ie(X);for(let te=0;te<j.length;te+=1)j[te].l(Pe);Pe.forEach(d),this.h()},h(){me(E,"display","flex"),me(E,"flex-direction","row"),me(X,"display","flex"),me(X,"flex-direction","row")},m(i,o){A(e,i,o),_(i,s,o),_(i,t,o),w(t,l),w(t,r),w(t,c),_(i,m,o),_(i,p,o),w(p,P),w(p,g),w(p,M),_(i,f,o),_(i,h,o),_(i,S,o),_(i,$,o),_(i,H,o),A(W,i,o),_(i,Y,o),_(i,E,o);for(let b=0;b<T.length;b+=1)T[b]&&T[b].m(E,null);_(i,x,o),_(i,J,o),_(i,a,o),_(i,u,o),_(i,R,o),_(i,I,o),_(i,Q,o),A(K,i,o),_(i,he,o),_(i,X,o);for(let b=0;b<j.length;b+=1)j[b]&&j[b].m(X,null);le=!0},p(i,[o]){(!le||o&4)&&$e(r,i[2]),(!le||o&2)&&$e(g,i[1]);const b={};o&8192&&(b.$$scope={dirty:o,ctx:i}),W.$set(b),o&23&&(ce=de(i[0].checks.homogeneousSections),ye(),T=Me(T,o,Te,1,i,ce,Z,E,He,Ee,null,Le),Ce());const fe={};o&8192&&(fe.$$scope={dirty:o,ctx:i}),K.$set(fe),o&71&&(ue=de(i[0].checks.pinchPoints),ye(),j=Me(j,o,we,1,i,ue,ke,X,He,Ie,null,Ae),Ce())},i(i){if(!le){C(e.$$.fragment,i),C(W.$$.fragment,i);for(let o=0;o<ce.length;o+=1)C(T[o]);C(K.$$.fragment,i);for(let o=0;o<ue.length;o+=1)C(j[o]);le=!0}},o(i){y(e.$$.fragment,i),y(W.$$.fragment,i);for(let o=0;o<T.length;o+=1)y(T[o]);y(K.$$.fragment,i);for(let o=0;o<j.length;o+=1)y(j[o]);le=!1},d(i){i&&(d(s),d(t),d(m),d(p),d(f),d(h),d(S),d($),d(H),d(Y),d(E),d(x),d(J),d(a),d(u),d(R),d(I),d(Q),d(he),d(X)),L(e,i),L(W,i);for(let o=0;o<T.length;o+=1)T[o].d();L(K,i);for(let o=0;o<j.length;o+=1)j[o].d()}}}function ot(n,e,s){let t,l,r;ve(n,z,f=>s(0,r=f));function c(){We(z,r.checks.homogeneousSections=[...r.checks.homogeneousSections,{availableWidth:0,notes1:"",notes2:""}],r)}function m(f){r.checks.homogeneousSections.splice(f,1),z.set(r)}function p(){We(z,r.checks.pinchPoints=[...r.checks.pinchPoints,{location:"",availableWidth:0,notes1:"",notes2:""}],r)}function P(f){r.checks.pinchPoints.splice(f,1),z.set(r)}const g=f=>m(f),M=f=>P(f);return n.$$.update=()=>{n.$$.dirty&1&&s(2,t=De(r,"Desirable")),n.$$.dirty&1&&s(1,l=De(r,"Absolute"))},[r,l,t,c,m,p,P,g,M]}class gt extends ge{constructor(e){super(),be(this,e,ot,at,_e,{})}}export{gt as component};
