import{s as me,y as Z,i as b,n as Pe,f as _,e as y,c as D,l as J,w as ie,t as V,a as P,b as Q,d as j,g as S,o as Ie,h as W,j as _e,x as le,k as be,a4 as Ve,K as ne,p as Se}from"../chunks/scheduler.BKca8jgz.js";import{S as de,i as pe,e as se,c as A,a as q,m as L,t as k,g as fe,b as T,f as he,d as E}from"../chunks/index.CFqagxlr.js";import{e as ue,u as We,o as Ce}from"../chunks/Geocoder.svelte_svelte_type_style_lang.CLPLPTv_.js";import{S as Me}from"../chunks/SecondaryButton.4UiulqFF.js";import{s as B}from"../chunks/data.CEycfqhM.js";import"../chunks/paths.BOv6pT8C.js";import{D as je,c as He}from"../chunks/logic.DH8WPo0H.js";import{T as Be}from"../chunks/TextArea.BfFYyba3.js";import{W as Oe}from"../chunks/WarningButton.Bz3oz85x.js";import{T as Ke}from"../chunks/TextInput.8KqWp6jK.js";function Ne(n){let e,i='Cross sections possible: <strong class="govuk-tag govuk-tag--red">Insufficient Space</strong>';return{c(){e=y("p"),e.innerHTML=i},l(t){e=D(t,"P",{"data-svelte-h":!0}),J(e)!=="svelte-sq6dx9"&&(e.innerHTML=i)},m(t,c){b(t,e,c)},d(t){t&&_(e)}}}function Re(n){let e,i='Cross sections possible: <strong class="govuk-tag govuk-tag--yellow">Absolute Minimum</strong>';return{c(){e=y("p"),e.innerHTML=i},l(t){e=D(t,"P",{"data-svelte-h":!0}),J(e)!=="svelte-r0abhc"&&(e.innerHTML=i)},m(t,c){b(t,e,c)},d(t){t&&_(e)}}}function Ue(n){let e,i='Cross sections possible: <strong class="govuk-tag govuk-tag--green">Desirable Minimum</strong>';return{c(){e=y("p"),e.innerHTML=i},l(t){e=D(t,"P",{"data-svelte-h":!0}),J(e)!=="svelte-1t7o0lp"&&(e.innerHTML=i)},m(t,c){b(t,e,c)},d(t){t&&_(e)}}}function Fe(n){let e;function i(o,l){return o[0]>=o[1]?Ue:o[0]>o[2]?Re:Ne}let t=i(n),c=t(n);return{c(){c.c(),e=Z()},l(o){c.l(o),e=Z()},m(o,l){c.m(o,l),b(o,e,l)},p(o,[l]){t!==(t=i(o))&&(c.d(1),c=t(o),c&&(c.c(),c.m(e.parentNode,e)))},i:Pe,o:Pe,d(o){o&&_(e),c.d(o)}}}function Ge(n,e,i){let{available:t}=e,{desirableTotal:c}=e,{absoluteTotal:o}=e;return n.$$set=l=>{"available"in l&&i(0,t=l.available),"desirableTotal"in l&&i(1,c=l.desirableTotal),"absoluteTotal"in l&&i(2,o=l.absoluteTotal)},[t,c,o]}class ze extends de{constructor(e){super(),pe(this,e,Ge,Fe,me,{available:0,desirableTotal:1,absoluteTotal:2})}}function ye(n){let e,i,t;function c(l){n[6](l)}let o={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return n[3].checks.homogeneousSections[n[0]].notes!==void 0&&(o.value=n[3].checks.homogeneousSections[n[0]].notes),e=new Be({props:o}),ie.push(()=>se(e,"value",c)),{c(){A(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,h){L(e,l,h),t=!0},p(l,h){const p={};!i&&h&9&&(i=!0,p.value=l[3].checks.homogeneousSections[l[0]].notes,le(()=>i=!1)),e.$set(p)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function Je(n){let e;return{c(){e=V("Delete")},l(i){e=j(i,"Delete")},m(i,t){b(i,e,t)},d(i){i&&_(e)}}}function Qe(n){let e,i,t,c=n[0]+1+"",o,l,h,p,w,v,m,d,C,M;function X(a){n[5](a)}let O={label:"Available width (m)",width:4,min:0};n[3].checks.homogeneousSections[n[0]].availableWidth!==void 0&&(O.value=n[3].checks.homogeneousSections[n[0]].availableWidth),h=new je({props:O}),ie.push(()=>se(h,"value",X)),v=new ze({props:{available:n[3].checks.homogeneousSections[n[0]].availableWidth,desirableTotal:n[1],absoluteTotal:n[2]}});let f=n[3].checks.homogeneousSections[n[0]].availableWidth<n[1]&&ye(n);return C=new Oe({props:{$$slots:{default:[Je]},$$scope:{ctx:n}}}),C.$on("click",n[7]),{c(){e=y("div"),i=y("u"),t=V("Cross-section #"),o=V(c),l=P(),A(h.$$.fragment),w=P(),A(v.$$.fragment),m=P(),f&&f.c(),d=P(),A(C.$$.fragment),this.h()},l(a){e=D(a,"DIV",{class:!0});var u=Q(e);i=D(u,"U",{});var g=Q(i);t=j(g,"Cross-section #"),o=j(g,c),g.forEach(_),l=S(u),q(h.$$.fragment,u),w=S(u),q(v.$$.fragment,u),m=S(u),f&&f.l(u),d=S(u),q(C.$$.fragment,u),u.forEach(_),this.h()},h(){Ie(e,"class","svelte-d4ufy0")},m(a,u){b(a,e,u),W(e,i),W(i,t),W(i,o),W(e,l),L(h,e,null),W(e,w),L(v,e,null),W(e,m),f&&f.m(e,null),W(e,d),L(C,e,null),M=!0},p(a,[u]){(!M||u&1)&&c!==(c=a[0]+1+"")&&_e(o,c);const g={};!p&&u&9&&(p=!0,g.value=a[3].checks.homogeneousSections[a[0]].availableWidth,le(()=>p=!1)),h.$set(g);const z={};u&9&&(z.available=a[3].checks.homogeneousSections[a[0]].availableWidth),u&2&&(z.desirableTotal=a[1]),u&4&&(z.absoluteTotal=a[2]),v.$set(z),a[3].checks.homogeneousSections[a[0]].availableWidth<a[1]?f?(f.p(a,u),u&11&&k(f,1)):(f=ye(a),f.c(),k(f,1),f.m(e,d)):f&&(fe(),T(f,1,1,()=>{f=null}),he());const I={};u&256&&(I.$$scope={dirty:u,ctx:a}),C.$set(I)},i(a){M||(k(h.$$.fragment,a),k(v.$$.fragment,a),k(f),k(C.$$.fragment,a),M=!0)},o(a){T(h.$$.fragment,a),T(v.$$.fragment,a),T(f),T(C.$$.fragment,a),M=!1},d(a){a&&_(e),E(h),E(v),f&&f.d(),E(C)}}}function Xe(n,e,i){let t;be(n,B,m=>i(3,t=m));let{i:c}=e,{desirableTotal:o}=e,{absoluteTotal:l}=e,h=Ve();function p(m){n.$$.not_equal(t.checks.homogeneousSections[c].availableWidth,m)&&(t.checks.homogeneousSections[c].availableWidth=m,B.set(t))}function w(m){n.$$.not_equal(t.checks.homogeneousSections[c].notes,m)&&(t.checks.homogeneousSections[c].notes=m,B.set(t))}const v=()=>h("delete");return n.$$set=m=>{"i"in m&&i(0,c=m.i),"desirableTotal"in m&&i(1,o=m.desirableTotal),"absoluteTotal"in m&&i(2,l=m.absoluteTotal)},[c,o,l,t,h,p,w,v]}class Ye extends de{constructor(e){super(),pe(this,e,Xe,Qe,me,{i:0,desirableTotal:1,absoluteTotal:2})}}function De(n){let e,i,t;function c(l){n[7](l)}let o={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return n[3].checks.pinchPoints[n[0]].notes!==void 0&&(o.value=n[3].checks.pinchPoints[n[0]].notes),e=new Be({props:o}),ie.push(()=>se(e,"value",c)),{c(){A(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,h){L(e,l,h),t=!0},p(l,h){const p={};!i&&h&9&&(i=!0,p.value=l[3].checks.pinchPoints[l[0]].notes,le(()=>i=!1)),e.$set(p)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function Ze(n){let e;return{c(){e=V("Delete")},l(i){e=j(i,"Delete")},m(i,t){b(i,e,t)},d(i){i&&_(e)}}}function xe(n){let e,i,t,c,o,l,h,p,w,v,m,d;function C(a){n[5](a)}let M={label:"Location of constraint"};n[3].checks.pinchPoints[n[0]].location!==void 0&&(M.value=n[3].checks.pinchPoints[n[0]].location),i=new Ke({props:M}),ie.push(()=>se(i,"value",C));function X(a){n[6](a)}let O={label:"Available width (m)",width:4,min:0};n[3].checks.pinchPoints[n[0]].availableWidth!==void 0&&(O.value=n[3].checks.pinchPoints[n[0]].availableWidth),o=new je({props:O}),ie.push(()=>se(o,"value",X)),p=new ze({props:{available:n[3].checks.pinchPoints[n[0]].availableWidth,desirableTotal:n[1],absoluteTotal:n[2]}});let f=n[3].checks.pinchPoints[n[0]].availableWidth<n[1]&&De(n);return m=new Oe({props:{$$slots:{default:[Ze]},$$scope:{ctx:n}}}),m.$on("click",n[8]),{c(){e=y("div"),A(i.$$.fragment),c=P(),A(o.$$.fragment),h=P(),A(p.$$.fragment),w=P(),f&&f.c(),v=P(),A(m.$$.fragment),this.h()},l(a){e=D(a,"DIV",{class:!0});var u=Q(e);q(i.$$.fragment,u),c=S(u),q(o.$$.fragment,u),h=S(u),q(p.$$.fragment,u),w=S(u),f&&f.l(u),v=S(u),q(m.$$.fragment,u),u.forEach(_),this.h()},h(){Ie(e,"class","svelte-d4ufy0")},m(a,u){b(a,e,u),L(i,e,null),W(e,c),L(o,e,null),W(e,h),L(p,e,null),W(e,w),f&&f.m(e,null),W(e,v),L(m,e,null),d=!0},p(a,[u]){const g={};!t&&u&9&&(t=!0,g.value=a[3].checks.pinchPoints[a[0]].location,le(()=>t=!1)),i.$set(g);const z={};!l&&u&9&&(l=!0,z.value=a[3].checks.pinchPoints[a[0]].availableWidth,le(()=>l=!1)),o.$set(z);const I={};u&9&&(I.available=a[3].checks.pinchPoints[a[0]].availableWidth),u&2&&(I.desirableTotal=a[1]),u&4&&(I.absoluteTotal=a[2]),p.$set(I),a[3].checks.pinchPoints[a[0]].availableWidth<a[1]?f?(f.p(a,u),u&11&&k(f,1)):(f=De(a),f.c(),k(f,1),f.m(e,v)):f&&(fe(),T(f,1,1,()=>{f=null}),he());const R={};u&512&&(R.$$scope={dirty:u,ctx:a}),m.$set(R)},i(a){d||(k(i.$$.fragment,a),k(o.$$.fragment,a),k(p.$$.fragment,a),k(f),k(m.$$.fragment,a),d=!0)},o(a){T(i.$$.fragment,a),T(o.$$.fragment,a),T(p.$$.fragment,a),T(f),T(m.$$.fragment,a),d=!1},d(a){a&&_(e),E(i),E(o),E(p),f&&f.d(),E(m)}}}function et(n,e,i){let t;be(n,B,d=>i(3,t=d));let{i:c}=e,{desirableTotal:o}=e,{absoluteTotal:l}=e,h=Ve();function p(d){n.$$.not_equal(t.checks.pinchPoints[c].location,d)&&(t.checks.pinchPoints[c].location=d,B.set(t))}function w(d){n.$$.not_equal(t.checks.pinchPoints[c].availableWidth,d)&&(t.checks.pinchPoints[c].availableWidth=d,B.set(t))}function v(d){n.$$.not_equal(t.checks.pinchPoints[c].notes,d)&&(t.checks.pinchPoints[c].notes=d,B.set(t))}const m=()=>h("delete");return n.$$set=d=>{"i"in d&&i(0,c=d.i),"desirableTotal"in d&&i(1,o=d.desirableTotal),"absoluteTotal"in d&&i(2,l=d.absoluteTotal)},[c,o,l,t,h,p,w,v,m]}class tt extends de{constructor(e){super(),pe(this,e,et,xe,me,{i:0,desirableTotal:1,absoluteTotal:2})}}function Ae(n,e,i){const t=n.slice();return t[9]=e[i],t[11]=i,t}function qe(n,e,i){const t=n.slice();return t[9]=e[i],t[11]=i,t}function nt(n){let e;return{c(){e=V("Add")},l(i){e=j(i,"Add")},m(i,t){b(i,e,t)},d(i){i&&_(e)}}}function Le(n,e){let i,t,c;function o(){return e[7](e[11])}return t=new Ye({props:{i:e[11],desirableTotal:e[2],absoluteTotal:e[1]}}),t.$on("delete",o),{key:n,first:null,c(){i=Z(),A(t.$$.fragment),this.h()},l(l){i=Z(),q(t.$$.fragment,l),this.h()},h(){this.first=i},m(l,h){b(l,i,h),L(t,l,h),c=!0},p(l,h){e=l;const p={};h&1&&(p.i=e[11]),h&4&&(p.desirableTotal=e[2]),h&2&&(p.absoluteTotal=e[1]),t.$set(p)},i(l){c||(k(t.$$.fragment,l),c=!0)},o(l){T(t.$$.fragment,l),c=!1},d(l){l&&_(i),E(t,l)}}}function it(n){let e;return{c(){e=V("Add")},l(i){e=j(i,"Add")},m(i,t){b(i,e,t)},d(i){i&&_(e)}}}function Ee(n,e){let i,t,c;function o(){return e[8](e[11])}return t=new tt({props:{i:e[11],desirableTotal:e[2],absoluteTotal:e[1]}}),t.$on("delete",o),{key:n,first:null,c(){i=Z(),A(t.$$.fragment),this.h()},l(l){i=Z(),q(t.$$.fragment,l),this.h()},h(){this.first=i},m(l,h){b(l,i,h),L(t,l,h),c=!0},p(l,h){e=l;const p={};h&1&&(p.i=e[11]),h&4&&(p.desirableTotal=e[2]),h&2&&(p.absoluteTotal=e[1]),t.$set(p)},i(l){c||(k(t.$$.fragment,l),c=!0)},o(l){T(t.$$.fragment,l),c=!1},d(l){l&&_(i),E(t,l)}}}function lt(n){let e,i,t,c,o,l,h,p,w,v,m,d=`Checking possible cross-sections of <u>homogeneous sections</u>
  of route along the proposed corridor`,C,M,X=`At regular intervals along the corridor measure and enter the available width
  to see if your proposed cross-sections can be accommodated`,O,f,a,u,g=[],z=new Map,I,R,oe,U,ge=`Checking possible cross-sections of any <u>constrained or atypical locations</u>
  along the proposed corridor`,ae,F,ve=`At key constraints along the corridor, measure and enter the available width
  to see if your proposed cross-sections can be accommodated`,re,K,ce,N,H=[],$e=new Map,Y;f=new Me({props:{$$slots:{default:[nt]},$$scope:{ctx:n}}}),f.$on("click",n[3]);let x=ue(n[0].checks.homogeneousSections);const ke=s=>s[11];for(let s=0;s<x.length;s+=1){let r=qe(n,x,s),$=ke(r);z.set($,g[s]=Le($,r))}K=new Me({props:{$$slots:{default:[it]},$$scope:{ctx:n}}}),K.$on("click",n[5]);let ee=ue(n[0].checks.pinchPoints);const Te=s=>s[11];for(let s=0;s<ee.length;s+=1){let r=Ae(n,ee,s),$=Te(r);$e.set($,H[s]=Ee($,r))}return{c(){e=y("p"),i=V("Desirable Minimum requires: "),t=V(n[2]),c=V(" m"),o=P(),l=y("p"),h=V("Absolute Minimum requires: "),p=V(n[1]),w=V(" m"),v=P(),m=y("h2"),m.innerHTML=d,C=P(),M=y("p"),M.textContent=X,O=P(),A(f.$$.fragment),a=P(),u=y("div");for(let s=0;s<g.length;s+=1)g[s].c();I=P(),R=y("hr"),oe=P(),U=y("h2"),U.innerHTML=ge,ae=P(),F=y("p"),F.textContent=ve,re=P(),A(K.$$.fragment),ce=P(),N=y("div");for(let s=0;s<H.length;s+=1)H[s].c();this.h()},l(s){e=D(s,"P",{});var r=Q(e);i=j(r,"Desirable Minimum requires: "),t=j(r,n[2]),c=j(r," m"),r.forEach(_),o=S(s),l=D(s,"P",{});var $=Q(l);h=j($,"Absolute Minimum requires: "),p=j($,n[1]),w=j($," m"),$.forEach(_),v=S(s),m=D(s,"H2",{"data-svelte-h":!0}),J(m)!=="svelte-1x2x8kb"&&(m.innerHTML=d),C=S(s),M=D(s,"P",{"data-svelte-h":!0}),J(M)!=="svelte-x0c18j"&&(M.textContent=X),O=S(s),q(f.$$.fragment,s),a=S(s),u=D(s,"DIV",{style:!0});var te=Q(u);for(let G=0;G<g.length;G+=1)g[G].l(te);te.forEach(_),I=S(s),R=D(s,"HR",{}),oe=S(s),U=D(s,"H2",{"data-svelte-h":!0}),J(U)!=="svelte-1m1bgig"&&(U.innerHTML=ge),ae=S(s),F=D(s,"P",{"data-svelte-h":!0}),J(F)!=="svelte-bdzwl6"&&(F.textContent=ve),re=S(s),q(K.$$.fragment,s),ce=S(s),N=D(s,"DIV",{style:!0});var we=Q(N);for(let G=0;G<H.length;G+=1)H[G].l(we);we.forEach(_),this.h()},h(){ne(u,"display","flex"),ne(u,"flex-direction","row"),ne(u,"overflow-x","scroll"),ne(N,"display","flex"),ne(N,"flex-direction","row: overflow-x: scroll")},m(s,r){b(s,e,r),W(e,i),W(e,t),W(e,c),b(s,o,r),b(s,l,r),W(l,h),W(l,p),W(l,w),b(s,v,r),b(s,m,r),b(s,C,r),b(s,M,r),b(s,O,r),L(f,s,r),b(s,a,r),b(s,u,r);for(let $=0;$<g.length;$+=1)g[$]&&g[$].m(u,null);b(s,I,r),b(s,R,r),b(s,oe,r),b(s,U,r),b(s,ae,r),b(s,F,r),b(s,re,r),L(K,s,r),b(s,ce,r),b(s,N,r);for(let $=0;$<H.length;$+=1)H[$]&&H[$].m(N,null);Y=!0},p(s,[r]){(!Y||r&4)&&_e(t,s[2]),(!Y||r&2)&&_e(p,s[1]);const $={};r&8192&&($.$$scope={dirty:r,ctx:s}),f.$set($),r&23&&(x=ue(s[0].checks.homogeneousSections),fe(),g=We(g,r,ke,1,s,x,z,u,Ce,Le,null,qe),he());const te={};r&8192&&(te.$$scope={dirty:r,ctx:s}),K.$set(te),r&71&&(ee=ue(s[0].checks.pinchPoints),fe(),H=We(H,r,Te,1,s,ee,$e,N,Ce,Ee,null,Ae),he())},i(s){if(!Y){k(f.$$.fragment,s);for(let r=0;r<x.length;r+=1)k(g[r]);k(K.$$.fragment,s);for(let r=0;r<ee.length;r+=1)k(H[r]);Y=!0}},o(s){T(f.$$.fragment,s);for(let r=0;r<g.length;r+=1)T(g[r]);T(K.$$.fragment,s);for(let r=0;r<H.length;r+=1)T(H[r]);Y=!1},d(s){s&&(_(e),_(o),_(l),_(v),_(m),_(C),_(M),_(O),_(a),_(u),_(I),_(R),_(oe),_(U),_(ae),_(F),_(re),_(ce),_(N)),E(f,s);for(let r=0;r<g.length;r+=1)g[r].d();E(K,s);for(let r=0;r<H.length;r+=1)H[r].d()}}}function st(n,e,i){let t,c,o;be(n,B,d=>i(0,o=d));function l(){Se(B,o.checks.homogeneousSections=[...o.checks.homogeneousSections,{availableWidth:0,notes:""}],o)}function h(d){o.checks.homogeneousSections.splice(d,1),B.set(o)}function p(){Se(B,o.checks.pinchPoints=[...o.checks.pinchPoints,{location:"",availableWidth:0,notes:""}],o)}function w(d){o.checks.pinchPoints.splice(d,1),B.set(o)}const v=d=>h(d),m=d=>w(d);return n.$$.update=()=>{n.$$.dirty&1&&i(2,t=He(o,"Desirable")),n.$$.dirty&1&&i(1,c=He(o,"Absolute"))},[o,c,t,l,h,p,w,v,m]}class _t extends de{constructor(e){super(),pe(this,e,st,lt,me,{})}}export{_t as component};
