import{s as we,w as te,x as le,a as S,e as L,g as E,c as N,p as Y,i as F,F as Nt,z as ot,f as _,y as ln,l as cn,t as j,b as R,d as A,q as ve,P as at,h as v,ab as dn,j as fe,u as pn,r as mn,v as hn,m as De,k as ze,U as _n,G as gn,E as Pe,n as Je,a7 as $n,T as rn}from"../chunks/scheduler.ytQcc2rf.js";import{S as ke,i as ye,e as re,c as M,a as W,m as O,t as w,b as T,d as P,g as ae,f as oe}from"../chunks/index.D9yYtTfk.js";import{e as G,u as be,o as Ue,d as _t}from"../chunks/each.2RvRdhFj.js";import{D as gt}from"../chunks/DefaultButton.DeS4Ykkw.js";import{S as Te}from"../chunks/Select.CEc0mqfX.js";/* empty css                                                               */import{S as Fe}from"../chunks/SecondaryButton.Dq9MsXNi.js";import{W as sn}from"../chunks/WarningButton.C6jnTAfb.js";import{W as bn}from"../chunks/WarningText.EpHFD6ND.js";import{s as X,a as an,b as vn}from"../chunks/data.CLMxzgIU.js";import{a as on,c as wn,n as kn,g as ft}from"../chunks/logic.QIc_5A2T.js";/* empty css                                                    */import{E as yn}from"../chunks/ExternalLink.BPBlKSFO.js";import"../chunks/paths.BIrG8LKX.js";import{D as Dn}from"../chunks/DecimalInput.CAOt2h8j.js";import{E as fn}from"../chunks/ErrorMessage.1StsFJYS.js";import{T as Tn}from"../chunks/TextInput.DxUXxcOo.js";import{v as Fn}from"../chunks/v4.b0td5MfA.js";import{C as ut}from"../chunks/CollapsibleCard.Bf0oqccF.js";import{p as Oe}from"../chunks/index.CpqWwvYZ.js";import{F as Cn}from"../chunks/FormElement.CQDLUqPU.js";import{v as Sn}from"../chunks/v4.D8aEg3BZ.js";function En(l){let e,n,t;function r(i){l[9](i)}let s={label:l[0],hint:l[1],choices:l[5],emptyOption:l[2],disabled:l[3]};return l[4]!==void 0&&(s.value=l[4]),e=new Te({props:s}),te.push(()=>re(e,"value",r)),e.$on("change",l[6]),{c(){M(e.$$.fragment)},l(i){W(e.$$.fragment,i)},m(i,o){O(e,i,o),t=!0},p(i,[o]){const a={};o&1&&(a.label=i[0]),o&2&&(a.hint=i[1]),o&32&&(a.choices=i[5]),o&4&&(a.emptyOption=i[2]),o&8&&(a.disabled=i[3]),!n&&o&16&&(n=!0,a.value=i[4],le(()=>n=!1)),e.$set(a)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){T(e.$$.fragment,i),t=!1},d(i){P(e,i)}}}function Ln(l){return l.map(e=>[JSON.stringify(e[0]),e[1]])}function Nn(l,e,n){let t,r,{label:s}=e,{hint:i=""}=e,{choices:o}=e,{emptyOption:a=!1}=e,{disabled:f=!1}=e,{value:m}=e;function u(){n(7,m=r==""?"":JSON.parse(r))}function h($){r=$,n(4,r),n(7,m)}return l.$$set=$=>{"label"in $&&n(0,s=$.label),"hint"in $&&n(1,i=$.hint),"choices"in $&&n(8,o=$.choices),"emptyOption"in $&&n(2,a=$.emptyOption),"disabled"in $&&n(3,f=$.disabled),"value"in $&&n(7,m=$.value)},l.$$.update=()=>{l.$$.dirty&256&&n(5,t=Ln(o)),l.$$.dirty&128&&n(4,r=JSON.stringify(m))},[s,i,a,f,r,t,u,m,o,h]}class Bn extends ke{constructor(e){super(),ye(this,e,Nn,En,we,{label:0,hint:1,choices:8,emptyOption:2,disabled:3,value:7})}}function Mn(l){let e,n,t,r,s,i,o;return e=new fn({props:{errorMessage:l[5](l[2])}}),{c(){M(e.$$.fragment),n=S(),t=L("input"),this.h()},l(a){W(e.$$.fragment,a),n=E(a),t=N(a,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){Y(t,"type","text"),Y(t,"inputmode","numeric"),Y(t,"class",r=`govuk-input govuk-input--width-${l[1]}`),Y(t,"id",l[3])},m(a,f){O(e,a,f),F(a,n,f),F(a,t,f),Nt(t,l[2]),s=!0,i||(o=[ot(t,"input",l[9]),ot(t,"change",l[4])],i=!0)},p(a,f){const m={};f&4&&(m.errorMessage=a[5](a[2])),e.$set(m),(!s||f&2&&r!==(r=`govuk-input govuk-input--width-${a[1]}`))&&Y(t,"class",r),f&4&&t.value!==a[2]&&Nt(t,a[2])},i(a){s||(w(e.$$.fragment,a),s=!0)},o(a){T(e.$$.fragment,a),s=!1},d(a){a&&(_(n),_(t)),P(e,a),i=!1,ln(o)}}}function Wn(l){let e,n;return e=new Cn({props:{label:l[0],id:l[3],$$slots:{default:[Mn]},$$scope:{ctx:l}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){O(e,t,r),n=!0},p(t,[r]){const s={};r&1&&(s.label=t[0]),r&1030&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function On(l,e,n){let{label:t}=e,{value:r}=e,{width:s}=e,{min:i=void 0}=e,{max:o=void 0}=e,a=r==null?void 0:r.toString(),f=Sn();function m(){n(6,r=a==null?void 0:parseInt(a,10))}function u($){if($==""||$==null)return"";if($.includes("."))return"Please enter a number without decimals";let g=Number($);return isNaN(g)?"Please enter a valid number":i!=null&&g<i?`Please enter a number that's at least ${i};`:o!=null&&g>o?`Please enter a number that's at most ${o};`:""}function h(){a=this.value,n(2,a)}return l.$$set=$=>{"label"in $&&n(0,t=$.label),"value"in $&&n(6,r=$.value),"width"in $&&n(1,s=$.width),"min"in $&&n(7,i=$.min),"max"in $&&n(8,o=$.max)},[t,s,a,f,m,u,r,i,o,h]}class Pn extends ke{constructor(e){super(),ye(this,e,On,Wn,we,{label:0,value:6,width:1,min:7,max:8})}}function Bt(l){let e,n;return e=new Fe({props:{$$slots:{default:[Rn]},$$scope:{ctx:l}}}),e.$on("click",l[5]),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){O(e,t,r),n=!0},p(t,r){const s={};r&128&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function Rn(l){let e;return{c(){e=j("X")},l(n){e=A(n,"X")},m(n,t){F(n,e,t)},d(n){n&&_(e)}}}function In(l){let e,n,t,r,s,i,o,a,f,m,u=l[2]&&Bt(l);const h=l[4].default,$=cn(h,l,l[7],null);return{c(){e=L("div"),n=L("div"),t=L("div"),r=L("h1"),s=j(l[1]),i=S(),u&&u.c(),o=S(),$&&$.c(),this.h()},l(g){e=N(g,"DIV",{class:!0});var d=R(e);n=N(d,"DIV",{class:!0});var y=R(n);t=N(y,"DIV",{style:!0});var b=R(t);r=N(b,"H1",{class:!0});var B=R(r);s=A(B,l[1]),B.forEach(_),i=E(b),u&&u.l(b),b.forEach(_),o=E(y),$&&$.l(y),y.forEach(_),d.forEach(_),this.h()},h(){Y(r,"class","govuk-heading-l"),ve(t,"display","flex"),ve(t,"justify-content","space-between"),Y(n,"class","content centered-fullscreen svelte-1bl3d9w"),Y(e,"class","background svelte-1bl3d9w"),at(e,"open",l[0]),at(e,"closed",!l[0])},m(g,d){F(g,e,d),v(e,n),v(n,t),v(t,r),v(r,s),v(t,i),u&&u.m(t,null),v(n,o),$&&$.m(n,null),a=!0,f||(m=[ot(n,"click",dn(qn)),ot(e,"click",l[6])],f=!0)},p(g,[d]){(!a||d&2)&&fe(s,g[1]),g[2]?u?(u.p(g,d),d&4&&w(u,1)):(u=Bt(g),u.c(),w(u,1),u.m(t,null)):u&&(ae(),T(u,1,1,()=>{u=null}),oe()),$&&$.p&&(!a||d&128)&&pn($,h,g,g[7],a?hn(h,g[7],d,null):mn(g[7]),null),(!a||d&1)&&at(e,"open",g[0]),(!a||d&1)&&at(e,"closed",!g[0])},i(g){a||(w(u),w($,g),a=!0)},o(g){T(u),T($,g),a=!1},d(g){g&&_(e),u&&u.d(),$&&$.d(g),f=!1,ln(m)}}}const qn=()=>null;function Vn(l,e,n){let{$$slots:t={},$$scope:r}=e,{title:s}=e,{open:i=!1}=e,{displayEscapeButton:o=!0}=e,{canCloseByClickingBackground:a=!0}=e;const f=()=>n(0,i=!1),m=()=>{a&&n(0,i=!1)};return l.$$set=u=>{"title"in u&&n(1,s=u.title),"open"in u&&n(0,i=u.open),"displayEscapeButton"in u&&n(2,o=u.displayEscapeButton),"canCloseByClickingBackground"in u&&n(3,a=u.canCloseByClickingBackground),"$$scope"in u&&n(7,r=u.$$scope)},[i,s,o,a,t,f,m,r]}class jn extends ke{constructor(e){super(),ye(this,e,Vn,In,we,{title:1,open:0,displayEscapeButton:2,canCloseByClickingBackground:3})}}function Mt(l){return typeof l=="object"||l==""?[]:An[l]}let An={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",ie(76)],["LTN 1/20 Figure 4.1 pp. 33",ie(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",ie(43)],["LTN 1/20 Figure 4.1 pp. 33",ie(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ie(43)],["LTN 1/20 Figure 4.1 pp. 33",ie(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ie(43)],["LTN 1/20 Figure 4.1 pp. 33",ie(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",ie(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",ie(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",ie(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",ie(54)]]};function ie(l){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${l}`}function Wt(l,e){let n=on(e.speedLimit,e.observedSpeed);switch(l){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&n==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&n==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return n==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":n==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":n==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return n==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":n==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":n==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Ot(l,e,n){const t=l.slice();return t[19]=e[n],t[21]=n,t}function Pt(l,e,n){const t=l.slice();return t[19]=e[n],t[21]=n,t}function Rt(l,e,n){const t=l.slice();return t[23]=e[n][0],t[24]=e[n][1],t}function It(l,e,n){const t=l.slice();t[19]=e[n],t[21]=n;const r=t[21]==0?"":t[0][t[21]-1];t[27]=r;const s=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=s,t}function qt(l,e,n){const t=l.slice();t[19]=e[n],t[21]=n;const r=t[21]==0?"":t[0][t[21]-1];t[27]=r;const s=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=s,t}function Vt(l,e,n){const t=l.slice();t[19]=e[n],t[21]=n;const r=t[21]==0?"":t[0][t[21]-1];t[27]=r;const s=t[21]==t[0].length-1?"":t[0][t[21]+1];t[28]=s;const i=kn(t[19],t[27],t[28]);return t[31]=i,t}function jt(l,e,n){const t=l.slice();return t[19]=e[n],t[33]=e,t[21]=n,t}function At(l,e,n){const t=l.slice();return t[19]=e[n],t[21]=n,t}function Hn(l){let e;return{c(){e=j("Add feature")},l(n){e=A(n,"Add feature")},m(n,t){F(n,e,t)},d(n){n&&_(e)}}}function Un(l){let e;return{c(){e=j("←")},l(n){e=A(n,"←")},m(n,t){F(n,e,t)},d(n){n&&_(e)}}}function Jn(l){let e;return{c(){e=j("Delete")},l(n){e=A(n,"Delete")},m(n,t){F(n,e,t)},d(n){n&&_(e)}}}function zn(l){let e;return{c(){e=j("→")},l(n){e=A(n,"→")},m(n,t){F(n,e,t)},d(n){n&&_(e)}}}function Ht(l,e){let n,t,r,s,i,o,a,f,m;function u(){return e[11](e[21])}r=new Fe({props:{disabled:e[21]==0,$$slots:{default:[Un]},$$scope:{ctx:e}}}),r.$on("click",u);function h(){return e[12](e[21])}i=new sn({props:{$$slots:{default:[Jn]},$$scope:{ctx:e}}}),i.$on("click",h);function $(){return e[13](e[21])}return a=new Fe({props:{disabled:e[21]==e[0].length-1,$$slots:{default:[zn]},$$scope:{ctx:e}}}),a.$on("click",$),{key:l,first:null,c(){n=L("td"),t=L("div"),M(r.$$.fragment),s=S(),M(i.$$.fragment),o=S(),M(a.$$.fragment),f=S(),this.h()},l(g){n=N(g,"TD",{class:!0});var d=R(n);t=N(d,"DIV",{style:!0});var y=R(t);W(r.$$.fragment,y),s=E(y),W(i.$$.fragment,y),o=E(y),W(a.$$.fragment,y),y.forEach(_),f=E(d),d.forEach(_),this.h()},h(){ve(t,"display","flex"),ve(t,"justify-content","space-between"),Y(n,"class","svelte-18bftjb"),this.first=n},m(g,d){F(g,n,d),v(n,t),O(r,t,null),v(t,s),O(i,t,null),v(t,o),O(a,t,null),v(n,f),m=!0},p(g,d){e=g;const y={};d[0]&1&&(y.disabled=e[21]==0),d[1]&16&&(y.$$scope={dirty:d,ctx:e}),r.$set(y);const b={};d[1]&16&&(b.$$scope={dirty:d,ctx:e}),i.$set(b);const B={};d[0]&1&&(B.disabled=e[21]==e[0].length-1),d[1]&16&&(B.$$scope={dirty:d,ctx:e}),a.$set(B)},i(g){m||(w(r.$$.fragment,g),w(i.$$.fragment,g),w(a.$$.fragment,g),m=!0)},o(g){T(r.$$.fragment,g),T(i.$$.fragment,g),T(a.$$.fragment,g),m=!1},d(g){g&&_(n),P(r),P(i),P(a)}}}function Ut(l,e){let n,t,r,s,i;function o(f){e[14](f,e[19],e[33],e[21])}let a={label:"Street feature type",emptyOption:!0,choices:e[3]};return e[19]!==void 0&&(a.value=e[19]),t=new Bn({props:a}),te.push(()=>re(t,"value",o)),{key:l,first:null,c(){n=L("td"),M(t.$$.fragment),s=S(),this.h()},l(f){n=N(f,"TD",{class:!0});var m=R(n);W(t.$$.fragment,m),s=E(m),m.forEach(_),this.h()},h(){Y(n,"class","svelte-18bftjb"),this.first=n},m(f,m){F(f,n,m),O(t,n,null),v(n,s),i=!0},p(f,m){e=f;const u={};m[0]&8&&(u.choices=e[3]),!r&&m[0]&1&&(r=!0,u.value=e[19],le(()=>r=!1)),t.$set(u)},i(f){i||(w(t.$$.fragment,f),i=!0)},o(f){T(t.$$.fragment,f),i=!1},d(f){f&&_(n),P(t)}}}function Jt(l){let e,n;return e=new bn({props:{$$slots:{default:[Xn]},$$scope:{ctx:l}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){O(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&16&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function Gn(l){let e;return{c(){e=j("Add")},l(n){e=A(n,"Add")},m(n,t){F(n,e,t)},d(n){n&&_(e)}}}function Xn(l){let e=l[31].warning+"",n,t,r,s;function i(){return l[15](l[21],l[31])}return r=new Fe({props:{style:"margin-bottom: 0px; float: right",$$slots:{default:[Gn]},$$scope:{ctx:l}}}),r.$on("click",i),{c(){n=j(e),t=S(),M(r.$$.fragment)},l(o){n=A(o,e),t=E(o),W(r.$$.fragment,o)},m(o,a){F(o,n,a),F(o,t,a),O(r,o,a),s=!0},p(o,a){l=o,(!s||a[0]&1)&&e!==(e=l[31].warning+"")&&fe(n,e);const f={};a[1]&16&&(f.$$scope={dirty:a,ctx:l}),r.$set(f)},i(o){s||(w(r.$$.fragment,o),s=!0)},o(o){T(r.$$.fragment,o),s=!1},d(o){o&&(_(n),_(t)),P(r,o)}}}function zt(l,e){let n,t,r,s=e[31].warning!=""&&Jt(e);return{key:l,first:null,c(){n=L("td"),s&&s.c(),t=S(),this.h()},l(i){n=N(i,"TD",{class:!0});var o=R(n);s&&s.l(o),t=E(o),o.forEach(_),this.h()},h(){Y(n,"class","svelte-18bftjb"),this.first=n},m(i,o){F(i,n,o),s&&s.m(n,null),v(n,t),r=!0},p(i,o){e=i,e[31].warning!=""?s?(s.p(e,o),o[0]&1&&w(s,1)):(s=Jt(e),s.c(),w(s,1),s.m(n,t)):s&&(ae(),T(s,1,1,()=>{s=null}),oe())},i(i){r||(w(s),r=!0)},o(i){T(s),r=!1},d(i){i&&_(n),s&&s.d()}}}function Gt(l,e){let n,t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"",r,s;return{key:l,first:null,c(){n=L("td"),r=j(t),s=S(),this.h()},l(i){n=N(i,"TD",{class:!0});var o=R(n);r=A(o,t),s=E(o),o.forEach(_),this.h()},h(){Y(n,"class","svelte-18bftjb"),this.first=n},m(i,o){F(i,n,o),v(n,r),v(n,s)},p(i,o){e=i,o[0]&3&&t!==(t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"")&&fe(r,t)},d(i){i&&_(n)}}}function Xt(l,e){let n,t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"",r,s;return{key:l,first:null,c(){n=L("td"),r=j(t),s=S(),this.h()},l(i){n=N(i,"TD",{class:!0});var o=R(n);r=A(o,t),s=E(o),o.forEach(_),this.h()},h(){Y(n,"class","svelte-18bftjb"),this.first=n},m(i,o){F(i,n,o),v(n,r),v(n,s)},p(i,o){e=i,o[0]&3&&t!==(t=ft(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"")&&fe(r,t)},d(i){i&&_(n)}}}function Yn(l){let e,n=l[23]+"",t;return{c(){e=L("li"),t=j(n)},l(r){e=N(r,"LI",{});var s=R(e);t=A(s,n),s.forEach(_)},m(r,s){F(r,e,s),v(e,t)},p(r,s){s[0]&1&&n!==(n=r[23]+"")&&fe(t,n)},i:Je,o:Je,d(r){r&&_(e)}}}function Kn(l){let e,n,t;return n=new yn({props:{href:l[24],$$slots:{default:[Qn]},$$scope:{ctx:l}}}),{c(){e=L("li"),M(n.$$.fragment)},l(r){e=N(r,"LI",{});var s=R(e);W(n.$$.fragment,s),s.forEach(_)},m(r,s){F(r,e,s),O(n,e,null),t=!0},p(r,s){const i={};s[0]&1&&(i.href=r[24]),s[0]&1|s[1]&16&&(i.$$scope={dirty:s,ctx:r}),n.$set(i)},i(r){t||(w(n.$$.fragment,r),t=!0)},o(r){T(n.$$.fragment,r),t=!1},d(r){r&&_(e),P(n)}}}function Qn(l){let e=l[23]+"",n;return{c(){n=j(e)},l(t){n=A(t,e)},m(t,r){F(t,n,r)},p(t,r){r[0]&1&&e!==(e=t[23]+"")&&fe(n,e)},d(t){t&&_(n)}}}function Yt(l){let e,n,t,r;const s=[Kn,Yn],i=[];function o(a,f){return a[24]?0:1}return e=o(l),n=i[e]=s[e](l),{c(){n.c(),t=Pe()},l(a){n.l(a),t=Pe()},m(a,f){i[e].m(a,f),F(a,t,f),r=!0},p(a,f){let m=e;e=o(a),e===m?i[e].p(a,f):(ae(),T(i[m],1,1,()=>{i[m]=null}),oe(),n=i[e],n?n.p(a,f):(n=i[e]=s[e](a),n.c()),w(n,1),n.m(t.parentNode,t))},i(a){r||(w(n),r=!0)},o(a){T(n),r=!1},d(a){a&&_(t),i[e].d(a)}}}function Kt(l,e){let n,t,r,s,i=G(Mt(e[19])),o=[];for(let f=0;f<i.length;f+=1)o[f]=Yt(Rt(e,i,f));const a=f=>T(o[f],1,1,()=>{o[f]=null});return{key:l,first:null,c(){n=L("td"),t=L("ul");for(let f=0;f<o.length;f+=1)o[f].c();r=S(),this.h()},l(f){n=N(f,"TD",{class:!0});var m=R(n);t=N(m,"UL",{});var u=R(t);for(let h=0;h<o.length;h+=1)o[h].l(u);u.forEach(_),r=E(m),m.forEach(_),this.h()},h(){Y(n,"class","svelte-18bftjb"),this.first=n},m(f,m){F(f,n,m),v(n,t);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null);v(n,r),s=!0},p(f,m){if(e=f,m[0]&1){i=G(Mt(e[19]));let u;for(u=0;u<i.length;u+=1){const h=Rt(e,i,u);o[u]?(o[u].p(h,m),w(o[u],1)):(o[u]=Yt(h),o[u].c(),w(o[u],1),o[u].m(t,null))}for(ae(),u=i.length;u<o.length;u+=1)a(u);oe()}},i(f){if(!s){for(let m=0;m<i.length;m+=1)w(o[m]);s=!0}},o(f){o=o.filter(Boolean);for(let m=0;m<o.length;m+=1)T(o[m]);s=!1},d(f){f&&_(n),gn(o,f)}}}function Qt(l,e){let n,t,r=Wt(e[19],e[1].proposed.trafficData)+"",s,i;return{key:l,first:null,c(){n=L("td"),t=L("p"),s=j(r),i=S(),this.h()},l(o){n=N(o,"TD",{class:!0});var a=R(n);t=N(a,"P",{style:!0});var f=R(t);s=A(f,r),f.forEach(_),i=E(a),a.forEach(_),this.h()},h(){ve(t,"max-width","400px"),Y(n,"class","svelte-18bftjb"),this.first=n},m(o,a){F(o,n,a),v(n,t),v(t,s),v(n,i)},p(o,a){e=o,a[0]&3&&r!==(r=Wt(e[19],e[1].proposed.trafficData)+"")&&fe(s,r)},d(o){o&&_(n)}}}function Zn(l){let e,n,t,r,s,i=l[4][0].toFixed(2)+"",o,a,f,m,u,h=l[4][1].toFixed(2)+"",$,g,d,y,b,B,Q,V=[],ue=new Map,C,I,K,ce="Street Feature",Re,J=[],Ge=new Map,Ce,de,me,Xe="Buffers",Se,q=[],Ye=new Map,Ee,pe,he,Ke="Desirable minimum width (m)",Le,D=[],z=new Map,Z,U,_e,Ie="Absolute minimum width (m)",Ne,x=[],qe=new Map,ct,ge,Be,$t="References",dt,ee=[],bt=new Map,pt,$e,Me,vt="Guidance",mt,se=[],wt=new Map,We;e=new gt({props:{$$slots:{default:[Hn]},$$scope:{ctx:l}}}),e.$on("click",l[5]);let Ve=G(l[0]);const kt=c=>c[21];for(let c=0;c<Ve.length;c+=1){let p=At(l,Ve,c),k=kt(p);ue.set(k,V[c]=Ht(k,p))}let je=G(l[0]);const yt=c=>c[21];for(let c=0;c<je.length;c+=1){let p=jt(l,je,c),k=yt(p);Ge.set(k,J[c]=Ut(k,p))}let Ae=G(l[0]);const Dt=c=>c[21];for(let c=0;c<Ae.length;c+=1){let p=Vt(l,Ae,c),k=Dt(p);Ye.set(k,q[c]=zt(k,p))}let Qe=G(l[0]);const Tt=c=>c[21];for(let c=0;c<Qe.length;c+=1){let p=qt(l,Qe,c),k=Tt(p);z.set(k,D[c]=Gt(k,p))}let Ze=G(l[0]);const Ft=c=>c[21];for(let c=0;c<Ze.length;c+=1){let p=It(l,Ze,c),k=Ft(p);qe.set(k,x[c]=Xt(k,p))}let He=G(l[0]);const Ct=c=>c[21];for(let c=0;c<He.length;c+=1){let p=Pt(l,He,c),k=Ct(p);bt.set(k,ee[c]=Kt(k,p))}let xe=G(l[0]);const St=c=>c[21];for(let c=0;c<xe.length;c+=1){let p=Ot(l,xe,c),k=St(p);wt.set(k,se[c]=Qt(k,p))}return{c(){M(e.$$.fragment),n=S(),t=L("p"),r=j("Desirable minimum total width required (m): "),s=L("b"),o=j(i),a=S(),f=L("p"),m=j("Absolute minimum total width required (m): "),u=L("b"),$=j(h),g=S(),d=L("div"),y=L("table"),b=L("tr"),B=L("th"),Q=S();for(let c=0;c<V.length;c+=1)V[c].c();C=S(),I=L("tr"),K=L("th"),K.textContent=ce,Re=S();for(let c=0;c<J.length;c+=1)J[c].c();Ce=S(),de=L("tr"),me=L("th"),me.textContent=Xe,Se=S();for(let c=0;c<q.length;c+=1)q[c].c();Ee=S(),pe=L("tr"),he=L("th"),he.textContent=Ke,Le=S();for(let c=0;c<D.length;c+=1)D[c].c();Z=S(),U=L("tr"),_e=L("th"),_e.textContent=Ie,Ne=S();for(let c=0;c<x.length;c+=1)x[c].c();ct=S(),ge=L("tr"),Be=L("th"),Be.textContent=$t,dt=S();for(let c=0;c<ee.length;c+=1)ee[c].c();pt=S(),$e=L("tr"),Me=L("th"),Me.textContent=vt,mt=S();for(let c=0;c<se.length;c+=1)se[c].c();this.h()},l(c){W(e.$$.fragment,c),n=E(c),t=N(c,"P",{});var p=R(t);r=A(p,"Desirable minimum total width required (m): "),s=N(p,"B",{});var k=R(s);o=A(k,i),k.forEach(_),p.forEach(_),a=E(c),f=N(c,"P",{});var ht=R(f);m=A(ht,"Absolute minimum total width required (m): "),u=N(ht,"B",{});var Et=R(u);$=A(Et,h),Et.forEach(_),ht.forEach(_),g=E(c),d=N(c,"DIV",{style:!0});var Lt=R(d);y=N(Lt,"TABLE",{});var ne=R(y);b=N(ne,"TR",{});var et=R(b);B=N(et,"TH",{}),R(B).forEach(_),Q=E(et);for(let H=0;H<V.length;H+=1)V[H].l(et);et.forEach(_),C=E(ne),I=N(ne,"TR",{});var tt=R(I);K=N(tt,"TH",{"data-svelte-h":!0}),De(K)!=="svelte-16tcugb"&&(K.textContent=ce),Re=E(tt);for(let H=0;H<J.length;H+=1)J[H].l(tt);tt.forEach(_),Ce=E(ne),de=N(ne,"TR",{});var nt=R(de);me=N(nt,"TH",{"data-svelte-h":!0}),De(me)!=="svelte-11hw9wb"&&(me.textContent=Xe),Se=E(nt);for(let H=0;H<q.length;H+=1)q[H].l(nt);nt.forEach(_),Ee=E(ne),pe=N(ne,"TR",{});var lt=R(pe);he=N(lt,"TH",{"data-svelte-h":!0}),De(he)!=="svelte-i7hz1h"&&(he.textContent=Ke),Le=E(lt);for(let H=0;H<D.length;H+=1)D[H].l(lt);lt.forEach(_),Z=E(ne),U=N(ne,"TR",{});var rt=R(U);_e=N(rt,"TH",{"data-svelte-h":!0}),De(_e)!=="svelte-zhiq21"&&(_e.textContent=Ie),Ne=E(rt);for(let H=0;H<x.length;H+=1)x[H].l(rt);rt.forEach(_),ct=E(ne),ge=N(ne,"TR",{});var st=R(ge);Be=N(st,"TH",{"data-svelte-h":!0}),De(Be)!=="svelte-o075z0"&&(Be.textContent=$t),dt=E(st);for(let H=0;H<ee.length;H+=1)ee[H].l(st);st.forEach(_),pt=E(ne),$e=N(ne,"TR",{});var it=R($e);Me=N(it,"TH",{"data-svelte-h":!0}),De(Me)!=="svelte-pnu4jc"&&(Me.textContent=vt),mt=E(it);for(let H=0;H<se.length;H+=1)se[H].l(it);it.forEach(_),ne.forEach(_),Lt.forEach(_),this.h()},h(){ve(d,"display","flex"),ve(d,"flex-direction","row"),ve(d,"overflow-x","scroll")},m(c,p){O(e,c,p),F(c,n,p),F(c,t,p),v(t,r),v(t,s),v(s,o),F(c,a,p),F(c,f,p),v(f,m),v(f,u),v(u,$),F(c,g,p),F(c,d,p),v(d,y),v(y,b),v(b,B),v(b,Q);for(let k=0;k<V.length;k+=1)V[k]&&V[k].m(b,null);v(y,C),v(y,I),v(I,K),v(I,Re);for(let k=0;k<J.length;k+=1)J[k]&&J[k].m(I,null);v(y,Ce),v(y,de),v(de,me),v(de,Se);for(let k=0;k<q.length;k+=1)q[k]&&q[k].m(de,null);v(y,Ee),v(y,pe),v(pe,he),v(pe,Le);for(let k=0;k<D.length;k+=1)D[k]&&D[k].m(pe,null);v(y,Z),v(y,U),v(U,_e),v(U,Ne);for(let k=0;k<x.length;k+=1)x[k]&&x[k].m(U,null);v(y,ct),v(y,ge),v(ge,Be),v(ge,dt);for(let k=0;k<ee.length;k+=1)ee[k]&&ee[k].m(ge,null);v(y,pt),v(y,$e),v($e,Me),v($e,mt);for(let k=0;k<se.length;k+=1)se[k]&&se[k].m($e,null);l[16](d),We=!0},p(c,p){const k={};p[1]&16&&(k.$$scope={dirty:p,ctx:c}),e.$set(k),(!We||p[0]&16)&&i!==(i=c[4][0].toFixed(2)+"")&&fe(o,i),(!We||p[0]&16)&&h!==(h=c[4][1].toFixed(2)+"")&&fe($,h),p[0]&449&&(Ve=G(c[0]),ae(),V=be(V,p,kt,1,c,Ve,ue,b,Ue,Ht,null,At),oe()),p[0]&9&&(je=G(c[0]),ae(),J=be(J,p,yt,1,c,je,Ge,I,Ue,Ut,null,jt),oe()),p[0]&513&&(Ae=G(c[0]),ae(),q=be(q,p,Dt,1,c,Ae,Ye,de,Ue,zt,null,Vt),oe()),p[0]&3&&(Qe=G(c[0]),D=be(D,p,Tt,1,c,Qe,z,pe,_t,Gt,null,qt)),p[0]&3&&(Ze=G(c[0]),x=be(x,p,Ft,1,c,Ze,qe,U,_t,Xt,null,It)),p[0]&1&&(He=G(c[0]),ae(),ee=be(ee,p,Ct,1,c,He,bt,ge,Ue,Kt,null,Pt),oe()),p[0]&3&&(xe=G(c[0]),se=be(se,p,St,1,c,xe,wt,$e,_t,Qt,null,Ot))},i(c){if(!We){w(e.$$.fragment,c);for(let p=0;p<Ve.length;p+=1)w(V[p]);for(let p=0;p<je.length;p+=1)w(J[p]);for(let p=0;p<Ae.length;p+=1)w(q[p]);for(let p=0;p<He.length;p+=1)w(ee[p]);We=!0}},o(c){T(e.$$.fragment,c);for(let p=0;p<V.length;p+=1)T(V[p]);for(let p=0;p<J.length;p+=1)T(J[p]);for(let p=0;p<q.length;p+=1)T(q[p]);for(let p=0;p<ee.length;p+=1)T(ee[p]);We=!1},d(c){c&&(_(n),_(t),_(a),_(f),_(g),_(d)),P(e,c);for(let p=0;p<V.length;p+=1)V[p].d();for(let p=0;p<J.length;p+=1)J[p].d();for(let p=0;p<q.length;p+=1)q[p].d();for(let p=0;p<D.length;p+=1)D[p].d();for(let p=0;p<x.length;p+=1)x[p].d();for(let p=0;p<ee.length;p+=1)ee[p].d();for(let p=0;p<se.length;p+=1)se[p].d();l[16](null)}}}function xn(l,e,n){let t,r,s;ze(l,X,C=>n(1,s=C));let{streetFeaturesLeftToRight:i}=e,{sectionType:o}=e,a,f=!1;_n(()=>{f&&(f=!1,n(2,a.scrollLeft=a.scrollWidth,a))});function m(){n(0,i=[...i,""]),f=!0}function u(C){i.splice(C,1),n(0,i)}function h(C){n(0,[i[C-1],i[C]]=[i[C],i[C-1]],i)}function $(C){n(0,[i[C+1],i[C]]=[i[C],i[C+1]],i)}function g(C){let I=an.map(K=>[K,K]);for(let[K,ce]of Object.entries(C))I.push([{custom:K},`Custom: ${ce.name}`]);return I}function d(C,I){(I=="right"||I=="both")&&i.splice(C+1,0,"Buffer / Verge"),(I=="left"||I=="both")&&i.splice(C,0,"Buffer / Verge"),n(0,i)}const y=C=>h(C),b=C=>u(C),B=C=>$(C);function Q(C,I,K,ce){K[ce]=C,n(0,i)}const V=(C,I)=>d(C,I.fix);function ue(C){te[C?"unshift":"push"](()=>{a=C,n(2,a)})}return l.$$set=C=>{"streetFeaturesLeftToRight"in C&&n(0,i=C.streetFeaturesLeftToRight),"sectionType"in C&&n(10,o=C.sectionType)},l.$$.update=()=>{l.$$.dirty[0]&1026&&n(4,t=wn(s,o)),l.$$.dirty[0]&2&&n(3,r=g(s.proposed.customFeatures))},[i,s,a,r,t,m,u,h,$,d,o,y,b,B,Q,V,ue]}class un extends ke{constructor(e){super(),ye(this,e,xn,Zn,we,{streetFeaturesLeftToRight:0,sectionType:10},null,[-1,-1])}}function el(l){let e;return{c(){e=j("Confirm")},l(n){e=A(n,"Confirm")},m(n,t){F(n,e,t)},d(n){n&&_(e)}}}function tl(l){let e;return{c(){e=j("Cancel")},l(n){e=A(n,"Cancel")},m(n,t){F(n,e,t)},d(n){n&&_(e)}}}function nl(l){let e,n,t,r,s,i,o,a,f,m,u,h;function $(b){l[6](b)}let g={label:"Name"};l[0]!==void 0&&(g.value=l[0]),e=new Tn({props:g}),te.push(()=>re(e,"value",$));function d(b){l[7](b)}let y={label:"Minimum width (m)",width:4,min:0};return l[1]!==void 0&&(y.value=l[1]),r=new Dn({props:y}),te.push(()=>re(r,"value",d)),o=new fn({props:{errorMessage:l[2]}}),f=new gt({props:{disabled:l[2]!="",$$slots:{default:[el]},$$scope:{ctx:l}}}),f.$on("click",l[8]),u=new Fe({props:{$$slots:{default:[tl]},$$scope:{ctx:l}}}),u.$on("click",l[9]),{c(){M(e.$$.fragment),t=S(),M(r.$$.fragment),i=S(),M(o.$$.fragment),a=S(),M(f.$$.fragment),m=S(),M(u.$$.fragment)},l(b){W(e.$$.fragment,b),t=E(b),W(r.$$.fragment,b),i=E(b),W(o.$$.fragment,b),a=E(b),W(f.$$.fragment,b),m=E(b),W(u.$$.fragment,b)},m(b,B){O(e,b,B),F(b,t,B),O(r,b,B),F(b,i,B),O(o,b,B),F(b,a,B),O(f,b,B),F(b,m,B),O(u,b,B),h=!0},p(b,B){const Q={};!n&&B&1&&(n=!0,Q.value=b[0],le(()=>n=!1)),e.$set(Q);const V={};!s&&B&2&&(s=!0,V.value=b[1],le(()=>s=!1)),r.$set(V);const ue={};B&4&&(ue.errorMessage=b[2]),o.$set(ue);const C={};B&4&&(C.disabled=b[2]!=""),B&4096&&(C.$$scope={dirty:B,ctx:b}),f.$set(C);const I={};B&4096&&(I.$$scope={dirty:B,ctx:b}),u.$set(I)},i(b){h||(w(e.$$.fragment,b),w(r.$$.fragment,b),w(o.$$.fragment,b),w(f.$$.fragment,b),w(u.$$.fragment,b),h=!0)},o(b){T(e.$$.fragment,b),T(r.$$.fragment,b),T(o.$$.fragment,b),T(f.$$.fragment,b),T(u.$$.fragment,b),h=!1},d(b){b&&(_(t),_(i),_(a),_(m)),P(e,b),P(r,b),P(o,b),P(f,b),P(u,b)}}}function ll(l){let e,n;return e=new jn({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[nl]},$$scope:{ctx:l}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){O(e,t,r),n=!0},p(t,[r]){const s={};r&4103&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function rl(l,e,n){let t,r;ze(l,X,d=>n(10,r=d));let{initialName:s}=e,{initialWidth:i}=e,o=$n(),a=s,f=i;function m(d,y){return d==""?"Name must be specified":d!=s&&Object.values(r.proposed.customFeatures).some(b=>b.name==d)?"That name is already used by another custom feature":an.includes(d)?"That name is the same as one of the built-in features":isNaN(y)?"Enter a valid width":y<=0?"Enter a positive width":""}function u(d){a=d,n(0,a)}function h(d){f=d,n(1,f)}const $=()=>o("confirm",{name:a,width:f}),g=()=>o("cancel");return l.$$set=d=>{"initialName"in d&&n(4,s=d.initialName),"initialWidth"in d&&n(5,i=d.initialWidth)},l.$$.update=()=>{l.$$.dirty&3&&n(2,t=m(a,f))},[a,f,t,o,s,i,u,h,$,g]}class sl extends ke{constructor(e){super(),ye(this,e,rl,ll,we,{initialName:4,initialWidth:5})}}function Zt(l,e,n){const t=l.slice();return t[9]=e[n],t}function il(l){let e;return{c(){e=j("Add custom feature")},l(n){e=A(n,"Add custom feature")},m(n,t){F(n,e,t)},d(n){n&&_(e)}}}function al(l){let e,n=l[1].proposed.customFeatures[l[9]].name+"",t,r,s=l[1].proposed.customFeatures[l[9]].width+"",i,o;return{c(){e=L("u"),t=j(n),r=j(`
      : `),i=j(s),o=j(" m minimum width")},l(a){e=N(a,"U",{});var f=R(e);t=A(f,n),f.forEach(_),r=A(a,`
      : `),i=A(a,s),o=A(a," m minimum width")},m(a,f){F(a,e,f),v(e,t),F(a,r,f),F(a,i,f),F(a,o,f)},p(a,f){f&2&&n!==(n=a[1].proposed.customFeatures[a[9]].name+"")&&fe(t,n),f&2&&s!==(s=a[1].proposed.customFeatures[a[9]].width+"")&&fe(i,s)},d(a){a&&(_(e),_(r),_(i),_(o))}}}function ol(l){let e;return{c(){e=j("Delete")},l(n){e=A(n,"Delete")},m(n,t){F(n,e,t)},d(n){n&&_(e)}}}function xt(l,e){let n,t,r,s,i;function o(){return e[6](e[9])}t=new Fe({props:{$$slots:{default:[al]},$$scope:{ctx:e}}}),t.$on("click",o);function a(){return e[7](e[9])}return s=new sn({props:{$$slots:{default:[ol]},$$scope:{ctx:e}}}),s.$on("click",a),{key:l,first:null,c(){n=L("div"),M(t.$$.fragment),r=S(),M(s.$$.fragment),this.h()},l(f){n=N(f,"DIV",{});var m=R(n);W(t.$$.fragment,m),r=E(m),W(s.$$.fragment,m),m.forEach(_),this.h()},h(){this.first=n},m(f,m){F(f,n,m),O(t,n,null),v(n,r),O(s,n,null),i=!0},p(f,m){e=f;const u={};m&4098&&(u.$$scope={dirty:m,ctx:e}),t.$set(u);const h={};m&4096&&(h.$$scope={dirty:m,ctx:e}),s.$set(h)},i(f){i||(w(t.$$.fragment,f),w(s.$$.fragment,f),i=!0)},o(f){T(t.$$.fragment,f),T(s.$$.fragment,f),i=!1},d(f){f&&_(n),P(t),P(s)}}}function en(l){let e,n;return e=new sl({props:{initialName:l[0].initialName,initialWidth:l[0].initialWidth}}),e.$on("cancel",l[8]),e.$on("confirm",l[5]),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){O(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.initialName=t[0].initialName),r&1&&(s.initialWidth=t[0].initialWidth),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function fl(l){let e,n,t=[],r=new Map,s,i,o;e=new gt({props:{$$slots:{default:[il]},$$scope:{ctx:l}}}),e.$on("click",l[2]);let a=G(Object.keys(l[1].proposed.customFeatures));const f=u=>u[9];for(let u=0;u<a.length;u+=1){let h=Zt(l,a,u),$=f(h);r.set($,t[u]=xt($,h))}let m=l[0]&&en(l);return{c(){M(e.$$.fragment),n=S();for(let u=0;u<t.length;u+=1)t[u].c();s=S(),m&&m.c(),i=Pe()},l(u){W(e.$$.fragment,u),n=E(u);for(let h=0;h<t.length;h+=1)t[h].l(u);s=E(u),m&&m.l(u),i=Pe()},m(u,h){O(e,u,h),F(u,n,h);for(let $=0;$<t.length;$+=1)t[$]&&t[$].m(u,h);F(u,s,h),m&&m.m(u,h),F(u,i,h),o=!0},p(u,[h]){const $={};h&4096&&($.$$scope={dirty:h,ctx:u}),e.$set($),h&26&&(a=G(Object.keys(u[1].proposed.customFeatures)),ae(),t=be(t,h,f,1,u,a,r,s.parentNode,Ue,xt,s,Zt),oe()),u[0]?m?(m.p(u,h),h&1&&w(m,1)):(m=en(u),m.c(),w(m,1),m.m(i.parentNode,i)):m&&(ae(),T(m,1,1,()=>{m=null}),oe())},i(u){if(!o){w(e.$$.fragment,u);for(let h=0;h<a.length;h+=1)w(t[h]);w(m),o=!0}},o(u){T(e.$$.fragment,u);for(let h=0;h<t.length;h+=1)T(t[h]);T(m),o=!1},d(u){u&&(_(n),_(s),_(i)),P(e,u);for(let h=0;h<t.length;h+=1)t[h].d(u);m&&m.d(u)}}}function ul(l,e,n){let t;ze(l,X,h=>n(1,t=h));let r=null;function s(){n(0,r={id:Fn(),initialName:"",initialWidth:0})}function i(h){let $=t.proposed.customFeatures[h].name,g=JSON.stringify({custom:h});if(t.proposed.desirableMinimumCrossSection.some(d=>JSON.stringify(d)==g)){window.alert(`The ${$} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(t.proposed.absoluteMinimumCrossSection.some(d=>JSON.stringify(d)==g)){window.alert(`The ${$} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete t.proposed.customFeatures[h],X.set(t)}function o(h){n(0,r={id:h,initialName:t.proposed.customFeatures[h].name,initialWidth:t.proposed.customFeatures[h].width})}function a(h){rn(X,t.proposed.customFeatures[r.id]={name:h.detail.name,width:h.detail.width},t),X.set(t),n(0,r=null)}return[r,t,s,i,o,a,h=>o(h),h=>i(h),()=>n(0,r=null)]}class cl extends ke{constructor(e){super(),ye(this,e,ul,fl,we,{})}}function tn(l){let e,n,t,r,s;return{c(){e=L("p"),n=L("i"),t=j("Effective speed limit, based on the limit and 85 percentile: "),r=j(l[1]),s=j(`
            mph`)},l(i){e=N(i,"P",{});var o=R(e);n=N(o,"I",{});var a=R(n);t=A(a,"Effective speed limit, based on the limit and 85 percentile: "),r=A(a,l[1]),s=A(a,`
            mph`),a.forEach(_),o.forEach(_)},m(i,o){F(i,e,o),v(e,n),v(n,t),v(n,r),v(n,s)},p(i,o){o&2&&fe(r,i[1])},d(i){i&&_(e)}}}function dl(l){let e,n,t,r,s,i,o,a,f,m,u,h,$,g,d,y,b,B,Q,V,ue,C,I,K,ce;function Re(D){l[4](D)}let J={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:Oe(["<200","200-800",">800"])};l[0].proposed.trafficData.flowOneWay!==void 0&&(J.value=l[0].proposed.trafficData.flowOneWay),t=new Te({props:J}),te.push(()=>re(t,"value",Re));function Ge(D){l[5](D)}let Ce={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:Oe(["<300","300-1,000",">1,000"])};l[0].proposed.trafficData.flowTwoWay!==void 0&&(Ce.value=l[0].proposed.trafficData.flowTwoWay),i=new Te({props:Ce}),te.push(()=>re(i,"value",Ge));function de(D){l[6](D)}let me={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:Oe(["<300",">300"])};l[0].proposed.trafficData.flowSharedUse!==void 0&&(me.value=l[0].proposed.trafficData.flowSharedUse),f=new Te({props:me}),te.push(()=>re(f,"value",de));function Xe(D){l[7](D)}let Se={label:"Traffic flow (vpd)",emptyOption:!0,choices:Oe(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};l[0].proposed.trafficData.trafficFlow!==void 0&&(Se.value=l[0].proposed.trafficData.trafficFlow),h=new Te({props:Se}),te.push(()=>re(h,"value",Xe));let q=l[1]&&tn(l);function Ye(D){l[8](D)}let Ee={label:"Speed limit (MPH)",emptyOption:!0,choices:l[2]};l[0].proposed.trafficData.speedLimit!==void 0&&(Ee.value=l[0].proposed.trafficData.speedLimit),b=new Te({props:Ee}),te.push(()=>re(b,"value",Ye));function pe(D){l[9](D)}let he={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};l[0].proposed.trafficData.observedSpeed!==void 0&&(he.value=l[0].proposed.trafficData.observedSpeed),V=new Pn({props:he}),te.push(()=>re(V,"value",pe));function Ke(D){l[10](D)}let Le={label:"Street function",emptyOption:!0,choices:Oe(["High Street (active frontages)","Residential street","Local distributor road"])};return l[0].proposed.trafficData.streetFunction!==void 0&&(Le.value=l[0].proposed.trafficData.streetFunction),I=new Te({props:Le}),te.push(()=>re(I,"value",Ke)),{c(){e=L("div"),n=L("div"),M(t.$$.fragment),s=S(),M(i.$$.fragment),a=S(),M(f.$$.fragment),u=S(),M(h.$$.fragment),g=S(),d=L("div"),q&&q.c(),y=S(),M(b.$$.fragment),Q=S(),M(V.$$.fragment),C=S(),M(I.$$.fragment),this.h()},l(D){e=N(D,"DIV",{class:!0});var z=R(e);n=N(z,"DIV",{class:!0});var Z=R(n);W(t.$$.fragment,Z),s=E(Z),W(i.$$.fragment,Z),a=E(Z),W(f.$$.fragment,Z),u=E(Z),W(h.$$.fragment,Z),Z.forEach(_),g=E(z),d=N(z,"DIV",{class:!0});var U=R(d);q&&q.l(U),y=E(U),W(b.$$.fragment,U),Q=E(U),W(V.$$.fragment,U),C=E(U),W(I.$$.fragment,U),U.forEach(_),z.forEach(_),this.h()},h(){Y(n,"class","govuk-grid-column-one-half"),Y(d,"class","govuk-grid-column-one-half"),Y(e,"class","govuk-grid-row")},m(D,z){F(D,e,z),v(e,n),O(t,n,null),v(n,s),O(i,n,null),v(n,a),O(f,n,null),v(n,u),O(h,n,null),v(e,g),v(e,d),q&&q.m(d,null),v(d,y),O(b,d,null),v(d,Q),O(V,d,null),v(d,C),O(I,d,null),ce=!0},p(D,z){const Z={};!r&&z&1&&(r=!0,Z.value=D[0].proposed.trafficData.flowOneWay,le(()=>r=!1)),t.$set(Z);const U={};!o&&z&1&&(o=!0,U.value=D[0].proposed.trafficData.flowTwoWay,le(()=>o=!1)),i.$set(U);const _e={};!m&&z&1&&(m=!0,_e.value=D[0].proposed.trafficData.flowSharedUse,le(()=>m=!1)),f.$set(_e);const Ie={};!$&&z&1&&($=!0,Ie.value=D[0].proposed.trafficData.trafficFlow,le(()=>$=!1)),h.$set(Ie),D[1]?q?q.p(D,z):(q=tn(D),q.c(),q.m(d,y)):q&&(q.d(1),q=null);const Ne={};!B&&z&1&&(B=!0,Ne.value=D[0].proposed.trafficData.speedLimit,le(()=>B=!1)),b.$set(Ne);const x={};!ue&&z&1&&(ue=!0,x.value=D[0].proposed.trafficData.observedSpeed,le(()=>ue=!1)),V.$set(x);const qe={};!K&&z&1&&(K=!0,qe.value=D[0].proposed.trafficData.streetFunction,le(()=>K=!1)),I.$set(qe)},i(D){ce||(w(t.$$.fragment,D),w(i.$$.fragment,D),w(f.$$.fragment,D),w(h.$$.fragment,D),w(b.$$.fragment,D),w(V.$$.fragment,D),w(I.$$.fragment,D),ce=!0)},o(D){T(t.$$.fragment,D),T(i.$$.fragment,D),T(f.$$.fragment,D),T(h.$$.fragment,D),T(b.$$.fragment,D),T(V.$$.fragment,D),T(I.$$.fragment,D),ce=!1},d(D){D&&_(e),P(t),P(i),P(f),P(h),q&&q.d(),P(b),P(V),P(I)}}}function pl(l){let e,n;return e=new ut({props:{label:"Traffic data and additional information",open:!0,$$slots:{default:[dl]},$$scope:{ctx:l}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){O(e,t,r),n=!0},p(t,[r]){const s={};r&2051&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function ml(l,e,n){let t,r;ze(l,X,g=>n(0,r=g));let{valid:s}=e,i=Oe(vn);function o(g){l.$$.not_equal(r.proposed.trafficData.flowOneWay,g)&&(r.proposed.trafficData.flowOneWay=g,X.set(r))}function a(g){l.$$.not_equal(r.proposed.trafficData.flowTwoWay,g)&&(r.proposed.trafficData.flowTwoWay=g,X.set(r))}function f(g){l.$$.not_equal(r.proposed.trafficData.flowSharedUse,g)&&(r.proposed.trafficData.flowSharedUse=g,X.set(r))}function m(g){l.$$.not_equal(r.proposed.trafficData.trafficFlow,g)&&(r.proposed.trafficData.trafficFlow=g,X.set(r))}function u(g){l.$$.not_equal(r.proposed.trafficData.speedLimit,g)&&(r.proposed.trafficData.speedLimit=g,X.set(r))}function h(g){l.$$.not_equal(r.proposed.trafficData.observedSpeed,g)&&(r.proposed.trafficData.observedSpeed=g,X.set(r))}function $(g){l.$$.not_equal(r.proposed.trafficData.streetFunction,g)&&(r.proposed.trafficData.streetFunction=g,X.set(r))}return l.$$set=g=>{"valid"in g&&n(3,s=g.valid)},l.$$.update=()=>{l.$$.dirty&1&&n(3,s=r.proposed.trafficData.flowOneWay!=""&&r.proposed.trafficData.flowTwoWay!=""&&r.proposed.trafficData.flowSharedUse!=""&&r.proposed.trafficData.trafficFlow!=""&&r.proposed.trafficData.speedLimit!=""&&r.proposed.trafficData.observedSpeed!=null&&r.proposed.trafficData.streetFunction!=""),l.$$.dirty&1&&n(1,t=on(r.proposed.trafficData.speedLimit,r.proposed.trafficData.observedSpeed))},[r,t,i,s,o,a,f,m,u,h,$]}class hl extends ke{constructor(e){super(),ye(this,e,ml,pl,we,{valid:3})}}function _l(l){let e,n;return e=new cl({}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){O(e,t,r),n=!0},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function gl(l){let e,n="Fill out all traffic data above to continue";return{c(){e=L("p"),e.textContent=n},l(t){e=N(t,"P",{"data-svelte-h":!0}),De(e)!=="svelte-72a5ry"&&(e.textContent=n)},m(t,r){F(t,e,r)},p:Je,i:Je,o:Je,d(t){t&&_(e)}}}function $l(l){let e,n,t,r;return e=new ut({props:{label:"Preferred Cross-Section",open:!0,$$slots:{default:[bl]},$$scope:{ctx:l}}}),t=new ut({props:{label:"Compromised Cross-Section",open:!0,$$slots:{default:[wl]},$$scope:{ctx:l}}}),{c(){M(e.$$.fragment),n=S(),M(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=E(s),W(t.$$.fragment,s)},m(s,i){O(e,s,i),F(s,n,i),O(t,s,i),r=!0},p(s,i){const o={};i&66&&(o.$$scope={dirty:i,ctx:s}),e.$set(o);const a={};i&66&&(a.$$scope={dirty:i,ctx:s}),t.$set(a)},i(s){r||(w(e.$$.fragment,s),w(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&_(n),P(e,s),P(t,s)}}}function bl(l){let e,n,t;function r(i){l[4](i)}let s={sectionType:"Preferred"};return l[1].proposed.desirableMinimumCrossSection!==void 0&&(s.streetFeaturesLeftToRight=l[1].proposed.desirableMinimumCrossSection),e=new un({props:s}),te.push(()=>re(e,"streetFeaturesLeftToRight",r)),{c(){M(e.$$.fragment)},l(i){W(e.$$.fragment,i)},m(i,o){O(e,i,o),t=!0},p(i,o){const a={};!n&&o&2&&(n=!0,a.streetFeaturesLeftToRight=i[1].proposed.desirableMinimumCrossSection,le(()=>n=!1)),e.$set(a)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){T(e.$$.fragment,i),t=!1},d(i){P(e,i)}}}function nn(l){let e,n;return e=new Fe({props:{$$slots:{default:[vl]},$$scope:{ctx:l}}}),e.$on("click",l[2]),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){O(e,t,r),n=!0},p(t,r){const s={};r&64&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function vl(l){let e;return{c(){e=j("Copy Preferred")},l(n){e=A(n,"Copy Preferred")},m(n,t){F(n,e,t)},d(n){n&&_(e)}}}function wl(l){let e,n,t,r,s=l[1].proposed.absoluteMinimumCrossSection.length==0&&nn(l);function i(a){l[5](a)}let o={sectionType:"Compromised"};return l[1].proposed.absoluteMinimumCrossSection!==void 0&&(o.streetFeaturesLeftToRight=l[1].proposed.absoluteMinimumCrossSection),n=new un({props:o}),te.push(()=>re(n,"streetFeaturesLeftToRight",i)),{c(){s&&s.c(),e=S(),M(n.$$.fragment)},l(a){s&&s.l(a),e=E(a),W(n.$$.fragment,a)},m(a,f){s&&s.m(a,f),F(a,e,f),O(n,a,f),r=!0},p(a,f){a[1].proposed.absoluteMinimumCrossSection.length==0?s?(s.p(a,f),f&2&&w(s,1)):(s=nn(a),s.c(),w(s,1),s.m(e.parentNode,e)):s&&(ae(),T(s,1,1,()=>{s=null}),oe());const m={};!t&&f&2&&(t=!0,m.streetFeaturesLeftToRight=a[1].proposed.absoluteMinimumCrossSection,le(()=>t=!1)),n.$set(m)},i(a){r||(w(s),w(n.$$.fragment,a),r=!0)},o(a){T(s),T(n.$$.fragment,a),r=!1},d(a){a&&_(e),s&&s.d(a),P(n,a)}}}function kl(l){let e,n,t,r,s,i,o,a,f;function m(d){l[3](d)}let u={};l[0]!==void 0&&(u.valid=l[0]),e=new hl({props:u}),te.push(()=>re(e,"valid",m)),r=new ut({props:{label:"Custom Street Features",$$slots:{default:[_l]},$$scope:{ctx:l}}});const h=[$l,gl],$=[];function g(d,y){return d[0]?0:1}return i=g(l),o=$[i]=h[i](l),{c(){M(e.$$.fragment),t=S(),M(r.$$.fragment),s=S(),o.c(),a=Pe()},l(d){W(e.$$.fragment,d),t=E(d),W(r.$$.fragment,d),s=E(d),o.l(d),a=Pe()},m(d,y){O(e,d,y),F(d,t,y),O(r,d,y),F(d,s,y),$[i].m(d,y),F(d,a,y),f=!0},p(d,[y]){const b={};!n&&y&1&&(n=!0,b.valid=d[0],le(()=>n=!1)),e.$set(b);const B={};y&64&&(B.$$scope={dirty:y,ctx:d}),r.$set(B);let Q=i;i=g(d),i===Q?$[i].p(d,y):(ae(),T($[Q],1,1,()=>{$[Q]=null}),oe(),o=$[i],o?o.p(d,y):(o=$[i]=h[i](d),o.c()),w(o,1),o.m(a.parentNode,a))},i(d){f||(w(e.$$.fragment,d),w(r.$$.fragment,d),w(o),f=!0)},o(d){T(e.$$.fragment,d),T(r.$$.fragment,d),T(o),f=!1},d(d){d&&(_(t),_(s),_(a)),P(e,d),P(r,d),$[i].d(d)}}}function yl(l,e,n){let t;ze(l,X,f=>n(1,t=f));let r=!1;function s(){rn(X,t.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(t.proposed.desirableMinimumCrossSection)),t)}function i(f){r=f,n(0,r)}function o(f){l.$$.not_equal(t.proposed.desirableMinimumCrossSection,f)&&(t.proposed.desirableMinimumCrossSection=f,X.set(t))}function a(f){l.$$.not_equal(t.proposed.absoluteMinimumCrossSection,f)&&(t.proposed.absoluteMinimumCrossSection=f,X.set(t))}return[r,t,s,i,o,a]}class zl extends ke{constructor(e){super(),ye(this,e,yl,kl,we,{})}}export{zl as component};
