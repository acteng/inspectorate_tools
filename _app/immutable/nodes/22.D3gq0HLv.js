import{s as se,r as U,e as I,a as N,b as M,f as G,c as P,d as g,K as x,o as Te,i as w,j as E,v as A,k as ae,a4 as Ge,t as W,w as K,h as q,y as J,g as ue,x as Ke,n as Z}from"../chunks/scheduler.8Pqdtq9W.js";import{S as ne,i as le,e as j,c as L,a as S,m as C,t as k,g as Q,b as D,f as X,d as R}from"../chunks/index.KrNxZzBh.js";import{e as te,u as Ye,o as ze,B as Je}from"../chunks/Geocoder.svelte_svelte_type_style_lang.Bx0B-3ak.js";import{p as z}from"../chunks/index.B3sN34zZ.js";import{S as oe}from"../chunks/SecondaryButton.CctJSiA9.js";import{S as Y}from"../chunks/Select.Dbjze-B9.js";import{W as Qe}from"../chunks/WarningButton.Cyr2mll2.js";import{W as ce}from"../chunks/WarningText.DNDO-dlG.js";import{s as O,a as Xe,b as Ze}from"../chunks/data.COS-Z5CG.js";import{a as Ee,n as xe,g as Le,c as et,N as tt}from"../chunks/logic.DZBv-01g.js";import{E as rt}from"../chunks/ExternalLink.DchCAz0l.js";import{C as fe}from"../chunks/CollapsibleCard.COCSlxIK.js";import"../chunks/paths.C5oTPknU.js";let re={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",V(76)],["LTN 1/20 Figure 4.1 pp. 33",V(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",V(43)],["LTN 1/20 Figure 4.1 pp. 33",V(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",V(43)],["LTN 1/20 Figure 4.1 pp. 33",V(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",V(43)],["LTN 1/20 Figure 4.1 pp. 33",V(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",V(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",V(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",V(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",V(54)]]};function V(s){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${s}`}function ie(s,e){let t=Ee(e.speedLimit,e.observedSpeed);switch(s){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&t==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&t==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track"}}function Se(s,e,t){const r=s.slice();return r[14]=e[t][0],r[15]=e[t][1],r}function Ce(s){let e,t,r,i=Le(s[0],s[7].proposed.trafficData,s[4],s[5])[s[3]=="Desirable"?0:1]+"",n,l,o,f,d,h,m=ie(s[0],s[7].proposed.trafficData),v,$;const b=[at,st,it],a=[];function u(_,F){return _[6]=="left"?0:_[6]=="right"?1:_[6]=="both"?2:-1}~(o=u(s))&&(f=a[o]=b[o](s));let c=re[s[0]].length>0&&Re(s),y=m&&qe(s);return{c(){e=I("p"),t=W(s[3]),r=W(" minimum width (m): "),n=W(i),l=N(),f&&f.c(),d=N(),c&&c.c(),h=N(),y&&y.c(),v=K()},l(_){e=M(_,"P",{});var F=G(e);t=q(F,s[3]),r=q(F," minimum width (m): "),n=q(F,i),F.forEach(g),l=P(_),f&&f.l(_),d=P(_),c&&c.l(_),h=P(_),y&&y.l(_),v=K()},m(_,F){w(_,e,F),E(e,t),E(e,r),E(e,n),w(_,l,F),~o&&a[o].m(_,F),w(_,d,F),c&&c.m(_,F),w(_,h,F),y&&y.m(_,F),w(_,v,F),$=!0},p(_,F){(!$||F&8)&&J(t,_[3]),(!$||F&185)&&i!==(i=Le(_[0],_[7].proposed.trafficData,_[4],_[5])[_[3]=="Desirable"?0:1]+"")&&J(n,i);let H=o;o=u(_),o!==H&&(f&&(Q(),D(a[H],1,1,()=>{a[H]=null}),X()),~o?(f=a[o],f||(f=a[o]=b[o](_),f.c()),k(f,1),f.m(d.parentNode,d)):f=null),re[_[0]].length>0?c?(c.p(_,F),F&1&&k(c,1)):(c=Re(_),c.c(),k(c,1),c.m(h.parentNode,h)):c&&(Q(),D(c,1,1,()=>{c=null}),X()),F&129&&(m=ie(_[0],_[7].proposed.trafficData)),m?y?y.p(_,F):(y=qe(_),y.c(),y.m(v.parentNode,v)):y&&(y.d(1),y=null)},i(_){$||(k(f),k(c),$=!0)},o(_){D(f),D(c),$=!1},d(_){_&&(g(e),g(l),g(d),g(h),g(v)),~o&&a[o].d(_),c&&c.d(_),y&&y.d(_)}}}function it(s){let e,t;return e=new ce({props:{$$slots:{default:[nt]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(r){S(e.$$.fragment,r)},m(r,i){C(e,r,i),t=!0},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function st(s){let e,t;return e=new ce({props:{$$slots:{default:[lt]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(r){S(e.$$.fragment,r)},m(r,i){C(e,r,i),t=!0},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function at(s){let e,t;return e=new ce({props:{$$slots:{default:[ot]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(r){S(e.$$.fragment,r)},m(r,i){C(e,r,i),t=!0},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function nt(s){let e;return{c(){e=W("Consider buffers to left and right")},l(t){e=q(t,"Consider buffers to left and right")},m(t,r){w(t,e,r)},d(t){t&&g(e)}}}function lt(s){let e;return{c(){e=W("Consider buffer to right")},l(t){e=q(t,"Consider buffer to right")},m(t,r){w(t,e,r)},d(t){t&&g(e)}}}function ot(s){let e;return{c(){e=W("Consider buffer to left")},l(t){e=q(t,"Consider buffer to left")},m(t,r){w(t,e,r)},d(t){t&&g(e)}}}function Re(s){let e,t="References",r,i,n,l=te(re[s[0]]),o=[];for(let d=0;d<l.length;d+=1)o[d]=We(Se(s,l,d));const f=d=>D(o[d],1,1,()=>{o[d]=null});return{c(){e=I("u"),e.textContent=t,r=W(`
      :
      `),i=I("ul");for(let d=0;d<o.length;d+=1)o[d].c()},l(d){e=M(d,"U",{"data-svelte-h":!0}),ue(e)!=="svelte-fk7cdq"&&(e.textContent=t),r=q(d,`
      :
      `),i=M(d,"UL",{});var h=G(i);for(let m=0;m<o.length;m+=1)o[m].l(h);h.forEach(g)},m(d,h){w(d,e,h),w(d,r,h),w(d,i,h);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(i,null);n=!0},p(d,h){if(h&1){l=te(re[d[0]]);let m;for(m=0;m<l.length;m+=1){const v=Se(d,l,m);o[m]?(o[m].p(v,h),k(o[m],1)):(o[m]=We(v),o[m].c(),k(o[m],1),o[m].m(i,null))}for(Q(),m=l.length;m<o.length;m+=1)f(m);X()}},i(d){if(!n){for(let h=0;h<l.length;h+=1)k(o[h]);n=!0}},o(d){o=o.filter(Boolean);for(let h=0;h<o.length;h+=1)D(o[h]);n=!1},d(d){d&&(g(e),g(r),g(i)),Ke(o,d)}}}function ft(s){let e,t=s[14]+"",r;return{c(){e=I("li"),r=W(t)},l(i){e=M(i,"LI",{});var n=G(e);r=q(n,t),n.forEach(g)},m(i,n){w(i,e,n),E(e,r)},p(i,n){n&1&&t!==(t=i[14]+"")&&J(r,t)},i:Z,o:Z,d(i){i&&g(e)}}}function ut(s){let e,t,r;return t=new rt({props:{href:s[15],$$slots:{default:[ct]},$$scope:{ctx:s}}}),{c(){e=I("li"),L(t.$$.fragment)},l(i){e=M(i,"LI",{});var n=G(e);S(t.$$.fragment,n),n.forEach(g)},m(i,n){w(i,e,n),C(t,e,null),r=!0},p(i,n){const l={};n&1&&(l.href=i[15]),n&262145&&(l.$$scope={dirty:n,ctx:i}),t.$set(l)},i(i){r||(k(t.$$.fragment,i),r=!0)},o(i){D(t.$$.fragment,i),r=!1},d(i){i&&g(e),R(t)}}}function ct(s){let e=s[14]+"",t;return{c(){t=W(e)},l(r){t=q(r,e)},m(r,i){w(r,t,i)},p(r,i){i&1&&e!==(e=r[14]+"")&&J(t,e)},d(r){r&&g(t)}}}function We(s){let e,t,r,i;const n=[ut,ft],l=[];function o(f,d){return f[15]?0:1}return e=o(s),t=l[e]=n[e](s),{c(){t.c(),r=K()},l(f){t.l(f),r=K()},m(f,d){l[e].m(f,d),w(f,r,d),i=!0},p(f,d){let h=e;e=o(f),e===h?l[e].p(f,d):(Q(),D(l[h],1,1,()=>{l[h]=null}),X(),t=l[e],t?t.p(f,d):(t=l[e]=n[e](f),t.c()),k(t,1),t.m(r.parentNode,r))},i(f){i||(k(t),i=!0)},o(f){D(t),i=!1},d(f){f&&g(r),l[e].d(f)}}}function qe(s){let e,t="Guidance",r,i,n=ie(s[0],s[7].proposed.trafficData)+"",l;return{c(){e=I("u"),e.textContent=t,r=W(`
      :
      `),i=I("p"),l=W(n),this.h()},l(o){e=M(o,"U",{"data-svelte-h":!0}),ue(e)!=="svelte-qh7mhq"&&(e.textContent=t),r=q(o,`
      :
      `),i=M(o,"P",{style:!0});var f=G(i);l=q(f,n),f.forEach(g),this.h()},h(){x(i,"max-width","400px")},m(o,f){w(o,e,f),w(o,r,f),w(o,i,f),E(i,l)},p(o,f){f&129&&n!==(n=ie(o[0],o[7].proposed.trafficData)+"")&&J(l,n)},d(o){o&&(g(e),g(r),g(i))}}}function pt(s){let e;return{c(){e=W("←")},l(t){e=q(t,"←")},m(t,r){w(t,e,r)},d(t){t&&g(e)}}}function dt(s){let e;return{c(){e=W("Delete")},l(t){e=q(t,"Delete")},m(t,r){w(t,e,r)},d(t){t&&g(e)}}}function mt(s){let e;return{c(){e=W("→")},l(t){e=q(t,"→")},m(t,r){w(t,e,r)},d(t){t&&g(e)}}}function ht(s){let e,t,r,i,n,l,o,f,d,h,m,v;function $(u){s[10](u)}let b={label:"Street feature type",emptyOption:!0,choices:s[9]};s[0]!==void 0&&(b.value=s[0]),t=new Y({props:b}),U.push(()=>j(t,"value",$));let a=s[0]&&Ce(s);return o=new oe({props:{disabled:s[1],$$slots:{default:[pt]},$$scope:{ctx:s}}}),o.$on("click",s[11]),d=new Qe({props:{$$slots:{default:[dt]},$$scope:{ctx:s}}}),d.$on("click",s[12]),m=new oe({props:{disabled:s[2],$$slots:{default:[mt]},$$scope:{ctx:s}}}),m.$on("click",s[13]),{c(){e=I("div"),L(t.$$.fragment),i=N(),a&&a.c(),n=N(),l=I("div"),L(o.$$.fragment),f=N(),L(d.$$.fragment),h=N(),L(m.$$.fragment),this.h()},l(u){e=M(u,"DIV",{class:!0});var c=G(e);S(t.$$.fragment,c),i=P(c),a&&a.l(c),n=P(c),l=M(c,"DIV",{style:!0,class:!0});var y=G(l);S(o.$$.fragment,y),f=P(y),S(d.$$.fragment,y),h=P(y),S(m.$$.fragment,y),y.forEach(g),c.forEach(g),this.h()},h(){x(l,"display","flex"),x(l,"justify-content","space-between"),Te(l,"class","svelte-jig4ga"),Te(e,"class","svelte-jig4ga")},m(u,c){w(u,e,c),C(t,e,null),E(e,i),a&&a.m(e,null),E(e,n),E(e,l),C(o,l,null),E(l,f),C(d,l,null),E(l,h),C(m,l,null),v=!0},p(u,[c]){const y={};!r&&c&1&&(r=!0,y.value=u[0],A(()=>r=!1)),t.$set(y),u[0]?a?(a.p(u,c),c&1&&k(a,1)):(a=Ce(u),a.c(),k(a,1),a.m(e,n)):a&&(Q(),D(a,1,1,()=>{a=null}),X());const _={};c&2&&(_.disabled=u[1]),c&262144&&(_.$$scope={dirty:c,ctx:u}),o.$set(_);const F={};c&262144&&(F.$$scope={dirty:c,ctx:u}),d.$set(F);const H={};c&4&&(H.disabled=u[2]),c&262144&&(H.$$scope={dirty:c,ctx:u}),m.$set(H)},i(u){v||(k(t.$$.fragment,u),k(a),k(o.$$.fragment,u),k(d.$$.fragment,u),k(m.$$.fragment,u),v=!0)},o(u){D(t.$$.fragment,u),D(a),D(o.$$.fragment,u),D(d.$$.fragment,u),D(m.$$.fragment,u),v=!1},d(u){u&&g(e),R(t),a&&a.d(),R(o),R(d),R(m)}}}function _t(s,e,t){let r,i;ae(s,O,c=>t(7,i=c));let{value:n}=e,{isFirst:l}=e,{isLast:o}=e,{sectionType:f}=e,{leftFeature:d}=e,{rightFeature:h}=e,m=Ge(),v=z(Xe);function $(c){n=c,t(0,n)}const b=()=>m("moveLeft"),a=()=>m("delete"),u=()=>m("moveRight");return s.$$set=c=>{"value"in c&&t(0,n=c.value),"isFirst"in c&&t(1,l=c.isFirst),"isLast"in c&&t(2,o=c.isLast),"sectionType"in c&&t(3,f=c.sectionType),"leftFeature"in c&&t(4,d=c.leftFeature),"rightFeature"in c&&t(5,h=c.rightFeature)},s.$$.update=()=>{s.$$.dirty&49&&t(6,r=n&&xe(n,d,h))},[n,l,o,f,d,h,r,i,m,v,$,b,a,u]}class gt extends ne{constructor(e){super(),le(this,e,_t,ht,se,{value:0,isFirst:1,isLast:2,sectionType:3,leftFeature:4,rightFeature:5})}}function Ne(s,e,t){const r=s.slice();return r[12]=e[t],r[13]=e,r[14]=t,r}function $t(s){let e;return{c(){e=W("Add")},l(t){e=q(t,"Add")},m(t,r){w(t,e,r)},d(t){t&&g(e)}}}function Pe(s,e){let t,r,i,n;function l(m){e[8](m,e[12],e[13],e[14])}function o(){return e[9](e[14])}function f(){return e[10](e[14])}function d(){return e[11](e[14])}let h={isFirst:e[14]==0,isLast:e[14]==e[0].length-1,leftFeature:e[14]==0?"":e[0][e[14]-1],rightFeature:e[14]==e[0].length-1?"":e[0][e[14]+1],sectionType:e[1]};return e[12]!==void 0&&(h.value=e[12]),r=new gt({props:h}),U.push(()=>j(r,"value",l)),r.$on("delete",o),r.$on("moveLeft",f),r.$on("moveRight",d),{key:s,first:null,c(){t=K(),L(r.$$.fragment),this.h()},l(m){t=K(),S(r.$$.fragment,m),this.h()},h(){this.first=t},m(m,v){w(m,t,v),C(r,m,v),n=!0},p(m,v){e=m;const $={};v&1&&($.isFirst=e[14]==0),v&1&&($.isLast=e[14]==e[0].length-1),v&1&&($.leftFeature=e[14]==0?"":e[0][e[14]-1]),v&1&&($.rightFeature=e[14]==e[0].length-1?"":e[0][e[14]+1]),v&2&&($.sectionType=e[1]),!i&&v&1&&(i=!0,$.value=e[12],A(()=>i=!1)),r.$set($)},i(m){n||(k(r.$$.fragment,m),n=!0)},o(m){D(r.$$.fragment,m),n=!1},d(m){m&&g(t),R(r,m)}}}function bt(s){let e,t,r,i=[],n=new Map,l,o,f,d,h=s[2].toFixed(2)+"",m,v;e=new oe({props:{$$slots:{default:[$t]},$$scope:{ctx:s}}}),e.$on("click",s[3]);let $=te(s[0]);const b=a=>a[14];for(let a=0;a<$.length;a+=1){let u=Ne(s,$,a),c=b(u);n.set(c,i[a]=Pe(c,u))}return{c(){L(e.$$.fragment),t=N(),r=I("div");for(let a=0;a<i.length;a+=1)i[a].c();l=N(),o=I("p"),f=W("Total width required (m): "),d=I("b"),m=W(h),this.h()},l(a){S(e.$$.fragment,a),t=P(a),r=M(a,"DIV",{style:!0});var u=G(r);for(let _=0;_<i.length;_+=1)i[_].l(u);u.forEach(g),l=P(a),o=M(a,"P",{});var c=G(o);f=q(c,"Total width required (m): "),d=M(c,"B",{});var y=G(d);m=q(y,h),y.forEach(g),c.forEach(g),this.h()},h(){x(r,"display","flex"),x(r,"flex-direction","row")},m(a,u){C(e,a,u),w(a,t,u),w(a,r,u);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,null);w(a,l,u),w(a,o,u),E(o,f),E(o,d),E(d,m),v=!0},p(a,[u]){const c={};u&32768&&(c.$$scope={dirty:u,ctx:a}),e.$set(c),u&115&&($=te(a[0]),Q(),i=Ye(i,u,b,1,a,$,n,r,ze,Pe,null,Ne),X()),(!v||u&4)&&h!==(h=a[2].toFixed(2)+"")&&J(m,h)},i(a){if(!v){k(e.$$.fragment,a);for(let u=0;u<$.length;u+=1)k(i[u]);v=!0}},o(a){D(e.$$.fragment,a);for(let u=0;u<i.length;u+=1)D(i[u]);v=!1},d(a){a&&(g(t),g(r),g(l),g(o)),R(e,a);for(let u=0;u<i.length;u+=1)i[u].d()}}}function vt(s,e,t){let r,i;ae(s,O,a=>t(7,i=a));let{streetFeaturesLeftToRight:n}=e,{sectionType:l}=e;function o(){t(0,n=[...n,""])}function f(a){n.splice(a,1),t(0,n)}function d(a){t(0,[n[a-1],n[a]]=[n[a],n[a-1]],n)}function h(a){t(0,[n[a+1],n[a]]=[n[a],n[a+1]],n)}function m(a,u,c,y){c[y]=a,t(0,n)}const v=a=>f(a),$=a=>d(a),b=a=>h(a);return s.$$set=a=>{"streetFeaturesLeftToRight"in a&&t(0,n=a.streetFeaturesLeftToRight),"sectionType"in a&&t(1,l=a.sectionType)},s.$$.update=()=>{s.$$.dirty&130&&t(2,r=et(i,l))},[n,l,r,o,f,d,h,i,m,v,$,b]}class Ie extends ne{constructor(e){super(),le(this,e,vt,bt,se,{streetFeaturesLeftToRight:0,sectionType:1})}}function Be(s){let e,t,r,i;return{c(){e=I("p"),t=W("Effective speed limit, based on the limit and 85 percentile: "),r=W(s[1]),i=W(`
      mph`)},l(n){e=M(n,"P",{});var l=G(e);t=q(l,"Effective speed limit, based on the limit and 85 percentile: "),r=q(l,s[1]),i=q(l,`
      mph`),l.forEach(g)},m(n,l){w(n,e,l),E(e,t),E(e,r),E(e,i)},p(n,l){l&2&&J(r,n[1])},d(n){n&&g(e)}}}function wt(s){let e,t,r,i,n,l,o,f,d,h,m,v,$,b,a,u,c,y,_,F,H,ee;function Me(p){s[4](p)}let pe={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:z(["<200","200-800",">800"])};s[0].proposed.trafficData.flowOneWay!==void 0&&(pe.value=s[0].proposed.trafficData.flowOneWay),e=new Y({props:pe}),U.push(()=>j(e,"value",Me));function Oe(p){s[5](p)}let de={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:z(["<300","300-1,000",">1,000"])};s[0].proposed.trafficData.flowTwoWay!==void 0&&(de.value=s[0].proposed.trafficData.flowTwoWay),i=new Y({props:de}),U.push(()=>j(i,"value",Oe));function Ve(p){s[6](p)}let me={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:z(["<300",">300"])};s[0].proposed.trafficData.flowSharedUse!==void 0&&(me.value=s[0].proposed.trafficData.flowSharedUse),o=new Y({props:me}),U.push(()=>j(o,"value",Ve));function Ue(p){s[7](p)}let he={label:"Traffic flow (vpd)",emptyOption:!0,choices:z(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};s[0].proposed.trafficData.trafficFlow!==void 0&&(he.value=s[0].proposed.trafficData.trafficFlow),h=new Y({props:he}),U.push(()=>j(h,"value",Ue));function Ae(p){s[8](p)}let _e={label:"Speed limit (MPH)",emptyOption:!0,choices:s[2]};s[0].proposed.trafficData.speedLimit!==void 0&&(_e.value=s[0].proposed.trafficData.speedLimit),$=new Y({props:_e}),U.push(()=>j($,"value",Ae));function je(p){s[9](p)}let ge={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};s[0].proposed.trafficData.observedSpeed!==void 0&&(ge.value=s[0].proposed.trafficData.observedSpeed),u=new tt({props:ge}),U.push(()=>j(u,"value",je));let B=s[1]&&Be(s);function He(p){s[10](p)}let $e={label:"Street function",emptyOption:!0,choices:z(["High Street (active frontages)","Residential street","Local distributor road"])};return s[0].proposed.trafficData.streetFunction!==void 0&&($e.value=s[0].proposed.trafficData.streetFunction),F=new Y({props:$e}),U.push(()=>j(F,"value",He)),{c(){L(e.$$.fragment),r=N(),L(i.$$.fragment),l=N(),L(o.$$.fragment),d=N(),L(h.$$.fragment),v=N(),L($.$$.fragment),a=N(),L(u.$$.fragment),y=N(),B&&B.c(),_=N(),L(F.$$.fragment)},l(p){S(e.$$.fragment,p),r=P(p),S(i.$$.fragment,p),l=P(p),S(o.$$.fragment,p),d=P(p),S(h.$$.fragment,p),v=P(p),S($.$$.fragment,p),a=P(p),S(u.$$.fragment,p),y=P(p),B&&B.l(p),_=P(p),S(F.$$.fragment,p)},m(p,T){C(e,p,T),w(p,r,T),C(i,p,T),w(p,l,T),C(o,p,T),w(p,d,T),C(h,p,T),w(p,v,T),C($,p,T),w(p,a,T),C(u,p,T),w(p,y,T),B&&B.m(p,T),w(p,_,T),C(F,p,T),ee=!0},p(p,T){const be={};!t&&T&1&&(t=!0,be.value=p[0].proposed.trafficData.flowOneWay,A(()=>t=!1)),e.$set(be);const ve={};!n&&T&1&&(n=!0,ve.value=p[0].proposed.trafficData.flowTwoWay,A(()=>n=!1)),i.$set(ve);const we={};!f&&T&1&&(f=!0,we.value=p[0].proposed.trafficData.flowSharedUse,A(()=>f=!1)),o.$set(we);const ye={};!m&&T&1&&(m=!0,ye.value=p[0].proposed.trafficData.trafficFlow,A(()=>m=!1)),h.$set(ye);const ke={};!b&&T&1&&(b=!0,ke.value=p[0].proposed.trafficData.speedLimit,A(()=>b=!1)),$.$set(ke);const De={};!c&&T&1&&(c=!0,De.value=p[0].proposed.trafficData.observedSpeed,A(()=>c=!1)),u.$set(De),p[1]?B?B.p(p,T):(B=Be(p),B.c(),B.m(_.parentNode,_)):B&&(B.d(1),B=null);const Fe={};!H&&T&1&&(H=!0,Fe.value=p[0].proposed.trafficData.streetFunction,A(()=>H=!1)),F.$set(Fe)},i(p){ee||(k(e.$$.fragment,p),k(i.$$.fragment,p),k(o.$$.fragment,p),k(h.$$.fragment,p),k($.$$.fragment,p),k(u.$$.fragment,p),k(F.$$.fragment,p),ee=!0)},o(p){D(e.$$.fragment,p),D(i.$$.fragment,p),D(o.$$.fragment,p),D(h.$$.fragment,p),D($.$$.fragment,p),D(u.$$.fragment,p),D(F.$$.fragment,p),ee=!1},d(p){p&&(g(r),g(l),g(d),g(v),g(a),g(y),g(_)),R(e,p),R(i,p),R(o,p),R(h,p),R($,p),R(u,p),B&&B.d(p),R(F,p)}}}function yt(s){let e,t;return e=new fe({props:{label:"Traffic data and additional information",$$slots:{default:[wt]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(r){S(e.$$.fragment,r)},m(r,i){C(e,r,i),t=!0},p(r,[i]){const n={};i&2051&&(n.$$scope={dirty:i,ctx:r}),e.$set(n)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){R(e,r)}}}function kt(s,e,t){let r,i;ae(s,O,b=>t(0,i=b));let{valid:n}=e,l=z(Ze);function o(b){s.$$.not_equal(i.proposed.trafficData.flowOneWay,b)&&(i.proposed.trafficData.flowOneWay=b,O.set(i))}function f(b){s.$$.not_equal(i.proposed.trafficData.flowTwoWay,b)&&(i.proposed.trafficData.flowTwoWay=b,O.set(i))}function d(b){s.$$.not_equal(i.proposed.trafficData.flowSharedUse,b)&&(i.proposed.trafficData.flowSharedUse=b,O.set(i))}function h(b){s.$$.not_equal(i.proposed.trafficData.trafficFlow,b)&&(i.proposed.trafficData.trafficFlow=b,O.set(i))}function m(b){s.$$.not_equal(i.proposed.trafficData.speedLimit,b)&&(i.proposed.trafficData.speedLimit=b,O.set(i))}function v(b){s.$$.not_equal(i.proposed.trafficData.observedSpeed,b)&&(i.proposed.trafficData.observedSpeed=b,O.set(i))}function $(b){s.$$.not_equal(i.proposed.trafficData.streetFunction,b)&&(i.proposed.trafficData.streetFunction=b,O.set(i))}return s.$$set=b=>{"valid"in b&&t(3,n=b.valid)},s.$$.update=()=>{s.$$.dirty&1&&t(3,n=i.proposed.trafficData.flowOneWay!=""&&i.proposed.trafficData.flowTwoWay!=""&&i.proposed.trafficData.flowSharedUse!=""&&i.proposed.trafficData.trafficFlow!=""&&i.proposed.trafficData.speedLimit!=""&&i.proposed.trafficData.observedSpeed!=null&&i.proposed.trafficData.streetFunction!=""),s.$$.dirty&1&&t(1,r=Ee(i.proposed.trafficData.speedLimit,i.proposed.trafficData.observedSpeed))},[i,r,l,n,o,f,d,h,m,v,$]}class Dt extends ne{constructor(e){super(),le(this,e,kt,yt,se,{valid:3})}}function Ft(s){let e,t="Fill out all data above to continue";return{c(){e=I("p"),e.textContent=t},l(r){e=M(r,"P",{"data-svelte-h":!0}),ue(e)!=="svelte-ma95"&&(e.textContent=t)},m(r,i){w(r,e,i)},p:Z,i:Z,o:Z,d(r){r&&g(e)}}}function Tt(s){let e,t,r,i;return e=new fe({props:{label:"Desirable Minimum Cross-Section",$$slots:{default:[Lt]},$$scope:{ctx:s}}}),r=new fe({props:{label:"Absolute Minimum Cross-Section",$$slots:{default:[St]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment),t=N(),L(r.$$.fragment)},l(n){S(e.$$.fragment,n),t=P(n),S(r.$$.fragment,n)},m(n,l){C(e,n,l),w(n,t,l),C(r,n,l),i=!0},p(n,l){const o={};l&34&&(o.$$scope={dirty:l,ctx:n}),e.$set(o);const f={};l&34&&(f.$$scope={dirty:l,ctx:n}),r.$set(f)},i(n){i||(k(e.$$.fragment,n),k(r.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),D(r.$$.fragment,n),i=!1},d(n){n&&g(t),R(e,n),R(r,n)}}}function Lt(s){let e,t,r;function i(l){s[3](l)}let n={sectionType:"Desirable"};return s[1].proposed.desirableMinimumCrossSection!==void 0&&(n.streetFeaturesLeftToRight=s[1].proposed.desirableMinimumCrossSection),e=new Ie({props:n}),U.push(()=>j(e,"streetFeaturesLeftToRight",i)),{c(){L(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,o){C(e,l,o),r=!0},p(l,o){const f={};!t&&o&2&&(t=!0,f.streetFeaturesLeftToRight=l[1].proposed.desirableMinimumCrossSection,A(()=>t=!1)),e.$set(f)},i(l){r||(k(e.$$.fragment,l),r=!0)},o(l){D(e.$$.fragment,l),r=!1},d(l){R(e,l)}}}function St(s){let e,t,r;function i(l){s[4](l)}let n={sectionType:"Absolute"};return s[1].proposed.absoluteMinimumCrossSection!==void 0&&(n.streetFeaturesLeftToRight=s[1].proposed.absoluteMinimumCrossSection),e=new Ie({props:n}),U.push(()=>j(e,"streetFeaturesLeftToRight",i)),{c(){L(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,o){C(e,l,o),r=!0},p(l,o){const f={};!t&&o&2&&(t=!0,f.streetFeaturesLeftToRight=l[1].proposed.absoluteMinimumCrossSection,A(()=>t=!1)),e.$set(f)},i(l){r||(k(e.$$.fragment,l),r=!0)},o(l){D(e.$$.fragment,l),r=!1},d(l){R(e,l)}}}function Ct(s){let e,t,r,i,n,l,o,f,d;e=new Je({props:{links:[["Tools","/"],["Route cross-section","/cross_section"]],current:"Proposed Cross-Sections"}});function h(a){s[2](a)}let m={};s[0]!==void 0&&(m.valid=s[0]),r=new Dt({props:m}),U.push(()=>j(r,"valid",h));const v=[Tt,Ft],$=[];function b(a,u){return a[0]?0:1}return l=b(s),o=$[l]=v[l](s),{c(){L(e.$$.fragment),t=N(),L(r.$$.fragment),n=N(),o.c(),f=K()},l(a){S(e.$$.fragment,a),t=P(a),S(r.$$.fragment,a),n=P(a),o.l(a),f=K()},m(a,u){C(e,a,u),w(a,t,u),C(r,a,u),w(a,n,u),$[l].m(a,u),w(a,f,u),d=!0},p(a,[u]){const c={};!i&&u&1&&(i=!0,c.valid=a[0],A(()=>i=!1)),r.$set(c);let y=l;l=b(a),l===y?$[l].p(a,u):(Q(),D($[y],1,1,()=>{$[y]=null}),X(),o=$[l],o?o.p(a,u):(o=$[l]=v[l](a),o.c()),k(o,1),o.m(f.parentNode,f))},i(a){d||(k(e.$$.fragment,a),k(r.$$.fragment,a),k(o),d=!0)},o(a){D(e.$$.fragment,a),D(r.$$.fragment,a),D(o),d=!1},d(a){a&&(g(t),g(n),g(f)),R(e,a),R(r,a),$[l].d(a)}}}function Rt(s,e,t){let r;ae(s,O,f=>t(1,r=f));let i=!1;function n(f){i=f,t(0,i)}function l(f){s.$$.not_equal(r.proposed.desirableMinimumCrossSection,f)&&(r.proposed.desirableMinimumCrossSection=f,O.set(r))}function o(f){s.$$.not_equal(r.proposed.absoluteMinimumCrossSection,f)&&(r.proposed.absoluteMinimumCrossSection=f,O.set(r))}return[i,r,n,l,o]}class Ht extends ne{constructor(e){super(),le(this,e,Rt,Ct,se,{})}}export{Ht as component};
