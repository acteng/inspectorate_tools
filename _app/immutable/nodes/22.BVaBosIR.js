var Us=Object.defineProperty;var Ws=(r,e,t)=>e in r?Us(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ke=(r,e,t)=>(Ws(r,typeof e!="symbol"?e+"":e,t),t);import{s as de,Q as bt,R as _t,b as le,f as O,r as C,i as N,h as Q,n as me,e as ie,a as J,t as Te,c as oe,g as K,d as Be,w as st,x as He,j as Bt,z as Oi,D as Me,a9 as De,p as $r,v as dt,l as Ft,aa as en,G as so,ab as Gs,u as Rt,m as Dt,o as zt,a7 as Li,ac as St,E as Pe,I as ze,U as js,ad as rl,ae as qs,k as Ce,M as wt,F as Ae,W as Hs,H as Zs,af as xs}from"../chunks/scheduler.DQXnSe5h.js";import{S as _e,i as we,c as x,a as X,m as Y,t as D,g as Je,b as z,e as Ke,d as V,f as Oe}from"../chunks/index.B4AQako7.js";import{p as sr}from"../chunks/index.BB964Zje.js";import{S as fr}from"../chunks/Select.DN-UPzIW.js";import{T as Ur}from"../chunks/TextArea.DGTzGLPf.js";import{T as ur}from"../chunks/TextInput.BeJK9dJi.js";import{s as Ee}from"../chunks/data.BOtnYZnX.js";import{c as Xs,h as Ys,m as rr,g as Ci,a as _n,b as nl}from"../chunks/Modal.svelte_svelte_type_style_lang.2NhczJl8.js";import{D as Vs}from"../chunks/DefaultButton.DmhLs_5L.js";import{S as Fn,W as Js}from"../chunks/WarningButton.CISwBlnQ.js";import{w as it,r as Rn}from"../chunks/entry.BBRUna6O.js";import"../chunks/paths.ikPtT5U_.js";import{e as fo,u as Ks,o as Qs}from"../chunks/each.B8wci2m2.js";import{a as $s,t as ef,r as tf,f as rf,d as nf}from"../chunks/lists.Ci0sBo6t.js";function of(r){let e,t;return{c(){e=bt("svg"),t=bt("path"),this.h()},l(n){e=_t(n,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var i=le(e);t=_t(i,"path",{d:!0}),le(t).forEach(O),i.forEach(O),this.h()},h(){C(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),C(e,"viewBox","0 0 14 14"),C(e,"width","13"),C(e,"height","13"),C(e,"class","svelte-en2qvf")},m(n,i){N(n,e,i),Q(e,t)},p:me,i:me,o:me,d(n){n&&O(e)}}}class il extends _e{constructor(e){super(),we(this,e,null,of,de,{})}}function af(r){let e,t;return{c(){e=bt("svg"),t=bt("path"),this.h()},l(n){e=_t(n,"svg",{viewBox:!0,fill:!0,xmlns:!0,class:!0});var i=le(e);t=_t(i,"path",{d:!0}),le(t).forEach(O),i.forEach(O),this.h()},h(){C(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),C(e,"viewBox","0 0 30 30"),C(e,"fill","none"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"class","svelte-d2loi5")},m(n,i){N(n,e,i),Q(e,t)},p:me,i:me,o:me,d(n){n&&O(e)}}}class ol extends _e{constructor(e){super(),we(this,e,null,af,de,{})}}function lf(r){let e,t;return{c(){e=ie("img"),this.h()},l(n){e=oe(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(e.src,t=r[3]+"area.svg")||C(e,"src",t),C(e,"alt",r[6]),C(e,"class","svelte-ltkwvy")},m(n,i){N(n,e,i)},p(n,i){i&8&&!De(e.src,t=n[3]+"area.svg")&&C(e,"src",t),i&64&&C(e,"alt",n[6])},d(n){n&&O(e)}}}function sf(r){let e,t;return{c(){e=ie("img"),this.h()},l(n){e=oe(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(e.src,t=r[3]+"reverse.svg")||C(e,"src",t),C(e,"alt",r[6]),C(e,"class","svelte-ltkwvy")},m(n,i){N(n,e,i)},p(n,i){i&8&&!De(e.src,t=n[3]+"reverse.svg")&&C(e,"src",t),i&64&&C(e,"alt",n[6])},d(n){n&&O(e)}}}function ff(r){let e,t;return{c(){e=ie("img"),this.h()},l(n){e=oe(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(e.src,t=r[3]+"poi.svg")||C(e,"src",t),C(e,"alt",r[6]),C(e,"class","svelte-ltkwvy")},m(n,i){N(n,e,i)},p(n,i){i&8&&!De(e.src,t=n[3]+"poi.svg")&&C(e,"src",t),i&64&&C(e,"alt",n[6])},d(n){n&&O(e)}}}function uf(r){let e,t;return{c(){e=ie("img"),this.h()},l(n){e=oe(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(e.src,t=r[3]+"postal_code.svg")||C(e,"src",t),C(e,"alt",r[6]),C(e,"class","svelte-ltkwvy")},m(n,i){N(n,e,i)},p(n,i){i&8&&!De(e.src,t=n[3]+"postal_code.svg")&&C(e,"src",t),i&64&&C(e,"alt",n[6])},d(n){n&&O(e)}}}function cf(r){let e,t;return{c(){e=ie("img"),this.h()},l(n){e=oe(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(e.src,t=r[3]+"street.svg")||C(e,"src",t),C(e,"alt",r[6]),C(e,"class","svelte-ltkwvy")},m(n,i){N(n,e,i)},p(n,i){i&8&&!De(e.src,t=n[3]+"street.svg")&&C(e,"src",t),i&64&&C(e,"alt",n[6])},d(n){n&&O(e)}}}function mf(r){let e,t;return{c(){e=ie("img"),this.h()},l(n){e=oe(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(e.src,t=r[3]+"road.svg")||C(e,"src",t),C(e,"alt",r[6]),C(e,"class","svelte-ltkwvy")},m(n,i){N(n,e,i)},p(n,i){i&8&&!De(e.src,t=n[3]+"road.svg")&&C(e,"src",t),i&64&&C(e,"alt",n[6])},d(n){n&&O(e)}}}function yf(r){let e,t;return{c(){e=ie("img"),this.h()},l(n){e=oe(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(e.src,t=r[3]+"housenumber.svg")||C(e,"src",t),C(e,"alt",r[6]),C(e,"class","svelte-ltkwvy")},m(n,i){N(n,e,i)},p(n,i){i&8&&!De(e.src,t=n[3]+"housenumber.svg")&&C(e,"src",t),i&64&&C(e,"alt",n[6])},d(n){n&&O(e)}}}function hf(r){let e,t,n,i;return{c(){e=ie("img"),this.h()},l(o){e=oe(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(e.src,t=r[5])||C(e,"src",t),C(e,"alt",r[4]),C(e,"class","svelte-ltkwvy")},m(o,a){N(o,e,a),n||(i=He(e,"error",r[14]),n=!0)},p(o,a){a&32&&!De(e.src,t=o[5])&&C(e,"src",t),a&16&&C(e,"alt",o[4])},d(o){o&&O(e),n=!1,i()}}}function uo(r){let e,t;return{c(){e=ie("span"),t=Te(r[6]),this.h()},l(n){e=oe(n,"SPAN",{class:!0});var i=le(e);t=Be(i,r[6]),i.forEach(O),this.h()},h(){C(e,"class","secondary svelte-ltkwvy")},m(n,i){N(n,e,i),Q(e,t)},p(n,i){i&64&&Bt(t,n[6])},d(n){n&&O(e)}}}function gf(r){var k,A;let e,t,n,i,o,a,l,s,f=(r[7]?r[0].place_name:r[0].place_name.replace(/,.*/,""))+"",c,m,g=r[2]==="always"||r[2]&&!r[0].address&&((k=r[0].properties)==null?void 0:k.kind)!=="road"&&((A=r[0].properties)==null?void 0:A.kind)!=="road_relation"&&!r[0].id.startsWith("address.")&&!r[0].id.startsWith("postal_code.")&&(!r[0].id.startsWith("poi.")||!r[5])&&!r[7],v,_,T=(r[7]?"":r[0].place_name.replace(/[^,]*,?\s*/,""))+"",L,B,u;function y(E,I){var p,w;return I&1&&(t=null),I&1&&(n=null),I&1&&(i=null),E[5]?hf:E[0].address?yf:((p=E[0].properties)==null?void 0:p.kind)==="road"||((w=E[0].properties)==null?void 0:w.kind)==="road_relation"?mf:(t==null&&(t=!!E[0].id.startsWith("address.")),t?cf:(n==null&&(n=!!E[0].id.startsWith("postal_code.")),n?uf:(i==null&&(i=!!E[0].id.startsWith("poi.")),i?ff:E[7]?sf:lf)))}let h=y(r,-1),b=h(r),M=g&&uo(r);return{c(){e=ie("li"),b.c(),o=J(),a=ie("span"),l=ie("span"),s=ie("span"),c=Te(f),m=J(),M&&M.c(),v=J(),_=ie("span"),L=Te(T),this.h()},l(E){e=oe(E,"LI",{tabindex:!0,"data-selected":!0,class:!0});var I=le(e);b.l(I),o=K(I),a=oe(I,"SPAN",{class:!0});var p=le(a);l=oe(p,"SPAN",{class:!0});var w=le(l);s=oe(w,"SPAN",{class:!0});var U=le(s);c=Be(U,f),U.forEach(O),m=K(w),M&&M.l(w),w.forEach(O),v=K(p),_=oe(p,"SPAN",{class:!0});var F=le(_);L=Be(F,T),F.forEach(O),p.forEach(O),I.forEach(O),this.h()},h(){C(s,"class","primary svelte-ltkwvy"),C(l,"class","svelte-ltkwvy"),C(_,"class","line2 svelte-ltkwvy"),C(a,"class","texts svelte-ltkwvy"),C(e,"tabindex","0"),C(e,"data-selected",r[1]),C(e,"class","svelte-ltkwvy"),st(e,"selected",r[1])},m(E,I){N(E,e,I),b.m(e,null),Q(e,o),Q(e,a),Q(a,l),Q(l,s),Q(s,c),Q(l,m),M&&M.m(l,null),Q(a,v),Q(a,_),Q(_,L),B||(u=[He(e,"mouseenter",r[12]),He(e,"focus",r[13])],B=!0)},p(E,[I]){var p,w;h===(h=y(E,I))&&b?b.p(E,I):(b.d(1),b=h(E),b&&(b.c(),b.m(e,o))),I&1&&f!==(f=(E[7]?E[0].place_name:E[0].place_name.replace(/,.*/,""))+"")&&Bt(c,f),I&37&&(g=E[2]==="always"||E[2]&&!E[0].address&&((p=E[0].properties)==null?void 0:p.kind)!=="road"&&((w=E[0].properties)==null?void 0:w.kind)!=="road_relation"&&!E[0].id.startsWith("address.")&&!E[0].id.startsWith("postal_code.")&&(!E[0].id.startsWith("poi.")||!E[5])&&!E[7]),g?M?M.p(E,I):(M=uo(E),M.c(),M.m(l,null)):M&&(M.d(1),M=null),I&1&&T!==(T=(E[7]?"":E[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&Bt(L,T),I&2&&C(e,"data-selected",E[1]),I&2&&st(e,"selected",E[1])},i:me,o:me,d(E){E&&O(e),b.d(),M&&M.d(),B=!1,Oi(u)}}}function vf(r,e,t){var y;let n,i,{feature:o}=e,{selected:a=!1}=e,{showPlaceType:l}=e,{missingIconsCache:s}=e,{iconsBaseUrl:f}=e;const c=(y=o.properties)==null?void 0:y.categories;let m,g,v=0,_=o.place_type[0]==="reverse";function T(h){g&&s.add(g),t(10,v++,v)}function L(h){Me.call(this,r,h)}function B(h){Me.call(this,r,h)}const u=h=>T(h.currentTarget);return r.$$set=h=>{"feature"in h&&t(0,o=h.feature),"selected"in h&&t(1,a=h.selected),"showPlaceType"in h&&t(2,l=h.showPlaceType),"missingIconsCache"in h&&t(9,s=h.missingIconsCache),"iconsBaseUrl"in h&&t(3,f=h.iconsBaseUrl)},r.$$.update=()=>{var h,b,M,k;if(r.$$.dirty&3640)do t(11,n--,n),t(4,m=c==null?void 0:c[n]),t(5,g=m?f+m.replace(/ /g,"_")+".svg":void 0);while(n>-1&&(!g||s.has(g)));r.$$.dirty&1&&t(6,i=o.id.startsWith("poi.")?(b=(h=o.properties)==null?void 0:h.categories)==null?void 0:b.join(", "):((k=(M=o.properties)==null?void 0:M.place_type_name)==null?void 0:k[0])??o.place_type[0])},t(11,n=(c==null?void 0:c.length)??0),[o,a,l,f,m,g,i,_,T,s,v,n,L,B,u]}class df extends _e{constructor(e){super(),we(this,e,vf,gf,de,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function pf(r){let e,t='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>';return{c(){e=ie("div"),e.innerHTML=t,this.h()},l(n){e=oe(n,"DIV",{class:!0,"data-svelte-h":!0}),$r(e)!=="svelte-r6ogid"&&(e.innerHTML=t),this.h()},h(){C(e,"class","svelte-7cmwmc")},m(n,i){N(n,e,i)},p:me,i:me,o:me,d(n){n&&O(e)}}}class bf extends _e{constructor(e){super(),we(this,e,null,pf,de,{})}}function _f(r){let e,t;return{c(){e=bt("svg"),t=bt("path"),this.h()},l(n){e=_t(n,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var i=le(e);t=_t(i,"path",{d:!0}),le(t).forEach(O),i.forEach(O),this.h()},h(){C(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),C(e,"viewBox","0 0 60.006 21.412"),C(e,"width","14"),C(e,"height","20"),C(e,"class","svelte-en2qvf")},m(n,i){N(n,e,i),Q(e,t)},p:me,i:me,o:me,d(n){n&&O(e)}}}class wf extends _e{constructor(e){super(),we(this,e,null,_f,de,{})}}function Sf(r){let e,t,n;return{c(){e=bt("svg"),t=bt("circle"),n=bt("path"),this.h()},l(i){e=_t(i,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var o=le(e);t=_t(o,"circle",{cx:!0,cy:!0,r:!0,style:!0}),le(t).forEach(O),n=_t(o,"path",{d:!0,style:!0}),le(n).forEach(O),o.forEach(O),this.h()},h(){C(t,"cx","4.789"),C(t,"cy","4.787"),C(t,"r","3.85"),dt(t,"stroke-width","1.875"),dt(t,"fill","none"),C(n,"d","M12.063 12.063 7.635 7.635"),dt(n,"stroke-width","1.875"),dt(n,"stroke-linecap","round"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"width","13"),C(e,"height","13"),C(e,"viewBox","0 0 13 13"),C(e,"class","svelte-1bpbt60")},m(i,o){N(i,e,o),Q(e,t),Q(e,n)},p:me,i:me,o:me,d(i){i&&O(e)}}}class Mf extends _e{constructor(e){super(),we(this,e,null,Sf,de,{})}}function Pf(r,e,t){const n=e[1],i=e[0],o=n-i;return r===n&&t?r:((r-i)%o+o)%o+i}function co(r){const e=[...r];return e[2]<e[0]&&(e[2]+=360),e}let cr;async function kf(r,e,t){const n=r==null?void 0:r.getCenterAndZoom();for(const i of e??[])if(!(n&&(i.minZoom!=null&&i.minZoom>n[0]||i.maxZoom!=null&&i.maxZoom<n[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(cr&&i.cachedLocationExpiry&&cr.time+i.cachedLocationExpiry>Date.now()){if(!cr.coords)break e;return cr.coords}let o;try{return o=await new Promise((a,l)=>{t.signal.addEventListener("abort",()=>{l(Error("aborted"))}),navigator.geolocation.getCurrentPosition(s=>{a([s.coords.longitude,s.coords.latitude].map(f=>f.toFixed(6)).join(","))},s=>{l(s)},i)}),o}catch{}finally{i.cachedLocationExpiry&&(cr={time:Date.now(),coords:o})}if(t.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(n&&i.type==="map-center")return n[1].toFixed(6)+","+n[2].toFixed(6)}}function mo(r,e,t){const n=r.slice();return n[81]=e[t],n[83]=t,n}function yo(r){let e,t;return e=new bf({}),{c(){x(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){z(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function ho(r){let e,t,n,i,o;return t=new wf({}),{c(){e=ie("button"),x(t.$$.fragment),this.h()},l(a){e=oe(a,"BUTTON",{type:!0,title:!0,class:!0});var l=le(e);X(t.$$.fragment,l),l.forEach(O),this.h()},h(){C(e,"type","button"),C(e,"title",r[9]),C(e,"class","svelte-zh3kmv"),st(e,"active",r[0])},m(a,l){N(a,e,l),Y(t,e,null),n=!0,i||(o=He(e,"click",r[67]),i=!0)},p(a,l){(!n||l[0]&512)&&C(e,"title",a[9]),(!n||l[0]&1)&&st(e,"active",a[0])},i(a){n||(D(t.$$.fragment,a),n=!0)},o(a){z(t.$$.fragment,a),n=!1},d(a){a&&O(e),V(t),i=!1,o()}}}function Ef(r){let e,t=[],n=new Map,i,o,a,l=fo(r[14]);const s=f=>f[81].id+(f[81].address?","+f[81].address:"");for(let f=0;f<l.length;f+=1){let c=mo(r,l,f),m=s(c);n.set(m,t[f]=go(m,c))}return{c(){e=ie("ul");for(let f=0;f<t.length;f+=1)t[f].c();this.h()},l(f){e=oe(f,"UL",{class:!0});var c=le(e);for(let m=0;m<t.length;m+=1)t[m].l(c);c.forEach(O),this.h()},h(){C(e,"class","svelte-zh3kmv")},m(f,c){N(f,e,c);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);i=!0,o||(a=[He(e,"mouseleave",r[71]),He(e,"blur",r[72])],o=!0)},p(f,c){c[0]&17880064&&(l=fo(f[14]),Je(),t=Ks(t,c,s,1,f,l,n,e,Qs,go,null,mo),Ke())},i(f){if(!i){for(let c=0;c<l.length;c+=1)D(t[c]);i=!0}},o(f){for(let c=0;c<t.length;c+=1)z(t[c]);i=!1},d(f){f&&O(e);for(let c=0;c<t.length;c+=1)t[c].d();o=!1,Oi(a)}}}function Af(r){let e,t,n,i,o,a;return t=new ol({}),{c(){e=ie("div"),x(t.$$.fragment),n=J(),i=ie("div"),o=Te(r[7]),this.h()},l(l){e=oe(l,"DIV",{class:!0});var s=le(e);X(t.$$.fragment,s),n=K(s),i=oe(s,"DIV",{class:!0});var f=le(i);o=Be(f,r[7]),f.forEach(O),s.forEach(O),this.h()},h(){C(i,"class","svelte-zh3kmv"),C(e,"class","no-results svelte-zh3kmv")},m(l,s){N(l,e,s),Y(t,e,null),Q(e,n),Q(e,i),Q(i,o),a=!0},p(l,s){(!a||s[0]&128)&&Bt(o,l[7])},i(l){a||(D(t.$$.fragment,l),a=!0)},o(l){z(t.$$.fragment,l),a=!1},d(l){l&&O(e),V(t)}}}function Of(r){let e="",t;return{c(){t=Te(e)},l(n){t=Be(n,e)},m(n,i){N(n,t,i)},p:me,i:me,o:me,d(n){n&&O(t)}}}function Lf(r){let e,t,n,i,o,a,l,s,f,c,m;return t=new ol({}),s=new il({}),{c(){e=ie("div"),x(t.$$.fragment),n=J(),i=ie("div"),o=Te(r[6]),a=J(),l=ie("button"),x(s.$$.fragment),this.h()},l(g){e=oe(g,"DIV",{class:!0});var v=le(e);X(t.$$.fragment,v),n=K(v),i=oe(v,"DIV",{class:!0});var _=le(i);o=Be(_,r[6]),_.forEach(O),a=K(v),l=oe(v,"BUTTON",{class:!0});var T=le(l);X(s.$$.fragment,T),T.forEach(O),v.forEach(O),this.h()},h(){C(i,"class","svelte-zh3kmv"),C(l,"class","svelte-zh3kmv"),C(e,"class","error svelte-zh3kmv")},m(g,v){N(g,e,v),Y(t,e,null),Q(e,n),Q(e,i),Q(i,o),Q(e,a),Q(e,l),Y(s,l,null),f=!0,c||(m=He(l,"click",r[68]),c=!0)},p(g,v){(!f||v[0]&64)&&Bt(o,g[6])},i(g){f||(D(t.$$.fragment,g),D(s.$$.fragment,g),f=!0)},o(g){z(t.$$.fragment,g),z(s.$$.fragment,g),f=!1},d(g){g&&O(e),V(t),V(s),c=!1,m()}}}function go(r,e){let t,n,i;function o(){return e[69](e[83])}function a(){return e[70](e[81])}return n=new df({props:{feature:e[81],showPlaceType:e[10],selected:e[15]===e[83],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),n.$on("mouseenter",o),n.$on("focus",a),{key:r,first:null,c(){t=ze(),x(n.$$.fragment),this.h()},l(l){t=ze(),X(n.$$.fragment,l),this.h()},h(){this.first=t},m(l,s){N(l,t,s),Y(n,l,s),i=!0},p(l,s){e=l;const f={};s[0]&16384&&(f.feature=e[81]),s[0]&1024&&(f.showPlaceType=e[10]),s[0]&49152&&(f.selected=e[15]===e[83]),s[0]&4096&&(f.iconsBaseUrl=e[12]),n.$set(f)},i(l){i||(D(n.$$.fragment,l),i=!0)},o(l){z(n.$$.fragment,l),i=!1},d(l){l&&O(t),V(n,l)}}}function Cf(r){let e,t,n,i,o,a,l,s,f,c,m,g,v,_,T,L,B,u,y,h,b,M=!1;o=new Mf({}),m=new il({});let k=r[19]&&yo(),A=r[5]===!0&&ho(r);const E=r[59].default,I=Ft(E,r,r[58],null),p=[Lf,Of,Af,Ef],w=[];function U(F,W){var G,$;return F[18]?0:F[16]?((G=F[14])==null?void 0:G.length)===0?2:F[16]&&(($=F[14])!=null&&$.length)?3:-1:1}return~(L=U(r))&&(B=w[L]=p[L](r)),{c(){e=J(),t=ie("form"),n=ie("div"),i=ie("button"),x(o.$$.fragment),a=J(),l=ie("input"),s=J(),f=ie("div"),c=ie("button"),x(m.$$.fragment),g=J(),k&&k.c(),v=J(),A&&A.c(),_=J(),I&&I.c(),T=J(),B&&B.c(),this.h()},l(F){e=K(F),t=oe(F,"FORM",{tabindex:!0,class:!0});var W=le(t);n=oe(W,"DIV",{class:!0});var G=le(n);i=oe(G,"BUTTON",{class:!0,type:!0});var $=le(i);X(o.$$.fragment,$),$.forEach(O),a=K(G),l=oe(G,"INPUT",{placeholder:!0,"aria-label":!0,class:!0}),s=K(G),f=oe(G,"DIV",{class:!0});var ee=le(f);c=oe(ee,"BUTTON",{type:!0,title:!0,class:!0});var ye=le(c);X(m.$$.fragment,ye),ye.forEach(O),g=K(ee),k&&k.l(ee),ee.forEach(O),v=K(G),A&&A.l(G),_=K(G),I&&I.l(G),G.forEach(O),T=K(W),B&&B.l(W),W.forEach(O),this.h()},h(){C(i,"class","search-button svelte-zh3kmv"),C(i,"type","button"),C(l,"placeholder",r[8]),C(l,"aria-label",r[8]),C(l,"class","svelte-zh3kmv"),C(c,"type","button"),C(c,"title",r[3]),C(c,"class","svelte-zh3kmv"),C(f,"class","clear-button-container svelte-zh3kmv"),st(f,"displayable",r[1]!==""),C(n,"class","input-group svelte-zh3kmv"),C(t,"tabindex","0"),C(t,"class",u=en(r[2])+" svelte-zh3kmv"),st(t,"can-collapse",r[4]&&r[1]==="")},m(F,W){N(F,e,W),N(F,t,W),Q(t,n),Q(n,i),Y(o,i,null),Q(n,a),Q(n,l),r[61](l),so(l,r[1]),Q(n,s),Q(n,f),Q(f,c),Y(m,c,null),Q(f,g),k&&k.m(f,null),Q(n,v),A&&A.m(n,null),Q(n,_),I&&I.m(n,null),Q(t,T),~L&&w[L].m(t,null),y=!0,h||(b=[He(i,"click",r[60]),He(l,"input",r[62]),He(l,"focus",r[63]),He(l,"blur",r[64]),He(l,"keydown",r[22]),He(l,"input",r[65]),He(c,"click",r[66]),He(t,"submit",Gs(r[21]))],h=!0)},p(F,W){(!y||W[0]&256)&&C(l,"placeholder",F[8]),(!y||W[0]&256)&&C(l,"aria-label",F[8]),W[0]&2&&l.value!==F[1]&&so(l,F[1]),(!y||W[0]&8)&&C(c,"title",F[3]),F[19]?k?W[0]&524288&&D(k,1):(k=yo(),k.c(),D(k,1),k.m(f,null)):k&&(Je(),z(k,1,1,()=>{k=null}),Ke()),(!y||W[0]&2)&&st(f,"displayable",F[1]!==""),F[5]===!0?A?(A.p(F,W),W[0]&32&&D(A,1)):(A=ho(F),A.c(),D(A,1),A.m(n,_)):A&&(Je(),z(A,1,1,()=>{A=null}),Ke()),I&&I.p&&(!y||W[1]&134217728)&&Rt(I,E,F,F[58],y?zt(E,F[58],W,null):Dt(F[58]),null);let G=L;L=U(F),L===G?~L&&w[L].p(F,W):(B&&(Je(),z(w[G],1,1,()=>{w[G]=null}),Ke()),~L?(B=w[L],B?B.p(F,W):(B=w[L]=p[L](F),B.c()),D(B,1),B.m(t,null)):B=null),(!y||W[0]&4&&u!==(u=en(F[2])+" svelte-zh3kmv"))&&C(t,"class",u),(!y||W[0]&22)&&st(t,"can-collapse",F[4]&&F[1]==="")},i(F){y||(D(M),D(o.$$.fragment,F),D(m.$$.fragment,F),D(k),D(A),D(I,F),D(B),y=!0)},o(F){z(M),z(o.$$.fragment,F),z(m.$$.fragment,F),z(k),z(A),z(I,F),z(B),y=!1},d(F){F&&(O(e),O(t)),V(o),r[61](null),V(m),k&&k.d(),A&&A.d(),I&&I.d(F),~L&&w[L].d(),h=!1,Oi(b)}}}function Tf(r,e,t){let n,{$$slots:i={},$$scope:o}=e,{class:a=void 0}=e,{apiKey:l}=e,{bbox:s=void 0}=e,{clearButtonTitle:f="clear"}=e,{clearOnBlur:c=!1}=e,{collapsed:m=!1}=e,{country:g=void 0}=e,{debounceSearch:v=200}=e,{enableReverse:_=!1}=e,{errorMessage:T="Something went wrongâ€¦"}=e,{filter:L=()=>!0}=e,{flyTo:B=!0}=e,{fuzzyMatch:u=!0}=e,{language:y=void 0}=e,{limit:h=void 0}=e,{mapController:b=void 0}=e,{minLength:M=2}=e,{noResultsMessage:k="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:A="Search"}=e,{proximity:E=[{type:"server-geolocation"}]}=e,{reverseActive:I=_==="always"}=e,{reverseButtonTitle:p="toggle reverse geocoding"}=e,{searchValue:w=""}=e,{showFullGeometry:U=!0}=e,{showPlaceType:F="ifNeeded"}=e,{showResultsWhileTyping:W=!0}=e,{selectFirst:G=!0}=e,{flyToSelected:$=!1}=e,{markerOnSelected:ee=!0}=e,{types:ye=void 0}=e,{excludeTypes:he=!1}=e,{zoom:ce=16}=e,{maxZoom:fe=18}=e,{apiUrl:Fe="https://api.maptiler.com/geocoding"}=e,{fetchParameters:pe={}}=e,{iconsBaseUrl:Ue="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.2/icons/"}=e,{adjustUrlQuery:be=S=>{}}=e;function Se(){ge.focus()}function R(){ge.blur()}function q(S,ve=!0){t(1,w=S),ve?(t(15,te=-1),Lr()):(lr(),setTimeout(()=>{ge.focus(),ge.select()}))}function ae(){t(14,P=void 0),t(55,Z=void 0),t(15,te=-1)}function Ze(){t(54,H=[]),t(55,Z=void 0)}let xe=!1,P,H,Z,We="",ge,te=-1,Ge,At=[],mt,yt,Wt,Gt;const On=new Set,rt=Li();St(()=>{b&&(b.setEventHandler(void 0),b.indicateReverse(!1),b.setSelectedMarker(-1),b.setMarkers(void 0,void 0))});function Lr(S){if(yt&&(clearTimeout(yt),yt=void 0),te>-1&&P)t(55,Z=P[te]),t(1,w=Z.place_type[0]==="reverse"?Z.place_name:Z.place_name.replace(/,.*/,"")),t(18,Ge=void 0),t(54,H=void 0),t(15,te=-1);else if(w){const ve=S||!jt(w);ar(w,{exact:!0}).then(()=>{t(54,H=P),t(55,Z=void 0),ve&&Cr()}).catch(Ye=>t(18,Ge=Ye))}}function jt(S){try{return Xs(S,6)}catch{return!1}}async function ar(S,{byId:ve=!1,exact:Ye=!1}={}){t(18,Ge=void 0),mt==null||mt.abort();const Ve=new AbortController;t(19,mt=Ve);try{const re=jt(S),je=new URLSearchParams;if(y!==void 0&&je.set("language",Array.isArray(y)?y.join(","):y??""),ye&&je.set("types",ye.join(",")),he&&je.set("excludeTypes",String(he)),s&&je.set("bbox",s.map(Lt=>Lt.toFixed(6)).join(",")),g&&je.set("country",Array.isArray(g)?g.join(","):g),!ve&&!re){const Lt=await kf(b,E,Ve);Lt&&je.set("proximity",Lt),(Ye||!W)&&je.set("autocomplete","false"),je.set("fuzzyMatch",String(u))}h!==void 0&&(!re||(ye==null?void 0:ye.length)===1)&&je.set("limit",String(h)),je.set("key",l),be(je);const Ot=Fe+"/"+encodeURIComponent(re?re.decimalLongitude+","+re.decimalLatitude:S)+".json?"+je.toString();if(Ot===We){ve?(t(14,P=void 0),t(55,Z=At[0])):t(14,P=At);return}We=Ot;const Ht=await fetch(Ot,{signal:Ve.signal,...pe});if(!Ht.ok)throw new Error(await Ht.text());const Zt=await Ht.json();rt("response",{url:Ot,featureCollection:Zt}),ve?(t(14,P=void 0),t(55,Z=Zt.features[0]),At=[Z]):(t(14,P=Zt.features.filter(L)),re&&P.unshift({type:"Feature",properties:{},id:"reverse_"+re.decimalLongitude+"_"+re.decimalLatitude,text:re.decimalLatitude+", "+re.decimalLongitude,place_name:re.decimalLatitude+", "+re.decimalLongitude,place_type:["reverse"],center:[re.decimalLongitude,re.decimalLatitude],bbox:[re.decimalLongitude,re.decimalLatitude,re.decimalLongitude,re.decimalLatitude],geometry:{type:"Point",coordinates:[re.decimalLongitude,re.decimalLatitude]}}),At=P,re&&ge.focus())}catch(re){if(re&&typeof re=="object"&&"name"in re&&re.name==="AbortError")return;throw re}finally{Ve===mt&&t(19,mt=void 0)}}function Cr(){var Ye;if(!(H!=null&&H.length)||!B)return;const S=[180,90,-180,-90],ve=!H.some(Ve=>!Ve.matching_text);for(const Ve of H)if(ve||!Ve.matching_text)for(const re of[0,1,2,3])S[re]=Math[re<2?"min":"max"](S[re],((Ye=Ve.bbox)==null?void 0:Ye[re])??Ve.center[re%2]);b&&H.length>0&&(Z&&S[0]===S[2]&&S[1]===S[3]?b.flyTo(Z.center,ce):b.fitBounds(co(S),50,fe))}function Ln(S){t(0,I=_==="always"),t(14,P=void 0),t(55,Z=void 0),t(15,te=-1),q(S[1].toFixed(6)+", "+Pf(S[0],[-180,180],!0).toFixed(6),!1)}function Tr(S){if(!P)return;let ve=S.key==="ArrowDown"?1:S.key==="ArrowUp"?-1:0;ve&&(te===(G?0:-1)&&ve===-1&&t(15,te=P.length),t(15,te+=ve),te>=P.length&&t(15,te=-1),te<0&&G&&t(15,te=0),S.preventDefault())}function lr(S=!0){if(t(18,Ge=void 0),W){if(yt&&clearTimeout(yt),w.length<M)return;const ve=w;yt=window.setTimeout(()=>{ar(ve).catch(Ye=>t(18,Ge=Ye))},S?v:0)}else t(14,P=void 0),t(18,Ge=void 0)}function qt(S){t(55,Z=S),t(1,w=S.place_name),t(15,te=-1)}const Cn=()=>ge.focus();function Br(S){Pe[S?"unshift":"push"](()=>{ge=S,t(17,ge)})}function Tn(){w=this.value,t(1,w),t(13,xe),t(27,c)}const Ir=()=>t(13,xe=!0),Bn=()=>t(13,xe=!1),Fr=()=>lr(),In=()=>{t(1,w=""),ge.focus()},Rr=()=>t(0,I=!I),d=()=>t(18,Ge=void 0),j=S=>t(15,te=S),Dr=S=>qt(S),zr=()=>{G||t(15,te=-1)},Nr=()=>{};return r.$$set=S=>{"class"in S&&t(2,a=S.class),"apiKey"in S&&t(25,l=S.apiKey),"bbox"in S&&t(26,s=S.bbox),"clearButtonTitle"in S&&t(3,f=S.clearButtonTitle),"clearOnBlur"in S&&t(27,c=S.clearOnBlur),"collapsed"in S&&t(4,m=S.collapsed),"country"in S&&t(28,g=S.country),"debounceSearch"in S&&t(29,v=S.debounceSearch),"enableReverse"in S&&t(5,_=S.enableReverse),"errorMessage"in S&&t(6,T=S.errorMessage),"filter"in S&&t(30,L=S.filter),"flyTo"in S&&t(31,B=S.flyTo),"fuzzyMatch"in S&&t(32,u=S.fuzzyMatch),"language"in S&&t(33,y=S.language),"limit"in S&&t(34,h=S.limit),"mapController"in S&&t(35,b=S.mapController),"minLength"in S&&t(36,M=S.minLength),"noResultsMessage"in S&&t(7,k=S.noResultsMessage),"placeholder"in S&&t(8,A=S.placeholder),"proximity"in S&&t(37,E=S.proximity),"reverseActive"in S&&t(0,I=S.reverseActive),"reverseButtonTitle"in S&&t(9,p=S.reverseButtonTitle),"searchValue"in S&&t(1,w=S.searchValue),"showFullGeometry"in S&&t(38,U=S.showFullGeometry),"showPlaceType"in S&&t(10,F=S.showPlaceType),"showResultsWhileTyping"in S&&t(39,W=S.showResultsWhileTyping),"selectFirst"in S&&t(11,G=S.selectFirst),"flyToSelected"in S&&t(40,$=S.flyToSelected),"markerOnSelected"in S&&t(41,ee=S.markerOnSelected),"types"in S&&t(42,ye=S.types),"excludeTypes"in S&&t(43,he=S.excludeTypes),"zoom"in S&&t(44,ce=S.zoom),"maxZoom"in S&&t(45,fe=S.maxZoom),"apiUrl"in S&&t(46,Fe=S.apiUrl),"fetchParameters"in S&&t(47,pe=S.fetchParameters),"iconsBaseUrl"in S&&t(12,Ue=S.iconsBaseUrl),"adjustUrlQuery"in S&&t(48,be=S.adjustUrlQuery),"$$scope"in S&&t(58,o=S.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&134225920&&setTimeout(()=>{t(16,Wt=xe),c&&!xe&&t(1,w="")}),r.$$.dirty[0]&16386|r.$$.dirty[1]&32&&w.length<M&&(t(55,Z=void 0),t(14,P=void 0),t(18,Ge=void 0),t(54,H=P)),r.$$.dirty[1]&16777344&&U&&Z&&!Z.address&&Z.geometry.type==="Point"&&Z.place_type[0]!=="reverse"&&ar(Z.id,{byId:!0}).catch(S=>t(18,Ge=S)),r.$$.dirty[1]&50356241&&(b&&Z&&Z.id!==Gt&&B&&(!Z.bbox||Z.bbox[0]===Z.bbox[2]&&Z.bbox[1]===Z.bbox[3]?b.flyTo(Z.center,Z.id.startsWith("poi.")||Z.id.startsWith("address.")?fe:ce):b.fitBounds(co(Z.bbox),50,fe),t(14,P=void 0),t(54,H=void 0),t(15,te=-1)),t(56,Gt=Z==null?void 0:Z.id)),r.$$.dirty[0]&18432&&G&&P!=null&&P.length&&t(15,te=0),r.$$.dirty[0]&2050&&(G||t(15,te=-1)),r.$$.dirty[0]&16384|r.$$.dirty[1]&8388608&&H!==P&&t(54,H=void 0),r.$$.dirty[0]&81921|r.$$.dirty[1]&8388624&&b&&b.setEventHandler(S=>{switch(S.type){case"mapClick":I&&Ln(S.coordinates);break;case"markerClick":{const ve=P==null?void 0:P.find(Ye=>Ye.id===S.id);ve&&qt(ve)}break;case"markerMouseEnter":H&&t(15,te=Wt?(P==null?void 0:P.findIndex(ve=>ve.id===S.id))??-1:-1);break;case"markerMouseLeave":H&&t(15,te=-1);break}}),r.$$.dirty[0]&49152&&t(57,n=P==null?void 0:P[te]),r.$$.dirty[1]&67133969&&b&&n&&B&&$&&b.flyTo(n.center,n.id.startsWith("poi.")||n.id.startsWith("address.")?fe:ce),r.$$.dirty[1]&1040&&(ee||b==null||b.setMarkers(void 0,void 0)),r.$$.dirty[1]&75498512&&b&&ee&&!H&&(b.setMarkers(n?[n]:void 0,void 0),b.setSelectedMarker(n?0:-1)),r.$$.dirty[1]&25165840&&b&&b.setMarkers(H,Z),r.$$.dirty[0]&32768|r.$$.dirty[1]&8388624&&H&&b&&b.setSelectedMarker(te),r.$$.dirty[0]&2|r.$$.dirty[1]&16&&b){const S=jt(w);b.setReverseMarker(S?[S.decimalLongitude,S.decimalLatitude]:void 0)}r.$$.dirty[1]&67108864&&rt("select",n),r.$$.dirty[1]&16777216&&rt("pick",Z),r.$$.dirty[0]&81920&&rt("optionsVisibilityChange",Wt&&!!P),r.$$.dirty[0]&16384&&rt("featuresListed",P),r.$$.dirty[1]&8388608&&rt("featuresMarked",H),r.$$.dirty[0]&1&&rt("reverseToggle",I),r.$$.dirty[0]&2&&rt("queryChange",w),r.$$.dirty[0]&1|r.$$.dirty[1]&16&&b&&b.indicateReverse(I)},[I,w,a,f,m,_,T,k,A,p,F,G,Ue,xe,P,te,Wt,ge,Ge,mt,On,Lr,Tr,lr,qt,l,s,c,g,v,L,B,u,y,h,b,M,E,U,W,$,ee,ye,he,ce,fe,Fe,pe,be,Se,R,q,ae,Ze,H,Z,Gt,n,o,i,Cn,Br,Tn,Ir,Bn,Fr,In,Rr,d,j,Dr,zr,Nr]}class Bf extends _e{constructor(e){super(),we(this,e,Tf,Cf,de,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}}function vo(r){let e,t,n;return t=new Bf({props:{mapController:r[0],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=ie("div"),x(t.$$.fragment),this.h()},l(i){e=oe(i,"DIV",{class:!0});var o=le(e);X(t.$$.fragment,o),o.forEach(O),this.h()},h(){C(e,"class","svelte-ixhnie")},m(i,o){N(i,e,o),Y(t,e,null),n=!0},p(i,o){const a={};o&1&&(a.mapController=i[0]),t.$set(a)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){z(t.$$.fragment,i),n=!1},d(i){i&&O(e),V(t)}}}function If(r){let e,t,n=r[0]&&vo(r);return{c(){n&&n.c(),e=ze()},l(i){n&&n.l(i),e=ze()},m(i,o){n&&n.m(i,o),N(i,e,o),t=!0},p(i,[o]){i[0]?n?(n.p(i,o),o&1&&D(n,1)):(n=vo(i),n.c(),D(n,1),n.m(e.parentNode,e)):n&&(Je(),z(n,1,1,()=>{n=null}),Ke())},i(i){t||(D(n),t=!0)},o(i){z(n),t=!1},d(i){i&&O(e),n&&n.d(i)}}}function Ff(r,e,t){let{map:n}=e,i;return js(()=>{t(0,i=Ys(n,rr))}),r.$$set=o=>{"map"in o&&t(1,n=o.map)},[i,n]}class Rf extends _e{constructor(e){super(),we(this,e,Ff,If,de,{map:1})}}var po=Object.prototype.toString,al=function(e){var t=po.call(e),n=t==="[object Arguments]";return n||(n=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&po.call(e.callee)==="[object Function]"),n},Dn,bo;function Df(){if(bo)return Dn;bo=1;var r;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=al,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),a=i.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=function(g){var v=g.constructor;return v&&v.prototype===g},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},c=function(){if(typeof window>"u")return!1;for(var g in window)try{if(!f["$"+g]&&e.call(window,g)&&window[g]!==null&&typeof window[g]=="object")try{s(window[g])}catch{return!0}}catch{return!0}return!1}(),m=function(g){if(typeof window>"u"||!c)return s(g);try{return s(g)}catch{return!1}};r=function(v){var _=v!==null&&typeof v=="object",T=t.call(v)==="[object Function]",L=n(v),B=_&&t.call(v)==="[object String]",u=[];if(!_&&!T&&!L)throw new TypeError("Object.keys called on a non-object");var y=a&&T;if(B&&v.length>0&&!e.call(v,0))for(var h=0;h<v.length;++h)u.push(String(h));if(L&&v.length>0)for(var b=0;b<v.length;++b)u.push(String(b));else for(var M in v)!(y&&M==="prototype")&&e.call(v,M)&&u.push(String(M));if(o)for(var k=m(v),A=0;A<l.length;++A)!(k&&l[A]==="constructor")&&e.call(v,l[A])&&u.push(l[A]);return u}}return Dn=r,Dn}var zf=Array.prototype.slice,Nf=al,_o=Object.keys,Hr=_o?function(e){return _o(e)}:Df(),wo=Object.keys;Hr.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(n){return Nf(n)?wo(zf.call(n)):wo(n)})}else Object.keys=Hr;return Object.keys||Hr};var Ti=Hr,Uf=Error,Wf=EvalError,Gf=RangeError,jf=ReferenceError,ll=SyntaxError,kt=TypeError,qf=URIError,wn=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0},So=typeof Symbol<"u"&&Symbol,Hf=wn,Bi=function(){return typeof So!="function"||typeof Symbol!="function"||typeof So("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Hf()},zn={__proto__:null,foo:{}},Zf=Object,xf=function(){return{__proto__:zn}.foo===zn.foo&&!(zn instanceof Zf)},Xf="Function.prototype.bind called on incompatible ",Yf=Object.prototype.toString,Vf=Math.max,Jf="[object Function]",Mo=function(e,t){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<t.length;o+=1)n[o+e.length]=t[o];return n},Kf=function(e,t){for(var n=[],i=t||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},Qf=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t},$f=function(e){var t=this;if(typeof t!="function"||Yf.apply(t)!==Jf)throw new TypeError(Xf+t);for(var n=Kf(arguments,1),i,o=function(){if(this instanceof i){var c=t.apply(this,Mo(n,arguments));return Object(c)===c?c:this}return t.apply(e,Mo(n,arguments))},a=Vf(0,t.length-n.length),l=[],s=0;s<a;s++)l[s]="$"+s;if(i=Function("binder","return function ("+Qf(l,",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var f=function(){};f.prototype=t.prototype,i.prototype=new f,f.prototype=null}return i},eu=$f,Ii=Function.prototype.bind||eu,tu=Function.prototype.call,ru=Object.prototype.hasOwnProperty,nu=Ii,sl=nu.call(tu,ru),ne,iu=Uf,ou=Wf,au=Gf,lu=jf,Qt=ll,Kt=kt,su=qf,fl=Function,Nn=function(r){try{return fl('"use strict"; return ('+r+").constructor;")()}catch{}},Ct=Object.getOwnPropertyDescriptor;if(Ct)try{Ct({},"")}catch{Ct=null}var Un=function(){throw new Kt},fu=Ct?function(){try{return arguments.callee,Un}catch{try{return Ct(arguments,"callee").get}catch{return Un}}}():Un,xt=Bi(),uu=xf(),Le=Object.getPrototypeOf||(uu?function(r){return r.__proto__}:null),Vt={},cu=typeof Uint8Array>"u"||!Le?ne:Le(Uint8Array),Tt={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ne:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ne:ArrayBuffer,"%ArrayIteratorPrototype%":xt&&Le?Le([][Symbol.iterator]()):ne,"%AsyncFromSyncIteratorPrototype%":ne,"%AsyncFunction%":Vt,"%AsyncGenerator%":Vt,"%AsyncGeneratorFunction%":Vt,"%AsyncIteratorPrototype%":Vt,"%Atomics%":typeof Atomics>"u"?ne:Atomics,"%BigInt%":typeof BigInt>"u"?ne:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ne:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ne:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ne:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":iu,"%eval%":eval,"%EvalError%":ou,"%Float32Array%":typeof Float32Array>"u"?ne:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ne:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ne:FinalizationRegistry,"%Function%":fl,"%GeneratorFunction%":Vt,"%Int8Array%":typeof Int8Array>"u"?ne:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ne:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ne:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":xt&&Le?Le(Le([][Symbol.iterator]())):ne,"%JSON%":typeof JSON=="object"?JSON:ne,"%Map%":typeof Map>"u"?ne:Map,"%MapIteratorPrototype%":typeof Map>"u"||!xt||!Le?ne:Le(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ne:Promise,"%Proxy%":typeof Proxy>"u"?ne:Proxy,"%RangeError%":au,"%ReferenceError%":lu,"%Reflect%":typeof Reflect>"u"?ne:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ne:Set,"%SetIteratorPrototype%":typeof Set>"u"||!xt||!Le?ne:Le(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ne:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":xt&&Le?Le(""[Symbol.iterator]()):ne,"%Symbol%":xt?Symbol:ne,"%SyntaxError%":Qt,"%ThrowTypeError%":fu,"%TypedArray%":cu,"%TypeError%":Kt,"%Uint8Array%":typeof Uint8Array>"u"?ne:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ne:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ne:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ne:Uint32Array,"%URIError%":su,"%WeakMap%":typeof WeakMap>"u"?ne:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ne:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ne:WeakSet};if(Le)try{null.error}catch(r){var mu=Le(Le(r));Tt["%Error.prototype%"]=mu}var yu=function r(e){var t;if(e==="%AsyncFunction%")t=Nn("async function () {}");else if(e==="%GeneratorFunction%")t=Nn("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Nn("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&Le&&(t=Le(i.prototype))}return Tt[e]=t,t},Po={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Mr=Ii,tn=sl,hu=Mr.call(Function.call,Array.prototype.concat),gu=Mr.call(Function.apply,Array.prototype.splice),ko=Mr.call(Function.call,String.prototype.replace),rn=Mr.call(Function.call,String.prototype.slice),vu=Mr.call(Function.call,RegExp.prototype.exec),du=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,pu=/\\(\\)?/g,bu=function(e){var t=rn(e,0,1),n=rn(e,-1);if(t==="%"&&n!=="%")throw new Qt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Qt("invalid intrinsic syntax, expected opening `%`");var i=[];return ko(e,du,function(o,a,l,s){i[i.length]=l?ko(s,pu,"$1"):a||o}),i},_u=function(e,t){var n=e,i;if(tn(Po,n)&&(i=Po[n],n="%"+i[0]+"%"),tn(Tt,n)){var o=Tt[n];if(o===Vt&&(o=yu(n)),typeof o>"u"&&!t)throw new Kt("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Qt("intrinsic "+e+" does not exist!")},ut=function(e,t){if(typeof e!="string"||e.length===0)throw new Kt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Kt('"allowMissing" argument must be a boolean');if(vu(/^%?[^%]*%?$/,e)===null)throw new Qt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=bu(e),i=n.length>0?n[0]:"",o=_u("%"+i+"%",t),a=o.name,l=o.value,s=!1,f=o.alias;f&&(i=f[0],gu(n,hu([0,1],f)));for(var c=1,m=!0;c<n.length;c+=1){var g=n[c],v=rn(g,0,1),_=rn(g,-1);if((v==='"'||v==="'"||v==="`"||_==='"'||_==="'"||_==="`")&&v!==_)throw new Qt("property names with quotes must have matching quotes");if((g==="constructor"||!m)&&(s=!0),i+="."+g,a="%"+i+"%",tn(Tt,a))l=Tt[a];else if(l!=null){if(!(g in l)){if(!t)throw new Kt("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ct&&c+1>=n.length){var T=Ct(l,g);m=!!T,m&&"get"in T&&!("originalValue"in T.get)?l=T.get:l=l[g]}else m=tn(l,g),l=l[g];m&&!s&&(Tt[a]=l)}}return l},wu=ut,Zr=wu("%Object.defineProperty%",!0)||!1;if(Zr)try{Zr({},"a",{value:1})}catch{Zr=!1}var Fi=Zr,Su=ut,xr=Su("%Object.getOwnPropertyDescriptor%",!0);if(xr)try{xr([],"length")}catch{xr=null}var Ri=xr,Eo=Fi,Mu=ll,Xt=kt,Ao=Ri,Di=function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Xt("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Xt("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Xt("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Xt("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Xt("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Xt("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,s=!!Ao&&Ao(e,t);if(Eo)Eo(e,t,{configurable:a===null&&s?s.configurable:!a,enumerable:i===null&&s?s.enumerable:!i,value:n,writable:o===null&&s?s.writable:!o});else if(l||!i&&!o&&!a)e[t]=n;else throw new Mu("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ni=Fi,ul=function(){return!!ni};ul.hasArrayLengthDefineBug=function(){if(!ni)return null;try{return ni([],"length",{value:1}).length!==1}catch{return!0}};var zi=ul,Pu=Ti,ku=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Eu=Object.prototype.toString,Au=Array.prototype.concat,Oo=Di,Ou=function(r){return typeof r=="function"&&Eu.call(r)==="[object Function]"},cl=zi(),Lu=function(r,e,t,n){if(e in r){if(n===!0){if(r[e]===t)return}else if(!Ou(n)||!n())return}cl?Oo(r,e,t,!0):Oo(r,e,t)},ml=function(r,e){var t=arguments.length>2?arguments[2]:{},n=Pu(e);ku&&(n=Au.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)Lu(r,n[i],e[n[i]],t[n[i]])};ml.supportsDescriptors=!!cl;var Nt=ml,yl={exports:{}},Cu=ut,Lo=Di,Tu=zi(),Co=Ri,To=kt,Bu=Cu("%Math.floor%"),Iu=function(e,t){if(typeof e!="function")throw new To("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||Bu(t)!==t)throw new To("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in e&&Co){var a=Co(e,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(o=!1)}return(i||o||!n)&&(Tu?Lo(e,"length",t,!0,!0):Lo(e,"length",t)),e};(function(r){var e=Ii,t=ut,n=Iu,i=kt,o=t("%Function.prototype.apply%"),a=t("%Function.prototype.call%"),l=t("%Reflect.apply%",!0)||e.call(a,o),s=Fi,f=t("%Math.max%");r.exports=function(g){if(typeof g!="function")throw new i("a function is required");var v=l(e,a,arguments);return n(v,1+f(0,g.length-(arguments.length-1)),!0)};var c=function(){return l(e,o,arguments)};s?s(r.exports,"apply",{value:c}):r.exports.apply=c})(yl);var nr=yl.exports,hl=ut,gl=nr,Fu=gl(hl("String.prototype.indexOf")),tt=function(e,t){var n=hl(e,!!t);return typeof n=="function"&&Fu(e,".prototype.")>-1?gl(n):n},Ru=Ti,vl=wn(),dl=tt,Bo=Object,Du=dl("Array.prototype.push"),Io=dl("Object.prototype.propertyIsEnumerable"),zu=vl?Object.getOwnPropertySymbols:null,pl=function(e,t){if(e==null)throw new TypeError("target must be an object");var n=Bo(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var o=Bo(arguments[i]),a=Ru(o),l=vl&&(Object.getOwnPropertySymbols||zu);if(l)for(var s=l(o),f=0;f<s.length;++f){var c=s[f];Io(o,c)&&Du(a,c)}for(var m=0;m<a.length;++m){var g=a[m];if(Io(o,g)){var v=o[g];n[g]=v}}}return n},Wn=pl,Nu=function(){if(!Object.assign)return!1;for(var r="abcdefghijklmnopqrst",e=r.split(""),t={},n=0;n<e.length;++n)t[e[n]]=e[n];var i=Object.assign({},t),o="";for(var a in i)o+=a;return r!==o},Uu=function(){if(!Object.assign||!Object.preventExtensions)return!1;var r=Object.preventExtensions({1:2});try{Object.assign(r,"xy")}catch{return r[1]==="y"}return!1},bl=function(){return!Object.assign||Nu()||Uu()?Wn:Object.assign},Wu=Nt,Gu=bl,ju=function(){var e=Gu();return Wu(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},qu=Nt,Hu=nr,Zu=pl,_l=bl,xu=ju,Xu=Hu.apply(_l()),wl=function(e,t){return Xu(Object,arguments)};qu(wl,{getPolyfill:_l,implementation:Zu,shim:xu});var Yu=wl,_r=function(){return typeof(function(){}).name=="string"},dr=Object.getOwnPropertyDescriptor;if(dr)try{dr([],"length")}catch{dr=null}_r.functionsHaveConfigurableNames=function(){if(!_r()||!dr)return!1;var e=dr(function(){},"name");return!!e&&!!e.configurable};var Vu=Function.prototype.bind;_r.boundFunctionsHaveNames=function(){return _r()&&typeof Vu=="function"&&(function(){}).bind().name!==""};var Ju=_r,Fo=Di,Ku=zi(),Qu=Ju.functionsHaveConfigurableNames(),$u=kt,ec=function(e,t){if(typeof e!="function")throw new $u("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||Qu)&&(Ku?Fo(e,"name",t,!0,!0):Fo(e,"name",t)),e},tc=ec,rc=kt,nc=Object,Sl=tc(function(){if(this==null||this!==nc(this))throw new rc("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0),ic=Sl,oc=Nt.supportsDescriptors,ac=Object.getOwnPropertyDescriptor,Ml=function(){if(oc&&/a/mig.flags==="gim"){var e=ac(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var t="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){t+="d"}}),Object.defineProperty(n,"sticky",{get:function(){t+="y"}}),t==="dy")return e.get}}return ic},lc=Nt.supportsDescriptors,sc=Ml,fc=Object.getOwnPropertyDescriptor,uc=Object.defineProperty,cc=TypeError,Ro=Object.getPrototypeOf,mc=/a/,yc=function(){if(!lc||!Ro)throw new cc("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=sc(),t=Ro(mc),n=fc(t,"flags");return(!n||n.get!==e)&&uc(t,"flags",{configurable:!0,enumerable:!1,get:e}),e},hc=Nt,gc=nr,vc=Sl,Pl=Ml,dc=yc,kl=gc(Pl());hc(kl,{getPolyfill:Pl,implementation:vc,shim:dc});var pc=kl,Xr={exports:{}},bc=wn,Ut=function(){return bc()&&!!Symbol.toStringTag},_c=Ut(),wc=tt,ii=wc("Object.prototype.toString"),Sn=function(e){return _c&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:ii(e)==="[object Arguments]"},El=function(e){return Sn(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&ii(e)!=="[object Array]"&&ii(e.callee)==="[object Function]"},Sc=function(){return Sn(arguments)}();Sn.isLegacyArguments=El;var Al=Sc?Sn:El;const Mc={},Pc=Object.freeze(Object.defineProperty({__proto__:null,default:Mc},Symbol.toStringTag,{value:"Module"})),kc=Ci(Pc);var Ni=typeof Map=="function"&&Map.prototype,Gn=Object.getOwnPropertyDescriptor&&Ni?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,nn=Ni&&Gn&&typeof Gn.get=="function"?Gn.get:null,Do=Ni&&Map.prototype.forEach,Ui=typeof Set=="function"&&Set.prototype,jn=Object.getOwnPropertyDescriptor&&Ui?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,on=Ui&&jn&&typeof jn.get=="function"?jn.get:null,zo=Ui&&Set.prototype.forEach,Ec=typeof WeakMap=="function"&&WeakMap.prototype,pr=Ec?WeakMap.prototype.has:null,Ac=typeof WeakSet=="function"&&WeakSet.prototype,br=Ac?WeakSet.prototype.has:null,Oc=typeof WeakRef=="function"&&WeakRef.prototype,No=Oc?WeakRef.prototype.deref:null,Lc=Boolean.prototype.valueOf,Cc=Object.prototype.toString,Tc=Function.prototype.toString,Bc=String.prototype.match,Wi=String.prototype.slice,Pt=String.prototype.replace,Ic=String.prototype.toUpperCase,Uo=String.prototype.toLowerCase,Ol=RegExp.prototype.test,Wo=Array.prototype.concat,lt=Array.prototype.join,Fc=Array.prototype.slice,Go=Math.floor,oi=typeof BigInt=="function"?BigInt.prototype.valueOf:null,qn=Object.getOwnPropertySymbols,ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,$t=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ne=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===$t||!0)?Symbol.toStringTag:null,Ll=Object.prototype.propertyIsEnumerable,jo=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function qo(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Ol.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-Go(-r):Go(r);if(n!==r){var i=String(n),o=Wi.call(e,i.length+1);return Pt.call(i,t,"$&_")+"."+Pt.call(Pt.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Pt.call(e,t,"$&_")}var li=kc,Ho=li.custom,Zo=Tl(Ho)?Ho:null,Rc=function r(e,t,n,i){var o=t||{};if(Mt(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Mt(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Mt(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Mt(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Mt(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Il(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var s=String(e);return l?qo(e,s):s}if(typeof e=="bigint"){var f=String(e)+"n";return l?qo(e,f):f}var c=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof e=="object")return si(e)?"[Array]":"[Object]";var m=$c(o,n);if(typeof i>"u")i=[];else if(Bl(i,e)>=0)return"[Circular]";function g(U,F,W){if(F&&(i=Fc.call(i),i.push(F)),W){var G={depth:o.depth};return Mt(o,"quoteStyle")&&(G.quoteStyle=o.quoteStyle),r(U,G,n+1,i)}return r(U,o,n+1,i)}if(typeof e=="function"&&!xo(e)){var v=Hc(e),_=Wr(e,g);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(_.length>0?" { "+lt.call(_,", ")+" }":"")}if(Tl(e)){var T=$t?Pt.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ai.call(e);return typeof e=="object"&&!$t?mr(T):T}if(Jc(e)){for(var L="<"+Uo.call(String(e.nodeName)),B=e.attributes||[],u=0;u<B.length;u++)L+=" "+B[u].name+"="+Cl(Dc(B[u].value),"double",o);return L+=">",e.childNodes&&e.childNodes.length&&(L+="..."),L+="</"+Uo.call(String(e.nodeName))+">",L}if(si(e)){if(e.length===0)return"[]";var y=Wr(e,g);return m&&!Qc(y)?"["+fi(y,m)+"]":"[ "+lt.call(y,", ")+" ]"}if(Nc(e)){var h=Wr(e,g);return!("cause"in Error.prototype)&&"cause"in e&&!Ll.call(e,"cause")?"{ ["+String(e)+"] "+lt.call(Wo.call("[cause]: "+g(e.cause),h),", ")+" }":h.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+lt.call(h,", ")+" }"}if(typeof e=="object"&&a){if(Zo&&typeof e[Zo]=="function"&&li)return li(e,{depth:c-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Zc(e)){var b=[];return Do&&Do.call(e,function(U,F){b.push(g(F,e,!0)+" => "+g(U,e))}),Xo("Map",nn.call(e),b,m)}if(Yc(e)){var M=[];return zo&&zo.call(e,function(U){M.push(g(U,e))}),Xo("Set",on.call(e),M,m)}if(xc(e))return Hn("WeakMap");if(Vc(e))return Hn("WeakSet");if(Xc(e))return Hn("WeakRef");if(Wc(e))return mr(g(Number(e)));if(jc(e))return mr(g(oi.call(e)));if(Gc(e))return mr(Lc.call(e));if(Uc(e))return mr(g(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===_n)return"{ [object globalThis] }";if(!zc(e)&&!xo(e)){var k=Wr(e,g),A=jo?jo(e)===Object.prototype:e instanceof Object||e.constructor===Object,E=e instanceof Object?"":"null prototype",I=!A&&Ne&&Object(e)===e&&Ne in e?Wi.call(Et(e),8,-1):E?"Object":"",p=A||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",w=p+(I||E?"["+lt.call(Wo.call([],I||[],E||[]),": ")+"] ":"");return k.length===0?w+"{}":m?w+"{"+fi(k,m)+"}":w+"{ "+lt.call(k,", ")+" }"}return String(e)};function Cl(r,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+r+n}function Dc(r){return Pt.call(String(r),/"/g,"&quot;")}function si(r){return Et(r)==="[object Array]"&&(!Ne||!(typeof r=="object"&&Ne in r))}function zc(r){return Et(r)==="[object Date]"&&(!Ne||!(typeof r=="object"&&Ne in r))}function xo(r){return Et(r)==="[object RegExp]"&&(!Ne||!(typeof r=="object"&&Ne in r))}function Nc(r){return Et(r)==="[object Error]"&&(!Ne||!(typeof r=="object"&&Ne in r))}function Uc(r){return Et(r)==="[object String]"&&(!Ne||!(typeof r=="object"&&Ne in r))}function Wc(r){return Et(r)==="[object Number]"&&(!Ne||!(typeof r=="object"&&Ne in r))}function Gc(r){return Et(r)==="[object Boolean]"&&(!Ne||!(typeof r=="object"&&Ne in r))}function Tl(r){if($t)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!ai)return!1;try{return ai.call(r),!0}catch{}return!1}function jc(r){if(!r||typeof r!="object"||!oi)return!1;try{return oi.call(r),!0}catch{}return!1}var qc=Object.prototype.hasOwnProperty||function(r){return r in this};function Mt(r,e){return qc.call(r,e)}function Et(r){return Cc.call(r)}function Hc(r){if(r.name)return r.name;var e=Bc.call(Tc.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function Bl(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function Zc(r){if(!nn||!r||typeof r!="object")return!1;try{nn.call(r);try{on.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function xc(r){if(!pr||!r||typeof r!="object")return!1;try{pr.call(r,pr);try{br.call(r,br)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function Xc(r){if(!No||!r||typeof r!="object")return!1;try{return No.call(r),!0}catch{}return!1}function Yc(r){if(!on||!r||typeof r!="object")return!1;try{on.call(r);try{nn.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function Vc(r){if(!br||!r||typeof r!="object")return!1;try{br.call(r,br);try{pr.call(r,pr)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function Jc(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function Il(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return Il(Wi.call(r,0,e.maxStringLength),e)+n}var i=Pt.call(Pt.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Kc);return Cl(i,"single",e)}function Kc(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+Ic.call(e.toString(16))}function mr(r){return"Object("+r+")"}function Hn(r){return r+" { ? }"}function Xo(r,e,t,n){var i=n?fi(t,n):lt.call(t,", ");return r+" ("+e+") {"+i+"}"}function Qc(r){for(var e=0;e<r.length;e++)if(Bl(r[e],`
`)>=0)return!1;return!0}function $c(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=lt.call(Array(r.indent+1)," ");else return null;return{base:t,prev:lt.call(Array(e+1),t)}}function fi(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+lt.call(r,","+t)+`
`+e.prev}function Wr(r,e){var t=si(r),n=[];if(t){n.length=r.length;for(var i=0;i<r.length;i++)n[i]=Mt(r,i)?e(r[i],r):""}var o=typeof qn=="function"?qn(r):[],a;if($t){a={};for(var l=0;l<o.length;l++)a["$"+o[l]]=o[l]}for(var s in r)Mt(r,s)&&(t&&String(Number(s))===s&&s<r.length||$t&&a["$"+s]instanceof Symbol||(Ol.call(/[^\w$]/,s)?n.push(e(s,r)+": "+e(r[s],r)):n.push(s+": "+e(r[s],r))));if(typeof qn=="function")for(var f=0;f<o.length;f++)Ll.call(r,o[f])&&n.push("["+e(o[f])+"]: "+e(r[o[f]],r));return n}var Fl=ut,ir=tt,em=Rc,tm=kt,Gr=Fl("%WeakMap%",!0),jr=Fl("%Map%",!0),rm=ir("WeakMap.prototype.get",!0),nm=ir("WeakMap.prototype.set",!0),im=ir("WeakMap.prototype.has",!0),om=ir("Map.prototype.get",!0),am=ir("Map.prototype.set",!0),lm=ir("Map.prototype.has",!0),Gi=function(r,e){for(var t=r,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=r.next,r.next=n,n},sm=function(r,e){var t=Gi(r,e);return t&&t.value},fm=function(r,e,t){var n=Gi(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},um=function(r,e){return!!Gi(r,e)},Rl=function(){var e,t,n,i={assert:function(o){if(!i.has(o))throw new tm("Side channel does not contain "+em(o))},get:function(o){if(Gr&&o&&(typeof o=="object"||typeof o=="function")){if(e)return rm(e,o)}else if(jr){if(t)return om(t,o)}else if(n)return sm(n,o)},has:function(o){if(Gr&&o&&(typeof o=="object"||typeof o=="function")){if(e)return im(e,o)}else if(jr){if(t)return lm(t,o)}else if(n)return um(n,o);return!1},set:function(o,a){Gr&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Gr),nm(e,o,a)):jr?(t||(t=new jr),am(t,o,a)):(n||(n={key:{},next:null}),fm(n,o,a))}};return i},cm=sl,yr=Rl(),ht=kt,ji={assert:function(r,e){if(!r||typeof r!="object"&&typeof r!="function")throw new ht("`O` is not an object");if(typeof e!="string")throw new ht("`slot` must be a string");if(yr.assert(r),!ji.has(r,e))throw new ht("`"+e+"` is not present on `O`")},get:function(r,e){if(!r||typeof r!="object"&&typeof r!="function")throw new ht("`O` is not an object");if(typeof e!="string")throw new ht("`slot` must be a string");var t=yr.get(r);return t&&t["$"+e]},has:function(r,e){if(!r||typeof r!="object"&&typeof r!="function")throw new ht("`O` is not an object");if(typeof e!="string")throw new ht("`slot` must be a string");var t=yr.get(r);return!!t&&cm(t,"$"+e)},set:function(r,e,t){if(!r||typeof r!="object"&&typeof r!="function")throw new ht("`O` is not an object");if(typeof e!="string")throw new ht("`slot` must be a string");var n=yr.get(r);n||(n={},yr.set(r,n)),n["$"+e]=t}};Object.freeze&&Object.freeze(ji);var mm=ji,hr=mm,ym=SyntaxError,Yo=typeof StopIteration=="object"?StopIteration:null,hm=function(e){if(!Yo)throw new ym("this environment lacks StopIteration");hr.set(e,"[[Done]]",!1);var t={next:function(){var i=hr.get(this,"[[Iterator]]"),o=hr.get(i,"[[Done]]");try{return{done:o,value:o?void 0:i.next()}}catch(a){if(hr.set(i,"[[Done]]",!0),a!==Yo)throw a;return{done:!0,value:void 0}}}};return hr.set(t,"[[Iterator]]",e),t},gm={}.toString,Dl=Array.isArray||function(r){return gm.call(r)=="[object Array]"},vm=String.prototype.valueOf,dm=function(e){try{return vm.call(e),!0}catch{return!1}},pm=Object.prototype.toString,bm="[object String]",_m=Ut(),zl=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:_m?dm(e):pm.call(e)===bm},qi=typeof Map=="function"&&Map.prototype?Map:null,wm=typeof Set=="function"&&Set.prototype?Set:null,an;qi||(an=function(e){return!1});var Nl=qi?Map.prototype.has:null,Vo=wm?Set.prototype.has:null;!an&&!Nl&&(an=function(e){return!1});var Ul=an||function(e){if(!e||typeof e!="object")return!1;try{if(Nl.call(e),Vo)try{Vo.call(e)}catch{return!0}return e instanceof qi}catch{}return!1},Sm=typeof Map=="function"&&Map.prototype?Map:null,Hi=typeof Set=="function"&&Set.prototype?Set:null,ln;Hi||(ln=function(e){return!1});var Jo=Sm?Map.prototype.has:null,Wl=Hi?Set.prototype.has:null;!ln&&!Wl&&(ln=function(e){return!1});var Gl=ln||function(e){if(!e||typeof e!="object")return!1;try{if(Wl.call(e),Jo)try{Jo.call(e)}catch{return!0}return e instanceof Hi}catch{}return!1},Ko=Al,Qo=hm;if(Bi()||wn()){var Zn=Symbol.iterator;Xr.exports=function(e){if(e!=null&&typeof e[Zn]<"u")return e[Zn]();if(Ko(e))return Array.prototype[Zn].call(e)}}else{var Mm=Dl,Pm=zl,$o=ut,km=$o("%Map%",!0),Em=$o("%Set%",!0),nt=tt,ea=nt("Array.prototype.push"),ta=nt("String.prototype.charCodeAt"),Am=nt("String.prototype.slice"),Om=function(e,t){var n=e.length;if(t+1>=n)return t+1;var i=ta(e,t);if(i<55296||i>56319)return t+1;var o=ta(e,t+1);return o<56320||o>57343?t+1:t+2},xn=function(e){var t=0;return{next:function(){var i=t>=e.length,o;return i||(o=e[t],t+=1),{done:i,value:o}}}},ra=function(e,t){if(Mm(e)||Ko(e))return xn(e);if(Pm(e)){var n=0;return{next:function(){var o=Om(e,n),a=Am(e,n,o);return n=o,{done:o>e.length,value:a}}}}if(t&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!km&&!Em)Xr.exports=function(e){if(e!=null)return ra(e,!0)};else{var Lm=Ul,Cm=Gl,na=nt("Map.prototype.forEach",!0),ia=nt("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var oa=nt("Map.prototype.iterator",!0),aa=nt("Set.prototype.iterator",!0);var la=nt("Map.prototype.@@iterator",!0)||nt("Map.prototype._es6-shim iterator_",!0),sa=nt("Set.prototype.@@iterator",!0)||nt("Set.prototype._es6-shim iterator_",!0),Tm=function(e){if(Lm(e)){if(oa)return Qo(oa(e));if(la)return la(e);if(na){var t=[];return na(e,function(i,o){ea(t,[o,i])}),xn(t)}}if(Cm(e)){if(aa)return Qo(aa(e));if(sa)return sa(e);if(ia){var n=[];return ia(e,function(i){ea(n,i)}),xn(n)}}};Xr.exports=function(e){return Tm(e)||ra(e)}}}var Bm=Xr.exports,fa=function(r){return r!==r},jl=function(e,t){return e===0&&t===0?1/e===1/t:!!(e===t||fa(e)&&fa(t))},Im=jl,ql=function(){return typeof Object.is=="function"?Object.is:Im},Fm=ql,Rm=Nt,Dm=function(){var e=Fm();return Rm(Object,{is:e},{is:function(){return Object.is!==e}}),e},zm=Nt,Nm=nr,Um=jl,Hl=ql,Wm=Dm,Zl=Nm(Hl(),Object);zm(Zl,{getPolyfill:Hl,implementation:Um,shim:Wm});var Gm=Zl,jm=nr,xl=tt,qm=ut,ui=qm("%ArrayBuffer%",!0),Yr=xl("ArrayBuffer.prototype.byteLength",!0),Hm=xl("Object.prototype.toString"),ua=!!ui&&!Yr&&new ui(0).slice,ca=!!ua&&jm(ua),Xl=Yr||ca?function(e){if(!e||typeof e!="object")return!1;try{return Yr?Yr(e):ca(e,0),!0}catch{return!1}}:ui?function(e){return Hm(e)==="[object ArrayBuffer]"}:function(e){return!1},Zm=Date.prototype.getDay,xm=function(e){try{return Zm.call(e),!0}catch{return!1}},Xm=Object.prototype.toString,Ym="[object Date]",Vm=Ut(),Jm=function(e){return typeof e!="object"||e===null?!1:Vm?xm(e):Xm.call(e)===Ym},ci=tt,Yl=Ut(),Vl,Jl,mi,yi;if(Yl){Vl=ci("Object.prototype.hasOwnProperty"),Jl=ci("RegExp.prototype.exec"),mi={};var Xn=function(){throw mi};yi={toString:Xn,valueOf:Xn},typeof Symbol.toPrimitive=="symbol"&&(yi[Symbol.toPrimitive]=Xn)}var Km=ci("Object.prototype.toString"),Qm=Object.getOwnPropertyDescriptor,$m="[object RegExp]",ey=Yl?function(e){if(!e||typeof e!="object")return!1;var t=Qm(e,"lastIndex"),n=t&&Vl(t,"value");if(!n)return!1;try{Jl(e,yi)}catch(i){return i===mi}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:Km(e)===$m},ty=tt,ma=ty("SharedArrayBuffer.prototype.byteLength",!0),ry=ma?function(e){if(!e||typeof e!="object")return!1;try{return ma(e),!0}catch{return!1}}:function(e){return!1},ny=Number.prototype.toString,iy=function(e){try{return ny.call(e),!0}catch{return!1}},oy=Object.prototype.toString,ay="[object Number]",ly=Ut(),sy=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:ly?iy(e):oy.call(e)===ay},Kl=tt,fy=Kl("Boolean.prototype.toString"),uy=Kl("Object.prototype.toString"),cy=function(e){try{return fy(e),!0}catch{return!1}},my="[object Boolean]",yy=Ut(),hy=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:yy&&Symbol.toStringTag in e?cy(e):uy(e)===my},hi={exports:{}},gy=Object.prototype.toString,vy=Bi();if(vy){var dy=Symbol.prototype.toString,py=/^Symbol\(.*\)$/,by=function(e){return typeof e.valueOf()!="symbol"?!1:py.test(dy.call(e))};hi.exports=function(e){if(typeof e=="symbol")return!0;if(gy.call(e)!=="[object Symbol]")return!1;try{return by(e)}catch{return!1}}}else hi.exports=function(e){return!1};var _y=hi.exports,gi={exports:{}},ya=typeof BigInt<"u"&&BigInt,wy=function(){return typeof ya=="function"&&typeof BigInt=="function"&&typeof ya(42)=="bigint"&&typeof BigInt(42)=="bigint"},Sy=wy();if(Sy){var My=BigInt.prototype.valueOf,Py=function(e){try{return My.call(e),!0}catch{}return!1};gi.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:Py(e)}}else gi.exports=function(e){return!1};var ky=gi.exports,Ey=zl,Ay=sy,Oy=hy,Ly=_y,Cy=ky,Ty=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(Ey(e))return"String";if(Ay(e))return"Number";if(Oy(e))return"Boolean";if(Ly(e))return"Symbol";if(Cy(e))return"BigInt"},sn=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,ha=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,fn;sn||(fn=function(e){return!1});var vi=sn?sn.prototype.has:null,Yn=ha?ha.prototype.has:null;!fn&&!vi&&(fn=function(e){return!1});var By=fn||function(e){if(!e||typeof e!="object")return!1;try{if(vi.call(e,vi),Yn)try{Yn.call(e,Yn)}catch{return!0}return e instanceof sn}catch{}return!1},di={exports:{}},Iy=ut,Ql=tt,Fy=Iy("%WeakSet%",!0),Vn=Ql("WeakSet.prototype.has",!0);if(Vn){var Jn=Ql("WeakMap.prototype.has",!0);di.exports=function(e){if(!e||typeof e!="object")return!1;try{if(Vn(e,Vn),Jn)try{Jn(e,Jn)}catch{return!0}return e instanceof Fy}catch{}return!1}}else di.exports=function(e){return!1};var Ry=di.exports,Dy=Ul,zy=Gl,Ny=By,Uy=Ry,Wy=function(e){if(e&&typeof e=="object"){if(Dy(e))return"Map";if(zy(e))return"Set";if(Ny(e))return"WeakMap";if(Uy(e))return"WeakSet"}return!1},$l=Function.prototype.toString,Jt=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,pi,Vr;if(typeof Jt=="function"&&typeof Object.defineProperty=="function")try{pi=Object.defineProperty({},"length",{get:function(){throw Vr}}),Vr={},Jt(function(){throw 42},null,pi)}catch(r){r!==Vr&&(Jt=null)}else Jt=null;var Gy=/^\s*class\b/,bi=function(e){try{var t=$l.call(e);return Gy.test(t)}catch{return!1}},Kn=function(e){try{return bi(e)?!1:($l.call(e),!0)}catch{return!1}},Jr=Object.prototype.toString,jy="[object Object]",qy="[object Function]",Hy="[object GeneratorFunction]",Zy="[object HTMLAllCollection]",xy="[object HTML document.all class]",Xy="[object HTMLCollection]",Yy=typeof Symbol=="function"&&!!Symbol.toStringTag,Vy=!(0 in[,]),_i=function(){return!1};if(typeof document=="object"){var Jy=document.all;Jr.call(Jy)===Jr.call(document.all)&&(_i=function(e){if((Vy||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=Jr.call(e);return(t===Zy||t===xy||t===Xy||t===jy)&&e("")==null}catch{}return!1})}var Ky=Jt?function(e){if(_i(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Jt(e,null,pi)}catch(t){if(t!==Vr)return!1}return!bi(e)&&Kn(e)}:function(e){if(_i(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Yy)return Kn(e);if(bi(e))return!1;var t=Jr.call(e);return t!==qy&&t!==Hy&&!/^\[object HTML/.test(t)?!1:Kn(e)},Qy=Ky,$y=Object.prototype.toString,es=Object.prototype.hasOwnProperty,eh=function(e,t,n){for(var i=0,o=e.length;i<o;i++)es.call(e,i)&&(n==null?t(e[i],i,e):t.call(n,e[i],i,e))},th=function(e,t,n){for(var i=0,o=e.length;i<o;i++)n==null?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)},rh=function(e,t,n){for(var i in e)es.call(e,i)&&(n==null?t(e[i],i,e):t.call(n,e[i],i,e))},nh=function(e,t,n){if(!Qy(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),$y.call(e)==="[object Array]"?eh(e,t,i):typeof e=="string"?th(e,t,i):rh(e,t,i)},ih=nh,oh=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],Qn=oh,ah=typeof globalThis>"u"?_n:globalThis,lh=function(){for(var e=[],t=0;t<Qn.length;t++)typeof ah[Qn[t]]=="function"&&(e[e.length]=Qn[t]);return e},un=ih,sh=lh,ga=nr,Zi=tt,Kr=Ri,fh=Zi("Object.prototype.toString"),ts=Ut(),va=typeof globalThis>"u"?_n:globalThis,wi=sh(),xi=Zi("String.prototype.slice"),$n=Object.getPrototypeOf,uh=Zi("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},cn={__proto__:null};ts&&Kr&&$n?un(wi,function(r){var e=new va[r];if(Symbol.toStringTag in e){var t=$n(e),n=Kr(t,Symbol.toStringTag);if(!n){var i=$n(t);n=Kr(i,Symbol.toStringTag)}cn["$"+r]=ga(n.get)}}):un(wi,function(r){var e=new va[r],t=e.slice||e.set;t&&(cn["$"+r]=ga(t))});var ch=function(e){var t=!1;return un(cn,function(n,i){if(!t)try{"$"+n(e)===i&&(t=xi(i,1))}catch{}}),t},mh=function(e){var t=!1;return un(cn,function(n,i){if(!t)try{n(e),t=xi(i,1)}catch{}}),t},yh=function(e){if(!e||typeof e!="object")return!1;if(!ts){var t=xi(fh(e),8,-1);return uh(wi,t)>-1?t:t!=="Object"?!1:mh(e)}return Kr?ch(e):null},hh=tt,da=hh("ArrayBuffer.prototype.byteLength",!0),gh=Xl,vh=function(e){return gh(e)?da?da(e):e.byteLength:NaN},rs=Yu,ct=tt,pa=pc,dh=ut,er=Bm,ph=Rl,ba=Gm,_a=Al,wa=Dl,Sa=Xl,Ma=Jm,Pa=ey,ka=ry,Ea=Ti,Aa=Ty,Oa=Wy,La=yh,Ca=vh,Ta=ct("SharedArrayBuffer.prototype.byteLength",!0),Ba=ct("Date.prototype.getTime"),ei=Object.getPrototypeOf,Ia=ct("Object.prototype.toString"),mn=dh("%Set%",!0),Si=ct("Map.prototype.has",!0),yn=ct("Map.prototype.get",!0),Fa=ct("Map.prototype.size",!0),hn=ct("Set.prototype.add",!0),ns=ct("Set.prototype.delete",!0),gn=ct("Set.prototype.has",!0),Qr=ct("Set.prototype.size",!0);function Ra(r,e,t,n){for(var i=er(r),o;(o=i.next())&&!o.done;)if(ot(e,o.value,t,n))return ns(r,o.value),!0;return!1}function is(r){if(typeof r>"u")return null;if(typeof r!="object")return typeof r=="symbol"?!1:typeof r=="string"||typeof r=="number"?+r==+r:!0}function bh(r,e,t,n,i,o){var a=is(t);if(a!=null)return a;var l=yn(e,a),s=rs({},i,{strict:!1});return typeof l>"u"&&!Si(e,a)||!ot(n,l,s,o)?!1:!Si(r,a)&&ot(n,l,s,o)}function _h(r,e,t){var n=is(t);return n??(gn(e,n)&&!gn(r,n))}function Da(r,e,t,n,i,o){for(var a=er(r),l,s;(l=a.next())&&!l.done;)if(s=l.value,ot(t,s,i,o)&&ot(n,yn(e,s),i,o))return ns(r,s),!0;return!1}function ot(r,e,t,n){var i=t||{};if(i.strict?ba(r,e):r===e)return!0;var o=Aa(r),a=Aa(e);if(o!==a)return!1;if(!r||!e||typeof r!="object"&&typeof e!="object")return i.strict?ba(r,e):r==e;var l=n.has(r),s=n.has(e),f;if(l&&s){if(n.get(r)===n.get(e))return!0}else f={};return l||n.set(r,f),s||n.set(e,f),Mh(r,e,i,n)}function za(r){return!r||typeof r!="object"||typeof r.length!="number"||typeof r.copy!="function"||typeof r.slice!="function"||r.length>0&&typeof r[0]!="number"?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))}function wh(r,e,t,n){if(Qr(r)!==Qr(e))return!1;for(var i=er(r),o=er(e),a,l,s;(a=i.next())&&!a.done;)if(a.value&&typeof a.value=="object")s||(s=new mn),hn(s,a.value);else if(!gn(e,a.value)){if(t.strict||!_h(r,e,a.value))return!1;s||(s=new mn),hn(s,a.value)}if(s){for(;(l=o.next())&&!l.done;)if(l.value&&typeof l.value=="object"){if(!Ra(s,l.value,t.strict,n))return!1}else if(!t.strict&&!gn(r,l.value)&&!Ra(s,l.value,t.strict,n))return!1;return Qr(s)===0}return!0}function Sh(r,e,t,n){if(Fa(r)!==Fa(e))return!1;for(var i=er(r),o=er(e),a,l,s,f,c,m;(a=i.next())&&!a.done;)if(f=a.value[0],c=a.value[1],f&&typeof f=="object")s||(s=new mn),hn(s,f);else if(m=yn(e,f),typeof m>"u"&&!Si(e,f)||!ot(c,m,t,n)){if(t.strict||!bh(r,e,f,c,t,n))return!1;s||(s=new mn),hn(s,f)}if(s){for(;(l=o.next())&&!l.done;)if(f=l.value[0],m=l.value[1],f&&typeof f=="object"){if(!Da(s,r,f,m,t,n))return!1}else if(!t.strict&&(!r.has(f)||!ot(yn(r,f),m,t,n))&&!Da(s,r,f,m,rs({},t,{strict:!1}),n))return!1;return Qr(s)===0}return!0}function Mh(r,e,t,n){var i,o;if(typeof r!=typeof e||r==null||e==null||Ia(r)!==Ia(e)||_a(r)!==_a(e))return!1;var a=wa(r),l=wa(e);if(a!==l)return!1;var s=r instanceof Error,f=e instanceof Error;if(s!==f||(s||f)&&(r.name!==e.name||r.message!==e.message))return!1;var c=Pa(r),m=Pa(e);if(c!==m||(c||m)&&(r.source!==e.source||pa(r)!==pa(e)))return!1;var g=Ma(r),v=Ma(e);if(g!==v||(g||v)&&Ba(r)!==Ba(e)||t.strict&&ei&&ei(r)!==ei(e))return!1;var _=La(r),T=La(e);if(_!==T)return!1;if(_||T){if(r.length!==e.length)return!1;for(i=0;i<r.length;i++)if(r[i]!==e[i])return!1;return!0}var L=za(r),B=za(e);if(L!==B)return!1;if(L||B){if(r.length!==e.length)return!1;for(i=0;i<r.length;i++)if(r[i]!==e[i])return!1;return!0}var u=Sa(r),y=Sa(e);if(u!==y)return!1;if(u||y)return Ca(r)!==Ca(e)?!1:typeof Uint8Array=="function"&&ot(new Uint8Array(r),new Uint8Array(e),t,n);var h=ka(r),b=ka(e);if(h!==b)return!1;if(h||b)return Ta(r)!==Ta(e)?!1:typeof Uint8Array=="function"&&ot(new Uint8Array(r),new Uint8Array(e),t,n);if(typeof r!=typeof e)return!1;var M=Ea(r),k=Ea(e);if(M.length!==k.length)return!1;for(M.sort(),k.sort(),i=M.length-1;i>=0;i--)if(M[i]!=k[i])return!1;for(i=M.length-1;i>=0;i--)if(o=M[i],!ot(r[o],e[o],t,n))return!1;var A=Oa(r),E=Oa(e);return A!==E?!1:A==="Set"||E==="Set"?wh(r,e,t,n):A==="Map"?Sh(r,e,t,n):!0}var Ph=function(e,t,n){return ot(e,t,n,ph())};const kh=nl(Ph);var Eh=Object.defineProperty,ue=(r,e)=>Eh(r,"name",{value:e,configurable:!0}),Ah=class{constructor(e){this.direction=!1,this.compareProperties=!0;var t,n,i;this.precision=10**-((t=e==null?void 0:e.precision)!=null?t:17),this.direction=(n=e==null?void 0:e.direction)!=null?n:!1,this.compareProperties=(i=e==null?void 0:e.compareProperties)!=null?i:!0}compare(e,t){if(e.type!==t.type||!vr(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates);case"Polygon":return this.comparePolygon(e,t);case"GeometryCollection":return this.compareGeometryCollection(e,t);case"Feature":return this.compareFeature(e,t);case"FeatureCollection":return this.compareFeatureCollection(e,t);default:if(e.type.startsWith("Multi")){const n=Mi(e),i=Mi(t);return n.every(o=>i.some(a=>this.compare(o,a)))}}return!1}compareCoord(e,t){return e.length===t.length&&e.every((n,i)=>Math.abs(n-t[i])<this.precision)}compareLine(e,t,n=0,i=!1){if(!vr(e,t))return!1;const o=e;let a=t;if(i&&!this.compareCoord(o[0],a[0])){const s=this.fixStartIndex(a,o);if(s)a=s;else return!1}const l=this.compareCoord(o[n],a[n]);return this.direction||l?this.comparePath(o,a):this.compareCoord(o[n],a[a.length-(1+n)])?this.comparePath(o.slice().reverse(),a):!1}fixStartIndex(e,t){let n,i=-1;for(let o=0;o<e.length;o++)if(this.compareCoord(e[o],t[0])){i=o;break}return i>=0&&(n=[].concat(e.slice(i,e.length),e.slice(1,i+1))),n}comparePath(e,t){return e.every((n,i)=>this.compareCoord(n,t[i]))}comparePolygon(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){const n=e.coordinates.slice(1,e.coordinates.length),i=t.coordinates.slice(1,t.coordinates.length);return n.every(o=>i.some(a=>this.compareLine(o,a,1,!0)))}return!1}compareGeometryCollection(e,t){return vr(e.geometries,t.geometries)&&this.compareBBox(e,t)&&e.geometries.every((n,i)=>this.compare(n,t.geometries[i]))}compareFeature(e,t){return e.id===t.id&&(this.compareProperties?kh(e.properties,t.properties):!0)&&this.compareBBox(e,t)&&this.compare(e.geometry,t.geometry)}compareFeatureCollection(e,t){return vr(e.features,t.features)&&this.compareBBox(e,t)&&e.features.every((n,i)=>this.compare(n,t.features[i]))}compareBBox(e,t){return!e.bbox&&!t.bbox||(e.bbox&&t.bbox?this.compareCoord(e.bbox,t.bbox):!1)}};ue(Ah,"GeojsonEquality");function vr(r,e){return r.coordinates?r.coordinates.length===e.coordinates.length:r.length===e.length}ue(vr,"sameLength");function Mi(r){return r.coordinates.map(e=>({type:r.type.replace("Multi",""),coordinates:e}))}ue(Mi,"explode");var qe=63710088e-1,os={centimeters:qe*100,centimetres:qe*100,degrees:360/(2*Math.PI),feet:qe*3.28084,inches:qe*39.37,kilometers:qe/1e3,kilometres:qe/1e3,meters:qe,metres:qe,miles:qe/1609.344,millimeters:qe*1e3,millimetres:qe*1e3,nauticalmiles:qe/1852,radians:1,yards:qe*1.0936},Na={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ft(r,e,t={}){const n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=r,n}ue(ft,"feature");function Oh(r,e,t={}){switch(r){case"Point":return vt(e).geometry;case"LineString":return pt(e).geometry;case"Polygon":return Xi(e).geometry;case"MultiPoint":return ls(e).geometry;case"MultiLineString":return as(e).geometry;case"MultiPolygon":return ss(e).geometry;default:throw new Error(r+" is invalid")}}ue(Oh,"geometry");function vt(r,e,t={}){if(!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vn(r[0])||!vn(r[1]))throw new Error("coordinates must contain numbers");return ft({type:"Point",coordinates:r},e,t)}ue(vt,"point");function Lh(r,e,t={}){return Mn(r.map(n=>vt(n,e)),t)}ue(Lh,"points");function Xi(r,e,t={}){for(const i of r){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}return ft({type:"Polygon",coordinates:r},e,t)}ue(Xi,"polygon");function Ch(r,e,t={}){return Mn(r.map(n=>Xi(n,e)),t)}ue(Ch,"polygons");function pt(r,e,t={}){if(r.length<2)throw new Error("coordinates must be an array of two or more positions");return ft({type:"LineString",coordinates:r},e,t)}ue(pt,"lineString");function Th(r,e,t={}){return Mn(r.map(n=>pt(n,e)),t)}ue(Th,"lineStrings");function Mn(r,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}ue(Mn,"featureCollection");function as(r,e,t={}){return ft({type:"MultiLineString",coordinates:r},e,t)}ue(as,"multiLineString");function ls(r,e,t={}){return ft({type:"MultiPoint",coordinates:r},e,t)}ue(ls,"multiPoint");function ss(r,e,t={}){return ft({type:"MultiPolygon",coordinates:r},e,t)}ue(ss,"multiPolygon");function Bh(r,e,t={}){return ft({type:"GeometryCollection",geometries:r},e,t)}ue(Bh,"geometryCollection");function Ih(r,e=0){if(e&&!(e>=0))throw new Error("precision must be a positive number");const t=Math.pow(10,e||0);return Math.round(r*t)/t}ue(Ih,"round");function fs(r,e="kilometers"){const t=os[e];if(!t)throw new Error(e+" units is invalid");return r*t}ue(fs,"radiansToLength");function Yi(r,e="kilometers"){const t=os[e];if(!t)throw new Error(e+" units is invalid");return r/t}ue(Yi,"lengthToRadians");function Fh(r,e){return us(Yi(r,e))}ue(Fh,"lengthToDegrees");function Rh(r){let e=r%360;return e<0&&(e+=360),e}ue(Rh,"bearingToAzimuth");function us(r){return r%(2*Math.PI)*180/Math.PI}ue(us,"radiansToDegrees");function Dh(r){return r%360*Math.PI/180}ue(Dh,"degreesToRadians");function zh(r,e="kilometers",t="kilometers"){if(!(r>=0))throw new Error("length must be a positive number");return fs(Yi(r,e),t)}ue(zh,"convertLength");function Nh(r,e="meters",t="kilometers"){if(!(r>=0))throw new Error("area must be a positive number");const n=Na[e];if(!n)throw new Error("invalid original units");const i=Na[t];if(!i)throw new Error("invalid final units");return r/n*i}ue(Nh,"convertArea");function vn(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}ue(vn,"isNumber");function Vi(r){return r!==null&&typeof r=="object"&&!Array.isArray(r)}ue(Vi,"isObject");function Uh(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(r.length!==4&&r.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(e=>{if(!vn(e))throw new Error("bbox must only contain numbers")})}ue(Uh,"validateBBox");function Wh(r){if(!r)throw new Error("id is required");if(["string","number"].indexOf(typeof r)===-1)throw new Error("id must be a number or a string")}ue(Wh,"validateId");var Gh=Object.defineProperty,Ie=(r,e)=>Gh(r,"name",{value:e,configurable:!0});function Pr(r,e,t){if(r!==null)for(var n,i,o,a,l,s,f,c=0,m=0,g,v=r.type,_=v==="FeatureCollection",T=v==="Feature",L=_?r.features.length:1,B=0;B<L;B++){f=_?r.features[B].geometry:T?r.geometry:r,g=f?f.type==="GeometryCollection":!1,l=g?f.geometries.length:1;for(var u=0;u<l;u++){var y=0,h=0;if(a=g?f.geometries[u]:f,a!==null){s=a.coordinates;var b=a.type;switch(c=t&&(b==="Polygon"||b==="MultiPolygon")?1:0,b){case null:break;case"Point":if(e(s,m,B,y,h)===!1)return!1;m++,y++;break;case"LineString":case"MultiPoint":for(n=0;n<s.length;n++){if(e(s[n],m,B,y,h)===!1)return!1;m++,b==="MultiPoint"&&y++}b==="LineString"&&y++;break;case"Polygon":case"MultiLineString":for(n=0;n<s.length;n++){for(i=0;i<s[n].length-c;i++){if(e(s[n][i],m,B,y,h)===!1)return!1;m++}b==="MultiLineString"&&y++,b==="Polygon"&&h++}b==="Polygon"&&y++;break;case"MultiPolygon":for(n=0;n<s.length;n++){for(h=0,i=0;i<s[n].length;i++){for(o=0;o<s[n][i].length-c;o++){if(e(s[n][i][o],m,B,y,h)===!1)return!1;m++}h++}y++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(Pr(a.geometries[n],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}Ie(Pr,"coordEach");function jh(r,e,t,n){var i=t;return Pr(r,function(o,a,l,s,f){a===0&&t===void 0?i=o:i=e(i,o,a,l,s,f)},n),i}Ie(jh,"coordReduce");function cs(r,e){var t;switch(r.type){case"FeatureCollection":for(t=0;t<r.features.length&&e(r.features[t].properties,t)!==!1;t++);break;case"Feature":e(r.properties,0);break}}Ie(cs,"propEach");function qh(r,e,t){var n=t;return cs(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}Ie(qh,"propReduce");function ms(r,e){if(r.type==="Feature")e(r,0);else if(r.type==="FeatureCollection")for(var t=0;t<r.features.length&&e(r.features[t],t)!==!1;t++);}Ie(ms,"featureEach");function Hh(r,e,t){var n=t;return ms(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}Ie(Hh,"featureReduce");function Zh(r){var e=[];return Pr(r,function(t){e.push(t)}),e}Ie(Zh,"coordAll");function Ji(r,e){var t,n,i,o,a,l,s,f,c,m,g=0,v=r.type==="FeatureCollection",_=r.type==="Feature",T=v?r.features.length:1;for(t=0;t<T;t++){for(l=v?r.features[t].geometry:_?r.geometry:r,f=v?r.features[t].properties:_?r.properties:{},c=v?r.features[t].bbox:_?r.bbox:void 0,m=v?r.features[t].id:_?r.id:void 0,s=l?l.type==="GeometryCollection":!1,a=s?l.geometries.length:1,i=0;i<a;i++){if(o=s?l.geometries[i]:l,o===null){if(e(null,g,f,c,m)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,g,f,c,m)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(e(o.geometries[n],g,f,c,m)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}g++}}Ie(Ji,"geomEach");function ys(r,e,t){var n=t;return Ji(r,function(i,o,a,l,s){o===0&&t===void 0?n=i:n=e(n,i,o,a,l,s)}),n}Ie(ys,"geomReduce");function Pn(r,e){Ji(r,function(t,n,i,o,a){var l=t===null?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return e(ft(t,i,{bbox:o,id:a}),n,0)===!1?!1:void 0}var s;switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon";break}for(var f=0;f<t.coordinates.length;f++){var c=t.coordinates[f],m={type:s,coordinates:c};if(e(ft(m,i),n,f)===!1)return!1}})}Ie(Pn,"flattenEach");function xh(r,e,t){var n=t;return Pn(r,function(i,o,a){o===0&&a===0&&t===void 0?n=i:n=e(n,i,o,a)}),n}Ie(xh,"flattenReduce");function hs(r,e){Pn(r,function(t,n,i){var o=0;if(t.geometry){var a=t.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var l,s=0,f=0,c=0;if(Pr(t,function(m,g,v,_,T){if(l===void 0||n>s||_>f||T>c){l=m,s=n,f=_,c=T,o=0;return}var L=pt([l,m],t.properties);if(e(L,n,i,T,o)===!1)return!1;o++,l=m})===!1)return!1}}})}Ie(hs,"segmentEach");function Xh(r,e,t){var n=t,i=!1;return hs(r,function(o,a,l,s,f){i===!1&&t===void 0?n=o:n=e(n,o,a,l,s,f),i=!0}),n}Ie(Xh,"segmentReduce");function gs(r,e){if(!r)throw new Error("geojson is required");Pn(r,function(t,n,i){if(t.geometry!==null){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(e(t,n,i,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<a.length;l++)if(e(pt(a[l],t.properties),n,i,l)===!1)return!1;break}}})}Ie(gs,"lineEach");function Yh(r,e,t){var n=t;return gs(r,function(i,o,a,l){o===0&&t===void 0?n=i:n=e(n,i,o,a,l)}),n}Ie(Yh,"lineReduce");function Vh(r,e){if(e=e||{},!Vi(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.segmentIndex||0,a=e.properties,l;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,l=r.features[t].geometry;break;case"Feature":a=a||r.properties,l=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=r;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var s=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=s.length+o-1),pt([s[o],s[o+1]],a,e);case"Polygon":return i<0&&(i=s.length+i),o<0&&(o=s[i].length+o-1),pt([s[i][o],s[i][o+1]],a,e);case"MultiLineString":return n<0&&(n=s.length+n),o<0&&(o=s[n].length+o-1),pt([s[n][o],s[n][o+1]],a,e);case"MultiPolygon":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i),o<0&&(o=s[n][i].length-o-1),pt([s[n][i][o],s[n][i][o+1]],a,e)}throw new Error("geojson is invalid")}Ie(Vh,"findSegment");function Jh(r,e){if(e=e||{},!Vi(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.coordIndex||0,a=e.properties,l;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,l=r.features[t].geometry;break;case"Feature":a=a||r.properties,l=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=r;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var s=l.coordinates;switch(l.type){case"Point":return vt(s,a,e);case"MultiPoint":return n<0&&(n=s.length+n),vt(s[n],a,e);case"LineString":return o<0&&(o=s.length+o),vt(s[o],a,e);case"Polygon":return i<0&&(i=s.length+i),o<0&&(o=s[i].length+o),vt(s[i][o],a,e);case"MultiLineString":return n<0&&(n=s.length+n),o<0&&(o=s[n].length+o),vt(s[n][o],a,e);case"MultiPolygon":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i),o<0&&(o=s[n][i].length-o),vt(s[n][i][o],a,e)}throw new Error("geojson is invalid")}Ie(Jh,"findPoint");var Kh=Object.defineProperty,kn=(r,e)=>Kh(r,"name",{value:e,configurable:!0});function vs(r){return ys(r,(e,t)=>e+ds(t),0)}kn(vs,"area");function ds(r){let e=0,t;switch(r.type){case"Polygon":return Pi(r.coordinates);case"MultiPolygon":for(t=0;t<r.coordinates.length;t++)e+=Pi(r.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}kn(ds,"calculateArea");function Pi(r){let e=0;if(r&&r.length>0){e+=Math.abs(ki(r[0]));for(let t=1;t<r.length;t++)e-=Math.abs(ki(r[t]))}return e}kn(Pi,"polygonArea");var Qh=qe*qe/2,ti=Math.PI/180;function ki(r){const e=r.length;if(e<=2)return 0;let t=0,n=0;for(;n<e;){const i=r[n],o=r[n+1===e?0:n+1],a=r[n+2>=e?(n+2)%e:n+2],l=i[0]*ti,s=o[1]*ti,f=a[0]*ti;t+=(f-l)*Math.sin(s),n++}return t*Qh}kn(ki,"ringArea");var Ua=vs,Re=63710088e-1,Ki={centimeters:Re*100,centimetres:Re*100,degrees:Re/111325,feet:Re*3.28084,inches:Re*39.37,kilometers:Re/1e3,kilometres:Re/1e3,meters:Re,metres:Re,miles:Re/1609.344,millimeters:Re*1e3,millimetres:Re*1e3,nauticalmiles:Re/1852,radians:1,yards:Re*1.0936},$h={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Re,yards:1.0936133},Ei={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function et(r,e,t){t===void 0&&(t={});var n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=r,n}function eg(r,e,t){switch(r){case"Point":return Xe(e).geometry;case"LineString":return Qe(e).geometry;case"Polygon":return Qi(e).geometry;case"MultiPoint":return bs(e).geometry;case"MultiLineString":return ps(e).geometry;case"MultiPolygon":return _s(e).geometry;default:throw new Error(r+" is invalid")}}function Xe(r,e,t){if(t===void 0&&(t={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!dn(r[0])||!dn(r[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:r};return et(n,e,t)}function tg(r,e,t){return t===void 0&&(t={}),It(r.map(function(n){return Xe(n,e)}),t)}function Qi(r,e,t){t===void 0&&(t={});for(var n=0,i=r;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:r};return et(l,e,t)}function rg(r,e,t){return t===void 0&&(t={}),It(r.map(function(n){return Qi(n,e)}),t)}function Qe(r,e,t){if(t===void 0&&(t={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:r};return et(n,e,t)}function ng(r,e,t){return t===void 0&&(t={}),It(r.map(function(n){return Qe(n,e)}),t)}function It(r,e){e===void 0&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}function ps(r,e,t){t===void 0&&(t={});var n={type:"MultiLineString",coordinates:r};return et(n,e,t)}function bs(r,e,t){t===void 0&&(t={});var n={type:"MultiPoint",coordinates:r};return et(n,e,t)}function _s(r,e,t){t===void 0&&(t={});var n={type:"MultiPolygon",coordinates:r};return et(n,e,t)}function ig(r,e,t){t===void 0&&(t={});var n={type:"GeometryCollection",geometries:r};return et(n,e,t)}function og(r,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(r*t)/t}function $i(r,e){e===void 0&&(e="kilometers");var t=Ki[e];if(!t)throw new Error(e+" units is invalid");return r*t}function En(r,e){e===void 0&&(e="kilometers");var t=Ki[e];if(!t)throw new Error(e+" units is invalid");return r/t}function ag(r,e){return wr(En(r,e))}function lg(r){var e=r%360;return e<0&&(e+=360),e}function wr(r){var e=r%(2*Math.PI);return e*180/Math.PI}function $e(r){var e=r%360;return e*Math.PI/180}function sg(r,e,t){if(e===void 0&&(e="kilometers"),t===void 0&&(t="kilometers"),!(r>=0))throw new Error("length must be a positive number");return $i(En(r,e),t)}function fg(r,e,t){if(e===void 0&&(e="meters"),t===void 0&&(t="kilometers"),!(r>=0))throw new Error("area must be a positive number");var n=Ei[e];if(!n)throw new Error("invalid original units");var i=Ei[t];if(!i)throw new Error("invalid final units");return r/n*i}function dn(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function eo(r){return!!r&&r.constructor===Object}function ug(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(r.length!==4&&r.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(e){if(!dn(e))throw new Error("bbox must only contain numbers")})}function cg(r){if(!r)throw new Error("id is required");if(["string","number"].indexOf(typeof r)===-1)throw new Error("id must be a number or a string")}const mg=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:Ei,bearingToAzimuth:lg,convertArea:fg,convertLength:sg,degreesToRadians:$e,earthRadius:Re,factors:Ki,feature:et,featureCollection:It,geometry:eg,geometryCollection:ig,isNumber:dn,isObject:eo,lengthToDegrees:ag,lengthToRadians:En,lineString:Qe,lineStrings:ng,multiLineString:ps,multiPoint:bs,multiPolygon:_s,point:Xe,points:tg,polygon:Qi,polygons:rg,radiansToDegrees:wr,radiansToLength:$i,round:og,unitsFactors:$h,validateBBox:ug,validateId:cg},Symbol.toStringTag,{value:"Module"}));function Sr(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return r.geometry.coordinates;if(r.type==="Point")return r.coordinates}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return r;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function tr(r){if(Array.isArray(r))return r;if(r.type==="Feature"){if(r.geometry!==null)return r.geometry.coordinates}else if(r.coordinates)return r.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ws(r,e,t){if(t===void 0&&(t={}),t.final===!0)return yg(r,e);var n=Sr(r),i=Sr(e),o=$e(n[0]),a=$e(i[0]),l=$e(n[1]),s=$e(i[1]),f=Math.sin(a-o)*Math.cos(s),c=Math.cos(l)*Math.sin(s)-Math.sin(l)*Math.cos(s)*Math.cos(a-o);return wr(Math.atan2(f,c))}function yg(r,e){var t=ws(e,r);return t=(t+180)%360,t}function gr(r,e,t){t===void 0&&(t={});var n=Sr(r),i=Sr(e),o=$e(i[1]-n[1]),a=$e(i[0]-n[0]),l=$e(n[1]),s=$e(i[1]),f=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(l)*Math.cos(s);return $i(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),t.units)}function Wa(r,e,t,n){n===void 0&&(n={});var i=Sr(r),o=$e(i[0]),a=$e(i[1]),l=$e(t),s=En(e,n.units),f=Math.asin(Math.sin(a)*Math.cos(s)+Math.cos(a)*Math.sin(s)*Math.cos(l)),c=o+Math.atan2(Math.sin(l)*Math.sin(s)*Math.cos(a),Math.cos(s)-Math.sin(a)*Math.sin(f)),m=wr(c),g=wr(f);return Xe([m,g],n.properties)}function kr(r,e,t){if(r!==null)for(var n,i,o,a,l,s,f,c=0,m=0,g,v=r.type,_=v==="FeatureCollection",T=v==="Feature",L=_?r.features.length:1,B=0;B<L;B++){f=_?r.features[B].geometry:T?r.geometry:r,g=f?f.type==="GeometryCollection":!1,l=g?f.geometries.length:1;for(var u=0;u<l;u++){var y=0,h=0;if(a=g?f.geometries[u]:f,a!==null){s=a.coordinates;var b=a.type;switch(c=t&&(b==="Polygon"||b==="MultiPolygon")?1:0,b){case null:break;case"Point":if(e(s,m,B,y,h)===!1)return!1;m++,y++;break;case"LineString":case"MultiPoint":for(n=0;n<s.length;n++){if(e(s[n],m,B,y,h)===!1)return!1;m++,b==="MultiPoint"&&y++}b==="LineString"&&y++;break;case"Polygon":case"MultiLineString":for(n=0;n<s.length;n++){for(i=0;i<s[n].length-c;i++){if(e(s[n][i],m,B,y,h)===!1)return!1;m++}b==="MultiLineString"&&y++,b==="Polygon"&&h++}b==="Polygon"&&y++;break;case"MultiPolygon":for(n=0;n<s.length;n++){for(h=0,i=0;i<s[n].length;i++){for(o=0;o<s[n][i].length-c;o++){if(e(s[n][i][o],m,B,y,h)===!1)return!1;m++}h++}y++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(kr(a.geometries[n],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function hg(r,e,t,n){var i=t;return kr(r,function(o,a,l,s,f){a===0&&t===void 0?i=o:i=e(i,o,a,l,s,f)},n),i}function Ss(r,e){var t;switch(r.type){case"FeatureCollection":for(t=0;t<r.features.length&&e(r.features[t].properties,t)!==!1;t++);break;case"Feature":e(r.properties,0);break}}function gg(r,e,t){var n=t;return Ss(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}function pn(r,e){if(r.type==="Feature")e(r,0);else if(r.type==="FeatureCollection")for(var t=0;t<r.features.length&&e(r.features[t],t)!==!1;t++);}function vg(r,e,t){var n=t;return pn(r,function(i,o){o===0&&t===void 0?n=i:n=e(n,i,o)}),n}function dg(r){var e=[];return kr(r,function(t){e.push(t)}),e}function to(r,e){var t,n,i,o,a,l,s,f,c,m,g=0,v=r.type==="FeatureCollection",_=r.type==="Feature",T=v?r.features.length:1;for(t=0;t<T;t++){for(l=v?r.features[t].geometry:_?r.geometry:r,f=v?r.features[t].properties:_?r.properties:{},c=v?r.features[t].bbox:_?r.bbox:void 0,m=v?r.features[t].id:_?r.id:void 0,s=l?l.type==="GeometryCollection":!1,a=s?l.geometries.length:1,i=0;i<a;i++){if(o=s?l.geometries[i]:l,o===null){if(e(null,g,f,c,m)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,g,f,c,m)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(e(o.geometries[n],g,f,c,m)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}g++}}function pg(r,e,t){var n=t;return to(r,function(i,o,a,l,s){o===0&&t===void 0?n=i:n=e(n,i,o,a,l,s)}),n}function or(r,e){to(r,function(t,n,i,o,a){var l=t===null?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return e(et(t,i,{bbox:o,id:a}),n,0)===!1?!1:void 0}var s;switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon";break}for(var f=0;f<t.coordinates.length;f++){var c=t.coordinates[f],m={type:s,coordinates:c};if(e(et(m,i),n,f)===!1)return!1}})}function bg(r,e,t){var n=t;return or(r,function(i,o,a){o===0&&a===0&&t===void 0?n=i:n=e(n,i,o,a)}),n}function Ms(r,e){or(r,function(t,n,i){var o=0;if(t.geometry){var a=t.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var l,s=0,f=0,c=0;if(kr(t,function(m,g,v,_,T){if(l===void 0||n>s||_>f||T>c){l=m,s=n,f=_,c=T,o=0;return}var L=Qe([l,m],t.properties);if(e(L,n,i,T,o)===!1)return!1;o++,l=m})===!1)return!1}}})}function _g(r,e,t){var n=t,i=!1;return Ms(r,function(o,a,l,s,f){i===!1&&t===void 0?n=o:n=e(n,o,a,l,s,f),i=!0}),n}function Ps(r,e){if(!r)throw new Error("geojson is required");or(r,function(t,n,i){if(t.geometry!==null){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(e(t,n,i,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<a.length;l++)if(e(Qe(a[l],t.properties),n,i,l)===!1)return!1;break}}})}function wg(r,e,t){var n=t;return Ps(r,function(i,o,a,l){o===0&&t===void 0?n=i:n=e(n,i,o,a,l)}),n}function Sg(r,e){if(e=e||{},!eo(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.segmentIndex||0,a=e.properties,l;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,l=r.features[t].geometry;break;case"Feature":a=a||r.properties,l=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=r;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var s=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=s.length+o-1),Qe([s[o],s[o+1]],a,e);case"Polygon":return i<0&&(i=s.length+i),o<0&&(o=s[i].length+o-1),Qe([s[i][o],s[i][o+1]],a,e);case"MultiLineString":return n<0&&(n=s.length+n),o<0&&(o=s[n].length+o-1),Qe([s[n][o],s[n][o+1]],a,e);case"MultiPolygon":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i),o<0&&(o=s[n][i].length-o-1),Qe([s[n][i][o],s[n][i][o+1]],a,e)}throw new Error("geojson is invalid")}function Mg(r,e){if(e=e||{},!eo(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,i=e.geometryIndex||0,o=e.coordIndex||0,a=e.properties,l;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),a=a||r.features[t].properties,l=r.features[t].geometry;break;case"Feature":a=a||r.properties,l=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=r;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var s=l.coordinates;switch(l.type){case"Point":return Xe(s,a,e);case"MultiPoint":return n<0&&(n=s.length+n),Xe(s[n],a,e);case"LineString":return o<0&&(o=s.length+o),Xe(s[o],a,e);case"Polygon":return i<0&&(i=s.length+i),o<0&&(o=s[i].length+o),Xe(s[i][o],a,e);case"MultiLineString":return n<0&&(n=s.length+n),o<0&&(o=s[n].length+o),Xe(s[n][o],a,e);case"MultiPolygon":return n<0&&(n=s.length+n),i<0&&(i=s[n].length+i),o<0&&(o=s[n][i].length-o),Xe(s[n][i][o],a,e)}throw new Error("geojson is invalid")}const Pg=Object.freeze(Object.defineProperty({__proto__:null,coordAll:dg,coordEach:kr,coordReduce:hg,featureEach:pn,featureReduce:vg,findPoint:Mg,findSegment:Sg,flattenEach:or,flattenReduce:bg,geomEach:to,geomReduce:pg,lineEach:Ps,lineReduce:wg,propEach:Ss,propReduce:gg,segmentEach:Ms,segmentReduce:_g},Symbol.toStringTag,{value:"Module"}));function Ga(r){if(!r)throw new Error("geojson is required");var e=[];return or(r,function(t){kg(t,e)}),It(e)}function kg(r,e){var t=[],n=r.geometry;if(n!==null){switch(n.type){case"Polygon":t=tr(n);break;case"LineString":t=[tr(n)]}t.forEach(function(i){var o=Eg(i,r.properties);o.forEach(function(a){a.id=e.length,e.push(a)})})}}function Eg(r,e){var t=[];return r.reduce(function(n,i){var o=Qe([n,i],e);return o.bbox=Ag(n,i),t.push(o),i}),t}function Ag(r,e){var t=r[0],n=r[1],i=e[0],o=e[1],a=t<i?t:i,l=n<o?n:o,s=t>i?t:i,f=n>o?n:o;return[a,l,s,f]}var ro={exports:{}},ks={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(_n,function(){function t(u,y,h,b,M){(function k(A,E,I,p,w){for(;p>I;){if(p-I>600){var U=p-I+1,F=E-I+1,W=Math.log(U),G=.5*Math.exp(2*W/3),$=.5*Math.sqrt(W*G*(U-G)/U)*(F-U/2<0?-1:1),ee=Math.max(I,Math.floor(E-F*G/U+$)),ye=Math.min(p,Math.floor(E+(U-F)*G/U+$));k(A,E,ee,ye,w)}var he=A[E],ce=I,fe=p;for(n(A,I,E),w(A[p],he)>0&&n(A,I,p);ce<fe;){for(n(A,ce,fe),ce++,fe--;w(A[ce],he)<0;)ce++;for(;w(A[fe],he)>0;)fe--}w(A[I],he)===0?n(A,I,fe):n(A,++fe,p),fe<=E&&(I=fe+1),E<=fe&&(p=fe-1)}})(u,y,h||0,b||u.length-1,M||i)}function n(u,y,h){var b=u[y];u[y]=u[h],u[h]=b}function i(u,y){return u<y?-1:u>y?1:0}var o=function(u){u===void 0&&(u=9),this._maxEntries=Math.max(4,u),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(u,y,h){if(!h)return y.indexOf(u);for(var b=0;b<y.length;b++)if(h(u,y[b]))return b;return-1}function l(u,y){s(u,0,u.children.length,y,u)}function s(u,y,h,b,M){M||(M=L(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var k=y;k<h;k++){var A=u.children[k];f(M,u.leaf?b(A):A)}return M}function f(u,y){return u.minX=Math.min(u.minX,y.minX),u.minY=Math.min(u.minY,y.minY),u.maxX=Math.max(u.maxX,y.maxX),u.maxY=Math.max(u.maxY,y.maxY),u}function c(u,y){return u.minX-y.minX}function m(u,y){return u.minY-y.minY}function g(u){return(u.maxX-u.minX)*(u.maxY-u.minY)}function v(u){return u.maxX-u.minX+(u.maxY-u.minY)}function _(u,y){return u.minX<=y.minX&&u.minY<=y.minY&&y.maxX<=u.maxX&&y.maxY<=u.maxY}function T(u,y){return y.minX<=u.maxX&&y.minY<=u.maxY&&y.maxX>=u.minX&&y.maxY>=u.minY}function L(u){return{children:u,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function B(u,y,h,b,M){for(var k=[y,h];k.length;)if(!((h=k.pop())-(y=k.pop())<=b)){var A=y+Math.ceil((h-y)/b/2)*b;t(u,A,y,h,M),k.push(y,A,A,h)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(u){var y=this.data,h=[];if(!T(u,y))return h;for(var b=this.toBBox,M=[];y;){for(var k=0;k<y.children.length;k++){var A=y.children[k],E=y.leaf?b(A):A;T(u,E)&&(y.leaf?h.push(A):_(u,E)?this._all(A,h):M.push(A))}y=M.pop()}return h},o.prototype.collides=function(u){var y=this.data;if(!T(u,y))return!1;for(var h=[];y;){for(var b=0;b<y.children.length;b++){var M=y.children[b],k=y.leaf?this.toBBox(M):M;if(T(u,k)){if(y.leaf||_(u,k))return!0;h.push(M)}}y=h.pop()}return!1},o.prototype.load=function(u){if(!u||!u.length)return this;if(u.length<this._minEntries){for(var y=0;y<u.length;y++)this.insert(u[y]);return this}var h=this._build(u.slice(),0,u.length-1,0);if(this.data.children.length)if(this.data.height===h.height)this._splitRoot(this.data,h);else{if(this.data.height<h.height){var b=this.data;this.data=h,h=b}this._insert(h,this.data.height-h.height-1,!0)}else this.data=h;return this},o.prototype.insert=function(u){return u&&this._insert(u,this.data.height-1),this},o.prototype.clear=function(){return this.data=L([]),this},o.prototype.remove=function(u,y){if(!u)return this;for(var h,b,M,k=this.data,A=this.toBBox(u),E=[],I=[];k||E.length;){if(k||(k=E.pop(),b=E[E.length-1],h=I.pop(),M=!0),k.leaf){var p=a(u,k.children,y);if(p!==-1)return k.children.splice(p,1),E.push(k),this._condense(E),this}M||k.leaf||!_(k,A)?b?(h++,k=b.children[h],M=!1):k=null:(E.push(k),I.push(h),h=0,b=k,k=k.children[0])}return this},o.prototype.toBBox=function(u){return u},o.prototype.compareMinX=function(u,y){return u.minX-y.minX},o.prototype.compareMinY=function(u,y){return u.minY-y.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(u){return this.data=u,this},o.prototype._all=function(u,y){for(var h=[];u;)u.leaf?y.push.apply(y,u.children):h.push.apply(h,u.children),u=h.pop();return y},o.prototype._build=function(u,y,h,b){var M,k=h-y+1,A=this._maxEntries;if(k<=A)return l(M=L(u.slice(y,h+1)),this.toBBox),M;b||(b=Math.ceil(Math.log(k)/Math.log(A)),A=Math.ceil(k/Math.pow(A,b-1))),(M=L([])).leaf=!1,M.height=b;var E=Math.ceil(k/A),I=E*Math.ceil(Math.sqrt(A));B(u,y,h,I,this.compareMinX);for(var p=y;p<=h;p+=I){var w=Math.min(p+I-1,h);B(u,p,w,E,this.compareMinY);for(var U=p;U<=w;U+=E){var F=Math.min(U+E-1,w);M.children.push(this._build(u,U,F,b-1))}}return l(M,this.toBBox),M},o.prototype._chooseSubtree=function(u,y,h,b){for(;b.push(y),!y.leaf&&b.length-1!==h;){for(var M=1/0,k=1/0,A=void 0,E=0;E<y.children.length;E++){var I=y.children[E],p=g(I),w=(U=u,F=I,(Math.max(F.maxX,U.maxX)-Math.min(F.minX,U.minX))*(Math.max(F.maxY,U.maxY)-Math.min(F.minY,U.minY))-p);w<k?(k=w,M=p<M?p:M,A=I):w===k&&p<M&&(M=p,A=I)}y=A||y.children[0]}var U,F;return y},o.prototype._insert=function(u,y,h){var b=h?u:this.toBBox(u),M=[],k=this._chooseSubtree(b,this.data,y,M);for(k.children.push(u),f(k,b);y>=0&&M[y].children.length>this._maxEntries;)this._split(M,y),y--;this._adjustParentBBoxes(b,M,y)},o.prototype._split=function(u,y){var h=u[y],b=h.children.length,M=this._minEntries;this._chooseSplitAxis(h,M,b);var k=this._chooseSplitIndex(h,M,b),A=L(h.children.splice(k,h.children.length-k));A.height=h.height,A.leaf=h.leaf,l(h,this.toBBox),l(A,this.toBBox),y?u[y-1].children.push(A):this._splitRoot(h,A)},o.prototype._splitRoot=function(u,y){this.data=L([u,y]),this.data.height=u.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(u,y,h){for(var b,M,k,A,E,I,p,w=1/0,U=1/0,F=y;F<=h-y;F++){var W=s(u,0,F,this.toBBox),G=s(u,F,h,this.toBBox),$=(M=W,k=G,A=void 0,E=void 0,I=void 0,p=void 0,A=Math.max(M.minX,k.minX),E=Math.max(M.minY,k.minY),I=Math.min(M.maxX,k.maxX),p=Math.min(M.maxY,k.maxY),Math.max(0,I-A)*Math.max(0,p-E)),ee=g(W)+g(G);$<w?(w=$,b=F,U=ee<U?ee:U):$===w&&ee<U&&(U=ee,b=F)}return b||h-y},o.prototype._chooseSplitAxis=function(u,y,h){var b=u.leaf?this.compareMinX:c,M=u.leaf?this.compareMinY:m;this._allDistMargin(u,y,h,b)<this._allDistMargin(u,y,h,M)&&u.children.sort(b)},o.prototype._allDistMargin=function(u,y,h,b){u.children.sort(b);for(var M=this.toBBox,k=s(u,0,y,M),A=s(u,h-y,h,M),E=v(k)+v(A),I=y;I<h-y;I++){var p=u.children[I];f(k,u.leaf?M(p):p),E+=v(k)}for(var w=h-y-1;w>=y;w--){var U=u.children[w];f(A,u.leaf?M(U):U),E+=v(A)}return E},o.prototype._adjustParentBBoxes=function(u,y,h){for(var b=h;b>=0;b--)f(y[b],u)},o.prototype._condense=function(u){for(var y=u.length-1,h=void 0;y>=0;y--)u[y].children.length===0?y>0?(h=u[y-1].children).splice(h.indexOf(u[y]),1):this.clear():l(u[y],this.toBBox)},o})})(ks);var Og=ks.exports;const Lg=Ci(mg),Es=Ci(Pg);var no={};Object.defineProperty(no,"__esModule",{value:!0});var Cg=Es;function Ai(r){var e=[1/0,1/0,-1/0,-1/0];return Cg.coordEach(r,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}Ai.default=Ai;no.default=Ai;var at=Og,As=Lg,Os=Es,Yt=no.default,Tg=Os.featureEach;Os.coordEach;As.polygon;var ja=As.featureCollection;function Ls(r){var e=new at(r);return e.insert=function(t){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Yt(t),at.prototype.insert.call(this,t)},e.load=function(t){var n=[];return Array.isArray(t)?t.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Yt(i),n.push(i)}):Tg(t,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Yt(i),n.push(i)}),at.prototype.load.call(this,n)},e.remove=function(t,n){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Yt(t),at.prototype.remove.call(this,t,n)},e.clear=function(){return at.prototype.clear.call(this)},e.search=function(t){var n=at.prototype.search.call(this,this.toBBox(t));return ja(n)},e.collides=function(t){return at.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=at.prototype.all.call(this);return ja(t)},e.toJSON=function(){return at.prototype.toJSON.call(this)},e.fromJSON=function(t){return at.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var n;if(t.bbox)n=t.bbox;else if(Array.isArray(t)&&t.length===4)n=t;else if(Array.isArray(t)&&t.length===6)n=[t[0],t[1],t[3],t[4]];else if(t.type==="Feature")n=Yt(t);else if(t.type==="FeatureCollection")n=Yt(t);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},e}ro.exports=Ls;ro.exports.default=Ls;var Bg=ro.exports;const Ig=nl(Bg);function Fg(r,e){var t={},n=[];if(r.type==="LineString"&&(r=et(r)),e.type==="LineString"&&(e=et(e)),r.type==="Feature"&&e.type==="Feature"&&r.geometry!==null&&e.geometry!==null&&r.geometry.type==="LineString"&&e.geometry.type==="LineString"&&r.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var i=qa(r,e);return i&&n.push(i),It(n)}var o=Ig();return o.load(Ga(e)),pn(Ga(r),function(a){pn(o.search(a),function(l){var s=qa(a,l);if(s){var f=tr(s).join(",");t[f]||(t[f]=!0,n.push(s))}})}),It(n)}function qa(r,e){var t=tr(r),n=tr(e);if(t.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=t[0][0],o=t[0][1],a=t[1][0],l=t[1][1],s=n[0][0],f=n[0][1],c=n[1][0],m=n[1][1],g=(m-f)*(a-i)-(c-s)*(l-o),v=(c-s)*(o-f)-(m-f)*(i-s),_=(a-i)*(o-f)-(l-o)*(i-s);if(g===0)return null;var T=v/g,L=_/g;if(T>=0&&T<=1&&L>=0&&L<=1){var B=i+T*(a-i),u=o+T*(l-o);return Xe([B,u])}return null}function Rg(r,e,t){t===void 0&&(t={});var n=Xe([1/0,1/0],{dist:1/0}),i=0;return or(r,function(o){for(var a=tr(o),l=0;l<a.length-1;l++){var s=Xe(a[l]);s.properties.dist=gr(e,s,t);var f=Xe(a[l+1]);f.properties.dist=gr(e,f,t);var c=gr(s,f,t),m=Math.max(s.properties.dist,f.properties.dist),g=ws(s,f),v=Wa(e,m,g+90,t),_=Wa(e,m,g-90,t),T=Fg(Qe([v.geometry.coordinates,_.geometry.coordinates]),Qe([s.geometry.coordinates,f.geometry.coordinates])),L=null;T.features.length>0&&(L=T.features[0],L.properties.dist=gr(e,L,t),L.properties.location=i+gr(s,L,t)),s.properties.dist<n.properties.dist&&(n=s,n.properties.index=l,n.properties.location=i),f.properties.dist<n.properties.dist&&(n=f,n.properties.index=l+1,n.properties.location=i+c),L&&L.properties.dist<n.properties.dist&&(n=L,n.properties.index=l),i+=c}}),n}const Dg=["==",["geometry-type"],"Polygon"],zg=["==",["geometry-type"],"LineString"],Ng=["==",["geometry-type"],"Point"];function ri(r){return{type:"Feature",properties:{},geometry:{type:"Point",coordinates:Cs(r)}}}function Cs(r){return[Math.round(r[0]*1e7)/1e7,Math.round(r[1]*1e7)/1e7]}const Ts=it({type:"FeatureCollection",features:[]}),Bs=it(0),Ug=100;class Wg{constructor(e){ke(this,"map");ke(this,"active");ke(this,"eventListenersSuccess");ke(this,"eventListenersUpdated");ke(this,"eventListenersFailure");ke(this,"points");ke(this,"cursor");ke(this,"hover");ke(this,"dragFrom");ke(this,"previousStates");ke(this,"onMouseMove",e=>{if(this.active&&!this.dragFrom)this.recalculateHovering(e);else if(this.active&&this.dragFrom){if(this.hover=="polygon"){let t=this.dragFrom[0]-e.lngLat.lng,n=this.dragFrom[1]-e.lngLat.lat;for(let i of this.points)i[0]-=t,i[1]-=n}else this.points[this.hover]=e.lngLat.toArray();this.dragFrom=e.lngLat.toArray(),this.redraw()}});ke(this,"onClick",e=>{if(this.beforeUpdate(),this.active&&this.cursor){let t=[];if(Ha(this.points).forEach((n,i)=>{t.push([i+1,Rg(n,this.cursor).properties.dist])}),t.sort((n,i)=>n[1]-i[1]),t.length>0){let n=t[0][0];this.points.splice(n,0,this.cursor.geometry.coordinates),this.hover=n}else this.points.push(this.cursor.geometry.coordinates),this.hover=this.points.length-1;this.redraw(),this.pointsUpdated()}else this.active&&typeof this.hover=="number"&&(this.points.splice(this.hover,1),this.hover=null,this.redraw(),this.pointsUpdated(),this.recalculateHovering(e))});ke(this,"onDoubleClick",e=>{this.active&&(e.preventDefault(),this.cursor=ri(e.lngLat.toArray()),this.onClick(e),this.finish())});ke(this,"onMouseDown",e=>{this.active&&!this.dragFrom&&this.hover!=null&&(e.preventDefault(),this.cursor=null,this.dragFrom=e.lngLat.toArray(),this.beforeUpdate(),this.redraw())});ke(this,"onMouseUp",()=>{this.active&&this.dragFrom&&(this.dragFrom=null,this.redraw(),this.pointsUpdated())});ke(this,"onKeypress",e=>{this.active&&(e.key=="Enter"?(e.stopPropagation(),this.finish()):e.key=="z"&&e.ctrlKey&&this.undo())});ke(this,"onKeyDown",e=>{this.active&&e.key=="Escape"&&(e.stopPropagation(),this.cancel())});this.map=e,this.active=!1,this.eventListenersSuccess=[],this.eventListenersUpdated=[],this.eventListenersFailure=[],this.points=[],this.cursor=null,this.hover=null,this.dragFrom=null,this.previousStates=[],this.map.on("mousemove",this.onMouseMove),this.map.on("click",this.onClick),this.map.on("dblclick",this.onDoubleClick),this.map.on("mousedown",this.onMouseDown),this.map.on("mouseup",this.onMouseUp),document.addEventListener("keypress",this.onKeypress),document.addEventListener("keydown",this.onKeyDown)}tearDown(){this.map.off("mousemove",this.onMouseMove),this.map.off("click",this.onClick),this.map.off("dblclick",this.onDoubleClick),this.map.off("mousedown",this.onMouseDown),this.map.off("mouseup",this.onMouseUp),document.removeEventListener("keypress",this.onKeypress),document.removeEventListener("keydown",this.onKeyDown)}finish(){let e=this.polygonFeature();if(e)for(let t of this.eventListenersSuccess)t(e);else for(let t of this.eventListenersFailure)t();this.stop()}cancel(){for(let e of this.eventListenersFailure)e();this.stop()}addEventListenerSuccess(e){this.eventListenersSuccess.push(e)}addEventListenerUpdated(e){this.eventListenersUpdated.push(e)}addEventListenerFailure(e){this.eventListenersFailure.push(e)}clearEventListeners(){this.eventListenersSuccess=[],this.eventListenersUpdated=[],this.eventListenersFailure=[]}startNew(){this.active=!0,this.map.doubleClickZoom.disable()}editExisting(e){this.active=!0,this.map.doubleClickZoom.disable(),this.points=JSON.parse(JSON.stringify(e.geometry.coordinates[0])),this.points.pop(),this.redraw()}stop(){this.map.doubleClickZoom.enable(),this.points=[],this.cursor=null,this.active=!1,this.hover=null,this.dragFrom=null,this.previousStates=[],this.redraw(),this.map.getCanvas().style.cursor="inherit"}undo(){this.dragFrom!=null||this.previousStates.length==0||(this.points=this.previousStates.pop(),this.hover=null,this.redraw())}redraw(){let e={type:"FeatureCollection",features:[]};this.points.forEach((i,o)=>{let a=ri(i);a.properties.hover=this.hover==o,a.properties.idx=o,e.features.push(a)}),e.features=e.features.concat(Ha(this.points));let t=this.polygonFeature();t&&(t.properties.hover=this.hover=="polygon",e.features.push(t)),Ts.set(e);let n="crosshair";this.hover!=null&&(n=this.dragFrom?"grabbing":"pointer"),this.map.getCanvas().style.cursor=n,Bs.set(this.previousStates.length)}pointsUpdated(){let e=this.polygonFeature();if(e)for(let t of this.eventListenersUpdated)t(e)}recalculateHovering(e){this.cursor=null,this.hover=null;for(let t of this.map.queryRenderedFeatures(e.point,{layers:["edit-polygon-fill","edit-polygon-vertices"]}))if(t.geometry.type=="Polygon"){this.hover="polygon";break}else if(t.geometry.type=="Point"&&Object.hasOwn(t.properties,"idx")){this.hover=t.properties.idx;break}this.hover==null&&(this.cursor=ri(e.lngLat.toArray())),this.redraw()}polygonFeature(){if(this.points.length<3)return null;let e=this.points.map(Cs),t=[JSON.parse(JSON.stringify(e))];return t[0].push(JSON.parse(JSON.stringify(t[0][0]))),{type:"Feature",geometry:{type:"Polygon",coordinates:t},properties:{}}}beforeUpdate(){this.previousStates.push(JSON.parse(JSON.stringify(this.points))),this.previousStates.length>Ug&&this.previousStates.shift()}}function Ha(r){let e=[];for(let t=0;t<r.length-1;t++)e.push({type:"Feature",geometry:{type:"LineString",coordinates:[r[t],r[t+1]]},properties:{}});return r.length>=3&&e.push({type:"Feature",geometry:{type:"LineString",coordinates:[r[r.length-1],r[0]]},properties:{}}),e}let Gg=Date.now();function Er(r){return`${r}-${Gg++}`}const io=Symbol.for("svelte-maplibre");function Ar(){return qs(io)}function jg(r){let e=new WeakMap;return t=>{var a;let n=e.get(t.originalEvent);if(n!==void 0)return n;let o=(a=t.target.queryRenderedFeatures(t.point).find(l=>{var s;return(s=r.get(l.layer.id))==null?void 0:s.interactive}))==null?void 0:a.layer.id;return e.set(t.originalEvent,o),o}}function qg(){let r=new Map;return rl(io,{map:it(null),source:Rn(null),layer:Rn(null),popupTarget:Rn(null),cluster:it(),loadedImages:it(new Set),minzoom:it(0),maxzoom:it(24),layerEvent:it(null),layerInfo:r,eventTopMost:jg(r)})}function Za(r){return{subscribe:r.subscribe}}function Is({key:r,setPopupTarget:e=!1,setCluster:t=!1,setMouseEvent:n=!1}){let i=Ar(),o=it(null),a=Za(o),l={...i,[r]:Za(o)};if(e&&(l.popupTarget=a),n){let s=it(null);l.layerEvent=s,i.layerEvent=s}return t&&(l.cluster=it()),rl(io,l),{...i,self:o}}function Hg(){return Is({key:"source",setCluster:!0})}function Zg(r=!0){return Is({key:"layer",setPopupTarget:r,setMouseEvent:r})}function xa(r){let e;return t=>{if(t)for(let n in t){let i=e==null?void 0:e[n],o=t[n];i!==o&&r(n,o,i)}else if(e)for(let n in e)r(n,void 0,e[n]);e=t}}function xg(r,...e){let t=[r];for(let n of e)if(n)Array.isArray(n)&&n[0]===r?t.push(...n.slice(1)):t.push(n);else continue;if(t.length!==1)return t.length===2?t[1]:t}function Xg(r){return r===!0?["has","point_count"]:r===!1?["!",["has","point_count"]]:void 0}var bn=Yg;function Yg(r){var e,t,n;if(r){if(Array.isArray(r)){for(e=[],t=r.length,n=0;n<t;n++){var i=r[n];i!=null&&e.push(i)}return e}if(typeof r=="object"){e={};var o=Object.keys(r);for(t=o.length,n=0;n<t;n++){var a=o[n],l=r[a];l!=null&&(e[a]=l)}return e}}}function Xa(r){let e=r[0],t,n,i=Ya(r);return{c(){i.c(),t=ze()},l(o){i.l(o),t=ze()},m(o,a){i.m(o,a),N(o,t,a),n=!0},p(o,a){a[0]&1&&de(e,e=o[0])?(Je(),z(i,1,1,me),Ke(),i=Ya(o),i.c(),D(i,1),i.m(t.parentNode,t)):i.p(o,a)},i(o){n||(D(i),n=!0)},o(o){z(i),n=!1},d(o){o&&O(t),i.d(o)}}}function Ya(r){let e;const t=r[36].default,n=Ft(t,r,r[35],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o[1]&16)&&Rt(n,t,i,i[35],e?zt(t,i[35],o,null):Dt(i[35]),null)},i(i){e||(D(n,i),e=!0)},o(i){z(n,i),e=!1},d(i){n&&n.d(i)}}}function Vg(r){let e,t,n=r[0]&&Xa(r);return{c(){n&&n.c(),e=ze()},l(i){n&&n.l(i),e=ze()},m(i,o){n&&n.m(i,o),N(i,e,o),t=!0},p(i,o){i[0]?n?(n.p(i,o),o[0]&1&&D(n,1)):(n=Xa(i),n.c(),D(n,1),n.m(e.parentNode,e)):n&&(Je(),z(n,1,1,()=>{n=null}),Ke())},i(i){t||(D(n),t=!0)},o(i){z(n),t=!1},d(i){i&&O(e),n&&n.d(i)}}}function Jg(r,e,t){let n,i,o,a,l,s,f,c,m,g,v,_,{$$slots:T={},$$scope:L}=e,{id:B=Er("layer")}=e,{source:u=void 0}=e,{sourceLayer:y=void 0}=e,{beforeId:h=void 0}=e,{beforeLayerType:b=void 0}=e,{type:M}=e,{paint:k=void 0}=e,{layout:A=void 0}=e,{filter:E=void 0}=e,{applyToClusters:I=void 0}=e,{minzoom:p=void 0}=e,{maxzoom:w=void 0}=e,{manageHoverState:U=!1}=e,{hovered:F=null}=e,{interactive:W=!0}=e,{hoverCursor:G=void 0}=e,{eventsIfTopMost:$=!1}=e;const ee=Li(),{map:ye,source:he,self:ce,minzoom:fe,maxzoom:Fe,eventTopMost:pe,layerInfo:Ue}=Zg();Ce(r,ye,P=>t(31,m=P)),Ce(r,he,P=>t(32,g=P)),Ce(r,ce,P=>t(0,c=P)),Ce(r,fe,P=>t(34,_=P)),Ce(r,Fe,P=>t(33,v=P)),St(()=>{c&&m&&(Ue.delete(c),m==null||m.removeLayer(c))});let be;function Se(P){var ge,te;if(!W||!c||!m||$&&pe(P)!==c)return;let H=P.features??[],Z=(te=(ge=H[0])==null?void 0:ge.properties)==null?void 0:te.cluster_id,We={event:P,map:m,clusterId:Z,layer:c,source:l,features:H};ee(P.type,We)}function R(P){var ge,te;if(!W||!c||!m||$&&pe(P)!==c)return;G&&(m.getCanvas().style.cursor=G);let H=P.features??[];t(6,F=H[0]??null);let Z=(te=(ge=H[0])==null?void 0:ge.properties)==null?void 0:te.cluster_id;ee("mouseenter",{event:P,map:m,clusterId:Z,layer:c,source:l,features:H})}function q(P){var ge,te,Ge;if(!W||!m)return;if($&&pe(P)!==c){t(6,F=null),U&&be!==void 0&&(m==null||m.setFeatureState({source:l,sourceLayer:y,id:be},{hover:!1}),be=void 0);return}m.getCanvas().style.cursor=G;let H=P.features??[],Z=(te=(ge=H[0])==null?void 0:ge.properties)==null?void 0:te.cluster_id,We=(Ge=H[0])==null?void 0:Ge.id;We!==be&&(U&&(be!==void 0&&(m==null||m.setFeatureState({source:l,id:be,sourceLayer:y},{hover:!1})),m==null||m.setFeatureState({source:l,id:We,sourceLayer:y},{hover:!0})),be=We,t(6,F=H[0]??null)),ee("mousemove",{event:P,map:m,clusterId:Z,layer:c,source:l,features:H})}function ae(P){if(!(!W||!c||!m)){if(G&&(m.getCanvas().style.cursor=""),t(6,F=null),U&&be!==void 0){const H={source:l,id:be,sourceLayer:y};m==null||m.setFeatureState(H,{hover:!1}),be=void 0}ee("mouseleave",{map:m,layer:c,source:l})}}let Ze=!0;function xe(P){m&&(m.off("click",P,Se),m.off("dblclick",P,Se),m.off("contextmenu",P,Se),m.off("mouseenter",P,R),m.off("mousemove",P,q),m.off("mouseleave",P,ae))}return St(()=>{m&&c&&xe(c)}),r.$$set=P=>{"id"in P&&t(7,B=P.id),"source"in P&&t(8,u=P.source),"sourceLayer"in P&&t(9,y=P.sourceLayer),"beforeId"in P&&t(10,h=P.beforeId),"beforeLayerType"in P&&t(11,b=P.beforeLayerType),"type"in P&&t(12,M=P.type),"paint"in P&&t(13,k=P.paint),"layout"in P&&t(14,A=P.layout),"filter"in P&&t(15,E=P.filter),"applyToClusters"in P&&t(16,I=P.applyToClusters),"minzoom"in P&&t(17,p=P.minzoom),"maxzoom"in P&&t(18,w=P.maxzoom),"manageHoverState"in P&&t(19,U=P.manageHoverState),"hovered"in P&&t(6,F=P.hovered),"interactive"in P&&t(20,W=P.interactive),"hoverCursor"in P&&t(21,G=P.hoverCursor),"eventsIfTopMost"in P&&t(22,$=P.eventsIfTopMost),"$$scope"in P&&t(35,L=P.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&65536&&t(30,n=Xg(I)),r.$$.dirty[0]&1073774592&&t(24,i=xg("all",n,E)),r.$$.dirty[0]&131072|r.$$.dirty[1]&8&&t(26,o=p??_),r.$$.dirty[0]&262144|r.$$.dirty[1]&4&&t(25,a=w??v),r.$$.dirty[0]&256|r.$$.dirty[1]&2&&t(29,l=u||g),r.$$.dirty[0]&654343809|r.$$.dirty[1]&1&&m&&c!==B&&l){c&&(xe(c),Ue.delete(c));let P=h;if(!h&&b){let H=m.getStyle().layers,Z=typeof b=="function"?b:ge=>ge.type===b,We=H==null?void 0:H.find(Z);We&&(P=We.id)}wt(ce,c=B,c),m.addLayer(bn({id:c,type:M,source:l,"source-layer":y,filter:i,paint:k,layout:A,minzoom:o,maxzoom:a}),P),t(23,Ze=!0),m.on("click",c,Se),m.on("dblclick",c,Se),m.on("contextmenu",c,Se),m.on("mouseenter",c,R),m.on("mousemove",c,q),m.on("mouseleave",c,ae)}r.$$.dirty[0]&1048577&&c&&Ue.set(c,{interactive:W}),r.$$.dirty[0]&1|r.$$.dirty[1]&1&&t(28,s=c?xa((P,H)=>m==null?void 0:m.setPaintProperty(c,P,H)):void 0),r.$$.dirty[0]&1|r.$$.dirty[1]&1&&t(27,f=c?xa((P,H)=>m==null?void 0:m.setLayoutProperty(c,P,H)):void 0),r.$$.dirty[0]&268443648&&(s==null||s(k)),r.$$.dirty[0]&134234112&&(f==null||f(A)),r.$$.dirty[0]&100663297|r.$$.dirty[1]&1&&c&&(m==null||m.setLayerZoomRange(c,o,a)),r.$$.dirty[0]&25165825|r.$$.dirty[1]&1&&c&&(Ze?t(23,Ze=!1):m==null||m.setFilter(c,i))},[c,ye,he,ce,fe,Fe,F,B,u,y,h,b,M,k,A,E,I,p,w,U,W,G,$,Ze,i,a,o,f,s,l,n,m,g,v,_,L,T]}class oo extends _e{constructor(e){super(),we(this,e,Jg,Vg,de,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,interactive:20,hoverCursor:21,eventsIfTopMost:22},null,[-1,-1])}}function Kg(r){let e;const t=r[16].default,n=Ft(t,r,r[24],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&16777216)&&Rt(n,t,i,i[24],e?zt(t,i[24],o,null):Dt(i[24]),null)},i(i){e||(D(n,i),e=!0)},o(i){z(n,i),e=!1},d(i){n&&n.d(i)}}}function Qg(r){let e,t,n;function i(a){r[17](a)}let o={id:r[1],type:"circle",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Kg]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new oo({props:o}),Pe.push(()=>Oe(e,"hovered",i)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){x(e.$$.fragment)},l(a){X(e.$$.fragment,a)},m(a,l){Y(e,a,l),n=!0},p(a,[l]){const s={};l&2&&(s.id=a[1]),l&4&&(s.source=a[2]),l&8&&(s.sourceLayer=a[3]),l&16&&(s.beforeId=a[4]),l&32&&(s.beforeLayerType=a[5]),l&64&&(s.paint=a[6]),l&128&&(s.layout=a[7]),l&256&&(s.filter=a[8]),l&512&&(s.applyToClusters=a[9]),l&1024&&(s.minzoom=a[10]),l&2048&&(s.maxzoom=a[11]),l&4096&&(s.hoverCursor=a[12]),l&8192&&(s.manageHoverState=a[13]),l&16384&&(s.eventsIfTopMost=a[14]),l&32768&&(s.interactive=a[15]),l&16777216&&(s.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,s.hovered=a[0],Ae(()=>t=!1)),e.$set(s)},i(a){n||(D(e.$$.fragment,a),n=!0)},o(a){z(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function $g(r,e,t){let{$$slots:n={},$$scope:i}=e,{id:o=Er("circle")}=e,{source:a=void 0}=e,{sourceLayer:l=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:c}=e,{layout:m=void 0}=e,{filter:g=void 0}=e,{applyToClusters:v=void 0}=e,{minzoom:_=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:L=void 0}=e,{manageHoverState:B=!1}=e,{hovered:u=null}=e,{eventsIfTopMost:y=!1}=e,{interactive:h=!0}=e;function b(w){u=w,t(0,u)}function M(w){Me.call(this,r,w)}function k(w){Me.call(this,r,w)}function A(w){Me.call(this,r,w)}function E(w){Me.call(this,r,w)}function I(w){Me.call(this,r,w)}function p(w){Me.call(this,r,w)}return r.$$set=w=>{"id"in w&&t(1,o=w.id),"source"in w&&t(2,a=w.source),"sourceLayer"in w&&t(3,l=w.sourceLayer),"beforeId"in w&&t(4,s=w.beforeId),"beforeLayerType"in w&&t(5,f=w.beforeLayerType),"paint"in w&&t(6,c=w.paint),"layout"in w&&t(7,m=w.layout),"filter"in w&&t(8,g=w.filter),"applyToClusters"in w&&t(9,v=w.applyToClusters),"minzoom"in w&&t(10,_=w.minzoom),"maxzoom"in w&&t(11,T=w.maxzoom),"hoverCursor"in w&&t(12,L=w.hoverCursor),"manageHoverState"in w&&t(13,B=w.manageHoverState),"hovered"in w&&t(0,u=w.hovered),"eventsIfTopMost"in w&&t(14,y=w.eventsIfTopMost),"interactive"in w&&t(15,h=w.interactive),"$$scope"in w&&t(24,i=w.$$scope)},[u,o,a,l,s,f,c,m,g,v,_,T,L,B,y,h,n,b,M,k,A,E,I,p,i]}class ev extends _e{constructor(e){super(),we(this,e,$g,Qg,de,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function tv(r){let e;const t=r[15].default,n=Ft(t,r,r[23],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8388608)&&Rt(n,t,i,i[23],e?zt(t,i[23],o,null):Dt(i[23]),null)},i(i){e||(D(n,i),e=!0)},o(i){z(n,i),e=!1},d(i){n&&n.d(i)}}}function rv(r){let e,t,n;function i(a){r[16](a)}let o={id:r[1],type:"fill",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],minzoom:r[9],maxzoom:r[10],hoverCursor:r[11],manageHoverState:r[12],eventsIfTopMost:r[13],interactive:r[14],$$slots:{default:[tv]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new oo({props:o}),Pe.push(()=>Oe(e,"hovered",i)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){x(e.$$.fragment)},l(a){X(e.$$.fragment,a)},m(a,l){Y(e,a,l),n=!0},p(a,[l]){const s={};l&2&&(s.id=a[1]),l&4&&(s.source=a[2]),l&8&&(s.sourceLayer=a[3]),l&16&&(s.beforeId=a[4]),l&32&&(s.beforeLayerType=a[5]),l&64&&(s.paint=a[6]),l&128&&(s.layout=a[7]),l&256&&(s.filter=a[8]),l&512&&(s.minzoom=a[9]),l&1024&&(s.maxzoom=a[10]),l&2048&&(s.hoverCursor=a[11]),l&4096&&(s.manageHoverState=a[12]),l&8192&&(s.eventsIfTopMost=a[13]),l&16384&&(s.interactive=a[14]),l&8388608&&(s.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,s.hovered=a[0],Ae(()=>t=!1)),e.$set(s)},i(a){n||(D(e.$$.fragment,a),n=!0)},o(a){z(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function nv(r,e,t){let{$$slots:n={},$$scope:i}=e,{id:o=Er("fill")}=e,{source:a=void 0}=e,{sourceLayer:l=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:c}=e,{layout:m=void 0}=e,{filter:g=void 0}=e,{minzoom:v=void 0}=e,{maxzoom:_=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:L=!1}=e,{hovered:B=null}=e,{eventsIfTopMost:u=!1}=e,{interactive:y=!0}=e;function h(p){B=p,t(0,B)}function b(p){Me.call(this,r,p)}function M(p){Me.call(this,r,p)}function k(p){Me.call(this,r,p)}function A(p){Me.call(this,r,p)}function E(p){Me.call(this,r,p)}function I(p){Me.call(this,r,p)}return r.$$set=p=>{"id"in p&&t(1,o=p.id),"source"in p&&t(2,a=p.source),"sourceLayer"in p&&t(3,l=p.sourceLayer),"beforeId"in p&&t(4,s=p.beforeId),"beforeLayerType"in p&&t(5,f=p.beforeLayerType),"paint"in p&&t(6,c=p.paint),"layout"in p&&t(7,m=p.layout),"filter"in p&&t(8,g=p.filter),"minzoom"in p&&t(9,v=p.minzoom),"maxzoom"in p&&t(10,_=p.maxzoom),"hoverCursor"in p&&t(11,T=p.hoverCursor),"manageHoverState"in p&&t(12,L=p.manageHoverState),"hovered"in p&&t(0,B=p.hovered),"eventsIfTopMost"in p&&t(13,u=p.eventsIfTopMost),"interactive"in p&&t(14,y=p.interactive),"$$scope"in p&&t(23,i=p.$$scope)},[B,o,a,l,s,f,c,m,g,v,_,T,L,u,y,n,h,b,M,k,A,E,I,i]}class Fs extends _e{constructor(e){super(),we(this,e,nv,rv,de,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function iv(r,e,t){let n;const{map:i}=Ar();Ce(r,i,s=>t(4,n=s));let{position:o="top-left"}=e,{container:a=void 0}=e,l=null;return St(()=>{n!=null&&n.loaded()&&l&&n.removeControl(l)}),r.$$set=s=>{"position"in s&&t(1,o=s.position),"container"in s&&t(2,a=s.container)},r.$$.update=()=>{if(r.$$.dirty&30&&n&&!l){let s;typeof a=="string"?s=document.querySelector(a)??void 0:s=a,t(3,l=new rr.FullscreenControl({container:s})),n.addControl(l,o)}},[i,o,a,l,n]}class ov extends _e{constructor(e){super(),we(this,e,iv,null,de,{position:1,container:2})}}function av(r,e,t,n,i){let o=!1;r.getSource(e)&&(o=!0,r.removeSource(e));const a=()=>{n(e)&&(r.addSource(e,t),i())};if(o){const l=()=>{e&&(r.getSource(e)?setTimeout(l,1):a())};l()}else a()}function lv(r,e,t){Hs().then(()=>{let n=Zs(r);if(!n)return;n.getSource(e)===t&&n.removeSource(e)})}function Va(r){let e=r[0],t,n,i=Ja(r);return{c(){i.c(),t=ze()},l(o){i.l(o),t=ze()},m(o,a){i.m(o,a),N(o,t,a),n=!0},p(o,a){a&1&&de(e,e=o[0])?(Je(),z(i,1,1,me),Ke(),i=Ja(o),i.c(),D(i,1),i.m(t.parentNode,t)):i.p(o,a)},i(o){n||(D(i),n=!0)},o(o){z(i),n=!1},d(o){o&&O(t),i.d(o)}}}function Ja(r){let e;const t=r[15].default,n=Ft(t,r,r[14],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&16384)&&Rt(n,t,i,i[14],e?zt(t,i[14],o,null):Dt(i[14]),null)},i(i){e||(D(n,i),e=!0)},o(i){z(n,i),e=!1},d(i){n&&n.d(i)}}}function sv(r){let e,t,n=r[0]&&Va(r);return{c(){n&&n.c(),e=ze()},l(i){n&&n.l(i),e=ze()},m(i,o){n&&n.m(i,o),N(i,e,o),t=!0},p(i,[o]){i[0]?n?(n.p(i,o),o&1&&D(n,1)):(n=Va(i),n.c(),D(n,1),n.m(e.parentNode,e)):n&&(Je(),z(n,1,1,()=>{n=null}),Ke())},i(i){t||(D(n),t=!0)},o(i){z(n),t=!1},d(i){i&&O(e),n&&n.d(i)}}}function fv(r,e,t){let n,i,o,{$$slots:a={},$$scope:l}=e,{id:s=Er("geojson")}=e,{data:f}=e,{generateId:c=!1}=e,{promoteId:m=void 0}=e,{filter:g=void 0}=e,{lineMetrics:v=void 0}=e,{cluster:_=void 0}=e;const{map:T,cluster:L,self:B}=Hg();Ce(r,T,h=>t(13,i=h)),Ce(r,L,h=>t(16,o=h)),Ce(r,B,h=>t(0,n=h));let u,y=!0;return St(()=>{n&&u&&i&&(lv(T,n,u),wt(B,n=null,n),t(11,u=void 0))}),r.$$set=h=>{"id"in h&&t(4,s=h.id),"data"in h&&t(5,f=h.data),"generateId"in h&&t(6,c=h.generateId),"promoteId"in h&&t(7,m=h.promoteId),"filter"in h&&t(8,g=h.filter),"lineMetrics"in h&&t(9,v=h.lineMetrics),"cluster"in h&&t(10,_=h.cluster),"$$scope"in h&&t(14,l=h.$$scope)},r.$$.update=()=>{r.$$.dirty&1024&&wt(L,o=_,o),r.$$.dirty&12273&&i&&n!==s&&(wt(B,n=s,n),av(i,n,bn({type:"geojson",data:f,filter:g,lineMetrics:v,generateId:c,promoteId:m,cluster:!!_,clusterMinPoints:_==null?void 0:_.minPoints,clusterMaxZoom:_==null?void 0:_.maxZoom,clusterRadius:_==null?void 0:_.radius,clusterProperties:_==null?void 0:_.properties}),h=>i&&h===n,()=>{n&&(t(11,u=i==null?void 0:i.getSource(n)),t(12,y=!0))})),r.$$.dirty&8208&&(i==null||i.on("style.load",()=>{t(11,u=i==null?void 0:i.getSource(s))})),r.$$.dirty&6176&&u&&(y?t(12,y=!1):u.setData(f)),r.$$.dirty&3072&&(u==null||u.setClusterOptions(bn({cluster:!!_,clusterMaxZoom:_==null?void 0:_.maxZoom,clusterRadius:_==null?void 0:_.radius})))},[n,T,L,B,s,f,c,m,g,v,_,u,y,i,l,a]}class Rs extends _e{constructor(e){super(),we(this,e,fv,sv,de,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}function uv(r,e,t){let n;const{map:i}=Ar();Ce(r,i,g=>t(8,n=g));let{position:o="top-left"}=e,{positionOptions:a=void 0}=e,{fitBoundsOptions:l=void 0}=e,{trackUserLocation:s=!1}=e,{showAccuracyCircle:f=!0}=e,{showUserLocation:c=!0}=e,m=null;return St(()=>{n!=null&&n.loaded()&&m&&n.removeControl(m)}),r.$$set=g=>{"position"in g&&t(1,o=g.position),"positionOptions"in g&&t(2,a=g.positionOptions),"fitBoundsOptions"in g&&t(3,l=g.fitBoundsOptions),"trackUserLocation"in g&&t(4,s=g.trackUserLocation),"showAccuracyCircle"in g&&t(5,f=g.showAccuracyCircle),"showUserLocation"in g&&t(6,c=g.showUserLocation)},r.$$.update=()=>{r.$$.dirty&510&&n&&!m&&(t(7,m=new rr.GeolocateControl({positionOptions:a,fitBoundsOptions:l,trackUserLocation:s,showAccuracyCircle:f,showUserLocation:c})),n.addControl(m,o))},[i,o,a,l,s,f,c,m,n]}class cv extends _e{constructor(e){super(),we(this,e,uv,null,de,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function mv(r){let e;const t=r[15].default,n=Ft(t,r,r[23],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&8388608)&&Rt(n,t,i,i[23],e?zt(t,i[23],o,null):Dt(i[23]),null)},i(i){e||(D(n,i),e=!0)},o(i){z(n,i),e=!1},d(i){n&&n.d(i)}}}function yv(r){let e,t,n;function i(a){r[16](a)}let o={id:r[1],type:"line",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],minzoom:r[9],maxzoom:r[10],hoverCursor:r[11],manageHoverState:r[12],eventsIfTopMost:r[13],interactive:r[14],$$slots:{default:[mv]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new oo({props:o}),Pe.push(()=>Oe(e,"hovered",i)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){x(e.$$.fragment)},l(a){X(e.$$.fragment,a)},m(a,l){Y(e,a,l),n=!0},p(a,[l]){const s={};l&2&&(s.id=a[1]),l&4&&(s.source=a[2]),l&8&&(s.sourceLayer=a[3]),l&16&&(s.beforeId=a[4]),l&32&&(s.beforeLayerType=a[5]),l&64&&(s.paint=a[6]),l&128&&(s.layout=a[7]),l&256&&(s.filter=a[8]),l&512&&(s.minzoom=a[9]),l&1024&&(s.maxzoom=a[10]),l&2048&&(s.hoverCursor=a[11]),l&4096&&(s.manageHoverState=a[12]),l&8192&&(s.eventsIfTopMost=a[13]),l&16384&&(s.interactive=a[14]),l&8388608&&(s.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,s.hovered=a[0],Ae(()=>t=!1)),e.$set(s)},i(a){n||(D(e.$$.fragment,a),n=!0)},o(a){z(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function hv(r,e,t){let{$$slots:n={},$$scope:i}=e,{id:o=Er("line")}=e,{source:a=void 0}=e,{sourceLayer:l=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:c}=e,{layout:m=void 0}=e,{filter:g=void 0}=e,{minzoom:v=void 0}=e,{maxzoom:_=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:L=!1}=e,{hovered:B=null}=e,{eventsIfTopMost:u=!1}=e,{interactive:y=!0}=e;function h(p){B=p,t(0,B)}function b(p){Me.call(this,r,p)}function M(p){Me.call(this,r,p)}function k(p){Me.call(this,r,p)}function A(p){Me.call(this,r,p)}function E(p){Me.call(this,r,p)}function I(p){Me.call(this,r,p)}return r.$$set=p=>{"id"in p&&t(1,o=p.id),"source"in p&&t(2,a=p.source),"sourceLayer"in p&&t(3,l=p.sourceLayer),"beforeId"in p&&t(4,s=p.beforeId),"beforeLayerType"in p&&t(5,f=p.beforeLayerType),"paint"in p&&t(6,c=p.paint),"layout"in p&&t(7,m=p.layout),"filter"in p&&t(8,g=p.filter),"minzoom"in p&&t(9,v=p.minzoom),"maxzoom"in p&&t(10,_=p.maxzoom),"hoverCursor"in p&&t(11,T=p.hoverCursor),"manageHoverState"in p&&t(12,L=p.manageHoverState),"hovered"in p&&t(0,B=p.hovered),"eventsIfTopMost"in p&&t(13,u=p.eventsIfTopMost),"interactive"in p&&t(14,y=p.interactive),"$$scope"in p&&t(23,i=p.$$scope)},[B,o,a,l,s,f,c,m,g,v,_,T,L,u,y,n,h,b,M,k,A,E,I,i]}class gv extends _e{constructor(e){super(),we(this,e,hv,yv,de,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function vv(r){let e=r.getCenter(),t=Math.round(r.getZoom()*100)/100,n=Math.ceil((t*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,n),o=Math.round(e.lat*i)/i,a=Math.round(e.lng*i)/i,l=`${t}/${o}/${a}`,s=r.getBearing(),f=r.getPitch();return(s||f)&&(l+=`/${Math.round(s*10)/10}`),f&&(l+=`/${Math.round(f)}`),`#${l}`}function dv(r){return r.replace("#","").split("/").map(parseFloat)}var qr=ao;function ao(r,e){return r===e||r!==r&&e!==e?!0:typeof r!=typeof e||{}.toString.call(r)!={}.toString.call(e)||r!==Object(r)||!r?!1:Array.isArray(r)?Ka(r,e):{}.toString.call(r)=="[object Set]"?Ka(Array.from(r),Array.from(e)):{}.toString.call(r)=="[object Object]"?bv(r,e):pv(r,e)}function pv(r,e){return r.toString()===e.toString()}function Ka(r,e){var t=r.length;if(t!=e.length)return!1;for(var n=0;n<t;n++)if(!ao(r[n],e[n]))return!1;return!0}function bv(r,e){var t=Object.keys(r),n=t.length;if(n!=Object.keys(e).length)return!1;for(var i=0;i<n;i++){var o=t[i];if(!(e.hasOwnProperty(o)&&ao(r[o],e[o])))return!1}return!0}function _v(r,e,t){let n;const{map:i}=Ar();Ce(r,i,c=>t(6,n=c));let{position:o="top-left"}=e,{showCompass:a=!0}=e,{showZoom:l=!0}=e,{visualizePitch:s=!1}=e,f=null;return St(()=>{n!=null&&n.loaded()&&f&&n.removeControl(f)}),r.$$set=c=>{"position"in c&&t(1,o=c.position),"showCompass"in c&&t(2,a=c.showCompass),"showZoom"in c&&t(3,l=c.showZoom),"visualizePitch"in c&&t(4,s=c.visualizePitch)},r.$$.update=()=>{r.$$.dirty&126&&n&&!f&&(t(5,f=new rr.NavigationControl({showCompass:a,showZoom:l,visualizePitch:s})),n.addControl(f,o))},[i,o,a,l,s,f,n]}class wv extends _e{constructor(e){super(),we(this,e,_v,null,de,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function Sv(r,e,t){let n;const{map:i}=Ar();Ce(r,i,f=>t(5,n=f));let{position:o="bottom-left"}=e,{maxWidth:a=void 0}=e,{unit:l="metric"}=e,s=null;return St(()=>{n!=null&&n.loaded()&&s&&n.removeControl(s)}),r.$$set=f=>{"position"in f&&t(1,o=f.position),"maxWidth"in f&&t(2,a=f.maxWidth),"unit"in f&&t(3,l=f.unit)},r.$$.update=()=>{r.$$.dirty&62&&n&&!s&&(t(4,s=new rr.ScaleControl({maxWidth:a,unit:l})),n.addControl(s,o))},[i,o,a,l,s,n]}class Mv extends _e{constructor(e){super(),we(this,e,Sv,null,de,{position:1,maxWidth:2,unit:3})}}const Pv=r=>({map:r[0]&8,loadedImages:r[0]&16,allImagesLoaded:r[0]&32}),Qa=r=>({map:r[3],loadedImages:r[4],allImagesLoaded:r[5]});function $a(r){let e,t,n=r[2]&&el(r);const i=r[36].default,o=Ft(i,r,r[35],Qa);return{c(){n&&n.c(),e=J(),o&&o.c()},l(a){n&&n.l(a),e=K(a),o&&o.l(a)},m(a,l){n&&n.m(a,l),N(a,e,l),o&&o.m(a,l),t=!0},p(a,l){a[2]?n?(n.p(a,l),l[0]&4&&D(n,1)):(n=el(a),n.c(),D(n,1),n.m(e.parentNode,e)):n&&(Je(),z(n,1,1,()=>{n=null}),Ke()),o&&o.p&&(!t||l[0]&56|l[1]&16)&&Rt(o,i,a,a[35],t?zt(i,a[35],l,Pv):Dt(a[35]),Qa)},i(a){t||(D(n),D(o,a),t=!0)},o(a){z(n),z(o,a),t=!1},d(a){a&&O(e),n&&n.d(a),o&&o.d(a)}}}function el(r){let e,t,n,i,o,a,l,s;return e=new wv({props:{position:r[6]}}),n=new cv({props:{position:r[6],fitBoundsOptions:{maxZoom:12}}}),o=new ov({props:{position:r[6]}}),l=new Mv({props:{position:r[6]}}),{c(){x(e.$$.fragment),t=J(),x(n.$$.fragment),i=J(),x(o.$$.fragment),a=J(),x(l.$$.fragment)},l(f){X(e.$$.fragment,f),t=K(f),X(n.$$.fragment,f),i=K(f),X(o.$$.fragment,f),a=K(f),X(l.$$.fragment,f)},m(f,c){Y(e,f,c),N(f,t,c),Y(n,f,c),N(f,i,c),Y(o,f,c),N(f,a,c),Y(l,f,c),s=!0},p(f,c){const m={};c[0]&64&&(m.position=f[6]),e.$set(m);const g={};c[0]&64&&(g.position=f[6]),n.$set(g);const v={};c[0]&64&&(v.position=f[6]),o.$set(v);const _={};c[0]&64&&(_.position=f[6]),l.$set(_)},i(f){s||(D(e.$$.fragment,f),D(n.$$.fragment,f),D(o.$$.fragment,f),D(l.$$.fragment,f),s=!0)},o(f){z(e.$$.fragment,f),z(n.$$.fragment,f),z(o.$$.fragment,f),z(l.$$.fragment,f),s=!1},d(f){f&&(O(t),O(i),O(a)),V(e,f),V(n,f),V(o,f),V(l,f)}}}function kv(r){let e,t,n,i,o,a=r[3]&&r[0]&&$a(r);return{c(){e=ie("div"),a&&a.c(),this.h()},l(l){e=oe(l,"DIV",{class:!0});var s=le(e);a&&a.l(s),s.forEach(O),this.h()},h(){C(e,"class",t=en(r[1])+" svelte-p00lfq"),st(e,"expand-map",!r[1])},m(l,s){N(l,e,s),a&&a.m(e,null),n=!0,i||(o=xs(r[9].call(null,e)),i=!0)},p(l,s){l[3]&&l[0]?a?(a.p(l,s),s[0]&9&&D(a,1)):(a=$a(l),a.c(),D(a,1),a.m(e,null)):a&&(Je(),z(a,1,1,()=>{a=null}),Ke()),(!n||s[0]&2&&t!==(t=en(l[1])+" svelte-p00lfq"))&&C(e,"class",t),(!n||s[0]&2)&&st(e,"expand-map",!l[1])},i(l){n||(D(a),n=!0)},o(l){z(a),n=!1},d(l){l&&O(e),a&&a.d(),i=!1,o()}}}function Ev(r,e,t){let n,i,o,a,{$$slots:l={},$$scope:s}=e,{map:f=null}=e,{class:c=void 0}=e,{style:m}=e,{diffStyleUpdates:g=!1}=e,{center:v=void 0}=e,{zoom:_=void 0}=e,{pitch:T=0}=e,{bearing:L=0}=e,{bounds:B=void 0}=e,{hash:u=!1}=e,{loaded:y=!1}=e,{minZoom:h=0}=e,{maxZoom:b=22}=e,{zoomOnDoubleClick:M=!0}=e,{locale:k=void 0}=e,{interactive:A=!0}=e,{attributionControl:E=!0}=e,{cooperativeGestures:I=!1}=e,{preserveDrawingBuffer:p=!1}=e,{maxBounds:w=void 0}=e,{images:U=[]}=e,{standardControls:F=!1}=e,{filterLayers:W=void 0}=e,{transformRequest:G=void 0}=e;const $=Li(),{map:ee,loadedImages:ye}=qg();Ce(r,ee,R=>t(3,o=R)),Ce(r,ye,R=>t(4,a=R));let he=new Set;async function ce(R,q=!1){if(o&&!(!o.loaded()&&!q))if("url"in R){he.add(R.id);try{let ae=await o.loadImage(R.url);o==null||o.addImage(R.id,ae.data,R.options),a.add(R.id),ye.set(a)}catch(ae){$("error",ae)}finally{he.delete(R.id)}}else o.addImage(R.id,R.data,R.options),a.add(R.id),ye.set(a)}let fe,Fe,pe,Ue;function be(R){if(u){let q=dv(window.location.hash);q.length>=3&&(t(11,_=q[0]),t(10,v=[q[2],q[1]])),q.length==5&&(t(15,L=q[3]),t(14,T=q[4]))}return wt(ee,o=new rr.Map(bn({container:R,style:m,locale:k,center:v,zoom:_,pitch:T,bearing:L,minZoom:h,maxZoom:b,interactive:A,preserveDrawingBuffer:p,maxBounds:w,bounds:B,attributionControl:E,transformRequest:G,cooperativeGestures:I})),o),o.on("load",q=>{t(0,y=!0),$("load",o)}),o.on("error",q=>$("error",{...q,map:o})),o.on("movestart",q=>$("movestart",{...q,map:o})),o.on("moveend",q=>{if(t(10,v=q.target.getCenter()),t(11,_=q.target.getZoom()),t(12,B=q.target.getBounds()),$("moveend",{...q,map:o}),u){let ae=window.location.href.replace(/(#.+)?$/,vv(o));window.history.replaceState(window.history.state,"",ae)}}),o.on("zoomstart",q=>$("zoomstart",{...q,map:o})),o.on("zoom",q=>{t(11,_=q.target.getZoom()),$("zoom",{...q,map:o})}),o.on("zoomend",q=>{t(11,_=q.target.getZoom()),$("zoomend",{...q,map:o})}),o.on("style.load",()=>{if(o){const q=o.getStyle();if(t(32,fe=q.layers.map(ae=>ae.id)),t(33,Fe=Object.keys(q.sources)),Ue)for(const[ae,Ze]of Object.entries(Ue))o.addSource(ae,Ze);if(pe)for(const ae of pe)o.addLayer(ae);for(const ae of U)ce(ae,!0)}}),o.on("styledata",q=>{if(o&&W){const ae=o.getStyle().layers;if(ae)for(let Ze of ae)W(Ze)||o.setLayoutProperty(Ze.id,"visibility","none")}$("styledata",{...q,map:o})}),{destroy(){t(0,y=!1),o==null||o.remove(),wt(ee,o=null,o)}}}let Se=m;return r.$$set=R=>{"map"in R&&t(13,f=R.map),"class"in R&&t(1,c=R.class),"style"in R&&t(16,m=R.style),"diffStyleUpdates"in R&&t(17,g=R.diffStyleUpdates),"center"in R&&t(10,v=R.center),"zoom"in R&&t(11,_=R.zoom),"pitch"in R&&t(14,T=R.pitch),"bearing"in R&&t(15,L=R.bearing),"bounds"in R&&t(12,B=R.bounds),"hash"in R&&t(18,u=R.hash),"loaded"in R&&t(0,y=R.loaded),"minZoom"in R&&t(19,h=R.minZoom),"maxZoom"in R&&t(20,b=R.maxZoom),"zoomOnDoubleClick"in R&&t(21,M=R.zoomOnDoubleClick),"locale"in R&&t(22,k=R.locale),"interactive"in R&&t(23,A=R.interactive),"attributionControl"in R&&t(24,E=R.attributionControl),"cooperativeGestures"in R&&t(25,I=R.cooperativeGestures),"preserveDrawingBuffer"in R&&t(26,p=R.preserveDrawingBuffer),"maxBounds"in R&&t(27,w=R.maxBounds),"images"in R&&t(28,U=R.images),"standardControls"in R&&t(2,F=R.standardControls),"filterLayers"in R&&t(29,W=R.filterLayers),"transformRequest"in R&&t(30,G=R.transformRequest),"$$scope"in R&&t(35,s=R.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&4&&t(6,n=typeof F=="boolean"?void 0:F),r.$$.dirty[0]&8&&t(13,f=o),r.$$.dirty[0]&196616|r.$$.dirty[1]&14&&o&&!qr(m,Se)){const R=o.getStyle();if(fe&&(pe=R.layers.filter(q=>!fe.includes(q.id))),Fe){const q=Object.keys(R.sources).filter(ae=>!Fe.includes(ae));Ue={};for(const ae of q)Ue[ae]=R.sources[ae]}t(34,Se=m),o.setStyle(m,{diff:g}),wt(ye,a=new Set,a),t(31,he=new Set)}if(r.$$.dirty[0]&268435481|r.$$.dirty[1]&1&&y&&o!=null&&o.loaded())for(let R of U)!a.has(R.id)&&!he.has(R.id)&&!o.hasImage(R.id)&&ce(R);r.$$.dirty[0]&268435472&&t(5,i=U.every(R=>a.has(R.id))),r.$$.dirty[0]&1032&&v&&!qr(v,o==null?void 0:o.getCenter())&&(o==null||o.panTo(v)),r.$$.dirty[0]&2056&&_&&!qr(_,o==null?void 0:o.getZoom())&&(o==null||o.zoomTo(_)),r.$$.dirty[0]&4104&&B&&!qr(B,o==null?void 0:o.getBounds())&&(o==null||o.fitBounds(B)),r.$$.dirty[0]&2097160&&(M?o==null||o.doubleClickZoom.enable():o==null||o.doubleClickZoom.disable())},[y,c,F,o,a,i,n,ee,ye,be,v,_,B,f,T,L,m,g,u,h,b,M,k,A,E,I,p,w,U,W,G,he,fe,Fe,Se,s,l]}class Av extends _e{constructor(e){super(),we(this,e,Ev,kv,de,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,locale:22,interactive:23,attributionControl:24,cooperativeGestures:25,preserveDrawingBuffer:26,maxBounds:27,images:28,standardControls:2,filterLayers:29,transformRequest:30},null,[-1,-1])}}var Or=Uint8Array,Ds=Uint16Array,Ov=Int32Array,Lv=new Or([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Cv=new Or([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zs=function(r,e){for(var t=new Ds(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new Ov(t[30]),n=1;n<30;++n)for(var o=t[n];o<t[n+1];++o)i[o]=o-t[n]<<5|n;return{b:t,r:i}},Ns=zs(Lv,2),Tv=Ns.b,Bv=Ns.r;Tv[28]=258,Bv[258]=28;zs(Cv,0);var Iv=new Ds(32768);for(se=0;se<32768;++se)gt=(se&43690)>>1|(se&21845)<<1,gt=(gt&52428)>>2|(gt&13107)<<2,gt=(gt&61680)>>4|(gt&3855)<<4,Iv[se]=((gt&65280)>>8|(gt&255)<<8)>>1;var gt,se,An=new Or(288);for(se=0;se<144;++se)An[se]=8;var se;for(se=144;se<256;++se)An[se]=9;var se;for(se=256;se<280;++se)An[se]=7;var se;for(se=280;se<288;++se)An[se]=8;var se,Fv=new Or(32);for(se=0;se<32;++se)Fv[se]=5;var se,Rv=new Or(0),Dv=typeof TextDecoder<"u"&&new TextDecoder,zv=0;try{Dv.decode(Rv,{stream:!0}),zv=1}catch{}function Nv(r){let e,t,n,i,o,a;return e=new Fs({props:{id:"edit-polygon-fill",filter:Dg,paint:{"fill-color":"red","fill-opacity":["case",["boolean",["get","hover"],"false"],1,.5]}}}),n=new gv({props:{id:"edit-polygon-lines",filter:zg,paint:{"line-color":"black","line-width":8,"line-opacity":.5}}}),o=new ev({props:{id:"edit-polygon-vertices",filter:Ng,paint:{"circle-color":"black","circle-opacity":["case",["has","hovered"],1,.5],"circle-radius":10}}}),{c(){x(e.$$.fragment),t=J(),x(n.$$.fragment),i=J(),x(o.$$.fragment)},l(l){X(e.$$.fragment,l),t=K(l),X(n.$$.fragment,l),i=K(l),X(o.$$.fragment,l)},m(l,s){Y(e,l,s),N(l,t,s),Y(n,l,s),N(l,i,s),Y(o,l,s),a=!0},p:me,i(l){a||(D(e.$$.fragment,l),D(n.$$.fragment,l),D(o.$$.fragment,l),a=!0)},o(l){z(e.$$.fragment,l),z(n.$$.fragment,l),z(o.$$.fragment,l),a=!1},d(l){l&&(O(t),O(i)),V(e,l),V(n,l),V(o,l)}}}function Uv(r){let e,t;return e=new Rs({props:{data:r[0],$$slots:{default:[Nv]},$$scope:{ctx:r}}}),{c(){x(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,[i]){const o={};i&1&&(o.data=n[0]),i&2&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){z(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Wv(r,e,t){let n;return Ce(r,Ts,i=>t(0,n=i)),[n]}class Gv extends _e{constructor(e){super(),we(this,e,Wv,Uv,de,{})}}function jv(r){let e,t="Map loading...";return{c(){e=ie("p"),e.textContent=t},l(n){e=oe(n,"P",{"data-svelte-h":!0}),$r(e)!=="svelte-1r8199k"&&(e.textContent=t)},m(n,i){N(n,e,i)},p:me,i:me,o:me,d(n){n&&O(e)}}}function qv(r){let e,t,n,i;e=new Vs({props:{$$slots:{default:[Zv]},$$scope:{ctx:r}}}),e.$on("click",r[5]);let o=r[0].summary.polygon&&tl(r);return{c(){x(e.$$.fragment),t=J(),o&&o.c(),n=ze()},l(a){X(e.$$.fragment,a),t=K(a),o&&o.l(a),n=ze()},m(a,l){Y(e,a,l),N(a,t,l),o&&o.m(a,l),N(a,n,l),i=!0},p(a,l){const s={};l&4096&&(s.$$scope={dirty:l,ctx:a}),e.$set(s),a[0].summary.polygon?o?(o.p(a,l),l&1&&D(o,1)):(o=tl(a),o.c(),D(o,1),o.m(n.parentNode,n)):o&&(Je(),z(o,1,1,()=>{o=null}),Ke())},i(a){i||(D(e.$$.fragment,a),D(o),i=!0)},o(a){z(e.$$.fragment,a),z(o),i=!1},d(a){a&&(O(t),O(n)),V(e,a),o&&o.d(a)}}}function Hv(r){let e,t,n,i,o,a,l;return t=new Fn({props:{$$slots:{default:[Xv]},$$scope:{ctx:r}}}),t.$on("click",r[7]),i=new Fn({props:{$$slots:{default:[Yv]},$$scope:{ctx:r}}}),i.$on("click",r[8]),a=new Fn({props:{disabled:r[4]==0,$$slots:{default:[Kv]},$$scope:{ctx:r}}}),a.$on("click",r[9]),{c(){e=ie("div"),x(t.$$.fragment),n=J(),x(i.$$.fragment),o=J(),x(a.$$.fragment),this.h()},l(s){e=oe(s,"DIV",{style:!0});var f=le(e);X(t.$$.fragment,f),n=K(f),X(i.$$.fragment,f),o=K(f),X(a.$$.fragment,f),f.forEach(O),this.h()},h(){dt(e,"display","flex"),dt(e,"justify-content","space-between")},m(s,f){N(s,e,f),Y(t,e,null),Q(e,n),Y(i,e,null),Q(e,o),Y(a,e,null),l=!0},p(s,f){const c={};f&4096&&(c.$$scope={dirty:f,ctx:s}),t.$set(c);const m={};f&4096&&(m.$$scope={dirty:f,ctx:s}),i.$set(m);const g={};f&16&&(g.disabled=s[4]==0),f&4112&&(g.$$scope={dirty:f,ctx:s}),a.$set(g)},i(s){l||(D(t.$$.fragment,s),D(i.$$.fragment,s),D(a.$$.fragment,s),l=!0)},o(s){z(t.$$.fragment,s),z(i.$$.fragment,s),z(a.$$.fragment,s),l=!1},d(s){s&&O(e),V(t),V(i),V(a)}}}function Zv(r){let e;return{c(){e=Te("Edit polygon")},l(t){e=Be(t,"Edit polygon")},m(t,n){N(t,e,n)},d(t){t&&O(e)}}}function tl(r){let e,t,n,i,o=Ua(r[0].summary.polygon).toFixed(1)+"",a,l,s;return e=new Js({props:{$$slots:{default:[xv]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){x(e.$$.fragment),t=J(),n=ie("p"),i=Te("Polygon area: "),a=Te(o),l=Te(" square meters")},l(f){X(e.$$.fragment,f),t=K(f),n=oe(f,"P",{});var c=le(n);i=Be(c,"Polygon area: "),a=Be(c,o),l=Be(c," square meters"),c.forEach(O)},m(f,c){Y(e,f,c),N(f,t,c),N(f,n,c),Q(n,i),Q(n,a),Q(n,l),s=!0},p(f,c){const m={};c&4096&&(m.$$scope={dirty:c,ctx:f}),e.$set(m),(!s||c&1)&&o!==(o=Ua(f[0].summary.polygon).toFixed(1)+"")&&Bt(a,o)},i(f){s||(D(e.$$.fragment,f),s=!0)},o(f){z(e.$$.fragment,f),s=!1},d(f){f&&(O(t),O(n)),V(e,f)}}}function xv(r){let e;return{c(){e=Te("Delete and start over")},l(t){e=Be(t,"Delete and start over")},m(t,n){N(t,e,n)},d(t){t&&O(e)}}}function Xv(r){let e;return{c(){e=Te("Finish")},l(t){e=Be(t,"Finish")},m(t,n){N(t,e,n)},d(t){t&&O(e)}}}function Yv(r){let e;return{c(){e=Te("Cancel")},l(t){e=Be(t,"Cancel")},m(t,n){N(t,e,n)},d(t){t&&O(e)}}}function Vv(r){let e,t,n;return{c(){e=Te("Undo ("),t=Te(r[4]),n=Te(")")},l(i){e=Be(i,"Undo ("),t=Be(i,r[4]),n=Be(i,")")},m(i,o){N(i,e,o),N(i,t,o),N(i,n,o)},p(i,o){o&16&&Bt(t,i[4])},d(i){i&&(O(e),O(t),O(n))}}}function Jv(r){let e;return{c(){e=Te("Undo")},l(t){e=Be(t,"Undo")},m(t,n){N(t,e,n)},p:me,d(t){t&&O(e)}}}function Kv(r){let e;function t(o,a){return o[4]==0?Jv:Vv}let n=t(r),i=n(r);return{c(){i.c(),e=ze()},l(o){i.l(o),e=ze()},m(o,a){i.m(o,a),N(o,e,a)},p(o,a){n===(n=t(o))&&i?i.p(o,a):(i.d(1),i=n(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&O(e),i.d(o)}}}function Qv(r){let e,t;return e=new Fs({props:{layout:{visibility:r[2]?"none":"visible"},paint:{"fill-color":"red","fill-opacity":.8}}}),{c(){x(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,i){Y(e,n,i),t=!0},p(n,i){const o={};i&4&&(o.layout={visibility:n[2]?"none":"visible"}),e.$set(o)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){z(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function $v(r){let e,t,n,i,o,a;return e=new Rf({props:{map:r[1]}}),n=new Gv({}),o=new Rs({props:{data:r[3],$$slots:{default:[Qv]},$$scope:{ctx:r}}}),{c(){x(e.$$.fragment),t=J(),x(n.$$.fragment),i=J(),x(o.$$.fragment)},l(l){X(e.$$.fragment,l),t=K(l),X(n.$$.fragment,l),i=K(l),X(o.$$.fragment,l)},m(l,s){Y(e,l,s),N(l,t,s),Y(n,l,s),N(l,i,s),Y(o,l,s),a=!0},p(l,s){const f={};s&2&&(f.map=l[1]),e.$set(f);const c={};s&8&&(c.data=l[3]),s&4100&&(c.$$scope={dirty:s,ctx:l}),o.$set(c)},i(l){a||(D(e.$$.fragment,l),D(n.$$.fragment,l),D(o.$$.fragment,l),a=!0)},o(l){z(e.$$.fragment,l),z(n.$$.fragment,l),z(o.$$.fragment,l),a=!1},d(l){l&&(O(t),O(i)),V(e,l),V(n,l),V(o,l)}}}function ed(r){let e,t,n,i,o,a,l;const s=[Hv,qv,jv],f=[];function c(v,_){return v[2]?0:v[1]?1:2}e=c(r),t=f[e]=s[e](r);function m(v){r[10](v)}let g={style:"https://api.maptiler.com/maps/uk-openzoomstack-light/style.json?key=MZEJTanw3WpxRvt7qDfo",standardControls:!0,$$slots:{default:[$v,({map:v})=>({1:v}),({map:v})=>v?2:0]},$$scope:{ctx:r}};return r[1]!==void 0&&(g.map=r[1]),o=new Av({props:g}),Pe.push(()=>Oe(o,"map",m)),o.$on("error",r[11]),{c(){t.c(),n=J(),i=ie("div"),x(o.$$.fragment),this.h()},l(v){t.l(v),n=K(v),i=oe(v,"DIV",{style:!0});var _=le(i);X(o.$$.fragment,_),_.forEach(O),this.h()},h(){dt(i,"position","relative"),dt(i,"width","100%"),dt(i,"height","300px")},m(v,_){f[e].m(v,_),N(v,n,_),N(v,i,_),Y(o,i,null),l=!0},p(v,[_]){let T=e;e=c(v),e===T?f[e].p(v,_):(Je(),z(f[T],1,1,()=>{f[T]=null}),Ke(),t=f[e],t?t.p(v,_):(t=f[e]=s[e](v),t.c()),D(t,1),t.m(n.parentNode,n));const L={};_&4110&&(L.$$scope={dirty:_,ctx:v}),!a&&_&2&&(a=!0,L.map=v[1],Ae(()=>a=!1)),o.$set(L)},i(v){l||(D(t),D(o.$$.fragment,v),l=!0)},o(v){z(t),z(o.$$.fragment,v),l=!1},d(v){v&&(O(n),O(i)),f[e].d(v),V(o)}}}function td(r,e,t){let n,i,o;Ce(r,Ee,T=>t(0,i=T)),Ce(r,Bs,T=>t(4,o=T));let a=null,l=null;St(()=>{l==null||l.tearDown()});function s(){a&&(t(2,l=new Wg(a)),i.summary.polygon?l.editExisting(i.summary.polygon):l.startNew(),l.addEventListenerSuccess(async T=>{t(2,l=null),wt(Ee,i.summary.polygon=T,i)}),l.addEventListenerFailure(()=>{t(2,l=null)}))}function f(){wt(Ee,i.summary.polygon=null,i),s()}const c=()=>l==null?void 0:l.finish(),m=()=>l==null?void 0:l.cancel(),g=()=>l==null?void 0:l.undo();function v(T){a=T,t(1,a)}const _=T=>{console.log(T.detail.error)};return r.$$.update=()=>{r.$$.dirty&1&&t(3,n=i.summary.polygon??{type:"FeatureCollection",features:[]}),r.$$.dirty&2&&a&&s()},[i,a,l,n,o,s,f,c,m,g,v,_]}class rd extends _e{constructor(e){super(),we(this,e,td,ed,de,{})}}function nd(r){let e,t,n,i,o,a,l,s,f,c,m,g,v,_,T,L,B,u,y,h,b,M,k,A,E,I,p,w,U,F,W,G,$,ee,ye,he,ce,fe,Fe,pe,Ue,be,Se,R="Network context",q,ae,Ze=`Please add a drawing of the area being assessed below, including the location
  of measures proposed by the scheme.`,xe,P,H;function Z(d){r[1](d)}let We={label:"Date of design review"};r[0].summary.dateDesignReview!==void 0&&(We.value=r[0].summary.dateDesignReview),e=new ur({props:We}),Pe.push(()=>Oe(e,"value",Z));function ge(d){r[2](d)}let te={label:"Scheme reference"};r[0].summary.schemeReference!==void 0&&(te.value=r[0].summary.schemeReference),i=new ur({props:te}),Pe.push(()=>Oe(i,"value",ge));function Ge(d){r[3](d)}let At={label:"Scheme name"};r[0].summary.schemeName!==void 0&&(At.value=r[0].summary.schemeName),l=new ur({props:At}),Pe.push(()=>Oe(l,"value",Ge));function mt(d){r[4](d)}let yt={label:"Scheme summary"};r[0].summary.schemeSummary!==void 0&&(yt.value=r[0].summary.schemeSummary),c=new Ur({props:yt}),Pe.push(()=>Oe(c,"value",mt));function Wt(d){r[5](d)}let Gt={label:"Scheme information reviewed"};r[0].summary.schemeInfoReviewed!==void 0&&(Gt.value=r[0].summary.schemeInfoReviewed),v=new Ur({props:Gt}),Pe.push(()=>Oe(v,"value",Wt));function On(d){r[6](d)}let rt={label:"Authority",emptyOption:!0,choices:sr($s)};r[0].summary.authority!==void 0&&(rt.value=r[0].summary.authority),L=new fr({props:rt}),Pe.push(()=>Oe(L,"value",On));function Lr(d){r[7](d)}let jt={label:"Transport / Combined Authority",emptyOption:!0,choices:sr(ef)};r[0].summary.transportOrCombinedAuthority!==void 0&&(jt.value=r[0].summary.transportOrCombinedAuthority),y=new fr({props:jt}),Pe.push(()=>Oe(y,"value",Lr));function ar(d){r[8](d)}let Cr={label:"Region",emptyOption:!0,choices:sr(tf)};r[0].summary.region!==void 0&&(Cr.value=r[0].summary.region),M=new fr({props:Cr}),Pe.push(()=>Oe(M,"value",ar));function Ln(d){r[9](d)}let Tr={label:"Funding programme",emptyOption:!0,choices:sr(rf)};r[0].summary.fundingProgramme!==void 0&&(Tr.value=r[0].summary.fundingProgramme),E=new fr({props:Tr}),Pe.push(()=>Oe(E,"value",Ln));function lr(d){r[10](d)}let qt={label:"Design stage",emptyOption:!0,choices:sr(nf)};r[0].summary.designStage!==void 0&&(qt.value=r[0].summary.designStage),w=new fr({props:qt}),Pe.push(()=>Oe(w,"value",lr));function Cn(d){r[11](d)}let Br={label:"Funding conditions"};r[0].summary.fundingConditions!==void 0&&(Br.value=r[0].summary.fundingConditions),W=new Ur({props:Br}),Pe.push(()=>Oe(W,"value",Cn));function Tn(d){r[12](d)}let Ir={label:"Inspector email address"};r[0].summary.inspectorEmail!==void 0&&(Ir.value=r[0].summary.inspectorEmail),ee=new ur({props:Ir}),Pe.push(()=>Oe(ee,"value",Tn));function Bn(d){r[13](d)}let Fr={label:"Scheme area size (kmÂ²)"};r[0].summary.schemeAreaSizeKm2!==void 0&&(Fr.value=r[0].summary.schemeAreaSizeKm2),ce=new ur({props:Fr}),Pe.push(()=>Oe(ce,"value",Bn));function In(d){r[14](d)}let Rr={label:"Notes"};return r[0].summary.notes!==void 0&&(Rr.value=r[0].summary.notes),pe=new Ur({props:Rr}),Pe.push(()=>Oe(pe,"value",In)),P=new rd({}),{c(){x(e.$$.fragment),n=J(),x(i.$$.fragment),a=J(),x(l.$$.fragment),f=J(),x(c.$$.fragment),g=J(),x(v.$$.fragment),T=J(),x(L.$$.fragment),u=J(),x(y.$$.fragment),b=J(),x(M.$$.fragment),A=J(),x(E.$$.fragment),p=J(),x(w.$$.fragment),F=J(),x(W.$$.fragment),$=J(),x(ee.$$.fragment),he=J(),x(ce.$$.fragment),Fe=J(),x(pe.$$.fragment),be=J(),Se=ie("h2"),Se.textContent=R,q=J(),ae=ie("p"),ae.textContent=Ze,xe=J(),x(P.$$.fragment)},l(d){X(e.$$.fragment,d),n=K(d),X(i.$$.fragment,d),a=K(d),X(l.$$.fragment,d),f=K(d),X(c.$$.fragment,d),g=K(d),X(v.$$.fragment,d),T=K(d),X(L.$$.fragment,d),u=K(d),X(y.$$.fragment,d),b=K(d),X(M.$$.fragment,d),A=K(d),X(E.$$.fragment,d),p=K(d),X(w.$$.fragment,d),F=K(d),X(W.$$.fragment,d),$=K(d),X(ee.$$.fragment,d),he=K(d),X(ce.$$.fragment,d),Fe=K(d),X(pe.$$.fragment,d),be=K(d),Se=oe(d,"H2",{"data-svelte-h":!0}),$r(Se)!=="svelte-1tcb68x"&&(Se.textContent=R),q=K(d),ae=oe(d,"P",{"data-svelte-h":!0}),$r(ae)!=="svelte-1unchfe"&&(ae.textContent=Ze),xe=K(d),X(P.$$.fragment,d)},m(d,j){Y(e,d,j),N(d,n,j),Y(i,d,j),N(d,a,j),Y(l,d,j),N(d,f,j),Y(c,d,j),N(d,g,j),Y(v,d,j),N(d,T,j),Y(L,d,j),N(d,u,j),Y(y,d,j),N(d,b,j),Y(M,d,j),N(d,A,j),Y(E,d,j),N(d,p,j),Y(w,d,j),N(d,F,j),Y(W,d,j),N(d,$,j),Y(ee,d,j),N(d,he,j),Y(ce,d,j),N(d,Fe,j),Y(pe,d,j),N(d,be,j),N(d,Se,j),N(d,q,j),N(d,ae,j),N(d,xe,j),Y(P,d,j),H=!0},p(d,[j]){const Dr={};!t&&j&1&&(t=!0,Dr.value=d[0].summary.dateDesignReview,Ae(()=>t=!1)),e.$set(Dr);const zr={};!o&&j&1&&(o=!0,zr.value=d[0].summary.schemeReference,Ae(()=>o=!1)),i.$set(zr);const Nr={};!s&&j&1&&(s=!0,Nr.value=d[0].summary.schemeName,Ae(()=>s=!1)),l.$set(Nr);const S={};!m&&j&1&&(m=!0,S.value=d[0].summary.schemeSummary,Ae(()=>m=!1)),c.$set(S);const ve={};!_&&j&1&&(_=!0,ve.value=d[0].summary.schemeInfoReviewed,Ae(()=>_=!1)),v.$set(ve);const Ye={};!B&&j&1&&(B=!0,Ye.value=d[0].summary.authority,Ae(()=>B=!1)),L.$set(Ye);const Ve={};!h&&j&1&&(h=!0,Ve.value=d[0].summary.transportOrCombinedAuthority,Ae(()=>h=!1)),y.$set(Ve);const re={};!k&&j&1&&(k=!0,re.value=d[0].summary.region,Ae(()=>k=!1)),M.$set(re);const je={};!I&&j&1&&(I=!0,je.value=d[0].summary.fundingProgramme,Ae(()=>I=!1)),E.$set(je);const Ot={};!U&&j&1&&(U=!0,Ot.value=d[0].summary.designStage,Ae(()=>U=!1)),w.$set(Ot);const Ht={};!G&&j&1&&(G=!0,Ht.value=d[0].summary.fundingConditions,Ae(()=>G=!1)),W.$set(Ht);const Zt={};!ye&&j&1&&(ye=!0,Zt.value=d[0].summary.inspectorEmail,Ae(()=>ye=!1)),ee.$set(Zt);const Lt={};!fe&&j&1&&(fe=!0,Lt.value=d[0].summary.schemeAreaSizeKm2,Ae(()=>fe=!1)),ce.$set(Lt);const lo={};!Ue&&j&1&&(Ue=!0,lo.value=d[0].summary.notes,Ae(()=>Ue=!1)),pe.$set(lo)},i(d){H||(D(e.$$.fragment,d),D(i.$$.fragment,d),D(l.$$.fragment,d),D(c.$$.fragment,d),D(v.$$.fragment,d),D(L.$$.fragment,d),D(y.$$.fragment,d),D(M.$$.fragment,d),D(E.$$.fragment,d),D(w.$$.fragment,d),D(W.$$.fragment,d),D(ee.$$.fragment,d),D(ce.$$.fragment,d),D(pe.$$.fragment,d),D(P.$$.fragment,d),H=!0)},o(d){z(e.$$.fragment,d),z(i.$$.fragment,d),z(l.$$.fragment,d),z(c.$$.fragment,d),z(v.$$.fragment,d),z(L.$$.fragment,d),z(y.$$.fragment,d),z(M.$$.fragment,d),z(E.$$.fragment,d),z(w.$$.fragment,d),z(W.$$.fragment,d),z(ee.$$.fragment,d),z(ce.$$.fragment,d),z(pe.$$.fragment,d),z(P.$$.fragment,d),H=!1},d(d){d&&(O(n),O(a),O(f),O(g),O(T),O(u),O(b),O(A),O(p),O(F),O($),O(he),O(Fe),O(be),O(Se),O(q),O(ae),O(xe)),V(e,d),V(i,d),V(l,d),V(c,d),V(v,d),V(L,d),V(y,d),V(M,d),V(E,d),V(w,d),V(W,d),V(ee,d),V(ce,d),V(pe,d),V(P,d)}}}function id(r,e,t){let n;Ce(r,Ee,u=>t(0,n=u));function i(u){r.$$.not_equal(n.summary.dateDesignReview,u)&&(n.summary.dateDesignReview=u,Ee.set(n))}function o(u){r.$$.not_equal(n.summary.schemeReference,u)&&(n.summary.schemeReference=u,Ee.set(n))}function a(u){r.$$.not_equal(n.summary.schemeName,u)&&(n.summary.schemeName=u,Ee.set(n))}function l(u){r.$$.not_equal(n.summary.schemeSummary,u)&&(n.summary.schemeSummary=u,Ee.set(n))}function s(u){r.$$.not_equal(n.summary.schemeInfoReviewed,u)&&(n.summary.schemeInfoReviewed=u,Ee.set(n))}function f(u){r.$$.not_equal(n.summary.authority,u)&&(n.summary.authority=u,Ee.set(n))}function c(u){r.$$.not_equal(n.summary.transportOrCombinedAuthority,u)&&(n.summary.transportOrCombinedAuthority=u,Ee.set(n))}function m(u){r.$$.not_equal(n.summary.region,u)&&(n.summary.region=u,Ee.set(n))}function g(u){r.$$.not_equal(n.summary.fundingProgramme,u)&&(n.summary.fundingProgramme=u,Ee.set(n))}function v(u){r.$$.not_equal(n.summary.designStage,u)&&(n.summary.designStage=u,Ee.set(n))}function _(u){r.$$.not_equal(n.summary.fundingConditions,u)&&(n.summary.fundingConditions=u,Ee.set(n))}function T(u){r.$$.not_equal(n.summary.inspectorEmail,u)&&(n.summary.inspectorEmail=u,Ee.set(n))}function L(u){r.$$.not_equal(n.summary.schemeAreaSizeKm2,u)&&(n.summary.schemeAreaSizeKm2=u,Ee.set(n))}function B(u){r.$$.not_equal(n.summary.notes,u)&&(n.summary.notes=u,Ee.set(n))}return[n,i,o,a,l,s,f,c,m,g,v,_,T,L,B]}class wd extends _e{constructor(e){super(),we(this,e,id,nd,de,{})}}export{wd as component};
