import{s as y,e as S,t as x,a as I,c as q,b as N,d as ee,f as b,g as A,r as $,w as B,i as j,h as k,j as ne,q as te,Q as le,C as z,x as H,z as oe,H as re,A as F,v as O,B as G,N as se,O as ue,n as fe}from"../chunks/scheduler.DUXu1fc4.js";import{S as ie,i as ae,c as D,a as M,m as w,t as E,b as L,d as C,f as V,g as ge,e as pe}from"../chunks/index.Cw3Z3Eqf.js";import{e as P}from"../chunks/each.CBIw2Sej.js";import{p as J}from"../chunks/index.BlEg-QWU.js";import{b as _e}from"../chunks/colors.cXDjJPjh.js";import{E as me}from"../chunks/ErrorMessage.CcWSnP2g.js";import{v as de}from"../chunks/v4.D8aEg3BZ.js";import{D as Q}from"../chunks/DraggablePin.DG8rrDx1.js";import{M as ce,G as he}from"../chunks/MapLibreMap.BGhC_Dly.js";import{L as ve}from"../chunks/LineLayer.DWnxnLW1.js";function U(t,n,e){const l=t.slice();return l[10]=n[e][0],l[11]=n[e][1],l}function W(t){let n,e,l,r,s=!1,d,i,a=t[11]+"",c,_,o,u,m,g;return u=le(t[9][0]),{c(){n=S("div"),e=S("input"),d=I(),i=S("label"),c=x(a),o=I(),this.h()},l(f){n=q(f,"DIV",{class:!0});var h=N(n);e=q(h,"INPUT",{class:!0,id:!0,type:!0}),d=A(h),i=q(h,"LABEL",{class:!0,for:!0});var p=N(i);c=ee(p,a),p.forEach(b),o=A(h),h.forEach(b),this.h()},h(){$(e,"class","govuk-radios__input"),$(e,"id",l=t[5]+t[10]),$(e,"type","radio"),e.__value=r=t[10],z(e,e.__value),$(i,"class","govuk-label govuk-radios__label"),$(i,"for",_=t[5]+t[10]),$(n,"class","govuk-radios__item"),u.p(e)},m(f,h){j(f,n,h),k(n,e),e.checked=e.__value===t[0],k(n,d),k(n,i),k(i,c),k(n,o),m||(g=[H(e,"change",t[8]),H(e,"change",t[7])],m=!0)},p(f,h){h&4&&l!==(l=f[5]+f[10])&&$(e,"id",l),h&4&&r!==(r=f[10])&&(e.__value=r,z(e,e.__value),s=!0),(s||h&5)&&(e.checked=e.__value===f[0]),h&4&&a!==(a=f[11]+"")&&ne(c,a),h&4&&_!==(_=f[5]+f[10])&&$(i,"for",_)},d(f){f&&b(n),u.r(),m=!1,oe(g)}}}function be(t){let n,e,l,r,s,d,i,a,c;d=new me({props:{errorMessage:t[4]}});let _=P(t[2]),o=[];for(let u=0;u<_.length;u+=1)o[u]=W(U(t,_,u));return{c(){n=S("div"),e=S("fieldset"),l=S("legend"),r=x(t[1]),s=I(),D(d.$$.fragment),i=I(),a=S("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){n=q(u,"DIV",{class:!0});var m=N(n);e=q(m,"FIELDSET",{class:!0});var g=N(e);l=q(g,"LEGEND",{class:!0});var f=N(l);r=ee(f,t[1]),f.forEach(b),s=A(g),M(d.$$.fragment,g),i=A(g),a=q(g,"DIV",{class:!0,"data-module":!0});var h=N(a);for(let p=0;p<o.length;p+=1)o[p].l(h);h.forEach(b),g.forEach(b),m.forEach(b),this.h()},h(){$(l,"class","govuk-fieldset__legend govuk-label--s"),$(a,"class","govuk-radios"),$(a,"data-module","govuk-radios"),B(a,"govuk-radios--inline",t[3]),B(a,"govuk-radios--small",t[3]),$(e,"class","govuk-fieldset"),$(n,"class","govuk-form-group")},m(u,m){j(u,n,m),k(n,e),k(e,l),k(l,r),k(e,s),w(d,e,null),k(e,i),k(e,a);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(a,null);c=!0},p(u,[m]){(!c||m&2)&&ne(r,u[1]);const g={};if(m&16&&(g.errorMessage=u[4]),d.$set(g),m&37){_=P(u[2]);let f;for(f=0;f<_.length;f+=1){const h=U(u,_,f);o[f]?o[f].p(h,m):(o[f]=W(h),o[f].c(),o[f].m(a,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=_.length}(!c||m&8)&&B(a,"govuk-radios--inline",u[3]),(!c||m&8)&&B(a,"govuk-radios--small",u[3])},i(u){c||(E(d.$$.fragment,u),c=!0)},o(u){L(d.$$.fragment,u),c=!1},d(u){u&&b(n),C(d),te(o,u)}}}function $e(t,n,e){let l,{legend:r}=n,{choices:s}=n,{inlineSmall:d=!1}=n,{required:i=!1}=n,{value:a}=n,c=de();const _=[[]];function o(m){re.call(this,t,m)}function u(){a=this.__value,e(0,a)}return t.$$set=m=>{"legend"in m&&e(1,r=m.legend),"choices"in m&&e(2,s=m.choices),"inlineSmall"in m&&e(3,d=m.inlineSmall),"required"in m&&e(6,i=m.required),"value"in m&&e(0,a=m.value)},t.$$.update=()=>{t.$$.dirty&65&&e(4,l=i&&a==""?"Required":"")},[a,r,s,d,l,c,i,o,u,_]}class X extends ie{constructor(n){super(),ae(this,n,$e,be,y,{legend:1,choices:2,inlineSmall:3,required:6,value:0})}}function Y(t,n,e){const l=t.slice();return l[11]=n[e],l[12]=n,l[13]=e,l}function Z(t){let n,e,l,r,s,d;function i(o){t[7](o,t[11])}let a={map:t[0]};t[11].point1!==void 0&&(a.position=t[11].point1),n=new Q({props:a}),F.push(()=>V(n,"position",i));function c(o){t[8](o,t[11])}let _={map:t[0]};return t[11].point2!==void 0&&(_.position=t[11].point2),r=new Q({props:_}),F.push(()=>V(r,"position",c)),{c(){D(n.$$.fragment),l=I(),D(r.$$.fragment)},l(o){M(n.$$.fragment,o),l=A(o),M(r.$$.fragment,o)},m(o,u){w(n,o,u),j(o,l,u),w(r,o,u),d=!0},p(o,u){t=o;const m={};u&1&&(m.map=t[0]),!e&&u&2&&(e=!0,m.position=t[11].point1,G(()=>e=!1)),n.$set(m);const g={};u&1&&(g.map=t[0]),!s&&u&2&&(s=!0,g.position=t[11].point2,G(()=>s=!1)),r.$set(g)},i(o){d||(E(n.$$.fragment,o),E(r.$$.fragment,o),d=!0)},o(o){L(n.$$.fragment,o),L(r.$$.fragment,o),d=!1},d(o){o&&b(l),C(n,o),C(r,o)}}}function ke(t){let n,e;return n=new ve({props:{paint:{"line-width":6,"line-color":["get","color"]}}}),{c(){D(n.$$.fragment)},l(l){M(n.$$.fragment,l)},m(l,r){w(n,l,r),e=!0},p:fe,i(l){e||(E(n.$$.fragment,l),e=!0)},o(l){L(n.$$.fragment,l),e=!1},d(l){C(n,l)}}}function Ee(t){let n,e,l,r=P(t[1]),s=[];for(let i=0;i<r.length;i+=1)s[i]=Z(Y(t,r,i));const d=i=>L(s[i],1,1,()=>{s[i]=null});return e=new he({props:{data:t[4](t[1]),$$slots:{default:[ke]},$$scope:{ctx:t}}}),{c(){for(let i=0;i<s.length;i+=1)s[i].c();n=I(),D(e.$$.fragment)},l(i){for(let a=0;a<s.length;a+=1)s[a].l(i);n=A(i),M(e.$$.fragment,i)},m(i,a){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(i,a);j(i,n,a),w(e,i,a),l=!0},p(i,a){if(a&3){r=P(i[1]);let _;for(_=0;_<r.length;_+=1){const o=Y(i,r,_);s[_]?(s[_].p(o,a),E(s[_],1)):(s[_]=Z(o),s[_].c(),E(s[_],1),s[_].m(n.parentNode,n))}for(ge(),_=r.length;_<s.length;_+=1)d(_);pe()}const c={};a&2&&(c.data=i[4](i[1])),a&16384&&(c.$$scope={dirty:a,ctx:i}),e.$set(c)},i(i){if(!l){for(let a=0;a<r.length;a+=1)E(s[a]);E(e.$$.fragment,i),l=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)L(s[a]);L(e.$$.fragment,i),l=!1},d(i){i&&b(n),te(s,i),C(e,i)}}}function Le(t){let n,e,l,r,s,d,i,a,c,_;function o(p){t[5](p)}let u={legend:"Kind",choices:J(["vehicle-straight","vehicle-turn","pedestrian"]),inlineSmall:!0};t[2]!==void 0&&(u.value=t[2]),n=new X({props:u}),F.push(()=>V(n,"value",o));function m(p){t[6](p)}let g={legend:"Color",choices:J(["green","amber","red","critical"]),inlineSmall:!0};t[3]!==void 0&&(g.value=t[3]),r=new X({props:g}),F.push(()=>V(r,"value",m));function f(p){t[9](p)}let h={$$slots:{default:[Ee]},$$scope:{ctx:t}};return t[0]!==void 0&&(h.map=t[0]),a=new ce({props:h}),F.push(()=>V(a,"map",f)),{c(){D(n.$$.fragment),l=I(),D(r.$$.fragment),d=I(),i=S("div"),D(a.$$.fragment),this.h()},l(p){M(n.$$.fragment,p),l=A(p),M(r.$$.fragment,p),d=A(p),i=q(p,"DIV",{style:!0});var v=N(i);M(a.$$.fragment,v),v.forEach(b),this.h()},h(){O(i,"position","relative"),O(i,"width","100%"),O(i,"height","600px")},m(p,v){w(n,p,v),j(p,l,v),w(r,p,v),j(p,d,v),j(p,i,v),w(a,i,null),_=!0},p(p,[v]){const R={};!e&&v&4&&(e=!0,R.value=p[2],G(()=>e=!1)),n.$set(R);const T={};!s&&v&8&&(s=!0,T.value=p[3],G(()=>s=!1)),r.$set(T);const K={};v&16387&&(K.$$scope={dirty:v,ctx:p}),!c&&v&1&&(c=!0,K.map=p[0],G(()=>c=!1)),a.$set(K)},i(p){_||(E(n.$$.fragment,p),E(r.$$.fragment,p),E(a.$$.fragment,p),_=!0)},o(p){L(n.$$.fragment,p),L(r.$$.fragment,p),L(a.$$.fragment,p),_=!1},d(p){p&&(b(l),b(d),b(i)),C(n,p),C(r,p),C(a)}}}function Se(t,n,e){let l,r=[],s="vehicle-straight",d="green";function i(g){e(1,r=[...r,{point1:g.lngLat.toArray(),point2:g.lngLat.toArray(),kind:s,color:d}])}se(()=>{l.on("click",i)}),ue(()=>{l.off("click",i)});function a(g){return{type:"FeatureCollection",features:g.map(f=>({type:"Feature",properties:{kind:f.kind,color:_e[f.color].background},geometry:{type:"LineString",coordinates:[f.point1,f.point2]}}))}}function c(g){s=g,e(2,s)}function _(g){d=g,e(3,d)}function o(g,f){t.$$.not_equal(f.point1,g)&&(f.point1=g,e(1,r))}function u(g,f){t.$$.not_equal(f.point2,g)&&(f.point2=g,e(1,r))}function m(g){l=g,e(0,l)}return[l,r,s,d,a,c,_,o,u,m]}class Ge extends ie{constructor(n){super(),ae(this,n,Se,Le,y,{})}}export{Ge as component};
