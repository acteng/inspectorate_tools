import{s as ae,a as R,e as O,g as I,c as P,r as X,i as F,C as Ee,x as Me,f as v,z as ot,A as H,b as A,v as fe,h as E,B as z,k as ce,a7 as ze,t as M,E as Z,d as W,j as re,p as ge,q as ft,n as pe,T as ut,M as Ge}from"../chunks/scheduler.DGmwKwHE.js";import{S as le,i as oe,c as S,a as L,m as C,t as k,b as y,d as N,f as G,g as x,e as ee}from"../chunks/index.Bb3HzqPI.js";import{e as ue,u as Ye,o as Ke}from"../chunks/each.5Jij472k.js";import{p as se}from"../chunks/index.rExdC7wh.js";import{S as te,W as Qe}from"../chunks/WarningButton.CmTmvDGe.js";import{S as ie}from"../chunks/Select.BxvsumuS.js";import{W as be}from"../chunks/WarningText.B7pUT-fM.js";import{s as V,a as Xe,b as ct}from"../chunks/data.Ce1XJXsi.js";import{a as Ze,n as pt,g as We,c as dt,D as mt}from"../chunks/logic.pmUnSMOz.js";import{E as _t}from"../chunks/ExternalLink.DMGng9Ao.js";import{D as ht}from"../chunks/DefaultButton.Ba2CVFhD.js";import{F as $t,E as xe}from"../chunks/FormElement.BJVcgkWn.js";import{T as gt}from"../chunks/TextInput.BGWXu-yq.js";import"../chunks/paths.9u2Ijn0Z.js";/* empty css                                                    */import{M as bt}from"../chunks/Modal.1YLi9EeA.js";import{v as et}from"../chunks/v4.D8aEg3BZ.js";import{C as me}from"../chunks/CollapsibleCard.uYkzZ5_n.js";function vt(i){let e,t,r,n,s,a,l;return e=new xe({props:{errorMessage:i[5](i[2])}}),{c(){S(e.$$.fragment),t=R(),r=O("input"),this.h()},l(o){L(e.$$.fragment,o),t=I(o),r=P(o,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){X(r,"type","text"),X(r,"inputmode","numeric"),X(r,"class",n=`govuk-input govuk-input--width-${i[1]}`),X(r,"id",i[3])},m(o,u){C(e,o,u),F(o,t,u),F(o,r,u),Ee(r,i[2]),s=!0,a||(l=[Me(r,"input",i[9]),Me(r,"change",i[4])],a=!0)},p(o,u){const b={};u&4&&(b.errorMessage=o[5](o[2])),e.$set(b),(!s||u&2&&n!==(n=`govuk-input govuk-input--width-${o[1]}`))&&X(r,"class",n),u&4&&r.value!==o[2]&&Ee(r,o[2])},i(o){s||(k(e.$$.fragment,o),s=!0)},o(o){y(e.$$.fragment,o),s=!1},d(o){o&&(v(t),v(r)),N(e,o),a=!1,ot(l)}}}function wt(i){let e,t;return e=new $t({props:{label:i[0],id:i[3],$$slots:{default:[vt]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,[n]){const s={};n&1&&(s.label=r[0]),n&1030&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function kt(i,e,t){let{label:r}=e,{value:n}=e,{width:s}=e,{min:a=void 0}=e,{max:l=void 0}=e,o=n==null?void 0:n.toString(),u=et();function b(){t(6,n=o==null?void 0:parseInt(o,10))}function m(p){if(p==""||p==null)return"";if(p.includes("."))return"Please enter a number without decimals";let h=Number(p);return isNaN(h)?"Please enter a valid number":a!=null&&h<a?`Please enter a number that's at least ${a};`:l!=null&&h>l?`Please enter a number that's at most ${l};`:""}function c(){o=this.value,t(2,o)}return i.$$set=p=>{"label"in p&&t(0,r=p.label),"value"in p&&t(6,n=p.value),"width"in p&&t(1,s=p.width),"min"in p&&t(7,a=p.min),"max"in p&&t(8,l=p.max)},[r,s,o,u,b,m,n,a,l,c]}class yt extends le{constructor(e){super(),oe(this,e,kt,wt,ae,{label:0,value:6,width:1,min:7,max:8})}}function _e(i){return typeof i=="object"?[]:Ft[i]}let Ft={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",Y(76)],["LTN 1/20 Figure 4.1 pp. 33",Y(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",Y(43)],["LTN 1/20 Figure 4.1 pp. 33",Y(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",Y(43)],["LTN 1/20 Figure 4.1 pp. 33",Y(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",Y(43)],["LTN 1/20 Figure 4.1 pp. 33",Y(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",Y(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",Y(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",Y(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",Y(54)]]};function Y(i){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${i}`}function he(i,e){let t=Ze(e.speedLimit,e.observedSpeed);switch(i){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&t==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&t==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Be(i,e,t){const r=i.slice();return r[21]=e[t][0],r[22]=e[t][1],r}function Re(i){let e,t,r,n=We(i[0],i[7].proposed.trafficData,i[7].proposed.customFeatures,i[4],i[5])[i[3]=="Desirable"?0:1].toFixed(2)+"",s,a,l,o,u,b=_e(i[0]).length>0,m,c=he(i[0],i[7].proposed.trafficData),p,h;const f=[St,Tt,Dt],_=[];function d($,g){return $[9]=="left"?0:$[9]=="right"?1:$[9]=="both"?2:-1}~(l=d(i))&&(o=_[l]=f[l](i));let w=b&&Ie(i),D=c&&Pe(i);return{c(){e=O("p"),t=M(i[3]),r=M(" minimum width (m): "),s=M(n),a=R(),o&&o.c(),u=R(),w&&w.c(),m=R(),D&&D.c(),p=Z()},l($){e=P($,"P",{});var g=A(e);t=W(g,i[3]),r=W(g," minimum width (m): "),s=W(g,n),g.forEach(v),a=I($),o&&o.l($),u=I($),w&&w.l($),m=I($),D&&D.l($),p=Z()},m($,g){F($,e,g),E(e,t),E(e,r),E(e,s),F($,a,g),~l&&_[l].m($,g),F($,u,g),w&&w.m($,g),F($,m,g),D&&D.m($,g),F($,p,g),h=!0},p($,g){(!h||g&8)&&re(t,$[3]),(!h||g&185)&&n!==(n=We($[0],$[7].proposed.trafficData,$[7].proposed.customFeatures,$[4],$[5])[$[3]=="Desirable"?0:1].toFixed(2)+"")&&re(s,n);let q=l;l=d($),l===q?~l&&_[l].p($,g):(o&&(x(),y(_[q],1,1,()=>{_[q]=null}),ee()),~l?(o=_[l],o?o.p($,g):(o=_[l]=f[l]($),o.c()),k(o,1),o.m(u.parentNode,u)):o=null),g&1&&(b=_e($[0]).length>0),b?w?(w.p($,g),g&1&&k(w,1)):(w=Ie($),w.c(),k(w,1),w.m(m.parentNode,m)):w&&(x(),y(w,1,1,()=>{w=null}),ee()),g&129&&(c=he($[0],$[7].proposed.trafficData)),c?D?D.p($,g):(D=Pe($),D.c(),D.m(p.parentNode,p)):D&&(D.d(1),D=null)},i($){h||(k(o),k(w),h=!0)},o($){y(o),y(w),h=!1},d($){$&&(v(e),v(a),v(u),v(m),v(p)),~l&&_[l].d($),w&&w.d($),D&&D.d($)}}}function Dt(i){let e,t;return e=new be({props:{$$slots:{default:[Ct]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Tt(i){let e,t;return e=new be({props:{$$slots:{default:[Et]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function St(i){let e,t;return e=new be({props:{$$slots:{default:[Wt]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Lt(i){let e;return{c(){e=M("Add buffers")},l(t){e=W(t,"Add buffers")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function Ct(i){let e,t,r;return t=new te({props:{$$slots:{default:[Lt]},$$scope:{ctx:i}}}),t.$on("click",i[14]),{c(){e=M("Consider buffer to left and right "),S(t.$$.fragment)},l(n){e=W(n,"Consider buffer to left and right "),L(t.$$.fragment,n)},m(n,s){F(n,e,s),C(t,n,s),r=!0},p(n,s){const a={};s&33554432&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(k(t.$$.fragment,n),r=!0)},o(n){y(t.$$.fragment,n),r=!1},d(n){n&&v(e),N(t,n)}}}function Nt(i){let e;return{c(){e=M("Add buffer")},l(t){e=W(t,"Add buffer")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function Et(i){let e,t,r;return t=new te({props:{$$slots:{default:[Nt]},$$scope:{ctx:i}}}),t.$on("click",i[13]),{c(){e=M("Consider buffer to right "),S(t.$$.fragment)},l(n){e=W(n,"Consider buffer to right "),L(t.$$.fragment,n)},m(n,s){F(n,e,s),C(t,n,s),r=!0},p(n,s){const a={};s&33554432&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(k(t.$$.fragment,n),r=!0)},o(n){y(t.$$.fragment,n),r=!1},d(n){n&&v(e),N(t,n)}}}function Mt(i){let e;return{c(){e=M("Add buffer")},l(t){e=W(t,"Add buffer")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function Wt(i){let e,t,r;return t=new te({props:{$$slots:{default:[Mt]},$$scope:{ctx:i}}}),t.$on("click",i[12]),{c(){e=M("Consider buffer to left "),S(t.$$.fragment)},l(n){e=W(n,"Consider buffer to left "),L(t.$$.fragment,n)},m(n,s){F(n,e,s),C(t,n,s),r=!0},p(n,s){const a={};s&33554432&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(k(t.$$.fragment,n),r=!0)},o(n){y(t.$$.fragment,n),r=!1},d(n){n&&v(e),N(t,n)}}}function Ie(i){let e,t="References",r,n,s,a=ue(_e(i[0])),l=[];for(let u=0;u<a.length;u+=1)l[u]=Oe(Be(i,a,u));const o=u=>y(l[u],1,1,()=>{l[u]=null});return{c(){e=O("u"),e.textContent=t,r=M(`
      :
      `),n=O("ul");for(let u=0;u<l.length;u+=1)l[u].c()},l(u){e=P(u,"U",{"data-svelte-h":!0}),ge(e)!=="svelte-fk7cdq"&&(e.textContent=t),r=W(u,`
      :
      `),n=P(u,"UL",{});var b=A(n);for(let m=0;m<l.length;m+=1)l[m].l(b);b.forEach(v)},m(u,b){F(u,e,b),F(u,r,b),F(u,n,b);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(n,null);s=!0},p(u,b){if(b&1){a=ue(_e(u[0]));let m;for(m=0;m<a.length;m+=1){const c=Be(u,a,m);l[m]?(l[m].p(c,b),k(l[m],1)):(l[m]=Oe(c),l[m].c(),k(l[m],1),l[m].m(n,null))}for(x(),m=a.length;m<l.length;m+=1)o(m);ee()}},i(u){if(!s){for(let b=0;b<a.length;b+=1)k(l[b]);s=!0}},o(u){l=l.filter(Boolean);for(let b=0;b<l.length;b+=1)y(l[b]);s=!1},d(u){u&&(v(e),v(r),v(n)),ft(l,u)}}}function Bt(i){let e,t=i[21]+"",r;return{c(){e=O("li"),r=M(t)},l(n){e=P(n,"LI",{});var s=A(e);r=W(s,t),s.forEach(v)},m(n,s){F(n,e,s),E(e,r)},p(n,s){s&1&&t!==(t=n[21]+"")&&re(r,t)},i:pe,o:pe,d(n){n&&v(e)}}}function Rt(i){let e,t,r;return t=new _t({props:{href:i[22],$$slots:{default:[It]},$$scope:{ctx:i}}}),{c(){e=O("li"),S(t.$$.fragment)},l(n){e=P(n,"LI",{});var s=A(e);L(t.$$.fragment,s),s.forEach(v)},m(n,s){F(n,e,s),C(t,e,null),r=!0},p(n,s){const a={};s&1&&(a.href=n[22]),s&33554433&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(k(t.$$.fragment,n),r=!0)},o(n){y(t.$$.fragment,n),r=!1},d(n){n&&v(e),N(t)}}}function It(i){let e=i[21]+"",t;return{c(){t=M(e)},l(r){t=W(r,e)},m(r,n){F(r,t,n)},p(r,n){n&1&&e!==(e=r[21]+"")&&re(t,e)},d(r){r&&v(t)}}}function Oe(i){let e,t,r,n;const s=[Rt,Bt],a=[];function l(o,u){return o[22]?0:1}return e=l(i),t=a[e]=s[e](i),{c(){t.c(),r=Z()},l(o){t.l(o),r=Z()},m(o,u){a[e].m(o,u),F(o,r,u),n=!0},p(o,u){let b=e;e=l(o),e===b?a[e].p(o,u):(x(),y(a[b],1,1,()=>{a[b]=null}),ee(),t=a[e],t?t.p(o,u):(t=a[e]=s[e](o),t.c()),k(t,1),t.m(r.parentNode,r))},i(o){n||(k(t),n=!0)},o(o){y(t),n=!1},d(o){o&&v(r),a[e].d(o)}}}function Pe(i){let e,t="Guidance",r,n,s=he(i[0],i[7].proposed.trafficData)+"",a;return{c(){e=O("u"),e.textContent=t,r=M(`
      :
      `),n=O("p"),a=M(s),this.h()},l(l){e=P(l,"U",{"data-svelte-h":!0}),ge(e)!=="svelte-qh7mhq"&&(e.textContent=t),r=W(l,`
      :
      `),n=P(l,"P",{style:!0});var o=A(n);a=W(o,s),o.forEach(v),this.h()},h(){fe(n,"max-width","400px")},m(l,o){F(l,e,o),F(l,r,o),F(l,n,o),E(n,a)},p(l,o){o&129&&s!==(s=he(l[0],l[7].proposed.trafficData)+"")&&re(a,s)},d(l){l&&(v(e),v(r),v(n))}}}function Ot(i){let e;return{c(){e=M("←")},l(t){e=W(t,"←")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function Pt(i){let e;return{c(){e=M("Delete")},l(t){e=W(t,"Delete")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function qt(i){let e;return{c(){e=M("→")},l(t){e=W(t,"→")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function Vt(i){let e,t,r,n,s,a,l,o,u,b,m,c;function p(_){i[11](_)}let h={label:"Street feature type",emptyOption:!0,choices:i[8]};i[6]!==void 0&&(h.value=i[6]),t=new ie({props:h}),H.push(()=>G(t,"value",p));let f=i[0]&&Re(i);return l=new te({props:{disabled:i[1],$$slots:{default:[Ot]},$$scope:{ctx:i}}}),l.$on("click",i[15]),u=new Qe({props:{$$slots:{default:[Pt]},$$scope:{ctx:i}}}),u.$on("click",i[16]),m=new te({props:{disabled:i[2],$$slots:{default:[qt]},$$scope:{ctx:i}}}),m.$on("click",i[17]),{c(){e=O("div"),S(t.$$.fragment),n=R(),f&&f.c(),s=R(),a=O("div"),S(l.$$.fragment),o=R(),S(u.$$.fragment),b=R(),S(m.$$.fragment),this.h()},l(_){e=P(_,"DIV",{class:!0});var d=A(e);L(t.$$.fragment,d),n=I(d),f&&f.l(d),s=I(d),a=P(d,"DIV",{style:!0,class:!0});var w=A(a);L(l.$$.fragment,w),o=I(w),L(u.$$.fragment,w),b=I(w),L(m.$$.fragment,w),w.forEach(v),d.forEach(v),this.h()},h(){fe(a,"display","flex"),fe(a,"justify-content","space-between"),X(a,"class","svelte-jig4ga"),X(e,"class","svelte-jig4ga")},m(_,d){F(_,e,d),C(t,e,null),E(e,n),f&&f.m(e,null),E(e,s),E(e,a),C(l,a,null),E(a,o),C(u,a,null),E(a,b),C(m,a,null),c=!0},p(_,[d]){const w={};d&256&&(w.choices=_[8]),!r&&d&64&&(r=!0,w.value=_[6],z(()=>r=!1)),t.$set(w),_[0]?f?(f.p(_,d),d&1&&k(f,1)):(f=Re(_),f.c(),k(f,1),f.m(e,s)):f&&(x(),y(f,1,1,()=>{f=null}),ee());const D={};d&2&&(D.disabled=_[1]),d&33554432&&(D.$$scope={dirty:d,ctx:_}),l.$set(D);const $={};d&33554432&&($.$$scope={dirty:d,ctx:_}),u.$set($);const g={};d&4&&(g.disabled=_[2]),d&33554432&&(g.$$scope={dirty:d,ctx:_}),m.$set(g)},i(_){c||(k(t.$$.fragment,_),k(f),k(l.$$.fragment,_),k(u.$$.fragment,_),k(m.$$.fragment,_),c=!0)},o(_){y(t.$$.fragment,_),y(f),y(l.$$.fragment,_),y(u.$$.fragment,_),y(m.$$.fragment,_),c=!1},d(_){_&&v(e),N(t),f&&f.d(),N(l),N(u),N(m)}}}function At(i,e,t){let r,n,s;ce(i,V,B=>t(7,s=B));let{value:a}=e,{isFirst:l}=e,{isLast:o}=e,{sectionType:u}=e,{leftFeature:b}=e,{rightFeature:m}=e,c=ze(),p=typeof a=="object"?`custom_${a.custom}`:a;function h(B){B.startsWith("custom_")?t(0,a={custom:B.slice(7)}):t(0,a=B)}function f(B){t(6,p=typeof B=="object"?`custom_${B.custom}`:B)}function _(B){let ne=se(Xe);for(let[$e,de]of Object.entries(B))ne.push([`custom_${$e}`,`Custom: ${de.name}`]);return ne}function d(B){p=B,t(6,p)}const w=()=>c("addLeftBuffer"),D=()=>c("addRightBuffer"),$=()=>{c("addRightBuffer"),c("addLeftBuffer")},g=()=>c("moveLeft"),q=()=>c("delete"),j=()=>c("moveRight");return i.$$set=B=>{"value"in B&&t(0,a=B.value),"isFirst"in B&&t(1,l=B.isFirst),"isLast"in B&&t(2,o=B.isLast),"sectionType"in B&&t(3,u=B.sectionType),"leftFeature"in B&&t(4,b=B.leftFeature),"rightFeature"in B&&t(5,m=B.rightFeature)},i.$$.update=()=>{i.$$.dirty&49&&t(9,r=a&&pt(a,b,m)),i.$$.dirty&64&&h(p),i.$$.dirty&1&&f(a),i.$$.dirty&128&&t(8,n=_(s.proposed.customFeatures))},[a,l,o,u,b,m,p,s,n,r,c,d,w,D,$,g,q,j]}class jt extends le{constructor(e){super(),oe(this,e,At,Vt,ae,{value:0,isFirst:1,isLast:2,sectionType:3,leftFeature:4,rightFeature:5})}}function qe(i,e,t){const r=i.slice();return r[18]=e[t],r[19]=e,r[20]=t,r}function Ut(i){let e;return{c(){e=M("Add feature")},l(t){e=W(t,"Add feature")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function Ve(i,e){let t,r,n,s;function a(p){e[10](p,e[18],e[19],e[20])}function l(){return e[11](e[20])}function o(){return e[12](e[20])}function u(){return e[13](e[20])}function b(){return e[14](e[20])}function m(){return e[15](e[20])}let c={isFirst:e[20]==0,isLast:e[20]==e[0].length-1,leftFeature:e[20]==0?"":e[0][e[20]-1],rightFeature:e[20]==e[0].length-1?"":e[0][e[20]+1],sectionType:e[1]};return e[18]!==void 0&&(c.value=e[18]),r=new jt({props:c}),H.push(()=>G(r,"value",a)),r.$on("delete",l),r.$on("moveLeft",o),r.$on("moveRight",u),r.$on("addLeftBuffer",b),r.$on("addRightBuffer",m),{key:i,first:null,c(){t=Z(),S(r.$$.fragment),this.h()},l(p){t=Z(),L(r.$$.fragment,p),this.h()},h(){this.first=t},m(p,h){F(p,t,h),C(r,p,h),s=!0},p(p,h){e=p;const f={};h&1&&(f.isFirst=e[20]==0),h&1&&(f.isLast=e[20]==e[0].length-1),h&1&&(f.leftFeature=e[20]==0?"":e[0][e[20]-1]),h&1&&(f.rightFeature=e[20]==e[0].length-1?"":e[0][e[20]+1]),h&2&&(f.sectionType=e[1]),!n&&h&1&&(n=!0,f.value=e[18],z(()=>n=!1)),r.$set(f)},i(p){s||(k(r.$$.fragment,p),s=!0)},o(p){y(r.$$.fragment,p),s=!1},d(p){p&&v(t),N(r,p)}}}function Jt(i){let e,t,r,n=[],s=new Map,a,l,o,u,b=i[3].toFixed(2)+"",m,c;e=new te({props:{$$slots:{default:[Ut]},$$scope:{ctx:i}}}),e.$on("click",i[4]);let p=ue(i[0]);const h=f=>f[20];for(let f=0;f<p.length;f+=1){let _=qe(i,p,f),d=h(_);s.set(d,n[f]=Ve(d,_))}return{c(){S(e.$$.fragment),t=R(),r=O("div");for(let f=0;f<n.length;f+=1)n[f].c();a=R(),l=O("p"),o=M("Total width required (m): "),u=O("b"),m=M(b),this.h()},l(f){L(e.$$.fragment,f),t=I(f),r=P(f,"DIV",{style:!0});var _=A(r);for(let D=0;D<n.length;D+=1)n[D].l(_);_.forEach(v),a=I(f),l=P(f,"P",{});var d=A(l);o=W(d,"Total width required (m): "),u=P(d,"B",{});var w=A(u);m=W(w,b),w.forEach(v),d.forEach(v),this.h()},h(){fe(r,"display","flex"),fe(r,"flex-direction","row"),fe(r,"overflow-x","scroll")},m(f,_){C(e,f,_),F(f,t,_),F(f,r,_);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(r,null);i[16](r),F(f,a,_),F(f,l,_),E(l,o),E(l,u),E(u,m),c=!0},p(f,[_]){const d={};_&2097152&&(d.$$scope={dirty:_,ctx:f}),e.$set(d),_&483&&(p=ue(f[0]),x(),n=Ye(n,_,h,1,f,p,s,r,Ke,Ve,null,qe),ee()),(!c||_&8)&&b!==(b=f[3].toFixed(2)+"")&&re(m,b)},i(f){if(!c){k(e.$$.fragment,f);for(let _=0;_<p.length;_+=1)k(n[_]);c=!0}},o(f){y(e.$$.fragment,f);for(let _=0;_<n.length;_+=1)y(n[_]);c=!1},d(f){f&&(v(t),v(r),v(a),v(l)),N(e,f);for(let _=0;_<n.length;_+=1)n[_].d();i[16](null)}}}function Ht(i,e,t){let r,n;ce(i,V,g=>t(9,n=g));let{streetFeaturesLeftToRight:s}=e,{sectionType:a}=e,l,o=!1;ut(()=>{o&&(o=!1,t(2,l.scrollLeft=l.scrollWidth,l))});function u(){t(0,s=[...s,""]),o=!0}function b(g){s.splice(g,1),t(0,s)}function m(g){t(0,[s[g-1],s[g]]=[s[g],s[g-1]],s)}function c(g){t(0,[s[g+1],s[g]]=[s[g],s[g+1]],s)}function p(g){s.splice(g,0,"Buffer / Verge"),t(0,s)}function h(g,q,j,B){j[B]=g,t(0,s)}const f=g=>b(g),_=g=>m(g),d=g=>c(g),w=g=>p(g),D=g=>p(g+1);function $(g){H[g?"unshift":"push"](()=>{l=g,t(2,l)})}return i.$$set=g=>{"streetFeaturesLeftToRight"in g&&t(0,s=g.streetFeaturesLeftToRight),"sectionType"in g&&t(1,a=g.sectionType)},i.$$.update=()=>{i.$$.dirty&514&&t(3,r=dt(n,a))},[s,a,l,r,u,b,m,c,p,n,h,f,_,d,w,D,$]}class tt extends le{constructor(e){super(),oe(this,e,Ht,Jt,ae,{streetFeaturesLeftToRight:0,sectionType:1})}}function zt(i){let e;return{c(){e=M("Confirm")},l(t){e=W(t,"Confirm")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function Gt(i){let e;return{c(){e=M("Cancel")},l(t){e=W(t,"Cancel")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function Yt(i){let e,t,r,n,s,a,l,o,u,b,m,c;function p(d){i[6](d)}let h={label:"Name"};i[0]!==void 0&&(h.value=i[0]),e=new gt({props:h}),H.push(()=>G(e,"value",p));function f(d){i[7](d)}let _={label:"Minimum width (m)",width:4,min:0};return i[1]!==void 0&&(_.value=i[1]),n=new mt({props:_}),H.push(()=>G(n,"value",f)),l=new xe({props:{errorMessage:i[2]}}),u=new ht({props:{disabled:i[2]!="",$$slots:{default:[zt]},$$scope:{ctx:i}}}),u.$on("click",i[8]),m=new te({props:{$$slots:{default:[Gt]},$$scope:{ctx:i}}}),m.$on("click",i[9]),{c(){S(e.$$.fragment),r=R(),S(n.$$.fragment),a=R(),S(l.$$.fragment),o=R(),S(u.$$.fragment),b=R(),S(m.$$.fragment)},l(d){L(e.$$.fragment,d),r=I(d),L(n.$$.fragment,d),a=I(d),L(l.$$.fragment,d),o=I(d),L(u.$$.fragment,d),b=I(d),L(m.$$.fragment,d)},m(d,w){C(e,d,w),F(d,r,w),C(n,d,w),F(d,a,w),C(l,d,w),F(d,o,w),C(u,d,w),F(d,b,w),C(m,d,w),c=!0},p(d,w){const D={};!t&&w&1&&(t=!0,D.value=d[0],z(()=>t=!1)),e.$set(D);const $={};!s&&w&2&&(s=!0,$.value=d[1],z(()=>s=!1)),n.$set($);const g={};w&4&&(g.errorMessage=d[2]),l.$set(g);const q={};w&4&&(q.disabled=d[2]!=""),w&4096&&(q.$$scope={dirty:w,ctx:d}),u.$set(q);const j={};w&4096&&(j.$$scope={dirty:w,ctx:d}),m.$set(j)},i(d){c||(k(e.$$.fragment,d),k(n.$$.fragment,d),k(l.$$.fragment,d),k(u.$$.fragment,d),k(m.$$.fragment,d),c=!0)},o(d){y(e.$$.fragment,d),y(n.$$.fragment,d),y(l.$$.fragment,d),y(u.$$.fragment,d),y(m.$$.fragment,d),c=!1},d(d){d&&(v(r),v(a),v(o),v(b)),N(e,d),N(n,d),N(l,d),N(u,d),N(m,d)}}}function Kt(i){let e,t;return e=new bt({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[Yt]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,[n]){const s={};n&4103&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Qt(i,e,t){let r,n;ce(i,V,f=>t(10,n=f));let{initialName:s}=e,{initialWidth:a}=e,l=ze(),o=s,u=a;function b(f,_){return f==""?"Name must be specified":f!=s&&Object.values(n.proposed.customFeatures).some(d=>d.name==f)?"That name is already used by another custom feature":Xe.includes(f)?"That name is the same as one of the built-in features":isNaN(_)?"Enter a valid width":_<=0?"Enter a positive width":""}function m(f){o=f,t(0,o)}function c(f){u=f,t(1,u)}const p=()=>l("confirm",{name:o,width:u}),h=()=>l("cancel");return i.$$set=f=>{"initialName"in f&&t(4,s=f.initialName),"initialWidth"in f&&t(5,a=f.initialWidth)},i.$$.update=()=>{i.$$.dirty&3&&t(2,r=b(o,u))},[o,u,r,l,s,a,m,c,p,h]}class Xt extends le{constructor(e){super(),oe(this,e,Qt,Kt,ae,{initialName:4,initialWidth:5})}}function Ae(i,e,t){const r=i.slice();return r[9]=e[t],r}function Zt(i){let e;return{c(){e=M("Add feature")},l(t){e=W(t,"Add feature")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function xt(i){let e;return{c(){e=M("Edit")},l(t){e=W(t,"Edit")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function er(i){let e;return{c(){e=M("Delete")},l(t){e=W(t,"Delete")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function je(i,e){let t,r,n,s=e[1].proposed.customFeatures[e[9]].name+"",a,l,o=e[1].proposed.customFeatures[e[9]].width+"",u,b,m,c,p,h,f,_;function d(){return e[6](e[9])}c=new te({props:{$$slots:{default:[xt]},$$scope:{ctx:e}}}),c.$on("click",d);function w(){return e[7](e[9])}return h=new Qe({props:{$$slots:{default:[er]},$$scope:{ctx:e}}}),h.$on("click",w),{key:i,first:null,c(){t=O("li"),r=O("span"),n=O("u"),a=M(s),l=M(`
        : `),u=M(o),b=M(" m minimum width"),m=R(),S(c.$$.fragment),p=R(),S(h.$$.fragment),f=R(),this.h()},l(D){t=P(D,"LI",{});var $=A(t);r=P($,"SPAN",{});var g=A(r);n=P(g,"U",{});var q=A(n);a=W(q,s),q.forEach(v),l=W(g,`
        : `),u=W(g,o),b=W(g," m minimum width"),g.forEach(v),m=I($),L(c.$$.fragment,$),p=I($),L(h.$$.fragment,$),f=I($),$.forEach(v),this.h()},h(){this.first=t},m(D,$){F(D,t,$),E(t,r),E(r,n),E(n,a),E(r,l),E(r,u),E(r,b),E(t,m),C(c,t,null),E(t,p),C(h,t,null),E(t,f),_=!0},p(D,$){e=D,(!_||$&2)&&s!==(s=e[1].proposed.customFeatures[e[9]].name+"")&&re(a,s),(!_||$&2)&&o!==(o=e[1].proposed.customFeatures[e[9]].width+"")&&re(u,o);const g={};$&4096&&(g.$$scope={dirty:$,ctx:e}),c.$set(g);const q={};$&4096&&(q.$$scope={dirty:$,ctx:e}),h.$set(q)},i(D){_||(k(c.$$.fragment,D),k(h.$$.fragment,D),_=!0)},o(D){y(c.$$.fragment,D),y(h.$$.fragment,D),_=!1},d(D){D&&v(t),N(c),N(h)}}}function Ue(i){let e,t;return e=new Xt({props:{initialName:i[0].initialName,initialWidth:i[0].initialWidth}}),e.$on("cancel",i[8]),e.$on("confirm",i[5]),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&1&&(s.initialName=r[0].initialName),n&1&&(s.initialWidth=r[0].initialWidth),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function tr(i){let e,t,r,n=[],s=new Map,a,l,o;e=new te({props:{$$slots:{default:[Zt]},$$scope:{ctx:i}}}),e.$on("click",i[2]);let u=ue(Object.keys(i[1].proposed.customFeatures));const b=c=>c[9];for(let c=0;c<u.length;c+=1){let p=Ae(i,u,c),h=b(p);s.set(h,n[c]=je(h,p))}let m=i[0]&&Ue(i);return{c(){S(e.$$.fragment),t=R(),r=O("ol");for(let c=0;c<n.length;c+=1)n[c].c();a=R(),m&&m.c(),l=Z()},l(c){L(e.$$.fragment,c),t=I(c),r=P(c,"OL",{});var p=A(r);for(let h=0;h<n.length;h+=1)n[h].l(p);p.forEach(v),a=I(c),m&&m.l(c),l=Z()},m(c,p){C(e,c,p),F(c,t,p),F(c,r,p);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(r,null);F(c,a,p),m&&m.m(c,p),F(c,l,p),o=!0},p(c,[p]){const h={};p&4096&&(h.$$scope={dirty:p,ctx:c}),e.$set(h),p&26&&(u=ue(Object.keys(c[1].proposed.customFeatures)),x(),n=Ye(n,p,b,1,c,u,s,r,Ke,je,null,Ae),ee()),c[0]?m?(m.p(c,p),p&1&&k(m,1)):(m=Ue(c),m.c(),k(m,1),m.m(l.parentNode,l)):m&&(x(),y(m,1,1,()=>{m=null}),ee())},i(c){if(!o){k(e.$$.fragment,c);for(let p=0;p<u.length;p+=1)k(n[p]);k(m),o=!0}},o(c){y(e.$$.fragment,c);for(let p=0;p<n.length;p+=1)y(n[p]);y(m),o=!1},d(c){c&&(v(t),v(r),v(a),v(l)),N(e,c);for(let p=0;p<n.length;p+=1)n[p].d();m&&m.d(c)}}}function rr(i,e,t){let r;ce(i,V,c=>t(1,r=c));let n=null;function s(){t(0,n={id:et(),initialName:"",initialWidth:0})}function a(c){let p=r.proposed.customFeatures[c].name,h=JSON.stringify({custom:c});if(r.proposed.desirableMinimumCrossSection.some(f=>JSON.stringify(f)==h)){window.alert(`The ${p} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(r.proposed.absoluteMinimumCrossSection.some(f=>JSON.stringify(f)==h)){window.alert(`The ${p} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete r.proposed.customFeatures[c],V.set(r)}function l(c){t(0,n={id:c,initialName:r.proposed.customFeatures[c].name,initialWidth:r.proposed.customFeatures[c].width})}function o(c){Ge(V,r.proposed.customFeatures[n.id]={name:c.detail.name,width:c.detail.width},r),V.set(r),t(0,n=null)}return[n,r,s,a,l,o,c=>l(c),c=>a(c),()=>t(0,n=null)]}class nr extends le{constructor(e){super(),oe(this,e,rr,tr,ae,{})}}function Je(i){let e,t,r,n,s;return{c(){e=O("p"),t=O("i"),r=M("Effective speed limit, based on the limit and 85 percentile: "),n=M(i[1]),s=M(`
            mph`)},l(a){e=P(a,"P",{});var l=A(e);t=P(l,"I",{});var o=A(t);r=W(o,"Effective speed limit, based on the limit and 85 percentile: "),n=W(o,i[1]),s=W(o,`
            mph`),o.forEach(v),l.forEach(v)},m(a,l){F(a,e,l),E(e,t),E(t,r),E(t,n),E(t,s)},p(a,l){l&2&&re(n,a[1])},d(a){a&&v(e)}}}function ir(i){let e,t,r,n,s,a,l,o,u,b,m,c,p,h,f,_,d,w,D,$,g,q,j,B,ne;function $e(T){i[4](T)}let de={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:se(["<200","200-800",">800"])};i[0].proposed.trafficData.flowOneWay!==void 0&&(de.value=i[0].proposed.trafficData.flowOneWay),r=new ie({props:de}),H.push(()=>G(r,"value",$e));function rt(T){i[5](T)}let ve={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:se(["<300","300-1,000",">1,000"])};i[0].proposed.trafficData.flowTwoWay!==void 0&&(ve.value=i[0].proposed.trafficData.flowTwoWay),a=new ie({props:ve}),H.push(()=>G(a,"value",rt));function nt(T){i[6](T)}let we={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:se(["<300",">300"])};i[0].proposed.trafficData.flowSharedUse!==void 0&&(we.value=i[0].proposed.trafficData.flowSharedUse),u=new ie({props:we}),H.push(()=>G(u,"value",nt));function it(T){i[7](T)}let ke={label:"Traffic flow (vpd)",emptyOption:!0,choices:se(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};i[0].proposed.trafficData.trafficFlow!==void 0&&(ke.value=i[0].proposed.trafficData.trafficFlow),c=new ie({props:ke}),H.push(()=>G(c,"value",it));let U=i[1]&&Je(i);function st(T){i[8](T)}let ye={label:"Speed limit (MPH)",emptyOption:!0,choices:i[2]};i[0].proposed.trafficData.speedLimit!==void 0&&(ye.value=i[0].proposed.trafficData.speedLimit),d=new ie({props:ye}),H.push(()=>G(d,"value",st));function at(T){i[9](T)}let Fe={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};i[0].proposed.trafficData.observedSpeed!==void 0&&(Fe.value=i[0].proposed.trafficData.observedSpeed),$=new yt({props:Fe}),H.push(()=>G($,"value",at));function lt(T){i[10](T)}let De={label:"Street function",emptyOption:!0,choices:se(["High Street (active frontages)","Residential street","Local distributor road"])};return i[0].proposed.trafficData.streetFunction!==void 0&&(De.value=i[0].proposed.trafficData.streetFunction),j=new ie({props:De}),H.push(()=>G(j,"value",lt)),{c(){e=O("div"),t=O("div"),S(r.$$.fragment),s=R(),S(a.$$.fragment),o=R(),S(u.$$.fragment),m=R(),S(c.$$.fragment),h=R(),f=O("div"),U&&U.c(),_=R(),S(d.$$.fragment),D=R(),S($.$$.fragment),q=R(),S(j.$$.fragment),this.h()},l(T){e=P(T,"DIV",{class:!0});var J=A(e);t=P(J,"DIV",{class:!0});var K=A(t);L(r.$$.fragment,K),s=I(K),L(a.$$.fragment,K),o=I(K),L(u.$$.fragment,K),m=I(K),L(c.$$.fragment,K),K.forEach(v),h=I(J),f=P(J,"DIV",{class:!0});var Q=A(f);U&&U.l(Q),_=I(Q),L(d.$$.fragment,Q),D=I(Q),L($.$$.fragment,Q),q=I(Q),L(j.$$.fragment,Q),Q.forEach(v),J.forEach(v),this.h()},h(){X(t,"class","govuk-grid-column-one-half"),X(f,"class","govuk-grid-column-one-half"),X(e,"class","govuk-grid-row")},m(T,J){F(T,e,J),E(e,t),C(r,t,null),E(t,s),C(a,t,null),E(t,o),C(u,t,null),E(t,m),C(c,t,null),E(e,h),E(e,f),U&&U.m(f,null),E(f,_),C(d,f,null),E(f,D),C($,f,null),E(f,q),C(j,f,null),ne=!0},p(T,J){const K={};!n&&J&1&&(n=!0,K.value=T[0].proposed.trafficData.flowOneWay,z(()=>n=!1)),r.$set(K);const Q={};!l&&J&1&&(l=!0,Q.value=T[0].proposed.trafficData.flowTwoWay,z(()=>l=!1)),a.$set(Q);const Te={};!b&&J&1&&(b=!0,Te.value=T[0].proposed.trafficData.flowSharedUse,z(()=>b=!1)),u.$set(Te);const Se={};!p&&J&1&&(p=!0,Se.value=T[0].proposed.trafficData.trafficFlow,z(()=>p=!1)),c.$set(Se),T[1]?U?U.p(T,J):(U=Je(T),U.c(),U.m(f,_)):U&&(U.d(1),U=null);const Le={};!w&&J&1&&(w=!0,Le.value=T[0].proposed.trafficData.speedLimit,z(()=>w=!1)),d.$set(Le);const Ce={};!g&&J&1&&(g=!0,Ce.value=T[0].proposed.trafficData.observedSpeed,z(()=>g=!1)),$.$set(Ce);const Ne={};!B&&J&1&&(B=!0,Ne.value=T[0].proposed.trafficData.streetFunction,z(()=>B=!1)),j.$set(Ne)},i(T){ne||(k(r.$$.fragment,T),k(a.$$.fragment,T),k(u.$$.fragment,T),k(c.$$.fragment,T),k(d.$$.fragment,T),k($.$$.fragment,T),k(j.$$.fragment,T),ne=!0)},o(T){y(r.$$.fragment,T),y(a.$$.fragment,T),y(u.$$.fragment,T),y(c.$$.fragment,T),y(d.$$.fragment,T),y($.$$.fragment,T),y(j.$$.fragment,T),ne=!1},d(T){T&&v(e),N(r),N(a),N(u),N(c),U&&U.d(),N(d),N($),N(j)}}}function sr(i){let e,t;return e=new me({props:{label:"Traffic data and additional information",open:!0,$$slots:{default:[ir]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,[n]){const s={};n&2051&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function ar(i,e,t){let r,n;ce(i,V,h=>t(0,n=h));let{valid:s}=e,a=se(ct);function l(h){i.$$.not_equal(n.proposed.trafficData.flowOneWay,h)&&(n.proposed.trafficData.flowOneWay=h,V.set(n))}function o(h){i.$$.not_equal(n.proposed.trafficData.flowTwoWay,h)&&(n.proposed.trafficData.flowTwoWay=h,V.set(n))}function u(h){i.$$.not_equal(n.proposed.trafficData.flowSharedUse,h)&&(n.proposed.trafficData.flowSharedUse=h,V.set(n))}function b(h){i.$$.not_equal(n.proposed.trafficData.trafficFlow,h)&&(n.proposed.trafficData.trafficFlow=h,V.set(n))}function m(h){i.$$.not_equal(n.proposed.trafficData.speedLimit,h)&&(n.proposed.trafficData.speedLimit=h,V.set(n))}function c(h){i.$$.not_equal(n.proposed.trafficData.observedSpeed,h)&&(n.proposed.trafficData.observedSpeed=h,V.set(n))}function p(h){i.$$.not_equal(n.proposed.trafficData.streetFunction,h)&&(n.proposed.trafficData.streetFunction=h,V.set(n))}return i.$$set=h=>{"valid"in h&&t(3,s=h.valid)},i.$$.update=()=>{i.$$.dirty&1&&t(3,s=n.proposed.trafficData.flowOneWay!=""&&n.proposed.trafficData.flowTwoWay!=""&&n.proposed.trafficData.flowSharedUse!=""&&n.proposed.trafficData.trafficFlow!=""&&n.proposed.trafficData.speedLimit!=""&&n.proposed.trafficData.observedSpeed!=null&&n.proposed.trafficData.streetFunction!=""),i.$$.dirty&1&&t(1,r=Ze(n.proposed.trafficData.speedLimit,n.proposed.trafficData.observedSpeed))},[n,r,a,s,l,o,u,b,m,c,p]}class lr extends le{constructor(e){super(),oe(this,e,ar,sr,ae,{valid:3})}}function or(i){let e,t;return e=new nr({}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function fr(i){let e,t="Fill out all traffic data above to continue";return{c(){e=O("p"),e.textContent=t},l(r){e=P(r,"P",{"data-svelte-h":!0}),ge(e)!=="svelte-72a5ry"&&(e.textContent=t)},m(r,n){F(r,e,n)},p:pe,i:pe,o:pe,d(r){r&&v(e)}}}function ur(i){let e,t,r,n;return e=new me({props:{label:"Desirable Minimum Cross-Section",open:!0,$$slots:{default:[cr]},$$scope:{ctx:i}}}),r=new me({props:{label:"Absolute Minimum Cross-Section",open:!0,$$slots:{default:[dr]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment),t=R(),S(r.$$.fragment)},l(s){L(e.$$.fragment,s),t=I(s),L(r.$$.fragment,s)},m(s,a){C(e,s,a),F(s,t,a),C(r,s,a),n=!0},p(s,a){const l={};a&66&&(l.$$scope={dirty:a,ctx:s}),e.$set(l);const o={};a&66&&(o.$$scope={dirty:a,ctx:s}),r.$set(o)},i(s){n||(k(e.$$.fragment,s),k(r.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),y(r.$$.fragment,s),n=!1},d(s){s&&v(t),N(e,s),N(r,s)}}}function cr(i){let e,t,r;function n(a){i[4](a)}let s={sectionType:"Desirable"};return i[1].proposed.desirableMinimumCrossSection!==void 0&&(s.streetFeaturesLeftToRight=i[1].proposed.desirableMinimumCrossSection),e=new tt({props:s}),H.push(()=>G(e,"streetFeaturesLeftToRight",n)),{c(){S(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,l){C(e,a,l),r=!0},p(a,l){const o={};!t&&l&2&&(t=!0,o.streetFeaturesLeftToRight=a[1].proposed.desirableMinimumCrossSection,z(()=>t=!1)),e.$set(o)},i(a){r||(k(e.$$.fragment,a),r=!0)},o(a){y(e.$$.fragment,a),r=!1},d(a){N(e,a)}}}function He(i){let e,t;return e=new te({props:{$$slots:{default:[pr]},$$scope:{ctx:i}}}),e.$on("click",i[2]),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function pr(i){let e;return{c(){e=M("Copy Desirable Minimum")},l(t){e=W(t,"Copy Desirable Minimum")},m(t,r){F(t,e,r)},d(t){t&&v(e)}}}function dr(i){let e,t,r,n,s=i[1].proposed.absoluteMinimumCrossSection.length==0&&He(i);function a(o){i[5](o)}let l={sectionType:"Absolute"};return i[1].proposed.absoluteMinimumCrossSection!==void 0&&(l.streetFeaturesLeftToRight=i[1].proposed.absoluteMinimumCrossSection),t=new tt({props:l}),H.push(()=>G(t,"streetFeaturesLeftToRight",a)),{c(){s&&s.c(),e=R(),S(t.$$.fragment)},l(o){s&&s.l(o),e=I(o),L(t.$$.fragment,o)},m(o,u){s&&s.m(o,u),F(o,e,u),C(t,o,u),n=!0},p(o,u){o[1].proposed.absoluteMinimumCrossSection.length==0?s?(s.p(o,u),u&2&&k(s,1)):(s=He(o),s.c(),k(s,1),s.m(e.parentNode,e)):s&&(x(),y(s,1,1,()=>{s=null}),ee());const b={};!r&&u&2&&(r=!0,b.streetFeaturesLeftToRight=o[1].proposed.absoluteMinimumCrossSection,z(()=>r=!1)),t.$set(b)},i(o){n||(k(s),k(t.$$.fragment,o),n=!0)},o(o){y(s),y(t.$$.fragment,o),n=!1},d(o){o&&v(e),s&&s.d(o),N(t,o)}}}function mr(i){let e,t,r,n,s,a,l,o,u;function b(f){i[3](f)}let m={};i[0]!==void 0&&(m.valid=i[0]),e=new lr({props:m}),H.push(()=>G(e,"valid",b)),n=new me({props:{label:"Custom Street Features",$$slots:{default:[or]},$$scope:{ctx:i}}});const c=[ur,fr],p=[];function h(f,_){return f[0]?0:1}return a=h(i),l=p[a]=c[a](i),{c(){S(e.$$.fragment),r=R(),S(n.$$.fragment),s=R(),l.c(),o=Z()},l(f){L(e.$$.fragment,f),r=I(f),L(n.$$.fragment,f),s=I(f),l.l(f),o=Z()},m(f,_){C(e,f,_),F(f,r,_),C(n,f,_),F(f,s,_),p[a].m(f,_),F(f,o,_),u=!0},p(f,[_]){const d={};!t&&_&1&&(t=!0,d.valid=f[0],z(()=>t=!1)),e.$set(d);const w={};_&64&&(w.$$scope={dirty:_,ctx:f}),n.$set(w);let D=a;a=h(f),a===D?p[a].p(f,_):(x(),y(p[D],1,1,()=>{p[D]=null}),ee(),l=p[a],l?l.p(f,_):(l=p[a]=c[a](f),l.c()),k(l,1),l.m(o.parentNode,o))},i(f){u||(k(e.$$.fragment,f),k(n.$$.fragment,f),k(l),u=!0)},o(f){y(e.$$.fragment,f),y(n.$$.fragment,f),y(l),u=!1},d(f){f&&(v(r),v(s),v(o)),N(e,f),N(n,f),p[a].d(f)}}}function _r(i,e,t){let r;ce(i,V,u=>t(1,r=u));let n=!1;function s(){Ge(V,r.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(r.proposed.desirableMinimumCrossSection)),r)}function a(u){n=u,t(0,n)}function l(u){i.$$.not_equal(r.proposed.desirableMinimumCrossSection,u)&&(r.proposed.desirableMinimumCrossSection=u,V.set(r))}function o(u){i.$$.not_equal(r.proposed.absoluteMinimumCrossSection,u)&&(r.proposed.absoluteMinimumCrossSection=u,V.set(r))}return[n,r,s,a,l,o]}class Br extends le{constructor(e){super(),oe(this,e,_r,mr,ae,{})}}export{Br as component};
