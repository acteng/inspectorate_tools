import{s as fe,a as M,e as U,g as R,c as j,r as ne,i as v,C as Oe,z as We,f as g,B as lt,v as Y,w as Q,b as J,x as de,h as W,k as ge,R as ze,t as q,D as se,d as I,j as x,p as ke,q as ot,n as $e,V as ft,T as Ye}from"../chunks/scheduler.BBS-fkhU.js";import{S as ue,i as ce,c as C,a as N,m as E,t as w,b as F,d as O,e as X,g as ae,f as le}from"../chunks/index.B8H3ypVf.js";import{e as _e,u as Ke,o as Qe}from"../chunks/each.D79A5KlB.js";import"../chunks/paths.DquDWg-n.js";import{S as oe,W as Xe}from"../chunks/WarningButton.CaqyhU7y.js";import{W as ut}from"../chunks/WarningText.BbLDYiUO.js";import{S as pe}from"../chunks/Select.DqyoFzIJ.js";import{E as ct}from"../chunks/ExternalLink.RofZqUC8.js";/* empty css                                                               */import{s as G,a as Ze,b as pt}from"../chunks/data.DoBj7_iL.js";import{a as xe,n as dt,g as mt,c as ht}from"../chunks/logic.Ct59EqJd.js";import{D as _t,C as be}from"../chunks/DefaultButton.Pbp5mObw.js";import{E as et}from"../chunks/ErrorMessage.BCIKj4J0.js";import{T as gt}from"../chunks/TextInput.C_aBwF72.js";import{D as $t}from"../chunks/DecimalInput.B1u8YNyQ.js";import{M as bt}from"../chunks/Modal.BeZKr1PV.js";import{F as vt,v as tt}from"../chunks/FormElement.Cy4womqK.js";import{p as he}from"../chunks/index.Cj6kLlHO.js";function wt(n){let e,t,i,r,s,l,o;return e=new et({props:{errorMessage:n[5](n[2])}}),{c(){C(e.$$.fragment),t=M(),i=U("input"),this.h()},l(a){N(e.$$.fragment,a),t=R(a),i=j(a,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){ne(i,"type","text"),ne(i,"inputmode","numeric"),ne(i,"class",r=`govuk-input govuk-input--width-${n[1]}`),ne(i,"id",n[3])},m(a,f){E(e,a,f),v(a,t,f),v(a,i,f),Oe(i,n[2]),s=!0,l||(o=[We(i,"input",n[9]),We(i,"change",n[4])],l=!0)},p(a,f){const _={};f&4&&(_.errorMessage=a[5](a[2])),e.$set(_),(!s||f&2&&r!==(r=`govuk-input govuk-input--width-${a[1]}`))&&ne(i,"class",r),f&4&&i.value!==a[2]&&Oe(i,a[2])},i(a){s||(w(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(g(t),g(i)),O(e,a),l=!1,lt(o)}}}function kt(n){let e,t;return e=new vt({props:{label:n[0],id:n[3],$$slots:{default:[wt]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,r){E(e,i,r),t=!0},p(i,[r]){const s={};r&1&&(s.label=i[0]),r&1030&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function yt(n,e,t){let{label:i}=e,{value:r}=e,{width:s}=e,{min:l=void 0}=e,{max:o=void 0}=e,a=r==null?void 0:r.toString(),f=tt();function _(){t(6,r=a==null?void 0:parseInt(a,10))}function p(c){if(c==""||c==null)return"";if(c.includes("."))return"Please enter a number without decimals";let h=Number(c);return isNaN(h)?"Please enter a valid number":l!=null&&h<l?`Please enter a number that's at least ${l};`:o!=null&&h>o?`Please enter a number that's at most ${o};`:""}function u(){a=this.value,t(2,a)}return n.$$set=c=>{"label"in c&&t(0,i=c.label),"value"in c&&t(6,r=c.value),"width"in c&&t(1,s=c.width),"min"in c&&t(7,l=c.min),"max"in c&&t(8,o=c.max)},[i,s,a,f,_,p,r,l,o,u]}class Ft extends ue{constructor(e){super(),ce(this,e,yt,kt,fe,{label:0,value:6,width:1,min:7,max:8})}}function Dt(n){let e,t,i;function r(l){n[9](l)}let s={label:n[0],hint:n[1],choices:n[5],emptyOption:n[2],disabled:n[3]};return n[4]!==void 0&&(s.value=n[4]),e=new pe({props:s}),Y.push(()=>X(e,"value",r)),e.$on("change",n[6]),{c(){C(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,o){E(e,l,o),i=!0},p(l,[o]){const a={};o&1&&(a.label=l[0]),o&2&&(a.hint=l[1]),o&32&&(a.choices=l[5]),o&4&&(a.emptyOption=l[2]),o&8&&(a.disabled=l[3]),!t&&o&16&&(t=!0,a.value=l[4],Q(()=>t=!1)),e.$set(a)},i(l){i||(w(e.$$.fragment,l),i=!0)},o(l){F(e.$$.fragment,l),i=!1},d(l){O(e,l)}}}function St(n){return n.map(e=>[JSON.stringify(e[0]),e[1]])}function Lt(n,e,t){let i,r,{label:s}=e,{hint:l=""}=e,{choices:o}=e,{emptyOption:a=!1}=e,{disabled:f=!1}=e,{value:_}=e;function p(){t(7,_=r==""?"":JSON.parse(r))}function u(c){r=c,t(4,r),t(7,_)}return n.$$set=c=>{"label"in c&&t(0,s=c.label),"hint"in c&&t(1,l=c.hint),"choices"in c&&t(8,o=c.choices),"emptyOption"in c&&t(2,a=c.emptyOption),"disabled"in c&&t(3,f=c.disabled),"value"in c&&t(7,_=c.value)},n.$$.update=()=>{n.$$.dirty&256&&t(5,i=St(o)),n.$$.dirty&128&&t(4,r=JSON.stringify(_))},[s,l,a,f,r,i,p,_,o,u]}class Tt extends ue{constructor(e){super(),ce(this,e,Lt,Dt,fe,{label:0,hint:1,choices:8,emptyOption:2,disabled:3,value:7})}}function ve(n){return typeof n=="object"?[]:Ct[n]}let Ct={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",Z(76)],["LTN 1/20 Figure 4.1 pp. 33",Z(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",Z(43)],["LTN 1/20 Figure 4.1 pp. 33",Z(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",Z(43)],["LTN 1/20 Figure 4.1 pp. 33",Z(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",Z(43)],["LTN 1/20 Figure 4.1 pp. 33",Z(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",Z(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",Z(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",Z(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",Z(54)]]};function Z(n){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${n}`}function we(n,e){let t=xe(e.speedLimit,e.observedSpeed);switch(n){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&t==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&t==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Be(n,e,t){const i=n.slice();return i[16]=e[t][0],i[17]=e[t][1],i}function Pe(n){let e,t,i=n[5][0].toFixed(2)+"",r,s,l,o,a=n[5][1].toFixed(2)+"",f,_,p,u,c,h,d,k,$,L,D=ve(n[0]).length>0,T,m=we(n[0],n[3].proposed.trafficData),y,P;u=new oe({props:{disabled:n[1],$$slots:{default:[Nt]},$$scope:{ctx:n}}}),u.$on("click",n[11]),h=new Xe({props:{$$slots:{default:[Et]},$$scope:{ctx:n}}}),h.$on("click",n[12]),k=new oe({props:{disabled:n[2],$$slots:{default:[Ot]},$$scope:{ctx:n}}}),k.$on("click",n[13]);let V=n[6].warning!==""&&Me(n),A=D&&Re(n),H=m&&Ie(n);return{c(){e=U("p"),t=q("Desirable minimum width (m): "),r=q(i),s=M(),l=U("p"),o=q("Absolute minimum width (m): "),f=q(a),_=M(),p=U("div"),C(u.$$.fragment),c=M(),C(h.$$.fragment),d=M(),C(k.$$.fragment),$=M(),V&&V.c(),L=M(),A&&A.c(),T=M(),H&&H.c(),y=se(),this.h()},l(b){e=j(b,"P",{});var B=J(e);t=I(B,"Desirable minimum width (m): "),r=I(B,i),B.forEach(g),s=R(b),l=j(b,"P",{});var re=J(l);o=I(re,"Absolute minimum width (m): "),f=I(re,a),re.forEach(g),_=R(b),p=j(b,"DIV",{style:!0,class:!0});var ee=J(p);N(u.$$.fragment,ee),c=R(ee),N(h.$$.fragment,ee),d=R(ee),N(k.$$.fragment,ee),ee.forEach(g),$=R(b),V&&V.l(b),L=R(b),A&&A.l(b),T=R(b),H&&H.l(b),y=se(),this.h()},h(){de(p,"display","flex"),de(p,"justify-content","space-between"),ne(p,"class","svelte-jig4ga")},m(b,B){v(b,e,B),W(e,t),W(e,r),v(b,s,B),v(b,l,B),W(l,o),W(l,f),v(b,_,B),v(b,p,B),E(u,p,null),W(p,c),E(h,p,null),W(p,d),E(k,p,null),v(b,$,B),V&&V.m(b,B),v(b,L,B),A&&A.m(b,B),v(b,T,B),H&&H.m(b,B),v(b,y,B),P=!0},p(b,B){(!P||B&32)&&i!==(i=b[5][0].toFixed(2)+"")&&x(r,i),(!P||B&32)&&a!==(a=b[5][1].toFixed(2)+"")&&x(f,a);const re={};B&2&&(re.disabled=b[1]),B&1048576&&(re.$$scope={dirty:B,ctx:b}),u.$set(re);const ee={};B&1048576&&(ee.$$scope={dirty:B,ctx:b}),h.$set(ee);const me={};B&4&&(me.disabled=b[2]),B&1048576&&(me.$$scope={dirty:B,ctx:b}),k.$set(me),b[6].warning!==""?V?(V.p(b,B),B&64&&w(V,1)):(V=Me(b),V.c(),w(V,1),V.m(L.parentNode,L)):V&&(ae(),F(V,1,1,()=>{V=null}),le()),B&1&&(D=ve(b[0]).length>0),D?A?(A.p(b,B),B&1&&w(A,1)):(A=Re(b),A.c(),w(A,1),A.m(T.parentNode,T)):A&&(ae(),F(A,1,1,()=>{A=null}),le()),B&9&&(m=we(b[0],b[3].proposed.trafficData)),m?H?H.p(b,B):(H=Ie(b),H.c(),H.m(y.parentNode,y)):H&&(H.d(1),H=null)},i(b){P||(w(u.$$.fragment,b),w(h.$$.fragment,b),w(k.$$.fragment,b),w(V),w(A),P=!0)},o(b){F(u.$$.fragment,b),F(h.$$.fragment,b),F(k.$$.fragment,b),F(V),F(A),P=!1},d(b){b&&(g(e),g(s),g(l),g(_),g(p),g($),g(L),g(T),g(y)),O(u),O(h),O(k),V&&V.d(b),A&&A.d(b),H&&H.d(b)}}}function Nt(n){let e;return{c(){e=q("←")},l(t){e=I(t,"←")},m(t,i){v(t,e,i)},d(t){t&&g(e)}}}function Et(n){let e;return{c(){e=q("Delete")},l(t){e=I(t,"Delete")},m(t,i){v(t,e,i)},d(t){t&&g(e)}}}function Ot(n){let e;return{c(){e=q("→")},l(t){e=I(t,"→")},m(t,i){v(t,e,i)},d(t){t&&g(e)}}}function Me(n){let e,t;return e=new ut({props:{$$slots:{default:[Bt]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,r){E(e,i,r),t=!0},p(i,r){const s={};r&1048640&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function Wt(n){let e,t=n[6].functionsToDispatch.length>1?"s":"",i;return{c(){e=q("Add buffer"),i=q(t)},l(r){e=I(r,"Add buffer"),i=I(r,t)},m(r,s){v(r,e,s),v(r,i,s)},p(r,s){s&64&&t!==(t=r[6].functionsToDispatch.length>1?"s":"")&&x(i,t)},d(r){r&&(g(e),g(i))}}}function Bt(n){let e=n[6].warning+"",t,i,r,s,l,o;return l=new oe({props:{$$slots:{default:[Wt]},$$scope:{ctx:n}}}),l.$on("click",n[14]),{c(){t=q(e),i=M(),r=U("br"),s=M(),C(l.$$.fragment)},l(a){t=I(a,e),i=R(a),r=j(a,"BR",{}),s=R(a),N(l.$$.fragment,a)},m(a,f){v(a,t,f),v(a,i,f),v(a,r,f),v(a,s,f),E(l,a,f),o=!0},p(a,f){(!o||f&64)&&e!==(e=a[6].warning+"")&&x(t,e);const _={};f&1048640&&(_.$$scope={dirty:f,ctx:a}),l.$set(_)},i(a){o||(w(l.$$.fragment,a),o=!0)},o(a){F(l.$$.fragment,a),o=!1},d(a){a&&(g(t),g(i),g(r),g(s)),O(l,a)}}}function Re(n){let e,t="References",i,r,s,l=_e(ve(n[0])),o=[];for(let f=0;f<l.length;f+=1)o[f]=qe(Be(n,l,f));const a=f=>F(o[f],1,1,()=>{o[f]=null});return{c(){e=U("u"),e.textContent=t,i=q(`
      :
      `),r=U("ul");for(let f=0;f<o.length;f+=1)o[f].c()},l(f){e=j(f,"U",{"data-svelte-h":!0}),ke(e)!=="svelte-fk7cdq"&&(e.textContent=t),i=I(f,`
      :
      `),r=j(f,"UL",{});var _=J(r);for(let p=0;p<o.length;p+=1)o[p].l(_);_.forEach(g)},m(f,_){v(f,e,_),v(f,i,_),v(f,r,_);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(r,null);s=!0},p(f,_){if(_&1){l=_e(ve(f[0]));let p;for(p=0;p<l.length;p+=1){const u=Be(f,l,p);o[p]?(o[p].p(u,_),w(o[p],1)):(o[p]=qe(u),o[p].c(),w(o[p],1),o[p].m(r,null))}for(ae(),p=l.length;p<o.length;p+=1)a(p);le()}},i(f){if(!s){for(let _=0;_<l.length;_+=1)w(o[_]);s=!0}},o(f){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)F(o[_]);s=!1},d(f){f&&(g(e),g(i),g(r)),ot(o,f)}}}function Pt(n){let e,t=n[16]+"",i;return{c(){e=U("li"),i=q(t)},l(r){e=j(r,"LI",{});var s=J(e);i=I(s,t),s.forEach(g)},m(r,s){v(r,e,s),W(e,i)},p(r,s){s&1&&t!==(t=r[16]+"")&&x(i,t)},i:$e,o:$e,d(r){r&&g(e)}}}function Mt(n){let e,t,i;return t=new ct({props:{href:n[17],$$slots:{default:[Rt]},$$scope:{ctx:n}}}),{c(){e=U("li"),C(t.$$.fragment)},l(r){e=j(r,"LI",{});var s=J(e);N(t.$$.fragment,s),s.forEach(g)},m(r,s){v(r,e,s),E(t,e,null),i=!0},p(r,s){const l={};s&1&&(l.href=r[17]),s&1048577&&(l.$$scope={dirty:s,ctx:r}),t.$set(l)},i(r){i||(w(t.$$.fragment,r),i=!0)},o(r){F(t.$$.fragment,r),i=!1},d(r){r&&g(e),O(t)}}}function Rt(n){let e=n[16]+"",t;return{c(){t=q(e)},l(i){t=I(i,e)},m(i,r){v(i,t,r)},p(i,r){r&1&&e!==(e=i[16]+"")&&x(t,e)},d(i){i&&g(t)}}}function qe(n){let e,t,i,r;const s=[Mt,Pt],l=[];function o(a,f){return a[17]?0:1}return e=o(n),t=l[e]=s[e](n),{c(){t.c(),i=se()},l(a){t.l(a),i=se()},m(a,f){l[e].m(a,f),v(a,i,f),r=!0},p(a,f){let _=e;e=o(a),e===_?l[e].p(a,f):(ae(),F(l[_],1,1,()=>{l[_]=null}),le(),t=l[e],t?t.p(a,f):(t=l[e]=s[e](a),t.c()),w(t,1),t.m(i.parentNode,i))},i(a){r||(w(t),r=!0)},o(a){F(t),r=!1},d(a){a&&g(i),l[e].d(a)}}}function Ie(n){let e,t="Guidance",i,r,s=we(n[0],n[3].proposed.trafficData)+"",l;return{c(){e=U("u"),e.textContent=t,i=q(`
      :
      `),r=U("p"),l=q(s),this.h()},l(o){e=j(o,"U",{"data-svelte-h":!0}),ke(e)!=="svelte-qh7mhq"&&(e.textContent=t),i=I(o,`
      :
      `),r=j(o,"P",{style:!0});var a=J(r);l=I(a,s),a.forEach(g),this.h()},h(){de(r,"max-width","400px")},m(o,a){v(o,e,a),v(o,i,a),v(o,r,a),W(r,l)},p(o,a){a&9&&s!==(s=we(o[0],o[3].proposed.trafficData)+"")&&x(l,s)},d(o){o&&(g(e),g(i),g(r))}}}function qt(n){let e,t,i,r,s;function l(f){n[10](f)}let o={label:"Street feature type",emptyOption:!0,choices:n[4]};n[0]!==void 0&&(o.value=n[0]),t=new Tt({props:o}),Y.push(()=>X(t,"value",l));let a=n[0]&&Pe(n);return{c(){e=U("div"),C(t.$$.fragment),r=M(),a&&a.c(),this.h()},l(f){e=j(f,"DIV",{style:!0,class:!0});var _=J(e);N(t.$$.fragment,_),r=R(_),a&&a.l(_),_.forEach(g),this.h()},h(){de(e,"width","400px"),ne(e,"class","svelte-jig4ga")},m(f,_){v(f,e,_),E(t,e,null),W(e,r),a&&a.m(e,null),s=!0},p(f,[_]){const p={};_&16&&(p.choices=f[4]),!i&&_&1&&(i=!0,p.value=f[0],Q(()=>i=!1)),t.$set(p),f[0]?a?(a.p(f,_),_&1&&w(a,1)):(a=Pe(f),a.c(),w(a,1),a.m(e,null)):a&&(ae(),F(a,1,1,()=>{a=null}),le())},i(f){s||(w(t.$$.fragment,f),w(a),s=!0)},o(f){F(t.$$.fragment,f),F(a),s=!1},d(f){f&&g(e),O(t),a&&a.d()}}}function It(n,e,t){let i,r,s,l;ge(n,G,D=>t(3,l=D));let{value:o}=e,{isFirst:a}=e,{isLast:f}=e,{leftFeature:_}=e,{rightFeature:p}=e,u=ze();function c(D){let T=Ze.map(m=>[m,m]);for(let[m,y]of Object.entries(D))T.push([{custom:m},`Custom: ${y.name}`]);return T}function h(D){o=D,t(0,o)}const d=()=>u("moveLeft"),k=()=>u("delete"),$=()=>u("moveRight"),L=()=>{i.functionsToDispatch.forEach(D=>{u(D)})};return n.$$set=D=>{"value"in D&&t(0,o=D.value),"isFirst"in D&&t(1,a=D.isFirst),"isLast"in D&&t(2,f=D.isLast),"leftFeature"in D&&t(8,_=D.leftFeature),"rightFeature"in D&&t(9,p=D.rightFeature)},n.$$.update=()=>{n.$$.dirty&769&&t(6,i=o?dt(o,_,p):{warning:"",functionsToDispatch:[]}),n.$$.dirty&777&&t(5,r=o?mt(o,l.proposed.trafficData,l.proposed.customFeatures,_,p):[0,0]),n.$$.dirty&8&&t(4,s=c(l.proposed.customFeatures))},[o,a,f,l,s,r,i,u,_,p,h,d,k,$,L]}class Vt extends ue{constructor(e){super(),ce(this,e,It,qt,fe,{value:0,isFirst:1,isLast:2,leftFeature:8,rightFeature:9})}}function Ve(n,e,t){const i=n.slice();return i[18]=e[t],i[19]=e,i[20]=t,i}function At(n){let e;return{c(){e=q("Add feature")},l(t){e=I(t,"Add feature")},m(t,i){v(t,e,i)},d(t){t&&g(e)}}}function Ae(n,e){let t,i,r,s;function l(c){e[10](c,e[18],e[19],e[20])}function o(){return e[11](e[20])}function a(){return e[12](e[20])}function f(){return e[13](e[20])}function _(){return e[14](e[20])}function p(){return e[15](e[20])}let u={isFirst:e[20]==0,isLast:e[20]==e[0].length-1,leftFeature:e[20]==0?"":e[0][e[20]-1],rightFeature:e[20]==e[0].length-1?"":e[0][e[20]+1]};return e[18]!==void 0&&(u.value=e[18]),i=new Vt({props:u}),Y.push(()=>X(i,"value",l)),i.$on("delete",o),i.$on("moveLeft",a),i.$on("moveRight",f),i.$on("addLeftBuffer",_),i.$on("addRightBuffer",p),{key:n,first:null,c(){t=se(),C(i.$$.fragment),this.h()},l(c){t=se(),N(i.$$.fragment,c),this.h()},h(){this.first=t},m(c,h){v(c,t,h),E(i,c,h),s=!0},p(c,h){e=c;const d={};h&1&&(d.isFirst=e[20]==0),h&1&&(d.isLast=e[20]==e[0].length-1),h&1&&(d.leftFeature=e[20]==0?"":e[0][e[20]-1]),h&1&&(d.rightFeature=e[20]==e[0].length-1?"":e[0][e[20]+1]),!r&&h&1&&(r=!0,d.value=e[18],Q(()=>r=!1)),i.$set(d)},i(c){s||(w(i.$$.fragment,c),s=!0)},o(c){F(i.$$.fragment,c),s=!1},d(c){c&&g(t),O(i,c)}}}function Ut(n){let e,t,i,r,s,l=n[2][0].toFixed(2)+"",o,a,f,_,p,u=n[2][1].toFixed(2)+"",c,h,d,k=[],$=new Map,L;e=new oe({props:{$$slots:{default:[At]},$$scope:{ctx:n}}}),e.$on("click",n[3]);let D=_e(n[0]);const T=m=>m[20];for(let m=0;m<D.length;m+=1){let y=Ve(n,D,m),P=T(y);$.set(P,k[m]=Ae(P,y))}return{c(){C(e.$$.fragment),t=M(),i=U("p"),r=q("Desirable minimum total width required (m): "),s=U("b"),o=q(l),a=M(),f=U("p"),_=q("Absolute minimum total width required (m): "),p=U("b"),c=q(u),h=M(),d=U("div");for(let m=0;m<k.length;m+=1)k[m].c();this.h()},l(m){N(e.$$.fragment,m),t=R(m),i=j(m,"P",{});var y=J(i);r=I(y,"Desirable minimum total width required (m): "),s=j(y,"B",{});var P=J(s);o=I(P,l),P.forEach(g),y.forEach(g),a=R(m),f=j(m,"P",{});var V=J(f);_=I(V,"Absolute minimum total width required (m): "),p=j(V,"B",{});var A=J(p);c=I(A,u),A.forEach(g),V.forEach(g),h=R(m),d=j(m,"DIV",{style:!0});var H=J(d);for(let b=0;b<k.length;b+=1)k[b].l(H);H.forEach(g),this.h()},h(){de(d,"display","flex"),de(d,"flex-direction","row"),de(d,"overflow-x","scroll")},m(m,y){E(e,m,y),v(m,t,y),v(m,i,y),W(i,r),W(i,s),W(s,o),v(m,a,y),v(m,f,y),W(f,_),W(f,p),W(p,c),v(m,h,y),v(m,d,y);for(let P=0;P<k.length;P+=1)k[P]&&k[P].m(d,null);n[16](d),L=!0},p(m,[y]){const P={};y&2097152&&(P.$$scope={dirty:y,ctx:m}),e.$set(P),(!L||y&4)&&l!==(l=m[2][0].toFixed(2)+"")&&x(o,l),(!L||y&4)&&u!==(u=m[2][1].toFixed(2)+"")&&x(c,u),y&241&&(D=_e(m[0]),ae(),k=Ke(k,y,T,1,m,D,$,d,Qe,Ae,null,Ve),le())},i(m){if(!L){w(e.$$.fragment,m);for(let y=0;y<D.length;y+=1)w(k[y]);L=!0}},o(m){F(e.$$.fragment,m);for(let y=0;y<k.length;y+=1)F(k[y]);L=!1},d(m){m&&(g(t),g(i),g(a),g(f),g(h),g(d)),O(e,m);for(let y=0;y<k.length;y+=1)k[y].d();n[16](null)}}}function jt(n,e,t){let i,r;ge(n,G,m=>t(9,r=m));let{streetFeaturesLeftToRight:s}=e,{sectionType:l}=e,o,a=!1;ft(()=>{a&&(a=!1,t(1,o.scrollLeft=o.scrollWidth,o))});function f(){t(0,s=[...s,""]),a=!0}function _(m){s.splice(m,1),t(0,s)}function p(m){t(0,[s[m-1],s[m]]=[s[m],s[m-1]],s)}function u(m){t(0,[s[m+1],s[m]]=[s[m],s[m+1]],s)}function c(m){s.splice(m,0,"Buffer / Verge"),t(0,s)}function h(m,y,P,V){P[V]=m,t(0,s)}const d=m=>_(m),k=m=>p(m),$=m=>u(m),L=m=>c(m),D=m=>c(m+1);function T(m){Y[m?"unshift":"push"](()=>{o=m,t(1,o)})}return n.$$set=m=>{"streetFeaturesLeftToRight"in m&&t(0,s=m.streetFeaturesLeftToRight),"sectionType"in m&&t(8,l=m.sectionType)},n.$$.update=()=>{n.$$.dirty&768&&t(2,i=ht(r,l))},[s,o,i,f,_,p,u,c,l,r,h,d,k,$,L,D,T]}class it extends ue{constructor(e){super(),ce(this,e,jt,Ut,fe,{streetFeaturesLeftToRight:0,sectionType:8})}}function Jt(n){let e;return{c(){e=q("Confirm")},l(t){e=I(t,"Confirm")},m(t,i){v(t,e,i)},d(t){t&&g(e)}}}function Ht(n){let e;return{c(){e=q("Cancel")},l(t){e=I(t,"Cancel")},m(t,i){v(t,e,i)},d(t){t&&g(e)}}}function Gt(n){let e,t,i,r,s,l,o,a,f,_,p,u;function c($){n[6]($)}let h={label:"Name"};n[0]!==void 0&&(h.value=n[0]),e=new gt({props:h}),Y.push(()=>X(e,"value",c));function d($){n[7]($)}let k={label:"Minimum width (m)",width:4,min:0};return n[1]!==void 0&&(k.value=n[1]),r=new $t({props:k}),Y.push(()=>X(r,"value",d)),o=new et({props:{errorMessage:n[2]}}),f=new _t({props:{disabled:n[2]!="",$$slots:{default:[Jt]},$$scope:{ctx:n}}}),f.$on("click",n[8]),p=new oe({props:{$$slots:{default:[Ht]},$$scope:{ctx:n}}}),p.$on("click",n[9]),{c(){C(e.$$.fragment),i=M(),C(r.$$.fragment),l=M(),C(o.$$.fragment),a=M(),C(f.$$.fragment),_=M(),C(p.$$.fragment)},l($){N(e.$$.fragment,$),i=R($),N(r.$$.fragment,$),l=R($),N(o.$$.fragment,$),a=R($),N(f.$$.fragment,$),_=R($),N(p.$$.fragment,$)},m($,L){E(e,$,L),v($,i,L),E(r,$,L),v($,l,L),E(o,$,L),v($,a,L),E(f,$,L),v($,_,L),E(p,$,L),u=!0},p($,L){const D={};!t&&L&1&&(t=!0,D.value=$[0],Q(()=>t=!1)),e.$set(D);const T={};!s&&L&2&&(s=!0,T.value=$[1],Q(()=>s=!1)),r.$set(T);const m={};L&4&&(m.errorMessage=$[2]),o.$set(m);const y={};L&4&&(y.disabled=$[2]!=""),L&4096&&(y.$$scope={dirty:L,ctx:$}),f.$set(y);const P={};L&4096&&(P.$$scope={dirty:L,ctx:$}),p.$set(P)},i($){u||(w(e.$$.fragment,$),w(r.$$.fragment,$),w(o.$$.fragment,$),w(f.$$.fragment,$),w(p.$$.fragment,$),u=!0)},o($){F(e.$$.fragment,$),F(r.$$.fragment,$),F(o.$$.fragment,$),F(f.$$.fragment,$),F(p.$$.fragment,$),u=!1},d($){$&&(g(i),g(l),g(a),g(_)),O(e,$),O(r,$),O(o,$),O(f,$),O(p,$)}}}function zt(n){let e,t;return e=new bt({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[Gt]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,r){E(e,i,r),t=!0},p(i,[r]){const s={};r&4103&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function Yt(n,e,t){let i,r;ge(n,G,d=>t(10,r=d));let{initialName:s}=e,{initialWidth:l}=e,o=ze(),a=s,f=l;function _(d,k){return d==""?"Name must be specified":d!=s&&Object.values(r.proposed.customFeatures).some($=>$.name==d)?"That name is already used by another custom feature":Ze.includes(d)?"That name is the same as one of the built-in features":isNaN(k)?"Enter a valid width":k<=0?"Enter a positive width":""}function p(d){a=d,t(0,a)}function u(d){f=d,t(1,f)}const c=()=>o("confirm",{name:a,width:f}),h=()=>o("cancel");return n.$$set=d=>{"initialName"in d&&t(4,s=d.initialName),"initialWidth"in d&&t(5,l=d.initialWidth)},n.$$.update=()=>{n.$$.dirty&3&&t(2,i=_(a,f))},[a,f,i,o,s,l,p,u,c,h]}class Kt extends ue{constructor(e){super(),ce(this,e,Yt,zt,fe,{initialName:4,initialWidth:5})}}function Ue(n,e,t){const i=n.slice();return i[9]=e[t],i}function Qt(n){let e;return{c(){e=q("Add feature")},l(t){e=I(t,"Add feature")},m(t,i){v(t,e,i)},d(t){t&&g(e)}}}function Xt(n){let e;return{c(){e=q("Edit")},l(t){e=I(t,"Edit")},m(t,i){v(t,e,i)},d(t){t&&g(e)}}}function Zt(n){let e;return{c(){e=q("Delete")},l(t){e=I(t,"Delete")},m(t,i){v(t,e,i)},d(t){t&&g(e)}}}function je(n,e){let t,i,r,s=e[1].proposed.customFeatures[e[9]].name+"",l,o,a=e[1].proposed.customFeatures[e[9]].width+"",f,_,p,u,c,h,d,k;function $(){return e[6](e[9])}u=new oe({props:{$$slots:{default:[Xt]},$$scope:{ctx:e}}}),u.$on("click",$);function L(){return e[7](e[9])}return h=new Xe({props:{$$slots:{default:[Zt]},$$scope:{ctx:e}}}),h.$on("click",L),{key:n,first:null,c(){t=U("li"),i=U("span"),r=U("u"),l=q(s),o=q(`
        : `),f=q(a),_=q(" m minimum width"),p=M(),C(u.$$.fragment),c=M(),C(h.$$.fragment),d=M(),this.h()},l(D){t=j(D,"LI",{});var T=J(t);i=j(T,"SPAN",{});var m=J(i);r=j(m,"U",{});var y=J(r);l=I(y,s),y.forEach(g),o=I(m,`
        : `),f=I(m,a),_=I(m," m minimum width"),m.forEach(g),p=R(T),N(u.$$.fragment,T),c=R(T),N(h.$$.fragment,T),d=R(T),T.forEach(g),this.h()},h(){this.first=t},m(D,T){v(D,t,T),W(t,i),W(i,r),W(r,l),W(i,o),W(i,f),W(i,_),W(t,p),E(u,t,null),W(t,c),E(h,t,null),W(t,d),k=!0},p(D,T){e=D,(!k||T&2)&&s!==(s=e[1].proposed.customFeatures[e[9]].name+"")&&x(l,s),(!k||T&2)&&a!==(a=e[1].proposed.customFeatures[e[9]].width+"")&&x(f,a);const m={};T&4096&&(m.$$scope={dirty:T,ctx:e}),u.$set(m);const y={};T&4096&&(y.$$scope={dirty:T,ctx:e}),h.$set(y)},i(D){k||(w(u.$$.fragment,D),w(h.$$.fragment,D),k=!0)},o(D){F(u.$$.fragment,D),F(h.$$.fragment,D),k=!1},d(D){D&&g(t),O(u),O(h)}}}function Je(n){let e,t;return e=new Kt({props:{initialName:n[0].initialName,initialWidth:n[0].initialWidth}}),e.$on("cancel",n[8]),e.$on("confirm",n[5]),{c(){C(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,r){E(e,i,r),t=!0},p(i,r){const s={};r&1&&(s.initialName=i[0].initialName),r&1&&(s.initialWidth=i[0].initialWidth),e.$set(s)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function xt(n){let e,t,i,r=[],s=new Map,l,o,a;e=new oe({props:{$$slots:{default:[Qt]},$$scope:{ctx:n}}}),e.$on("click",n[2]);let f=_e(Object.keys(n[1].proposed.customFeatures));const _=u=>u[9];for(let u=0;u<f.length;u+=1){let c=Ue(n,f,u),h=_(c);s.set(h,r[u]=je(h,c))}let p=n[0]&&Je(n);return{c(){C(e.$$.fragment),t=M(),i=U("ol");for(let u=0;u<r.length;u+=1)r[u].c();l=M(),p&&p.c(),o=se()},l(u){N(e.$$.fragment,u),t=R(u),i=j(u,"OL",{});var c=J(i);for(let h=0;h<r.length;h+=1)r[h].l(c);c.forEach(g),l=R(u),p&&p.l(u),o=se()},m(u,c){E(e,u,c),v(u,t,c),v(u,i,c);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(i,null);v(u,l,c),p&&p.m(u,c),v(u,o,c),a=!0},p(u,[c]){const h={};c&4096&&(h.$$scope={dirty:c,ctx:u}),e.$set(h),c&26&&(f=_e(Object.keys(u[1].proposed.customFeatures)),ae(),r=Ke(r,c,_,1,u,f,s,i,Qe,je,null,Ue),le()),u[0]?p?(p.p(u,c),c&1&&w(p,1)):(p=Je(u),p.c(),w(p,1),p.m(o.parentNode,o)):p&&(ae(),F(p,1,1,()=>{p=null}),le())},i(u){if(!a){w(e.$$.fragment,u);for(let c=0;c<f.length;c+=1)w(r[c]);w(p),a=!0}},o(u){F(e.$$.fragment,u);for(let c=0;c<r.length;c+=1)F(r[c]);F(p),a=!1},d(u){u&&(g(t),g(i),g(l),g(o)),O(e,u);for(let c=0;c<r.length;c+=1)r[c].d();p&&p.d(u)}}}function ei(n,e,t){let i;ge(n,G,u=>t(1,i=u));let r=null;function s(){t(0,r={id:tt(),initialName:"",initialWidth:0})}function l(u){let c=i.proposed.customFeatures[u].name,h=JSON.stringify({custom:u});if(i.proposed.desirableMinimumCrossSection.some(d=>JSON.stringify(d)==h)){window.alert(`The ${c} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(i.proposed.absoluteMinimumCrossSection.some(d=>JSON.stringify(d)==h)){window.alert(`The ${c} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete i.proposed.customFeatures[u],G.set(i)}function o(u){t(0,r={id:u,initialName:i.proposed.customFeatures[u].name,initialWidth:i.proposed.customFeatures[u].width})}function a(u){Ye(G,i.proposed.customFeatures[r.id]={name:u.detail.name,width:u.detail.width},i),G.set(i),t(0,r=null)}return[r,i,s,l,o,a,u=>o(u),u=>l(u),()=>t(0,r=null)]}class ti extends ue{constructor(e){super(),ce(this,e,ei,xt,fe,{})}}function He(n){let e,t,i,r,s;return{c(){e=U("p"),t=U("i"),i=q("Effective speed limit, based on the limit and 85 percentile: "),r=q(n[1]),s=q(`
            mph`)},l(l){e=j(l,"P",{});var o=J(e);t=j(o,"I",{});var a=J(t);i=I(a,"Effective speed limit, based on the limit and 85 percentile: "),r=I(a,n[1]),s=I(a,`
            mph`),a.forEach(g),o.forEach(g)},m(l,o){v(l,e,o),W(e,t),W(t,i),W(t,r),W(t,s)},p(l,o){o&2&&x(r,l[1])},d(l){l&&g(e)}}}function ii(n){let e,t,i,r,s,l,o,a,f,_,p,u,c,h,d,k,$,L,D,T,m,y,P,V,A;function H(S){n[4](S)}let b={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:he(["<200","200-800",">800"])};n[0].proposed.trafficData.flowOneWay!==void 0&&(b.value=n[0].proposed.trafficData.flowOneWay),i=new pe({props:b}),Y.push(()=>X(i,"value",H));function B(S){n[5](S)}let re={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:he(["<300","300-1,000",">1,000"])};n[0].proposed.trafficData.flowTwoWay!==void 0&&(re.value=n[0].proposed.trafficData.flowTwoWay),l=new pe({props:re}),Y.push(()=>X(l,"value",B));function ee(S){n[6](S)}let me={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:he(["<300",">300"])};n[0].proposed.trafficData.flowSharedUse!==void 0&&(me.value=n[0].proposed.trafficData.flowSharedUse),f=new pe({props:me}),Y.push(()=>X(f,"value",ee));function rt(S){n[7](S)}let ye={label:"Traffic flow (vpd)",emptyOption:!0,choices:he(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};n[0].proposed.trafficData.trafficFlow!==void 0&&(ye.value=n[0].proposed.trafficData.trafficFlow),u=new pe({props:ye}),Y.push(()=>X(u,"value",rt));let z=n[1]&&He(n);function nt(S){n[8](S)}let Fe={label:"Speed limit (MPH)",emptyOption:!0,choices:n[2]};n[0].proposed.trafficData.speedLimit!==void 0&&(Fe.value=n[0].proposed.trafficData.speedLimit),$=new pe({props:Fe}),Y.push(()=>X($,"value",nt));function st(S){n[9](S)}let De={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};n[0].proposed.trafficData.observedSpeed!==void 0&&(De.value=n[0].proposed.trafficData.observedSpeed),T=new Ft({props:De}),Y.push(()=>X(T,"value",st));function at(S){n[10](S)}let Se={label:"Street function",emptyOption:!0,choices:he(["High Street (active frontages)","Residential street","Local distributor road"])};return n[0].proposed.trafficData.streetFunction!==void 0&&(Se.value=n[0].proposed.trafficData.streetFunction),P=new pe({props:Se}),Y.push(()=>X(P,"value",at)),{c(){e=U("div"),t=U("div"),C(i.$$.fragment),s=M(),C(l.$$.fragment),a=M(),C(f.$$.fragment),p=M(),C(u.$$.fragment),h=M(),d=U("div"),z&&z.c(),k=M(),C($.$$.fragment),D=M(),C(T.$$.fragment),y=M(),C(P.$$.fragment),this.h()},l(S){e=j(S,"DIV",{class:!0});var K=J(e);t=j(K,"DIV",{class:!0});var te=J(t);N(i.$$.fragment,te),s=R(te),N(l.$$.fragment,te),a=R(te),N(f.$$.fragment,te),p=R(te),N(u.$$.fragment,te),te.forEach(g),h=R(K),d=j(K,"DIV",{class:!0});var ie=J(d);z&&z.l(ie),k=R(ie),N($.$$.fragment,ie),D=R(ie),N(T.$$.fragment,ie),y=R(ie),N(P.$$.fragment,ie),ie.forEach(g),K.forEach(g),this.h()},h(){ne(t,"class","govuk-grid-column-one-half"),ne(d,"class","govuk-grid-column-one-half"),ne(e,"class","govuk-grid-row")},m(S,K){v(S,e,K),W(e,t),E(i,t,null),W(t,s),E(l,t,null),W(t,a),E(f,t,null),W(t,p),E(u,t,null),W(e,h),W(e,d),z&&z.m(d,null),W(d,k),E($,d,null),W(d,D),E(T,d,null),W(d,y),E(P,d,null),A=!0},p(S,K){const te={};!r&&K&1&&(r=!0,te.value=S[0].proposed.trafficData.flowOneWay,Q(()=>r=!1)),i.$set(te);const ie={};!o&&K&1&&(o=!0,ie.value=S[0].proposed.trafficData.flowTwoWay,Q(()=>o=!1)),l.$set(ie);const Le={};!_&&K&1&&(_=!0,Le.value=S[0].proposed.trafficData.flowSharedUse,Q(()=>_=!1)),f.$set(Le);const Te={};!c&&K&1&&(c=!0,Te.value=S[0].proposed.trafficData.trafficFlow,Q(()=>c=!1)),u.$set(Te),S[1]?z?z.p(S,K):(z=He(S),z.c(),z.m(d,k)):z&&(z.d(1),z=null);const Ce={};!L&&K&1&&(L=!0,Ce.value=S[0].proposed.trafficData.speedLimit,Q(()=>L=!1)),$.$set(Ce);const Ne={};!m&&K&1&&(m=!0,Ne.value=S[0].proposed.trafficData.observedSpeed,Q(()=>m=!1)),T.$set(Ne);const Ee={};!V&&K&1&&(V=!0,Ee.value=S[0].proposed.trafficData.streetFunction,Q(()=>V=!1)),P.$set(Ee)},i(S){A||(w(i.$$.fragment,S),w(l.$$.fragment,S),w(f.$$.fragment,S),w(u.$$.fragment,S),w($.$$.fragment,S),w(T.$$.fragment,S),w(P.$$.fragment,S),A=!0)},o(S){F(i.$$.fragment,S),F(l.$$.fragment,S),F(f.$$.fragment,S),F(u.$$.fragment,S),F($.$$.fragment,S),F(T.$$.fragment,S),F(P.$$.fragment,S),A=!1},d(S){S&&g(e),O(i),O(l),O(f),O(u),z&&z.d(),O($),O(T),O(P)}}}function ri(n){let e,t;return e=new be({props:{label:"Traffic data and additional information",open:!0,$$slots:{default:[ii]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,r){E(e,i,r),t=!0},p(i,[r]){const s={};r&2051&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function ni(n,e,t){let i,r;ge(n,G,h=>t(0,r=h));let{valid:s}=e,l=he(pt);function o(h){n.$$.not_equal(r.proposed.trafficData.flowOneWay,h)&&(r.proposed.trafficData.flowOneWay=h,G.set(r))}function a(h){n.$$.not_equal(r.proposed.trafficData.flowTwoWay,h)&&(r.proposed.trafficData.flowTwoWay=h,G.set(r))}function f(h){n.$$.not_equal(r.proposed.trafficData.flowSharedUse,h)&&(r.proposed.trafficData.flowSharedUse=h,G.set(r))}function _(h){n.$$.not_equal(r.proposed.trafficData.trafficFlow,h)&&(r.proposed.trafficData.trafficFlow=h,G.set(r))}function p(h){n.$$.not_equal(r.proposed.trafficData.speedLimit,h)&&(r.proposed.trafficData.speedLimit=h,G.set(r))}function u(h){n.$$.not_equal(r.proposed.trafficData.observedSpeed,h)&&(r.proposed.trafficData.observedSpeed=h,G.set(r))}function c(h){n.$$.not_equal(r.proposed.trafficData.streetFunction,h)&&(r.proposed.trafficData.streetFunction=h,G.set(r))}return n.$$set=h=>{"valid"in h&&t(3,s=h.valid)},n.$$.update=()=>{n.$$.dirty&1&&t(3,s=r.proposed.trafficData.flowOneWay!=""&&r.proposed.trafficData.flowTwoWay!=""&&r.proposed.trafficData.flowSharedUse!=""&&r.proposed.trafficData.trafficFlow!=""&&r.proposed.trafficData.speedLimit!=""&&r.proposed.trafficData.observedSpeed!=null&&r.proposed.trafficData.streetFunction!=""),n.$$.dirty&1&&t(1,i=xe(r.proposed.trafficData.speedLimit,r.proposed.trafficData.observedSpeed))},[r,i,l,s,o,a,f,_,p,u,c]}class si extends ue{constructor(e){super(),ce(this,e,ni,ri,fe,{valid:3})}}function ai(n){let e,t;return e=new ti({}),{c(){C(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,r){E(e,i,r),t=!0},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function li(n){let e,t="Fill out all traffic data above to continue";return{c(){e=U("p"),e.textContent=t},l(i){e=j(i,"P",{"data-svelte-h":!0}),ke(e)!=="svelte-72a5ry"&&(e.textContent=t)},m(i,r){v(i,e,r)},p:$e,i:$e,o:$e,d(i){i&&g(e)}}}function oi(n){let e,t,i,r;return e=new be({props:{label:"Preferred Cross-Section",open:!0,$$slots:{default:[fi]},$$scope:{ctx:n}}}),i=new be({props:{label:"Compromised Cross-Section",open:!0,$$slots:{default:[ci]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment),t=M(),C(i.$$.fragment)},l(s){N(e.$$.fragment,s),t=R(s),N(i.$$.fragment,s)},m(s,l){E(e,s,l),v(s,t,l),E(i,s,l),r=!0},p(s,l){const o={};l&66&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const a={};l&66&&(a.$$scope={dirty:l,ctx:s}),i.$set(a)},i(s){r||(w(e.$$.fragment,s),w(i.$$.fragment,s),r=!0)},o(s){F(e.$$.fragment,s),F(i.$$.fragment,s),r=!1},d(s){s&&g(t),O(e,s),O(i,s)}}}function fi(n){let e,t,i;function r(l){n[4](l)}let s={sectionType:"Preferred"};return n[1].proposed.desirableMinimumCrossSection!==void 0&&(s.streetFeaturesLeftToRight=n[1].proposed.desirableMinimumCrossSection),e=new it({props:s}),Y.push(()=>X(e,"streetFeaturesLeftToRight",r)),{c(){C(e.$$.fragment)},l(l){N(e.$$.fragment,l)},m(l,o){E(e,l,o),i=!0},p(l,o){const a={};!t&&o&2&&(t=!0,a.streetFeaturesLeftToRight=l[1].proposed.desirableMinimumCrossSection,Q(()=>t=!1)),e.$set(a)},i(l){i||(w(e.$$.fragment,l),i=!0)},o(l){F(e.$$.fragment,l),i=!1},d(l){O(e,l)}}}function Ge(n){let e,t;return e=new oe({props:{$$slots:{default:[ui]},$$scope:{ctx:n}}}),e.$on("click",n[2]),{c(){C(e.$$.fragment)},l(i){N(e.$$.fragment,i)},m(i,r){E(e,i,r),t=!0},p(i,r){const s={};r&64&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){O(e,i)}}}function ui(n){let e;return{c(){e=q("Copy Preferred")},l(t){e=I(t,"Copy Preferred")},m(t,i){v(t,e,i)},d(t){t&&g(e)}}}function ci(n){let e,t,i,r,s=n[1].proposed.absoluteMinimumCrossSection.length==0&&Ge(n);function l(a){n[5](a)}let o={sectionType:"Compromised"};return n[1].proposed.absoluteMinimumCrossSection!==void 0&&(o.streetFeaturesLeftToRight=n[1].proposed.absoluteMinimumCrossSection),t=new it({props:o}),Y.push(()=>X(t,"streetFeaturesLeftToRight",l)),{c(){s&&s.c(),e=M(),C(t.$$.fragment)},l(a){s&&s.l(a),e=R(a),N(t.$$.fragment,a)},m(a,f){s&&s.m(a,f),v(a,e,f),E(t,a,f),r=!0},p(a,f){a[1].proposed.absoluteMinimumCrossSection.length==0?s?(s.p(a,f),f&2&&w(s,1)):(s=Ge(a),s.c(),w(s,1),s.m(e.parentNode,e)):s&&(ae(),F(s,1,1,()=>{s=null}),le());const _={};!i&&f&2&&(i=!0,_.streetFeaturesLeftToRight=a[1].proposed.absoluteMinimumCrossSection,Q(()=>i=!1)),t.$set(_)},i(a){r||(w(s),w(t.$$.fragment,a),r=!0)},o(a){F(s),F(t.$$.fragment,a),r=!1},d(a){a&&g(e),s&&s.d(a),O(t,a)}}}function pi(n){let e,t,i,r,s,l,o,a,f;function _(d){n[3](d)}let p={};n[0]!==void 0&&(p.valid=n[0]),e=new si({props:p}),Y.push(()=>X(e,"valid",_)),r=new be({props:{label:"Custom Street Features",$$slots:{default:[ai]},$$scope:{ctx:n}}});const u=[oi,li],c=[];function h(d,k){return d[0]?0:1}return l=h(n),o=c[l]=u[l](n),{c(){C(e.$$.fragment),i=M(),C(r.$$.fragment),s=M(),o.c(),a=se()},l(d){N(e.$$.fragment,d),i=R(d),N(r.$$.fragment,d),s=R(d),o.l(d),a=se()},m(d,k){E(e,d,k),v(d,i,k),E(r,d,k),v(d,s,k),c[l].m(d,k),v(d,a,k),f=!0},p(d,[k]){const $={};!t&&k&1&&(t=!0,$.valid=d[0],Q(()=>t=!1)),e.$set($);const L={};k&64&&(L.$$scope={dirty:k,ctx:d}),r.$set(L);let D=l;l=h(d),l===D?c[l].p(d,k):(ae(),F(c[D],1,1,()=>{c[D]=null}),le(),o=c[l],o?o.p(d,k):(o=c[l]=u[l](d),o.c()),w(o,1),o.m(a.parentNode,a))},i(d){f||(w(e.$$.fragment,d),w(r.$$.fragment,d),w(o),f=!0)},o(d){F(e.$$.fragment,d),F(r.$$.fragment,d),F(o),f=!1},d(d){d&&(g(i),g(s),g(a)),O(e,d),O(r,d),c[l].d(d)}}}function di(n,e,t){let i;ge(n,G,f=>t(1,i=f));let r=!1;function s(){Ye(G,i.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(i.proposed.desirableMinimumCrossSection)),i)}function l(f){r=f,t(0,r)}function o(f){n.$$.not_equal(i.proposed.desirableMinimumCrossSection,f)&&(i.proposed.desirableMinimumCrossSection=f,G.set(i))}function a(f){n.$$.not_equal(i.proposed.absoluteMinimumCrossSection,f)&&(i.proposed.absoluteMinimumCrossSection=f,G.set(i))}return[r,i,s,l,o,a]}class Oi extends ue{constructor(e){super(),ce(this,e,di,pi,fe,{})}}export{Oi as component};
