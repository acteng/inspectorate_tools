import{s as ot,p as T,e as E,a as f,t as ke,c as D,x as ie,g as p,b as be,d as Ce,f as x,q as oe,i as le,h as m,r as I,k as lt,T as It,w as it,A as Mt}from"../chunks/scheduler.XIVCFyi4.js";import{S as ft,i as pt,e as M,c as v,a as y,m as b,t as $,g as qt,b as h,f as Ot,d as w}from"../chunks/index.D7_e3ZBj.js";import{p as we}from"../chunks/index.CW0NHR7G.js";import{S as ye}from"../chunks/Select.D0yEYTdX.js";import{T as Le}from"../chunks/TextArea.C2Bv_kQj.js";import{T as Re}from"../chunks/TextInput.CRjDnScB.js";import{s as L}from"../chunks/data.C7Ax0tUS.js";import{a as Et,t as Dt,r as Nt,f as Pt,d as At}from"../chunks/lists.Ci0sBo6t.js";import"../chunks/paths.CTDWH2Lv.js";import{F as Ht}from"../chunks/FileInput.COPPifMI.js";import{W as Kt,S as jt}from"../chunks/WarningButton.B4zD6syQ.js";import{E as xt}from"../chunks/ExternalLink.Bess5SFX.js";/* empty css                                                    */import{b as Ft,C as zt}from"../chunks/index.DOQeibdl.js";import{M as Gt}from"../chunks/MapLibreMap.CubewAHL.js";import{D as ut}from"../chunks/DecimalInput.BTOjJMBz.js";function mt(n){let a,u,e,o;return a=new Kt({props:{$$slots:{default:[Vt]},$$scope:{ctx:n}}}),a.$on("click",n[2]),e=new jt({props:{$$slots:{default:[Wt]},$$scope:{ctx:n}}}),e.$on("click",n[5]),{c(){v(a.$$.fragment),u=f(),v(e.$$.fragment)},l(r){y(a.$$.fragment,r),u=p(r),y(e.$$.fragment,r)},m(r,c){b(a,r,c),le(r,u,c),b(e,r,c),o=!0},p(r,c){const q={};c&128&&(q.$$scope={dirty:c,ctx:r}),a.$set(q);const C={};c&128&&(C.$$scope={dirty:c,ctx:r}),e.$set(C)},i(r){o||($(a.$$.fragment,r),$(e.$$.fragment,r),o=!0)},o(r){h(a.$$.fragment,r),h(e.$$.fragment,r),o=!1},d(r){r&&x(u),w(a,r),w(e,r)}}}function Vt(n){let a;return{c(){a=ke("Clear map")},l(u){a=Ce(u,"Clear map")},m(u,e){le(u,a,e)},d(u){u&&x(a)}}}function Wt(n){let a;return{c(){a=ke("Zoom to fit")},l(u){a=Ce(u,"Zoom to fit")},m(u,e){le(u,a,e)},d(u){u&&x(a)}}}function Bt(n){let a;return{c(){a=ke("Scheme Sketcher")},l(u){a=Ce(u,"Scheme Sketcher")},m(u,e){le(u,a,e)},d(u){u&&x(a)}}}function Jt(n){let a,u;return a=new zt({props:{gj:n[1].summary.networkMap,show:!0}}),{c(){v(a.$$.fragment)},l(e){y(a.$$.fragment,e)},m(e,o){b(a,e,o),u=!0},p(e,o){const r={};o&2&&(r.gj=e[1].summary.networkMap),a.$set(r)},i(e){u||($(a.$$.fragment,e),u=!0)},o(e){h(a.$$.fragment,e),u=!1},d(e){w(a,e)}}}function Yt(n){let a,u="Network Map",e,o,r,c,q=`Please add a map showing the section of route being scored in this file.
      If the route is part of a longer route of multiple sections (covered in
      other files), please show this on the map for context too.`,C,N,O,k,P,K="You can use the external Scheme Sketcher tool to draw this map:",A,d,F,H,j,re,s,X,pe="Choose the area best covering this scheme",z,ee,ge=`Use the <i>New route</i>
        tool to sketch the route. It can contain segments snapped to existing roads
        or free-hand segments.`,G,te,$e=`Optionally, use the <i>Split route</i>
        tool to denote just the sections assessed in this file.`,V,ne,he=`You can set <i>Name</i>
        and
        <i>Description</i>
        to whatever is useful for display on the map`,W,ae,_e=`Save the map by clicking <i>Manage files</i>
        , then
        <i>Save</i>`,B,se,ce="Load the saved file above",J,U,Y,Z,ue;N=new Ht({props:{label:"Import from GeoJSON file",onLoad:n[3]}});let _=n[1].summary.networkMap.features.length>0&&mt(n);j=new xt({props:{href:"https://acteng.github.io/atip",$$slots:{default:[Bt]},$$scope:{ctx:n}}});function Q(l){n[6](l)}let de={$$slots:{default:[Jt]},$$scope:{ctx:n}};return n[0]!==void 0&&(de.map=n[0]),Y=new Gt({props:de}),T.push(()=>M(Y,"map",Q)),{c(){a=E("h2"),a.textContent=u,e=f(),o=E("div"),r=E("div"),c=E("p"),c.textContent=q,C=f(),v(N.$$.fragment),O=f(),_&&_.c(),k=f(),P=E("p"),P.textContent=K,A=f(),d=E("ol"),F=E("li"),H=ke("Go to the "),v(j.$$.fragment),re=ke(" tool"),s=f(),X=E("li"),X.textContent=pe,z=f(),ee=E("li"),ee.innerHTML=ge,G=f(),te=E("li"),te.innerHTML=$e,V=f(),ne=E("li"),ne.innerHTML=he,W=f(),ae=E("li"),ae.innerHTML=_e,B=f(),se=E("li"),se.textContent=ce,J=f(),U=E("div"),v(Y.$$.fragment),this.h()},l(l){a=D(l,"H2",{"data-svelte-h":!0}),ie(a)!=="svelte-1fkh1ci"&&(a.textContent=u),e=p(l),o=D(l,"DIV",{style:!0});var S=be(o);r=D(S,"DIV",{style:!0});var R=be(r);c=D(R,"P",{"data-svelte-h":!0}),ie(c)!=="svelte-1r7hkzo"&&(c.textContent=q),C=p(R),y(N.$$.fragment,R),O=p(R),_&&_.l(R),k=p(R),P=D(R,"P",{"data-svelte-h":!0}),ie(P)!=="svelte-1els6f1"&&(P.textContent=K),A=p(R),d=D(R,"OL",{});var g=be(d);F=D(g,"LI",{});var me=be(F);H=Ce(me,"Go to the "),y(j.$$.fragment,me),re=Ce(me," tool"),me.forEach(x),s=p(g),X=D(g,"LI",{"data-svelte-h":!0}),ie(X)!=="svelte-aj705b"&&(X.textContent=pe),z=p(g),ee=D(g,"LI",{"data-svelte-h":!0}),ie(ee)!=="svelte-1vb2muj"&&(ee.innerHTML=ge),G=p(g),te=D(g,"LI",{"data-svelte-h":!0}),ie(te)!=="svelte-3xdyru"&&(te.innerHTML=$e),V=p(g),ne=D(g,"LI",{"data-svelte-h":!0}),ie(ne)!=="svelte-1r1ljcj"&&(ne.innerHTML=he),W=p(g),ae=D(g,"LI",{"data-svelte-h":!0}),ie(ae)!=="svelte-sz4wlr"&&(ae.innerHTML=_e),B=p(g),se=D(g,"LI",{"data-svelte-h":!0}),ie(se)!=="svelte-x3zkxb"&&(se.textContent=ce),g.forEach(x),R.forEach(x),J=p(S),U=D(S,"DIV",{style:!0});var ve=be(U);y(Y.$$.fragment,ve),ve.forEach(x),S.forEach(x),this.h()},h(){oe(r,"width","30%"),oe(r,"overflow-y","scroll"),oe(r,"padding","10px"),oe(r,"border","1px solid black"),oe(U,"position","relative"),oe(U,"width","70%"),oe(o,"display","flex"),oe(o,"height","80vh")},m(l,S){le(l,a,S),le(l,e,S),le(l,o,S),m(o,r),m(r,c),m(r,C),b(N,r,null),m(r,O),_&&_.m(r,null),m(r,k),m(r,P),m(r,A),m(r,d),m(d,F),m(F,H),b(j,F,null),m(F,re),m(d,s),m(d,X),m(d,z),m(d,ee),m(d,G),m(d,te),m(d,V),m(d,ne),m(d,W),m(d,ae),m(d,B),m(d,se),m(o,J),m(o,U),b(Y,U,null),ue=!0},p(l,[S]){l[1].summary.networkMap.features.length>0?_?(_.p(l,S),S&2&&$(_,1)):(_=mt(l),_.c(),$(_,1),_.m(r,k)):_&&(qt(),h(_,1,1,()=>{_=null}),Ot());const R={};S&128&&(R.$$scope={dirty:S,ctx:l}),j.$set(R);const g={};S&130&&(g.$$scope={dirty:S,ctx:l}),!Z&&S&1&&(Z=!0,g.map=l[0],I(()=>Z=!1)),Y.$set(g)},i(l){ue||($(N.$$.fragment,l),$(_),$(j.$$.fragment,l),$(Y.$$.fragment,l),ue=!0)},o(l){h(N.$$.fragment,l),h(_),h(j.$$.fragment,l),h(Y.$$.fragment,l),ue=!1},d(l){l&&(x(a),x(e),x(o)),w(N),_&&_.d(),w(j),w(Y)}}}function Zt(n,a,u){let e;lt(n,L,O=>u(1,e=O));let o;It(()=>{q(!1)});function r(){window.confirm("Do you really want to erase the map data?")&&it(L,e.summary.networkMap={type:"FeatureCollection",features:[]},e)}function c(O,k){var P;try{let K=JSON.parse(k);if(K.type!="FeatureCollection")throw new Error("This doesn't look like a GeoJSON file");if(!((P=K.origin)!=null&&P.startsWith("atip-")))throw new Error("This file wasn't produced with the Scheme Sketcher");if(K.crs)throw new Error("This file has a Coordinate Reference System set; it's not suitable for a web map");it(L,e.summary.networkMap=K,e),q(!0)}catch{}}function q(O){let k={type:"FeatureCollection",features:e.summary.networkMap.features};k.features.length>0&&o.fitBounds(Ft(k),{padding:20,animate:O})}const C=()=>q(!0);function N(O){o=O,u(0,o)}return[o,e,r,c,q,C,N]}class Ut extends ft{constructor(a){super(),pt(this,a,Zt,Yt,ot,{})}}function Qt(n){let a,u,e,o,r,c,q,C,N,O,k,P,K,A,d,F,H,j,re,s,X,pe,z,ee,ge,G,te,$e,V,ne,he,W,ae,_e,B,se,ce,J,U,Y,Z,ue,_,Q,de,l,S,R,g,me,ve,fe,Se;function gt(t){n[1](t)}let Te={label:"Date of design review"};n[0].summary.dateDesignReview!==void 0&&(Te.value=n[0].summary.dateDesignReview),u=new Re({props:Te}),T.push(()=>M(u,"value",gt));function $t(t){n[2](t)}let Ie={label:"Scheme reference"};n[0].summary.schemeReference!==void 0&&(Ie.value=n[0].summary.schemeReference),r=new Re({props:Ie}),T.push(()=>M(r,"value",$t));function ht(t){n[3](t)}let Me={label:"Scheme name"};n[0].summary.schemeName!==void 0&&(Me.value=n[0].summary.schemeName),C=new Re({props:Me}),T.push(()=>M(C,"value",ht));function _t(t){n[4](t)}let qe={label:"Scheme summary"};n[0].summary.schemeSummary!==void 0&&(qe.value=n[0].summary.schemeSummary),k=new Le({props:qe}),T.push(()=>M(k,"value",_t));function ct(t){n[5](t)}let Oe={label:"Scheme information reviewed"};n[0].summary.schemeInfoReviewed!==void 0&&(Oe.value=n[0].summary.schemeInfoReviewed),A=new Le({props:Oe}),T.push(()=>M(A,"value",ct));function dt(t){n[6](t)}let Ee={label:"Authority",emptyOption:!0,choices:we(Et)};n[0].summary.authority!==void 0&&(Ee.value=n[0].summary.authority),H=new ye({props:Ee}),T.push(()=>M(H,"value",dt));function vt(t){n[7](t)}let De={label:"Transport / Combined Authority",emptyOption:!0,choices:we(Dt)};n[0].summary.transportOrCombinedAuthority!==void 0&&(De.value=n[0].summary.transportOrCombinedAuthority),s=new ye({props:De}),T.push(()=>M(s,"value",vt));function yt(t){n[8](t)}let Ne={label:"Region",emptyOption:!0,choices:we(Nt)};n[0].summary.region!==void 0&&(Ne.value=n[0].summary.region),z=new ye({props:Ne}),T.push(()=>M(z,"value",yt));function bt(t){n[9](t)}let Pe={label:"Funding programme",emptyOption:!0,choices:we(Pt)};n[0].summary.fundingProgramme!==void 0&&(Pe.value=n[0].summary.fundingProgramme),G=new ye({props:Pe}),T.push(()=>M(G,"value",bt));function wt(t){n[10](t)}let Ae={label:"Design stage",emptyOption:!0,choices:we(At)};n[0].summary.designStage!==void 0&&(Ae.value=n[0].summary.designStage),V=new ye({props:Ae}),T.push(()=>M(V,"value",wt));function kt(t){n[11](t)}let He={label:"Funding conditions"};n[0].summary.fundingConditions!==void 0&&(He.value=n[0].summary.fundingConditions),W=new Le({props:He}),T.push(()=>M(W,"value",kt));function Ct(t){n[12](t)}let Ke={label:"Inspector email address"};n[0].summary.inspectorEmail!==void 0&&(Ke.value=n[0].summary.inspectorEmail),B=new Re({props:Ke}),T.push(()=>M(B,"value",Ct));function St(t){n[13](t)}let je={label:"Route length assessed here (km)",width:6,min:0};n[0].summary.assessedRouteLengthKm!==void 0&&(je.value=n[0].summary.assessedRouteLengthKm),J=new ut({props:je}),T.push(()=>M(J,"value",St));function Lt(t){n[14](t)}let xe={label:"Total route length (km)",width:6,min:0};n[0].summary.totalRouteLengthKm!==void 0&&(xe.value=n[0].summary.totalRouteLengthKm),Z=new ut({props:xe}),T.push(()=>M(Z,"value",Lt));function Rt(t){n[15](t)}let Fe={label:"Notes"};n[0].summary.notes!==void 0&&(Fe.value=n[0].summary.notes),Q=new Le({props:Fe}),T.push(()=>M(Q,"value",Rt));function Tt(t){n[16](t)}let ze={label:"Route Check Type (Street or Path)",hint:"What type of route is being reviewed: Street Check (e.g. on- or by-carriageway) or Path Check (e.g. a traffic-free path featuring minimal interactions with motor traffic)",emptyOption:!0,choices:[["street","Street Check"],["path","Path Check"]]};return n[0].summary.checkType!==void 0&&(ze.value=n[0].summary.checkType),g=new ye({props:ze}),T.push(()=>M(g,"value",Tt)),fe=new Ut({}),{c(){a=E("div"),v(u.$$.fragment),o=f(),v(r.$$.fragment),q=f(),v(C.$$.fragment),O=f(),v(k.$$.fragment),K=f(),v(A.$$.fragment),F=f(),v(H.$$.fragment),re=f(),v(s.$$.fragment),pe=f(),v(z.$$.fragment),ge=f(),v(G.$$.fragment),$e=f(),v(V.$$.fragment),he=f(),v(W.$$.fragment),_e=f(),v(B.$$.fragment),ce=f(),v(J.$$.fragment),Y=f(),v(Z.$$.fragment),_=f(),v(Q.$$.fragment),l=f(),S=E("hr"),R=f(),v(g.$$.fragment),ve=f(),v(fe.$$.fragment),this.h()},l(t){a=D(t,"DIV",{class:!0});var i=be(a);y(u.$$.fragment,i),o=p(i),y(r.$$.fragment,i),q=p(i),y(C.$$.fragment,i),O=p(i),y(k.$$.fragment,i),K=p(i),y(A.$$.fragment,i),F=p(i),y(H.$$.fragment,i),re=p(i),y(s.$$.fragment,i),pe=p(i),y(z.$$.fragment,i),ge=p(i),y(G.$$.fragment,i),$e=p(i),y(V.$$.fragment,i),he=p(i),y(W.$$.fragment,i),_e=p(i),y(B.$$.fragment,i),ce=p(i),y(J.$$.fragment,i),Y=p(i),y(Z.$$.fragment,i),_=p(i),y(Q.$$.fragment,i),l=p(i),S=D(i,"HR",{}),R=p(i),y(g.$$.fragment,i),ve=p(i),y(fe.$$.fragment,i),i.forEach(x),this.h()},h(){Mt(a,"class","govuk-width-container")},m(t,i){le(t,a,i),b(u,a,null),m(a,o),b(r,a,null),m(a,q),b(C,a,null),m(a,O),b(k,a,null),m(a,K),b(A,a,null),m(a,F),b(H,a,null),m(a,re),b(s,a,null),m(a,pe),b(z,a,null),m(a,ge),b(G,a,null),m(a,$e),b(V,a,null),m(a,he),b(W,a,null),m(a,_e),b(B,a,null),m(a,ce),b(J,a,null),m(a,Y),b(Z,a,null),m(a,_),b(Q,a,null),m(a,l),m(a,S),m(a,R),b(g,a,null),m(a,ve),b(fe,a,null),Se=!0},p(t,[i]){const Ge={};!e&&i&1&&(e=!0,Ge.value=t[0].summary.dateDesignReview,I(()=>e=!1)),u.$set(Ge);const Ve={};!c&&i&1&&(c=!0,Ve.value=t[0].summary.schemeReference,I(()=>c=!1)),r.$set(Ve);const We={};!N&&i&1&&(N=!0,We.value=t[0].summary.schemeName,I(()=>N=!1)),C.$set(We);const Be={};!P&&i&1&&(P=!0,Be.value=t[0].summary.schemeSummary,I(()=>P=!1)),k.$set(Be);const Je={};!d&&i&1&&(d=!0,Je.value=t[0].summary.schemeInfoReviewed,I(()=>d=!1)),A.$set(Je);const Ye={};!j&&i&1&&(j=!0,Ye.value=t[0].summary.authority,I(()=>j=!1)),H.$set(Ye);const Ze={};!X&&i&1&&(X=!0,Ze.value=t[0].summary.transportOrCombinedAuthority,I(()=>X=!1)),s.$set(Ze);const Ue={};!ee&&i&1&&(ee=!0,Ue.value=t[0].summary.region,I(()=>ee=!1)),z.$set(Ue);const Qe={};!te&&i&1&&(te=!0,Qe.value=t[0].summary.fundingProgramme,I(()=>te=!1)),G.$set(Qe);const Xe={};!ne&&i&1&&(ne=!0,Xe.value=t[0].summary.designStage,I(()=>ne=!1)),V.$set(Xe);const et={};!ae&&i&1&&(ae=!0,et.value=t[0].summary.fundingConditions,I(()=>ae=!1)),W.$set(et);const tt={};!se&&i&1&&(se=!0,tt.value=t[0].summary.inspectorEmail,I(()=>se=!1)),B.$set(tt);const nt={};!U&&i&1&&(U=!0,nt.value=t[0].summary.assessedRouteLengthKm,I(()=>U=!1)),J.$set(nt);const at={};!ue&&i&1&&(ue=!0,at.value=t[0].summary.totalRouteLengthKm,I(()=>ue=!1)),Z.$set(at);const st={};!de&&i&1&&(de=!0,st.value=t[0].summary.notes,I(()=>de=!1)),Q.$set(st);const rt={};!me&&i&1&&(me=!0,rt.value=t[0].summary.checkType,I(()=>me=!1)),g.$set(rt)},i(t){Se||($(u.$$.fragment,t),$(r.$$.fragment,t),$(C.$$.fragment,t),$(k.$$.fragment,t),$(A.$$.fragment,t),$(H.$$.fragment,t),$(s.$$.fragment,t),$(z.$$.fragment,t),$(G.$$.fragment,t),$(V.$$.fragment,t),$(W.$$.fragment,t),$(B.$$.fragment,t),$(J.$$.fragment,t),$(Z.$$.fragment,t),$(Q.$$.fragment,t),$(g.$$.fragment,t),$(fe.$$.fragment,t),Se=!0)},o(t){h(u.$$.fragment,t),h(r.$$.fragment,t),h(C.$$.fragment,t),h(k.$$.fragment,t),h(A.$$.fragment,t),h(H.$$.fragment,t),h(s.$$.fragment,t),h(z.$$.fragment,t),h(G.$$.fragment,t),h(V.$$.fragment,t),h(W.$$.fragment,t),h(B.$$.fragment,t),h(J.$$.fragment,t),h(Z.$$.fragment,t),h(Q.$$.fragment,t),h(g.$$.fragment,t),h(fe.$$.fragment,t),Se=!1},d(t){t&&x(a),w(u),w(r),w(C),w(k),w(A),w(H),w(s),w(z),w(G),w(V),w(W),w(B),w(J),w(Z),w(Q),w(g),w(fe)}}}function Xt(n,a,u){let e;lt(n,L,s=>u(0,e=s));function o(s){n.$$.not_equal(e.summary.dateDesignReview,s)&&(e.summary.dateDesignReview=s,L.set(e))}function r(s){n.$$.not_equal(e.summary.schemeReference,s)&&(e.summary.schemeReference=s,L.set(e))}function c(s){n.$$.not_equal(e.summary.schemeName,s)&&(e.summary.schemeName=s,L.set(e))}function q(s){n.$$.not_equal(e.summary.schemeSummary,s)&&(e.summary.schemeSummary=s,L.set(e))}function C(s){n.$$.not_equal(e.summary.schemeInfoReviewed,s)&&(e.summary.schemeInfoReviewed=s,L.set(e))}function N(s){n.$$.not_equal(e.summary.authority,s)&&(e.summary.authority=s,L.set(e))}function O(s){n.$$.not_equal(e.summary.transportOrCombinedAuthority,s)&&(e.summary.transportOrCombinedAuthority=s,L.set(e))}function k(s){n.$$.not_equal(e.summary.region,s)&&(e.summary.region=s,L.set(e))}function P(s){n.$$.not_equal(e.summary.fundingProgramme,s)&&(e.summary.fundingProgramme=s,L.set(e))}function K(s){n.$$.not_equal(e.summary.designStage,s)&&(e.summary.designStage=s,L.set(e))}function A(s){n.$$.not_equal(e.summary.fundingConditions,s)&&(e.summary.fundingConditions=s,L.set(e))}function d(s){n.$$.not_equal(e.summary.inspectorEmail,s)&&(e.summary.inspectorEmail=s,L.set(e))}function F(s){n.$$.not_equal(e.summary.assessedRouteLengthKm,s)&&(e.summary.assessedRouteLengthKm=s,L.set(e))}function H(s){n.$$.not_equal(e.summary.totalRouteLengthKm,s)&&(e.summary.totalRouteLengthKm=s,L.set(e))}function j(s){n.$$.not_equal(e.summary.notes,s)&&(e.summary.notes=s,L.set(e))}function re(s){n.$$.not_equal(e.summary.checkType,s)&&(e.summary.checkType=s,L.set(e))}return[e,o,r,c,q,C,N,O,k,P,K,A,d,F,H,j,re]}class cn extends ft{constructor(a){super(),pt(this,a,Xt,Qt,ot,{})}}export{cn as component};
