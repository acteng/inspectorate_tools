import{s as ne,a as B,e as A,g as R,c as V,r as te,i as F,G as Ne,x as Me,f as w,z as st,E as U,b as J,v as ae,h as O,F as H,k as oe,a7 as He,t as M,I as Y,d as W,j as Z,p as $e,q as at,n as fe,T as lt,M as Ge}from"../chunks/scheduler.DQXnSe5h.js";import{S as ie,i as se,c as S,a as L,m as C,t as y,b as D,d as N,f as G,g as K,e as Q}from"../chunks/index.B4AQako7.js";import{e as le,u as ze,o as Ye}from"../chunks/each.B8wci2m2.js";import{p as re}from"../chunks/index.D2uu3Eld.js";import{S as X,W as Ke}from"../chunks/WarningButton.CISwBlnQ.js";import{S as ee}from"../chunks/Select.DN-UPzIW.js";import{W as he}from"../chunks/WarningText.CEB1n824.js";import{s as I,a as Qe,b as ot}from"../chunks/data.DcAGW2jc.js";import{a as Xe,n as ft,g as We,c as ut,D as ct}from"../chunks/logic.D0ixa3Al.js";import{E as pt}from"../chunks/ExternalLink.DlHmlZ-a.js";import{D as dt}from"../chunks/DefaultButton.DmhLs_5L.js";import{F as mt,E as Ze}from"../chunks/FormElement.9jXQPbWv.js";import{T as _t}from"../chunks/TextInput.BeJK9dJi.js";import"../chunks/paths.B-zplO20.js";import"../chunks/Modal.svelte_svelte_type_style_lang.2NhczJl8.js";import{M as $t}from"../chunks/Modal.cO-kjbJ8.js";import{v as xe}from"../chunks/v4.D8aEg3BZ.js";import{C as pe}from"../chunks/CollapsibleCard.Bt9_rMyo.js";function ht(i){let e,t,r,n,s,a,l;return e=new Ze({props:{errorMessage:i[5](i[2])}}),{c(){S(e.$$.fragment),t=B(),r=A("input"),this.h()},l(o){L(e.$$.fragment,o),t=R(o),r=V(o,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){te(r,"type","text"),te(r,"inputmode","numeric"),te(r,"class",n=`govuk-input govuk-input--width-${i[1]}`),te(r,"id",i[3])},m(o,u){C(e,o,u),F(o,t,u),F(o,r,u),Ne(r,i[2]),s=!0,a||(l=[Me(r,"input",i[9]),Me(r,"change",i[4])],a=!0)},p(o,u){const v={};u&4&&(v.errorMessage=o[5](o[2])),e.$set(v),(!s||u&2&&n!==(n=`govuk-input govuk-input--width-${o[1]}`))&&te(r,"class",n),u&4&&r.value!==o[2]&&Ne(r,o[2])},i(o){s||(y(e.$$.fragment,o),s=!0)},o(o){D(e.$$.fragment,o),s=!1},d(o){o&&(w(t),w(r)),N(e,o),a=!1,st(l)}}}function gt(i){let e,t;return e=new mt({props:{label:i[0],id:i[3],$$slots:{default:[ht]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,[n]){const s={};n&1&&(s.label=r[0]),n&1030&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function bt(i,e,t){let{label:r}=e,{value:n}=e,{width:s}=e,{min:a=void 0}=e,{max:l=void 0}=e,o=n==null?void 0:n.toString(),u=xe();function v(){t(6,n=o==null?void 0:parseInt(o,10))}function m(c){if(c==""||c==null)return"";if(c.includes("."))return"Please enter a number without decimals";let $=Number(c);return isNaN($)?"Please enter a valid number":a!=null&&$<a?`Please enter a number that's at least ${a};`:l!=null&&$>l?`Please enter a number that's at most ${l};`:""}function p(){o=this.value,t(2,o)}return i.$$set=c=>{"label"in c&&t(0,r=c.label),"value"in c&&t(6,n=c.value),"width"in c&&t(1,s=c.width),"min"in c&&t(7,a=c.min),"max"in c&&t(8,l=c.max)},[r,s,o,u,v,m,n,a,l,p]}class vt extends ie{constructor(e){super(),se(this,e,bt,gt,ne,{label:0,value:6,width:1,min:7,max:8})}}function de(i){return typeof i=="object"?[]:wt[i]}let wt={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",z(76)],["LTN 1/20 Figure 4.1 pp. 33",z(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",z(43)],["LTN 1/20 Figure 4.1 pp. 33",z(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",z(43)],["LTN 1/20 Figure 4.1 pp. 33",z(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",z(43)],["LTN 1/20 Figure 4.1 pp. 33",z(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",z(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",z(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",z(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",z(54)]]};function z(i){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${i}`}function me(i,e){let t=Xe(e.speedLimit,e.observedSpeed);switch(i){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&t==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&t==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Ee(i,e,t){const r=i.slice();return r[21]=e[t][0],r[22]=e[t][1],r}function Be(i){let e,t,r,n=We(i[0],i[7].proposed.trafficData,i[7].proposed.customFeatures,i[4],i[5])[i[3]=="Desirable"?0:1]+"",s,a,l,o,u,v=de(i[0]).length>0,m,p=me(i[0],i[7].proposed.trafficData),c,$;const f=[Ft,yt,kt],d=[];function _(h,g){return h[9]=="left"?0:h[9]=="right"?1:h[9]=="both"?2:-1}~(l=_(i))&&(o=d[l]=f[l](i));let k=v&&Re(i),T=p&&Pe(i);return{c(){e=A("p"),t=M(i[3]),r=M(" minimum width (m): "),s=M(n),a=B(),o&&o.c(),u=B(),k&&k.c(),m=B(),T&&T.c(),c=Y()},l(h){e=V(h,"P",{});var g=J(e);t=W(g,i[3]),r=W(g," minimum width (m): "),s=W(g,n),g.forEach(w),a=R(h),o&&o.l(h),u=R(h),k&&k.l(h),m=R(h),T&&T.l(h),c=Y()},m(h,g){F(h,e,g),O(e,t),O(e,r),O(e,s),F(h,a,g),~l&&d[l].m(h,g),F(h,u,g),k&&k.m(h,g),F(h,m,g),T&&T.m(h,g),F(h,c,g),$=!0},p(h,g){(!$||g&8)&&Z(t,h[3]),(!$||g&185)&&n!==(n=We(h[0],h[7].proposed.trafficData,h[7].proposed.customFeatures,h[4],h[5])[h[3]=="Desirable"?0:1]+"")&&Z(s,n);let q=l;l=_(h),l===q?~l&&d[l].p(h,g):(o&&(K(),D(d[q],1,1,()=>{d[q]=null}),Q()),~l?(o=d[l],o?o.p(h,g):(o=d[l]=f[l](h),o.c()),y(o,1),o.m(u.parentNode,u)):o=null),g&1&&(v=de(h[0]).length>0),v?k?(k.p(h,g),g&1&&y(k,1)):(k=Re(h),k.c(),y(k,1),k.m(m.parentNode,m)):k&&(K(),D(k,1,1,()=>{k=null}),Q()),g&129&&(p=me(h[0],h[7].proposed.trafficData)),p?T?T.p(h,g):(T=Pe(h),T.c(),T.m(c.parentNode,c)):T&&(T.d(1),T=null)},i(h){$||(y(o),y(k),$=!0)},o(h){D(o),D(k),$=!1},d(h){h&&(w(e),w(a),w(u),w(m),w(c)),~l&&d[l].d(h),k&&k.d(h),T&&T.d(h)}}}function kt(i){let e,t;return e=new he({props:{$$slots:{default:[Tt]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function yt(i){let e,t;return e=new he({props:{$$slots:{default:[Lt]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Ft(i){let e,t;return e=new he({props:{$$slots:{default:[Nt]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Dt(i){let e;return{c(){e=M("Add")},l(t){e=W(t,"Add")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Tt(i){let e,t,r;return t=new X({props:{$$slots:{default:[Dt]},$$scope:{ctx:i}}}),t.$on("click",i[14]),{c(){e=M("Consider buffer to left and right "),S(t.$$.fragment)},l(n){e=W(n,"Consider buffer to left and right "),L(t.$$.fragment,n)},m(n,s){F(n,e,s),C(t,n,s),r=!0},p(n,s){const a={};s&33554432&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(y(t.$$.fragment,n),r=!0)},o(n){D(t.$$.fragment,n),r=!1},d(n){n&&w(e),N(t,n)}}}function St(i){let e;return{c(){e=M("Add")},l(t){e=W(t,"Add")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Lt(i){let e,t,r;return t=new X({props:{$$slots:{default:[St]},$$scope:{ctx:i}}}),t.$on("click",i[13]),{c(){e=M("Consider buffer to right "),S(t.$$.fragment)},l(n){e=W(n,"Consider buffer to right "),L(t.$$.fragment,n)},m(n,s){F(n,e,s),C(t,n,s),r=!0},p(n,s){const a={};s&33554432&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(y(t.$$.fragment,n),r=!0)},o(n){D(t.$$.fragment,n),r=!1},d(n){n&&w(e),N(t,n)}}}function Ct(i){let e;return{c(){e=M("Add")},l(t){e=W(t,"Add")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Nt(i){let e,t,r;return t=new X({props:{$$slots:{default:[Ct]},$$scope:{ctx:i}}}),t.$on("click",i[12]),{c(){e=M("Consider buffer to left "),S(t.$$.fragment)},l(n){e=W(n,"Consider buffer to left "),L(t.$$.fragment,n)},m(n,s){F(n,e,s),C(t,n,s),r=!0},p(n,s){const a={};s&33554432&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(y(t.$$.fragment,n),r=!0)},o(n){D(t.$$.fragment,n),r=!1},d(n){n&&w(e),N(t,n)}}}function Re(i){let e,t="References",r,n,s,a=le(de(i[0])),l=[];for(let u=0;u<a.length;u+=1)l[u]=Oe(Ee(i,a,u));const o=u=>D(l[u],1,1,()=>{l[u]=null});return{c(){e=A("u"),e.textContent=t,r=M(`
      :
      `),n=A("ul");for(let u=0;u<l.length;u+=1)l[u].c()},l(u){e=V(u,"U",{"data-svelte-h":!0}),$e(e)!=="svelte-fk7cdq"&&(e.textContent=t),r=W(u,`
      :
      `),n=V(u,"UL",{});var v=J(n);for(let m=0;m<l.length;m+=1)l[m].l(v);v.forEach(w)},m(u,v){F(u,e,v),F(u,r,v),F(u,n,v);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(n,null);s=!0},p(u,v){if(v&1){a=le(de(u[0]));let m;for(m=0;m<a.length;m+=1){const p=Ee(u,a,m);l[m]?(l[m].p(p,v),y(l[m],1)):(l[m]=Oe(p),l[m].c(),y(l[m],1),l[m].m(n,null))}for(K(),m=a.length;m<l.length;m+=1)o(m);Q()}},i(u){if(!s){for(let v=0;v<a.length;v+=1)y(l[v]);s=!0}},o(u){l=l.filter(Boolean);for(let v=0;v<l.length;v+=1)D(l[v]);s=!1},d(u){u&&(w(e),w(r),w(n)),at(l,u)}}}function Mt(i){let e,t=i[21]+"",r;return{c(){e=A("li"),r=M(t)},l(n){e=V(n,"LI",{});var s=J(e);r=W(s,t),s.forEach(w)},m(n,s){F(n,e,s),O(e,r)},p(n,s){s&1&&t!==(t=n[21]+"")&&Z(r,t)},i:fe,o:fe,d(n){n&&w(e)}}}function Wt(i){let e,t,r;return t=new pt({props:{href:i[22],$$slots:{default:[Et]},$$scope:{ctx:i}}}),{c(){e=A("li"),S(t.$$.fragment)},l(n){e=V(n,"LI",{});var s=J(e);L(t.$$.fragment,s),s.forEach(w)},m(n,s){F(n,e,s),C(t,e,null),r=!0},p(n,s){const a={};s&1&&(a.href=n[22]),s&33554433&&(a.$$scope={dirty:s,ctx:n}),t.$set(a)},i(n){r||(y(t.$$.fragment,n),r=!0)},o(n){D(t.$$.fragment,n),r=!1},d(n){n&&w(e),N(t)}}}function Et(i){let e=i[21]+"",t;return{c(){t=M(e)},l(r){t=W(r,e)},m(r,n){F(r,t,n)},p(r,n){n&1&&e!==(e=r[21]+"")&&Z(t,e)},d(r){r&&w(t)}}}function Oe(i){let e,t,r,n;const s=[Wt,Mt],a=[];function l(o,u){return o[22]?0:1}return e=l(i),t=a[e]=s[e](i),{c(){t.c(),r=Y()},l(o){t.l(o),r=Y()},m(o,u){a[e].m(o,u),F(o,r,u),n=!0},p(o,u){let v=e;e=l(o),e===v?a[e].p(o,u):(K(),D(a[v],1,1,()=>{a[v]=null}),Q(),t=a[e],t?t.p(o,u):(t=a[e]=s[e](o),t.c()),y(t,1),t.m(r.parentNode,r))},i(o){n||(y(t),n=!0)},o(o){D(t),n=!1},d(o){o&&w(r),a[e].d(o)}}}function Pe(i){let e,t="Guidance",r,n,s=me(i[0],i[7].proposed.trafficData)+"",a;return{c(){e=A("u"),e.textContent=t,r=M(`
      :
      `),n=A("p"),a=M(s),this.h()},l(l){e=V(l,"U",{"data-svelte-h":!0}),$e(e)!=="svelte-qh7mhq"&&(e.textContent=t),r=W(l,`
      :
      `),n=V(l,"P",{style:!0});var o=J(n);a=W(o,s),o.forEach(w),this.h()},h(){ae(n,"max-width","400px")},m(l,o){F(l,e,o),F(l,r,o),F(l,n,o),O(n,a)},p(l,o){o&129&&s!==(s=me(l[0],l[7].proposed.trafficData)+"")&&Z(a,s)},d(l){l&&(w(e),w(r),w(n))}}}function Bt(i){let e;return{c(){e=M("←")},l(t){e=W(t,"←")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Rt(i){let e;return{c(){e=M("Delete")},l(t){e=W(t,"Delete")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Ot(i){let e;return{c(){e=M("→")},l(t){e=W(t,"→")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Pt(i){let e,t,r,n,s,a,l,o,u,v,m,p;function c(d){i[11](d)}let $={label:"Street feature type",emptyOption:!0,choices:i[8]};i[6]!==void 0&&($.value=i[6]),t=new ee({props:$}),U.push(()=>G(t,"value",c));let f=i[0]&&Be(i);return l=new X({props:{disabled:i[1],$$slots:{default:[Bt]},$$scope:{ctx:i}}}),l.$on("click",i[15]),u=new Ke({props:{$$slots:{default:[Rt]},$$scope:{ctx:i}}}),u.$on("click",i[16]),m=new X({props:{disabled:i[2],$$slots:{default:[Ot]},$$scope:{ctx:i}}}),m.$on("click",i[17]),{c(){e=A("div"),S(t.$$.fragment),n=B(),f&&f.c(),s=B(),a=A("div"),S(l.$$.fragment),o=B(),S(u.$$.fragment),v=B(),S(m.$$.fragment),this.h()},l(d){e=V(d,"DIV",{class:!0});var _=J(e);L(t.$$.fragment,_),n=R(_),f&&f.l(_),s=R(_),a=V(_,"DIV",{style:!0,class:!0});var k=J(a);L(l.$$.fragment,k),o=R(k),L(u.$$.fragment,k),v=R(k),L(m.$$.fragment,k),k.forEach(w),_.forEach(w),this.h()},h(){ae(a,"display","flex"),ae(a,"justify-content","space-between"),te(a,"class","svelte-jig4ga"),te(e,"class","svelte-jig4ga")},m(d,_){F(d,e,_),C(t,e,null),O(e,n),f&&f.m(e,null),O(e,s),O(e,a),C(l,a,null),O(a,o),C(u,a,null),O(a,v),C(m,a,null),p=!0},p(d,[_]){const k={};_&256&&(k.choices=d[8]),!r&&_&64&&(r=!0,k.value=d[6],H(()=>r=!1)),t.$set(k),d[0]?f?(f.p(d,_),_&1&&y(f,1)):(f=Be(d),f.c(),y(f,1),f.m(e,s)):f&&(K(),D(f,1,1,()=>{f=null}),Q());const T={};_&2&&(T.disabled=d[1]),_&33554432&&(T.$$scope={dirty:_,ctx:d}),l.$set(T);const h={};_&33554432&&(h.$$scope={dirty:_,ctx:d}),u.$set(h);const g={};_&4&&(g.disabled=d[2]),_&33554432&&(g.$$scope={dirty:_,ctx:d}),m.$set(g)},i(d){p||(y(t.$$.fragment,d),y(f),y(l.$$.fragment,d),y(u.$$.fragment,d),y(m.$$.fragment,d),p=!0)},o(d){D(t.$$.fragment,d),D(f),D(l.$$.fragment,d),D(u.$$.fragment,d),D(m.$$.fragment,d),p=!1},d(d){d&&w(e),N(t),f&&f.d(),N(l),N(u),N(m)}}}function qt(i,e,t){let r,n,s;oe(i,I,E=>t(7,s=E));let{value:a}=e,{isFirst:l}=e,{isLast:o}=e,{sectionType:u}=e,{leftFeature:v}=e,{rightFeature:m}=e,p=He(),c=typeof a=="object"?`custom_${a.custom}`:a;function $(E){E.startsWith("custom_")?t(0,a={custom:E.slice(7)}):t(0,a=E)}function f(E){t(6,c=typeof E=="object"?`custom_${E.custom}`:E)}function d(E){let ue=re(Qe);for(let[ce,_e]of Object.entries(E))ue.push([`custom_${ce}`,`Custom: ${_e.name}`]);return ue}function _(E){c=E,t(6,c)}const k=()=>p("addLeftBuffer"),T=()=>p("addRightBuffer"),h=()=>{p("addRightBuffer"),p("addLeftBuffer")},g=()=>p("moveLeft"),q=()=>p("delete"),x=()=>p("moveRight");return i.$$set=E=>{"value"in E&&t(0,a=E.value),"isFirst"in E&&t(1,l=E.isFirst),"isLast"in E&&t(2,o=E.isLast),"sectionType"in E&&t(3,u=E.sectionType),"leftFeature"in E&&t(4,v=E.leftFeature),"rightFeature"in E&&t(5,m=E.rightFeature)},i.$$.update=()=>{i.$$.dirty&49&&t(9,r=a&&ft(a,v,m)),i.$$.dirty&64&&$(c),i.$$.dirty&1&&f(a),i.$$.dirty&128&&t(8,n=d(s.proposed.customFeatures))},[a,l,o,u,v,m,c,s,n,r,p,_,k,T,h,g,q,x]}class It extends ie{constructor(e){super(),se(this,e,qt,Pt,ne,{value:0,isFirst:1,isLast:2,sectionType:3,leftFeature:4,rightFeature:5})}}function qe(i,e,t){const r=i.slice();return r[18]=e[t],r[19]=e,r[20]=t,r}function At(i){let e;return{c(){e=M("Add")},l(t){e=W(t,"Add")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Ie(i,e){let t,r,n,s;function a(c){e[10](c,e[18],e[19],e[20])}function l(){return e[11](e[20])}function o(){return e[12](e[20])}function u(){return e[13](e[20])}function v(){return e[14](e[20])}function m(){return e[15](e[20])}let p={isFirst:e[20]==0,isLast:e[20]==e[0].length-1,leftFeature:e[20]==0?"":e[0][e[20]-1],rightFeature:e[20]==e[0].length-1?"":e[0][e[20]+1],sectionType:e[1]};return e[18]!==void 0&&(p.value=e[18]),r=new It({props:p}),U.push(()=>G(r,"value",a)),r.$on("delete",l),r.$on("moveLeft",o),r.$on("moveRight",u),r.$on("addLeftBuffer",v),r.$on("addRightBuffer",m),{key:i,first:null,c(){t=Y(),S(r.$$.fragment),this.h()},l(c){t=Y(),L(r.$$.fragment,c),this.h()},h(){this.first=t},m(c,$){F(c,t,$),C(r,c,$),s=!0},p(c,$){e=c;const f={};$&1&&(f.isFirst=e[20]==0),$&1&&(f.isLast=e[20]==e[0].length-1),$&1&&(f.leftFeature=e[20]==0?"":e[0][e[20]-1]),$&1&&(f.rightFeature=e[20]==e[0].length-1?"":e[0][e[20]+1]),$&2&&(f.sectionType=e[1]),!n&&$&1&&(n=!0,f.value=e[18],H(()=>n=!1)),r.$set(f)},i(c){s||(y(r.$$.fragment,c),s=!0)},o(c){D(r.$$.fragment,c),s=!1},d(c){c&&w(t),N(r,c)}}}function Vt(i){let e,t,r,n=[],s=new Map,a,l,o,u,v=i[3].toFixed(2)+"",m,p;e=new X({props:{$$slots:{default:[At]},$$scope:{ctx:i}}}),e.$on("click",i[4]);let c=le(i[0]);const $=f=>f[20];for(let f=0;f<c.length;f+=1){let d=qe(i,c,f),_=$(d);s.set(_,n[f]=Ie(_,d))}return{c(){S(e.$$.fragment),t=B(),r=A("div");for(let f=0;f<n.length;f+=1)n[f].c();a=B(),l=A("p"),o=M("Total width required (m): "),u=A("b"),m=M(v),this.h()},l(f){L(e.$$.fragment,f),t=R(f),r=V(f,"DIV",{style:!0});var d=J(r);for(let T=0;T<n.length;T+=1)n[T].l(d);d.forEach(w),a=R(f),l=V(f,"P",{});var _=J(l);o=W(_,"Total width required (m): "),u=V(_,"B",{});var k=J(u);m=W(k,v),k.forEach(w),_.forEach(w),this.h()},h(){ae(r,"display","flex"),ae(r,"flex-direction","row"),ae(r,"overflow-x","scroll")},m(f,d){C(e,f,d),F(f,t,d),F(f,r,d);for(let _=0;_<n.length;_+=1)n[_]&&n[_].m(r,null);i[16](r),F(f,a,d),F(f,l,d),O(l,o),O(l,u),O(u,m),p=!0},p(f,[d]){const _={};d&2097152&&(_.$$scope={dirty:d,ctx:f}),e.$set(_),d&483&&(c=le(f[0]),K(),n=ze(n,d,$,1,f,c,s,r,Ye,Ie,null,qe),Q()),(!p||d&8)&&v!==(v=f[3].toFixed(2)+"")&&Z(m,v)},i(f){if(!p){y(e.$$.fragment,f);for(let d=0;d<c.length;d+=1)y(n[d]);p=!0}},o(f){D(e.$$.fragment,f);for(let d=0;d<n.length;d+=1)D(n[d]);p=!1},d(f){f&&(w(t),w(r),w(a),w(l)),N(e,f);for(let d=0;d<n.length;d+=1)n[d].d();i[16](null)}}}function jt(i,e,t){let r,n;oe(i,I,g=>t(9,n=g));let{streetFeaturesLeftToRight:s}=e,{sectionType:a}=e,l,o=!1;lt(()=>{o&&(o=!1,t(2,l.scrollLeft=l.scrollWidth,l))});function u(){t(0,s=[...s,""]),o=!0}function v(g){s.splice(g,1),t(0,s)}function m(g){t(0,[s[g-1],s[g]]=[s[g],s[g-1]],s)}function p(g){t(0,[s[g+1],s[g]]=[s[g],s[g+1]],s)}function c(g){s.splice(g,0,"Buffer / Verge"),t(0,s)}function $(g,q,x,E){x[E]=g,t(0,s)}const f=g=>v(g),d=g=>m(g),_=g=>p(g),k=g=>c(g),T=g=>c(g+1);function h(g){U[g?"unshift":"push"](()=>{l=g,t(2,l)})}return i.$$set=g=>{"streetFeaturesLeftToRight"in g&&t(0,s=g.streetFeaturesLeftToRight),"sectionType"in g&&t(1,a=g.sectionType)},i.$$.update=()=>{i.$$.dirty&514&&t(3,r=ut(n,a))},[s,a,l,r,u,v,m,p,c,n,$,f,d,_,k,T,h]}class et extends ie{constructor(e){super(),se(this,e,jt,Vt,ne,{streetFeaturesLeftToRight:0,sectionType:1})}}function Ut(i){let e;return{c(){e=M("Confirm")},l(t){e=W(t,"Confirm")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Jt(i){let e;return{c(){e=M("Cancel")},l(t){e=W(t,"Cancel")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Ht(i){let e,t,r,n,s,a,l,o,u,v,m,p;function c(_){i[6](_)}let $={label:"Name"};i[0]!==void 0&&($.value=i[0]),e=new _t({props:$}),U.push(()=>G(e,"value",c));function f(_){i[7](_)}let d={label:"Minimum width (m)",width:4,min:0};return i[1]!==void 0&&(d.value=i[1]),n=new ct({props:d}),U.push(()=>G(n,"value",f)),l=new Ze({props:{errorMessage:i[2]}}),u=new dt({props:{disabled:i[2]!="",$$slots:{default:[Ut]},$$scope:{ctx:i}}}),u.$on("click",i[8]),m=new X({props:{$$slots:{default:[Jt]},$$scope:{ctx:i}}}),m.$on("click",i[9]),{c(){S(e.$$.fragment),r=B(),S(n.$$.fragment),a=B(),S(l.$$.fragment),o=B(),S(u.$$.fragment),v=B(),S(m.$$.fragment)},l(_){L(e.$$.fragment,_),r=R(_),L(n.$$.fragment,_),a=R(_),L(l.$$.fragment,_),o=R(_),L(u.$$.fragment,_),v=R(_),L(m.$$.fragment,_)},m(_,k){C(e,_,k),F(_,r,k),C(n,_,k),F(_,a,k),C(l,_,k),F(_,o,k),C(u,_,k),F(_,v,k),C(m,_,k),p=!0},p(_,k){const T={};!t&&k&1&&(t=!0,T.value=_[0],H(()=>t=!1)),e.$set(T);const h={};!s&&k&2&&(s=!0,h.value=_[1],H(()=>s=!1)),n.$set(h);const g={};k&4&&(g.errorMessage=_[2]),l.$set(g);const q={};k&4&&(q.disabled=_[2]!=""),k&4096&&(q.$$scope={dirty:k,ctx:_}),u.$set(q);const x={};k&4096&&(x.$$scope={dirty:k,ctx:_}),m.$set(x)},i(_){p||(y(e.$$.fragment,_),y(n.$$.fragment,_),y(l.$$.fragment,_),y(u.$$.fragment,_),y(m.$$.fragment,_),p=!0)},o(_){D(e.$$.fragment,_),D(n.$$.fragment,_),D(l.$$.fragment,_),D(u.$$.fragment,_),D(m.$$.fragment,_),p=!1},d(_){_&&(w(r),w(a),w(o),w(v)),N(e,_),N(n,_),N(l,_),N(u,_),N(m,_)}}}function Gt(i){let e,t;return e=new $t({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[Ht]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,[n]){const s={};n&4103&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function zt(i,e,t){let r,n;oe(i,I,f=>t(10,n=f));let{initialName:s}=e,{initialWidth:a}=e,l=He(),o=s,u=a;function v(f,d){return f==""?"Name must be specified":f!=s&&Object.values(n.proposed.customFeatures).some(_=>_.name==f)?"That name is already used by another custom feature":Qe.includes(f)?"That name is the same as one of the built-in features":isNaN(d)?"Enter a valid width":d<=0?"Enter a positive width":""}function m(f){o=f,t(0,o)}function p(f){u=f,t(1,u)}const c=()=>l("confirm",{name:o,width:u}),$=()=>l("cancel");return i.$$set=f=>{"initialName"in f&&t(4,s=f.initialName),"initialWidth"in f&&t(5,a=f.initialWidth)},i.$$.update=()=>{i.$$.dirty&3&&t(2,r=v(o,u))},[o,u,r,l,s,a,m,p,c,$]}class Yt extends ie{constructor(e){super(),se(this,e,zt,Gt,ne,{initialName:4,initialWidth:5})}}function Ae(i,e,t){const r=i.slice();return r[9]=e[t],r}function Kt(i){let e;return{c(){e=M("Add")},l(t){e=W(t,"Add")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Qt(i){let e;return{c(){e=M("Edit")},l(t){e=W(t,"Edit")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Xt(i){let e;return{c(){e=M("Delete")},l(t){e=W(t,"Delete")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function Ve(i,e){let t,r,n,s=e[1].proposed.customFeatures[e[9]].name+"",a,l,o=e[1].proposed.customFeatures[e[9]].width+"",u,v,m,p,c,$,f,d;function _(){return e[6](e[9])}p=new X({props:{$$slots:{default:[Qt]},$$scope:{ctx:e}}}),p.$on("click",_);function k(){return e[7](e[9])}return $=new Ke({props:{$$slots:{default:[Xt]},$$scope:{ctx:e}}}),$.$on("click",k),{key:i,first:null,c(){t=A("li"),r=A("span"),n=A("u"),a=M(s),l=M(`
        : `),u=M(o),v=M(" m minimum width"),m=B(),S(p.$$.fragment),c=B(),S($.$$.fragment),f=B(),this.h()},l(T){t=V(T,"LI",{});var h=J(t);r=V(h,"SPAN",{});var g=J(r);n=V(g,"U",{});var q=J(n);a=W(q,s),q.forEach(w),l=W(g,`
        : `),u=W(g,o),v=W(g," m minimum width"),g.forEach(w),m=R(h),L(p.$$.fragment,h),c=R(h),L($.$$.fragment,h),f=R(h),h.forEach(w),this.h()},h(){this.first=t},m(T,h){F(T,t,h),O(t,r),O(r,n),O(n,a),O(r,l),O(r,u),O(r,v),O(t,m),C(p,t,null),O(t,c),C($,t,null),O(t,f),d=!0},p(T,h){e=T,(!d||h&2)&&s!==(s=e[1].proposed.customFeatures[e[9]].name+"")&&Z(a,s),(!d||h&2)&&o!==(o=e[1].proposed.customFeatures[e[9]].width+"")&&Z(u,o);const g={};h&4096&&(g.$$scope={dirty:h,ctx:e}),p.$set(g);const q={};h&4096&&(q.$$scope={dirty:h,ctx:e}),$.$set(q)},i(T){d||(y(p.$$.fragment,T),y($.$$.fragment,T),d=!0)},o(T){D(p.$$.fragment,T),D($.$$.fragment,T),d=!1},d(T){T&&w(t),N(p),N($)}}}function je(i){let e,t;return e=new Yt({props:{initialName:i[0].initialName,initialWidth:i[0].initialWidth}}),e.$on("cancel",i[8]),e.$on("confirm",i[5]),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&1&&(s.initialName=r[0].initialName),n&1&&(s.initialWidth=r[0].initialWidth),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Zt(i){let e,t,r,n=[],s=new Map,a,l,o;e=new X({props:{$$slots:{default:[Kt]},$$scope:{ctx:i}}}),e.$on("click",i[2]);let u=le(Object.keys(i[1].proposed.customFeatures));const v=p=>p[9];for(let p=0;p<u.length;p+=1){let c=Ae(i,u,p),$=v(c);s.set($,n[p]=Ve($,c))}let m=i[0]&&je(i);return{c(){S(e.$$.fragment),t=B(),r=A("ol");for(let p=0;p<n.length;p+=1)n[p].c();a=B(),m&&m.c(),l=Y()},l(p){L(e.$$.fragment,p),t=R(p),r=V(p,"OL",{});var c=J(r);for(let $=0;$<n.length;$+=1)n[$].l(c);c.forEach(w),a=R(p),m&&m.l(p),l=Y()},m(p,c){C(e,p,c),F(p,t,c),F(p,r,c);for(let $=0;$<n.length;$+=1)n[$]&&n[$].m(r,null);F(p,a,c),m&&m.m(p,c),F(p,l,c),o=!0},p(p,[c]){const $={};c&4096&&($.$$scope={dirty:c,ctx:p}),e.$set($),c&26&&(u=le(Object.keys(p[1].proposed.customFeatures)),K(),n=ze(n,c,v,1,p,u,s,r,Ye,Ve,null,Ae),Q()),p[0]?m?(m.p(p,c),c&1&&y(m,1)):(m=je(p),m.c(),y(m,1),m.m(l.parentNode,l)):m&&(K(),D(m,1,1,()=>{m=null}),Q())},i(p){if(!o){y(e.$$.fragment,p);for(let c=0;c<u.length;c+=1)y(n[c]);y(m),o=!0}},o(p){D(e.$$.fragment,p);for(let c=0;c<n.length;c+=1)D(n[c]);D(m),o=!1},d(p){p&&(w(t),w(r),w(a),w(l)),N(e,p);for(let c=0;c<n.length;c+=1)n[c].d();m&&m.d(p)}}}function xt(i,e,t){let r;oe(i,I,p=>t(1,r=p));let n=null;function s(){t(0,n={id:xe(),initialName:"",initialWidth:0})}function a(p){let c=r.proposed.customFeatures[p].name,$=JSON.stringify({custom:p});if(r.proposed.desirableMinimumCrossSection.some(f=>JSON.stringify(f)==$)){window.alert(`The ${c} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(r.proposed.absoluteMinimumCrossSection.some(f=>JSON.stringify(f)==$)){window.alert(`The ${c} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete r.proposed.customFeatures[p],I.set(r)}function l(p){t(0,n={id:p,initialName:r.proposed.customFeatures[p].name,initialWidth:r.proposed.customFeatures[p].width})}function o(p){Ge(I,r.proposed.customFeatures[n.id]={name:p.detail.name,width:p.detail.width},r),I.set(r),t(0,n=null)}return[n,r,s,a,l,o,p=>l(p),p=>a(p),()=>t(0,n=null)]}class er extends ie{constructor(e){super(),se(this,e,xt,Zt,ne,{})}}function Ue(i){let e,t,r,n;return{c(){e=A("p"),t=M("Effective speed limit, based on the limit and 85 percentile: "),r=M(i[1]),n=M(`
      mph`)},l(s){e=V(s,"P",{});var a=J(e);t=W(a,"Effective speed limit, based on the limit and 85 percentile: "),r=W(a,i[1]),n=W(a,`
      mph`),a.forEach(w)},m(s,a){F(s,e,a),O(e,t),O(e,r),O(e,n)},p(s,a){a&2&&Z(r,s[1])},d(s){s&&w(e)}}}function tr(i){let e,t,r,n,s,a,l,o,u,v,m,p,c,$,f,d,_,k,T,h,g,q;function x(b){i[4](b)}let E={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:re(["<200","200-800",">800"])};i[0].proposed.trafficData.flowOneWay!==void 0&&(E.value=i[0].proposed.trafficData.flowOneWay),e=new ee({props:E}),U.push(()=>G(e,"value",x));function ue(b){i[5](b)}let ce={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:re(["<300","300-1,000",">1,000"])};i[0].proposed.trafficData.flowTwoWay!==void 0&&(ce.value=i[0].proposed.trafficData.flowTwoWay),n=new ee({props:ce}),U.push(()=>G(n,"value",ue));function _e(b){i[6](b)}let ge={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:re(["<300",">300"])};i[0].proposed.trafficData.flowSharedUse!==void 0&&(ge.value=i[0].proposed.trafficData.flowSharedUse),l=new ee({props:ge}),U.push(()=>G(l,"value",_e));function tt(b){i[7](b)}let be={label:"Traffic flow (vpd)",emptyOption:!0,choices:re(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};i[0].proposed.trafficData.trafficFlow!==void 0&&(be.value=i[0].proposed.trafficData.trafficFlow),v=new ee({props:be}),U.push(()=>G(v,"value",tt));function rt(b){i[8](b)}let ve={label:"Speed limit (MPH)",emptyOption:!0,choices:i[2]};i[0].proposed.trafficData.speedLimit!==void 0&&(ve.value=i[0].proposed.trafficData.speedLimit),c=new ee({props:ve}),U.push(()=>G(c,"value",rt));function nt(b){i[9](b)}let we={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};i[0].proposed.trafficData.observedSpeed!==void 0&&(we.value=i[0].proposed.trafficData.observedSpeed),d=new vt({props:we}),U.push(()=>G(d,"value",nt));let j=i[1]&&Ue(i);function it(b){i[10](b)}let ke={label:"Street function",emptyOption:!0,choices:re(["High Street (active frontages)","Residential street","Local distributor road"])};return i[0].proposed.trafficData.streetFunction!==void 0&&(ke.value=i[0].proposed.trafficData.streetFunction),h=new ee({props:ke}),U.push(()=>G(h,"value",it)),{c(){S(e.$$.fragment),r=B(),S(n.$$.fragment),a=B(),S(l.$$.fragment),u=B(),S(v.$$.fragment),p=B(),S(c.$$.fragment),f=B(),S(d.$$.fragment),k=B(),j&&j.c(),T=B(),S(h.$$.fragment)},l(b){L(e.$$.fragment,b),r=R(b),L(n.$$.fragment,b),a=R(b),L(l.$$.fragment,b),u=R(b),L(v.$$.fragment,b),p=R(b),L(c.$$.fragment,b),f=R(b),L(d.$$.fragment,b),k=R(b),j&&j.l(b),T=R(b),L(h.$$.fragment,b)},m(b,P){C(e,b,P),F(b,r,P),C(n,b,P),F(b,a,P),C(l,b,P),F(b,u,P),C(v,b,P),F(b,p,P),C(c,b,P),F(b,f,P),C(d,b,P),F(b,k,P),j&&j.m(b,P),F(b,T,P),C(h,b,P),q=!0},p(b,P){const ye={};!t&&P&1&&(t=!0,ye.value=b[0].proposed.trafficData.flowOneWay,H(()=>t=!1)),e.$set(ye);const Fe={};!s&&P&1&&(s=!0,Fe.value=b[0].proposed.trafficData.flowTwoWay,H(()=>s=!1)),n.$set(Fe);const De={};!o&&P&1&&(o=!0,De.value=b[0].proposed.trafficData.flowSharedUse,H(()=>o=!1)),l.$set(De);const Te={};!m&&P&1&&(m=!0,Te.value=b[0].proposed.trafficData.trafficFlow,H(()=>m=!1)),v.$set(Te);const Se={};!$&&P&1&&($=!0,Se.value=b[0].proposed.trafficData.speedLimit,H(()=>$=!1)),c.$set(Se);const Le={};!_&&P&1&&(_=!0,Le.value=b[0].proposed.trafficData.observedSpeed,H(()=>_=!1)),d.$set(Le),b[1]?j?j.p(b,P):(j=Ue(b),j.c(),j.m(T.parentNode,T)):j&&(j.d(1),j=null);const Ce={};!g&&P&1&&(g=!0,Ce.value=b[0].proposed.trafficData.streetFunction,H(()=>g=!1)),h.$set(Ce)},i(b){q||(y(e.$$.fragment,b),y(n.$$.fragment,b),y(l.$$.fragment,b),y(v.$$.fragment,b),y(c.$$.fragment,b),y(d.$$.fragment,b),y(h.$$.fragment,b),q=!0)},o(b){D(e.$$.fragment,b),D(n.$$.fragment,b),D(l.$$.fragment,b),D(v.$$.fragment,b),D(c.$$.fragment,b),D(d.$$.fragment,b),D(h.$$.fragment,b),q=!1},d(b){b&&(w(r),w(a),w(u),w(p),w(f),w(k),w(T)),N(e,b),N(n,b),N(l,b),N(v,b),N(c,b),N(d,b),j&&j.d(b),N(h,b)}}}function rr(i){let e,t;return e=new pe({props:{label:"Traffic data and additional information",$$slots:{default:[tr]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,[n]){const s={};n&2051&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function nr(i,e,t){let r,n;oe(i,I,$=>t(0,n=$));let{valid:s}=e,a=re(ot);function l($){i.$$.not_equal(n.proposed.trafficData.flowOneWay,$)&&(n.proposed.trafficData.flowOneWay=$,I.set(n))}function o($){i.$$.not_equal(n.proposed.trafficData.flowTwoWay,$)&&(n.proposed.trafficData.flowTwoWay=$,I.set(n))}function u($){i.$$.not_equal(n.proposed.trafficData.flowSharedUse,$)&&(n.proposed.trafficData.flowSharedUse=$,I.set(n))}function v($){i.$$.not_equal(n.proposed.trafficData.trafficFlow,$)&&(n.proposed.trafficData.trafficFlow=$,I.set(n))}function m($){i.$$.not_equal(n.proposed.trafficData.speedLimit,$)&&(n.proposed.trafficData.speedLimit=$,I.set(n))}function p($){i.$$.not_equal(n.proposed.trafficData.observedSpeed,$)&&(n.proposed.trafficData.observedSpeed=$,I.set(n))}function c($){i.$$.not_equal(n.proposed.trafficData.streetFunction,$)&&(n.proposed.trafficData.streetFunction=$,I.set(n))}return i.$$set=$=>{"valid"in $&&t(3,s=$.valid)},i.$$.update=()=>{i.$$.dirty&1&&t(3,s=n.proposed.trafficData.flowOneWay!=""&&n.proposed.trafficData.flowTwoWay!=""&&n.proposed.trafficData.flowSharedUse!=""&&n.proposed.trafficData.trafficFlow!=""&&n.proposed.trafficData.speedLimit!=""&&n.proposed.trafficData.observedSpeed!=null&&n.proposed.trafficData.streetFunction!=""),i.$$.dirty&1&&t(1,r=Xe(n.proposed.trafficData.speedLimit,n.proposed.trafficData.observedSpeed))},[n,r,a,s,l,o,u,v,m,p,c]}class ir extends ie{constructor(e){super(),se(this,e,nr,rr,ne,{valid:3})}}function sr(i){let e,t;return e=new er({}),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function ar(i){let e,t="Fill out all traffic data above to continue";return{c(){e=A("p"),e.textContent=t},l(r){e=V(r,"P",{"data-svelte-h":!0}),$e(e)!=="svelte-72a5ry"&&(e.textContent=t)},m(r,n){F(r,e,n)},p:fe,i:fe,o:fe,d(r){r&&w(e)}}}function lr(i){let e,t,r,n;return e=new pe({props:{label:"Desirable Minimum Cross-Section",open:!0,$$slots:{default:[or]},$$scope:{ctx:i}}}),r=new pe({props:{label:"Absolute Minimum Cross-Section",open:!0,$$slots:{default:[ur]},$$scope:{ctx:i}}}),{c(){S(e.$$.fragment),t=B(),S(r.$$.fragment)},l(s){L(e.$$.fragment,s),t=R(s),L(r.$$.fragment,s)},m(s,a){C(e,s,a),F(s,t,a),C(r,s,a),n=!0},p(s,a){const l={};a&66&&(l.$$scope={dirty:a,ctx:s}),e.$set(l);const o={};a&66&&(o.$$scope={dirty:a,ctx:s}),r.$set(o)},i(s){n||(y(e.$$.fragment,s),y(r.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),D(r.$$.fragment,s),n=!1},d(s){s&&w(t),N(e,s),N(r,s)}}}function or(i){let e,t,r;function n(a){i[4](a)}let s={sectionType:"Desirable"};return i[1].proposed.desirableMinimumCrossSection!==void 0&&(s.streetFeaturesLeftToRight=i[1].proposed.desirableMinimumCrossSection),e=new et({props:s}),U.push(()=>G(e,"streetFeaturesLeftToRight",n)),{c(){S(e.$$.fragment)},l(a){L(e.$$.fragment,a)},m(a,l){C(e,a,l),r=!0},p(a,l){const o={};!t&&l&2&&(t=!0,o.streetFeaturesLeftToRight=a[1].proposed.desirableMinimumCrossSection,H(()=>t=!1)),e.$set(o)},i(a){r||(y(e.$$.fragment,a),r=!0)},o(a){D(e.$$.fragment,a),r=!1},d(a){N(e,a)}}}function Je(i){let e,t;return e=new X({props:{$$slots:{default:[fr]},$$scope:{ctx:i}}}),e.$on("click",i[2]),{c(){S(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function fr(i){let e;return{c(){e=M("Copy Desirable Minimum")},l(t){e=W(t,"Copy Desirable Minimum")},m(t,r){F(t,e,r)},d(t){t&&w(e)}}}function ur(i){let e,t,r,n,s=i[1].proposed.absoluteMinimumCrossSection.length==0&&Je(i);function a(o){i[5](o)}let l={sectionType:"Absolute"};return i[1].proposed.absoluteMinimumCrossSection!==void 0&&(l.streetFeaturesLeftToRight=i[1].proposed.absoluteMinimumCrossSection),t=new et({props:l}),U.push(()=>G(t,"streetFeaturesLeftToRight",a)),{c(){s&&s.c(),e=B(),S(t.$$.fragment)},l(o){s&&s.l(o),e=R(o),L(t.$$.fragment,o)},m(o,u){s&&s.m(o,u),F(o,e,u),C(t,o,u),n=!0},p(o,u){o[1].proposed.absoluteMinimumCrossSection.length==0?s?(s.p(o,u),u&2&&y(s,1)):(s=Je(o),s.c(),y(s,1),s.m(e.parentNode,e)):s&&(K(),D(s,1,1,()=>{s=null}),Q());const v={};!r&&u&2&&(r=!0,v.streetFeaturesLeftToRight=o[1].proposed.absoluteMinimumCrossSection,H(()=>r=!1)),t.$set(v)},i(o){n||(y(s),y(t.$$.fragment,o),n=!0)},o(o){D(s),D(t.$$.fragment,o),n=!1},d(o){o&&w(e),s&&s.d(o),N(t,o)}}}function cr(i){let e,t,r,n,s,a,l,o,u;function v(f){i[3](f)}let m={};i[0]!==void 0&&(m.valid=i[0]),e=new ir({props:m}),U.push(()=>G(e,"valid",v)),n=new pe({props:{label:"Custom Street Features",$$slots:{default:[sr]},$$scope:{ctx:i}}});const p=[lr,ar],c=[];function $(f,d){return f[0]?0:1}return a=$(i),l=c[a]=p[a](i),{c(){S(e.$$.fragment),r=B(),S(n.$$.fragment),s=B(),l.c(),o=Y()},l(f){L(e.$$.fragment,f),r=R(f),L(n.$$.fragment,f),s=R(f),l.l(f),o=Y()},m(f,d){C(e,f,d),F(f,r,d),C(n,f,d),F(f,s,d),c[a].m(f,d),F(f,o,d),u=!0},p(f,[d]){const _={};!t&&d&1&&(t=!0,_.valid=f[0],H(()=>t=!1)),e.$set(_);const k={};d&64&&(k.$$scope={dirty:d,ctx:f}),n.$set(k);let T=a;a=$(f),a===T?c[a].p(f,d):(K(),D(c[T],1,1,()=>{c[T]=null}),Q(),l=c[a],l?l.p(f,d):(l=c[a]=p[a](f),l.c()),y(l,1),l.m(o.parentNode,o))},i(f){u||(y(e.$$.fragment,f),y(n.$$.fragment,f),y(l),u=!0)},o(f){D(e.$$.fragment,f),D(n.$$.fragment,f),D(l),u=!1},d(f){f&&(w(r),w(s),w(o)),N(e,f),N(n,f),c[a].d(f)}}}function pr(i,e,t){let r;oe(i,I,u=>t(1,r=u));let n=!1;function s(){Ge(I,r.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(r.proposed.desirableMinimumCrossSection)),r)}function a(u){n=u,t(0,n)}function l(u){i.$$.not_equal(r.proposed.desirableMinimumCrossSection,u)&&(r.proposed.desirableMinimumCrossSection=u,I.set(r))}function o(u){i.$$.not_equal(r.proposed.absoluteMinimumCrossSection,u)&&(r.proposed.absoluteMinimumCrossSection=u,I.set(r))}return[n,r,s,a,l,o]}class Mr extends ie{constructor(e){super(),se(this,e,pr,cr,ne,{})}}export{Mr as component};
