import{s as re,a as W,e as I,g as M,c as q,o as z,i as D,E as Ee,v as de,f as b,H as Ge,q as ot,t as B,b as j,d as E,K as te,a5 as pe,h as O,a6 as ft,j as Z,w as ut,x as ct,y as pt,B as H,C as J,k as oe,a4 as Ke,D as x,l as ge,m as dt,n as fe,Q as mt,p as Qe}from"../chunks/scheduler.8BgUI7Rd.js";import{S as ne,i as ie,c as T,a as L,m as C,t as y,b as F,d as N,g as K,f as Q,e as X}from"../chunks/index.lDYx8E-t.js";import{e as ae,u as Ye,o as ze}from"../chunks/Modal.svelte_svelte_type_style_lang.B_YNrwyo.js";import{p as le}from"../chunks/index.B9KkJKLQ.js";import{S as Y}from"../chunks/SecondaryButton.C4Pck-N6.js";import{S as se}from"../chunks/Select.CCqhCord.js";import{W as Ze}from"../chunks/WarningButton.fOh3JI0X.js";import{W as be}from"../chunks/WarningText.BjWRVWsM.js";import{s as A,a as xe,b as _t}from"../chunks/data.QlN75TKp.js";import{a as et,n as $t,g as We,c as ht,D as gt}from"../chunks/logic.CAP9bcdT.js";import{E as bt}from"../chunks/ExternalLink.CI4_WGJA.js";import{D as vt}from"../chunks/DefaultButton.CqTw9u6s.js";import{F as wt,E as tt}from"../chunks/FormElement.gqxIWIgk.js";import{T as kt}from"../chunks/TextInput.DQyeWu7U.js";import"../chunks/paths.6m4E5Osx.js";import{v as rt}from"../chunks/v4.D8aEg3BZ.js";import{C as me}from"../chunks/CollapsibleCard.XAF783dz.js";function yt(i){let e,t,r,n,s,l,o;return e=new tt({props:{errorMessage:i[5](i[2])}}),{c(){T(e.$$.fragment),t=W(),r=I("input"),this.h()},l(a){L(e.$$.fragment,a),t=M(a),r=q(a,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){z(r,"type","text"),z(r,"inputmode","numeric"),z(r,"class",n=`govuk-input govuk-input--width-${i[1]}`),z(r,"id",i[3])},m(a,u){C(e,a,u),D(a,t,u),D(a,r,u),Ee(r,i[2]),s=!0,l||(o=[de(r,"input",i[9]),de(r,"change",i[4])],l=!0)},p(a,u){const h={};u&4&&(h.errorMessage=a[5](a[2])),e.$set(h),(!s||u&2&&n!==(n=`govuk-input govuk-input--width-${a[1]}`))&&z(r,"class",n),u&4&&r.value!==a[2]&&Ee(r,a[2])},i(a){s||(y(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(b(t),b(r)),N(e,a),l=!1,Ge(o)}}}function Dt(i){let e,t;return e=new wt({props:{label:i[0],id:i[3],$$slots:{default:[yt]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,[n]){const s={};n&1&&(s.label=r[0]),n&1030&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Ft(i,e,t){let{label:r}=e,{value:n}=e,{width:s}=e,{min:l=void 0}=e,{max:o=void 0}=e,a=n==null?void 0:n.toString(),u=rt();function h(){t(6,n=a==null?void 0:parseInt(a,10))}function c(p){if(p==""||p==null)return"";if(p.includes("."))return"Please enter a number without decimals";let m=Number(p);return isNaN(m)?"Please enter a valid number":l!=null&&m<l?`Please enter a number that's at least ${l};`:o!=null&&m>o?`Please enter a number that's at most ${o};`:""}function d(){a=this.value,t(2,a)}return i.$$set=p=>{"label"in p&&t(0,r=p.label),"value"in p&&t(6,n=p.value),"width"in p&&t(1,s=p.width),"min"in p&&t(7,l=p.min),"max"in p&&t(8,o=p.max)},[r,s,a,u,h,c,n,l,o,d]}class St extends ne{constructor(e){super(),ie(this,e,Ft,Dt,re,{label:0,value:6,width:1,min:7,max:8})}}function Me(i){let e,t;return e=new Y({props:{$$slots:{default:[Tt]},$$scope:{ctx:i}}}),e.$on("click",i[5]),{c(){T(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&128&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Tt(i){let e;return{c(){e=B("X")},l(t){e=E(t,"X")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function Lt(i){let e,t,r,n,s,l,o,a,u,h,c=i[2]&&Me(i);const d=i[4].default,p=ot(d,i,i[7],null);return{c(){e=I("div"),t=I("div"),r=I("div"),n=I("h1"),s=B(i[1]),l=W(),c&&c.c(),o=W(),p&&p.c(),this.h()},l(m){e=q(m,"DIV",{class:!0});var f=j(e);t=q(f,"DIV",{class:!0});var _=j(t);r=q(_,"DIV",{style:!0});var $=j(r);n=q($,"H1",{class:!0});var k=j(n);s=E(k,i[1]),k.forEach(b),l=M($),c&&c.l($),$.forEach(b),o=M(_),p&&p.l(_),_.forEach(b),f.forEach(b),this.h()},h(){z(n,"class","govuk-heading-l"),te(r,"display","flex"),te(r,"justify-content","space-between"),z(t,"class","content centered-fullscreen svelte-1st8ub0"),z(e,"class","background svelte-1st8ub0"),pe(e,"open",i[0]),pe(e,"closed",!i[0])},m(m,f){D(m,e,f),O(e,t),O(t,r),O(r,n),O(n,s),O(r,l),c&&c.m(r,null),O(t,o),p&&p.m(t,null),a=!0,u||(h=[de(t,"click",ft(Ct)),de(e,"click",i[6])],u=!0)},p(m,[f]){(!a||f&2)&&Z(s,m[1]),m[2]?c?(c.p(m,f),f&4&&y(c,1)):(c=Me(m),c.c(),y(c,1),c.m(r,null)):c&&(K(),F(c,1,1,()=>{c=null}),Q()),p&&p.p&&(!a||f&128)&&ut(p,d,m,m[7],a?pt(d,m[7],f,null):ct(m[7]),null),(!a||f&1)&&pe(e,"open",m[0]),(!a||f&1)&&pe(e,"closed",!m[0])},i(m){a||(y(c),y(p,m),a=!0)},o(m){F(c),F(p,m),a=!1},d(m){m&&b(e),c&&c.d(),p&&p.d(m),u=!1,Ge(h)}}}const Ct=()=>null;function Nt(i,e,t){let{$$slots:r={},$$scope:n}=e,{title:s}=e,{open:l=!1}=e,{displayEscapeButton:o=!0}=e,{canCloseByClickingBackground:a=!0}=e;const u=()=>t(0,l=!1),h=()=>{a&&t(0,l=!1)};return i.$$set=c=>{"title"in c&&t(1,s=c.title),"open"in c&&t(0,l=c.open),"displayEscapeButton"in c&&t(2,o=c.displayEscapeButton),"canCloseByClickingBackground"in c&&t(3,a=c.canCloseByClickingBackground),"$$scope"in c&&t(7,n=c.$$scope)},[l,s,o,a,r,u,h,n]}class Bt extends ne{constructor(e){super(),ie(this,e,Nt,Lt,re,{title:1,open:0,displayEscapeButton:2,canCloseByClickingBackground:3})}}function _e(i){return typeof i=="object"?[]:Et[i]}let Et={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",G(76)],["LTN 1/20 Figure 4.1 pp. 33",G(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",G(43)],["LTN 1/20 Figure 4.1 pp. 33",G(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",G(43)],["LTN 1/20 Figure 4.1 pp. 33",G(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",G(43)],["LTN 1/20 Figure 4.1 pp. 33",G(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",G(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",G(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",G(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",G(54)]]};function G(i){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${i}`}function $e(i,e){let t=et(e.speedLimit,e.observedSpeed);switch(i){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&t==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&t==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return t==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":t==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Re(i,e,t){const r=i.slice();return r[21]=e[t][0],r[22]=e[t][1],r}function Oe(i){let e,t,r,n=We(i[0],i[7].proposed.trafficData,i[7].proposed.customFeatures,i[4],i[5])[i[3]=="Desirable"?0:1]+"",s,l,o,a,u,h=_e(i[0]).length>0,c,d=$e(i[0],i[7].proposed.trafficData),p,m;const f=[Rt,Mt,Wt],_=[];function $(g,v){return g[9]=="left"?0:g[9]=="right"?1:g[9]=="both"?2:-1}~(o=$(i))&&(a=_[o]=f[o](i));let k=h&&Pe(i),S=d&&qe(i);return{c(){e=I("p"),t=B(i[3]),r=B(" minimum width (m): "),s=B(n),l=W(),a&&a.c(),u=W(),k&&k.c(),c=W(),S&&S.c(),p=x()},l(g){e=q(g,"P",{});var v=j(e);t=E(v,i[3]),r=E(v," minimum width (m): "),s=E(v,n),v.forEach(b),l=M(g),a&&a.l(g),u=M(g),k&&k.l(g),c=M(g),S&&S.l(g),p=x()},m(g,v){D(g,e,v),O(e,t),O(e,r),O(e,s),D(g,l,v),~o&&_[o].m(g,v),D(g,u,v),k&&k.m(g,v),D(g,c,v),S&&S.m(g,v),D(g,p,v),m=!0},p(g,v){(!m||v&8)&&Z(t,g[3]),(!m||v&185)&&n!==(n=We(g[0],g[7].proposed.trafficData,g[7].proposed.customFeatures,g[4],g[5])[g[3]=="Desirable"?0:1]+"")&&Z(s,n);let V=o;o=$(g),o===V?~o&&_[o].p(g,v):(a&&(K(),F(_[V],1,1,()=>{_[V]=null}),Q()),~o?(a=_[o],a?a.p(g,v):(a=_[o]=f[o](g),a.c()),y(a,1),a.m(u.parentNode,u)):a=null),v&1&&(h=_e(g[0]).length>0),h?k?(k.p(g,v),v&1&&y(k,1)):(k=Pe(g),k.c(),y(k,1),k.m(c.parentNode,c)):k&&(K(),F(k,1,1,()=>{k=null}),Q()),v&129&&(d=$e(g[0],g[7].proposed.trafficData)),d?S?S.p(g,v):(S=qe(g),S.c(),S.m(p.parentNode,p)):S&&(S.d(1),S=null)},i(g){m||(y(a),y(k),m=!0)},o(g){F(a),F(k),m=!1},d(g){g&&(b(e),b(l),b(u),b(c),b(p)),~o&&_[o].d(g),k&&k.d(g),S&&S.d(g)}}}function Wt(i){let e,t;return e=new be({props:{$$slots:{default:[Pt]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Mt(i){let e,t;return e=new be({props:{$$slots:{default:[qt]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Rt(i){let e,t;return e=new be({props:{$$slots:{default:[At]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&33554432&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Ot(i){let e;return{c(){e=B("Add")},l(t){e=E(t,"Add")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function Pt(i){let e,t,r;return t=new Y({props:{$$slots:{default:[Ot]},$$scope:{ctx:i}}}),t.$on("click",i[14]),{c(){e=B("Consider buffer to left and right "),T(t.$$.fragment)},l(n){e=E(n,"Consider buffer to left and right "),L(t.$$.fragment,n)},m(n,s){D(n,e,s),C(t,n,s),r=!0},p(n,s){const l={};s&33554432&&(l.$$scope={dirty:s,ctx:n}),t.$set(l)},i(n){r||(y(t.$$.fragment,n),r=!0)},o(n){F(t.$$.fragment,n),r=!1},d(n){n&&b(e),N(t,n)}}}function It(i){let e;return{c(){e=B("Add")},l(t){e=E(t,"Add")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function qt(i){let e,t,r;return t=new Y({props:{$$slots:{default:[It]},$$scope:{ctx:i}}}),t.$on("click",i[13]),{c(){e=B("Consider buffer to right "),T(t.$$.fragment)},l(n){e=E(n,"Consider buffer to right "),L(t.$$.fragment,n)},m(n,s){D(n,e,s),C(t,n,s),r=!0},p(n,s){const l={};s&33554432&&(l.$$scope={dirty:s,ctx:n}),t.$set(l)},i(n){r||(y(t.$$.fragment,n),r=!0)},o(n){F(t.$$.fragment,n),r=!1},d(n){n&&b(e),N(t,n)}}}function Vt(i){let e;return{c(){e=B("Add")},l(t){e=E(t,"Add")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function At(i){let e,t,r;return t=new Y({props:{$$slots:{default:[Vt]},$$scope:{ctx:i}}}),t.$on("click",i[12]),{c(){e=B("Consider buffer to left "),T(t.$$.fragment)},l(n){e=E(n,"Consider buffer to left "),L(t.$$.fragment,n)},m(n,s){D(n,e,s),C(t,n,s),r=!0},p(n,s){const l={};s&33554432&&(l.$$scope={dirty:s,ctx:n}),t.$set(l)},i(n){r||(y(t.$$.fragment,n),r=!0)},o(n){F(t.$$.fragment,n),r=!1},d(n){n&&b(e),N(t,n)}}}function Pe(i){let e,t="References",r,n,s,l=ae(_e(i[0])),o=[];for(let u=0;u<l.length;u+=1)o[u]=Ie(Re(i,l,u));const a=u=>F(o[u],1,1,()=>{o[u]=null});return{c(){e=I("u"),e.textContent=t,r=B(`
      :
      `),n=I("ul");for(let u=0;u<o.length;u+=1)o[u].c()},l(u){e=q(u,"U",{"data-svelte-h":!0}),ge(e)!=="svelte-fk7cdq"&&(e.textContent=t),r=E(u,`
      :
      `),n=q(u,"UL",{});var h=j(n);for(let c=0;c<o.length;c+=1)o[c].l(h);h.forEach(b)},m(u,h){D(u,e,h),D(u,r,h),D(u,n,h);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null);s=!0},p(u,h){if(h&1){l=ae(_e(u[0]));let c;for(c=0;c<l.length;c+=1){const d=Re(u,l,c);o[c]?(o[c].p(d,h),y(o[c],1)):(o[c]=Ie(d),o[c].c(),y(o[c],1),o[c].m(n,null))}for(K(),c=l.length;c<o.length;c+=1)a(c);Q()}},i(u){if(!s){for(let h=0;h<l.length;h+=1)y(o[h]);s=!0}},o(u){o=o.filter(Boolean);for(let h=0;h<o.length;h+=1)F(o[h]);s=!1},d(u){u&&(b(e),b(r),b(n)),dt(o,u)}}}function jt(i){let e,t=i[21]+"",r;return{c(){e=I("li"),r=B(t)},l(n){e=q(n,"LI",{});var s=j(e);r=E(s,t),s.forEach(b)},m(n,s){D(n,e,s),O(e,r)},p(n,s){s&1&&t!==(t=n[21]+"")&&Z(r,t)},i:fe,o:fe,d(n){n&&b(e)}}}function Ut(i){let e,t,r;return t=new bt({props:{href:i[22],$$slots:{default:[Ht]},$$scope:{ctx:i}}}),{c(){e=I("li"),T(t.$$.fragment)},l(n){e=q(n,"LI",{});var s=j(e);L(t.$$.fragment,s),s.forEach(b)},m(n,s){D(n,e,s),C(t,e,null),r=!0},p(n,s){const l={};s&1&&(l.href=n[22]),s&33554433&&(l.$$scope={dirty:s,ctx:n}),t.$set(l)},i(n){r||(y(t.$$.fragment,n),r=!0)},o(n){F(t.$$.fragment,n),r=!1},d(n){n&&b(e),N(t)}}}function Ht(i){let e=i[21]+"",t;return{c(){t=B(e)},l(r){t=E(r,e)},m(r,n){D(r,t,n)},p(r,n){n&1&&e!==(e=r[21]+"")&&Z(t,e)},d(r){r&&b(t)}}}function Ie(i){let e,t,r,n;const s=[Ut,jt],l=[];function o(a,u){return a[22]?0:1}return e=o(i),t=l[e]=s[e](i),{c(){t.c(),r=x()},l(a){t.l(a),r=x()},m(a,u){l[e].m(a,u),D(a,r,u),n=!0},p(a,u){let h=e;e=o(a),e===h?l[e].p(a,u):(K(),F(l[h],1,1,()=>{l[h]=null}),Q(),t=l[e],t?t.p(a,u):(t=l[e]=s[e](a),t.c()),y(t,1),t.m(r.parentNode,r))},i(a){n||(y(t),n=!0)},o(a){F(t),n=!1},d(a){a&&b(r),l[e].d(a)}}}function qe(i){let e,t="Guidance",r,n,s=$e(i[0],i[7].proposed.trafficData)+"",l;return{c(){e=I("u"),e.textContent=t,r=B(`
      :
      `),n=I("p"),l=B(s),this.h()},l(o){e=q(o,"U",{"data-svelte-h":!0}),ge(e)!=="svelte-qh7mhq"&&(e.textContent=t),r=E(o,`
      :
      `),n=q(o,"P",{style:!0});var a=j(n);l=E(a,s),a.forEach(b),this.h()},h(){te(n,"max-width","400px")},m(o,a){D(o,e,a),D(o,r,a),D(o,n,a),O(n,l)},p(o,a){a&129&&s!==(s=$e(o[0],o[7].proposed.trafficData)+"")&&Z(l,s)},d(o){o&&(b(e),b(r),b(n))}}}function Jt(i){let e;return{c(){e=B("←")},l(t){e=E(t,"←")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function Xt(i){let e;return{c(){e=B("Delete")},l(t){e=E(t,"Delete")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function Gt(i){let e;return{c(){e=B("→")},l(t){e=E(t,"→")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function Kt(i){let e,t,r,n,s,l,o,a,u,h,c,d;function p(_){i[11](_)}let m={label:"Street feature type",emptyOption:!0,choices:i[8]};i[6]!==void 0&&(m.value=i[6]),t=new se({props:m}),H.push(()=>X(t,"value",p));let f=i[0]&&Oe(i);return o=new Y({props:{disabled:i[1],$$slots:{default:[Jt]},$$scope:{ctx:i}}}),o.$on("click",i[15]),u=new Ze({props:{$$slots:{default:[Xt]},$$scope:{ctx:i}}}),u.$on("click",i[16]),c=new Y({props:{disabled:i[2],$$slots:{default:[Gt]},$$scope:{ctx:i}}}),c.$on("click",i[17]),{c(){e=I("div"),T(t.$$.fragment),n=W(),f&&f.c(),s=W(),l=I("div"),T(o.$$.fragment),a=W(),T(u.$$.fragment),h=W(),T(c.$$.fragment),this.h()},l(_){e=q(_,"DIV",{class:!0});var $=j(e);L(t.$$.fragment,$),n=M($),f&&f.l($),s=M($),l=q($,"DIV",{style:!0,class:!0});var k=j(l);L(o.$$.fragment,k),a=M(k),L(u.$$.fragment,k),h=M(k),L(c.$$.fragment,k),k.forEach(b),$.forEach(b),this.h()},h(){te(l,"display","flex"),te(l,"justify-content","space-between"),z(l,"class","svelte-jig4ga"),z(e,"class","svelte-jig4ga")},m(_,$){D(_,e,$),C(t,e,null),O(e,n),f&&f.m(e,null),O(e,s),O(e,l),C(o,l,null),O(l,a),C(u,l,null),O(l,h),C(c,l,null),d=!0},p(_,[$]){const k={};$&256&&(k.choices=_[8]),!r&&$&64&&(r=!0,k.value=_[6],J(()=>r=!1)),t.$set(k),_[0]?f?(f.p(_,$),$&1&&y(f,1)):(f=Oe(_),f.c(),y(f,1),f.m(e,s)):f&&(K(),F(f,1,1,()=>{f=null}),Q());const S={};$&2&&(S.disabled=_[1]),$&33554432&&(S.$$scope={dirty:$,ctx:_}),o.$set(S);const g={};$&33554432&&(g.$$scope={dirty:$,ctx:_}),u.$set(g);const v={};$&4&&(v.disabled=_[2]),$&33554432&&(v.$$scope={dirty:$,ctx:_}),c.$set(v)},i(_){d||(y(t.$$.fragment,_),y(f),y(o.$$.fragment,_),y(u.$$.fragment,_),y(c.$$.fragment,_),d=!0)},o(_){F(t.$$.fragment,_),F(f),F(o.$$.fragment,_),F(u.$$.fragment,_),F(c.$$.fragment,_),d=!1},d(_){_&&b(e),N(t),f&&f.d(),N(o),N(u),N(c)}}}function Qt(i,e,t){let r,n,s;oe(i,A,R=>t(7,s=R));let{value:l}=e,{isFirst:o}=e,{isLast:a}=e,{sectionType:u}=e,{leftFeature:h}=e,{rightFeature:c}=e,d=Ke(),p=typeof l=="object"?`custom_${l.custom}`:l;function m(R){R.startsWith("custom_")?t(0,l={custom:R.slice(7)}):t(0,l=R)}function f(R){t(6,p=typeof R=="object"?`custom_${R.custom}`:R)}function _(R){let ue=le(xe);for(let[ce,he]of Object.entries(R))ue.push([`custom_${ce}`,`Custom: ${he.name}`]);return ue}function $(R){p=R,t(6,p)}const k=()=>d("addLeftBuffer"),S=()=>d("addRightBuffer"),g=()=>{d("addRightBuffer"),d("addLeftBuffer")},v=()=>d("moveLeft"),V=()=>d("delete"),ee=()=>d("moveRight");return i.$$set=R=>{"value"in R&&t(0,l=R.value),"isFirst"in R&&t(1,o=R.isFirst),"isLast"in R&&t(2,a=R.isLast),"sectionType"in R&&t(3,u=R.sectionType),"leftFeature"in R&&t(4,h=R.leftFeature),"rightFeature"in R&&t(5,c=R.rightFeature)},i.$$.update=()=>{i.$$.dirty&49&&t(9,r=l&&$t(l,h,c)),i.$$.dirty&64&&m(p),i.$$.dirty&1&&f(l),i.$$.dirty&128&&t(8,n=_(s.proposed.customFeatures))},[l,o,a,u,h,c,p,s,n,r,d,$,k,S,g,v,V,ee]}class Yt extends ne{constructor(e){super(),ie(this,e,Qt,Kt,re,{value:0,isFirst:1,isLast:2,sectionType:3,leftFeature:4,rightFeature:5})}}function Ve(i,e,t){const r=i.slice();return r[18]=e[t],r[19]=e,r[20]=t,r}function zt(i){let e;return{c(){e=B("Add")},l(t){e=E(t,"Add")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function Ae(i,e){let t,r,n,s;function l(p){e[10](p,e[18],e[19],e[20])}function o(){return e[11](e[20])}function a(){return e[12](e[20])}function u(){return e[13](e[20])}function h(){return e[14](e[20])}function c(){return e[15](e[20])}let d={isFirst:e[20]==0,isLast:e[20]==e[0].length-1,leftFeature:e[20]==0?"":e[0][e[20]-1],rightFeature:e[20]==e[0].length-1?"":e[0][e[20]+1],sectionType:e[1]};return e[18]!==void 0&&(d.value=e[18]),r=new Yt({props:d}),H.push(()=>X(r,"value",l)),r.$on("delete",o),r.$on("moveLeft",a),r.$on("moveRight",u),r.$on("addLeftBuffer",h),r.$on("addRightBuffer",c),{key:i,first:null,c(){t=x(),T(r.$$.fragment),this.h()},l(p){t=x(),L(r.$$.fragment,p),this.h()},h(){this.first=t},m(p,m){D(p,t,m),C(r,p,m),s=!0},p(p,m){e=p;const f={};m&1&&(f.isFirst=e[20]==0),m&1&&(f.isLast=e[20]==e[0].length-1),m&1&&(f.leftFeature=e[20]==0?"":e[0][e[20]-1]),m&1&&(f.rightFeature=e[20]==e[0].length-1?"":e[0][e[20]+1]),m&2&&(f.sectionType=e[1]),!n&&m&1&&(n=!0,f.value=e[18],J(()=>n=!1)),r.$set(f)},i(p){s||(y(r.$$.fragment,p),s=!0)},o(p){F(r.$$.fragment,p),s=!1},d(p){p&&b(t),N(r,p)}}}function Zt(i){let e,t,r,n=[],s=new Map,l,o,a,u,h=i[3].toFixed(2)+"",c,d;e=new Y({props:{$$slots:{default:[zt]},$$scope:{ctx:i}}}),e.$on("click",i[4]);let p=ae(i[0]);const m=f=>f[20];for(let f=0;f<p.length;f+=1){let _=Ve(i,p,f),$=m(_);s.set($,n[f]=Ae($,_))}return{c(){T(e.$$.fragment),t=W(),r=I("div");for(let f=0;f<n.length;f+=1)n[f].c();l=W(),o=I("p"),a=B("Total width required (m): "),u=I("b"),c=B(h),this.h()},l(f){L(e.$$.fragment,f),t=M(f),r=q(f,"DIV",{style:!0});var _=j(r);for(let S=0;S<n.length;S+=1)n[S].l(_);_.forEach(b),l=M(f),o=q(f,"P",{});var $=j(o);a=E($,"Total width required (m): "),u=q($,"B",{});var k=j(u);c=E(k,h),k.forEach(b),$.forEach(b),this.h()},h(){te(r,"display","flex"),te(r,"flex-direction","row"),te(r,"overflow-x","scroll")},m(f,_){C(e,f,_),D(f,t,_),D(f,r,_);for(let $=0;$<n.length;$+=1)n[$]&&n[$].m(r,null);i[16](r),D(f,l,_),D(f,o,_),O(o,a),O(o,u),O(u,c),d=!0},p(f,[_]){const $={};_&2097152&&($.$$scope={dirty:_,ctx:f}),e.$set($),_&483&&(p=ae(f[0]),K(),n=Ye(n,_,m,1,f,p,s,r,ze,Ae,null,Ve),Q()),(!d||_&8)&&h!==(h=f[3].toFixed(2)+"")&&Z(c,h)},i(f){if(!d){y(e.$$.fragment,f);for(let _=0;_<p.length;_+=1)y(n[_]);d=!0}},o(f){F(e.$$.fragment,f);for(let _=0;_<n.length;_+=1)F(n[_]);d=!1},d(f){f&&(b(t),b(r),b(l),b(o)),N(e,f);for(let _=0;_<n.length;_+=1)n[_].d();i[16](null)}}}function xt(i,e,t){let r,n;oe(i,A,v=>t(9,n=v));let{streetFeaturesLeftToRight:s}=e,{sectionType:l}=e,o,a=!1;mt(()=>{a&&(a=!1,t(2,o.scrollLeft=o.scrollWidth,o))});function u(){t(0,s=[...s,""]),a=!0}function h(v){s.splice(v,1),t(0,s)}function c(v){t(0,[s[v-1],s[v]]=[s[v],s[v-1]],s)}function d(v){t(0,[s[v+1],s[v]]=[s[v],s[v+1]],s)}function p(v){s.splice(v,0,"Buffer / Verge"),t(0,s)}function m(v,V,ee,R){ee[R]=v,t(0,s)}const f=v=>h(v),_=v=>c(v),$=v=>d(v),k=v=>p(v),S=v=>p(v+1);function g(v){H[v?"unshift":"push"](()=>{o=v,t(2,o)})}return i.$$set=v=>{"streetFeaturesLeftToRight"in v&&t(0,s=v.streetFeaturesLeftToRight),"sectionType"in v&&t(1,l=v.sectionType)},i.$$.update=()=>{i.$$.dirty&514&&t(3,r=ht(n,l))},[s,l,o,r,u,h,c,d,p,n,m,f,_,$,k,S,g]}class nt extends ne{constructor(e){super(),ie(this,e,xt,Zt,re,{streetFeaturesLeftToRight:0,sectionType:1})}}function er(i){let e;return{c(){e=B("Confirm")},l(t){e=E(t,"Confirm")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function tr(i){let e;return{c(){e=B("Cancel")},l(t){e=E(t,"Cancel")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function rr(i){let e,t,r,n,s,l,o,a,u,h,c,d;function p($){i[6]($)}let m={label:"Name"};i[0]!==void 0&&(m.value=i[0]),e=new kt({props:m}),H.push(()=>X(e,"value",p));function f($){i[7]($)}let _={label:"Minimum width (m)",width:4,min:0};return i[1]!==void 0&&(_.value=i[1]),n=new gt({props:_}),H.push(()=>X(n,"value",f)),o=new tt({props:{errorMessage:i[2]}}),u=new vt({props:{disabled:i[2]!="",$$slots:{default:[er]},$$scope:{ctx:i}}}),u.$on("click",i[8]),c=new Y({props:{$$slots:{default:[tr]},$$scope:{ctx:i}}}),c.$on("click",i[9]),{c(){T(e.$$.fragment),r=W(),T(n.$$.fragment),l=W(),T(o.$$.fragment),a=W(),T(u.$$.fragment),h=W(),T(c.$$.fragment)},l($){L(e.$$.fragment,$),r=M($),L(n.$$.fragment,$),l=M($),L(o.$$.fragment,$),a=M($),L(u.$$.fragment,$),h=M($),L(c.$$.fragment,$)},m($,k){C(e,$,k),D($,r,k),C(n,$,k),D($,l,k),C(o,$,k),D($,a,k),C(u,$,k),D($,h,k),C(c,$,k),d=!0},p($,k){const S={};!t&&k&1&&(t=!0,S.value=$[0],J(()=>t=!1)),e.$set(S);const g={};!s&&k&2&&(s=!0,g.value=$[1],J(()=>s=!1)),n.$set(g);const v={};k&4&&(v.errorMessage=$[2]),o.$set(v);const V={};k&4&&(V.disabled=$[2]!=""),k&4096&&(V.$$scope={dirty:k,ctx:$}),u.$set(V);const ee={};k&4096&&(ee.$$scope={dirty:k,ctx:$}),c.$set(ee)},i($){d||(y(e.$$.fragment,$),y(n.$$.fragment,$),y(o.$$.fragment,$),y(u.$$.fragment,$),y(c.$$.fragment,$),d=!0)},o($){F(e.$$.fragment,$),F(n.$$.fragment,$),F(o.$$.fragment,$),F(u.$$.fragment,$),F(c.$$.fragment,$),d=!1},d($){$&&(b(r),b(l),b(a),b(h)),N(e,$),N(n,$),N(o,$),N(u,$),N(c,$)}}}function nr(i){let e,t;return e=new Bt({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[rr]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,[n]){const s={};n&4103&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function ir(i,e,t){let r,n;oe(i,A,f=>t(10,n=f));let{initialName:s}=e,{initialWidth:l}=e,o=Ke(),a=s,u=l;function h(f,_){return f==""?"Name must be specified":f!=s&&Object.values(n.proposed.customFeatures).some($=>$.name==f)?"That name is already used by another custom feature":xe.includes(f)?"That name is the same as one of the built-in features":isNaN(_)?"Enter a valid width":_<=0?"Enter a positive width":""}function c(f){a=f,t(0,a)}function d(f){u=f,t(1,u)}const p=()=>o("confirm",{name:a,width:u}),m=()=>o("cancel");return i.$$set=f=>{"initialName"in f&&t(4,s=f.initialName),"initialWidth"in f&&t(5,l=f.initialWidth)},i.$$.update=()=>{i.$$.dirty&3&&t(2,r=h(a,u))},[a,u,r,o,s,l,c,d,p,m]}class sr extends ne{constructor(e){super(),ie(this,e,ir,nr,re,{initialName:4,initialWidth:5})}}function je(i,e,t){const r=i.slice();return r[9]=e[t],r}function lr(i){let e;return{c(){e=B("Add")},l(t){e=E(t,"Add")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function ar(i){let e;return{c(){e=B("Edit")},l(t){e=E(t,"Edit")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function or(i){let e;return{c(){e=B("Delete")},l(t){e=E(t,"Delete")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function Ue(i,e){let t,r,n,s=e[1].proposed.customFeatures[e[9]].name+"",l,o,a=e[1].proposed.customFeatures[e[9]].width+"",u,h,c,d,p,m,f,_;function $(){return e[6](e[9])}d=new Y({props:{$$slots:{default:[ar]},$$scope:{ctx:e}}}),d.$on("click",$);function k(){return e[7](e[9])}return m=new Ze({props:{$$slots:{default:[or]},$$scope:{ctx:e}}}),m.$on("click",k),{key:i,first:null,c(){t=I("li"),r=I("span"),n=I("u"),l=B(s),o=B(`
        : `),u=B(a),h=B(" m minimum width"),c=W(),T(d.$$.fragment),p=W(),T(m.$$.fragment),f=W(),this.h()},l(S){t=q(S,"LI",{});var g=j(t);r=q(g,"SPAN",{});var v=j(r);n=q(v,"U",{});var V=j(n);l=E(V,s),V.forEach(b),o=E(v,`
        : `),u=E(v,a),h=E(v," m minimum width"),v.forEach(b),c=M(g),L(d.$$.fragment,g),p=M(g),L(m.$$.fragment,g),f=M(g),g.forEach(b),this.h()},h(){this.first=t},m(S,g){D(S,t,g),O(t,r),O(r,n),O(n,l),O(r,o),O(r,u),O(r,h),O(t,c),C(d,t,null),O(t,p),C(m,t,null),O(t,f),_=!0},p(S,g){e=S,(!_||g&2)&&s!==(s=e[1].proposed.customFeatures[e[9]].name+"")&&Z(l,s),(!_||g&2)&&a!==(a=e[1].proposed.customFeatures[e[9]].width+"")&&Z(u,a);const v={};g&4096&&(v.$$scope={dirty:g,ctx:e}),d.$set(v);const V={};g&4096&&(V.$$scope={dirty:g,ctx:e}),m.$set(V)},i(S){_||(y(d.$$.fragment,S),y(m.$$.fragment,S),_=!0)},o(S){F(d.$$.fragment,S),F(m.$$.fragment,S),_=!1},d(S){S&&b(t),N(d),N(m)}}}function He(i){let e,t;return e=new sr({props:{initialName:i[0].initialName,initialWidth:i[0].initialWidth}}),e.$on("cancel",i[8]),e.$on("confirm",i[5]),{c(){T(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&1&&(s.initialName=r[0].initialName),n&1&&(s.initialWidth=r[0].initialWidth),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function fr(i){let e,t,r,n=[],s=new Map,l,o,a;e=new Y({props:{$$slots:{default:[lr]},$$scope:{ctx:i}}}),e.$on("click",i[2]);let u=ae(Object.keys(i[1].proposed.customFeatures));const h=d=>d[9];for(let d=0;d<u.length;d+=1){let p=je(i,u,d),m=h(p);s.set(m,n[d]=Ue(m,p))}let c=i[0]&&He(i);return{c(){T(e.$$.fragment),t=W(),r=I("ol");for(let d=0;d<n.length;d+=1)n[d].c();l=W(),c&&c.c(),o=x()},l(d){L(e.$$.fragment,d),t=M(d),r=q(d,"OL",{});var p=j(r);for(let m=0;m<n.length;m+=1)n[m].l(p);p.forEach(b),l=M(d),c&&c.l(d),o=x()},m(d,p){C(e,d,p),D(d,t,p),D(d,r,p);for(let m=0;m<n.length;m+=1)n[m]&&n[m].m(r,null);D(d,l,p),c&&c.m(d,p),D(d,o,p),a=!0},p(d,[p]){const m={};p&4096&&(m.$$scope={dirty:p,ctx:d}),e.$set(m),p&26&&(u=ae(Object.keys(d[1].proposed.customFeatures)),K(),n=Ye(n,p,h,1,d,u,s,r,ze,Ue,null,je),Q()),d[0]?c?(c.p(d,p),p&1&&y(c,1)):(c=He(d),c.c(),y(c,1),c.m(o.parentNode,o)):c&&(K(),F(c,1,1,()=>{c=null}),Q())},i(d){if(!a){y(e.$$.fragment,d);for(let p=0;p<u.length;p+=1)y(n[p]);y(c),a=!0}},o(d){F(e.$$.fragment,d);for(let p=0;p<n.length;p+=1)F(n[p]);F(c),a=!1},d(d){d&&(b(t),b(r),b(l),b(o)),N(e,d);for(let p=0;p<n.length;p+=1)n[p].d();c&&c.d(d)}}}function ur(i,e,t){let r;oe(i,A,d=>t(1,r=d));let n=null;function s(){t(0,n={id:rt(),initialName:"",initialWidth:0})}function l(d){let p=r.proposed.customFeatures[d].name,m=JSON.stringify({custom:d});if(r.proposed.desirableMinimumCrossSection.some(f=>JSON.stringify(f)==m)){window.alert(`The ${p} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(r.proposed.absoluteMinimumCrossSection.some(f=>JSON.stringify(f)==m)){window.alert(`The ${p} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete r.proposed.customFeatures[d],A.set(r)}function o(d){t(0,n={id:d,initialName:r.proposed.customFeatures[d].name,initialWidth:r.proposed.customFeatures[d].width})}function a(d){Qe(A,r.proposed.customFeatures[n.id]={name:d.detail.name,width:d.detail.width},r),A.set(r),t(0,n=null)}return[n,r,s,l,o,a,d=>o(d),d=>l(d),()=>t(0,n=null)]}class cr extends ne{constructor(e){super(),ie(this,e,ur,fr,re,{})}}function Je(i){let e,t,r,n;return{c(){e=I("p"),t=B("Effective speed limit, based on the limit and 85 percentile: "),r=B(i[1]),n=B(`
      mph`)},l(s){e=q(s,"P",{});var l=j(e);t=E(l,"Effective speed limit, based on the limit and 85 percentile: "),r=E(l,i[1]),n=E(l,`
      mph`),l.forEach(b)},m(s,l){D(s,e,l),O(e,t),O(e,r),O(e,n)},p(s,l){l&2&&Z(r,s[1])},d(s){s&&b(e)}}}function pr(i){let e,t,r,n,s,l,o,a,u,h,c,d,p,m,f,_,$,k,S,g,v,V;function ee(w){i[4](w)}let R={label:"Expected peak hour cycle flow: 1-way cycle tracks",emptyOption:!0,choices:le(["<200","200-800",">800"])};i[0].proposed.trafficData.flowOneWay!==void 0&&(R.value=i[0].proposed.trafficData.flowOneWay),e=new se({props:R}),H.push(()=>X(e,"value",ee));function ue(w){i[5](w)}let ce={label:"Expected peak hour cycle flow: 2-way cycle tracks",emptyOption:!0,choices:le(["<300","300-1,000",">1,000"])};i[0].proposed.trafficData.flowTwoWay!==void 0&&(ce.value=i[0].proposed.trafficData.flowTwoWay),n=new se({props:ce}),H.push(()=>X(n,"value",ue));function he(w){i[6](w)}let ve={label:"Expected peak hour cycle flow: shared use cycle tracks",emptyOption:!0,choices:le(["<300",">300"])};i[0].proposed.trafficData.flowSharedUse!==void 0&&(ve.value=i[0].proposed.trafficData.flowSharedUse),o=new se({props:ve}),H.push(()=>X(o,"value",he));function it(w){i[7](w)}let we={label:"Traffic flow (vpd)",emptyOption:!0,choices:le(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};i[0].proposed.trafficData.trafficFlow!==void 0&&(we.value=i[0].proposed.trafficData.trafficFlow),h=new se({props:we}),H.push(()=>X(h,"value",it));function st(w){i[8](w)}let ke={label:"Speed limit (MPH)",emptyOption:!0,choices:i[2]};i[0].proposed.trafficData.speedLimit!==void 0&&(ke.value=i[0].proposed.trafficData.speedLimit),p=new se({props:ke}),H.push(()=>X(p,"value",st));function lt(w){i[9](w)}let ye={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};i[0].proposed.trafficData.observedSpeed!==void 0&&(ye.value=i[0].proposed.trafficData.observedSpeed),_=new St({props:ye}),H.push(()=>X(_,"value",lt));let U=i[1]&&Je(i);function at(w){i[10](w)}let De={label:"Street function",emptyOption:!0,choices:le(["High Street (active frontages)","Residential street","Local distributor road"])};return i[0].proposed.trafficData.streetFunction!==void 0&&(De.value=i[0].proposed.trafficData.streetFunction),g=new se({props:De}),H.push(()=>X(g,"value",at)),{c(){T(e.$$.fragment),r=W(),T(n.$$.fragment),l=W(),T(o.$$.fragment),u=W(),T(h.$$.fragment),d=W(),T(p.$$.fragment),f=W(),T(_.$$.fragment),k=W(),U&&U.c(),S=W(),T(g.$$.fragment)},l(w){L(e.$$.fragment,w),r=M(w),L(n.$$.fragment,w),l=M(w),L(o.$$.fragment,w),u=M(w),L(h.$$.fragment,w),d=M(w),L(p.$$.fragment,w),f=M(w),L(_.$$.fragment,w),k=M(w),U&&U.l(w),S=M(w),L(g.$$.fragment,w)},m(w,P){C(e,w,P),D(w,r,P),C(n,w,P),D(w,l,P),C(o,w,P),D(w,u,P),C(h,w,P),D(w,d,P),C(p,w,P),D(w,f,P),C(_,w,P),D(w,k,P),U&&U.m(w,P),D(w,S,P),C(g,w,P),V=!0},p(w,P){const Fe={};!t&&P&1&&(t=!0,Fe.value=w[0].proposed.trafficData.flowOneWay,J(()=>t=!1)),e.$set(Fe);const Se={};!s&&P&1&&(s=!0,Se.value=w[0].proposed.trafficData.flowTwoWay,J(()=>s=!1)),n.$set(Se);const Te={};!a&&P&1&&(a=!0,Te.value=w[0].proposed.trafficData.flowSharedUse,J(()=>a=!1)),o.$set(Te);const Le={};!c&&P&1&&(c=!0,Le.value=w[0].proposed.trafficData.trafficFlow,J(()=>c=!1)),h.$set(Le);const Ce={};!m&&P&1&&(m=!0,Ce.value=w[0].proposed.trafficData.speedLimit,J(()=>m=!1)),p.$set(Ce);const Ne={};!$&&P&1&&($=!0,Ne.value=w[0].proposed.trafficData.observedSpeed,J(()=>$=!1)),_.$set(Ne),w[1]?U?U.p(w,P):(U=Je(w),U.c(),U.m(S.parentNode,S)):U&&(U.d(1),U=null);const Be={};!v&&P&1&&(v=!0,Be.value=w[0].proposed.trafficData.streetFunction,J(()=>v=!1)),g.$set(Be)},i(w){V||(y(e.$$.fragment,w),y(n.$$.fragment,w),y(o.$$.fragment,w),y(h.$$.fragment,w),y(p.$$.fragment,w),y(_.$$.fragment,w),y(g.$$.fragment,w),V=!0)},o(w){F(e.$$.fragment,w),F(n.$$.fragment,w),F(o.$$.fragment,w),F(h.$$.fragment,w),F(p.$$.fragment,w),F(_.$$.fragment,w),F(g.$$.fragment,w),V=!1},d(w){w&&(b(r),b(l),b(u),b(d),b(f),b(k),b(S)),N(e,w),N(n,w),N(o,w),N(h,w),N(p,w),N(_,w),U&&U.d(w),N(g,w)}}}function dr(i){let e,t;return e=new me({props:{label:"Traffic data and additional information",$$slots:{default:[pr]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,[n]){const s={};n&2051&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function mr(i,e,t){let r,n;oe(i,A,m=>t(0,n=m));let{valid:s}=e,l=le(_t);function o(m){i.$$.not_equal(n.proposed.trafficData.flowOneWay,m)&&(n.proposed.trafficData.flowOneWay=m,A.set(n))}function a(m){i.$$.not_equal(n.proposed.trafficData.flowTwoWay,m)&&(n.proposed.trafficData.flowTwoWay=m,A.set(n))}function u(m){i.$$.not_equal(n.proposed.trafficData.flowSharedUse,m)&&(n.proposed.trafficData.flowSharedUse=m,A.set(n))}function h(m){i.$$.not_equal(n.proposed.trafficData.trafficFlow,m)&&(n.proposed.trafficData.trafficFlow=m,A.set(n))}function c(m){i.$$.not_equal(n.proposed.trafficData.speedLimit,m)&&(n.proposed.trafficData.speedLimit=m,A.set(n))}function d(m){i.$$.not_equal(n.proposed.trafficData.observedSpeed,m)&&(n.proposed.trafficData.observedSpeed=m,A.set(n))}function p(m){i.$$.not_equal(n.proposed.trafficData.streetFunction,m)&&(n.proposed.trafficData.streetFunction=m,A.set(n))}return i.$$set=m=>{"valid"in m&&t(3,s=m.valid)},i.$$.update=()=>{i.$$.dirty&1&&t(3,s=n.proposed.trafficData.flowOneWay!=""&&n.proposed.trafficData.flowTwoWay!=""&&n.proposed.trafficData.flowSharedUse!=""&&n.proposed.trafficData.trafficFlow!=""&&n.proposed.trafficData.speedLimit!=""&&n.proposed.trafficData.observedSpeed!=null&&n.proposed.trafficData.streetFunction!=""),i.$$.dirty&1&&t(1,r=et(n.proposed.trafficData.speedLimit,n.proposed.trafficData.observedSpeed))},[n,r,l,s,o,a,u,h,c,d,p]}class _r extends ne{constructor(e){super(),ie(this,e,mr,dr,re,{valid:3})}}function $r(i){let e,t;return e=new cr({}),{c(){T(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function hr(i){let e,t="Fill out all traffic data above to continue";return{c(){e=I("p"),e.textContent=t},l(r){e=q(r,"P",{"data-svelte-h":!0}),ge(e)!=="svelte-72a5ry"&&(e.textContent=t)},m(r,n){D(r,e,n)},p:fe,i:fe,o:fe,d(r){r&&b(e)}}}function gr(i){let e,t,r,n;return e=new me({props:{label:"Desirable Minimum Cross-Section",open:!0,$$slots:{default:[br]},$$scope:{ctx:i}}}),r=new me({props:{label:"Absolute Minimum Cross-Section",open:!0,$$slots:{default:[wr]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment),t=W(),T(r.$$.fragment)},l(s){L(e.$$.fragment,s),t=M(s),L(r.$$.fragment,s)},m(s,l){C(e,s,l),D(s,t,l),C(r,s,l),n=!0},p(s,l){const o={};l&66&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const a={};l&66&&(a.$$scope={dirty:l,ctx:s}),r.$set(a)},i(s){n||(y(e.$$.fragment,s),y(r.$$.fragment,s),n=!0)},o(s){F(e.$$.fragment,s),F(r.$$.fragment,s),n=!1},d(s){s&&b(t),N(e,s),N(r,s)}}}function br(i){let e,t,r;function n(l){i[4](l)}let s={sectionType:"Desirable"};return i[1].proposed.desirableMinimumCrossSection!==void 0&&(s.streetFeaturesLeftToRight=i[1].proposed.desirableMinimumCrossSection),e=new nt({props:s}),H.push(()=>X(e,"streetFeaturesLeftToRight",n)),{c(){T(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,o){C(e,l,o),r=!0},p(l,o){const a={};!t&&o&2&&(t=!0,a.streetFeaturesLeftToRight=l[1].proposed.desirableMinimumCrossSection,J(()=>t=!1)),e.$set(a)},i(l){r||(y(e.$$.fragment,l),r=!0)},o(l){F(e.$$.fragment,l),r=!1},d(l){N(e,l)}}}function Xe(i){let e,t;return e=new Y({props:{$$slots:{default:[vr]},$$scope:{ctx:i}}}),e.$on("click",i[2]),{c(){T(e.$$.fragment)},l(r){L(e.$$.fragment,r)},m(r,n){C(e,r,n),t=!0},p(r,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function vr(i){let e;return{c(){e=B("Copy Desirable Minimum")},l(t){e=E(t,"Copy Desirable Minimum")},m(t,r){D(t,e,r)},d(t){t&&b(e)}}}function wr(i){let e,t,r,n,s=i[1].proposed.absoluteMinimumCrossSection.length==0&&Xe(i);function l(a){i[5](a)}let o={sectionType:"Absolute"};return i[1].proposed.absoluteMinimumCrossSection!==void 0&&(o.streetFeaturesLeftToRight=i[1].proposed.absoluteMinimumCrossSection),t=new nt({props:o}),H.push(()=>X(t,"streetFeaturesLeftToRight",l)),{c(){s&&s.c(),e=W(),T(t.$$.fragment)},l(a){s&&s.l(a),e=M(a),L(t.$$.fragment,a)},m(a,u){s&&s.m(a,u),D(a,e,u),C(t,a,u),n=!0},p(a,u){a[1].proposed.absoluteMinimumCrossSection.length==0?s?(s.p(a,u),u&2&&y(s,1)):(s=Xe(a),s.c(),y(s,1),s.m(e.parentNode,e)):s&&(K(),F(s,1,1,()=>{s=null}),Q());const h={};!r&&u&2&&(r=!0,h.streetFeaturesLeftToRight=a[1].proposed.absoluteMinimumCrossSection,J(()=>r=!1)),t.$set(h)},i(a){n||(y(s),y(t.$$.fragment,a),n=!0)},o(a){F(s),F(t.$$.fragment,a),n=!1},d(a){a&&b(e),s&&s.d(a),N(t,a)}}}function kr(i){let e,t,r,n,s,l,o,a,u;function h(f){i[3](f)}let c={};i[0]!==void 0&&(c.valid=i[0]),e=new _r({props:c}),H.push(()=>X(e,"valid",h)),n=new me({props:{label:"Custom Street Features",$$slots:{default:[$r]},$$scope:{ctx:i}}});const d=[gr,hr],p=[];function m(f,_){return f[0]?0:1}return l=m(i),o=p[l]=d[l](i),{c(){T(e.$$.fragment),r=W(),T(n.$$.fragment),s=W(),o.c(),a=x()},l(f){L(e.$$.fragment,f),r=M(f),L(n.$$.fragment,f),s=M(f),o.l(f),a=x()},m(f,_){C(e,f,_),D(f,r,_),C(n,f,_),D(f,s,_),p[l].m(f,_),D(f,a,_),u=!0},p(f,[_]){const $={};!t&&_&1&&(t=!0,$.valid=f[0],J(()=>t=!1)),e.$set($);const k={};_&64&&(k.$$scope={dirty:_,ctx:f}),n.$set(k);let S=l;l=m(f),l===S?p[l].p(f,_):(K(),F(p[S],1,1,()=>{p[S]=null}),Q(),o=p[l],o?o.p(f,_):(o=p[l]=d[l](f),o.c()),y(o,1),o.m(a.parentNode,a))},i(f){u||(y(e.$$.fragment,f),y(n.$$.fragment,f),y(o),u=!0)},o(f){F(e.$$.fragment,f),F(n.$$.fragment,f),F(o),u=!1},d(f){f&&(b(r),b(s),b(a)),N(e,f),N(n,f),p[l].d(f)}}}function yr(i,e,t){let r;oe(i,A,u=>t(1,r=u));let n=!1;function s(){Qe(A,r.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(r.proposed.desirableMinimumCrossSection)),r)}function l(u){n=u,t(0,n)}function o(u){i.$$.not_equal(r.proposed.desirableMinimumCrossSection,u)&&(r.proposed.desirableMinimumCrossSection=u,A.set(r))}function a(u){i.$$.not_equal(r.proposed.absoluteMinimumCrossSection,u)&&(r.proposed.absoluteMinimumCrossSection=u,A.set(r))}return[n,r,s,l,o,a]}class Ar extends ne{constructor(e){super(),ie(this,e,yr,kr,re,{})}}export{Ar as component};
