import{s as j,a as G,e as S,g as R,c as C,p as ee,i as w,f as h,t as K,d as O,E as W,k as I,a8 as Re,M as v,n as re,l as ce,u as me,m as de,o as ge,b as q,r as B,w as Y,a9 as be,z as A,Z as We,B as Ce,a7 as Ke,H as F,v as ue,aa as Oe,h as M,C as pe,j as je,x as he}from"./scheduler.d-ZThAIN.js";import{S as Z,i as J,c as z,a as E,m as N,t as p,b as k,d as P,g as te,f as ne,e as ye}from"./index.BKLGIcjh.js";import{C as Ue}from"./CollapsibleCard.B7A7dHcx.js";import{S as Be,W as Fe}from"./WarningButton.CXBTrJR0.js";import{g as ze,u as He,r as Ve,a as qe,c as Ye,b as Ze,d as Je,L as Qe,t as Xe}from"./MapLibreMap.BSyT-EeN.js";import{B as $e}from"./ButtonGroup.BLuV6Z_V.js";import{D as xe}from"./DefaultButton.gdQzz5EL.js";import{F as et}from"./FormElement.Br3q6YEJ.js";import{w as le}from"./entry.B-S-FJbp.js";function tt(o){let e,l="You can manually use high-quality Bluesky imagery if you have a valid key.";return{c(){e=S("p"),e.textContent=l},l(t){e=C(t,"P",{"data-svelte-h":!0}),ee(e)!=="svelte-1e80rhw"&&(e.textContent=l)},m(t,n){w(t,e,n)},d(t){t&&h(e)}}}function nt(o){let e,l="The map should be showing Bluesky imagery.";return{c(){e=S("p"),e.textContent=l},l(t){e=C(t,"P",{"data-svelte-h":!0}),ee(e)!=="svelte-13v9ac9"&&(e.textContent=l)},m(t,n){w(t,e,n)},d(t){t&&h(e)}}}function lt(o){let e;return{c(){e=K("Set Bluesky API key")},l(l){e=O(l,"Set Bluesky API key")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function ot(o){let e,l,t=`<i>Note this feature is temporary -- in the future, you will login and
      automatically have access to this imagery.</i>`,n,a,i;function u(s,r){return rt()?nt:tt}let c=u()(o);return a=new Be({props:{$$slots:{default:[lt]},$$scope:{ctx:o}}}),a.$on("click",st),{c(){c.c(),e=G(),l=S("p"),l.innerHTML=t,n=G(),z(a.$$.fragment)},l(s){c.l(s),e=R(s),l=C(s,"P",{"data-svelte-h":!0}),ee(l)!=="svelte-jc29jc"&&(l.innerHTML=t),n=R(s),E(a.$$.fragment,s)},m(s,r){c.m(s,r),w(s,e,r),w(s,l,r),w(s,n,r),N(a,s,r),i=!0},p(s,r){const g={};r&1&&(g.$$scope={dirty:r,ctx:s}),a.$set(g)},i(s){i||(p(a.$$.fragment,s),i=!0)},o(s){k(a.$$.fragment,s),i=!1},d(s){s&&(h(e),h(l),h(n)),c.d(s),P(a,s)}}}function at(o){let e,l;return e=new Ue({props:{label:"Bluesky imagery",$$slots:{default:[ot]},$$scope:{ctx:o}}}),{c(){z(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,[n]){const a={};n&1&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){P(e,t)}}}let fe="bluesky-api-key";function rt(){let o=window.localStorage.getItem(fe);return o!=null&&o.length>0}function st(){let o=window.prompt("Enter the API key provided to you",window.localStorage.getItem(fe)||"");window.localStorage.setItem(fe,o||""),window.location.reload()}class jt extends Z{constructor(e){super(),J(this,e,null,at,j,{})}}function ke(o){let e=o[0],l,t,n=Le(o);return{c(){n.c(),l=W()},l(a){n.l(a),l=W()},m(a,i){n.m(a,i),w(a,l,i),t=!0},p(a,i){i&1&&j(e,e=a[0])?(te(),k(n,1,1,re),ne(),n=Le(a),n.c(),p(n,1),n.m(l.parentNode,l)):n.p(a,i)},i(a){t||(p(n),t=!0)},o(a){k(n),t=!1},d(a){a&&h(l),n.d(a)}}}function Le(o){let e;const l=o[10].default,t=ce(l,o,o[9],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,a){t&&t.m(n,a),e=!0},p(n,a){t&&t.p&&(!e||a&512)&&me(t,l,n,n[9],e?ge(l,n[9],a,null):de(n[9]),null)},i(n){e||(p(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function it(o){let e,l,t=o[0]&&ke(o);return{c(){t&&t.c(),e=W()},l(n){t&&t.l(n),e=W()},m(n,a){t&&t.m(n,a),w(n,e,a),l=!0},p(n,[a]){n[0]?t?(t.p(n,a),a&1&&p(t,1)):(t=ke(n),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(te(),k(t,1,1,()=>{t=null}),ne())},i(n){l||(p(t),l=!0)},o(n){k(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function ut(o,e,l){let t,n,{$$slots:a={},$$scope:i}=e,{id:u=ze("image")}=e,{url:f}=e,{coordinates:c}=e;const{map:s,self:r}=He();I(o,s,m=>l(8,n=m)),I(o,r,m=>l(0,t=m));let g,_=!0;return Re(()=>{t&&n&&(Ve(s,t,g),v(r,t=null,t),l(6,g=void 0))}),o.$$set=m=>{"id"in m&&l(3,u=m.id),"url"in m&&l(4,f=m.url),"coordinates"in m&&l(5,c=m.coordinates),"$$scope"in m&&l(9,i=m.$$scope)},o.$$.update=()=>{o.$$.dirty&313&&n&&t!==u&&(v(r,t=u,t),qe(n,t,Ye({type:"image",url:f,coordinates:c}),m=>n&&m===t,()=>{t&&(l(6,g=n==null?void 0:n.getSource(t)),l(7,_=!0))})),o.$$.dirty&264&&(n==null||n.on("style.load",()=>{l(6,g=n==null?void 0:n.getSource(u))})),o.$$.dirty&224&&g&&(_?l(7,_=!1):g.setCoordinates(c))},[t,s,r,u,f,c,g,_,n,i,a]}class ft extends Z{constructor(e){super(),J(this,e,ut,it,j,{id:3,url:4,coordinates:5})}}function ct(o){let e,l,t,n,a,i,u;const f=o[18].default,c=ce(f,o,o[17],null);return{c(){e=S("div"),c&&c.c(),this.h()},l(s){e=C(s,"DIV",{tabindex:!0,role:!0});var r=q(e);c&&c.l(r),r.forEach(h),this.h()},h(){B(e,"tabindex",l=o[1]?0:void 0),B(e,"role",t=o[1]?"button":void 0),Y(e,"z-index",o[2])},m(s,r){w(s,e,r),c&&c.m(e,null),a=!0,i||(u=[be(o[6].call(null,e)),be(n=mt.call(null,e,o[0])),A(e,"click",o[19]),A(e,"dblclick",o[20]),A(e,"contextmenu",o[21]),A(e,"mouseenter",o[22]),A(e,"mouseleave",o[23]),A(e,"mousemove",o[24]),A(e,"keydown",o[7])],i=!0)},p(s,[r]){c&&c.p&&(!a||r&131072)&&me(c,f,s,s[17],a?ge(f,s[17],r,null):de(s[17]),null),(!a||r&2&&l!==(l=s[1]?0:void 0))&&B(e,"tabindex",l),(!a||r&2&&t!==(t=s[1]?"button":void 0))&&B(e,"role",t),n&&We(n.update)&&r&1&&n.update.call(null,s[0]),r&4&&Y(e,"z-index",s[2])},i(s){a||(p(c,s),a=!0)},o(s){k(c,s),a=!1},d(s){s&&h(e),c&&c.d(s),i=!1,Ce(u)}}}function mt(o,e){const l=o.className;function t(n){n?o.className=`${l} ${n}`:o.className=l}return t(e),{update:t}}function dt(o,e,l){let t,n,a,{$$slots:i={},$$scope:u}=e,{lngLat:f}=e,{class:c=void 0}=e,{interactive:s=!0}=e,{asButton:r=!1}=e,{draggable:g=!1}=e,{feature:_=null}=e,{offset:m=void 0}=e,{zIndex:L=void 0}=e,{rotation:y=0}=e,{opacity:T=1}=e;const Q=Ke(),{map:b,layerEvent:se,self:ie}=Ze();I(o,b,d=>l(26,a=d)),I(o,se,d=>l(25,t=d)),I(o,ie,d=>l(16,n=d));function Ee(d){v(ie,n=new Je.Marker({element:d,rotation:y,draggable:g,offset:m,opacity:T.toString()}).setLngLat(f).addTo(a),n);const U=()=>D("dragstart"),X=()=>{_e(),D("drag")},$=()=>{_e(),D("dragend")};return g&&(n.on("dragstart",U),n.on("drag",X),n.on("dragend",$)),{destroy(){g&&(n==null||n.off("dragstart",U),n==null||n.off("drag",X),n==null||n.off("dragend",$)),n==null||n.remove()}}}function _e(){let d=n==null?void 0:n.getLngLat();d&&(Array.isArray(f)?l(9,f=[d.lng,d.lat]):f&&"lon"in f?l(9,f={lon:d.lng,lat:d.lat}):l(9,f=d))}function Ne(d){d.key===" "&&(d.preventDefault(),d.stopPropagation(),D("click"))}function D(d){if(!s)return;let U=n==null?void 0:n.getLngLat();if(!U)return;const X=[U.lng,U.lat];let $={map:a,marker:n,lngLat:X,features:[{type:"Feature",properties:(_==null?void 0:_.properties)??{},geometry:{type:"Point",coordinates:X}}]};v(se,t={...$,layerType:"marker",type:d},t),Q(d,$)}const Pe=()=>D("click"),Te=()=>D("dblclick"),De=()=>D("contextmenu"),Ae=d=>{D("mouseenter")},Me=()=>{D("mouseleave")},Ge=()=>D("mousemove");return o.$$set=d=>{"lngLat"in d&&l(9,f=d.lngLat),"class"in d&&l(0,c=d.class),"interactive"in d&&l(10,s=d.interactive),"asButton"in d&&l(1,r=d.asButton),"draggable"in d&&l(11,g=d.draggable),"feature"in d&&l(12,_=d.feature),"offset"in d&&l(13,m=d.offset),"zIndex"in d&&l(2,L=d.zIndex),"rotation"in d&&l(14,y=d.rotation),"opacity"in d&&l(15,T=d.opacity),"$$scope"in d&&l(17,u=d.$$scope)},o.$$.update=()=>{o.$$.dirty&66048&&(n==null||n.setLngLat(f)),o.$$.dirty&73728&&(n==null||n.setOffset(m??[0,0])),o.$$.dirty&81920&&(n==null||n.setRotation(y)),o.$$.dirty&98304&&(n==null||n.setOpacity(T.toString()))},[c,r,L,b,se,ie,Ee,Ne,D,f,s,g,_,m,y,T,n,u,i,Pe,Te,De,Ae,Me,Ge]}class we extends Z{constructor(e){super(),J(this,e,dt,ct,j,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14,opacity:15})}}function gt(o){let e;const l=o[8].default,t=ce(l,o,o[15],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,a){t&&t.m(n,a),e=!0},p(n,a){t&&t.p&&(!e||a&32768)&&me(t,l,n,n[15],e?ge(l,n[15],a,null):de(n[15]),null)},i(n){e||(p(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function _t(o){let e,l;return e=new Qe({props:{id:o[0],type:"raster",source:o[1],beforeId:o[2],beforeLayerType:o[3],paint:o[4],layout:o[5],minzoom:o[6],maxzoom:o[7],$$slots:{default:[gt]},$$scope:{ctx:o}}}),e.$on("click",o[9]),e.$on("dblclick",o[10]),e.$on("contextmenu",o[11]),e.$on("mouseenter",o[12]),e.$on("mousemove",o[13]),e.$on("mouseleave",o[14]),{c(){z(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,[n]){const a={};n&1&&(a.id=t[0]),n&2&&(a.source=t[1]),n&4&&(a.beforeId=t[2]),n&8&&(a.beforeLayerType=t[3]),n&16&&(a.paint=t[4]),n&32&&(a.layout=t[5]),n&64&&(a.minzoom=t[6]),n&128&&(a.maxzoom=t[7]),n&32768&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){P(e,t)}}}function bt(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:a=ze("raster-layer")}=e,{source:i=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:c}=e,{layout:s=void 0}=e,{minzoom:r=void 0}=e,{maxzoom:g=void 0}=e;function _(b){F.call(this,o,b)}function m(b){F.call(this,o,b)}function L(b){F.call(this,o,b)}function y(b){F.call(this,o,b)}function T(b){F.call(this,o,b)}function Q(b){F.call(this,o,b)}return o.$$set=b=>{"id"in b&&l(0,a=b.id),"source"in b&&l(1,i=b.source),"beforeId"in b&&l(2,u=b.beforeId),"beforeLayerType"in b&&l(3,f=b.beforeLayerType),"paint"in b&&l(4,c=b.paint),"layout"in b&&l(5,s=b.layout),"minzoom"in b&&l(6,r=b.minzoom),"maxzoom"in b&&l(7,g=b.maxzoom),"$$scope"in b&&l(15,n=b.$$scope)},[a,i,u,f,c,s,r,g,t,_,m,L,y,T,Q,n]}class pt extends Z{constructor(e){super(),J(this,e,bt,_t,j,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}function Ut(o){return Xe(o)}const x=le(!1),oe=le(null),ae=le(100),H=le({lng:0,lat:0}),V=le({lng:0,lat:0});function ht(o){let e,l;return e=new Be({props:{$$slots:{default:[kt]},$$scope:{ctx:o}}}),e.$on("click",o[10]),{c(){z(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const a={};n&8192&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){P(e,t)}}}function yt(o){let e,l,t="Georeference an image",n,a,i,u,f,c,s,r=`Note this image isn't saved as part of this scheme. When you close this
      page, it'll be lost.`,g;a=new $e({props:{$$slots:{default:[vt]},$$scope:{ctx:o}}}),u=new et({props:{label:"Load an image",id:"load-image",$$slots:{default:[It]},$$scope:{ctx:o}}});let _=o[3]&&ve(o);return{c(){e=S("div"),l=S("h2"),l.textContent=t,n=G(),z(a.$$.fragment),i=G(),z(u.$$.fragment),f=G(),_&&_.c(),c=G(),s=S("p"),s.textContent=r,this.h()},l(m){e=C(m,"DIV",{style:!0});var L=q(e);l=C(L,"H2",{"data-svelte-h":!0}),ee(l)!=="svelte-fociiu"&&(l.textContent=t),n=R(L),E(a.$$.fragment,L),i=R(L),E(u.$$.fragment,L),f=R(L),_&&_.l(L),c=R(L),s=C(L,"P",{"data-svelte-h":!0}),ee(s)!=="svelte-d8uklv"&&(s.textContent=r),L.forEach(h),this.h()},h(){Y(e,"border","1px solid black"),Y(e,"padding","4px")},m(m,L){w(m,e,L),M(e,l),M(e,n),N(a,e,null),M(e,i),N(u,e,null),M(e,f),_&&_.m(e,null),M(e,c),M(e,s),g=!0},p(m,L){const y={};L&8202&&(y.$$scope={dirty:L,ctx:m}),a.$set(y);const T={};L&8193&&(T.$$scope={dirty:L,ctx:m}),u.$set(T),m[3]?_?_.p(m,L):(_=ve(m),_.c(),_.m(e,c)):_&&(_.d(1),_=null)},i(m){g||(p(a.$$.fragment,m),p(u.$$.fragment,m),g=!0)},o(m){k(a.$$.fragment,m),k(u.$$.fragment,m),g=!1},d(m){m&&h(e),P(a),P(u),_&&_.d()}}}function kt(o){let e;return{c(){e=K("Georeference an image")},l(l){e=O(l,"Georeference an image")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Lt(o){let e;return{c(){e=K("Save")},l(l){e=O(l,"Save")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function wt(o){let e;return{c(){e=K("Delete")},l(l){e=O(l,"Delete")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function vt(o){let e,l,t,n;return e=new xe({props:{$$slots:{default:[Lt]},$$scope:{ctx:o}}}),e.$on("click",o[7]),t=new Fe({props:{disabled:!o[3],$$slots:{default:[wt]},$$scope:{ctx:o}}}),t.$on("click",o[5]),{c(){z(e.$$.fragment),l=G(),z(t.$$.fragment)},l(a){E(e.$$.fragment,a),l=R(a),E(t.$$.fragment,a)},m(a,i){N(e,a,i),w(a,l,i),N(t,a,i),n=!0},p(a,i){const u={};i&8192&&(u.$$scope={dirty:i,ctx:a}),e.$set(u);const f={};i&8&&(f.disabled=!a[3]),i&8192&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){n||(p(e.$$.fragment,a),p(t.$$.fragment,a),n=!0)},o(a){k(e.$$.fragment,a),k(t.$$.fragment,a),n=!1},d(a){a&&h(l),P(e,a),P(t,a)}}}function It(o){let e,l,t;return{c(){e=S("input"),this.h()},l(n){e=C(n,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){B(e,"class","govuk-file-upload"),B(e,"id","load-image"),B(e,"type","file")},m(n,a){w(n,e,a),o[8](e),l||(t=A(e,"change",o[4]),l=!0)},p:re,d(n){n&&h(e),o[8](null),l=!1,t()}}}function ve(o){let e,l,t,n,a,i,u,f;return{c(){e=S("div"),l=S("label"),t=S("input"),n=K(`
          Opacity: `),a=K(o[2]),i=K("%"),this.h()},l(c){e=C(c,"DIV",{});var s=q(e);l=C(s,"LABEL",{});var r=q(l);t=C(r,"INPUT",{type:!0,min:!0,max:!0}),n=O(r,`
          Opacity: `),a=O(r,o[2]),i=O(r,"%"),r.forEach(h),s.forEach(h),this.h()},h(){B(t,"type","range"),B(t,"min","0"),B(t,"max","100")},m(c,s){w(c,e,s),M(e,l),M(l,t),pe(t,o[2]),M(l,n),M(l,a),M(l,i),u||(f=[A(t,"change",o[9]),A(t,"input",o[9])],u=!0)},p(c,s){s&4&&pe(t,c[2]),s&4&&je(a,c[2])},d(c){c&&h(e),u=!1,Ce(f)}}}function St(o){let e,l,t,n,a,i;const u=[yt,ht],f=[];function c(s,r){return s[1]?0:1}return e=c(o),l=f[e]=u[e](o),{c(){l.c(),t=W()},l(s){l.l(s),t=W()},m(s,r){f[e].m(s,r),w(s,t,r),n=!0,a||(i=A(window,"keydown",o[6]),a=!0)},p(s,[r]){let g=e;e=c(s),e===g?f[e].p(s,r):(te(),k(f[g],1,1,()=>{f[g]=null}),ne(),l=f[e],l?l.p(s,r):(l=f[e]=u[e](s),l.c()),p(l,1),l.m(t.parentNode,t))},i(s){n||(p(l),n=!0)},o(s){k(l),n=!1},d(s){s&&h(t),f[e].d(s),a=!1,i()}}}function Ct(o,e,l){let t,n,a,i,u;I(o,x,y=>l(1,t=y)),I(o,ae,y=>l(2,n=y)),I(o,oe,y=>l(3,a=y)),I(o,V,y=>l(11,i=y)),I(o,H,y=>l(12,u=y));let f;async function c(y){let T=await f.files[0].arrayBuffer(),Q=new Blob([new Uint8Array(T)]);v(oe,a=URL.createObjectURL(Q),a),v(H,u={lng:0,lat:0},u),v(V,i={lng:0,lat:0},i)}function s(){v(oe,a=null,a),v(ae,n=100,n)}function r(y){t&&y.key=="Escape"&&(y.stopPropagation(),v(x,t=!1,t))}const g=()=>v(x,t=!1,t);function _(y){ue[y?"unshift":"push"](()=>{f=y,l(0,f)})}function m(){n=Oe(this.value),ae.set(n)}return[f,t,n,a,c,s,r,g,_,m,()=>v(x,t=!0,t)]}class Ft extends Z{constructor(e){super(),J(this,e,Ct,St,j,{})}}function Ie(o){let e,l;return e=new ft({props:{url:o[2],coordinates:[[o[0].lng,o[0].lat],[o[3].lng,o[0].lat],[o[3].lng,o[3].lat],[o[0].lng,o[3].lat]],$$slots:{default:[Bt]},$$scope:{ctx:o}}}),{c(){z(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const a={};n&4&&(a.url=t[2]),n&9&&(a.coordinates=[[t[0].lng,t[0].lat],[t[3].lng,t[0].lat],[t[3].lng,t[3].lat],[t[0].lng,t[3].lat]]),n&272&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){P(e,t)}}}function Bt(o){let e,l;return e=new pt({props:{paint:{"raster-fade-duration":0,"raster-opacity":o[4]/100}}}),{c(){z(e.$$.fragment)},l(t){E(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const a={};n&16&&(a.paint={"raster-fade-duration":0,"raster-opacity":t[4]/100}),e.$set(a)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){P(e,t)}}}function Se(o){let e,l,t,n,a,i;function u(r){o[6](r)}let f={draggable:!0,$$slots:{default:[zt]},$$scope:{ctx:o}};o[0]!==void 0&&(f.lngLat=o[0]),e=new we({props:f}),ue.push(()=>ye(e,"lngLat",u));function c(r){o[7](r)}let s={draggable:!0,$$slots:{default:[Et]},$$scope:{ctx:o}};return o[3]!==void 0&&(s.lngLat=o[3]),n=new we({props:s}),ue.push(()=>ye(n,"lngLat",c)),{c(){z(e.$$.fragment),t=G(),z(n.$$.fragment)},l(r){E(e.$$.fragment,r),t=R(r),E(n.$$.fragment,r)},m(r,g){N(e,r,g),w(r,t,g),N(n,r,g),i=!0},p(r,g){const _={};g&256&&(_.$$scope={dirty:g,ctx:r}),!l&&g&1&&(l=!0,_.lngLat=r[0],he(()=>l=!1)),e.$set(_);const m={};g&256&&(m.$$scope={dirty:g,ctx:r}),!a&&g&8&&(a=!0,m.lngLat=r[3],he(()=>a=!1)),n.$set(m)},i(r){i||(p(e.$$.fragment,r),p(n.$$.fragment,r),i=!0)},o(r){k(e.$$.fragment,r),k(n.$$.fragment,r),i=!1},d(r){r&&h(t),P(e,r),P(n,r)}}}function zt(o){let e;return{c(){e=S("span"),this.h()},l(l){e=C(l,"SPAN",{class:!0,style:!0}),q(e).forEach(h),this.h()},h(){B(e,"class","dot svelte-1tmbx1c"),Y(e,"background-color","red")},m(l,t){w(l,e,t)},p:re,d(l){l&&h(e)}}}function Et(o){let e;return{c(){e=S("span"),this.h()},l(l){e=C(l,"SPAN",{class:!0,style:!0}),q(e).forEach(h),this.h()},h(){B(e,"class","dot svelte-1tmbx1c"),Y(e,"background-color","blue")},m(l,t){w(l,e,t)},p:re,d(l){l&&h(e)}}}function Nt(o){let e,l,t,n=o[2]&&o[0].lng!=o[3].lng&&Ie(o),a=o[2]&&o[1]&&Se(o);return{c(){n&&n.c(),e=G(),a&&a.c(),l=W()},l(i){n&&n.l(i),e=R(i),a&&a.l(i),l=W()},m(i,u){n&&n.m(i,u),w(i,e,u),a&&a.m(i,u),w(i,l,u),t=!0},p(i,[u]){i[2]&&i[0].lng!=i[3].lng?n?(n.p(i,u),u&13&&p(n,1)):(n=Ie(i),n.c(),p(n,1),n.m(e.parentNode,e)):n&&(te(),k(n,1,1,()=>{n=null}),ne()),i[2]&&i[1]?a?(a.p(i,u),u&6&&p(a,1)):(a=Se(i),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(te(),k(a,1,1,()=>{a=null}),ne())},i(i){t||(p(n),p(a),t=!0)},o(i){k(n),k(a),t=!1},d(i){i&&(h(e),h(l)),n&&n.d(i),a&&a.d(i)}}}function Pt(o,e,l){let t,n,a,i,u;I(o,V,r=>l(3,t=r)),I(o,H,r=>l(0,n=r)),I(o,x,r=>l(1,a=r)),I(o,oe,r=>l(2,i=r)),I(o,ae,r=>l(4,u=r));let{map:f}=e;function c(r){n=r,H.set(n)}function s(r){t=r,V.set(t)}return o.$$set=r=>{"map"in r&&l(5,f=r.map)},o.$$.update=()=>{if(o.$$.dirty&39&&i&&a&&n.lng==0&&n.lat==0){let r=f.getBounds();v(H,n.lng=r.getWest()+.4*(r.getEast()-r.getWest()),n),v(V,t.lng=r.getWest()+.6*(r.getEast()-r.getWest()),t),v(H,n.lat=r.getNorth()+.4*(r.getSouth()-r.getNorth()),n),v(V,t.lat=r.getNorth()+.6*(r.getSouth()-r.getNorth()),t)}},[n,a,i,t,u,f,c,s]}class Ht extends Z{constructor(e){super(),J(this,e,Pt,Nt,j,{map:5})}}export{jt as B,Ft as G,we as M,Ht as a,Ut as b};
