import{s as ce,e as S,c as M,p as P,q as y,i as h,z as Ie,n as G,f as $,E as Te,a as w,g as k,T as qe,r as ye,l as Fe,b as ie,h as C,u as Le,m as Se,o as Me,t as ee,d as te,j as Ae,ab as he,V as K,Y as pe,w as Be}from"./scheduler.Bxdx0f0B.js";import{S as de,i as $e,c as A,a as B,m as E,t as v,b as x,d as j,g as ue,f as me,e as Ee}from"./index.itOPPQ0R.js";import{L as je,d as De}from"./Loading.BCGgETkD.js";import{b as Re}from"./paths.EbvZc_Fs.js";import{S as Ge,A as Ne}from"./ServiceHeader.BgGAq9B-.js";import{B as Ve}from"./ButtonGroup.CFC5gCUN.js";import{F as Ue}from"./FileInput.CGqNQzxG.js";import{R as Ye}from"./Radio.DumOSYcD.js";import"./index.BZaKOfR9.js";import{S as ae}from"./SecondaryButton.C3WEK5d3.js";import{W as ze}from"./WarningButton.DE8BQTXW.js";import{b as He,p as ve}from"./index.C0WUhk6v.js";import{F as Je}from"./FormElement.Jlp14U3V.js";import{W as Pe}from"./WarningText.5NwKqynh.js";import{g as We}from"./entry.UEdK2iJB.js";/* empty css                                                  */function Oe(o){let e,n=`Start
  <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" aria-hidden="true" focusable="false"><path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z"></path></svg>`,t,r;return{c(){e=S("button"),e.innerHTML=n,this.h()},l(l){e=M(l,"BUTTON",{type:!0,class:!0,"data-module":!0,"data-svelte-h":!0}),P(e)!=="svelte-yfbivp"&&(e.innerHTML=n),this.h()},h(){y(e,"type","button"),y(e,"class","govuk-button govuk-button--start"),y(e,"data-module","govuk-button")},m(l,s){h(l,e,s),t||(r=Ie(e,"click",o[0]),t=!0)},p:G,i:G,o:G,d(l){l&&$(e),t=!1,r()}}}function Xe(o){function e(n){Te.call(this,o,n)}return[e]}class Ze extends de{constructor(e){super(),$e(this,e,Xe,Oe,ce,{})}}const Ke="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M200-200h57l391-391-57-57-391%20391v57Zm-80%2080v-170l528-527q12-11%2026.5-17t30.5-6q16%200%2031%206t26%2018l55%2056q12%2011%2017.5%2026t5.5%2030q0%2016-5.5%2030.5T817-647L290-120H120Zm640-584-56-56%2056%2056Zm-141%2085-28-29%2057%2057-29-28Z'/%3e%3c/svg%3e",Qe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='white'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M6%2019c0%201.1.9%202%202%202h8c1.1%200%202-.9%202-2V7H6v12zM19%204h-3.5l-1-1h-5l-1%201H5v2h14V4z'/%3e%3c/svg%3e";function et(o){let e,n=`You can import from an existing route check .xlsx file, <b>only if there&#39;s an up-to-date DALOG sheet added</b>
      . After importing, there will still be some problems:`,t,r,l=`<li>You must fill out the Junction Assessment Tool (JAT); it won&#39;t be
        imported</li> <li>Some text fields on the Summary of Scheme page will be missing</li>`;return{c(){e=S("p"),e.innerHTML=n,t=w(),r=S("ul"),r.innerHTML=l},l(s){e=M(s,"P",{"data-svelte-h":!0}),P(e)!=="svelte-1ykh4hv"&&(e.innerHTML=n),t=k(s),r=M(s,"UL",{"data-svelte-h":!0}),P(r)!=="svelte-1tt4pqo"&&(r.innerHTML=l)},m(s,a){h(s,e,a),h(s,t,a),h(s,r,a)},p:G,d(s){s&&($(e),$(t),$(r))}}}function tt(o){let e,n,t,r,l,s;return t=new Pe({props:{$$slots:{default:[et]},$$scope:{ctx:o}}}),{c(){e=S("input"),n=w(),A(t.$$.fragment),this.h()},l(a){e=M(a,"INPUT",{class:!0,id:!0,type:!0}),n=k(a),B(t.$$.fragment,a),this.h()},h(){y(e,"class","govuk-file-upload"),y(e,"id","import-xlsx"),y(e,"type","file")},m(a,_){h(a,e,_),o[4](e),h(a,n,_),E(t,a,_),r=!0,l||(s=Ie(e,"change",o[2]),l=!0)},p(a,_){const p={};_&64&&(p.$$scope={dirty:_,ctx:a}),t.$set(p)},i(a){r||(v(t.$$.fragment,a),r=!0)},o(a){x(t.$$.fragment,a),r=!1},d(a){a&&($(e),$(n)),o[4](null),j(t,a),l=!1,s()}}}function lt(o){let e,n,t,r;return e=new Je({props:{label:"Import from XLSX file",id:"import-xlsx",$$slots:{default:[tt]},$$scope:{ctx:o}}}),t=new je({props:{loading:o[0]}}),{c(){A(e.$$.fragment),n=w(),A(t.$$.fragment)},l(l){B(e.$$.fragment,l),n=k(l),B(t.$$.fragment,l)},m(l,s){E(e,l,s),h(l,n,s),E(t,l,s),r=!0},p(l,[s]){const a={};s&66&&(a.$$scope={dirty:s,ctx:l}),e.$set(a);const _={};s&1&&(_.loading=l[0]),t.$set(_)},i(l){r||(v(e.$$.fragment,l),v(t.$$.fragment,l),r=!0)},o(l){x(e.$$.fragment,l),x(t.$$.fragment,l),r=!1},d(l){l&&$(n),j(e,l),j(t,l)}}}function nt(o,e,n){let t=qe(),{xlsxImporter:r}=e,l="",s;async function a(p){let m=s.files[0].name;try{n(0,l=`Loading ${m}`);let f=await s.files[0].arrayBuffer(),i=await r(f);n(0,l=""),t("imported",{filename:He(m,".xlsx"),data:i})}catch(f){window.alert(`Couldn't import ${m}: ${f}`),n(0,l="")}}function _(p){ye[p?"unshift":"push"](()=>{s=p,n(1,s)})}return o.$$set=p=>{"xlsxImporter"in p&&n(3,r=p.xlsxImporter)},[l,s,a,r,_]}class st extends de{constructor(e){super(),$e(this,e,nt,lt,ce,{xlsxImporter:3})}}const rt=o=>({}),be=o=>({}),ot=o=>({}),we=o=>({});function ke(o){let e,n,t="You are editing:",r,l,s,a,_,p,m;return a=new Ze({}),a.$on("click",o[16]),p=new Ve({props:{$$slots:{default:[at]},$$scope:{ctx:o}}}),{c(){e=S("p"),n=S("b"),n.textContent=t,r=w(),l=ee(o[7]),s=w(),A(a.$$.fragment),_=w(),A(p.$$.fragment)},l(f){e=M(f,"P",{});var i=ie(e);n=M(i,"B",{"data-svelte-h":!0}),P(n)!=="svelte-1kt2tqj"&&(n.textContent=t),r=k(i),l=te(i,o[7]),i.forEach($),s=k(f),B(a.$$.fragment,f),_=k(f),B(p.$$.fragment,f)},m(f,i){h(f,e,i),C(e,n),C(e,r),C(e,l),h(f,s,i),E(a,f,i),h(f,_,i),E(p,f,i),m=!0},p(f,i){(!m||i&128)&&Ae(l,f[7]);const d={};i&262144&&(d.$$scope={dirty:i,ctx:f}),p.$set(d)},i(f){m||(v(a.$$.fragment,f),v(p.$$.fragment,f),m=!0)},o(f){x(a.$$.fragment,f),x(p.$$.fragment,f),m=!1},d(f){f&&($(e),$(s),$(_)),j(a,f),j(p,f)}}}function it(o){let e,n,t;return{c(){e=S("img"),t=ee(`
            Export .json`),this.h()},l(r){e=M(r,"IMG",{src:!0,alt:!0,class:!0}),t=te(r,`
            Export .json`),this.h()},h(){pe(e.src,n=De)||y(e,"src",n),y(e,"alt","Export .json"),y(e,"class","svelte-1f2msch")},m(r,l){h(r,e,l),h(r,t,l)},p:G,d(r){r&&($(e),$(t))}}}function at(o){let e,n,t;e=new ae({props:{$$slots:{default:[it]},$$scope:{ctx:o}}}),e.$on("click",o[11]);const r=o[15].export,l=Fe(r,o,o[18],be);return{c(){A(e.$$.fragment),n=w(),l&&l.c()},l(s){B(e.$$.fragment,s),n=k(s),l&&l.l(s)},m(s,a){E(e,s,a),h(s,n,a),l&&l.m(s,a),t=!0},p(s,a){const _={};a&262144&&(_.$$scope={dirty:a,ctx:s}),e.$set(_),l&&l.p&&(!t||a&262144)&&Le(l,r,s,s[18],t?Me(r,s[18],a,rt):Se(s[18]),be)},i(s){t||(v(e.$$.fragment,s),v(l,s),t=!0)},o(s){x(e.$$.fragment,s),x(l,s),t=!1},d(s){s&&$(n),j(e,s),l&&l.d(s)}}}function ft(o){let e;return{c(){e=ee("New blank file")},l(n){e=te(n,"New blank file")},m(n,t){h(n,e,t)},d(n){n&&$(e)}}}function xe(o){let e,n,t,r;return t=new st({props:{xlsxImporter:o[4]}}),t.$on("imported",o[14]),{c(){e=S("hr"),n=w(),A(t.$$.fragment)},l(l){e=M(l,"HR",{}),n=k(l),B(t.$$.fragment,l)},m(l,s){h(l,e,s),h(l,n,s),E(t,l,s),r=!0},p(l,s){const a={};s&16&&(a.xlsxImporter=l[4]),t.$set(a)},i(l){r||(v(t.$$.fragment,l),r=!0)},o(l){x(t.$$.fragment,l),r=!1},d(l){l&&($(e),$(n)),j(t,l)}}}function ut(o){let e,n="No saved files";return{c(){e=S("p"),e.textContent=n},l(t){e=M(t,"P",{"data-svelte-h":!0}),P(e)!=="svelte-yojds1"&&(e.textContent=n)},m(t,r){h(t,e,r)},p:G,i:G,o:G,d(t){t&&$(e)}}}function mt(o){let e,n,t,r,l,s,a,_,p;e=new ae({props:{disabled:o[5]=="",$$slots:{default:[ct]},$$scope:{ctx:o}}}),e.$on("click",o[8]),t=new ae({props:{disabled:o[5]=="",$$slots:{default:[pt]},$$scope:{ctx:o}}}),t.$on("click",o[9]),l=new ze({props:{disabled:o[5]=="",$$slots:{default:[dt]},$$scope:{ctx:o}}}),l.$on("click",o[10]);function m(i){o[17](i)}let f={label:"Manage existing file",choices:ve(o[6])};return o[5]!==void 0&&(f.value=o[5]),a=new Ye({props:f}),ye.push(()=>Ee(a,"value",m)),{c(){A(e.$$.fragment),n=w(),A(t.$$.fragment),r=w(),A(l.$$.fragment),s=w(),A(a.$$.fragment)},l(i){B(e.$$.fragment,i),n=k(i),B(t.$$.fragment,i),r=k(i),B(l.$$.fragment,i),s=k(i),B(a.$$.fragment,i)},m(i,d){E(e,i,d),h(i,n,d),E(t,i,d),h(i,r,d),E(l,i,d),h(i,s,d),E(a,i,d),p=!0},p(i,d){const Y={};d&32&&(Y.disabled=i[5]==""),d&262144&&(Y.$$scope={dirty:d,ctx:i}),e.$set(Y);const N={};d&32&&(N.disabled=i[5]==""),d&262144&&(N.$$scope={dirty:d,ctx:i}),t.$set(N);const g={};d&32&&(g.disabled=i[5]==""),d&262144&&(g.$$scope={dirty:d,ctx:i}),l.$set(g);const D={};d&64&&(D.choices=ve(i[6])),!_&&d&32&&(_=!0,D.value=i[5],Be(()=>_=!1)),a.$set(D)},i(i){p||(v(e.$$.fragment,i),v(t.$$.fragment,i),v(l.$$.fragment,i),v(a.$$.fragment,i),p=!0)},o(i){x(e.$$.fragment,i),x(t.$$.fragment,i),x(l.$$.fragment,i),x(a.$$.fragment,i),p=!1},d(i){i&&($(n),$(r),$(s)),j(e,i),j(t,i),j(l,i),j(a,i)}}}function ct(o){let e;return{c(){e=ee("Load saved file")},l(n){e=te(n,"Load saved file")},m(n,t){h(n,e,t)},d(n){n&&$(e)}}}function pt(o){let e,n,t;return{c(){e=S("img"),t=ee(`
          Rename saved file`),this.h()},l(r){e=M(r,"IMG",{src:!0,alt:!0,class:!0}),t=te(r,`
          Rename saved file`),this.h()},h(){pe(e.src,n=Ke)||y(e,"src",n),y(e,"alt","Rename saved file"),y(e,"class","svelte-1f2msch")},m(r,l){h(r,e,l),h(r,t,l)},p:G,d(r){r&&($(e),$(t))}}}function dt(o){let e,n,t;return{c(){e=S("img"),t=ee(`
          Delete saved file`),this.h()},l(r){e=M(r,"IMG",{src:!0,alt:!0,class:!0}),t=te(r,`
          Delete saved file`),this.h()},h(){pe(e.src,n=Qe)||y(e,"src",n),y(e,"alt","Delete saved file"),y(e,"class","svelte-1f2msch")},m(r,l){h(r,e,l),h(r,t,l)},p:G,d(r){r&&($(e),$(t))}}}function $t(o){let e,n,t,r,l,s,a="Manage my schemes",_,p,m,f,i,d=`All files are auto-saved in your browser's local storage. You can close
        your browser and resume later. You can export the file to your computer
        to share with someone else, and import from a file below.`,Y,N,g,D="Create or import a file",le,V,ne,se,re,z,oe,X,U,J,c="Manage existing files",q,I,H,Q;e=new Ge({props:{service:o[3]}}),r=new Ne({});const fe=o[15].description,R=Fe(fe,o,o[18],we);let F=o[7]&&ke(o);V=new ae({props:{$$slots:{default:[ft]},$$scope:{ctx:o}}}),V.$on("click",o[12]),z=new Ue({props:{label:"Import from a .json file",onLoad:o[13]}});let L=o[4]!=null&&xe(o);const _e=[mt,ut],W=[];function ge(u,b){return u[6].length>0?0:1}return I=ge(o),H=W[I]=_e[I](o),{c(){A(e.$$.fragment),n=w(),t=S("div"),A(r.$$.fragment),l=w(),s=S("div"),s.textContent=a,_=w(),p=S("div"),m=S("div"),R&&R.c(),f=w(),i=S("p"),i.textContent=d,Y=w(),F&&F.c(),N=w(),g=S("h2"),g.textContent=D,le=w(),A(V.$$.fragment),ne=w(),se=S("hr"),re=w(),A(z.$$.fragment),oe=w(),L&&L.c(),X=w(),U=S("div"),J=S("h2"),J.textContent=c,q=w(),H.c(),this.h()},l(u){B(e.$$.fragment,u),n=k(u),t=M(u,"DIV",{class:!0});var b=ie(t);B(r.$$.fragment,b),l=k(b),s=M(b,"DIV",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-1qslbyq"&&(s.textContent=a),_=k(b),p=M(b,"DIV",{class:!0});var Z=ie(p);m=M(Z,"DIV",{class:!0});var T=ie(m);R&&R.l(T),f=k(T),i=M(T,"P",{"data-svelte-h":!0}),P(i)!=="svelte-wkz669"&&(i.textContent=d),Y=k(T),F&&F.l(T),N=k(T),g=M(T,"H2",{"data-svelte-h":!0}),P(g)!=="svelte-1yqhw3l"&&(g.textContent=D),le=k(T),B(V.$$.fragment,T),ne=k(T),se=M(T,"HR",{}),re=k(T),B(z.$$.fragment,T),oe=k(T),L&&L.l(T),T.forEach($),X=k(Z),U=M(Z,"DIV",{class:!0});var O=ie(U);J=M(O,"H2",{class:!0,"data-svelte-h":!0}),P(J)!=="svelte-7j9603"&&(J.textContent=c),q=k(O),H.l(O),O.forEach($),Z.forEach($),b.forEach($),this.h()},h(){y(s,"class","govuk-heading-l"),y(m,"class","govuk-grid-column-two-thirds"),y(J,"class","green-bar svelte-1f2msch"),y(U,"class","govuk-grid-column-one-third"),y(p,"class","govuk-grid-row"),y(t,"class","govuk-width-container")},m(u,b){E(e,u,b),h(u,n,b),h(u,t,b),E(r,t,null),C(t,l),C(t,s),C(t,_),C(t,p),C(p,m),R&&R.m(m,null),C(m,f),C(m,i),C(m,Y),F&&F.m(m,null),C(m,N),C(m,g),C(m,le),E(V,m,null),C(m,ne),C(m,se),C(m,re),E(z,m,null),C(m,oe),L&&L.m(m,null),C(p,X),C(p,U),C(U,J),C(U,q),W[I].m(U,null),Q=!0},p(u,[b]){const Z={};b&8&&(Z.service=u[3]),e.$set(Z),R&&R.p&&(!Q||b&262144)&&Le(R,fe,u,u[18],Q?Me(fe,u[18],b,ot):Se(u[18]),we),u[7]?F?(F.p(u,b),b&128&&v(F,1)):(F=ke(u),F.c(),v(F,1),F.m(m,N)):F&&(ue(),x(F,1,1,()=>{F=null}),me());const T={};b&262144&&(T.$$scope={dirty:b,ctx:u}),V.$set(T),u[4]!=null?L?(L.p(u,b),b&16&&v(L,1)):(L=xe(u),L.c(),v(L,1),L.m(m,null)):L&&(ue(),x(L,1,1,()=>{L=null}),me());let O=I;I=ge(u),I===O?W[I].p(u,b):(ue(),x(W[O],1,1,()=>{W[O]=null}),me(),H=W[I],H?H.p(u,b):(H=W[I]=_e[I](u),H.c()),v(H,1),H.m(U,null))},i(u){Q||(v(e.$$.fragment,u),v(r.$$.fragment,u),v(R,u),v(F),v(V.$$.fragment,u),v(z.$$.fragment,u),v(L),v(H),Q=!0)},o(u){x(e.$$.fragment,u),x(r.$$.fragment,u),x(R,u),x(F),x(V.$$.fragment,u),x(z.$$.fragment,u),x(L),x(H),Q=!1},d(u){u&&($(n),$(t)),j(e,u),j(r),R&&R.d(u),F&&F.d(),j(V),j(z),L&&L.d(),W[I].d()}}}function Ce(o,e){let n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",o),document.body.appendChild(n),n.click(),document.body.removeChild(n)}function _t(o,e,n){let t,r=G,l=()=>(r(),r=he(d,c=>n(19,t=c)),d),s,a=G,_=()=>(a(),a=he(i,c=>n(7,s=c)),i);o.$$.on_destroy.push(()=>r()),o.$$.on_destroy.push(()=>a());let{$$slots:p={},$$scope:m}=e,{files:f}=e,{currentFile:i}=e;_();let{state:d}=e;l();let{service:Y}=e,{xlsxImporter:N=null}=e,g=s,D=f.getFileList();function le(){g&&X(g)}function V(){if(!g)return;let c=g==s,q=window.prompt(`Rename file ${g} to what?`,g);if(q){let I=f.key(g),H=window.localStorage.getItem(I);window.localStorage.setItem(f.key(q),H),window.localStorage.removeItem(I),c&&K(i,s=q,s),n(5,g=q),n(6,D=f.getFileList())}}function ne(){if(!g||!window.confirm(`Really delete file ${g}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let c=f.key(g);Ce(`${g}.json`,window.localStorage.getItem(c)),window.localStorage.removeItem(c),g==s&&(K(i,s="",s),K(d,t=f.emptyState(),t)),n(5,g=""),n(6,D=f.getFileList())}function se(){Ce(s+".json",JSON.stringify(t))}function re(){let c=window.prompt("What do you want to name your new file?");c&&(K(i,s=c,s),K(d,t=f.emptyState(),t),n(6,D=f.saveAndGetFileList(s,t)))}function z(c,q){let I=He(c,".json");try{let H=JSON.parse(q);f.validate(H),n(6,D=f.saveAndGetFileList(I,H)),X(I)}catch(H){window.alert(`Couldn't load ${I}: ${H}`)}}function oe(c){let{filename:q,data:I}=c.detail;n(6,D=f.saveAndGetFileList(q,I)),X(q)}function X(c){try{let q=f.loadFile(c);K(i,s=c,s),K(d,t=q,t)}catch(q){window.alert(`Couldn't load ${c}: ${q}`)}}const U=()=>We(`${Re}/${f.prefix}overview`);function J(c){g=c,n(5,g)}return o.$$set=c=>{"files"in c&&n(0,f=c.files),"currentFile"in c&&_(n(1,i=c.currentFile)),"state"in c&&l(n(2,d=c.state)),"service"in c&&n(3,Y=c.service),"xlsxImporter"in c&&n(4,N=c.xlsxImporter),"$$scope"in c&&n(18,m=c.$$scope)},[f,i,d,Y,N,g,D,s,le,V,ne,se,re,z,oe,p,U,J,m]}class qt extends de{constructor(e){super(),$e(this,e,_t,$t,ce,{files:0,currentFile:1,state:2,service:3,xlsxImporter:4})}}export{qt as F};
