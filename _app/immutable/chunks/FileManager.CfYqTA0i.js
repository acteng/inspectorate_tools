import{s as ne,D as z,i as g,n as O,f as p,e as y,a as L,t as M,c as v,b as D,g as C,d as j,r as H,h as I,j as Z,z as be,v as ge,x as ie,w as he,R as fe,S as T,p as ae}from"./scheduler.efbFRWiT.js";import{S as oe,i as se,c as B,a as U,m as Y,t as w,b as F,d as A,e as we,g as te,f as le}from"./index.CLLNqFCD.js";import{e as ue,u as ke,o as ye}from"./each.DDqnI5cy.js";import{g as ce}from"./entry.DBdBcuDF.js";import{b as me}from"./paths.a8xD5mda.js";import{B as ve}from"./ButtonGroup.DJ0XB-um.js";import{F as Ie}from"./FileInput.B--1wm1x.js";import{S as Q,W as Fe}from"./WarningButton.Docs-nkv.js";import{M as Ee}from"./Modal.C2K2egjq.js";/* empty css                                                       */import{F as Se}from"./FormElement.BPozNwAt.js";import"./index.PG9B-MxF.js";function pe(s){let e,t,l,n,o,i,f;return{c(){e=y("div"),t=y("div"),l=y("progress"),n=L(),o=y("div"),i=y("h3"),f=M(s[0]),this.h()},l(a){e=v(a,"DIV",{class:!0});var c=D(e);t=v(c,"DIV",{class:!0});var m=D(t);l=v(m,"PROGRESS",{}),D(l).forEach(p),n=C(m),o=v(m,"DIV",{class:!0});var _=D(o);i=v(_,"H3",{});var E=D(i);f=j(E,s[0]),E.forEach(p),_.forEach(p),m.forEach(p),c.forEach(p),this.h()},h(){H(o,"class","govuk-prose"),H(t,"class","inner svelte-ho9d42"),H(e,"class","outer svelte-ho9d42")},m(a,c){g(a,e,c),I(e,t),I(t,l),I(t,n),I(t,o),I(o,i),I(i,f)},p(a,c){c&1&&Z(f,a[0])},d(a){a&&p(e)}}}function Le(s){let e,t=s[0]&&pe(s);return{c(){t&&t.c(),e=z()},l(l){t&&t.l(l),e=z()},m(l,n){t&&t.m(l,n),g(l,e,n)},p(l,[n]){l[0]?t?t.p(l,n):(t=pe(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:O,o:O,d(l){l&&p(e),t&&t.d(l)}}}function Ce(s,e,t){let{loading:l}=e;return s.$$set=n=>{"loading"in n&&t(0,l=n.loading)},[l]}class xe extends oe{constructor(e){super(),se(this,e,Ce,Le,ne,{loading:0})}}function Ne(s){let e,t,l;return{c(){e=y("input"),this.h()},l(n){e=v(n,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){H(e,"class","govuk-file-upload"),H(e,"id","import-xlsx"),H(e,"type","file")},m(n,o){g(n,e,o),s[4](e),t||(l=be(e,"change",s[2]),t=!0)},p:O,d(n){n&&p(e),s[4](null),t=!1,l()}}}function Re(s){let e,t,l,n;return e=new Se({props:{label:"Import from XLSX file",id:"import-xlsx",$$slots:{default:[Ne]},$$scope:{ctx:s}}}),l=new xe({props:{loading:s[0]}}),{c(){B(e.$$.fragment),t=L(),B(l.$$.fragment)},l(o){U(e.$$.fragment,o),t=C(o),U(l.$$.fragment,o)},m(o,i){Y(e,o,i),g(o,t,i),Y(l,o,i),n=!0},p(o,[i]){const f={};i&34&&(f.$$scope={dirty:i,ctx:o}),e.$set(f);const a={};i&1&&(a.loading=o[0]),l.$set(a)},i(o){n||(w(e.$$.fragment,o),w(l.$$.fragment,o),n=!0)},o(o){F(e.$$.fragment,o),F(l.$$.fragment,o),n=!1},d(o){o&&p(t),A(e,o),A(l,o)}}}function De(s,e,t){let{xlsxImporter:l}=e,n="",o;async function i(a){let c=o.files[0].name;t(0,n=`Loading ${c}`);let m=await o.files[0].arrayBuffer();await l(m),t(0,n="")}function f(a){ge[a?"unshift":"push"](()=>{o=a,t(1,o)})}return s.$$set=a=>{"xlsxImporter"in a&&t(3,l=a.xlsxImporter)},[n,o,i,l,f]}class Me extends oe{constructor(e){super(),se(this,e,De,Re,ne,{xlsxImporter:3})}}function $e(s,e,t){const l=s.slice();return l[17]=e[t],l}function je(s){let e;return{c(){e=M("Manage files")},l(t){e=j(t,"Manage files")},m(t,l){g(t,e,l)},d(t){t&&p(e)}}}function Pe(s){let e;return{c(){e=M("Rename")},l(t){e=j(t,"Rename")},m(t,l){g(t,e,l)},d(t){t&&p(e)}}}function Be(s){let e;return{c(){e=M("Export")},l(t){e=j(t,"Export")},m(t,l){g(t,e,l)},d(t){t&&p(e)}}}function Ue(s){let e;return{c(){e=M("Delete")},l(t){e=j(t,"Delete")},m(t,l){g(t,e,l)},d(t){t&&p(e)}}}function Ye(s){let e,t,l,n,o,i;return e=new Q({props:{$$slots:{default:[Pe]},$$scope:{ctx:s}}}),e.$on("click",s[6]),l=new Q({props:{$$slots:{default:[Be]},$$scope:{ctx:s}}}),l.$on("click",s[7]),o=new Fe({props:{$$slots:{default:[Ue]},$$scope:{ctx:s}}}),o.$on("click",s[8]),{c(){B(e.$$.fragment),t=L(),B(l.$$.fragment),n=L(),B(o.$$.fragment)},l(f){U(e.$$.fragment,f),t=C(f),U(l.$$.fragment,f),n=C(f),U(o.$$.fragment,f)},m(f,a){Y(e,f,a),g(f,t,a),Y(l,f,a),g(f,n,a),Y(o,f,a),i=!0},p(f,a){const c={};a&1048576&&(c.$$scope={dirty:a,ctx:f}),e.$set(c);const m={};a&1048576&&(m.$$scope={dirty:a,ctx:f}),l.$set(m);const _={};a&1048576&&(_.$$scope={dirty:a,ctx:f}),o.$set(_)},i(f){i||(w(e.$$.fragment,f),w(l.$$.fragment,f),w(o.$$.fragment,f),i=!0)},o(f){F(e.$$.fragment,f),F(l.$$.fragment,f),F(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(n)),A(e,f),A(l,f),A(o,f)}}}function Ae(s){let e;return{c(){e=M("New file")},l(t){e=j(t,"New file")},m(t,l){g(t,e,l)},d(t){t&&p(e)}}}function _e(s){let e,t;return e=new Me({props:{xlsxImporter:s[2]}}),{c(){B(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const o={};n&4&&(o.xlsxImporter=l[2]),e.$set(o)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){A(e,l)}}}function Ve(s){let e,t,l,n;function o(){return s[14](s[17])}return t=new Q({props:{$$slots:{default:[Je]},$$scope:{ctx:s}}}),t.$on("click",o),{c(){e=y("li"),B(t.$$.fragment),l=L()},l(i){e=v(i,"LI",{});var f=D(e);U(t.$$.fragment,f),l=C(f),f.forEach(p)},m(i,f){g(i,e,f),Y(t,e,null),I(e,l),n=!0},p(i,f){s=i;const a={};f&1048584&&(a.$$scope={dirty:f,ctx:s}),t.$set(a)},i(i){n||(w(t.$$.fragment,i),n=!0)},o(i){F(t.$$.fragment,i),n=!1},d(i){i&&p(e),A(t)}}}function Ge(s){let e,t=s[17]+"",l;return{c(){e=y("li"),l=M(t)},l(n){e=v(n,"LI",{});var o=D(e);l=j(o,t),o.forEach(p)},m(n,o){g(n,e,o),I(e,l)},p(n,o){o&8&&t!==(t=n[17]+"")&&Z(l,t)},i:O,o:O,d(n){n&&p(e)}}}function Je(s){let e=s[17]+"",t;return{c(){t=M(e)},l(l){t=j(l,e)},m(l,n){g(l,t,n)},p(l,n){n&8&&e!==(e=l[17]+"")&&Z(t,e)},d(l){l&&p(t)}}}function de(s,e){let t,l,n,o,i;const f=[Ge,Ve],a=[];function c(m,_){return m[17]==m[5]?0:1}return l=c(e),n=a[l]=f[l](e),{key:s,first:null,c(){t=z(),n.c(),o=z(),this.h()},l(m){t=z(),n.l(m),o=z(),this.h()},h(){this.first=t},m(m,_){g(m,t,_),a[l].m(m,_),g(m,o,_),i=!0},p(m,_){e=m;let E=l;l=c(e),l===E?a[l].p(e,_):(te(),F(a[E],1,1,()=>{a[E]=null}),le(),n=a[l],n?n.p(e,_):(n=a[l]=f[l](e),n.c()),w(n,1),n.m(o.parentNode,o))},i(m){i||(w(n),i=!0)},o(m){F(n),i=!1},d(m){m&&(p(t),p(o)),a[l].d(m)}}}function Oe(s){let e,t=`All files are auto-saved in your browser's local storage. You can close your
    browser and resume later. You can export the file to your computer to share
    with someone else, and import from a file below.`,l,n,o,i,f,a,c,m,_,E,P,$,h,S,N,V,G,W="Load a saved file:",X,J,k=[],d=new Map,x;m=new ve({props:{$$slots:{default:[Ye]},$$scope:{ctx:s}}}),$=new Q({props:{$$slots:{default:[Ae]},$$scope:{ctx:s}}}),$.$on("click",s[9]),S=new Ie({props:{label:"Import from a .json file",onLoad:s[10]}});let b=s[2]!=null&&_e(s),q=ue(s[3]);const re=r=>r[17];for(let r=0;r<q.length;r+=1){let u=$e(s,q,r),R=re(u);d.set(R,k[r]=de(R,u))}return{c(){e=y("p"),e.textContent=t,l=L(),n=y("p"),o=M("You're currently editing "),i=y("u"),f=M(s[5]),a=M(`
    .`),c=L(),B(m.$$.fragment),_=L(),E=y("hr"),P=L(),B($.$$.fragment),h=L(),B(S.$$.fragment),N=L(),b&&b.c(),V=L(),G=y("p"),G.textContent=W,X=L(),J=y("ul");for(let r=0;r<k.length;r+=1)k[r].c()},l(r){e=v(r,"P",{"data-svelte-h":!0}),ae(e)!=="svelte-1yvzirp"&&(e.textContent=t),l=C(r),n=v(r,"P",{});var u=D(n);o=j(u,"You're currently editing "),i=v(u,"U",{});var R=D(i);f=j(R,s[5]),R.forEach(p),a=j(u,`
    .`),u.forEach(p),c=C(r),U(m.$$.fragment,r),_=C(r),E=v(r,"HR",{}),P=C(r),U($.$$.fragment,r),h=C(r),U(S.$$.fragment,r),N=C(r),b&&b.l(r),V=C(r),G=v(r,"P",{"data-svelte-h":!0}),ae(G)!=="svelte-1xydj1w"&&(G.textContent=W),X=C(r),J=v(r,"UL",{});var K=D(J);for(let ee=0;ee<k.length;ee+=1)k[ee].l(K);K.forEach(p)},m(r,u){g(r,e,u),g(r,l,u),g(r,n,u),I(n,o),I(n,i),I(i,f),I(n,a),g(r,c,u),Y(m,r,u),g(r,_,u),g(r,E,u),g(r,P,u),Y($,r,u),g(r,h,u),Y(S,r,u),g(r,N,u),b&&b.m(r,u),g(r,V,u),g(r,G,u),g(r,X,u),g(r,J,u);for(let R=0;R<k.length;R+=1)k[R]&&k[R].m(J,null);x=!0},p(r,u){(!x||u&32)&&Z(f,r[5]);const R={};u&1048576&&(R.$$scope={dirty:u,ctx:r}),m.$set(R);const K={};u&1048576&&(K.$$scope={dirty:u,ctx:r}),$.$set(K),r[2]!=null?b?(b.p(r,u),u&4&&w(b,1)):(b=_e(r),b.c(),w(b,1),b.m(V.parentNode,V)):b&&(te(),F(b,1,1,()=>{b=null}),le()),u&2088&&(q=ue(r[3]),te(),k=ke(k,u,re,1,r,q,d,J,ye,de,null,$e),le())},i(r){if(!x){w(m.$$.fragment,r),w($.$$.fragment,r),w(S.$$.fragment,r),w(b);for(let u=0;u<q.length;u+=1)w(k[u]);x=!0}},o(r){F(m.$$.fragment,r),F($.$$.fragment,r),F(S.$$.fragment,r),F(b);for(let u=0;u<k.length;u+=1)F(k[u]);x=!1},d(r){r&&(p(e),p(l),p(n),p(c),p(_),p(E),p(P),p(h),p(N),p(V),p(G),p(X),p(J)),A(m,r),A($,r),A(S,r),b&&b.d(r);for(let u=0;u<k.length;u+=1)k[u].d()}}}function We(s){let e,t,l,n,o,i,f,a,c,m,_;t=new Q({props:{$$slots:{default:[je]},$$scope:{ctx:s}}}),t.$on("click",s[13]);function E($){s[15]($)}let P={title:"Manage files",$$slots:{default:[Oe]},$$scope:{ctx:s}};return s[4]!==void 0&&(P.open=s[4]),c=new Ee({props:P}),ge.push(()=>we(c,"open",E)),{c(){e=y("div"),B(t.$$.fragment),l=L(),n=y("span"),o=M("Editing file "),i=y("u"),f=M(s[5]),a=L(),B(c.$$.fragment),this.h()},l($){e=v($,"DIV",{style:!0});var h=D(e);U(t.$$.fragment,h),l=C(h),n=v(h,"SPAN",{});var S=D(n);o=j(S,"Editing file "),i=v(S,"U",{});var N=D(i);f=j(N,s[5]),N.forEach(p),S.forEach(p),h.forEach(p),a=C($),U(c.$$.fragment,$),this.h()},h(){ie(e,"display","flex"),ie(e,"align-items","baseline")},m($,h){g($,e,h),Y(t,e,null),I(e,l),I(e,n),I(n,o),I(n,i),I(i,f),g($,a,h),Y(c,$,h),_=!0},p($,[h]){const S={};h&1048576&&(S.$$scope={dirty:h,ctx:$}),t.$set(S),(!_||h&32)&&Z(f,$[5]);const N={};h&1048620&&(N.$$scope={dirty:h,ctx:$}),!m&&h&16&&(m=!0,N.open=$[4],he(()=>m=!1)),c.$set(N)},i($){_||(w(t.$$.fragment,$),w(c.$$.fragment,$),_=!0)},o($){F(t.$$.fragment,$),F(c.$$.fragment,$),_=!1},d($){$&&(p(e),p(a)),A(t),A(c,$)}}}function Xe(s,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",s),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function ze(s,e,t){let l,n=O,o=()=>(n(),n=fe(_,d=>t(16,l=d)),_),i,f=O,a=()=>(f(),f=fe(m,d=>t(5,i=d)),m);s.$$.on_destroy.push(()=>n()),s.$$.on_destroy.push(()=>f());let{files:c}=e,{currentFile:m}=e;a();let{state:_}=e;o();let{xlsxImporter:E}=e,P=c.getFileList(),$=!1;function h(){let d=window.prompt(`Rename file ${i} to what?`,i);if(d){let x=c.key(i),b=window.localStorage.getItem(x);window.localStorage.setItem(c.key(d),b),window.localStorage.removeItem(x),T(m,i=d,i),t(3,P=c.getFileList())}}function S(){Xe(i+".json",JSON.stringify(l))}async function N(){window.confirm(`Really delete file ${i}? You can't undo this.`)&&(window.localStorage.removeItem(c.key(i)),await V())}async function V(){T(m,i=c.newFilename(),i),T(_,l=c.emptyState(),l),window.localStorage.setItem(c.key(i),JSON.stringify(l)),t(3,P=c.getFileList()),await ce(`${me}/${c.prefix}`)}async function G(d,x){let b=d.endsWith(".json")?d.slice(0,-5):d;window.localStorage.setItem(c.key(b),x),t(3,P=c.getFileList()),W(b)}async function W(d){try{let x=c.loadFile(d);T(m,i=d,i),T(_,l=x,l),await ce(`${me}/${c.prefix}`)}catch(x){window.alert(`Couldn't load ${d}: ${x}`)}}const X=()=>t(4,$=!0),J=d=>W(d);function k(d){$=d,t(4,$)}return s.$$set=d=>{"files"in d&&t(12,c=d.files),"currentFile"in d&&a(t(0,m=d.currentFile)),"state"in d&&o(t(1,_=d.state)),"xlsxImporter"in d&&t(2,E=d.xlsxImporter)},[m,_,E,P,$,i,h,S,N,V,G,W,c,X,J,k]}class rt extends oe{constructor(e){super(),se(this,e,ze,We,ne,{files:12,currentFile:0,state:1,xlsxImporter:2})}}export{rt as F};
