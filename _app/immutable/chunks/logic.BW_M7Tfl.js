import{s as P,a as T,e as W,c as N,b as D,o as m,i as h,z as p,A as g,d as y,H as I}from"./scheduler.8Pqdtq9W.js";import{S as M,i as O,c as _,a as b,m as v,t as k,b as B,d as L}from"./index.KrNxZzBh.js";import{F as C,E as U}from"./FormElement.C7qRsTEQ.js";import{v as q}from"./v4.D8aEg3BZ.js";function z(a){let e,i,r,t,s,u,l;return e=new U({props:{errorMessage:a[5](a[2])}}),{c(){_(e.$$.fragment),i=T(),r=W("input"),this.h()},l(n){b(e.$$.fragment,n),i=N(n),r=D(n,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){m(r,"type","text"),m(r,"inputmode","numeric"),m(r,"class",t=`govuk-input govuk-input--width-${a[1]}`),m(r,"id",a[3])},m(n,f){v(e,n,f),h(n,i,f),h(n,r,f),p(r,a[2]),s=!0,u||(l=[g(r,"input",a[9]),g(r,"change",a[4])],u=!0)},p(n,f){const d={};f&4&&(d.errorMessage=n[5](n[2])),e.$set(d),(!s||f&2&&t!==(t=`govuk-input govuk-input--width-${n[1]}`))&&m(r,"class",t),f&4&&r.value!==n[2]&&p(r,n[2])},i(n){s||(k(e.$$.fragment,n),s=!0)},o(n){B(e.$$.fragment,n),s=!1},d(n){n&&(y(i),y(r)),L(e,n),u=!1,I(l)}}}function A(a){let e,i;return e=new C({props:{label:a[0],id:a[3],$$slots:{default:[z]},$$scope:{ctx:a}}}),{c(){_(e.$$.fragment)},l(r){b(e.$$.fragment,r)},m(r,t){v(e,r,t),i=!0},p(r,[t]){const s={};t&1&&(s.label=r[0]),t&1030&&(s.$$scope={dirty:t,ctx:r}),e.$set(s)},i(r){i||(k(e.$$.fragment,r),i=!0)},o(r){B(e.$$.fragment,r),i=!1},d(r){L(e,r)}}}function H(a,e,i){let{label:r}=e,{value:t}=e,{width:s}=e,{min:u=void 0}=e,{max:l=void 0}=e,n=t==null?void 0:t.toString(),f=q();function d(){i(6,t=n==null?void 0:parseInt(n,10))}function S(o){if(o==""||o==null)return"";if(o.includes("."))return"Please enter a number without decimals";let w=Number(o);return isNaN(w)?"Please enter a valid number":u!=null&&w<u?`Please enter a number that's at least ${u};`:l!=null&&w>l?`Please enter a number that's at most ${l};`:""}function E(){n=this.value,i(2,n)}return a.$$set=o=>{"label"in o&&i(0,r=o.label),"value"in o&&i(6,t=o.value),"width"in o&&i(1,s=o.width),"min"in o&&i(7,u=o.min),"max"in o&&i(8,l=o.max)},[r,s,n,f,d,S,t,u,l,E]}class R extends M{constructor(e){super(),O(this,e,H,A,P,{label:0,value:6,width:1,min:7,max:8})}}function j(a,e,i,r,t){switch(a){case"Footway":return[2.6,2];case"Narrow Traffic / Bus Lane":return[3.25,3.25];case"Wide Traffic / Bus Lane":return[4.5,3.9];case"Traffic Lane (no buses): speed limit 20/30":return[3,2.75];case"On-highway advisory/mandatory cycle lane":return[2,1.5];case"1-way protected cycle track":if(!e.flowOneWay)throw new Error("missing input");return{"<200":[2.3,1.8],"200-800":[2.5,2.3],">800":[2.8,2.3]}[e.flowOneWay];case"2-way protected cycle track":if(!e.flowTwoWay)throw new Error("missing input");return{"<300":[3.3,2.3],"300-1,000":[3.3,2.8],">1,000":[4.3,3.3]}[e.flowTwoWay];case"Shared use cycle track":if(!e.flowSharedUse)throw new Error("missing input");return{"<300":[3,3],">300":[4.5,4.5]}[e.flowSharedUse];case"Parking Bay":return[2,1.8];case"Disabled Parking Bay":return[2.7,2.7];case"Loading Bay":return[2.7,1.8];case"Buffer / Verge":{if(!e.speedLimit)throw new Error("missing input");let s=[.5,.5],u=[1.5,1.5],l=0;if(r&&(l+=c[r]),t&&(l+=c[t]),l<=1||l==4||l==10)return s;let n=e.speedLimit=="<30"||e.speedLimit=="30"||e.speedLimit=="40";return r=="Footway"&&t&&c[t]==2||t=="Footway"&&r&&c[r]==2?n?s:u:{"<30":[.5,0],30:[.5,0],40:[1,.5],50:[2,1.5],60:[2.5,2],70:[3.5,3]}[e.speedLimit]}default:if(a.startsWith("custom_")){let s=a.slice(7),u=i[s].width;return[u,u]}throw new Error(`Invalid streetFeature ${a}`)}}let c={Footway:0,"1-way protected cycle track":0,"2-way protected cycle track":0,"Shared use cycle track":0,"Buffer / Verge":1,"Narrow Traffic / Bus Lane":2,"Wide Traffic / Bus Lane":2,"Traffic Lane (no buses): speed limit 20/30":2,"On-highway advisory/mandatory cycle lane":2,"Parking Bay":10,"Disabled Parking Bay":10,"Loading Bay":10};function V(a,e,i){if(c[a]!=0)return"";let r=e&&(c[e]==2||c[e]==10),t=i&&(c[i]==2||c[i]==10);return r&&t?"both":r?"left":t?"right":""}function X(a,e){if(!a||!e)return null;let i=a=="<30"?20:parseInt(a);return e>i*1.1?i+10:i}function Y(a,e){let i=0,r=e=="Desirable"?a.proposed.desirableMinimumCrossSection:a.proposed.absoluteMinimumCrossSection;for(let t=0;t<r.length;t++){let s=r[t];if(!s)continue;let u=t==0?"":r[t-1],l=t==r.length-1?"":r[t+1],n=j(s,a.proposed.trafficData,a.proposed.customFeatures,u,l)[e=="Desirable"?0:1];i+=n}return i}export{R as N,X as a,Y as c,j as g,V as n};
