import{s as P,a as E,e as W,g as N,c as C,r as m,i as p,C as h,z as g,f as y,B as D}from"./scheduler.6N1D-Kb4.js";import{S as M,i as O,c as _,a as b,m as v,t as k,b as B,d as S}from"./index.D0SxPHfj.js";import{F as I,v as U,E as j}from"./FormElement.DvOxJv-F.js";function q(n){let e,t,r,i,s,l,u;return e=new j({props:{errorMessage:n[5](n[2])}}),{c(){_(e.$$.fragment),t=E(),r=W("input"),this.h()},l(a){b(e.$$.fragment,a),t=N(a),r=C(a,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){m(r,"type","text"),m(r,"inputmode","numeric"),m(r,"class",i=`govuk-input govuk-input--width-${n[1]}`),m(r,"id",n[3])},m(a,f){v(e,a,f),p(a,t,f),p(a,r,f),h(r,n[2]),s=!0,l||(u=[g(r,"input",n[9]),g(r,"change",n[4])],l=!0)},p(a,f){const d={};f&4&&(d.errorMessage=a[5](a[2])),e.$set(d),(!s||f&2&&i!==(i=`govuk-input govuk-input--width-${a[1]}`))&&m(r,"class",i),f&4&&r.value!==a[2]&&h(r,a[2])},i(a){s||(k(e.$$.fragment,a),s=!0)},o(a){B(e.$$.fragment,a),s=!1},d(a){a&&(y(t),y(r)),S(e,a),l=!1,D(u)}}}function z(n){let e,t;return e=new I({props:{label:n[0],id:n[3],$$slots:{default:[q]},$$scope:{ctx:n}}}),{c(){_(e.$$.fragment)},l(r){b(e.$$.fragment,r)},m(r,i){v(e,r,i),t=!0},p(r,[i]){const s={};i&1&&(s.label=r[0]),i&1030&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){t||(k(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){S(e,r)}}}function V(n,e,t){let{label:r}=e,{value:i}=e,{width:s}=e,{min:l=void 0}=e,{max:u=void 0}=e,a=i==null?void 0:i.toString(),f=U();function d(){t(6,i=a==null?void 0:Number(a))}function L(o){if(o==""||o==null)return"";let w=Number(o);return isNaN(w)?"Please enter a valid number":l!=null&&w<l?`Please enter a number that's at least ${l};`:u!=null&&w>u?`Please enter a number that's at most ${u};`:""}function T(){a=this.value,t(2,a)}return n.$$set=o=>{"label"in o&&t(0,r=o.label),"value"in o&&t(6,i=o.value),"width"in o&&t(1,s=o.width),"min"in o&&t(7,l=o.min),"max"in o&&t(8,u=o.max)},[r,s,a,f,d,L,i,l,u,T]}class K extends M{constructor(e){super(),O(this,e,V,z,P,{label:0,value:6,width:1,min:7,max:8})}}function A(n,e,t,r,i){switch(n){case"Footway":return[2.6,2];case"Narrow Traffic / Bus Lane":return[3.25,3.25];case"Wide Traffic / Bus Lane":return[4.5,3.9];case"Traffic Lane (no buses): speed limit 20/30":return[3,2.75];case"On-highway advisory/mandatory cycle lane":return[2,1.5];case"1-way protected cycle track":if(!e.flowOneWay)throw new Error("missing input");return{"<200":[2.3,1.8],"200-800":[2.5,2.3],">800":[2.8,2.3]}[e.flowOneWay];case"2-way protected cycle track":if(!e.flowTwoWay)throw new Error("missing input");return{"<300":[3.3,2.3],"300-1,000":[3.3,2.8],">1,000":[4.3,3.3]}[e.flowTwoWay];case"Shared use cycle track":if(!e.flowSharedUse)throw new Error("missing input");return{"<300":[3,3],">300":[4.5,4.5]}[e.flowSharedUse];case"Parking Bay":return[2,1.8];case"Disabled Parking Bay":return[2.7,2.7];case"Loading Bay":return[2.7,1.8];case"Buffer / Verge":{if(!e.speedLimit)throw new Error("missing input");let s=[.5,.5],l=[1.5,1.5],u=0;if(r&&(u+=c(r)),i&&(u+=c(i)),u<=1||u==4||u==10)return s;let a=e.speedLimit=="<30"||e.speedLimit=="30"||e.speedLimit=="40";return r=="Footway"&&i&&c(i)==2||i=="Footway"&&r&&c(r)==2?a?s:l:{"<30":[.5,0],30:[.5,0],40:[1,.5],50:[2,1.5],60:[2.5,2],70:[3.5,3]}[e.speedLimit]}default:{let s=t[n.custom].width;return[s,s]}}}function c(n){return typeof n=="object"?0:{Footway:0,"1-way protected cycle track":0,"2-way protected cycle track":0,"Shared use cycle track":0,"Buffer / Verge":1,"Narrow Traffic / Bus Lane":2,"Wide Traffic / Bus Lane":2,"Traffic Lane (no buses): speed limit 20/30":2,"On-highway advisory/mandatory cycle lane":2,"Parking Bay":10,"Disabled Parking Bay":10,"Loading Bay":10}[n]}function Q(n,e,t){if(c(n)!=0)return"";let r=e&&(c(e)==2||c(e)==10),i=t&&(c(t)==2||c(t)==10);return r&&i?"both":r?"left":i?"right":""}function R(n,e){if(!n||!e)return null;let t=n=="<30"?20:parseInt(n);return e>t*1.1?t+10:t}function X(n,e){let t=e=="Preferred"?n.proposed.desirableMinimumCrossSection:n.proposed.absoluteMinimumCrossSection,r=0,i=0;for(let s=0;s<t.length;s++){let l=t[s];if(!l)continue;let u=s==0?"":t[s-1],a=s==t.length-1?"":t[s+1],f=A(l,n.proposed.trafficData,n.proposed.customFeatures,u,a);r+=f[0],i+=f[1]}return[r,i]}export{K as D,R as a,X as c,A as g,Q as n};
