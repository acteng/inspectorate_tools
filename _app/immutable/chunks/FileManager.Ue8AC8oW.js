import{s as ee,l as $e,e as y,c as v,b as U,f as $,r as H,i as d,u as _e,m as pe,o as de,x as ce,E as me,t as M,a as S,d as R,g as I,v as ge,h as C,j as x,F as be,n as se,S as oe,M as z,p as re,I as X}from"./scheduler.DQXnSe5h.js";import{S as te,i as le,t as L,b as N,c as A,a as D,m as J,d as O,f as he}from"./index.B4AQako7.js";import{e as ae,u as we,d as ke}from"./each.B8wci2m2.js";import{b as ie}from"./paths.B-zplO20.js";import{C as ye}from"./CollapsibleCard.Bt9_rMyo.js";import{F as ve}from"./FormElement.9jXQPbWv.js";import{v as Fe}from"./v4.D8aEg3BZ.js";import{S as Z,W as Ee}from"./WarningButton.CISwBlnQ.js";import{T as Se}from"./TextArea.DGTzGLPf.js";import"./Modal.svelte_svelte_type_style_lang.2NhczJl8.js";import{M as Ie}from"./Modal.cO-kjbJ8.js";function Ce(s){let e,t;const l=s[1].default,n=$e(l,s,s[0],null);return{c(){e=y("div"),n&&n.c(),this.h()},l(o){e=v(o,"DIV",{class:!0});var i=U(e);n&&n.l(i),i.forEach($),this.h()},h(){H(e,"class","govuk-button-group")},m(o,i){d(o,e,i),n&&n.m(e,null),t=!0},p(o,[i]){n&&n.p&&(!t||i&1)&&_e(n,l,o,o[0],t?de(l,o[0],i,null):pe(o[0]),null)},i(o){t||(L(n,o),t=!0)},o(o){N(n,o),t=!1},d(o){o&&$(e),n&&n.d(o)}}}function Le(s,e,t){let{$$slots:l={},$$scope:n}=e;return s.$$set=o=>{"$$scope"in o&&t(0,n=o.$$scope)},[n,l]}class Ne extends te{constructor(e){super(),le(this,e,Le,Ce,ee,{})}}function Me(s){let e,t,l;return{c(){e=y("input"),this.h()},l(n){e=v(n,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){e.disabled=s[1],H(e,"class","govuk-file-upload"),H(e,"id",s[4]),H(e,"type","file")},m(n,o){d(n,e,o),s[6](e),t||(l=ce(e,"change",s[3]),t=!0)},p(n,o){o&2&&(e.disabled=n[1])},d(n){n&&$(e),s[6](null),t=!1,l()}}}function Re(s){let e,t;return e=new ve({props:{label:s[0],id:s[4],$$slots:{default:[Me]},$$scope:{ctx:s}}}),{c(){A(e.$$.fragment)},l(l){D(e.$$.fragment,l)},m(l,n){J(e,l,n),t=!0},p(l,[n]){const o={};n&1&&(o.label=l[0]),n&134&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function je(s,e,t){let{label:l}=e,{onLoad:n}=e,{disabled:o=!1}=e,i;async function a(_){let g=i.files[0].name,w=await i.files[0].text();n(g,w)}let u=Fe();function f(_){me[_?"unshift":"push"](()=>{i=_,t(2,i)})}return s.$$set=_=>{"label"in _&&t(0,l=_.label),"onLoad"in _&&t(5,n=_.onLoad),"disabled"in _&&t(1,o=_.disabled)},[l,o,i,a,u,n,f]}class Ae extends te{constructor(e){super(),le(this,e,je,Re,ee,{label:0,onLoad:5,disabled:1})}}function fe(s,e,t){const l=s.slice();return l[17]=e[t],l}function De(s){let e;return{c(){e=M("Manage files")},l(t){e=R(t,"Manage files")},m(t,l){d(t,e,l)},d(t){t&&$(e)}}}function Je(s){let e;return{c(){e=M("Rename")},l(t){e=R(t,"Rename")},m(t,l){d(t,e,l)},d(t){t&&$(e)}}}function Oe(s){let e;return{c(){e=M("Export")},l(t){e=R(t,"Export")},m(t,l){d(t,e,l)},d(t){t&&$(e)}}}function Pe(s){let e;return{c(){e=M("Delete")},l(t){e=R(t,"Delete")},m(t,l){d(t,e,l)},d(t){t&&$(e)}}}function Ue(s){let e,t,l,n,o,i;return e=new Z({props:{$$slots:{default:[Je]},$$scope:{ctx:s}}}),e.$on("click",s[6]),l=new Z({props:{$$slots:{default:[Oe]},$$scope:{ctx:s}}}),l.$on("click",s[7]),o=new Ee({props:{$$slots:{default:[Pe]},$$scope:{ctx:s}}}),o.$on("click",s[8]),{c(){A(e.$$.fragment),t=S(),A(l.$$.fragment),n=S(),A(o.$$.fragment)},l(a){D(e.$$.fragment,a),t=I(a),D(l.$$.fragment,a),n=I(a),D(o.$$.fragment,a)},m(a,u){J(e,a,u),d(a,t,u),J(l,a,u),d(a,n,u),J(o,a,u),i=!0},p(a,u){const f={};u&1048576&&(f.$$scope={dirty:u,ctx:a}),e.$set(f);const _={};u&1048576&&(_.$$scope={dirty:u,ctx:a}),l.$set(_);const g={};u&1048576&&(g.$$scope={dirty:u,ctx:a}),o.$set(g)},i(a){i||(L(e.$$.fragment,a),L(l.$$.fragment,a),L(o.$$.fragment,a),i=!0)},o(a){N(e.$$.fragment,a),N(l.$$.fragment,a),N(o.$$.fragment,a),i=!1},d(a){a&&($(t),$(n)),O(e,a),O(l,a),O(o,a)}}}function Ye(s){let e,t;return e=new Se({props:{label:"JSON",value:JSON.stringify(s[4],null,"  "),rows:10}}),{c(){A(e.$$.fragment)},l(l){D(e.$$.fragment,l)},m(l,n){J(e,l,n),t=!0},p(l,n){const o={};n&16&&(o.value=JSON.stringify(l[4],null,"  ")),e.$set(o)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Be(s){let e;return{c(){e=M("New file")},l(t){e=R(t,"New file")},m(t,l){d(t,e,l)},d(t){t&&$(e)}}}function Te(s){let e,t,l=s[17]+"",n,o,i;function a(){return s[15](s[17])}return{c(){e=y("li"),t=y("a"),n=M(l),this.h()},l(u){e=v(u,"LI",{});var f=U(e);t=v(f,"A",{href:!0});var _=U(t);n=R(_,l),_.forEach($),f.forEach($),this.h()},h(){H(t,"href","#")},m(u,f){d(u,e,f),C(e,t),C(t,n),o||(i=ce(t,"click",a),o=!0)},p(u,f){s=u,f&4&&l!==(l=s[17]+"")&&x(n,l)},d(u){u&&$(e),o=!1,i()}}}function We(s){let e,t=s[17]+"",l;return{c(){e=y("li"),l=M(t)},l(n){e=v(n,"LI",{});var o=U(e);l=R(o,t),o.forEach($)},m(n,o){d(n,e,o),C(e,l)},p(n,o){o&4&&t!==(t=n[17]+"")&&x(l,t)},d(n){n&&$(e)}}}function ue(s,e){let t,l;function n(a,u){return a[17]==a[5]?We:Te}let o=n(e),i=o(e);return{key:s,first:null,c(){t=X(),i.c(),l=X(),this.h()},l(a){t=X(),i.l(a),l=X(),this.h()},h(){this.first=t},m(a,u){d(a,t,u),i.m(a,u),d(a,l,u)},p(a,u){e=a,o===(o=n(e))&&i?i.p(e,u):(i.d(1),i=o(e),i&&(i.c(),i.m(l.parentNode,l)))},d(a){a&&($(t),$(l)),i.d(a)}}}function Ge(s){let e,t=`All files are auto-saved in your browser's local storage. You can close your
    browser and resume later. You can export the file to your computer to share
    with someone else, and import from a file below.`,l,n,o,i,a,u,f,_,g,w,E,p,b,h,k,Y,W,B,K="Load a saved file:",G,T,c=[],j=new Map,P;_=new Ne({props:{$$slots:{default:[Ue]},$$scope:{ctx:s}}}),w=new ye({props:{label:"Debug",$$slots:{default:[Ye]},$$scope:{ctx:s}}}),h=new Z({props:{$$slots:{default:[Be]},$$scope:{ctx:s}}}),h.$on("click",s[14]),Y=new Ae({props:{label:"Import from file",onLoad:s[10]}});let Q=ae(s[2]);const ne=r=>r[17];for(let r=0;r<Q.length;r+=1){let m=fe(s,Q,r),F=ne(m);j.set(F,c[r]=ue(F,m))}return{c(){e=y("p"),e.textContent=t,l=S(),n=y("p"),o=M("You're currently editing "),i=y("u"),a=M(s[5]),u=M(`
    .`),f=S(),A(_.$$.fragment),g=S(),A(w.$$.fragment),E=S(),p=y("hr"),b=S(),A(h.$$.fragment),k=S(),A(Y.$$.fragment),W=S(),B=y("p"),B.textContent=K,G=S(),T=y("ul");for(let r=0;r<c.length;r+=1)c[r].c()},l(r){e=v(r,"P",{"data-svelte-h":!0}),re(e)!=="svelte-1yvzirp"&&(e.textContent=t),l=I(r),n=v(r,"P",{});var m=U(n);o=R(m,"You're currently editing "),i=v(m,"U",{});var F=U(i);a=R(F,s[5]),F.forEach($),u=R(m,`
    .`),m.forEach($),f=I(r),D(_.$$.fragment,r),g=I(r),D(w.$$.fragment,r),E=I(r),p=v(r,"HR",{}),b=I(r),D(h.$$.fragment,r),k=I(r),D(Y.$$.fragment,r),W=I(r),B=v(r,"P",{"data-svelte-h":!0}),re(B)!=="svelte-1xydj1w"&&(B.textContent=K),G=I(r),T=v(r,"UL",{});var q=U(T);for(let V=0;V<c.length;V+=1)c[V].l(q);q.forEach($)},m(r,m){d(r,e,m),d(r,l,m),d(r,n,m),C(n,o),C(n,i),C(i,a),C(n,u),d(r,f,m),J(_,r,m),d(r,g,m),J(w,r,m),d(r,E,m),d(r,p,m),d(r,b,m),J(h,r,m),d(r,k,m),J(Y,r,m),d(r,W,m),d(r,B,m),d(r,G,m),d(r,T,m);for(let F=0;F<c.length;F+=1)c[F]&&c[F].m(T,null);P=!0},p(r,m){(!P||m&32)&&x(a,r[5]);const F={};m&1048576&&(F.$$scope={dirty:m,ctx:r}),_.$set(F);const q={};m&1048592&&(q.$$scope={dirty:m,ctx:r}),w.$set(q);const V={};m&1048576&&(V.$$scope={dirty:m,ctx:r}),h.$set(V),m&2084&&(Q=ae(r[2]),c=we(c,m,ne,1,r,Q,j,T,ke,ue,null,fe))},i(r){P||(L(_.$$.fragment,r),L(w.$$.fragment,r),L(h.$$.fragment,r),L(Y.$$.fragment,r),P=!0)},o(r){N(_.$$.fragment,r),N(w.$$.fragment,r),N(h.$$.fragment,r),N(Y.$$.fragment,r),P=!1},d(r){r&&($(e),$(l),$(n),$(f),$(g),$(E),$(p),$(b),$(k),$(W),$(B),$(G),$(T)),O(_,r),O(w,r),O(h,r),O(Y,r);for(let m=0;m<c.length;m+=1)c[m].d()}}}function Ve(s){let e,t,l,n,o,i,a,u,f,_,g;a=new Z({props:{$$slots:{default:[De]},$$scope:{ctx:s}}}),a.$on("click",s[13]);function w(p){s[16](p)}let E={title:"Manage files",$$slots:{default:[Ge]},$$scope:{ctx:s}};return s[3]!==void 0&&(E.open=s[3]),f=new Ie({props:E}),me.push(()=>he(f,"open",w)),{c(){e=y("div"),t=y("p"),l=M("Editing file "),n=y("u"),o=M(s[5]),i=S(),A(a.$$.fragment),u=S(),A(f.$$.fragment),this.h()},l(p){e=v(p,"DIV",{style:!0});var b=U(e);t=v(b,"P",{});var h=U(t);l=R(h,"Editing file "),n=v(h,"U",{});var k=U(n);o=R(k,s[5]),k.forEach($),h.forEach($),i=I(b),D(a.$$.fragment,b),b.forEach($),u=I(p),D(f.$$.fragment,p),this.h()},h(){ge(e,"display","flex")},m(p,b){d(p,e,b),C(e,t),C(t,l),C(t,n),C(n,o),C(e,i),J(a,e,null),d(p,u,b),J(f,p,b),g=!0},p(p,[b]){(!g||b&32)&&x(o,p[5]);const h={};b&1048576&&(h.$$scope={dirty:b,ctx:p}),a.$set(h);const k={};b&1048628&&(k.$$scope={dirty:b,ctx:p}),!_&&b&8&&(_=!0,k.open=p[3],be(()=>_=!1)),f.$set(k)},i(p){g||(L(a.$$.fragment,p),L(f.$$.fragment,p),g=!0)},o(p){N(a.$$.fragment,p),N(f.$$.fragment,p),g=!1},d(p){p&&($(e),$(u)),O(a),O(f,p)}}}function qe(s,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",s),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function ze(s,e,t){let l,n=se,o=()=>(n(),n=oe(g,c=>t(4,l=c)),g),i,a=se,u=()=>(a(),a=oe(_,c=>t(5,i=c)),_);s.$$.on_destroy.push(()=>n()),s.$$.on_destroy.push(()=>a());let{files:f}=e,{currentFile:_}=e;u();let{state:g}=e;o();let w=f.getFileList(),E=!1;function p(){let c=window.prompt(`Rename file ${i} to what?`,i);if(c){let j=f.key(i),P=window.localStorage.getItem(j);window.localStorage.setItem(f.key(c),P),window.localStorage.removeItem(j),z(_,i=c,i),t(2,w=f.getFileList())}}function b(){qe(i+".json",JSON.stringify(l))}function h(){window.confirm(`Really delete file ${i}? You can't undo this.`)&&(window.localStorage.removeItem(f.key(i)),k())}function k(){z(_,i=f.newFilename(),i),z(g,l=f.emptyState(),l),window.localStorage.setItem(f.key(i),JSON.stringify(l)),t(2,w=f.getFileList()),window.location.replace(`${ie}/${f.prefix}`)}function Y(c,j){let P=c.endsWith(".json")?c.slice(0,-5):c;window.localStorage.setItem(f.key(P),j),t(2,w=f.getFileList()),W(P)}function W(c){try{let j=f.loadFile(c);z(_,i=c,i),z(g,l=j,l),window.location.replace(`${ie}/${f.prefix}`)}catch(j){window.alert(`Couldn't load ${c}: ${j}`)}}const B=()=>t(3,E=!0),K=()=>k(),G=c=>W(c);function T(c){E=c,t(3,E)}return s.$$set=c=>{"files"in c&&t(12,f=c.files),"currentFile"in c&&u(t(0,_=c.currentFile)),"state"in c&&o(t(1,g=c.state))},[_,g,w,E,l,i,p,b,h,k,Y,W,f,B,K,G,T]}class ot extends te{constructor(e){super(),le(this,e,ze,Ve,ee,{files:12,currentFile:0,state:1})}}export{ot as F};
