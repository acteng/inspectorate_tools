import{s as ce,p as $e,e as M,a as C,t as L,c as R,b as U,g as E,d as N,f as m,q as te,i as g,h as j,j as x,r as me,n as Z,v as ne,w as K,x as le,y as X}from"./scheduler.Df2b4kyB.js";import{S as _e,i as pe,e as de,c as A,a as J,m as O,t as v,b as F,d as Y,g as fe,f as ue}from"./index.BhHoql2r.js";import{e as oe,u as ge,o as be}from"./each.DOwRpua6.js";import{g as se}from"./entry.DxWtXc6G.js";import{b as re}from"./paths.CLFKt4_x.js";import{B as we}from"./ButtonGroup.DeR9Ih67.js";import{C as he}from"./CollapsibleCard.DcTyCB_v.js";import{F as ke}from"./FileInput.BX45GMaO.js";import{S as V,W as ye}from"./WarningButton.DP3uDuvY.js";import{T as ve}from"./TextArea.BbHO2g9n.js";import{M as Fe}from"./Modal.CPdZtOi0.js";function ae(r,e,t){const n=r.slice();return n[16]=e[t],n}function Se(r){let e;return{c(){e=L("Manage files")},l(t){e=N(t,"Manage files")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Ce(r){let e;return{c(){e=L("Rename")},l(t){e=N(t,"Rename")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Ee(r){let e;return{c(){e=L("Export")},l(t){e=N(t,"Export")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Ie(r){let e;return{c(){e=L("Delete")},l(t){e=N(t,"Delete")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Le(r){let e,t,n,o,f,a;return e=new V({props:{$$slots:{default:[Ce]},$$scope:{ctx:r}}}),e.$on("click",r[6]),n=new V({props:{$$slots:{default:[Ee]},$$scope:{ctx:r}}}),n.$on("click",r[7]),f=new ye({props:{$$slots:{default:[Ie]},$$scope:{ctx:r}}}),f.$on("click",r[8]),{c(){A(e.$$.fragment),t=C(),A(n.$$.fragment),o=C(),A(f.$$.fragment)},l(s){J(e.$$.fragment,s),t=E(s),J(n.$$.fragment,s),o=E(s),J(f.$$.fragment,s)},m(s,$){O(e,s,$),g(s,t,$),O(n,s,$),g(s,o,$),O(f,s,$),a=!0},p(s,$){const c={};$&524288&&(c.$$scope={dirty:$,ctx:s}),e.$set(c);const u={};$&524288&&(u.$$scope={dirty:$,ctx:s}),n.$set(u);const d={};$&524288&&(d.$$scope={dirty:$,ctx:s}),f.$set(d)},i(s){a||(v(e.$$.fragment,s),v(n.$$.fragment,s),v(f.$$.fragment,s),a=!0)},o(s){F(e.$$.fragment,s),F(n.$$.fragment,s),F(f.$$.fragment,s),a=!1},d(s){s&&(m(t),m(o)),Y(e,s),Y(n,s),Y(f,s)}}}function Ne(r){let e,t;return e=new ve({props:{label:"JSON",value:JSON.stringify(r[4],null,"  "),rows:10}}),{c(){A(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,o){O(e,n,o),t=!0},p(n,o){const f={};o&16&&(f.value=JSON.stringify(n[4],null,"  ")),e.$set(f)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function Me(r){let e;return{c(){e=L("New file")},l(t){e=N(t,"New file")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Re(r){let e,t,n,o;function f(){return r[14](r[16])}return t=new V({props:{$$slots:{default:[Ae]},$$scope:{ctx:r}}}),t.$on("click",f),{c(){e=M("li"),A(t.$$.fragment),n=C()},l(a){e=R(a,"LI",{});var s=U(e);J(t.$$.fragment,s),n=E(s),s.forEach(m)},m(a,s){g(a,e,s),O(t,e,null),j(e,n),o=!0},p(a,s){r=a;const $={};s&524292&&($.$$scope={dirty:s,ctx:r}),t.$set($)},i(a){o||(v(t.$$.fragment,a),o=!0)},o(a){F(t.$$.fragment,a),o=!1},d(a){a&&m(e),Y(t)}}}function je(r){let e,t=r[16]+"",n;return{c(){e=M("li"),n=L(t)},l(o){e=R(o,"LI",{});var f=U(e);n=N(f,t),f.forEach(m)},m(o,f){g(o,e,f),j(e,n)},p(o,f){f&4&&t!==(t=o[16]+"")&&x(n,t)},i:Z,o:Z,d(o){o&&m(e)}}}function Ae(r){let e=r[16]+"",t;return{c(){t=L(e)},l(n){t=N(n,e)},m(n,o){g(n,t,o)},p(n,o){o&4&&e!==(e=n[16]+"")&&x(t,e)},d(n){n&&m(t)}}}function ie(r,e){let t,n,o,f,a;const s=[je,Re],$=[];function c(u,d){return u[16]==u[5]?0:1}return n=c(e),o=$[n]=s[n](e),{key:r,first:null,c(){t=X(),o.c(),f=X(),this.h()},l(u){t=X(),o.l(u),f=X(),this.h()},h(){this.first=t},m(u,d){g(u,t,d),$[n].m(u,d),g(u,f,d),a=!0},p(u,d){e=u;let h=n;n=c(e),n===h?$[n].p(e,d):(fe(),F($[h],1,1,()=>{$[h]=null}),ue(),o=$[n],o?o.p(e,d):(o=$[n]=s[n](e),o.c()),v(o,1),o.m(f.parentNode,f))},i(u){a||(v(o),a=!0)},o(u){F(o),a=!1},d(u){u&&(m(t),m(f)),$[n].d(u)}}}function Je(r){let e,t=`All files are auto-saved in your browser's local storage. You can close your
    browser and resume later. You can export the file to your computer to share
    with someone else, and import from a file below.`,n,o,f,a,s,$,c,u,d,h,I,p,w,k,y,B,P,D,Q="Load a saved file:",q,_,b=[],W=new Map,T;u=new we({props:{$$slots:{default:[Le]},$$scope:{ctx:r}}}),h=new he({props:{label:"Debug",$$slots:{default:[Ne]},$$scope:{ctx:r}}}),k=new V({props:{$$slots:{default:[Me]},$$scope:{ctx:r}}}),k.$on("click",r[9]),B=new ke({props:{label:"Import from file",onLoad:r[10]}});let z=oe(r[2]);const ee=l=>l[16];for(let l=0;l<z.length;l+=1){let i=ae(r,z,l),S=ee(i);W.set(S,b[l]=ie(S,i))}return{c(){e=M("p"),e.textContent=t,n=C(),o=M("p"),f=L("You're currently editing "),a=M("u"),s=L(r[5]),$=L(`
    .`),c=C(),A(u.$$.fragment),d=C(),A(h.$$.fragment),I=C(),p=M("hr"),w=C(),A(k.$$.fragment),y=C(),A(B.$$.fragment),P=C(),D=M("p"),D.textContent=Q,q=C(),_=M("ul");for(let l=0;l<b.length;l+=1)b[l].c()},l(l){e=R(l,"P",{"data-svelte-h":!0}),le(e)!=="svelte-1yvzirp"&&(e.textContent=t),n=E(l),o=R(l,"P",{});var i=U(o);f=N(i,"You're currently editing "),a=R(i,"U",{});var S=U(a);s=N(S,r[5]),S.forEach(m),$=N(i,`
    .`),i.forEach(m),c=E(l),J(u.$$.fragment,l),d=E(l),J(h.$$.fragment,l),I=E(l),p=R(l,"HR",{}),w=E(l),J(k.$$.fragment,l),y=E(l),J(B.$$.fragment,l),P=E(l),D=R(l,"P",{"data-svelte-h":!0}),le(D)!=="svelte-1xydj1w"&&(D.textContent=Q),q=E(l),_=R(l,"UL",{});var H=U(_);for(let G=0;G<b.length;G+=1)b[G].l(H);H.forEach(m)},m(l,i){g(l,e,i),g(l,n,i),g(l,o,i),j(o,f),j(o,a),j(a,s),j(o,$),g(l,c,i),O(u,l,i),g(l,d,i),O(h,l,i),g(l,I,i),g(l,p,i),g(l,w,i),O(k,l,i),g(l,y,i),O(B,l,i),g(l,P,i),g(l,D,i),g(l,q,i),g(l,_,i);for(let S=0;S<b.length;S+=1)b[S]&&b[S].m(_,null);T=!0},p(l,i){(!T||i&32)&&x(s,l[5]);const S={};i&524288&&(S.$$scope={dirty:i,ctx:l}),u.$set(S);const H={};i&524304&&(H.$$scope={dirty:i,ctx:l}),h.$set(H);const G={};i&524288&&(G.$$scope={dirty:i,ctx:l}),k.$set(G),i&2084&&(z=oe(l[2]),fe(),b=ge(b,i,ee,1,l,z,W,_,be,ie,null,ae),ue())},i(l){if(!T){v(u.$$.fragment,l),v(h.$$.fragment,l),v(k.$$.fragment,l),v(B.$$.fragment,l);for(let i=0;i<z.length;i+=1)v(b[i]);T=!0}},o(l){F(u.$$.fragment,l),F(h.$$.fragment,l),F(k.$$.fragment,l),F(B.$$.fragment,l);for(let i=0;i<b.length;i+=1)F(b[i]);T=!1},d(l){l&&(m(e),m(n),m(o),m(c),m(d),m(I),m(p),m(w),m(y),m(P),m(D),m(q),m(_)),Y(u,l),Y(h,l),Y(k,l),Y(B,l);for(let i=0;i<b.length;i+=1)b[i].d()}}}function Oe(r){let e,t,n,o,f,a,s,$,c,u,d;t=new V({props:{$$slots:{default:[Se]},$$scope:{ctx:r}}}),t.$on("click",r[13]);function h(p){r[15](p)}let I={title:"Manage files",$$slots:{default:[Je]},$$scope:{ctx:r}};return r[3]!==void 0&&(I.open=r[3]),c=new Fe({props:I}),$e.push(()=>de(c,"open",h)),{c(){e=M("div"),A(t.$$.fragment),n=C(),o=M("span"),f=L("Editing file "),a=M("u"),s=L(r[5]),$=C(),A(c.$$.fragment),this.h()},l(p){e=R(p,"DIV",{style:!0});var w=U(e);J(t.$$.fragment,w),n=E(w),o=R(w,"SPAN",{});var k=U(o);f=N(k,"Editing file "),a=R(k,"U",{});var y=U(a);s=N(y,r[5]),y.forEach(m),k.forEach(m),w.forEach(m),$=E(p),J(c.$$.fragment,p),this.h()},h(){te(e,"display","flex"),te(e,"align-items","baseline")},m(p,w){g(p,e,w),O(t,e,null),j(e,n),j(e,o),j(o,f),j(o,a),j(a,s),g(p,$,w),O(c,p,w),d=!0},p(p,[w]){const k={};w&524288&&(k.$$scope={dirty:w,ctx:p}),t.$set(k),(!d||w&32)&&x(s,p[5]);const y={};w&524340&&(y.$$scope={dirty:w,ctx:p}),!u&&w&8&&(u=!0,y.open=p[3],me(()=>u=!1)),c.$set(y)},i(p){d||(v(t.$$.fragment,p),v(c.$$.fragment,p),d=!0)},o(p){F(t.$$.fragment,p),F(c.$$.fragment,p),d=!1},d(p){p&&(m(e),m($)),Y(t),Y(c,p)}}}function Ye(r,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",r),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Be(r,e,t){let n,o=Z,f=()=>(o(),o=ne(d,_=>t(4,n=_)),d),a,s=Z,$=()=>(s(),s=ne(u,_=>t(5,a=_)),u);r.$$.on_destroy.push(()=>o()),r.$$.on_destroy.push(()=>s());let{files:c}=e,{currentFile:u}=e;$();let{state:d}=e;f();let h=c.getFileList(),I=!1;function p(){let _=window.prompt(`Rename file ${a} to what?`,a);if(_){let b=c.key(a),W=window.localStorage.getItem(b);window.localStorage.setItem(c.key(_),W),window.localStorage.removeItem(b),K(u,a=_,a),t(2,h=c.getFileList())}}function w(){Ye(a+".json",JSON.stringify(n))}async function k(){window.confirm(`Really delete file ${a}? You can't undo this.`)&&(window.localStorage.removeItem(c.key(a)),await y())}async function y(){K(u,a=c.newFilename(),a),K(d,n=c.emptyState(),n),window.localStorage.setItem(c.key(a),JSON.stringify(n)),t(2,h=c.getFileList()),await se(`${re}/${c.prefix}`)}async function B(_,b){let W=_.endsWith(".json")?_.slice(0,-5):_;window.localStorage.setItem(c.key(W),b),t(2,h=c.getFileList()),P(W)}async function P(_){try{let b=c.loadFile(_);K(u,a=_,a),K(d,n=b,n),await se(`${re}/${c.prefix}`)}catch(b){window.alert(`Couldn't load ${_}: ${b}`)}}const D=()=>t(3,I=!0),Q=_=>P(_);function q(_){I=_,t(3,I)}return r.$$set=_=>{"files"in _&&t(12,c=_.files),"currentFile"in _&&$(t(0,u=_.currentFile)),"state"in _&&f(t(1,d=_.state))},[u,d,h,I,n,a,p,w,k,y,B,P,c,D,Q,q]}class Qe extends _e{constructor(e){super(),pe(this,e,Be,Oe,ce,{files:12,currentFile:0,state:1})}}export{Qe as F};
