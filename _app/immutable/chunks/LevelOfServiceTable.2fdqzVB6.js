import{s as re,e as _,a as A,t as M,c as C,b as E,p as Y,g as H,d as w,f as P,r as N,i as ae,h as a,j,n as Z,q as ne}from"./scheduler.Bsni_e59.js";import{e as $}from"./each.BmgwAlbi.js";import{S as ce,i as oe}from"./index.CCfAUppz.js";import{s as K}from"./index.B4JKS2Xe.js";import{n as ie}from"./data.3uKIeKJb.js";function ge(e){let t=e.summary.checkType=="street",s=e.summary.checkType=="path",o=i("Safety",e.safetyCheck,null),r=[o];t?(r.push(i("Accessibility",e.streetCheck,[0,6])),r.push(i("Comfort",e.streetCheck,[7,9])),r.push(i("Directness",e.streetCheck,[10,15])),r.push(i("Attractiveness",e.streetCheck,[16,21])),r.push(i("Cohesion",e.streetCheck,[22,25]))):s&&(r.push(i("Accessibility",e.pathCheck,[0,4])),r.push(i("Comfort",e.pathCheck,[5,15])),r.push(i("Directness",e.pathCheck,[16,19])),r.push(i("Attractiveness",e.pathCheck,[20,24])),r.push(i("Cohesion",e.pathCheck,[25,29])));let h={category:"overall",existing:G(r.map(n=>n.existing)),proposed:G(r.map(n=>n.proposed))},l=[];t?(l.push(i("Social activity",e.streetPlacemakingCheck,[0,2])),l.push(i("Personal security",e.streetPlacemakingCheck,[3,5])),l.push(i("Character and legibility",e.streetPlacemakingCheck,[6,15])),l.push(i("Environment",e.streetPlacemakingCheck,[16,25]))):s&&l.push(i("Social activity",e.pathPlacemakingCheck,[0,2]),i("Personal security",e.pathPlacemakingCheck,[3,5]),i("Character and legibility",e.pathPlacemakingCheck,[6,9]),i("Environment",e.pathPlacemakingCheck,[10,18]));let g={category:"overall",existing:G(l.map(n=>n.existing)),proposed:G(l.map(n=>n.proposed))},m=[];return{safetyCheck:o,streetCheck:t?te(o,i("",e.streetCheck,null)):null,streetPlacemaking:t?i("",e.streetPlacemakingCheck,null):null,pathCheck:s?te(o,i("",e.pathCheck,null)):null,pathPlacemaking:s?i("",e.pathPlacemakingCheck,null):null,levelOfService:r,overall:h,placemakingCategories:l,placemakingOverall:g,byMode:m}}function i(e,t,s){return{category:e,existing:ee(t.existingScores,e,s),proposed:ee(t.proposedScores,e,s)}}function ee(e,t,s){let o=s||[0,e.length-1],r=o[0],h=o[1]+1,l=e.slice(r,h).filter(v=>v!="N/A").length,g=t=="Safety"?3:1,m=l*2*g,n=g*K(e.slice(r,h).map(ie)),b=n/m*100;return{numberMetrics:l,totalPossibleScore:m,score:n,scorePercent:b}}function G(e){let t=K(e.map(h=>h.numberMetrics)),s=K(e.map(h=>h.totalPossibleScore)),o=K(e.map(h=>h.score)),r=o/s*100;return{numberMetrics:t,totalPossibleScore:s,score:o,scorePercent:r}}function te(e,t){return{category:"",existing:G([e.existing,t.existing]),proposed:G([e.proposed,t.proposed])}}function Q(e){return`${Math.round(e.proposed.scorePercent-e.existing.scorePercent)}%`}function le(e,t,s){const o=e.slice();return o[3]=t[s],o}function se(e){let t,s,o=e[3].category+"",r,h,l,g=Math.round(e[3].existing.scorePercent)+"",m,n,b,v,R=Math.round(e[3].proposed.scorePercent)+"",T,D,O,S,x=Q(e[3])+"",y;return{c(){t=_("tr"),s=_("th"),r=M(o),h=A(),l=_("td"),m=M(g),n=M("%"),b=A(),v=_("td"),T=M(R),D=M("%"),O=A(),S=_("td"),y=M(x),this.h()},l(k){t=C(k,"TR",{});var f=E(t);s=C(f,"TH",{class:!0});var z=E(s);r=w(z,o),z.forEach(P),h=H(f),l=C(f,"TD",{class:!0});var B=E(l);m=w(B,g),n=w(B,"%"),B.forEach(P),b=H(f),v=C(f,"TD",{class:!0});var L=E(v);T=w(L,R),D=w(L,"%"),L.forEach(P),O=H(f),S=C(f,"TD",{class:!0});var q=E(S);y=w(q,x),q.forEach(P),f.forEach(P),this.h()},h(){N(s,"class","svelte-11aw7fk"),N(l,"class","svelte-11aw7fk"),N(v,"class","svelte-11aw7fk"),N(S,"class","svelte-11aw7fk")},m(k,f){ae(k,t,f),a(t,s),a(s,r),a(t,h),a(t,l),a(l,m),a(l,n),a(t,b),a(t,v),a(v,T),a(v,D),a(t,O),a(t,S),a(S,y)},p(k,f){f&1&&o!==(o=k[3].category+"")&&j(r,o),f&1&&g!==(g=Math.round(k[3].existing.scorePercent)+"")&&j(m,g),f&1&&R!==(R=Math.round(k[3].proposed.scorePercent)+"")&&j(T,R),f&1&&x!==(x=Q(k[3])+"")&&j(y,x)},d(k){k&&P(t)}}}function he(e){let t,s,o='<th class="svelte-11aw7fk">Categories</th> <th class="svelte-11aw7fk">Existing Layout</th> <th class="svelte-11aw7fk">Proposed Layout</th> <th class="svelte-11aw7fk">Net difference</th>',r,h,l,g='<th class="svelte-11aw7fk">Â </th> <th class="svelte-11aw7fk"></th> <th class="svelte-11aw7fk"></th> <th class="svelte-11aw7fk"></th>',m,n,b,v,R,T,D=Math.round(e[1].existing.scorePercent)+"",O,S,x,y,k=Math.round(e[1].proposed.scorePercent)+"",f,z,B,L,q=Q(e[1])+"",J,F=$(e[0]),p=[];for(let u=0;u<F.length;u+=1)p[u]=se(le(e,F,u));return{c(){t=_("table"),s=_("tr"),s.innerHTML=o,r=A();for(let u=0;u<p.length;u+=1)p[u].c();h=A(),l=_("tr"),l.innerHTML=g,m=A(),n=_("tr"),b=_("th"),v=M(e[2]),R=A(),T=_("td"),O=M(D),S=M("%"),x=A(),y=_("td"),f=M(k),z=M("%"),B=A(),L=_("td"),J=M(q),this.h()},l(u){t=C(u,"TABLE",{});var d=E(t);s=C(d,"TR",{"data-svelte-h":!0}),Y(s)!=="svelte-29rbbt"&&(s.innerHTML=o),r=H(d);for(let W=0;W<p.length;W+=1)p[W].l(d);h=H(d),l=C(d,"TR",{"data-svelte-h":!0}),Y(l)!=="svelte-fsb26u"&&(l.innerHTML=g),m=H(d),n=C(d,"TR",{});var c=E(n);b=C(c,"TH",{class:!0});var I=E(b);v=w(I,e[2]),I.forEach(P),R=H(c),T=C(c,"TD",{class:!0});var U=E(T);O=w(U,D),S=w(U,"%"),U.forEach(P),x=H(c),y=C(c,"TD",{class:!0});var V=E(y);f=w(V,k),z=w(V,"%"),V.forEach(P),B=H(c),L=C(c,"TD",{class:!0});var X=E(L);J=w(X,q),X.forEach(P),c.forEach(P),d.forEach(P),this.h()},h(){N(b,"class","svelte-11aw7fk"),N(T,"class","svelte-11aw7fk"),N(y,"class","svelte-11aw7fk"),N(L,"class","svelte-11aw7fk")},m(u,d){ae(u,t,d),a(t,s),a(t,r);for(let c=0;c<p.length;c+=1)p[c]&&p[c].m(t,null);a(t,h),a(t,l),a(t,m),a(t,n),a(n,b),a(b,v),a(n,R),a(n,T),a(T,O),a(T,S),a(n,x),a(n,y),a(y,f),a(y,z),a(n,B),a(n,L),a(L,J)},p(u,[d]){if(d&1){F=$(u[0]);let c;for(c=0;c<F.length;c+=1){const I=le(u,F,c);p[c]?p[c].p(I,d):(p[c]=se(I),p[c].c(),p[c].m(t,h))}for(;c<p.length;c+=1)p[c].d(1);p.length=F.length}d&4&&j(v,u[2]),d&2&&D!==(D=Math.round(u[1].existing.scorePercent)+"")&&j(O,D),d&2&&k!==(k=Math.round(u[1].proposed.scorePercent)+"")&&j(f,k),d&2&&q!==(q=Q(u[1])+"")&&j(J,q)},i:Z,o:Z,d(u){u&&P(t),ne(p,u)}}}function ue(e,t,s){let{categories:o}=t,{overall:r}=t,{overallLabel:h}=t;return e.$$set=l=>{"categories"in l&&s(0,o=l.categories),"overall"in l&&s(1,r=l.overall),"overallLabel"in l&&s(2,h=l.overallLabel)},[o,r,h]}class me extends ce{constructor(t){super(),oe(this,t,ue,he,re,{categories:0,overall:1,overallLabel:2})}}export{me as L,ge as g,Q as n};
