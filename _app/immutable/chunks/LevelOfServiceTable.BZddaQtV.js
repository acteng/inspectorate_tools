import{s as ae,e as g,a as H,t as T,c as k,b as L,p as Y,g as x,d as w,f as _,r as O,i as re,h as l,j,n as Z,q as ne}from"./scheduler.Bsni_e59.js";import{e as $}from"./each.BmgwAlbi.js";import{S as oe,i as ce}from"./index.CCfAUppz.js";import{s as J}from"./index.F4wDJvP0.js";import{n as ie}from"./data.DF9_frvF.js";function ge(e){let t=e.summary.checkType=="street",s=e.summary.checkType=="path",o=v("Safety",e.safetyCheck,null),r=[o];t?(r.push(v("Accessibility",e.streetCheck,[0,6])),r.push(v("Comfort",e.streetCheck,[7,9])),r.push(v("Directness",e.streetCheck,[10,15])),r.push(v("Attractiveness",e.streetCheck,[16,21])),r.push(v("Cohesion",e.streetCheck,[22,25]))):s&&(r.push(v("Accessibility",e.pathCheck,[0,4])),r.push(v("Comfort",e.pathCheck,[5,15])),r.push(v("Directness",e.pathCheck,[16,19])),r.push(v("Attractiveness",e.pathCheck,[20,24])),r.push(v("Cohesion",e.pathCheck,[25,29])));let c={category:"overall",existing:K(r.map(a=>a.existing)),proposed:K(r.map(a=>a.proposed))};return{safetyCheck:o,streetCheck:t?te(o,v("",e.streetCheck,null)):null,streetPlacemaking:t?v("",e.streetPlacemakingCheck,null):null,pathCheck:s?te(o,v("",e.pathCheck,null)):null,pathPlacemaking:s?v("",e.pathPlacemakingCheck,null):null,levelOfService:r,overall:c}}function v(e,t,s){return{category:e,existing:ee(t.existingScores,e,s),proposed:ee(t.proposedScores,e,s)}}function ee(e,t,s){let o=s||[0,e.length-1],r=o[0],c=o[1]+1,a=e.slice(r,c).filter(m=>m!="N/A").length,M=t=="Safety"?3:1,E=a*2*M,u=M*J(e.slice(r,c).map(ie)),C=u/E*100;return{numberMetrics:a,totalPossibleScore:E,score:u,scorePercent:C}}function K(e){let t=J(e.map(c=>c.numberMetrics)),s=J(e.map(c=>c.totalPossibleScore)),o=J(e.map(c=>c.score)),r=o/s*100;return{numberMetrics:t,totalPossibleScore:s,score:o,scorePercent:r}}function te(e,t){return{category:"",existing:K([e.existing,t.existing]),proposed:K([e.proposed,t.proposed])}}function Q(e){return`${Math.round(e.proposed.scorePercent-e.existing.scorePercent)}%`}function le(e,t,s){const o=e.slice();return o[3]=t[s],o}function se(e){let t,s,o=e[3].category+"",r,c,a,M=Math.round(e[3].existing.scorePercent)+"",E,u,C,m,R=Math.round(e[3].proposed.scorePercent)+"",b,D,q,S,A=Q(e[3])+"",P;return{c(){t=g("tr"),s=g("th"),r=T(o),c=H(),a=g("td"),E=T(M),u=T("%"),C=H(),m=g("td"),b=T(R),D=T("%"),q=H(),S=g("td"),P=T(A),this.h()},l(p){t=k(p,"TR",{});var h=L(t);s=k(h,"TH",{class:!0});var z=L(s);r=w(z,o),z.forEach(_),c=x(h),a=k(h,"TD",{class:!0});var B=L(a);E=w(B,M),u=w(B,"%"),B.forEach(_),C=x(h),m=k(h,"TD",{class:!0});var y=L(m);b=w(y,R),D=w(y,"%"),y.forEach(_),q=x(h),S=k(h,"TD",{class:!0});var N=L(S);P=w(N,A),N.forEach(_),h.forEach(_),this.h()},h(){O(s,"class","svelte-11aw7fk"),O(a,"class","svelte-11aw7fk"),O(m,"class","svelte-11aw7fk"),O(S,"class","svelte-11aw7fk")},m(p,h){re(p,t,h),l(t,s),l(s,r),l(t,c),l(t,a),l(a,E),l(a,u),l(t,C),l(t,m),l(m,b),l(m,D),l(t,q),l(t,S),l(S,P)},p(p,h){h&1&&o!==(o=p[3].category+"")&&j(r,o),h&1&&M!==(M=Math.round(p[3].existing.scorePercent)+"")&&j(E,M),h&1&&R!==(R=Math.round(p[3].proposed.scorePercent)+"")&&j(b,R),h&1&&A!==(A=Q(p[3])+"")&&j(P,A)},d(p){p&&_(t)}}}function he(e){let t,s,o='<th class="svelte-11aw7fk">Categories</th> <th class="svelte-11aw7fk">Existing Layout</th> <th class="svelte-11aw7fk">Proposed Layout</th> <th class="svelte-11aw7fk">Net difference</th>',r,c,a,M='<th class="svelte-11aw7fk">Â </th> <th class="svelte-11aw7fk"></th> <th class="svelte-11aw7fk"></th> <th class="svelte-11aw7fk"></th>',E,u,C,m,R,b,D=Math.round(e[1].existing.scorePercent)+"",q,S,A,P,p=Math.round(e[1].proposed.scorePercent)+"",h,z,B,y,N=Q(e[1])+"",I,F=$(e[0]),f=[];for(let i=0;i<F.length;i+=1)f[i]=se(le(e,F,i));return{c(){t=g("table"),s=g("tr"),s.innerHTML=o,r=H();for(let i=0;i<f.length;i+=1)f[i].c();c=H(),a=g("tr"),a.innerHTML=M,E=H(),u=g("tr"),C=g("th"),m=T(e[2]),R=H(),b=g("td"),q=T(D),S=T("%"),A=H(),P=g("td"),h=T(p),z=T("%"),B=H(),y=g("td"),I=T(N),this.h()},l(i){t=k(i,"TABLE",{});var d=L(t);s=k(d,"TR",{"data-svelte-h":!0}),Y(s)!=="svelte-29rbbt"&&(s.innerHTML=o),r=x(d);for(let W=0;W<f.length;W+=1)f[W].l(d);c=x(d),a=k(d,"TR",{"data-svelte-h":!0}),Y(a)!=="svelte-fsb26u"&&(a.innerHTML=M),E=x(d),u=k(d,"TR",{});var n=L(u);C=k(n,"TH",{class:!0});var G=L(C);m=w(G,e[2]),G.forEach(_),R=x(n),b=k(n,"TD",{class:!0});var U=L(b);q=w(U,D),S=w(U,"%"),U.forEach(_),A=x(n),P=k(n,"TD",{class:!0});var V=L(P);h=w(V,p),z=w(V,"%"),V.forEach(_),B=x(n),y=k(n,"TD",{class:!0});var X=L(y);I=w(X,N),X.forEach(_),n.forEach(_),d.forEach(_),this.h()},h(){O(C,"class","svelte-11aw7fk"),O(b,"class","svelte-11aw7fk"),O(P,"class","svelte-11aw7fk"),O(y,"class","svelte-11aw7fk")},m(i,d){re(i,t,d),l(t,s),l(t,r);for(let n=0;n<f.length;n+=1)f[n]&&f[n].m(t,null);l(t,c),l(t,a),l(t,E),l(t,u),l(u,C),l(C,m),l(u,R),l(u,b),l(b,q),l(b,S),l(u,A),l(u,P),l(P,h),l(P,z),l(u,B),l(u,y),l(y,I)},p(i,[d]){if(d&1){F=$(i[0]);let n;for(n=0;n<F.length;n+=1){const G=le(i,F,n);f[n]?f[n].p(G,d):(f[n]=se(G),f[n].c(),f[n].m(t,c))}for(;n<f.length;n+=1)f[n].d(1);f.length=F.length}d&4&&j(m,i[2]),d&2&&D!==(D=Math.round(i[1].existing.scorePercent)+"")&&j(q,D),d&2&&p!==(p=Math.round(i[1].proposed.scorePercent)+"")&&j(h,p),d&2&&N!==(N=Q(i[1])+"")&&j(I,N)},i:Z,o:Z,d(i){i&&_(t),ne(f,i)}}}function ue(e,t,s){let{categories:o}=t,{overall:r}=t,{overallLabel:c}=t;return e.$$set=a=>{"categories"in a&&s(0,o=a.categories),"overall"in a&&s(1,r=a.overall),"overallLabel"in a&&s(2,c=a.overallLabel)},[o,r,c]}class ke extends oe{constructor(t){super(),ce(this,t,ue,he,ae,{categories:0,overall:1,overallLabel:2})}}export{ke as L,ge as g,Q as n};
