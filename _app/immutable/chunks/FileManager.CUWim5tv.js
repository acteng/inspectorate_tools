import{s as ee,l as pe,e as v,c as F,b as P,f as m,r as H,i as d,u as de,m as ge,o as be,x as $e,A as _e,a as C,t as A,g as I,d as R,v as se,h as L,j as x,B as he,n as oe,S as ae,M as z,p as re,E as X}from"./scheduler.DGmwKwHE.js";import{S as te,i as le,t as N,b as M,c as j,a as D,m as J,d as O,f as we}from"./index.Bb3HzqPI.js";import{e as ie,u as ye,d as ke}from"./each.5Jij472k.js";import{g as fe}from"./entry.dci1ImWW.js";import{b as ue}from"./paths.BVQwy3ai.js";import{C as ve}from"./CollapsibleCard.uYkzZ5_n.js";import{F as Fe}from"./FormElement.BJVcgkWn.js";import{v as Se}from"./v4.D8aEg3BZ.js";import{S as Z,W as Ee}from"./WarningButton.CmTmvDGe.js";import{T as Ce}from"./TextArea.Ce4ExrTL.js";/* empty css                                            */import{M as Ie}from"./Modal.1YLi9EeA.js";function Le(s){let e,t;const l=s[1].default,n=pe(l,s,s[0],null);return{c(){e=v("div"),n&&n.c(),this.h()},l(o){e=F(o,"DIV",{class:!0});var r=P(e);n&&n.l(r),r.forEach(m),this.h()},h(){H(e,"class","govuk-button-group")},m(o,r){d(o,e,r),n&&n.m(e,null),t=!0},p(o,[r]){n&&n.p&&(!t||r&1)&&de(n,l,o,o[0],t?be(l,o[0],r,null):ge(o[0]),null)},i(o){t||(N(n,o),t=!0)},o(o){M(n,o),t=!1},d(o){o&&m(e),n&&n.d(o)}}}function Ne(s,e,t){let{$$slots:l={},$$scope:n}=e;return s.$$set=o=>{"$$scope"in o&&t(0,n=o.$$scope)},[n,l]}class Me extends te{constructor(e){super(),le(this,e,Ne,Le,ee,{})}}function Ae(s){let e,t,l;return{c(){e=v("input"),this.h()},l(n){e=F(n,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){e.disabled=s[1],H(e,"class","govuk-file-upload"),H(e,"id",s[4]),H(e,"type","file")},m(n,o){d(n,e,o),s[6](e),t||(l=$e(e,"change",s[3]),t=!0)},p(n,o){o&2&&(e.disabled=n[1])},d(n){n&&m(e),s[6](null),t=!1,l()}}}function Re(s){let e,t;return e=new Fe({props:{label:s[0],id:s[4],$$slots:{default:[Ae]},$$scope:{ctx:s}}}),{c(){j(e.$$.fragment)},l(l){D(e.$$.fragment,l)},m(l,n){J(e,l,n),t=!0},p(l,[n]){const o={};n&1&&(o.label=l[0]),n&134&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function je(s,e,t){let{label:l}=e,{onLoad:n}=e,{disabled:o=!1}=e,r;async function i($){let g=r.files[0].name,y=await r.files[0].text();n(g,y)}let u=Se();function f($){_e[$?"unshift":"push"](()=>{r=$,t(2,r)})}return s.$$set=$=>{"label"in $&&t(0,l=$.label),"onLoad"in $&&t(5,n=$.onLoad),"disabled"in $&&t(1,o=$.disabled)},[l,o,r,i,u,n,f]}class De extends te{constructor(e){super(),le(this,e,je,Re,ee,{label:0,onLoad:5,disabled:1})}}function ce(s,e,t){const l=s.slice();return l[16]=e[t],l}function Je(s){let e;return{c(){e=A("Manage files")},l(t){e=R(t,"Manage files")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Oe(s){let e;return{c(){e=A("Rename")},l(t){e=R(t,"Rename")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Pe(s){let e;return{c(){e=A("Export")},l(t){e=R(t,"Export")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Ue(s){let e;return{c(){e=A("Delete")},l(t){e=R(t,"Delete")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Ye(s){let e,t,l,n,o,r;return e=new Z({props:{$$slots:{default:[Oe]},$$scope:{ctx:s}}}),e.$on("click",s[6]),l=new Z({props:{$$slots:{default:[Pe]},$$scope:{ctx:s}}}),l.$on("click",s[7]),o=new Ee({props:{$$slots:{default:[Ue]},$$scope:{ctx:s}}}),o.$on("click",s[8]),{c(){j(e.$$.fragment),t=C(),j(l.$$.fragment),n=C(),j(o.$$.fragment)},l(i){D(e.$$.fragment,i),t=I(i),D(l.$$.fragment,i),n=I(i),D(o.$$.fragment,i)},m(i,u){J(e,i,u),d(i,t,u),J(l,i,u),d(i,n,u),J(o,i,u),r=!0},p(i,u){const f={};u&524288&&(f.$$scope={dirty:u,ctx:i}),e.$set(f);const $={};u&524288&&($.$$scope={dirty:u,ctx:i}),l.$set($);const g={};u&524288&&(g.$$scope={dirty:u,ctx:i}),o.$set(g)},i(i){r||(N(e.$$.fragment,i),N(l.$$.fragment,i),N(o.$$.fragment,i),r=!0)},o(i){M(e.$$.fragment,i),M(l.$$.fragment,i),M(o.$$.fragment,i),r=!1},d(i){i&&(m(t),m(n)),O(e,i),O(l,i),O(o,i)}}}function Be(s){let e,t;return e=new Ce({props:{label:"JSON",value:JSON.stringify(s[4],null,"  "),rows:10}}),{c(){j(e.$$.fragment)},l(l){D(e.$$.fragment,l)},m(l,n){J(e,l,n),t=!0},p(l,n){const o={};n&16&&(o.value=JSON.stringify(l[4],null,"  ")),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Te(s){let e;return{c(){e=A("New file")},l(t){e=R(t,"New file")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function We(s){let e,t,l=s[16]+"",n,o,r;function i(){return s[14](s[16])}return{c(){e=v("li"),t=v("a"),n=A(l),this.h()},l(u){e=F(u,"LI",{});var f=P(e);t=F(f,"A",{href:!0});var $=P(t);n=R($,l),$.forEach(m),f.forEach(m),this.h()},h(){H(t,"href","#")},m(u,f){d(u,e,f),L(e,t),L(t,n),o||(r=$e(t,"click",i),o=!0)},p(u,f){s=u,f&4&&l!==(l=s[16]+"")&&x(n,l)},d(u){u&&m(e),o=!1,r()}}}function Ge(s){let e,t=s[16]+"",l;return{c(){e=v("li"),l=A(t)},l(n){e=F(n,"LI",{});var o=P(e);l=R(o,t),o.forEach(m)},m(n,o){d(n,e,o),L(e,l)},p(n,o){o&4&&t!==(t=n[16]+"")&&x(l,t)},d(n){n&&m(e)}}}function me(s,e){let t,l;function n(i,u){return i[16]==i[5]?Ge:We}let o=n(e),r=o(e);return{key:s,first:null,c(){t=X(),r.c(),l=X(),this.h()},l(i){t=X(),r.l(i),l=X(),this.h()},h(){this.first=t},m(i,u){d(i,t,u),r.m(i,u),d(i,l,u)},p(i,u){e=i,o===(o=n(e))&&r?r.p(e,u):(r.d(1),r=o(e),r&&(r.c(),r.m(l.parentNode,l)))},d(i){i&&(m(t),m(l)),r.d(i)}}}function Ve(s){let e,t=`All files are auto-saved in your browser's local storage. You can close your
    browser and resume later. You can export the file to your computer to share
    with someone else, and import from a file below.`,l,n,o,r,i,u,f,$,g,y,E,p,b,w,k,U,B,Y,K="Load a saved file:",W,_,h=[],T=new Map,V;$=new Me({props:{$$slots:{default:[Ye]},$$scope:{ctx:s}}}),y=new ve({props:{label:"Debug",$$slots:{default:[Be]},$$scope:{ctx:s}}}),w=new Z({props:{$$slots:{default:[Te]},$$scope:{ctx:s}}}),w.$on("click",s[9]),U=new De({props:{label:"Import from file",onLoad:s[10]}});let Q=ie(s[2]);const ne=a=>a[16];for(let a=0;a<Q.length;a+=1){let c=ce(s,Q,a),S=ne(c);T.set(S,h[a]=me(S,c))}return{c(){e=v("p"),e.textContent=t,l=C(),n=v("p"),o=A("You're currently editing "),r=v("u"),i=A(s[5]),u=A(`
    .`),f=C(),j($.$$.fragment),g=C(),j(y.$$.fragment),E=C(),p=v("hr"),b=C(),j(w.$$.fragment),k=C(),j(U.$$.fragment),B=C(),Y=v("p"),Y.textContent=K,W=C(),_=v("ul");for(let a=0;a<h.length;a+=1)h[a].c()},l(a){e=F(a,"P",{"data-svelte-h":!0}),re(e)!=="svelte-1yvzirp"&&(e.textContent=t),l=I(a),n=F(a,"P",{});var c=P(n);o=R(c,"You're currently editing "),r=F(c,"U",{});var S=P(r);i=R(S,s[5]),S.forEach(m),u=R(c,`
    .`),c.forEach(m),f=I(a),D($.$$.fragment,a),g=I(a),D(y.$$.fragment,a),E=I(a),p=F(a,"HR",{}),b=I(a),D(w.$$.fragment,a),k=I(a),D(U.$$.fragment,a),B=I(a),Y=F(a,"P",{"data-svelte-h":!0}),re(Y)!=="svelte-1xydj1w"&&(Y.textContent=K),W=I(a),_=F(a,"UL",{});var q=P(_);for(let G=0;G<h.length;G+=1)h[G].l(q);q.forEach(m)},m(a,c){d(a,e,c),d(a,l,c),d(a,n,c),L(n,o),L(n,r),L(r,i),L(n,u),d(a,f,c),J($,a,c),d(a,g,c),J(y,a,c),d(a,E,c),d(a,p,c),d(a,b,c),J(w,a,c),d(a,k,c),J(U,a,c),d(a,B,c),d(a,Y,c),d(a,W,c),d(a,_,c);for(let S=0;S<h.length;S+=1)h[S]&&h[S].m(_,null);V=!0},p(a,c){(!V||c&32)&&x(i,a[5]);const S={};c&524288&&(S.$$scope={dirty:c,ctx:a}),$.$set(S);const q={};c&524304&&(q.$$scope={dirty:c,ctx:a}),y.$set(q);const G={};c&524288&&(G.$$scope={dirty:c,ctx:a}),w.$set(G),c&2084&&(Q=ie(a[2]),h=ye(h,c,ne,1,a,Q,T,_,ke,me,null,ce))},i(a){V||(N($.$$.fragment,a),N(y.$$.fragment,a),N(w.$$.fragment,a),N(U.$$.fragment,a),V=!0)},o(a){M($.$$.fragment,a),M(y.$$.fragment,a),M(w.$$.fragment,a),M(U.$$.fragment,a),V=!1},d(a){a&&(m(e),m(l),m(n),m(f),m(g),m(E),m(p),m(b),m(k),m(B),m(Y),m(W),m(_)),O($,a),O(y,a),O(w,a),O(U,a);for(let c=0;c<h.length;c+=1)h[c].d()}}}function qe(s){let e,t,l,n,o,r,i,u,f,$,g;t=new Z({props:{$$slots:{default:[Je]},$$scope:{ctx:s}}}),t.$on("click",s[13]);function y(p){s[15](p)}let E={title:"Manage files",$$slots:{default:[Ve]},$$scope:{ctx:s}};return s[3]!==void 0&&(E.open=s[3]),f=new Ie({props:E}),_e.push(()=>we(f,"open",y)),{c(){e=v("div"),j(t.$$.fragment),l=C(),n=v("span"),o=A("Editing file "),r=v("u"),i=A(s[5]),u=C(),j(f.$$.fragment),this.h()},l(p){e=F(p,"DIV",{style:!0});var b=P(e);D(t.$$.fragment,b),l=I(b),n=F(b,"SPAN",{});var w=P(n);o=R(w,"Editing file "),r=F(w,"U",{});var k=P(r);i=R(k,s[5]),k.forEach(m),w.forEach(m),b.forEach(m),u=I(p),D(f.$$.fragment,p),this.h()},h(){se(e,"display","flex"),se(e,"align-items","baseline")},m(p,b){d(p,e,b),J(t,e,null),L(e,l),L(e,n),L(n,o),L(n,r),L(r,i),d(p,u,b),J(f,p,b),g=!0},p(p,[b]){const w={};b&524288&&(w.$$scope={dirty:b,ctx:p}),t.$set(w),(!g||b&32)&&x(i,p[5]);const k={};b&524340&&(k.$$scope={dirty:b,ctx:p}),!$&&b&8&&($=!0,k.open=p[3],he(()=>$=!1)),f.$set(k)},i(p){g||(N(t.$$.fragment,p),N(f.$$.fragment,p),g=!0)},o(p){M(t.$$.fragment,p),M(f.$$.fragment,p),g=!1},d(p){p&&(m(e),m(u)),O(t),O(f,p)}}}function ze(s,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",s),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function He(s,e,t){let l,n=oe,o=()=>(n(),n=ae(g,_=>t(4,l=_)),g),r,i=oe,u=()=>(i(),i=ae($,_=>t(5,r=_)),$);s.$$.on_destroy.push(()=>n()),s.$$.on_destroy.push(()=>i());let{files:f}=e,{currentFile:$}=e;u();let{state:g}=e;o();let y=f.getFileList(),E=!1;function p(){let _=window.prompt(`Rename file ${r} to what?`,r);if(_){let h=f.key(r),T=window.localStorage.getItem(h);window.localStorage.setItem(f.key(_),T),window.localStorage.removeItem(h),z($,r=_,r),t(2,y=f.getFileList())}}function b(){ze(r+".json",JSON.stringify(l))}async function w(){window.confirm(`Really delete file ${r}? You can't undo this.`)&&(window.localStorage.removeItem(f.key(r)),await k())}async function k(){z($,r=f.newFilename(),r),z(g,l=f.emptyState(),l),window.localStorage.setItem(f.key(r),JSON.stringify(l)),t(2,y=f.getFileList()),await fe(`${ue}/${f.prefix}`)}async function U(_,h){let T=_.endsWith(".json")?_.slice(0,-5):_;window.localStorage.setItem(f.key(T),h),t(2,y=f.getFileList()),B(T)}async function B(_){try{let h=f.loadFile(_);z($,r=_,r),z(g,l=h,l),await fe(`${ue}/${f.prefix}`)}catch(h){window.alert(`Couldn't load ${_}: ${h}`)}}const Y=()=>t(3,E=!0),K=_=>B(_);function W(_){E=_,t(3,E)}return s.$$set=_=>{"files"in _&&t(12,f=_.files),"currentFile"in _&&u(t(0,$=_.currentFile)),"state"in _&&o(t(1,g=_.state))},[$,g,y,E,l,r,p,b,w,k,U,B,f,Y,K,W]}class rt extends te{constructor(e){super(),le(this,e,He,qe,ee,{files:12,currentFile:0,state:1})}}export{rt as F};
