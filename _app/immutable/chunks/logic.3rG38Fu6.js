import{s as T,a as E,e as N,c as W,b as D,o as m,i as p,z as h,A as g,d as y,H as M}from"./scheduler.8Pqdtq9W.js";import{S as C,i as I,c as b,a as _,m as v,t as k,b as B,d as L}from"./index.KrNxZzBh.js";import{F as O,E as U}from"./FormElement.C7qRsTEQ.js";import{v as j}from"./v4.D8aEg3BZ.js";function q(n){let e,i,r,t,s,o,u;return e=new U({props:{errorMessage:n[5](n[2])}}),{c(){b(e.$$.fragment),i=E(),r=N("input"),this.h()},l(a){_(e.$$.fragment,a),i=W(a),r=D(a,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){m(r,"type","text"),m(r,"inputmode","numeric"),m(r,"class",t=`govuk-input govuk-input--width-${n[1]}`),m(r,"id",n[3])},m(a,f){v(e,a,f),p(a,i,f),p(a,r,f),h(r,n[2]),s=!0,o||(u=[g(r,"input",n[9]),g(r,"change",n[4])],o=!0)},p(a,f){const d={};f&4&&(d.errorMessage=a[5](a[2])),e.$set(d),(!s||f&2&&t!==(t=`govuk-input govuk-input--width-${a[1]}`))&&m(r,"class",t),f&4&&r.value!==a[2]&&h(r,a[2])},i(a){s||(k(e.$$.fragment,a),s=!0)},o(a){B(e.$$.fragment,a),s=!1},d(a){a&&(y(i),y(r)),L(e,a),o=!1,M(u)}}}function z(n){let e,i;return e=new O({props:{label:n[0],id:n[3],$$slots:{default:[q]},$$scope:{ctx:n}}}),{c(){b(e.$$.fragment)},l(r){_(e.$$.fragment,r)},m(r,t){v(e,r,t),i=!0},p(r,[t]){const s={};t&1&&(s.label=r[0]),t&1030&&(s.$$scope={dirty:t,ctx:r}),e.$set(s)},i(r){i||(k(e.$$.fragment,r),i=!0)},o(r){B(e.$$.fragment,r),i=!1},d(r){L(e,r)}}}function A(n,e,i){let{label:r}=e,{value:t}=e,{width:s}=e,{min:o=void 0}=e,{max:u=void 0}=e,a=t==null?void 0:t.toString(),f=j();function d(){i(6,t=a==null?void 0:parseInt(a,10))}function S(l){if(l==""||l==null)return"";if(l.includes("."))return"Please enter a number without decimals";let w=Number(l);return isNaN(w)?"Please enter a valid number":o!=null&&w<o?`Please enter a number that's at least ${o};`:u!=null&&w>u?`Please enter a number that's at most ${u};`:""}function P(){a=this.value,i(2,a)}return n.$$set=l=>{"label"in l&&i(0,r=l.label),"value"in l&&i(6,t=l.value),"width"in l&&i(1,s=l.width),"min"in l&&i(7,o=l.min),"max"in l&&i(8,u=l.max)},[r,s,a,f,d,S,t,o,u,P]}class R extends C{constructor(e){super(),I(this,e,A,z,T,{label:0,value:6,width:1,min:7,max:8})}}function H(n,e,i,r,t){switch(n){case"Footway":return[2.6,2];case"Narrow Traffic / Bus Lane":return[3.25,3.25];case"Wide Traffic / Bus Lane":return[4.5,3.9];case"Traffic Lane (no buses): speed limit 20/30":return[3,2.75];case"On-highway advisory/mandatory cycle lane":return[2,1.5];case"1-way protected cycle track":if(!e.flowOneWay)throw new Error("missing input");return{"<200":[2.3,1.8],"200-800":[2.5,2.3],">800":[2.8,2.3]}[e.flowOneWay];case"2-way protected cycle track":if(!e.flowTwoWay)throw new Error("missing input");return{"<300":[3.3,2.3],"300-1,000":[3.3,2.8],">1,000":[4.3,3.3]}[e.flowTwoWay];case"Shared use cycle track":if(!e.flowSharedUse)throw new Error("missing input");return{"<300":[3,3],">300":[4.5,4.5]}[e.flowSharedUse];case"Parking Bay":return[2,1.8];case"Disabled Parking Bay":return[2.7,2.7];case"Loading Bay":return[2.7,1.8];case"Buffer / Verge":{if(!e.speedLimit)throw new Error("missing input");let s=[.5,.5],o=[1.5,1.5],u=0;if(r&&(u+=c(r)),t&&(u+=c(t)),u<=1||u==4||u==10)return s;let a=e.speedLimit=="<30"||e.speedLimit=="30"||e.speedLimit=="40";return r=="Footway"&&t&&c(t)==2||t=="Footway"&&r&&c(r)==2?a?s:o:{"<30":[.5,0],30:[.5,0],40:[1,.5],50:[2,1.5],60:[2.5,2],70:[3.5,3]}[e.speedLimit]}default:{let s=i[n.custom].width;return[s,s]}}}function c(n){return typeof n=="object"?0:{Footway:0,"1-way protected cycle track":0,"2-way protected cycle track":0,"Shared use cycle track":0,"Buffer / Verge":1,"Narrow Traffic / Bus Lane":2,"Wide Traffic / Bus Lane":2,"Traffic Lane (no buses): speed limit 20/30":2,"On-highway advisory/mandatory cycle lane":2,"Parking Bay":10,"Disabled Parking Bay":10,"Loading Bay":10}[n]}function V(n,e,i){if(c(n)!=0)return"";let r=e&&(c(e)==2||c(e)==10),t=i&&(c(i)==2||c(i)==10);return r&&t?"both":r?"left":t?"right":""}function X(n,e){if(!n||!e)return null;let i=n=="<30"?20:parseInt(n);return e>i*1.1?i+10:i}function Y(n,e){let i=0,r=e=="Desirable"?n.proposed.desirableMinimumCrossSection:n.proposed.absoluteMinimumCrossSection;for(let t=0;t<r.length;t++){let s=r[t];if(!s)continue;let o=t==0?"":r[t-1],u=t==r.length-1?"":r[t+1],a=H(s,n.proposed.trafficData,n.proposed.customFeatures,o,u)[e=="Desirable"?0:1];i+=a}return i}export{R as N,X as a,Y as c,H as g,V as n};
