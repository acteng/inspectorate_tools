import{s as ee,l as pe,e as v,c as F,b as O,f as m,r as H,i as d,u as de,m as ge,o as be,x as $e,A as _e,a as C,t as M,g as I,d as P,v as se,h as L,j as x,B as he,n as oe,V as ae,P as z,p as re,E as X}from"./scheduler.DUXu1fc4.js";import{S as te,i as le,t as N,b as A,c as R,a as j,m as D,d as J,f as we}from"./index.Cw3Z3Eqf.js";import{e as ie,u as ye,d as ke}from"./each.CBIw2Sej.js";import{g as fe}from"./entry.DRK94jeA.js";import{b as ue}from"./paths.ChM5fYsU.js";import{C as ve}from"./CollapsibleCard.BNO-5LmQ.js";import{F as Fe}from"./FormElement.BUZgaVT-.js";import{v as Ee}from"./v4.D8aEg3BZ.js";import{S as Z,W as Se}from"./WarningButton.M-LXQQTX.js";import{T as Ce}from"./TextArea.CwUteWfG.js";/* empty css                                            */import{M as Ie}from"./Modal.DL1Sw6qj.js";function Le(s){let e,t;const l=s[1].default,n=pe(l,s,s[0],null);return{c(){e=v("div"),n&&n.c(),this.h()},l(o){e=F(o,"DIV",{class:!0});var r=O(e);n&&n.l(r),r.forEach(m),this.h()},h(){H(e,"class","govuk-button-group")},m(o,r){d(o,e,r),n&&n.m(e,null),t=!0},p(o,[r]){n&&n.p&&(!t||r&1)&&de(n,l,o,o[0],t?be(l,o[0],r,null):ge(o[0]),null)},i(o){t||(N(n,o),t=!0)},o(o){A(n,o),t=!1},d(o){o&&m(e),n&&n.d(o)}}}function Ne(s,e,t){let{$$slots:l={},$$scope:n}=e;return s.$$set=o=>{"$$scope"in o&&t(0,n=o.$$scope)},[n,l]}class Ae extends te{constructor(e){super(),le(this,e,Ne,Le,ee,{})}}function Me(s){let e,t,l;return{c(){e=v("input"),this.h()},l(n){e=F(n,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){e.disabled=s[1],H(e,"class","govuk-file-upload"),H(e,"id",s[4]),H(e,"type","file")},m(n,o){d(n,e,o),s[6](e),t||(l=$e(e,"change",s[3]),t=!0)},p(n,o){o&2&&(e.disabled=n[1])},d(n){n&&m(e),s[6](null),t=!1,l()}}}function Pe(s){let e,t;return e=new Fe({props:{label:s[0],id:s[4],$$slots:{default:[Me]},$$scope:{ctx:s}}}),{c(){R(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,n){D(e,l,n),t=!0},p(l,[n]){const o={};n&1&&(o.label=l[0]),n&134&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Re(s,e,t){let{label:l}=e,{onLoad:n}=e,{disabled:o=!1}=e,r;async function i($){let g=r.files[0].name,y=await r.files[0].text();n(g,y)}let u=Ee();function f($){_e[$?"unshift":"push"](()=>{r=$,t(2,r)})}return s.$$set=$=>{"label"in $&&t(0,l=$.label),"onLoad"in $&&t(5,n=$.onLoad),"disabled"in $&&t(1,o=$.disabled)},[l,o,r,i,u,n,f]}class je extends te{constructor(e){super(),le(this,e,Re,Pe,ee,{label:0,onLoad:5,disabled:1})}}function ce(s,e,t){const l=s.slice();return l[16]=e[t],l}function De(s){let e;return{c(){e=M("Manage files")},l(t){e=P(t,"Manage files")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Je(s){let e;return{c(){e=M("Rename")},l(t){e=P(t,"Rename")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Oe(s){let e;return{c(){e=M("Export")},l(t){e=P(t,"Export")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Ue(s){let e;return{c(){e=M("Delete")},l(t){e=P(t,"Delete")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Ye(s){let e,t,l,n,o,r;return e=new Z({props:{$$slots:{default:[Je]},$$scope:{ctx:s}}}),e.$on("click",s[6]),l=new Z({props:{$$slots:{default:[Oe]},$$scope:{ctx:s}}}),l.$on("click",s[7]),o=new Se({props:{$$slots:{default:[Ue]},$$scope:{ctx:s}}}),o.$on("click",s[8]),{c(){R(e.$$.fragment),t=C(),R(l.$$.fragment),n=C(),R(o.$$.fragment)},l(i){j(e.$$.fragment,i),t=I(i),j(l.$$.fragment,i),n=I(i),j(o.$$.fragment,i)},m(i,u){D(e,i,u),d(i,t,u),D(l,i,u),d(i,n,u),D(o,i,u),r=!0},p(i,u){const f={};u&524288&&(f.$$scope={dirty:u,ctx:i}),e.$set(f);const $={};u&524288&&($.$$scope={dirty:u,ctx:i}),l.$set($);const g={};u&524288&&(g.$$scope={dirty:u,ctx:i}),o.$set(g)},i(i){r||(N(e.$$.fragment,i),N(l.$$.fragment,i),N(o.$$.fragment,i),r=!0)},o(i){A(e.$$.fragment,i),A(l.$$.fragment,i),A(o.$$.fragment,i),r=!1},d(i){i&&(m(t),m(n)),J(e,i),J(l,i),J(o,i)}}}function Be(s){let e,t;return e=new Ce({props:{label:"JSON",value:JSON.stringify(s[4],null,"  "),rows:10}}),{c(){R(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,n){D(e,l,n),t=!0},p(l,n){const o={};n&16&&(o.value=JSON.stringify(l[4],null,"  ")),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Te(s){let e;return{c(){e=M("New file")},l(t){e=P(t,"New file")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Ve(s){let e,t,l=s[16]+"",n,o,r;function i(){return s[14](s[16])}return{c(){e=v("li"),t=v("a"),n=M(l),this.h()},l(u){e=F(u,"LI",{});var f=O(e);t=F(f,"A",{href:!0});var $=O(t);n=P($,l),$.forEach(m),f.forEach(m),this.h()},h(){H(t,"href","#")},m(u,f){d(u,e,f),L(e,t),L(t,n),o||(r=$e(t,"click",i),o=!0)},p(u,f){s=u,f&4&&l!==(l=s[16]+"")&&x(n,l)},d(u){u&&m(e),o=!1,r()}}}function We(s){let e,t=s[16]+"",l;return{c(){e=v("li"),l=M(t)},l(n){e=F(n,"LI",{});var o=O(e);l=P(o,t),o.forEach(m)},m(n,o){d(n,e,o),L(e,l)},p(n,o){o&4&&t!==(t=n[16]+"")&&x(l,t)},d(n){n&&m(e)}}}function me(s,e){let t,l;function n(i,u){return i[16]==i[5]?We:Ve}let o=n(e),r=o(e);return{key:s,first:null,c(){t=X(),r.c(),l=X(),this.h()},l(i){t=X(),r.l(i),l=X(),this.h()},h(){this.first=t},m(i,u){d(i,t,u),r.m(i,u),d(i,l,u)},p(i,u){e=i,o===(o=n(e))&&r?r.p(e,u):(r.d(1),r=o(e),r&&(r.c(),r.m(l.parentNode,l)))},d(i){i&&(m(t),m(l)),r.d(i)}}}function Ge(s){let e,t=`All files are auto-saved in your browser's local storage. You can close your
    browser and resume later. You can export the file to your computer to share
    with someone else, and import from a file below.`,l,n,o,r,i,u,f,$,g,y,S,p,b,w,k,U,B,Y,K="Load a saved file:",V,_,h=[],T=new Map,G;$=new Ae({props:{$$slots:{default:[Ye]},$$scope:{ctx:s}}}),y=new ve({props:{label:"Debug",$$slots:{default:[Be]},$$scope:{ctx:s}}}),w=new Z({props:{$$slots:{default:[Te]},$$scope:{ctx:s}}}),w.$on("click",s[9]),U=new je({props:{label:"Import from file",onLoad:s[10]}});let Q=ie(s[2]);const ne=a=>a[16];for(let a=0;a<Q.length;a+=1){let c=ce(s,Q,a),E=ne(c);T.set(E,h[a]=me(E,c))}return{c(){e=v("p"),e.textContent=t,l=C(),n=v("p"),o=M("You're currently editing "),r=v("u"),i=M(s[5]),u=M(`
    .`),f=C(),R($.$$.fragment),g=C(),R(y.$$.fragment),S=C(),p=v("hr"),b=C(),R(w.$$.fragment),k=C(),R(U.$$.fragment),B=C(),Y=v("p"),Y.textContent=K,V=C(),_=v("ul");for(let a=0;a<h.length;a+=1)h[a].c()},l(a){e=F(a,"P",{"data-svelte-h":!0}),re(e)!=="svelte-1yvzirp"&&(e.textContent=t),l=I(a),n=F(a,"P",{});var c=O(n);o=P(c,"You're currently editing "),r=F(c,"U",{});var E=O(r);i=P(E,s[5]),E.forEach(m),u=P(c,`
    .`),c.forEach(m),f=I(a),j($.$$.fragment,a),g=I(a),j(y.$$.fragment,a),S=I(a),p=F(a,"HR",{}),b=I(a),j(w.$$.fragment,a),k=I(a),j(U.$$.fragment,a),B=I(a),Y=F(a,"P",{"data-svelte-h":!0}),re(Y)!=="svelte-1xydj1w"&&(Y.textContent=K),V=I(a),_=F(a,"UL",{});var q=O(_);for(let W=0;W<h.length;W+=1)h[W].l(q);q.forEach(m)},m(a,c){d(a,e,c),d(a,l,c),d(a,n,c),L(n,o),L(n,r),L(r,i),L(n,u),d(a,f,c),D($,a,c),d(a,g,c),D(y,a,c),d(a,S,c),d(a,p,c),d(a,b,c),D(w,a,c),d(a,k,c),D(U,a,c),d(a,B,c),d(a,Y,c),d(a,V,c),d(a,_,c);for(let E=0;E<h.length;E+=1)h[E]&&h[E].m(_,null);G=!0},p(a,c){(!G||c&32)&&x(i,a[5]);const E={};c&524288&&(E.$$scope={dirty:c,ctx:a}),$.$set(E);const q={};c&524304&&(q.$$scope={dirty:c,ctx:a}),y.$set(q);const W={};c&524288&&(W.$$scope={dirty:c,ctx:a}),w.$set(W),c&2084&&(Q=ie(a[2]),h=ye(h,c,ne,1,a,Q,T,_,ke,me,null,ce))},i(a){G||(N($.$$.fragment,a),N(y.$$.fragment,a),N(w.$$.fragment,a),N(U.$$.fragment,a),G=!0)},o(a){A($.$$.fragment,a),A(y.$$.fragment,a),A(w.$$.fragment,a),A(U.$$.fragment,a),G=!1},d(a){a&&(m(e),m(l),m(n),m(f),m(g),m(S),m(p),m(b),m(k),m(B),m(Y),m(V),m(_)),J($,a),J(y,a),J(w,a),J(U,a);for(let c=0;c<h.length;c+=1)h[c].d()}}}function qe(s){let e,t,l,n,o,r,i,u,f,$,g;t=new Z({props:{$$slots:{default:[De]},$$scope:{ctx:s}}}),t.$on("click",s[13]);function y(p){s[15](p)}let S={title:"Manage files",$$slots:{default:[Ge]},$$scope:{ctx:s}};return s[3]!==void 0&&(S.open=s[3]),f=new Ie({props:S}),_e.push(()=>we(f,"open",y)),{c(){e=v("div"),R(t.$$.fragment),l=C(),n=v("span"),o=M("Editing file "),r=v("u"),i=M(s[5]),u=C(),R(f.$$.fragment),this.h()},l(p){e=F(p,"DIV",{style:!0});var b=O(e);j(t.$$.fragment,b),l=I(b),n=F(b,"SPAN",{});var w=O(n);o=P(w,"Editing file "),r=F(w,"U",{});var k=O(r);i=P(k,s[5]),k.forEach(m),w.forEach(m),b.forEach(m),u=I(p),j(f.$$.fragment,p),this.h()},h(){se(e,"display","flex"),se(e,"align-items","baseline")},m(p,b){d(p,e,b),D(t,e,null),L(e,l),L(e,n),L(n,o),L(n,r),L(r,i),d(p,u,b),D(f,p,b),g=!0},p(p,[b]){const w={};b&524288&&(w.$$scope={dirty:b,ctx:p}),t.$set(w),(!g||b&32)&&x(i,p[5]);const k={};b&524340&&(k.$$scope={dirty:b,ctx:p}),!$&&b&8&&($=!0,k.open=p[3],he(()=>$=!1)),f.$set(k)},i(p){g||(N(t.$$.fragment,p),N(f.$$.fragment,p),g=!0)},o(p){A(t.$$.fragment,p),A(f.$$.fragment,p),g=!1},d(p){p&&(m(e),m(u)),J(t),J(f,p)}}}function ze(s,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",s),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function He(s,e,t){let l,n=oe,o=()=>(n(),n=ae(g,_=>t(4,l=_)),g),r,i=oe,u=()=>(i(),i=ae($,_=>t(5,r=_)),$);s.$$.on_destroy.push(()=>n()),s.$$.on_destroy.push(()=>i());let{files:f}=e,{currentFile:$}=e;u();let{state:g}=e;o();let y=f.getFileList(),S=!1;function p(){let _=window.prompt(`Rename file ${r} to what?`,r);if(_){let h=f.key(r),T=window.localStorage.getItem(h);window.localStorage.setItem(f.key(_),T),window.localStorage.removeItem(h),z($,r=_,r),t(2,y=f.getFileList())}}function b(){ze(r+".json",JSON.stringify(l))}async function w(){window.confirm(`Really delete file ${r}? You can't undo this.`)&&(window.localStorage.removeItem(f.key(r)),await k())}async function k(){z($,r=f.newFilename(),r),z(g,l=f.emptyState(),l),window.localStorage.setItem(f.key(r),JSON.stringify(l)),t(2,y=f.getFileList()),await fe(`${ue}/${f.prefix}`)}async function U(_,h){let T=_.endsWith(".json")?_.slice(0,-5):_;window.localStorage.setItem(f.key(T),h),t(2,y=f.getFileList()),B(T)}async function B(_){try{let h=f.loadFile(_);z($,r=_,r),z(g,l=h,l),await fe(`${ue}/${f.prefix}`)}catch(h){window.alert(`Couldn't load ${_}: ${h}`)}}const Y=()=>t(3,S=!0),K=_=>B(_);function V(_){S=_,t(3,S)}return s.$$set=_=>{"files"in _&&t(12,f=_.files),"currentFile"in _&&u(t(0,$=_.currentFile)),"state"in _&&o(t(1,g=_.state))},[$,g,y,S,l,r,p,b,w,k,U,B,f,Y,K,V]}class rt extends te{constructor(e){super(),le(this,e,He,qe,ee,{files:12,currentFile:0,state:1})}}export{rt as F};
