import{s as ue,e as v,c as S,r as X,i as d,z as ce,f as $,v as me,a as C,t as N,b as B,g as I,d as M,w as te,h as L,j as x,x as pe,n as ne,M as le,N as H,p as se,E as Q}from"./scheduler.Bsni_e59.js";import{S as $e,i as _e,c as A,a as R,m as j,t as J,b as O,d as P,e as de}from"./index.CCfAUppz.js";import{e as oe,u as ge,d as be}from"./each.BmgwAlbi.js";import{g as ae}from"./entry.Dcb2OU6Z.js";import{b as ie}from"./paths.K05q2OhN.js";import{B as he}from"./ButtonGroup.hr9f_7ak.js";import{C as we}from"./CollapsibleCard.DoOZ0Bze.js";import{F as ye,v as ke}from"./FormElement.CamEvjvl.js";import{S as Z,W as Fe}from"./WarningButton.D9QeV9gM.js";import{T as ve}from"./TextArea.DbePhW6L.js";import{M as Se}from"./Modal.Dh5xmxO-.js";function Ee(s){let e,t,n;return{c(){e=v("input"),this.h()},l(o){e=S(o,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){e.disabled=s[1],X(e,"class","govuk-file-upload"),X(e,"id",s[4]),X(e,"type","file")},m(o,r){d(o,e,r),s[6](e),t||(n=ce(e,"change",s[3]),t=!0)},p(o,r){r&2&&(e.disabled=o[1])},d(o){o&&$(e),s[6](null),t=!1,n()}}}function Ce(s){let e,t;return e=new ye({props:{label:s[0],id:s[4],$$slots:{default:[Ee]},$$scope:{ctx:s}}}),{c(){A(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,o){j(e,n,o),t=!0},p(n,[o]){const r={};o&1&&(r.label=n[0]),o&134&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){P(e,n)}}}function Ie(s,e,t){let{label:n}=e,{onLoad:o}=e,{disabled:r=!1}=e,i;async function a(m){let g=i.files[0].name,y=await i.files[0].text();o(g,y)}let u=ke();function f(m){me[m?"unshift":"push"](()=>{i=m,t(2,i)})}return s.$$set=m=>{"label"in m&&t(0,n=m.label),"onLoad"in m&&t(5,o=m.onLoad),"disabled"in m&&t(1,r=m.disabled)},[n,r,i,a,u,o,f]}class Le extends $e{constructor(e){super(),_e(this,e,Ie,Ce,ue,{label:0,onLoad:5,disabled:1})}}function re(s,e,t){const n=s.slice();return n[16]=e[t],n}function Ne(s){let e;return{c(){e=N("Manage files")},l(t){e=M(t,"Manage files")},m(t,n){d(t,e,n)},d(t){t&&$(e)}}}function Me(s){let e;return{c(){e=N("Rename")},l(t){e=M(t,"Rename")},m(t,n){d(t,e,n)},d(t){t&&$(e)}}}function Ae(s){let e;return{c(){e=N("Export")},l(t){e=M(t,"Export")},m(t,n){d(t,e,n)},d(t){t&&$(e)}}}function Re(s){let e;return{c(){e=N("Delete")},l(t){e=M(t,"Delete")},m(t,n){d(t,e,n)},d(t){t&&$(e)}}}function je(s){let e,t,n,o,r,i;return e=new Z({props:{$$slots:{default:[Me]},$$scope:{ctx:s}}}),e.$on("click",s[6]),n=new Z({props:{$$slots:{default:[Ae]},$$scope:{ctx:s}}}),n.$on("click",s[7]),r=new Fe({props:{$$slots:{default:[Re]},$$scope:{ctx:s}}}),r.$on("click",s[8]),{c(){A(e.$$.fragment),t=C(),A(n.$$.fragment),o=C(),A(r.$$.fragment)},l(a){R(e.$$.fragment,a),t=I(a),R(n.$$.fragment,a),o=I(a),R(r.$$.fragment,a)},m(a,u){j(e,a,u),d(a,t,u),j(n,a,u),d(a,o,u),j(r,a,u),i=!0},p(a,u){const f={};u&524288&&(f.$$scope={dirty:u,ctx:a}),e.$set(f);const m={};u&524288&&(m.$$scope={dirty:u,ctx:a}),n.$set(m);const g={};u&524288&&(g.$$scope={dirty:u,ctx:a}),r.$set(g)},i(a){i||(J(e.$$.fragment,a),J(n.$$.fragment,a),J(r.$$.fragment,a),i=!0)},o(a){O(e.$$.fragment,a),O(n.$$.fragment,a),O(r.$$.fragment,a),i=!1},d(a){a&&($(t),$(o)),P(e,a),P(n,a),P(r,a)}}}function Je(s){let e,t;return e=new ve({props:{label:"JSON",value:JSON.stringify(s[4],null,"  "),rows:10}}),{c(){A(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,o){j(e,n,o),t=!0},p(n,o){const r={};o&16&&(r.value=JSON.stringify(n[4],null,"  ")),e.$set(r)},i(n){t||(J(e.$$.fragment,n),t=!0)},o(n){O(e.$$.fragment,n),t=!1},d(n){P(e,n)}}}function Oe(s){let e;return{c(){e=N("New file")},l(t){e=M(t,"New file")},m(t,n){d(t,e,n)},d(t){t&&$(e)}}}function Pe(s){let e,t,n=s[16]+"",o,r,i;function a(){return s[14](s[16])}return{c(){e=v("li"),t=v("a"),o=N(n),this.h()},l(u){e=S(u,"LI",{});var f=B(e);t=S(f,"A",{href:!0});var m=B(t);o=M(m,n),m.forEach($),f.forEach($),this.h()},h(){X(t,"href","#")},m(u,f){d(u,e,f),L(e,t),L(t,o),r||(i=ce(t,"click",a),r=!0)},p(u,f){s=u,f&4&&n!==(n=s[16]+"")&&x(o,n)},d(u){u&&$(e),r=!1,i()}}}function Ue(s){let e,t=s[16]+"",n;return{c(){e=v("li"),n=N(t)},l(o){e=S(o,"LI",{});var r=B(e);n=M(r,t),r.forEach($)},m(o,r){d(o,e,r),L(e,n)},p(o,r){r&4&&t!==(t=o[16]+"")&&x(n,t)},d(o){o&&$(e)}}}function fe(s,e){let t,n;function o(a,u){return a[16]==a[5]?Ue:Pe}let r=o(e),i=r(e);return{key:s,first:null,c(){t=Q(),i.c(),n=Q(),this.h()},l(a){t=Q(),i.l(a),n=Q(),this.h()},h(){this.first=t},m(a,u){d(a,t,u),i.m(a,u),d(a,n,u)},p(a,u){e=a,r===(r=o(e))&&i?i.p(e,u):(i.d(1),i=r(e),i&&(i.c(),i.m(n.parentNode,n)))},d(a){a&&($(t),$(n)),i.d(a)}}}function Ye(s){let e,t=`All files are auto-saved in your browser's local storage. You can close your
    browser and resume later. You can export the file to your computer to share
    with someone else, and import from a file below.`,n,o,r,i,a,u,f,m,g,y,E,p,b,w,k,U,D,Y,K="Load a saved file:",W,_,h=[],T=new Map,G;m=new he({props:{$$slots:{default:[je]},$$scope:{ctx:s}}}),y=new we({props:{label:"Debug",$$slots:{default:[Je]},$$scope:{ctx:s}}}),w=new Z({props:{$$slots:{default:[Oe]},$$scope:{ctx:s}}}),w.$on("click",s[9]),U=new Le({props:{label:"Import from file",onLoad:s[10]}});let V=oe(s[2]);const ee=l=>l[16];for(let l=0;l<V.length;l+=1){let c=re(s,V,l),F=ee(c);T.set(F,h[l]=fe(F,c))}return{c(){e=v("p"),e.textContent=t,n=C(),o=v("p"),r=N("You're currently editing "),i=v("u"),a=N(s[5]),u=N(`
    .`),f=C(),A(m.$$.fragment),g=C(),A(y.$$.fragment),E=C(),p=v("hr"),b=C(),A(w.$$.fragment),k=C(),A(U.$$.fragment),D=C(),Y=v("p"),Y.textContent=K,W=C(),_=v("ul");for(let l=0;l<h.length;l+=1)h[l].c()},l(l){e=S(l,"P",{"data-svelte-h":!0}),se(e)!=="svelte-1yvzirp"&&(e.textContent=t),n=I(l),o=S(l,"P",{});var c=B(o);r=M(c,"You're currently editing "),i=S(c,"U",{});var F=B(i);a=M(F,s[5]),F.forEach($),u=M(c,`
    .`),c.forEach($),f=I(l),R(m.$$.fragment,l),g=I(l),R(y.$$.fragment,l),E=I(l),p=S(l,"HR",{}),b=I(l),R(w.$$.fragment,l),k=I(l),R(U.$$.fragment,l),D=I(l),Y=S(l,"P",{"data-svelte-h":!0}),se(Y)!=="svelte-1xydj1w"&&(Y.textContent=K),W=I(l),_=S(l,"UL",{});var q=B(_);for(let z=0;z<h.length;z+=1)h[z].l(q);q.forEach($)},m(l,c){d(l,e,c),d(l,n,c),d(l,o,c),L(o,r),L(o,i),L(i,a),L(o,u),d(l,f,c),j(m,l,c),d(l,g,c),j(y,l,c),d(l,E,c),d(l,p,c),d(l,b,c),j(w,l,c),d(l,k,c),j(U,l,c),d(l,D,c),d(l,Y,c),d(l,W,c),d(l,_,c);for(let F=0;F<h.length;F+=1)h[F]&&h[F].m(_,null);G=!0},p(l,c){(!G||c&32)&&x(a,l[5]);const F={};c&524288&&(F.$$scope={dirty:c,ctx:l}),m.$set(F);const q={};c&524304&&(q.$$scope={dirty:c,ctx:l}),y.$set(q);const z={};c&524288&&(z.$$scope={dirty:c,ctx:l}),w.$set(z),c&2084&&(V=oe(l[2]),h=ge(h,c,ee,1,l,V,T,_,be,fe,null,re))},i(l){G||(J(m.$$.fragment,l),J(y.$$.fragment,l),J(w.$$.fragment,l),J(U.$$.fragment,l),G=!0)},o(l){O(m.$$.fragment,l),O(y.$$.fragment,l),O(w.$$.fragment,l),O(U.$$.fragment,l),G=!1},d(l){l&&($(e),$(n),$(o),$(f),$(g),$(E),$(p),$(b),$(k),$(D),$(Y),$(W),$(_)),P(m,l),P(y,l),P(w,l),P(U,l);for(let c=0;c<h.length;c+=1)h[c].d()}}}function Be(s){let e,t,n,o,r,i,a,u,f,m,g;t=new Z({props:{$$slots:{default:[Ne]},$$scope:{ctx:s}}}),t.$on("click",s[13]);function y(p){s[15](p)}let E={title:"Manage files",$$slots:{default:[Ye]},$$scope:{ctx:s}};return s[3]!==void 0&&(E.open=s[3]),f=new Se({props:E}),me.push(()=>de(f,"open",y)),{c(){e=v("div"),A(t.$$.fragment),n=C(),o=v("span"),r=N("Editing file "),i=v("u"),a=N(s[5]),u=C(),A(f.$$.fragment),this.h()},l(p){e=S(p,"DIV",{style:!0});var b=B(e);R(t.$$.fragment,b),n=I(b),o=S(b,"SPAN",{});var w=B(o);r=M(w,"Editing file "),i=S(w,"U",{});var k=B(i);a=M(k,s[5]),k.forEach($),w.forEach($),b.forEach($),u=I(p),R(f.$$.fragment,p),this.h()},h(){te(e,"display","flex"),te(e,"align-items","baseline")},m(p,b){d(p,e,b),j(t,e,null),L(e,n),L(e,o),L(o,r),L(o,i),L(i,a),d(p,u,b),j(f,p,b),g=!0},p(p,[b]){const w={};b&524288&&(w.$$scope={dirty:b,ctx:p}),t.$set(w),(!g||b&32)&&x(a,p[5]);const k={};b&524340&&(k.$$scope={dirty:b,ctx:p}),!m&&b&8&&(m=!0,k.open=p[3],pe(()=>m=!1)),f.$set(k)},i(p){g||(J(t.$$.fragment,p),J(f.$$.fragment,p),g=!0)},o(p){O(t.$$.fragment,p),O(f.$$.fragment,p),g=!1},d(p){p&&($(e),$(u)),P(t),P(f,p)}}}function De(s,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",s),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Te(s,e,t){let n,o=ne,r=()=>(o(),o=le(g,_=>t(4,n=_)),g),i,a=ne,u=()=>(a(),a=le(m,_=>t(5,i=_)),m);s.$$.on_destroy.push(()=>o()),s.$$.on_destroy.push(()=>a());let{files:f}=e,{currentFile:m}=e;u();let{state:g}=e;r();let y=f.getFileList(),E=!1;function p(){let _=window.prompt(`Rename file ${i} to what?`,i);if(_){let h=f.key(i),T=window.localStorage.getItem(h);window.localStorage.setItem(f.key(_),T),window.localStorage.removeItem(h),H(m,i=_,i),t(2,y=f.getFileList())}}function b(){De(i+".json",JSON.stringify(n))}async function w(){window.confirm(`Really delete file ${i}? You can't undo this.`)&&(window.localStorage.removeItem(f.key(i)),await k())}async function k(){H(m,i=f.newFilename(),i),H(g,n=f.emptyState(),n),window.localStorage.setItem(f.key(i),JSON.stringify(n)),t(2,y=f.getFileList()),await ae(`${ie}/${f.prefix}`)}async function U(_,h){let T=_.endsWith(".json")?_.slice(0,-5):_;window.localStorage.setItem(f.key(T),h),t(2,y=f.getFileList()),D(T)}async function D(_){try{let h=f.loadFile(_);H(m,i=_,i),H(g,n=h,n),await ae(`${ie}/${f.prefix}`)}catch(h){window.alert(`Couldn't load ${_}: ${h}`)}}const Y=()=>t(3,E=!0),K=_=>D(_);function W(_){E=_,t(3,E)}return s.$$set=_=>{"files"in _&&t(12,f=_.files),"currentFile"in _&&u(t(0,m=_.currentFile)),"state"in _&&r(t(1,g=_.state))},[m,g,y,E,n,i,p,b,w,k,U,D,f,Y,K,W]}class et extends $e{constructor(e){super(),_e(this,e,Te,Be,ue,{files:12,currentFile:0,state:1})}}export{et as F};
