import{s as R,p as he,r as ze,l as X,u as Y,m as Z,o as p,I as S,y as ie,i as x,f as N,T as Pe,U as Se,k as J,V as He,W as je,w as Be,e as _e,c as de,b as ge,A as De}from"./scheduler.BJRqm_YT.js";import{S as $,i as ee,e as Ae,c as ke,a as be,m as Oe,t as d,b,d as ye,g as Le,f as ve}from"./index.18SuDt2z.js";import{L as We,g as we,m as Ve,a as H,i as Ne}from"./MapLibreMap.Ck6raeBt.js";function qe(o){let n;const e=o[15].default,t=X(e,o,o[23],null);return{c(){t&&t.c()},l(f){t&&t.l(f)},m(f,l){t&&t.m(f,l),n=!0},p(f,l){t&&t.p&&(!n||l&8388608)&&Y(t,e,f,f[23],n?p(e,f[23],l,null):Z(f[23]),null)},i(f){n||(d(t,f),n=!0)},o(f){b(t,f),n=!1},d(f){t&&t.d(f)}}}function Ge(o){let n,e,t;function f(s){o[16](s)}let l={id:o[1],type:"line",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],minzoom:o[9],maxzoom:o[10],hoverCursor:o[11],manageHoverState:o[12],eventsIfTopMost:o[13],interactive:o[14],$$slots:{default:[qe]},$$scope:{ctx:o}};return o[0]!==void 0&&(l.hovered=o[0]),n=new We({props:l}),he.push(()=>Ae(n,"hovered",f)),n.$on("click",o[17]),n.$on("dblclick",o[18]),n.$on("contextmenu",o[19]),n.$on("mouseenter",o[20]),n.$on("mousemove",o[21]),n.$on("mouseleave",o[22]),{c(){ke(n.$$.fragment)},l(s){be(n.$$.fragment,s)},m(s,i){Oe(n,s,i),t=!0},p(s,[i]){const a={};i&2&&(a.id=s[1]),i&4&&(a.source=s[2]),i&8&&(a.sourceLayer=s[3]),i&16&&(a.beforeId=s[4]),i&32&&(a.beforeLayerType=s[5]),i&64&&(a.paint=s[6]),i&128&&(a.layout=s[7]),i&256&&(a.filter=s[8]),i&512&&(a.minzoom=s[9]),i&1024&&(a.maxzoom=s[10]),i&2048&&(a.hoverCursor=s[11]),i&4096&&(a.manageHoverState=s[12]),i&8192&&(a.eventsIfTopMost=s[13]),i&16384&&(a.interactive=s[14]),i&8388608&&(a.$$scope={dirty:i,ctx:s}),!e&&i&1&&(e=!0,a.hovered=s[0],ze(()=>e=!1)),n.$set(a)},i(s){t||(d(n.$$.fragment,s),t=!0)},o(s){b(n.$$.fragment,s),t=!1},d(s){ye(n,s)}}}function Ue(o,n,e){let{$$slots:t={},$$scope:f}=n,{id:l=we("line")}=n,{source:s=void 0}=n,{sourceLayer:i=void 0}=n,{beforeId:a=void 0}=n,{beforeLayerType:j=void 0}=n,{paint:B}=n,{layout:q=void 0}=n,{filter:M=void 0}=n,{minzoom:L=void 0}=n,{maxzoom:v=void 0}=n,{hoverCursor:T=void 0}=n,{manageHoverState:h=!1}=n,{hovered:O=null}=n,{eventsIfTopMost:I=!1}=n,{interactive:E=!0}=n;function D(r){O=r,e(0,O)}function A(r){S.call(this,o,r)}function W(r){S.call(this,o,r)}function _(r){S.call(this,o,r)}function z(r){S.call(this,o,r)}function m(r){S.call(this,o,r)}function w(r){S.call(this,o,r)}return o.$$set=r=>{"id"in r&&e(1,l=r.id),"source"in r&&e(2,s=r.source),"sourceLayer"in r&&e(3,i=r.sourceLayer),"beforeId"in r&&e(4,a=r.beforeId),"beforeLayerType"in r&&e(5,j=r.beforeLayerType),"paint"in r&&e(6,B=r.paint),"layout"in r&&e(7,q=r.layout),"filter"in r&&e(8,M=r.filter),"minzoom"in r&&e(9,L=r.minzoom),"maxzoom"in r&&e(10,v=r.maxzoom),"hoverCursor"in r&&e(11,T=r.hoverCursor),"manageHoverState"in r&&e(12,h=r.manageHoverState),"hovered"in r&&e(0,O=r.hovered),"eventsIfTopMost"in r&&e(13,I=r.eventsIfTopMost),"interactive"in r&&e(14,E=r.interactive),"$$scope"in r&&e(23,f=r.$$scope)},[O,l,s,i,a,j,B,q,M,L,v,T,h,I,E,t,D,A,W,_,z,m,w,f]}class nn extends ${constructor(n){super(),ee(this,n,Ue,Ge,R,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}const Fe=o=>({features:o[0]&16,data:o[0]&16,map:o[0]&4,close:o[0]&1}),re=o=>{var n;return{features:o[4],data:(n=o[4])==null?void 0:n[0],map:o[2],close:o[31]}};function ce(o){let n,e,t=(o[4]||o[3]instanceof H.Marker)&&ae(o);return{c(){n=_e("div"),t&&t.c()},l(f){n=de(f,"DIV",{});var l=ge(n);t&&t.l(l),l.forEach(N)},m(f,l){x(f,n,l),t&&t.m(n,null),o[32](n),e=!0},p(f,l){f[4]||f[3]instanceof H.Marker?t?(t.p(f,l),l[0]&24&&d(t,1)):(t=ae(f),t.c(),d(t,1),t.m(n,null)):t&&(Le(),b(t,1,1,()=>{t=null}),ve())},i(f){e||(d(t),e=!0)},o(f){b(t),e=!1},d(f){f&&N(n),t&&t.d(),o[32](null)}}}function ae(o){let n;const e=o[30].default,t=X(e,o,o[29],re);return{c(){t&&t.c()},l(f){t&&t.l(f)},m(f,l){t&&t.m(f,l),n=!0},p(f,l){t&&t.p&&(!n||l[0]&536870933)&&Y(t,e,f,f[29],n?p(e,f[29],l,Fe):Z(f[29]),re)},i(f){n||(d(t,f),n=!0)},o(f){b(t,f),n=!1},d(f){t&&t.d(f)}}}function Je(o){let n,e,t=o[9].default&&ce(o);return{c(){t&&t.c(),n=ie()},l(f){t&&t.l(f),n=ie()},m(f,l){t&&t.m(f,l),x(f,n,l),e=!0},p(f,l){f[9].default?t?(t.p(f,l),l[0]&512&&d(t,1)):(t=ce(f),t.c(),d(t,1),t.m(n.parentNode,n)):t&&(Le(),b(t,1,1,()=>{t=null}),ve())},i(f){e||(d(t),e=!0)},o(f){b(t),e=!1},d(f){f&&N(n),t&&t.d(f)}}}function Ke(o,n,e){let t,f,l,s,i,a,{$$slots:j={},$$scope:B}=n;const q=Pe(j);let{closeButton:M=void 0}=n,{closeOnClickOutside:L=!0}=n,{closeOnClickInside:v=!1}=n,{closeOnMove:T=!1}=n,{openOn:h="click"}=n,{openIfTopMost:O=!0}=n,{focusAfterOpen:I=!0}=n,{anchor:E=void 0}=n,{offset:D=void 0}=n,{popupClass:A=void 0}=n,{maxWidth:W=void 0}=n,{lngLat:_=void 0}=n,{html:z=void 0}=n,{open:m=!1}=n;const w=Se(),{map:r,popupTarget:ne,layerEvent:G,layer:te,eventTopMost:Ce}=Ve();J(o,r,u=>e(2,l=u)),J(o,ne,u=>e(3,i=u)),J(o,G,u=>e(28,s=u)),J(o,te,u=>e(35,a=u));const Me=["click","dblclick","contextmenu"];let c,U=!1,y;function Te(){if(!c)return;let u=c.getElement();!u||u===y||(y=u,h==="hover"&&(y.style.pointerEvents="none"),y.addEventListener("mouseenter",()=>{e(24,U=!0)},{passive:!0}),y.addEventListener("mouseleave",()=>{e(24,U=!1)},{passive:!0}),y.addEventListener("click",()=>{v&&e(0,m=!1)},{passive:!0}))}He(()=>{if(l)return l.on("click",F),l.on("contextmenu",F),typeof i=="string"&&(l.on("click",i,C),l.on("dblclick",i,C),l.on("contextmenu",i,C),l.on("mousemove",i,se),l.on("mouseleave",i,ue),l.on("touchstart",i,fe),l.on("touchend",i,le)),()=>{l!=null&&l.loaded()&&(c==null||c.remove(),l.off("click",F),l.off("contextmenu",F),i instanceof H.Marker?i.getPopup()===c&&i.setPopup(void 0):typeof i=="string"&&(l.off("click",i,C),l.off("dblclick",i,C),l.off("contextmenu",i,C),l.off("mousemove",i,se),l.off("mouseleave",i,ue),l.off("touchstart",i,fe),l.off("touchend",i,le)))}});function oe(u){return O?!("marker"in u)&&!Ne(u)&&Ce(u)!==a:!1}let g=null,k="normal";function C(u){u.type===h&&(oe(u)||("layerType"in u?u.layerType==="deckgl"?(e(10,_=u.coordinate),e(4,g=u.object?[u.object]:null)):(e(10,_=u.lngLat),e(4,g=u.features??[])):(e(10,_=u.lngLat),e(4,g=u.features??[])),setTimeout(()=>e(0,m=!0))))}let P=null;function fe(u){P=u.point}function le(u){if(!P||h!=="hover")return;let K=P.dist(u.point);P=null,K<3&&(e(10,_=u.lngLat),e(4,g=u.features??[]),c.isOpen()?e(25,k="justOpened"):(e(25,k="opening"),e(0,m=!0)))}function ue(u){h!=="hover"||P||k!=="normal"||(e(0,m=!1),e(4,g=null))}function se(u){if(!(h!=="hover"||P||k!=="normal")){if(oe(u)){e(0,m=!1),e(4,g=null);return}e(0,m=!0),e(4,g=u.features??[]),e(10,_=u.lngLat)}}function F(u){if(k==="justOpened"){e(25,k="normal");return}if(!L)return;let K=[y,i instanceof H.Marker?i==null?void 0:i.getElement():null];m&&c.isOpen()&&!K.some(Q=>Q==null?void 0:Q.contains(u.originalEvent.target))&&(u.type==="contextmenu"&&h==="contextmenu"||u.type!=="contextmenu")&&e(0,m=!1)}je(()=>{l&&(c!=null&&c.isOpen())&&c.remove()});let V;const Ie=()=>e(0,m=!1);function Ee(u){he[u?"unshift":"push"](()=>{V=u,e(1,V)})}return o.$$set=u=>{"closeButton"in u&&e(11,M=u.closeButton),"closeOnClickOutside"in u&&e(12,L=u.closeOnClickOutside),"closeOnClickInside"in u&&e(13,v=u.closeOnClickInside),"closeOnMove"in u&&e(14,T=u.closeOnMove),"openOn"in u&&e(15,h=u.openOn),"openIfTopMost"in u&&e(16,O=u.openIfTopMost),"focusAfterOpen"in u&&e(17,I=u.focusAfterOpen),"anchor"in u&&e(18,E=u.anchor),"offset"in u&&e(19,D=u.offset),"popupClass"in u&&e(20,A=u.popupClass),"maxWidth"in u&&e(21,W=u.maxWidth),"lngLat"in u&&e(10,_=u.lngLat),"html"in u&&e(22,z=u.html),"open"in u&&e(0,m=u.open),"$$scope"in u&&e(29,B=u.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&14336&&e(27,t=M??(!L&&!v)),o.$$.dirty[0]&146685952&&(c||(e(23,c=new H.Popup({closeButton:t,closeOnClick:!1,closeOnMove:T,focusAfterOpen:I,maxWidth:W,className:A,anchor:E,offset:D})),y=c.getElement(),c.on("open",()=>{e(0,m=!0),Te(),w("open",c)}),c.on("close",()=>{e(0,m=!1),w("close",c)}),c.on("hover",()=>{w("hover",c)}))),o.$$.dirty[0]&8421384&&c&&i instanceof H.Marker&&(h==="click"?i.setPopup(c):i.getPopup()===c&&i.setPopup(void 0)),o.$$.dirty[0]&268468224&&Me.includes(h)&&(s==null?void 0:s.type)===h&&(C(s),Be(G,s=null,s)),o.$$.dirty[0]&268468224&&e(26,f=h==="hover"&&((s==null?void 0:s.type)==="mousemove"||(s==null?void 0:s.type)==="mouseenter")),o.$$.dirty[0]&352354304&&h==="hover"&&G&&(f&&s&&(s.layerType==="deckgl"?(e(10,_=s.coordinate),e(4,g=s.object?[s.object]:null)):(e(10,_=s.lngLat),e(4,g=s.features??[]))),e(0,m=(f||U)??!1)),o.$$.dirty[0]&12582914&&(V?c.setDOMContent(V):z&&c.setHTML(z)),o.$$.dirty[0]&8389632&&_&&c.setLngLat(_),o.$$.dirty[0]&41943045&&l){let u=c.isOpen();m&&!u?(c.addTo(l),k==="opening"&&e(25,k="justOpened")):!m&&u&&c.remove()}},[m,V,l,i,g,r,ne,G,te,q,_,M,L,v,T,h,O,I,E,D,A,W,z,c,U,k,f,t,s,B,j,Ie,Ee]}class Qe extends ${constructor(n){super(),ee(this,n,Ke,Je,R,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}const Re=o=>({props:o&8}),me=o=>({props:Ze(o[3])});function Xe(o){let n,e;const t=o[1].default,f=X(t,o,o[2],me);return{c(){n=_e("div"),f&&f.c(),this.h()},l(l){n=de(l,"DIV",{class:!0});var s=ge(n);f&&f.l(s),s.forEach(N),this.h()},h(){De(n,"class","govuk-prose")},m(l,s){x(l,n,s),f&&f.m(n,null),e=!0},p(l,s){f&&f.p&&(!e||s&12)&&Y(f,t,l,l[2],e?p(t,l[2],s,Re):Z(l[2]),me)},i(l){e||(d(f,l),e=!0)},o(l){b(f,l),e=!1},d(l){l&&N(n),f&&f.d(l)}}}function Ye(o){let n,e;return n=new Qe({props:{openOn:o[0],$$slots:{default:[Xe,({features:t})=>({3:t}),({features:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){ke(n.$$.fragment)},l(t){be(n.$$.fragment,t)},m(t,f){Oe(n,t,f),e=!0},p(t,[f]){const l={};f&1&&(l.openOn=t[0]),f&12&&(l.$$scope={dirty:f,ctx:t}),n.$set(l)},i(t){e||(d(n.$$.fragment,t),e=!0)},o(t){b(n.$$.fragment,t),e=!1},d(t){ye(n,t)}}}function Ze(o){return o?o[0].properties??{}:{}}function pe(o,n,e){let{$$slots:t={},$$scope:f}=n,{openOn:l="hover"}=n;return o.$$set=s=>{"openOn"in s&&e(0,l=s.openOn),"$$scope"in s&&e(2,f=s.$$scope)},[l,t,f]}class tn extends ${constructor(n){super(),ee(this,n,pe,Ye,R,{openOn:0})}}export{nn as L,tn as P};
