import{s as ee,l as _e,e as v,c as F,b as P,f as m,r as H,i as d,u as pe,m as de,o as ge,x as me,E as $e,t as R,a as I,d as j,g as C,v as be,h as L,j as x,F as he,n as se,S as oe,M as z,p as ae,I as X}from"./scheduler.DQXnSe5h.js";import{S as te,i as le,t as N,b as M,c as A,a as D,m as J,d as O,f as we}from"./index.B4AQako7.js";import{e as re,u as ye,d as ke}from"./each.B8wci2m2.js";import{g as ie}from"./entry.BVkeTHJ9.js";import{b as fe}from"./paths.Dixon0QY.js";import{C as ve}from"./CollapsibleCard.Bt9_rMyo.js";import{F as Fe}from"./FormElement.9jXQPbWv.js";import{v as Ee}from"./v4.D8aEg3BZ.js";import{S as Z,W as Se}from"./WarningButton.CISwBlnQ.js";import{T as Ie}from"./TextArea.DGTzGLPf.js";import"./Modal.svelte_svelte_type_style_lang.2NhczJl8.js";import{M as Ce}from"./Modal.cO-kjbJ8.js";function Le(s){let e,t;const l=s[1].default,n=_e(l,s,s[0],null);return{c(){e=v("div"),n&&n.c(),this.h()},l(o){e=F(o,"DIV",{class:!0});var i=P(e);n&&n.l(i),i.forEach(m),this.h()},h(){H(e,"class","govuk-button-group")},m(o,i){d(o,e,i),n&&n.m(e,null),t=!0},p(o,[i]){n&&n.p&&(!t||i&1)&&pe(n,l,o,o[0],t?ge(l,o[0],i,null):de(o[0]),null)},i(o){t||(N(n,o),t=!0)},o(o){M(n,o),t=!1},d(o){o&&m(e),n&&n.d(o)}}}function Ne(s,e,t){let{$$slots:l={},$$scope:n}=e;return s.$$set=o=>{"$$scope"in o&&t(0,n=o.$$scope)},[n,l]}class Me extends te{constructor(e){super(),le(this,e,Ne,Le,ee,{})}}function Re(s){let e,t,l;return{c(){e=v("input"),this.h()},l(n){e=F(n,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){e.disabled=s[1],H(e,"class","govuk-file-upload"),H(e,"id",s[4]),H(e,"type","file")},m(n,o){d(n,e,o),s[6](e),t||(l=me(e,"change",s[3]),t=!0)},p(n,o){o&2&&(e.disabled=n[1])},d(n){n&&m(e),s[6](null),t=!1,l()}}}function je(s){let e,t;return e=new Fe({props:{label:s[0],id:s[4],$$slots:{default:[Re]},$$scope:{ctx:s}}}),{c(){A(e.$$.fragment)},l(l){D(e.$$.fragment,l)},m(l,n){J(e,l,n),t=!0},p(l,[n]){const o={};n&1&&(o.label=l[0]),n&134&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Ae(s,e,t){let{label:l}=e,{onLoad:n}=e,{disabled:o=!1}=e,i;async function r($){let g=i.files[0].name,y=await i.files[0].text();n(g,y)}let u=Ee();function f($){$e[$?"unshift":"push"](()=>{i=$,t(2,i)})}return s.$$set=$=>{"label"in $&&t(0,l=$.label),"onLoad"in $&&t(5,n=$.onLoad),"disabled"in $&&t(1,o=$.disabled)},[l,o,i,r,u,n,f]}class De extends te{constructor(e){super(),le(this,e,Ae,je,ee,{label:0,onLoad:5,disabled:1})}}function ue(s,e,t){const l=s.slice();return l[16]=e[t],l}function Je(s){let e;return{c(){e=R("Manage files")},l(t){e=j(t,"Manage files")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Oe(s){let e;return{c(){e=R("Rename")},l(t){e=j(t,"Rename")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Pe(s){let e;return{c(){e=R("Export")},l(t){e=j(t,"Export")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Ue(s){let e;return{c(){e=R("Delete")},l(t){e=j(t,"Delete")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function Ye(s){let e,t,l,n,o,i;return e=new Z({props:{$$slots:{default:[Oe]},$$scope:{ctx:s}}}),e.$on("click",s[6]),l=new Z({props:{$$slots:{default:[Pe]},$$scope:{ctx:s}}}),l.$on("click",s[7]),o=new Se({props:{$$slots:{default:[Ue]},$$scope:{ctx:s}}}),o.$on("click",s[8]),{c(){A(e.$$.fragment),t=I(),A(l.$$.fragment),n=I(),A(o.$$.fragment)},l(r){D(e.$$.fragment,r),t=C(r),D(l.$$.fragment,r),n=C(r),D(o.$$.fragment,r)},m(r,u){J(e,r,u),d(r,t,u),J(l,r,u),d(r,n,u),J(o,r,u),i=!0},p(r,u){const f={};u&524288&&(f.$$scope={dirty:u,ctx:r}),e.$set(f);const $={};u&524288&&($.$$scope={dirty:u,ctx:r}),l.$set($);const g={};u&524288&&(g.$$scope={dirty:u,ctx:r}),o.$set(g)},i(r){i||(N(e.$$.fragment,r),N(l.$$.fragment,r),N(o.$$.fragment,r),i=!0)},o(r){M(e.$$.fragment,r),M(l.$$.fragment,r),M(o.$$.fragment,r),i=!1},d(r){r&&(m(t),m(n)),O(e,r),O(l,r),O(o,r)}}}function Be(s){let e,t;return e=new Ie({props:{label:"JSON",value:JSON.stringify(s[4],null,"  "),rows:10}}),{c(){A(e.$$.fragment)},l(l){D(e.$$.fragment,l)},m(l,n){J(e,l,n),t=!0},p(l,n){const o={};n&16&&(o.value=JSON.stringify(l[4],null,"  ")),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Te(s){let e;return{c(){e=R("New file")},l(t){e=j(t,"New file")},m(t,l){d(t,e,l)},d(t){t&&m(e)}}}function We(s){let e,t,l=s[16]+"",n,o,i;function r(){return s[14](s[16])}return{c(){e=v("li"),t=v("a"),n=R(l),this.h()},l(u){e=F(u,"LI",{});var f=P(e);t=F(f,"A",{href:!0});var $=P(t);n=j($,l),$.forEach(m),f.forEach(m),this.h()},h(){H(t,"href","#")},m(u,f){d(u,e,f),L(e,t),L(t,n),o||(i=me(t,"click",r),o=!0)},p(u,f){s=u,f&4&&l!==(l=s[16]+"")&&x(n,l)},d(u){u&&m(e),o=!1,i()}}}function Ge(s){let e,t=s[16]+"",l;return{c(){e=v("li"),l=R(t)},l(n){e=F(n,"LI",{});var o=P(e);l=j(o,t),o.forEach(m)},m(n,o){d(n,e,o),L(e,l)},p(n,o){o&4&&t!==(t=n[16]+"")&&x(l,t)},d(n){n&&m(e)}}}function ce(s,e){let t,l;function n(r,u){return r[16]==r[5]?Ge:We}let o=n(e),i=o(e);return{key:s,first:null,c(){t=X(),i.c(),l=X(),this.h()},l(r){t=X(),i.l(r),l=X(),this.h()},h(){this.first=t},m(r,u){d(r,t,u),i.m(r,u),d(r,l,u)},p(r,u){e=r,o===(o=n(e))&&i?i.p(e,u):(i.d(1),i=o(e),i&&(i.c(),i.m(l.parentNode,l)))},d(r){r&&(m(t),m(l)),i.d(r)}}}function Ve(s){let e,t=`All files are auto-saved in your browser's local storage. You can close your
    browser and resume later. You can export the file to your computer to share
    with someone else, and import from a file below.`,l,n,o,i,r,u,f,$,g,y,S,p,b,w,k,U,B,Y,K="Load a saved file:",W,_,h=[],T=new Map,V;$=new Me({props:{$$slots:{default:[Ye]},$$scope:{ctx:s}}}),y=new ve({props:{label:"Debug",$$slots:{default:[Be]},$$scope:{ctx:s}}}),w=new Z({props:{$$slots:{default:[Te]},$$scope:{ctx:s}}}),w.$on("click",s[9]),U=new De({props:{label:"Import from file",onLoad:s[10]}});let Q=re(s[2]);const ne=a=>a[16];for(let a=0;a<Q.length;a+=1){let c=ue(s,Q,a),E=ne(c);T.set(E,h[a]=ce(E,c))}return{c(){e=v("p"),e.textContent=t,l=I(),n=v("p"),o=R("You're currently editing "),i=v("u"),r=R(s[5]),u=R(`
    .`),f=I(),A($.$$.fragment),g=I(),A(y.$$.fragment),S=I(),p=v("hr"),b=I(),A(w.$$.fragment),k=I(),A(U.$$.fragment),B=I(),Y=v("p"),Y.textContent=K,W=I(),_=v("ul");for(let a=0;a<h.length;a+=1)h[a].c()},l(a){e=F(a,"P",{"data-svelte-h":!0}),ae(e)!=="svelte-1yvzirp"&&(e.textContent=t),l=C(a),n=F(a,"P",{});var c=P(n);o=j(c,"You're currently editing "),i=F(c,"U",{});var E=P(i);r=j(E,s[5]),E.forEach(m),u=j(c,`
    .`),c.forEach(m),f=C(a),D($.$$.fragment,a),g=C(a),D(y.$$.fragment,a),S=C(a),p=F(a,"HR",{}),b=C(a),D(w.$$.fragment,a),k=C(a),D(U.$$.fragment,a),B=C(a),Y=F(a,"P",{"data-svelte-h":!0}),ae(Y)!=="svelte-1xydj1w"&&(Y.textContent=K),W=C(a),_=F(a,"UL",{});var q=P(_);for(let G=0;G<h.length;G+=1)h[G].l(q);q.forEach(m)},m(a,c){d(a,e,c),d(a,l,c),d(a,n,c),L(n,o),L(n,i),L(i,r),L(n,u),d(a,f,c),J($,a,c),d(a,g,c),J(y,a,c),d(a,S,c),d(a,p,c),d(a,b,c),J(w,a,c),d(a,k,c),J(U,a,c),d(a,B,c),d(a,Y,c),d(a,W,c),d(a,_,c);for(let E=0;E<h.length;E+=1)h[E]&&h[E].m(_,null);V=!0},p(a,c){(!V||c&32)&&x(r,a[5]);const E={};c&524288&&(E.$$scope={dirty:c,ctx:a}),$.$set(E);const q={};c&524304&&(q.$$scope={dirty:c,ctx:a}),y.$set(q);const G={};c&524288&&(G.$$scope={dirty:c,ctx:a}),w.$set(G),c&2084&&(Q=re(a[2]),h=ye(h,c,ne,1,a,Q,T,_,ke,ce,null,ue))},i(a){V||(N($.$$.fragment,a),N(y.$$.fragment,a),N(w.$$.fragment,a),N(U.$$.fragment,a),V=!0)},o(a){M($.$$.fragment,a),M(y.$$.fragment,a),M(w.$$.fragment,a),M(U.$$.fragment,a),V=!1},d(a){a&&(m(e),m(l),m(n),m(f),m(g),m(S),m(p),m(b),m(k),m(B),m(Y),m(W),m(_)),O($,a),O(y,a),O(w,a),O(U,a);for(let c=0;c<h.length;c+=1)h[c].d()}}}function qe(s){let e,t,l,n,o,i,r,u,f,$,g;r=new Z({props:{$$slots:{default:[Je]},$$scope:{ctx:s}}}),r.$on("click",s[13]);function y(p){s[15](p)}let S={title:"Manage files",$$slots:{default:[Ve]},$$scope:{ctx:s}};return s[3]!==void 0&&(S.open=s[3]),f=new Ce({props:S}),$e.push(()=>we(f,"open",y)),{c(){e=v("div"),t=v("p"),l=R("Editing file "),n=v("u"),o=R(s[5]),i=I(),A(r.$$.fragment),u=I(),A(f.$$.fragment),this.h()},l(p){e=F(p,"DIV",{style:!0});var b=P(e);t=F(b,"P",{});var w=P(t);l=j(w,"Editing file "),n=F(w,"U",{});var k=P(n);o=j(k,s[5]),k.forEach(m),w.forEach(m),i=C(b),D(r.$$.fragment,b),b.forEach(m),u=C(p),D(f.$$.fragment,p),this.h()},h(){be(e,"display","flex")},m(p,b){d(p,e,b),L(e,t),L(t,l),L(t,n),L(n,o),L(e,i),J(r,e,null),d(p,u,b),J(f,p,b),g=!0},p(p,[b]){(!g||b&32)&&x(o,p[5]);const w={};b&524288&&(w.$$scope={dirty:b,ctx:p}),r.$set(w);const k={};b&524340&&(k.$$scope={dirty:b,ctx:p}),!$&&b&8&&($=!0,k.open=p[3],he(()=>$=!1)),f.$set(k)},i(p){g||(N(r.$$.fragment,p),N(f.$$.fragment,p),g=!0)},o(p){M(r.$$.fragment,p),M(f.$$.fragment,p),g=!1},d(p){p&&(m(e),m(u)),O(r),O(f,p)}}}function ze(s,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",s),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function He(s,e,t){let l,n=se,o=()=>(n(),n=oe(g,_=>t(4,l=_)),g),i,r=se,u=()=>(r(),r=oe($,_=>t(5,i=_)),$);s.$$.on_destroy.push(()=>n()),s.$$.on_destroy.push(()=>r());let{files:f}=e,{currentFile:$}=e;u();let{state:g}=e;o();let y=f.getFileList(),S=!1;function p(){let _=window.prompt(`Rename file ${i} to what?`,i);if(_){let h=f.key(i),T=window.localStorage.getItem(h);window.localStorage.setItem(f.key(_),T),window.localStorage.removeItem(h),z($,i=_,i),t(2,y=f.getFileList())}}function b(){ze(i+".json",JSON.stringify(l))}async function w(){window.confirm(`Really delete file ${i}? You can't undo this.`)&&(window.localStorage.removeItem(f.key(i)),await k())}async function k(){z($,i=f.newFilename(),i),z(g,l=f.emptyState(),l),window.localStorage.setItem(f.key(i),JSON.stringify(l)),t(2,y=f.getFileList()),await ie(`${fe}/${f.prefix}`)}async function U(_,h){let T=_.endsWith(".json")?_.slice(0,-5):_;window.localStorage.setItem(f.key(T),h),t(2,y=f.getFileList()),B(T)}async function B(_){try{let h=f.loadFile(_);z($,i=_,i),z(g,l=h,l),await ie(`${fe}/${f.prefix}`)}catch(h){window.alert(`Couldn't load ${_}: ${h}`)}}const Y=()=>t(3,S=!0),K=_=>B(_);function W(_){S=_,t(3,S)}return s.$$set=_=>{"files"in _&&t(12,f=_.files),"currentFile"in _&&u(t(0,$=_.currentFile)),"state"in _&&o(t(1,g=_.state))},[$,g,y,S,l,i,p,b,w,k,U,B,f,Y,K,W]}class rt extends te{constructor(e){super(),le(this,e,He,qe,ee,{files:12,currentFile:0,state:1})}}export{rt as F};
