import{s as k}from"./index.Co1t6wXI.js";import{n as y}from"./data.Ccr9kS34.js";let d={walking:[0,1,2,3,4,5,6,9,10,13,14,15,16,17,18,19,20,21,22,24,25,26,27,28],wheeling:[0,1,2,3,4,5,6,9,10,13,14,15,16,17,18,19,20,21,22,24,25,26,27,28],cycling:[0,1,2,3,4,5,7,9,11,13,14,15,16,17,18,19,22,23,24,25,26,27,28],horse:[0,1,3,4,5,8,9,12,13,14,15,16,17,18,19,22,24,25,26,29]},P={walking:[0,1,2,3,5,6,8,11,14,15,16,17,18,19,21,22,24,25],wheeling:[0,1,2,3,4,5,6,8,11,14,15,16,17,18,19,21,22,24,25],cycling:[0,1,2,3,5,6,7,9,10,12,13,16,19,20,21,22,23,24,25]},S={walking:[0,1,3,5,6,7,8,9,10,14,15],wheeling:[0,1,3,5,6,7,8,9,10,14,15],cycling:[0,1,2,4,7,8,11,12,13,15]};function v(e){let t=e.summary.checkType=="street",r=e.summary.checkType=="path",l=c("Safety",e.safetyCheck,null),i=[l];t?(i.push(c("Accessibility",e.streetCheck,[0,6])),i.push(c("Comfort",e.streetCheck,[7,9])),i.push(c("Directness",e.streetCheck,[10,15])),i.push(c("Attractiveness",e.streetCheck,[16,21])),i.push(c("Cohesion",e.streetCheck,[22,25]))):r&&(i.push(c("Accessibility",e.pathCheck,[0,4])),i.push(c("Comfort",e.pathCheck,[5,15])),i.push(c("Directness",e.pathCheck,[16,19])),i.push(c("Attractiveness",e.pathCheck,[20,24])),i.push(c("Cohesion",e.pathCheck,[25,29])));let n={category:"overall",existing:p(i.map(o=>o.existing)),proposed:p(i.map(o=>o.proposed))},s=[];t?(s.push(c("Social activity",e.streetPlacemakingCheck,[0,2])),s.push(c("Personal security",e.streetPlacemakingCheck,[3,5])),s.push(c("Character and legibility",e.streetPlacemakingCheck,[6,15])),s.push(c("Environment",e.streetPlacemakingCheck,[16,25]))):r&&s.push(c("Social activity",e.pathPlacemakingCheck,[0,2]),c("Personal security",e.pathPlacemakingCheck,[3,5]),c("Character and legibility",e.pathPlacemakingCheck,[6,9]),c("Environment",e.pathPlacemakingCheck,[10,18]));let a={category:"overall",existing:p(s.map(o=>o.existing)),proposed:p(s.map(o=>o.proposed))},h=[];return t?h=f(e.safetyCheck,e.streetCheck,P):r&&(h=f(e.safetyCheck,e.pathCheck,d)),{safetyCheck:l,streetCheck:t?m(l,c("",e.streetCheck,null)):null,streetPlacemaking:t?c("",e.streetPlacemakingCheck,null):null,pathCheck:r?m(l,c("",e.pathCheck,null)):null,pathPlacemaking:r?c("",e.pathPlacemakingCheck,null):null,levelOfService:i,overall:n,placemakingCategories:s,placemakingOverall:a,byMode:h}}function c(e,t,r){return{category:e,existing:C(t.existingScores,e,r),proposed:C(t.proposedScores,e,r)}}function C(e,t,r){let l=r||[0,e.length-1],i=l[0],n=l[1]+1;return u(e.slice(i,n),t)}function u(e,t){let r=e.filter(a=>a!="N/A").length,l=t=="Safety"?3:1,i=r*2*l,n=l*k(e.map(y)),s=n/i*100;return{numberMetrics:r,totalPossibleScore:i,score:n,scorePercent:s}}function p(e){let t=k(e.map(n=>n.numberMetrics)),r=k(e.map(n=>n.totalPossibleScore)),l=k(e.map(n=>n.score)),i=l/r*100;return{numberMetrics:t,totalPossibleScore:r,score:l,scorePercent:i}}function m(e,t){return{category:"",existing:p([e.existing,t.existing]),proposed:p([e.proposed,t.proposed])}}function M(e){return`${Math.round(e.proposed.scorePercent-e.existing.scorePercent)}%`}function f(e,t,r){let l=[];for(let[i,n]of Object.entries(r)){let s=S[i]||[],a={category:"Safety",existing:u(g(e.existingScores,s),"Safety"),proposed:u(g(e.proposedScores,s),"Safety")},h={category:"",existing:u(g(t.existingScores,n),""),proposed:u(g(t.proposedScores,n),"")},o=m(a,h);o.category=i,l.push(o)}return l}function g(e,t){return t.map(r=>e[r])}export{v as g,M as n};
