import{s as U,l as ne,e as E,a as D,c as I,b as T,g as P,f as p,r as v,x as J,i as w,h as S,z,u as le,m as oe,o as ae,B as _e,G as H,a8 as Xe,t as q,d as K,y as ue,j as ye,q as Ze,J as $e,C as me,p as se,D as W,k as B,a9 as Le,T as N,n as he,R as Ge,aa as Ee,A as ke,_ as xe,v as re,w as de,ab as et}from"./scheduler.BBS-fkhU.js";import{S as j,i as O,t as k,b as L,c as A,a as R,m as M,d as V,g as Z,f as $,e as ge}from"./index.B8H3ypVf.js";import{C as tt,D as nt}from"./DefaultButton.Pbp5mObw.js";import{S as Ue,W as lt}from"./WarningButton.CaqyhU7y.js";import{d as qe,u as ot,r as at,i as st,j as rt,m as it,k as ut,l as ft,L as ct,g as mt,s as dt,a as gt}from"./index.CSo5U1BQ.js";import{v as Ke,F as _t}from"./FormElement.Cy4womqK.js";import{e as Ie}from"./each.D79A5KlB.js";import{E as ht}from"./ErrorMessage.BCIKj4J0.js";import{B as bt}from"./ButtonGroup.fhy-VJbf.js";import{w as ie}from"./entry.Ca-4xy8h.js";const pt=o=>({}),Ce=o=>({});function kt(o){let e,n,t,l,a,i,f,m,g;const r=o[5].default,s=ne(r,o,o[4],null),u=o[5].right,c=ne(u,o,o[4],Ce);return{c(){e=E("div"),n=E("input"),t=D(),l=E("label"),s&&s.c(),a=D(),i=E("span"),c&&c.c(),this.h()},l(d){e=I(d,"DIV",{class:!0,style:!0});var _=T(e);n=I(_,"INPUT",{type:!0,class:!0,id:!0}),t=P(_),l=I(_,"LABEL",{class:!0,for:!0,title:!0});var h=T(l);s&&s.l(h),h.forEach(p),a=P(_),i=I(_,"SPAN",{style:!0});var C=T(i);c&&c.l(C),C.forEach(p),_.forEach(p),this.h()},h(){v(n,"type","checkbox"),v(n,"class","govuk-checkboxes__input"),v(n,"id",o[3]),v(l,"class","govuk-label govuk-checkboxes__label"),v(l,"for",o[3]),v(l,"title",o[1]),J(i,"float","right"),v(e,"class","govuk-checkboxes__item"),v(e,"style",o[2])},m(d,_){w(d,e,_),S(e,n),n.checked=o[0],S(e,t),S(e,l),s&&s.m(l,null),S(e,a),S(e,i),c&&c.m(i,null),f=!0,m||(g=[z(n,"change",o[7]),z(n,"change",o[6])],m=!0)},p(d,[_]){_&1&&(n.checked=d[0]),s&&s.p&&(!f||_&16)&&le(s,r,d,d[4],f?ae(r,d[4],_,null):oe(d[4]),null),(!f||_&2)&&v(l,"title",d[1]),c&&c.p&&(!f||_&16)&&le(c,u,d,d[4],f?ae(u,d[4],_,pt):oe(d[4]),Ce)},i(d){f||(k(s,d),k(c,d),f=!0)},o(d){L(s,d),L(c,d),f=!1},d(d){d&&p(e),s&&s.d(d),c&&c.d(d),m=!1,_e(g)}}}function vt(o,e,n){let{$$slots:t={},$$scope:l}=e;const a=Xe(t);let{checked:i}=e,{hint:f=null}=e,g=a.right!==void 0?"float: none":"",r=Ke();function s(c){H.call(this,o,c)}function u(){i=this.checked,n(0,i)}return o.$$set=c=>{"checked"in c&&n(0,i=c.checked),"hint"in c&&n(1,f=c.hint),"$$scope"in c&&n(4,l=c.$$scope)},[i,f,g,r,l,t,s,u]}class yt extends j{constructor(e){super(),O(this,e,vt,kt,U,{checked:0,hint:1})}}function Ne(o,e,n){const t=o.slice();return t[10]=e[n][0],t[11]=e[n][1],t}function ze(o){let e,n,t,l,a=!1,i,f,m=o[11]+"",g,r,s,u,c,d;return u=$e(o[9][0]),{c(){e=E("div"),n=E("input"),i=D(),f=E("label"),g=q(m),s=D(),this.h()},l(_){e=I(_,"DIV",{class:!0});var h=T(e);n=I(h,"INPUT",{class:!0,id:!0,type:!0}),i=P(h),f=I(h,"LABEL",{class:!0,for:!0});var C=T(f);g=K(C,m),C.forEach(p),s=P(h),h.forEach(p),this.h()},h(){v(n,"class","govuk-radios__input"),v(n,"id",t=o[5]+o[10]),v(n,"type","radio"),n.__value=l=o[10],me(n,n.__value),v(f,"class","govuk-label govuk-radios__label"),v(f,"for",r=o[5]+o[10]),v(e,"class","govuk-radios__item"),u.p(n)},m(_,h){w(_,e,h),S(e,n),n.checked=n.__value===o[0],S(e,i),S(e,f),S(f,g),S(e,s),c||(d=[z(n,"change",o[8]),z(n,"change",o[7])],c=!0)},p(_,h){h&4&&t!==(t=_[5]+_[10])&&v(n,"id",t),h&4&&l!==(l=_[10])&&(n.__value=l,me(n,n.__value),a=!0),(a||h&5)&&(n.checked=n.__value===_[0]),h&4&&m!==(m=_[11]+"")&&ye(g,m),h&4&&r!==(r=_[5]+_[10])&&v(f,"for",r)},d(_){_&&p(e),u.r(),c=!1,_e(d)}}}function Lt(o){let e,n,t,l,a,i,f,m,g;i=new ht({props:{errorMessage:o[4]}});let r=Ie(o[2]),s=[];for(let u=0;u<r.length;u+=1)s[u]=ze(Ne(o,r,u));return{c(){e=E("div"),n=E("fieldset"),t=E("legend"),l=q(o[1]),a=D(),A(i.$$.fragment),f=D(),m=E("div");for(let u=0;u<s.length;u+=1)s[u].c();this.h()},l(u){e=I(u,"DIV",{class:!0});var c=T(e);n=I(c,"FIELDSET",{class:!0});var d=T(n);t=I(d,"LEGEND",{class:!0});var _=T(t);l=K(_,o[1]),_.forEach(p),a=P(d),R(i.$$.fragment,d),f=P(d),m=I(d,"DIV",{class:!0,"data-module":!0});var h=T(m);for(let C=0;C<s.length;C+=1)s[C].l(h);h.forEach(p),d.forEach(p),c.forEach(p),this.h()},h(){v(t,"class","govuk-fieldset__legend govuk-label--s"),v(m,"class","govuk-radios"),v(m,"data-module","govuk-radios"),ue(m,"govuk-radios--inline",o[3]),ue(m,"govuk-radios--small",o[3]),v(n,"class","govuk-fieldset"),v(e,"class","govuk-form-group")},m(u,c){w(u,e,c),S(e,n),S(n,t),S(t,l),S(n,a),M(i,n,null),S(n,f),S(n,m);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(m,null);g=!0},p(u,[c]){(!g||c&2)&&ye(l,u[1]);const d={};if(c&16&&(d.errorMessage=u[4]),i.$set(d),c&37){r=Ie(u[2]);let _;for(_=0;_<r.length;_+=1){const h=Ne(u,r,_);s[_]?s[_].p(h,c):(s[_]=ze(h),s[_].c(),s[_].m(m,null))}for(;_<s.length;_+=1)s[_].d(1);s.length=r.length}(!g||c&8)&&ue(m,"govuk-radios--inline",u[3]),(!g||c&8)&&ue(m,"govuk-radios--small",u[3])},i(u){g||(k(i.$$.fragment,u),g=!0)},o(u){L(i.$$.fragment,u),g=!1},d(u){u&&p(e),V(i),Ze(s,u)}}}function wt(o,e,n){let t,{legend:l}=e,{choices:a}=e,{inlineSmall:i=!1}=e,{required:f=!1}=e,{value:m}=e,g=Ke();const r=[[]];function s(c){H.call(this,o,c)}function u(){m=this.__value,n(0,m)}return o.$$set=c=>{"legend"in c&&n(1,l=c.legend),"choices"in c&&n(2,a=c.choices),"inlineSmall"in c&&n(3,i=c.inlineSmall),"required"in c&&n(6,f=c.required),"value"in c&&n(0,m=c.value)},o.$$.update=()=>{o.$$.dirty&65&&n(4,t=f&&m==""?"Required":"")},[m,l,a,i,t,g,f,s,u,r]}class St extends j{constructor(e){super(),O(this,e,wt,Lt,U,{legend:1,choices:2,inlineSmall:3,required:6,value:0})}}function Et(o){let e,n="You can manually use high-quality Bluesky imagery if you have a valid key.";return{c(){e=E("p"),e.textContent=n},l(t){e=I(t,"P",{"data-svelte-h":!0}),se(e)!=="svelte-1e80rhw"&&(e.textContent=n)},m(t,l){w(t,e,l)},d(t){t&&p(e)}}}function It(o){let e,n="The map should be showing Bluesky imagery.";return{c(){e=E("p"),e.textContent=n},l(t){e=I(t,"P",{"data-svelte-h":!0}),se(e)!=="svelte-13v9ac9"&&(e.textContent=n)},m(t,l){w(t,e,l)},d(t){t&&p(e)}}}function Ct(o){let e;return{c(){e=q("Set Bluesky API key")},l(n){e=K(n,"Set Bluesky API key")},m(n,t){w(n,e,t)},d(n){n&&p(e)}}}function Nt(o){let e,n,t=`<i>Note this feature is temporary -- in the future, you will login and
      automatically have access to this imagery.</i>`,l,a,i;function f(r,s){return Bt()?It:Et}let g=f()(o);return a=new Ue({props:{$$slots:{default:[Ct]},$$scope:{ctx:o}}}),a.$on("click",Dt),{c(){g.c(),e=D(),n=E("p"),n.innerHTML=t,l=D(),A(a.$$.fragment)},l(r){g.l(r),e=P(r),n=I(r,"P",{"data-svelte-h":!0}),se(n)!=="svelte-jc29jc"&&(n.innerHTML=t),l=P(r),R(a.$$.fragment,r)},m(r,s){g.m(r,s),w(r,e,s),w(r,n,s),w(r,l,s),M(a,r,s),i=!0},p(r,s){const u={};s&1&&(u.$$scope={dirty:s,ctx:r}),a.$set(u)},i(r){i||(k(a.$$.fragment,r),i=!0)},o(r){L(a.$$.fragment,r),i=!1},d(r){r&&(p(e),p(n),p(l)),g.d(r),V(a,r)}}}function zt(o){let e,n;return e=new tt({props:{label:"Bluesky imagery",$$slots:{default:[Nt]},$$scope:{ctx:o}}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,[l]){const a={};l&1&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}let ve="bluesky-api-key";function Bt(){let o=window.localStorage.getItem(ve);return o!=null&&o.length>0}function Dt(){let o=window.prompt("Enter the API key provided to you",window.localStorage.getItem(ve)||"");window.localStorage.setItem(ve,o||""),window.location.reload()}class kn extends j{constructor(e){super(),O(this,e,null,zt,U,{})}}function Be(o){let e=o[0],n,t,l=De(o);return{c(){l.c(),n=W()},l(a){l.l(a),n=W()},m(a,i){l.m(a,i),w(a,n,i),t=!0},p(a,i){i&1&&U(e,e=a[0])?(Z(),L(l,1,1,he),$(),l=De(a),l.c(),k(l,1),l.m(n.parentNode,n)):l.p(a,i)},i(a){t||(k(l),t=!0)},o(a){L(l),t=!1},d(a){a&&p(n),l.d(a)}}}function De(o){let e;const n=o[10].default,t=ne(n,o,o[9],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&512)&&le(t,n,l,l[9],e?ae(n,l[9],a,null):oe(l[9]),null)},i(l){e||(k(t,l),e=!0)},o(l){L(t,l),e=!1},d(l){t&&t.d(l)}}}function Pt(o){let e,n,t=o[0]&&Be(o);return{c(){t&&t.c(),e=W()},l(l){t&&t.l(l),e=W()},m(l,a){t&&t.m(l,a),w(l,e,a),n=!0},p(l,[a]){l[0]?t?(t.p(l,a),a&1&&k(t,1)):(t=Be(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(Z(),L(t,1,1,()=>{t=null}),$())},i(l){n||(k(t),n=!0)},o(l){L(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Tt(o,e,n){let t,l,{$$slots:a={},$$scope:i}=e,{id:f=qe("image")}=e,{url:m}=e,{coordinates:g}=e;const{map:r,self:s}=ot();B(o,r,d=>n(8,l=d)),B(o,s,d=>n(0,t=d));let u,c=!0;return Le(()=>{t&&l&&(at(r,t,u),N(s,t=null,t),n(6,u=void 0))}),o.$$set=d=>{"id"in d&&n(3,f=d.id),"url"in d&&n(4,m=d.url),"coordinates"in d&&n(5,g=d.coordinates),"$$scope"in d&&n(9,i=d.$$scope)},o.$$.update=()=>{o.$$.dirty&313&&l&&t!==f&&(N(s,t=f,t),st(l,t,rt({type:"image",url:m,coordinates:g}),d=>l&&d===t,()=>{t&&(n(6,u=l==null?void 0:l.getSource(t)),n(7,c=!0))})),o.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,u=l==null?void 0:l.getSource(f))})),o.$$.dirty&224&&u&&(c?n(7,c=!1):u.setCoordinates(g))},[t,r,s,f,m,g,u,c,l,i,a]}class At extends j{constructor(e){super(),O(this,e,Tt,Pt,U,{id:3,url:4,coordinates:5})}}function Rt(o,e,n){let t;const l=Ge();let{layer:a=void 0}=e;const{map:i}=it();B(o,i,r=>n(2,t=r));function f(r){l(r.type,{...r,map:i})}const m=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],g=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return Le(()=>{if(t)if(a)for(const r of m)t.off(r,a,f);else for(const r of g)t.off(r,f)}),o.$$set=r=>{"layer"in r&&n(1,a=r.layer)},o.$$.update=()=>{if(o.$$.dirty&6&&t)if(a)for(const r of m)t.on(r,a,f);else for(const r of g)t.on(r,f)},[i,a,t]}class vn extends j{constructor(e){super(),O(this,e,Rt,null,U,{layer:1})}}const Mt=o=>({marker:o&8}),Pe=o=>({marker:o[3]});function Vt(o){let e,n,t,l,a,i,f;const m=o[19].default,g=ne(m,o,o[18],Pe);return{c(){e=E("div"),g&&g.c(),this.h()},l(r){e=I(r,"DIV",{tabindex:!0,role:!0});var s=T(e);g&&g.l(s),s.forEach(p),this.h()},h(){v(e,"tabindex",n=o[1]?0:void 0),v(e,"role",t=o[1]?"button":void 0),J(e,"z-index",o[2])},m(r,s){w(r,e,s),g&&g.m(e,null),a=!0,i||(f=[Ee(o[7].call(null,e)),Ee(l=Gt.call(null,e,o[0])),z(e,"click",ke(o[20])),z(e,"dblclick",ke(o[21])),z(e,"contextmenu",ke(o[22])),z(e,"mouseenter",o[23]),z(e,"mouseleave",o[24]),z(e,"mousemove",o[25]),z(e,"keydown",o[8])],i=!0)},p(r,[s]){g&&g.p&&(!a||s&262152)&&le(g,m,r,r[18],a?ae(m,r[18],s,Mt):oe(r[18]),Pe),(!a||s&2&&n!==(n=r[1]?0:void 0))&&v(e,"tabindex",n),(!a||s&2&&t!==(t=r[1]?"button":void 0))&&v(e,"role",t),l&&xe(l.update)&&s&1&&l.update.call(null,r[0]),s&4&&J(e,"z-index",r[2])},i(r){a||(k(g,r),a=!0)},o(r){L(g,r),a=!1},d(r){r&&p(e),g&&g.d(r),i=!1,_e(f)}}}function Gt(o,e){const n=o.className;function t(l){l?o.className=`${n} ${l}`:o.className=n}return t(e),{update:t}}function Ut(o,e,n){let t,l,a,{$$slots:i={},$$scope:f}=e,{marker:m=void 0}=e,{lngLat:g}=e,{class:r=void 0}=e,{interactive:s=!0}=e,{asButton:u=!1}=e,{draggable:c=!1}=e,{feature:d=null}=e,{offset:_=void 0}=e,{zIndex:h=void 0}=e,{rotation:C=0}=e,{opacity:F=1}=e;const y=Ge(),{map:we,layerEvent:be,self:pe}=ut();B(o,we,b=>n(27,a=b)),B(o,be,b=>n(26,t=b)),B(o,pe,b=>n(3,l=b));function We(b){N(pe,l=new ft.Marker({element:b,rotation:C,draggable:c,offset:_,opacity:F.toString()}).setLngLat(g).addTo(a),l),n(11,m=l);const Y=()=>G("dragstart"),x=()=>{Se(),G("drag")},ee=()=>{Se(),G("dragend")};return c&&(l.on("dragstart",Y),l.on("drag",x),l.on("dragend",ee)),{destroy(){c&&(l==null||l.off("dragstart",Y),l==null||l.off("drag",x),l==null||l.off("dragend",ee)),n(11,m=void 0),l==null||l.remove()}}}function Se(){let b=l==null?void 0:l.getLngLat();b&&(Array.isArray(g)?n(10,g=[b.lng,b.lat]):g&&"lon"in g?n(10,g={lon:b.lng,lat:b.lat}):n(10,g=b))}function je(b){b.key===" "&&(b.preventDefault(),b.stopPropagation(),G("click"))}function G(b){if(!s)return;let Y=l==null?void 0:l.getLngLat();if(!Y)return;const x=[Y.lng,Y.lat];let ee={map:a,marker:l,lngLat:x,features:[{type:"Feature",properties:(d==null?void 0:d.properties)??{},geometry:{type:"Point",coordinates:x}}]};N(be,t={...ee,layerType:"marker",type:b},t),y(b,ee)}const Oe=()=>G("click"),Fe=()=>G("dblclick"),He=()=>G("contextmenu"),Je=b=>{G("mouseenter")},Ye=()=>{G("mouseleave")},Qe=()=>G("mousemove");return o.$$set=b=>{"marker"in b&&n(11,m=b.marker),"lngLat"in b&&n(10,g=b.lngLat),"class"in b&&n(0,r=b.class),"interactive"in b&&n(12,s=b.interactive),"asButton"in b&&n(1,u=b.asButton),"draggable"in b&&n(13,c=b.draggable),"feature"in b&&n(14,d=b.feature),"offset"in b&&n(15,_=b.offset),"zIndex"in b&&n(2,h=b.zIndex),"rotation"in b&&n(16,C=b.rotation),"opacity"in b&&n(17,F=b.opacity),"$$scope"in b&&n(18,f=b.$$scope)},o.$$.update=()=>{o.$$.dirty&1032&&(l==null||l.setLngLat(g)),o.$$.dirty&32776&&(l==null||l.setOffset(_??[0,0])),o.$$.dirty&65544&&(l==null||l.setRotation(C)),o.$$.dirty&131080&&(l==null||l.setOpacity(F.toString()))},[r,u,h,l,we,be,pe,We,je,G,g,m,s,c,d,_,C,F,f,i,Oe,Fe,He,Je,Ye,Qe]}class Te extends j{constructor(e){super(),O(this,e,Ut,Vt,U,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}function qt(o){let e;const n=o[8].default,t=ne(n,o,o[15],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&32768)&&le(t,n,l,l[15],e?ae(n,l[15],a,null):oe(l[15]),null)},i(l){e||(k(t,l),e=!0)},o(l){L(t,l),e=!1},d(l){t&&t.d(l)}}}function Kt(o){let e,n;return e=new ct({props:{id:o[0],type:"raster",source:o[1],beforeId:o[2],beforeLayerType:o[3],paint:o[4],layout:o[5],minzoom:o[6],maxzoom:o[7],$$slots:{default:[qt]},$$scope:{ctx:o}}}),e.$on("click",o[9]),e.$on("dblclick",o[10]),e.$on("contextmenu",o[11]),e.$on("mouseenter",o[12]),e.$on("mousemove",o[13]),e.$on("mouseleave",o[14]),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,[l]){const a={};l&1&&(a.id=t[0]),l&2&&(a.source=t[1]),l&4&&(a.beforeId=t[2]),l&8&&(a.beforeLayerType=t[3]),l&16&&(a.paint=t[4]),l&32&&(a.layout=t[5]),l&64&&(a.minzoom=t[6]),l&128&&(a.maxzoom=t[7]),l&32768&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Wt(o,e,n){let{$$slots:t={},$$scope:l}=e,{id:a=qe("raster-layer")}=e,{source:i=void 0}=e,{beforeId:f=void 0}=e,{beforeLayerType:m=void 0}=e,{paint:g}=e,{layout:r=void 0}=e,{minzoom:s=void 0}=e,{maxzoom:u=void 0}=e;function c(y){H.call(this,o,y)}function d(y){H.call(this,o,y)}function _(y){H.call(this,o,y)}function h(y){H.call(this,o,y)}function C(y){H.call(this,o,y)}function F(y){H.call(this,o,y)}return o.$$set=y=>{"id"in y&&n(0,a=y.id),"source"in y&&n(1,i=y.source),"beforeId"in y&&n(2,f=y.beforeId),"beforeLayerType"in y&&n(3,m=y.beforeLayerType),"paint"in y&&n(4,g=y.paint),"layout"in y&&n(5,r=y.layout),"minzoom"in y&&n(6,s=y.minzoom),"maxzoom"in y&&n(7,u=y.maxzoom),"$$scope"in y&&n(15,l=y.$$scope)},[a,i,f,m,g,r,s,u,t,c,d,_,h,C,F,l]}class jt extends j{constructor(e){super(),O(this,e,Wt,Kt,U,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}const{window:Ot}=mt;function Ft(o){let e;return{c(){e=q("StreetView")},l(n){e=K(n,"StreetView")},m(n,t){w(n,e,t)},d(n){n&&p(e)}}}function Ae(o){let e,n,t;function l(i){o[5](i)}let a={legend:"Source",choices:[["google","Google StreetView"],["bing","Bing Streetside"]],inlineSmall:!0};return o[1]!==void 0&&(a.value=o[1]),e=new St({props:a}),re.push(()=>ge(e,"value",l)),{c(){A(e.$$.fragment)},l(i){R(e.$$.fragment,i)},m(i,f){M(e,i,f),t=!0},p(i,f){const m={};!n&&f&2&&(n=!0,m.value=i[1],de(()=>n=!1)),e.$set(m)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){L(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Ht(o){let e,n,t,l,a,i,f;function m(s){o[4](s)}let g={$$slots:{default:[Ft]},$$scope:{ctx:o}};o[0]!==void 0&&(g.checked=o[0]),e=new yt({props:g}),re.push(()=>ge(e,"checked",m));let r=o[0]&&Ae(o);return{c(){A(e.$$.fragment),t=D(),r&&r.c(),l=W()},l(s){R(e.$$.fragment,s),t=P(s),r&&r.l(s),l=W()},m(s,u){M(e,s,u),w(s,t,u),r&&r.m(s,u),w(s,l,u),a=!0,i||(f=z(Ot,"keydown",o[2]),i=!0)},p(s,[u]){const c={};u&512&&(c.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,c.checked=s[0],de(()=>n=!1)),e.$set(c),s[0]?r?(r.p(s,u),u&1&&k(r,1)):(r=Ae(s),r.c(),k(r,1),r.m(l.parentNode,l)):r&&(Z(),L(r,1,1,()=>{r=null}),$())},i(s){a||(k(e.$$.fragment,s),k(r),a=!0)},o(s){L(e.$$.fragment,s),L(r),a=!1},d(s){s&&(p(t),p(l)),V(e,s),r&&r.d(s),i=!1,f()}}}function Jt(o,e,n){let{map:t}=e,{enabled:l=!1}=e,a="google";function i(){t.on("click",m),t.getCanvas().style.cursor="zoom-in"}function f(){t.off("click",m),t.getCanvas().style.cursor="auto"}Le(f);function m(u){window.open(a=="google"?dt(u.lngLat.toArray()):gt(u.lngLat.toArray()),"_blank"),n(0,l=!1)}function g(u){l&&u.key=="Escape"&&n(0,l=!1)}function r(u){l=u,n(0,l)}function s(u){a=u,n(1,a)}return o.$$set=u=>{"map"in u&&n(3,t=u.map),"enabled"in u&&n(0,l=u.enabled)},o.$$.update=()=>{o.$$.dirty&1&&(l?i():f())},[l,a,g,t,r,s]}class yn extends j{constructor(e){super(),O(this,e,Jt,Ht,U,{map:3,enabled:0})}}const te=ie(!1),fe=ie(null),ce=ie(100),Q=ie({lng:0,lat:0}),X=ie({lng:0,lat:0});function Yt(o){let e,n;return e=new Ue({props:{$$slots:{default:[Xt]},$$scope:{ctx:o}}}),e.$on("click",o[10]),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const a={};l&8192&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Qt(o){let e,n,t="Georeference an image",l,a,i,f,m,g,r,s=`Note this image isn't saved as part of this scheme. When you close this
      page, it'll be lost.`,u;a=new bt({props:{$$slots:{default:[xt]},$$scope:{ctx:o}}}),f=new _t({props:{label:"Load an image",id:"load-image",$$slots:{default:[en]},$$scope:{ctx:o}}});let c=o[3]&&Re(o);return{c(){e=E("div"),n=E("h2"),n.textContent=t,l=D(),A(a.$$.fragment),i=D(),A(f.$$.fragment),m=D(),c&&c.c(),g=D(),r=E("p"),r.textContent=s,this.h()},l(d){e=I(d,"DIV",{style:!0});var _=T(e);n=I(_,"H2",{"data-svelte-h":!0}),se(n)!=="svelte-fociiu"&&(n.textContent=t),l=P(_),R(a.$$.fragment,_),i=P(_),R(f.$$.fragment,_),m=P(_),c&&c.l(_),g=P(_),r=I(_,"P",{"data-svelte-h":!0}),se(r)!=="svelte-d8uklv"&&(r.textContent=s),_.forEach(p),this.h()},h(){J(e,"border","1px solid black"),J(e,"padding","4px")},m(d,_){w(d,e,_),S(e,n),S(e,l),M(a,e,null),S(e,i),M(f,e,null),S(e,m),c&&c.m(e,null),S(e,g),S(e,r),u=!0},p(d,_){const h={};_&8202&&(h.$$scope={dirty:_,ctx:d}),a.$set(h);const C={};_&8193&&(C.$$scope={dirty:_,ctx:d}),f.$set(C),d[3]?c?c.p(d,_):(c=Re(d),c.c(),c.m(e,g)):c&&(c.d(1),c=null)},i(d){u||(k(a.$$.fragment,d),k(f.$$.fragment,d),u=!0)},o(d){L(a.$$.fragment,d),L(f.$$.fragment,d),u=!1},d(d){d&&p(e),V(a),V(f),c&&c.d()}}}function Xt(o){let e;return{c(){e=q("Georeference an image")},l(n){e=K(n,"Georeference an image")},m(n,t){w(n,e,t)},d(n){n&&p(e)}}}function Zt(o){let e;return{c(){e=q("Save")},l(n){e=K(n,"Save")},m(n,t){w(n,e,t)},d(n){n&&p(e)}}}function $t(o){let e;return{c(){e=q("Delete")},l(n){e=K(n,"Delete")},m(n,t){w(n,e,t)},d(n){n&&p(e)}}}function xt(o){let e,n,t,l;return e=new nt({props:{$$slots:{default:[Zt]},$$scope:{ctx:o}}}),e.$on("click",o[7]),t=new lt({props:{disabled:!o[3],$$slots:{default:[$t]},$$scope:{ctx:o}}}),t.$on("click",o[5]),{c(){A(e.$$.fragment),n=D(),A(t.$$.fragment)},l(a){R(e.$$.fragment,a),n=P(a),R(t.$$.fragment,a)},m(a,i){M(e,a,i),w(a,n,i),M(t,a,i),l=!0},p(a,i){const f={};i&8192&&(f.$$scope={dirty:i,ctx:a}),e.$set(f);const m={};i&8&&(m.disabled=!a[3]),i&8192&&(m.$$scope={dirty:i,ctx:a}),t.$set(m)},i(a){l||(k(e.$$.fragment,a),k(t.$$.fragment,a),l=!0)},o(a){L(e.$$.fragment,a),L(t.$$.fragment,a),l=!1},d(a){a&&p(n),V(e,a),V(t,a)}}}function en(o){let e,n,t;return{c(){e=E("input"),this.h()},l(l){e=I(l,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){v(e,"class","govuk-file-upload"),v(e,"id","load-image"),v(e,"type","file")},m(l,a){w(l,e,a),o[8](e),n||(t=z(e,"change",o[4]),n=!0)},p:he,d(l){l&&p(e),o[8](null),n=!1,t()}}}function Re(o){let e,n,t,l,a,i,f,m;return{c(){e=E("div"),n=E("label"),t=E("input"),l=q(`
          Opacity: `),a=q(o[2]),i=q("%"),this.h()},l(g){e=I(g,"DIV",{});var r=T(e);n=I(r,"LABEL",{});var s=T(n);t=I(s,"INPUT",{type:!0,min:!0,max:!0}),l=K(s,`
          Opacity: `),a=K(s,o[2]),i=K(s,"%"),s.forEach(p),r.forEach(p),this.h()},h(){v(t,"type","range"),v(t,"min","0"),v(t,"max","100")},m(g,r){w(g,e,r),S(e,n),S(n,t),me(t,o[2]),S(n,l),S(n,a),S(n,i),f||(m=[z(t,"change",o[9]),z(t,"input",o[9])],f=!0)},p(g,r){r&4&&me(t,g[2]),r&4&&ye(a,g[2])},d(g){g&&p(e),f=!1,_e(m)}}}function tn(o){let e,n,t,l,a,i;const f=[Qt,Yt],m=[];function g(r,s){return r[1]?0:1}return e=g(o),n=m[e]=f[e](o),{c(){n.c(),t=W()},l(r){n.l(r),t=W()},m(r,s){m[e].m(r,s),w(r,t,s),l=!0,a||(i=z(window,"keydown",o[6]),a=!0)},p(r,[s]){let u=e;e=g(r),e===u?m[e].p(r,s):(Z(),L(m[u],1,1,()=>{m[u]=null}),$(),n=m[e],n?n.p(r,s):(n=m[e]=f[e](r),n.c()),k(n,1),n.m(t.parentNode,t))},i(r){l||(k(n),l=!0)},o(r){L(n),l=!1},d(r){r&&p(t),m[e].d(r),a=!1,i()}}}function nn(o,e,n){let t,l,a,i,f;B(o,te,h=>n(1,t=h)),B(o,ce,h=>n(2,l=h)),B(o,fe,h=>n(3,a=h)),B(o,X,h=>n(11,i=h)),B(o,Q,h=>n(12,f=h));let m;async function g(h){let C=await m.files[0].arrayBuffer(),F=new Blob([new Uint8Array(C)]);N(fe,a=URL.createObjectURL(F),a),N(Q,f={lng:0,lat:0},f),N(X,i={lng:0,lat:0},i)}function r(){N(fe,a=null,a),N(ce,l=100,l)}function s(h){t&&h.key=="Escape"&&(h.stopPropagation(),N(te,t=!1,t))}const u=()=>N(te,t=!1,t);function c(h){re[h?"unshift":"push"](()=>{m=h,n(0,m)})}function d(){l=et(this.value),ce.set(l)}return[m,t,l,a,g,r,s,u,c,d,()=>N(te,t=!0,t)]}class Ln extends j{constructor(e){super(),O(this,e,nn,tn,U,{})}}function Me(o){let e,n;return e=new At({props:{url:o[2],coordinates:[[o[0].lng,o[0].lat],[o[3].lng,o[0].lat],[o[3].lng,o[3].lat],[o[0].lng,o[3].lat]],$$slots:{default:[ln]},$$scope:{ctx:o}}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const a={};l&4&&(a.url=t[2]),l&9&&(a.coordinates=[[t[0].lng,t[0].lat],[t[3].lng,t[0].lat],[t[3].lng,t[3].lat],[t[0].lng,t[3].lat]]),l&272&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function ln(o){let e,n;return e=new jt({props:{paint:{"raster-fade-duration":0,"raster-opacity":o[4]/100}}}),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){M(e,t,l),n=!0},p(t,l){const a={};l&16&&(a.paint={"raster-fade-duration":0,"raster-opacity":t[4]/100}),e.$set(a)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function Ve(o){let e,n,t,l,a,i;function f(s){o[6](s)}let m={draggable:!0,$$slots:{default:[on]},$$scope:{ctx:o}};o[0]!==void 0&&(m.lngLat=o[0]),e=new Te({props:m}),re.push(()=>ge(e,"lngLat",f));function g(s){o[7](s)}let r={draggable:!0,$$slots:{default:[an]},$$scope:{ctx:o}};return o[3]!==void 0&&(r.lngLat=o[3]),l=new Te({props:r}),re.push(()=>ge(l,"lngLat",g)),{c(){A(e.$$.fragment),t=D(),A(l.$$.fragment)},l(s){R(e.$$.fragment,s),t=P(s),R(l.$$.fragment,s)},m(s,u){M(e,s,u),w(s,t,u),M(l,s,u),i=!0},p(s,u){const c={};u&256&&(c.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,c.lngLat=s[0],de(()=>n=!1)),e.$set(c);const d={};u&256&&(d.$$scope={dirty:u,ctx:s}),!a&&u&8&&(a=!0,d.lngLat=s[3],de(()=>a=!1)),l.$set(d)},i(s){i||(k(e.$$.fragment,s),k(l.$$.fragment,s),i=!0)},o(s){L(e.$$.fragment,s),L(l.$$.fragment,s),i=!1},d(s){s&&p(t),V(e,s),V(l,s)}}}function on(o){let e;return{c(){e=E("span"),this.h()},l(n){e=I(n,"SPAN",{class:!0,style:!0}),T(e).forEach(p),this.h()},h(){v(e,"class","dot svelte-1tmbx1c"),J(e,"background-color","red")},m(n,t){w(n,e,t)},p:he,d(n){n&&p(e)}}}function an(o){let e;return{c(){e=E("span"),this.h()},l(n){e=I(n,"SPAN",{class:!0,style:!0}),T(e).forEach(p),this.h()},h(){v(e,"class","dot svelte-1tmbx1c"),J(e,"background-color","blue")},m(n,t){w(n,e,t)},p:he,d(n){n&&p(e)}}}function sn(o){let e,n,t,l=o[2]&&o[0].lng!=o[3].lng&&Me(o),a=o[2]&&o[1]&&Ve(o);return{c(){l&&l.c(),e=D(),a&&a.c(),n=W()},l(i){l&&l.l(i),e=P(i),a&&a.l(i),n=W()},m(i,f){l&&l.m(i,f),w(i,e,f),a&&a.m(i,f),w(i,n,f),t=!0},p(i,[f]){i[2]&&i[0].lng!=i[3].lng?l?(l.p(i,f),f&13&&k(l,1)):(l=Me(i),l.c(),k(l,1),l.m(e.parentNode,e)):l&&(Z(),L(l,1,1,()=>{l=null}),$()),i[2]&&i[1]?a?(a.p(i,f),f&6&&k(a,1)):(a=Ve(i),a.c(),k(a,1),a.m(n.parentNode,n)):a&&(Z(),L(a,1,1,()=>{a=null}),$())},i(i){t||(k(l),k(a),t=!0)},o(i){L(l),L(a),t=!1},d(i){i&&(p(e),p(n)),l&&l.d(i),a&&a.d(i)}}}function rn(o,e,n){let t,l,a,i,f;B(o,X,s=>n(3,t=s)),B(o,Q,s=>n(0,l=s)),B(o,te,s=>n(1,a=s)),B(o,fe,s=>n(2,i=s)),B(o,ce,s=>n(4,f=s));let{map:m}=e;function g(s){l=s,Q.set(l)}function r(s){t=s,X.set(t)}return o.$$set=s=>{"map"in s&&n(5,m=s.map)},o.$$.update=()=>{if(o.$$.dirty&39&&i&&a&&l.lng==0&&l.lat==0){let s=m.getBounds();N(Q,l.lng=s.getWest()+.4*(s.getEast()-s.getWest()),l),N(X,t.lng=s.getWest()+.6*(s.getEast()-s.getWest()),t),N(Q,l.lat=s.getNorth()+.4*(s.getSouth()-s.getNorth()),l),N(X,t.lat=s.getNorth()+.6*(s.getSouth()-s.getNorth()),t)}},[l,a,i,t,f,m,g,r]}class wn extends j{constructor(e){super(),O(this,e,rn,sn,U,{map:5})}}export{kn as B,yt as C,Ln as G,vn as M,St as R,yn as S,wn as a,Te as b};
