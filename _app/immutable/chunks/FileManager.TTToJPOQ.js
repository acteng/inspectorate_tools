import{s as _e,p as pe,e as M,a as L,t as R,c as j,b as G,g as C,d as A,f as $,q as oe,i as g,h as B,j as Z,r as $e,n as K,v as se,w as H,x as re,y as te,z as de,A as Q}from"./scheduler.DLAT2lXK.js";import{S as ge,i as be,e as he,c as P,a as U,m as Y,t as y,b as F,d as D,g as le,f as ne}from"./index.El8wU9VD.js";import{e as ie,u as we,o as ke}from"./each.DviZv4MK.js";import{g as ae}from"./entry.CJkSov2o.js";import{b as fe}from"./paths.DJ7YUvYx.js";import{B as ye}from"./ButtonGroup.DI9IPwf6.js";import{F as Fe}from"./FileInput.zIcCkkvo.js";import{F as ve}from"./FormElement.rJ02z8z6.js";import{S as T,W as Ie}from"./WarningButton.AJ_0u3Bz.js";import{M as Se}from"./Modal.DzLmU-3w.js";/* empty css                                                       */function ue(s,e,t){const l=s.slice();return l[20]=e[t],l}function Ee(s){let e;return{c(){e=R("Manage files")},l(t){e=A(t,"Manage files")},m(t,l){g(t,e,l)},d(t){t&&$(e)}}}function Le(s){let e;return{c(){e=R("Rename")},l(t){e=A(t,"Rename")},m(t,l){g(t,e,l)},d(t){t&&$(e)}}}function Ce(s){let e;return{c(){e=R("Export")},l(t){e=A(t,"Export")},m(t,l){g(t,e,l)},d(t){t&&$(e)}}}function Ne(s){let e;return{c(){e=R("Delete")},l(t){e=A(t,"Delete")},m(t,l){g(t,e,l)},d(t){t&&$(e)}}}function Me(s){let e,t,l,o,f,i;return e=new T({props:{$$slots:{default:[Le]},$$scope:{ctx:s}}}),e.$on("click",s[7]),l=new T({props:{$$slots:{default:[Ce]},$$scope:{ctx:s}}}),l.$on("click",s[8]),f=new Ie({props:{$$slots:{default:[Ne]},$$scope:{ctx:s}}}),f.$on("click",s[9]),{c(){P(e.$$.fragment),t=L(),P(l.$$.fragment),o=L(),P(f.$$.fragment)},l(r){U(e.$$.fragment,r),t=C(r),U(l.$$.fragment,r),o=C(r),U(f.$$.fragment,r)},m(r,_){Y(e,r,_),g(r,t,_),Y(l,r,_),g(r,o,_),Y(f,r,_),i=!0},p(r,_){const p={};_&8388608&&(p.$$scope={dirty:_,ctx:r}),e.$set(p);const u={};_&8388608&&(u.$$scope={dirty:_,ctx:r}),l.$set(u);const d={};_&8388608&&(d.$$scope={dirty:_,ctx:r}),f.$set(d)},i(r){i||(y(e.$$.fragment,r),y(l.$$.fragment,r),y(f.$$.fragment,r),i=!0)},o(r){F(e.$$.fragment,r),F(l.$$.fragment,r),F(f.$$.fragment,r),i=!1},d(r){r&&($(t),$(o)),D(e,r),D(l,r),D(f,r)}}}function je(s){let e;return{c(){e=R("New file")},l(t){e=A(t,"New file")},m(t,l){g(t,e,l)},d(t){t&&$(e)}}}function ce(s){let e,t;return e=new ve({props:{label:"Import from XLSX file",id:"import-xlsx",$$slots:{default:[Re]},$$scope:{ctx:s}}}),{c(){P(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,o){Y(e,l,o),t=!0},p(l,o){const f={};o&8388640&&(f.$$scope={dirty:o,ctx:l}),e.$set(f)},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){D(e,l)}}}function Re(s){let e,t,l;return{c(){e=M("input"),this.h()},l(o){e=j(o,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){te(e,"class","govuk-file-upload"),te(e,"id","import-xlsx"),te(e,"type","file")},m(o,f){g(o,e,f),s[16](e),t||(l=de(e,"change",s[13]),t=!0)},p:K,d(o){o&&$(e),s[16](null),t=!1,l()}}}function Ae(s){let e,t,l,o;function f(){return s[17](s[20])}return t=new T({props:{$$slots:{default:[Pe]},$$scope:{ctx:s}}}),t.$on("click",f),{c(){e=M("li"),P(t.$$.fragment),l=L()},l(i){e=j(i,"LI",{});var r=G(e);U(t.$$.fragment,r),l=C(r),r.forEach($)},m(i,r){g(i,e,r),Y(t,e,null),B(e,l),o=!0},p(i,r){s=i;const _={};r&8388616&&(_.$$scope={dirty:r,ctx:s}),t.$set(_)},i(i){o||(y(t.$$.fragment,i),o=!0)},o(i){F(t.$$.fragment,i),o=!1},d(i){i&&$(e),D(t)}}}function Be(s){let e,t=s[20]+"",l;return{c(){e=M("li"),l=R(t)},l(o){e=j(o,"LI",{});var f=G(e);l=A(f,t),f.forEach($)},m(o,f){g(o,e,f),B(e,l)},p(o,f){f&8&&t!==(t=o[20]+"")&&Z(l,t)},i:K,o:K,d(o){o&&$(e)}}}function Pe(s){let e=s[20]+"",t;return{c(){t=R(e)},l(l){t=A(l,e)},m(l,o){g(l,t,o)},p(l,o){o&8&&e!==(e=l[20]+"")&&Z(t,e)},d(l){l&&$(t)}}}function me(s,e){let t,l,o,f,i;const r=[Be,Ae],_=[];function p(u,d){return u[20]==u[6]?0:1}return l=p(e),o=_[l]=r[l](e),{key:s,first:null,c(){t=Q(),o.c(),f=Q(),this.h()},l(u){t=Q(),o.l(u),f=Q(),this.h()},h(){this.first=t},m(u,d){g(u,t,d),_[l].m(u,d),g(u,f,d),i=!0},p(u,d){e=u;let v=l;l=p(e),l===v?_[l].p(e,d):(le(),F(_[v],1,1,()=>{_[v]=null}),ne(),o=_[l],o?o.p(e,d):(o=_[l]=r[l](e),o.c()),y(o,1),o.m(f.parentNode,f))},i(u){i||(y(o),i=!0)},o(u){F(o),i=!1},d(u){u&&($(t),$(f)),_[l].d(u)}}}function Ue(s){let e,t=`All files are auto-saved in your browser's local storage. You can close your
    browser and resume later. You can export the file to your computer to share
    with someone else, and import from a file below.`,l,o,f,i,r,_,p,u,d,v,N,c,b,k,I,J,W,X="Load a saved file:",q,z,w=[],V=new Map,O;u=new ye({props:{$$slots:{default:[Me]},$$scope:{ctx:s}}}),c=new T({props:{$$slots:{default:[je]},$$scope:{ctx:s}}}),c.$on("click",s[10]),k=new Fe({props:{label:"Import from a .json file",onLoad:s[11]}});let h=s[2]!=null&&ce(s),m=ie(s[3]);const S=n=>n[20];for(let n=0;n<m.length;n+=1){let a=ue(s,m,n),E=S(a);V.set(E,w[n]=me(E,a))}return{c(){e=M("p"),e.textContent=t,l=L(),o=M("p"),f=R("You're currently editing "),i=M("u"),r=R(s[6]),_=R(`
    .`),p=L(),P(u.$$.fragment),d=L(),v=M("hr"),N=L(),P(c.$$.fragment),b=L(),P(k.$$.fragment),I=L(),h&&h.c(),J=L(),W=M("p"),W.textContent=X,q=L(),z=M("ul");for(let n=0;n<w.length;n+=1)w[n].c()},l(n){e=j(n,"P",{"data-svelte-h":!0}),re(e)!=="svelte-1yvzirp"&&(e.textContent=t),l=C(n),o=j(n,"P",{});var a=G(o);f=A(a,"You're currently editing "),i=j(a,"U",{});var E=G(i);r=A(E,s[6]),E.forEach($),_=A(a,`
    .`),a.forEach($),p=C(n),U(u.$$.fragment,n),d=C(n),v=j(n,"HR",{}),N=C(n),U(c.$$.fragment,n),b=C(n),U(k.$$.fragment,n),I=C(n),h&&h.l(n),J=C(n),W=j(n,"P",{"data-svelte-h":!0}),re(W)!=="svelte-1xydj1w"&&(W.textContent=X),q=C(n),z=j(n,"UL",{});var x=G(z);for(let ee=0;ee<w.length;ee+=1)w[ee].l(x);x.forEach($)},m(n,a){g(n,e,a),g(n,l,a),g(n,o,a),B(o,f),B(o,i),B(i,r),B(o,_),g(n,p,a),Y(u,n,a),g(n,d,a),g(n,v,a),g(n,N,a),Y(c,n,a),g(n,b,a),Y(k,n,a),g(n,I,a),h&&h.m(n,a),g(n,J,a),g(n,W,a),g(n,q,a),g(n,z,a);for(let E=0;E<w.length;E+=1)w[E]&&w[E].m(z,null);O=!0},p(n,a){(!O||a&64)&&Z(r,n[6]);const E={};a&8388608&&(E.$$scope={dirty:a,ctx:n}),u.$set(E);const x={};a&8388608&&(x.$$scope={dirty:a,ctx:n}),c.$set(x),n[2]!=null?h?(h.p(n,a),a&4&&y(h,1)):(h=ce(n),h.c(),y(h,1),h.m(J.parentNode,J)):h&&(le(),F(h,1,1,()=>{h=null}),ne()),a&4168&&(m=ie(n[3]),le(),w=we(w,a,S,1,n,m,V,z,ke,me,null,ue),ne())},i(n){if(!O){y(u.$$.fragment,n),y(c.$$.fragment,n),y(k.$$.fragment,n),y(h);for(let a=0;a<m.length;a+=1)y(w[a]);O=!0}},o(n){F(u.$$.fragment,n),F(c.$$.fragment,n),F(k.$$.fragment,n),F(h);for(let a=0;a<w.length;a+=1)F(w[a]);O=!1},d(n){n&&($(e),$(l),$(o),$(p),$(d),$(v),$(N),$(b),$(I),$(J),$(W),$(q),$(z)),D(u,n),D(c,n),D(k,n),h&&h.d(n);for(let a=0;a<w.length;a+=1)w[a].d()}}}function Ye(s){let e,t,l,o,f,i,r,_,p,u,d;t=new T({props:{$$slots:{default:[Ee]},$$scope:{ctx:s}}}),t.$on("click",s[15]);function v(c){s[18](c)}let N={title:"Manage files",$$slots:{default:[Ue]},$$scope:{ctx:s}};return s[4]!==void 0&&(N.open=s[4]),p=new Se({props:N}),pe.push(()=>he(p,"open",v)),{c(){e=M("div"),P(t.$$.fragment),l=L(),o=M("span"),f=R("Editing file "),i=M("u"),r=R(s[6]),_=L(),P(p.$$.fragment),this.h()},l(c){e=j(c,"DIV",{style:!0});var b=G(e);U(t.$$.fragment,b),l=C(b),o=j(b,"SPAN",{});var k=G(o);f=A(k,"Editing file "),i=j(k,"U",{});var I=G(i);r=A(I,s[6]),I.forEach($),k.forEach($),b.forEach($),_=C(c),U(p.$$.fragment,c),this.h()},h(){oe(e,"display","flex"),oe(e,"align-items","baseline")},m(c,b){g(c,e,b),Y(t,e,null),B(e,l),B(e,o),B(o,f),B(o,i),B(i,r),g(c,_,b),Y(p,c,b),d=!0},p(c,[b]){const k={};b&8388608&&(k.$$scope={dirty:b,ctx:c}),t.$set(k),(!d||b&64)&&Z(r,c[6]);const I={};b&8388716&&(I.$$scope={dirty:b,ctx:c}),!u&&b&16&&(u=!0,I.open=c[4],$e(()=>u=!1)),p.$set(I)},i(c){d||(y(t.$$.fragment,c),y(p.$$.fragment,c),d=!0)},o(c){F(t.$$.fragment,c),F(p.$$.fragment,c),d=!1},d(c){c&&($(e),$(_)),D(t),D(p,c)}}}function De(s,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",s),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Je(s,e,t){let l,o=K,f=()=>(o(),o=se(d,m=>t(19,l=m)),d),i,r=K,_=()=>(r(),r=se(u,m=>t(6,i=m)),u);s.$$.on_destroy.push(()=>o()),s.$$.on_destroy.push(()=>r());let{files:p}=e,{currentFile:u}=e;_();let{state:d}=e;f();let{xlsxImporter:v}=e,N=p.getFileList(),c=!1;function b(){let m=window.prompt(`Rename file ${i} to what?`,i);if(m){let S=p.key(i),n=window.localStorage.getItem(S);window.localStorage.setItem(p.key(m),n),window.localStorage.removeItem(S),H(u,i=m,i),t(3,N=p.getFileList())}}function k(){De(i+".json",JSON.stringify(l))}async function I(){window.confirm(`Really delete file ${i}? You can't undo this.`)&&(window.localStorage.removeItem(p.key(i)),await J())}async function J(){H(u,i=p.newFilename(),i),H(d,l=p.emptyState(),l),window.localStorage.setItem(p.key(i),JSON.stringify(l)),t(3,N=p.getFileList()),await ae(`${fe}/${p.prefix}`)}async function W(m,S){let n=m.endsWith(".json")?m.slice(0,-5):m;window.localStorage.setItem(p.key(n),S),t(3,N=p.getFileList()),X(n)}async function X(m){try{let S=p.loadFile(m);H(u,i=m,i),H(d,l=S,l),await ae(`${fe}/${p.prefix}`)}catch(S){window.alert(`Couldn't load ${m}: ${S}`)}}let q;async function z(m){let S=await q.files[0].arrayBuffer();await v(S)}const w=()=>t(4,c=!0);function V(m){pe[m?"unshift":"push"](()=>{q=m,t(5,q)})}const O=m=>X(m);function h(m){c=m,t(4,c)}return s.$$set=m=>{"files"in m&&t(14,p=m.files),"currentFile"in m&&_(t(0,u=m.currentFile)),"state"in m&&f(t(1,d=m.state)),"xlsxImporter"in m&&t(2,v=m.xlsxImporter)},[u,d,v,N,c,q,i,b,k,I,J,W,X,z,p,w,V,O,h]}class Qe extends ge{constructor(e){super(),be(this,e,Je,Ye,_e,{files:14,currentFile:0,state:1,xlsxImporter:2})}}export{Qe as F};
