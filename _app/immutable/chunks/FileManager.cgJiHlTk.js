import{s as ue,e as L,c as N,r as ee,i as g,z as de,f as $,v as ce,a as C,t as J,b as D,g as E,d as O,w as ne,h as P,j as x,x as ge,n as Z,M as le,N as K,p as oe,E as X}from"./scheduler.BV_JqZpr.js";import{S as me,i as $e,c as M,a as R,m as j,t as y,b as F,d as A,e as be,g as _e,f as pe}from"./index.DDJL-Wug.js";import{e as se,u as he,o as we}from"./each.Cp9qZMvj.js";import{g as re}from"./entry.CPKEK0vl.js";import{b as ae}from"./paths.BXTBWjDG.js";import{B as ke}from"./ButtonGroup.CpPC8Sl4.js";import{C as ye}from"./CollapsibleCard.UC1DOObh.js";import{F as Fe}from"./FormElement.BCOhxKPP.js";import{v as ve}from"./ErrorMessage.4z_VF7LJ.js";import{S as V,W as Se}from"./WarningButton.Ck9VEuu1.js";import{T as Ce}from"./TextArea.e-LUVmrn.js";import{M as Ee}from"./Modal.B6-jFlUE.js";function Ie(s){let e,t,n;return{c(){e=L("input"),this.h()},l(l){e=N(l,"INPUT",{class:!0,id:!0,type:!0}),this.h()},h(){e.disabled=s[1],ee(e,"class","govuk-file-upload"),ee(e,"id",s[4]),ee(e,"type","file")},m(l,i){g(l,e,i),s[6](e),t||(n=de(e,"change",s[3]),t=!0)},p(l,i){i&2&&(e.disabled=l[1])},d(l){l&&$(e),s[6](null),t=!1,n()}}}function Le(s){let e,t;return e=new Fe({props:{label:s[0],id:s[4],$$slots:{default:[Ie]},$$scope:{ctx:s}}}),{c(){M(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p(n,[l]){const i={};l&1&&(i.label=n[0]),l&134&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Ne(s,e,t){let{label:n}=e,{onLoad:l}=e,{disabled:i=!1}=e,a;async function r(f){let p=a.files[0].name,w=await a.files[0].text();l(p,w)}let m=ve();function c(f){ce[f?"unshift":"push"](()=>{a=f,t(2,a)})}return s.$$set=f=>{"label"in f&&t(0,n=f.label),"onLoad"in f&&t(5,l=f.onLoad),"disabled"in f&&t(1,i=f.disabled)},[n,i,a,r,m,l,c]}class Me extends me{constructor(e){super(),$e(this,e,Ne,Le,ue,{label:0,onLoad:5,disabled:1})}}function ie(s,e,t){const n=s.slice();return n[16]=e[t],n}function Re(s){let e;return{c(){e=J("Manage files")},l(t){e=O(t,"Manage files")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function je(s){let e;return{c(){e=J("Rename")},l(t){e=O(t,"Rename")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Ae(s){let e;return{c(){e=J("Export")},l(t){e=O(t,"Export")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Je(s){let e;return{c(){e=J("Delete")},l(t){e=O(t,"Delete")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Oe(s){let e,t,n,l,i,a;return e=new V({props:{$$slots:{default:[je]},$$scope:{ctx:s}}}),e.$on("click",s[6]),n=new V({props:{$$slots:{default:[Ae]},$$scope:{ctx:s}}}),n.$on("click",s[7]),i=new Se({props:{$$slots:{default:[Je]},$$scope:{ctx:s}}}),i.$on("click",s[8]),{c(){M(e.$$.fragment),t=C(),M(n.$$.fragment),l=C(),M(i.$$.fragment)},l(r){R(e.$$.fragment,r),t=E(r),R(n.$$.fragment,r),l=E(r),R(i.$$.fragment,r)},m(r,m){j(e,r,m),g(r,t,m),j(n,r,m),g(r,l,m),j(i,r,m),a=!0},p(r,m){const c={};m&524288&&(c.$$scope={dirty:m,ctx:r}),e.$set(c);const f={};m&524288&&(f.$$scope={dirty:m,ctx:r}),n.$set(f);const p={};m&524288&&(p.$$scope={dirty:m,ctx:r}),i.$set(p)},i(r){a||(y(e.$$.fragment,r),y(n.$$.fragment,r),y(i.$$.fragment,r),a=!0)},o(r){F(e.$$.fragment,r),F(n.$$.fragment,r),F(i.$$.fragment,r),a=!1},d(r){r&&($(t),$(l)),A(e,r),A(n,r),A(i,r)}}}function Pe(s){let e,t;return e=new Ce({props:{label:"JSON",value:JSON.stringify(s[4],null,"  "),rows:10}}),{c(){M(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p(n,l){const i={};l&16&&(i.value=JSON.stringify(n[4],null,"  ")),e.$set(i)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Ue(s){let e;return{c(){e=J("New file")},l(t){e=O(t,"New file")},m(t,n){g(t,e,n)},d(t){t&&$(e)}}}function Ye(s){let e,t,n,l;function i(){return s[14](s[16])}return t=new V({props:{$$slots:{default:[De]},$$scope:{ctx:s}}}),t.$on("click",i),{c(){e=L("li"),M(t.$$.fragment),n=C()},l(a){e=N(a,"LI",{});var r=D(e);R(t.$$.fragment,r),n=E(r),r.forEach($)},m(a,r){g(a,e,r),j(t,e,null),P(e,n),l=!0},p(a,r){s=a;const m={};r&524292&&(m.$$scope={dirty:r,ctx:s}),t.$set(m)},i(a){l||(y(t.$$.fragment,a),l=!0)},o(a){F(t.$$.fragment,a),l=!1},d(a){a&&$(e),A(t)}}}function Be(s){let e,t=s[16]+"",n;return{c(){e=L("li"),n=J(t)},l(l){e=N(l,"LI",{});var i=D(e);n=O(i,t),i.forEach($)},m(l,i){g(l,e,i),P(e,n)},p(l,i){i&4&&t!==(t=l[16]+"")&&x(n,t)},i:Z,o:Z,d(l){l&&$(e)}}}function De(s){let e=s[16]+"",t;return{c(){t=J(e)},l(n){t=O(n,e)},m(n,l){g(n,t,l)},p(n,l){l&4&&e!==(e=n[16]+"")&&x(t,e)},d(n){n&&$(t)}}}function fe(s,e){let t,n,l,i,a;const r=[Be,Ye],m=[];function c(f,p){return f[16]==f[5]?0:1}return n=c(e),l=m[n]=r[n](e),{key:s,first:null,c(){t=X(),l.c(),i=X(),this.h()},l(f){t=X(),l.l(f),i=X(),this.h()},h(){this.first=t},m(f,p){g(f,t,p),m[n].m(f,p),g(f,i,p),a=!0},p(f,p){e=f;let w=n;n=c(e),n===w?m[n].p(e,p):(_e(),F(m[w],1,1,()=>{m[w]=null}),pe(),l=m[n],l?l.p(e,p):(l=m[n]=r[n](e),l.c()),y(l,1),l.m(i.parentNode,i))},i(f){a||(y(l),a=!0)},o(f){F(l),a=!1},d(f){f&&($(t),$(i)),m[n].d(f)}}}function Te(s){let e,t=`All files are auto-saved in your browser's local storage. You can close your
    browser and resume later. You can export the file to your computer to share
    with someone else, and import from a file below.`,n,l,i,a,r,m,c,f,p,w,I,d,h,k,v,U,B,Y,Q="Load a saved file:",W,_,b=[],T=new Map,G;f=new ke({props:{$$slots:{default:[Oe]},$$scope:{ctx:s}}}),w=new ye({props:{label:"Debug",$$slots:{default:[Pe]},$$scope:{ctx:s}}}),k=new V({props:{$$slots:{default:[Ue]},$$scope:{ctx:s}}}),k.$on("click",s[9]),U=new Me({props:{label:"Import from file",onLoad:s[10]}});let q=se(s[2]);const te=o=>o[16];for(let o=0;o<q.length;o+=1){let u=ie(s,q,o),S=te(u);T.set(S,b[o]=fe(S,u))}return{c(){e=L("p"),e.textContent=t,n=C(),l=L("p"),i=J("You're currently editing "),a=L("u"),r=J(s[5]),m=J(`
    .`),c=C(),M(f.$$.fragment),p=C(),M(w.$$.fragment),I=C(),d=L("hr"),h=C(),M(k.$$.fragment),v=C(),M(U.$$.fragment),B=C(),Y=L("p"),Y.textContent=Q,W=C(),_=L("ul");for(let o=0;o<b.length;o+=1)b[o].c()},l(o){e=N(o,"P",{"data-svelte-h":!0}),oe(e)!=="svelte-1yvzirp"&&(e.textContent=t),n=E(o),l=N(o,"P",{});var u=D(l);i=O(u,"You're currently editing "),a=N(u,"U",{});var S=D(a);r=O(S,s[5]),S.forEach($),m=O(u,`
    .`),u.forEach($),c=E(o),R(f.$$.fragment,o),p=E(o),R(w.$$.fragment,o),I=E(o),d=N(o,"HR",{}),h=E(o),R(k.$$.fragment,o),v=E(o),R(U.$$.fragment,o),B=E(o),Y=N(o,"P",{"data-svelte-h":!0}),oe(Y)!=="svelte-1xydj1w"&&(Y.textContent=Q),W=E(o),_=N(o,"UL",{});var H=D(_);for(let z=0;z<b.length;z+=1)b[z].l(H);H.forEach($)},m(o,u){g(o,e,u),g(o,n,u),g(o,l,u),P(l,i),P(l,a),P(a,r),P(l,m),g(o,c,u),j(f,o,u),g(o,p,u),j(w,o,u),g(o,I,u),g(o,d,u),g(o,h,u),j(k,o,u),g(o,v,u),j(U,o,u),g(o,B,u),g(o,Y,u),g(o,W,u),g(o,_,u);for(let S=0;S<b.length;S+=1)b[S]&&b[S].m(_,null);G=!0},p(o,u){(!G||u&32)&&x(r,o[5]);const S={};u&524288&&(S.$$scope={dirty:u,ctx:o}),f.$set(S);const H={};u&524304&&(H.$$scope={dirty:u,ctx:o}),w.$set(H);const z={};u&524288&&(z.$$scope={dirty:u,ctx:o}),k.$set(z),u&2084&&(q=se(o[2]),_e(),b=he(b,u,te,1,o,q,T,_,we,fe,null,ie),pe())},i(o){if(!G){y(f.$$.fragment,o),y(w.$$.fragment,o),y(k.$$.fragment,o),y(U.$$.fragment,o);for(let u=0;u<q.length;u+=1)y(b[u]);G=!0}},o(o){F(f.$$.fragment,o),F(w.$$.fragment,o),F(k.$$.fragment,o),F(U.$$.fragment,o);for(let u=0;u<b.length;u+=1)F(b[u]);G=!1},d(o){o&&($(e),$(n),$(l),$(c),$(p),$(I),$(d),$(h),$(v),$(B),$(Y),$(W),$(_)),A(f,o),A(w,o),A(k,o),A(U,o);for(let u=0;u<b.length;u+=1)b[u].d()}}}function We(s){let e,t,n,l,i,a,r,m,c,f,p;t=new V({props:{$$slots:{default:[Re]},$$scope:{ctx:s}}}),t.$on("click",s[13]);function w(d){s[15](d)}let I={title:"Manage files",$$slots:{default:[Te]},$$scope:{ctx:s}};return s[3]!==void 0&&(I.open=s[3]),c=new Ee({props:I}),ce.push(()=>be(c,"open",w)),{c(){e=L("div"),M(t.$$.fragment),n=C(),l=L("span"),i=J("Editing file "),a=L("u"),r=J(s[5]),m=C(),M(c.$$.fragment),this.h()},l(d){e=N(d,"DIV",{style:!0});var h=D(e);R(t.$$.fragment,h),n=E(h),l=N(h,"SPAN",{});var k=D(l);i=O(k,"Editing file "),a=N(k,"U",{});var v=D(a);r=O(v,s[5]),v.forEach($),k.forEach($),h.forEach($),m=E(d),R(c.$$.fragment,d),this.h()},h(){ne(e,"display","flex"),ne(e,"align-items","baseline")},m(d,h){g(d,e,h),j(t,e,null),P(e,n),P(e,l),P(l,i),P(l,a),P(a,r),g(d,m,h),j(c,d,h),p=!0},p(d,[h]){const k={};h&524288&&(k.$$scope={dirty:h,ctx:d}),t.$set(k),(!p||h&32)&&x(r,d[5]);const v={};h&524340&&(v.$$scope={dirty:h,ctx:d}),!f&&h&8&&(f=!0,v.open=d[3],ge(()=>f=!1)),c.$set(v)},i(d){p||(y(t.$$.fragment,d),y(c.$$.fragment,d),p=!0)},o(d){F(t.$$.fragment,d),F(c.$$.fragment,d),p=!1},d(d){d&&($(e),$(m)),A(t),A(c,d)}}}function ze(s,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",s),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Ge(s,e,t){let n,l=Z,i=()=>(l(),l=le(p,_=>t(4,n=_)),p),a,r=Z,m=()=>(r(),r=le(f,_=>t(5,a=_)),f);s.$$.on_destroy.push(()=>l()),s.$$.on_destroy.push(()=>r());let{files:c}=e,{currentFile:f}=e;m();let{state:p}=e;i();let w=c.getFileList(),I=!1;function d(){let _=window.prompt(`Rename file ${a} to what?`,a);if(_){let b=c.key(a),T=window.localStorage.getItem(b);window.localStorage.setItem(c.key(_),T),window.localStorage.removeItem(b),K(f,a=_,a),t(2,w=c.getFileList())}}function h(){ze(a+".json",JSON.stringify(n))}async function k(){window.confirm(`Really delete file ${a}? You can't undo this.`)&&(window.localStorage.removeItem(c.key(a)),await v())}async function v(){K(f,a=c.newFilename(),a),K(p,n=c.emptyState(),n),window.localStorage.setItem(c.key(a),JSON.stringify(n)),t(2,w=c.getFileList()),await re(`${ae}/${c.prefix}`)}async function U(_,b){let T=_.endsWith(".json")?_.slice(0,-5):_;window.localStorage.setItem(c.key(T),b),t(2,w=c.getFileList()),B(T)}async function B(_){try{let b=c.loadFile(_);K(f,a=_,a),K(p,n=b,n),await re(`${ae}/${c.prefix}`)}catch(b){window.alert(`Couldn't load ${_}: ${b}`)}}const Y=()=>t(3,I=!0),Q=_=>B(_);function W(_){I=_,t(3,I)}return s.$$set=_=>{"files"in _&&t(12,c=_.files),"currentFile"in _&&m(t(0,f=_.currentFile)),"state"in _&&i(t(1,p=_.state))},[f,p,w,I,n,a,d,h,k,v,U,B,c,Y,Q,W]}class ot extends me{constructor(e){super(),$e(this,e,Ge,We,ue,{files:12,currentFile:0,state:1})}}export{ot as F};
