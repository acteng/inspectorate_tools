import{s as we,r as x,e as W,t as X,a as T,c as Z,b as z,d as Q,f as $,g as q,q as O,v as K,i as y,h as R,w as ee,k as ye,y as Xe,R as Qe,W as he,T as pe,D as _e,p as ve,F as ge,j as ce,n as xe,J as be,K as ke}from"../chunks/scheduler.mGr_ZlpV.js";import{S as Ie,i as Le,e as te,c as M,b as V,m as F,t as k,g as se,a as I,f as re,d as G}from"../chunks/index.rGMSHTnh.js";import{j as me,k as $e,M as et,l as tt,b as lt,C as nt,G as it,m as ot}from"../chunks/index.DxWdSAxj.js";import{e as oe}from"../chunks/each.K9grjjo2.js";import{c as st,p as rt}from"../chunks/colors.DaC397qr.js";import{p as Re}from"../chunks/index.CffxmBVg.js";import{R as Se}from"../chunks/Radio.Bma7VTOG.js";import{S as Ue}from"../chunks/Select.DOQ97bQB.js";/* empty css                                                    */import{T as Oe}from"../chunks/TextArea.CQ2iB7w6.js";import{T as He}from"../chunks/TextInput.Cd2nGDQC.js";import{s as U}from"../chunks/data.w1zTDMS1.js";import{c as at,p as ft,b as ut,g as ct}from"../chunks/lists.CEhrhT4A.js";import{Y as Ke}from"../chunks/YesNo.Dk4nDSZJ.js";import{B as pt,G as _t,S as gt,C as mt,a as $t,M as We}from"../chunks/GeoreferenceLayer.svelte_svelte_type_style_lang.DzeZBIHY.js";import{C as dt}from"../chunks/CollapsibleCard.Djd8DNlx.js";import{D as ht}from"../chunks/DefaultButton.Mx2gKMUF.js";import{S as vt}from"../chunks/SecondaryButton.BZ-CsghR.js";import{W as bt}from"../chunks/WarningButton.DoTAjTRB.js";import{G as kt}from"../chunks/GeoreferenceLayer.BfIyZrsy.js";import{C as Ze}from"../chunks/ClickableCard.xMY1De4-.js";import"../chunks/paths.D3JiFK-y.js";function Ne(t){let e,n,l;function o(i){t[5](i)}let a={label:"Resolved by Design"};return t[1].criticalIssues[t[0]].resolved!==void 0&&(a.value=t[1].criticalIssues[t[0]].resolved),e=new Ke({props:a}),x.push(()=>te(e,"value",o)),{c(){M(e.$$.fragment)},l(i){V(e.$$.fragment,i)},m(i,c){F(e,i,c),l=!0},p(i,c){const u={};!n&&c&3&&(n=!0,u.value=i[1].criticalIssues[i[0]].resolved,ee(()=>n=!1)),e.$set(u)},i(i){l||(k(e.$$.fragment,i),l=!0)},o(i){I(e.$$.fragment,i),l=!1},d(i){G(e,i)}}}function Ct(t){let e,n,l,o,a,i,c,u,_,f,j,g,d,B,C,E,s,p,S,N,D,w;function J(r){t[2](r)}let P={label:"Critical Issue",emptyOption:!0,choices:at};t[1].criticalIssues[t[0]].criticalIssue!==void 0&&(P.value=t[1].criticalIssues[t[0]].criticalIssue),f=new Ue({props:P}),x.push(()=>te(f,"value",J));function ae(r){t[3](r)}let m={legend:"Stage",choices:Re(["Existing","Design"])};t[1].criticalIssues[t[0]].stage!==void 0&&(m.value=t[1].criticalIssues[t[0]].stage),d=new Se({props:m}),x.push(()=>te(d,"value",ae));function v(r){t[4](r)}let H={label:"Location Name"};t[1].criticalIssues[t[0]].locationName!==void 0&&(H.value=t[1].criticalIssues[t[0]].locationName),E=new He({props:H}),x.push(()=>te(E,"value",v));let L=t[1].criticalIssues[t[0]].stage!="Design"&&Ne(t);function A(r){t[6](r)}let le={label:"Commentary & Feedback"};return t[1].criticalIssues[t[0]].notes!==void 0&&(le.value=t[1].criticalIssues[t[0]].notes),N=new Oe({props:le}),x.push(()=>te(N,"value",A)),{c(){e=W("div"),n=W("a"),l=X("Google StreetView"),a=T(),i=W("a"),c=X("Bing Streetside"),_=T(),M(f.$$.fragment),g=T(),M(d.$$.fragment),C=T(),M(E.$$.fragment),p=T(),L&&L.c(),S=T(),M(N.$$.fragment),this.h()},l(r){e=Z(r,"DIV",{style:!0});var b=z(e);n=Z(b,"A",{href:!0,target:!0});var ne=z(n);l=Q(ne,"Google StreetView"),ne.forEach($),a=q(b),i=Z(b,"A",{href:!0,target:!0});var ie=z(i);c=Q(ie,"Bing Streetside"),ie.forEach($),b.forEach($),_=q(r),V(f.$$.fragment,r),g=q(r),V(d.$$.fragment,r),C=q(r),V(E.$$.fragment,r),p=q(r),L&&L.l(r),S=q(r),V(N.$$.fragment,r),this.h()},h(){O(n,"href",o=me(t[1].criticalIssues[t[0]].point)),O(n,"target","_blank"),O(i,"href",u=$e(t[1].criticalIssues[t[0]].point)),O(i,"target","_blank"),K(e,"display","flex"),K(e,"justify-content","space-evenly")},m(r,b){y(r,e,b),R(e,n),R(n,l),R(e,a),R(e,i),R(i,c),y(r,_,b),F(f,r,b),y(r,g,b),F(d,r,b),y(r,C,b),F(E,r,b),y(r,p,b),L&&L.m(r,b),y(r,S,b),F(N,r,b),w=!0},p(r,[b]){(!w||b&3&&o!==(o=me(r[1].criticalIssues[r[0]].point)))&&O(n,"href",o),(!w||b&3&&u!==(u=$e(r[1].criticalIssues[r[0]].point)))&&O(i,"href",u);const ne={};!j&&b&3&&(j=!0,ne.value=r[1].criticalIssues[r[0]].criticalIssue,ee(()=>j=!1)),f.$set(ne);const ie={};!B&&b&3&&(B=!0,ie.value=r[1].criticalIssues[r[0]].stage,ee(()=>B=!1)),d.$set(ie);const fe={};!s&&b&3&&(s=!0,fe.value=r[1].criticalIssues[r[0]].locationName,ee(()=>s=!1)),E.$set(fe),r[1].criticalIssues[r[0]].stage!="Design"?L?(L.p(r,b),b&3&&k(L,1)):(L=Ne(r),L.c(),k(L,1),L.m(S.parentNode,S)):L&&(se(),I(L,1,1,()=>{L=null}),re());const ue={};!D&&b&3&&(D=!0,ue.value=r[1].criticalIssues[r[0]].notes,ee(()=>D=!1)),N.$set(ue)},i(r){w||(k(f.$$.fragment,r),k(d.$$.fragment,r),k(E.$$.fragment,r),k(L),k(N.$$.fragment,r),w=!0)},o(r){I(f.$$.fragment,r),I(d.$$.fragment,r),I(E.$$.fragment,r),I(L),I(N.$$.fragment,r),w=!1},d(r){r&&($(e),$(_),$(g),$(C),$(p),$(S)),G(f,r),G(d,r),G(E,r),L&&L.d(r),G(N,r)}}}function wt(t,e,n){let l;ye(t,U,f=>n(1,l=f));let{idx:o}=e;function a(f){t.$$.not_equal(l.criticalIssues[o].criticalIssue,f)&&(l.criticalIssues[o].criticalIssue=f,U.set(l))}function i(f){t.$$.not_equal(l.criticalIssues[o].stage,f)&&(l.criticalIssues[o].stage=f,U.set(l))}function c(f){t.$$.not_equal(l.criticalIssues[o].locationName,f)&&(l.criticalIssues[o].locationName=f,U.set(l))}function u(f){t.$$.not_equal(l.criticalIssues[o].resolved,f)&&(l.criticalIssues[o].resolved=f,U.set(l))}function _(f){t.$$.not_equal(l.criticalIssues[o].notes,f)&&(l.criticalIssues[o].notes=f,U.set(l))}return t.$$set=f=>{"idx"in f&&n(0,o=f.idx)},[o,l,a,i,c,u,_]}class yt extends Ie{constructor(e){super(),Le(this,e,wt,Ct,we,{idx:0})}}function De(t){let e,n,l;function o(i){t[5](i)}let a={label:"Resolved by Design"};return t[1].policyConflictLog[t[0]].resolved!==void 0&&(a.value=t[1].policyConflictLog[t[0]].resolved),e=new Ke({props:a}),x.push(()=>te(e,"value",o)),{c(){M(e.$$.fragment)},l(i){V(e.$$.fragment,i)},m(i,c){F(e,i,c),l=!0},p(i,c){const u={};!n&&c&3&&(n=!0,u.value=i[1].policyConflictLog[i[0]].resolved,ee(()=>n=!1)),e.$set(u)},i(i){l||(k(e.$$.fragment,i),l=!0)},o(i){I(e.$$.fragment,i),l=!1},d(i){G(e,i)}}}function It(t){let e,n,l,o,a,i,c,u,_,f,j,g,d,B,C,E,s,p,S,N,D,w;function J(r){t[2](r)}let P={label:"Policy Conflict",emptyOption:!0,choices:ft};t[1].policyConflictLog[t[0]].conflict!==void 0&&(P.value=t[1].policyConflictLog[t[0]].conflict),f=new Ue({props:P}),x.push(()=>te(f,"value",J));function ae(r){t[3](r)}let m={legend:"Stage",choices:Re(["Existing","Design"])};t[1].policyConflictLog[t[0]].stage!==void 0&&(m.value=t[1].policyConflictLog[t[0]].stage),d=new Se({props:m}),x.push(()=>te(d,"value",ae));function v(r){t[4](r)}let H={label:"Location Name"};t[1].policyConflictLog[t[0]].locationName!==void 0&&(H.value=t[1].policyConflictLog[t[0]].locationName),E=new He({props:H}),x.push(()=>te(E,"value",v));let L=t[1].policyConflictLog[t[0]].stage!="Design"&&De(t);function A(r){t[6](r)}let le={label:"Commentary & Feedback"};return t[1].policyConflictLog[t[0]].notes!==void 0&&(le.value=t[1].policyConflictLog[t[0]].notes),N=new Oe({props:le}),x.push(()=>te(N,"value",A)),{c(){e=W("div"),n=W("a"),l=X("Google StreetView"),a=T(),i=W("a"),c=X("Bing Streetside"),_=T(),M(f.$$.fragment),g=T(),M(d.$$.fragment),C=T(),M(E.$$.fragment),p=T(),L&&L.c(),S=T(),M(N.$$.fragment),this.h()},l(r){e=Z(r,"DIV",{style:!0});var b=z(e);n=Z(b,"A",{href:!0,target:!0});var ne=z(n);l=Q(ne,"Google StreetView"),ne.forEach($),a=q(b),i=Z(b,"A",{href:!0,target:!0});var ie=z(i);c=Q(ie,"Bing Streetside"),ie.forEach($),b.forEach($),_=q(r),V(f.$$.fragment,r),g=q(r),V(d.$$.fragment,r),C=q(r),V(E.$$.fragment,r),p=q(r),L&&L.l(r),S=q(r),V(N.$$.fragment,r),this.h()},h(){O(n,"href",o=me(t[1].policyConflictLog[t[0]].point)),O(n,"target","_blank"),O(i,"href",u=$e(t[1].policyConflictLog[t[0]].point)),O(i,"target","_blank"),K(e,"display","flex"),K(e,"justify-content","space-evenly")},m(r,b){y(r,e,b),R(e,n),R(n,l),R(e,a),R(e,i),R(i,c),y(r,_,b),F(f,r,b),y(r,g,b),F(d,r,b),y(r,C,b),F(E,r,b),y(r,p,b),L&&L.m(r,b),y(r,S,b),F(N,r,b),w=!0},p(r,[b]){(!w||b&3&&o!==(o=me(r[1].policyConflictLog[r[0]].point)))&&O(n,"href",o),(!w||b&3&&u!==(u=$e(r[1].policyConflictLog[r[0]].point)))&&O(i,"href",u);const ne={};!j&&b&3&&(j=!0,ne.value=r[1].policyConflictLog[r[0]].conflict,ee(()=>j=!1)),f.$set(ne);const ie={};!B&&b&3&&(B=!0,ie.value=r[1].policyConflictLog[r[0]].stage,ee(()=>B=!1)),d.$set(ie);const fe={};!s&&b&3&&(s=!0,fe.value=r[1].policyConflictLog[r[0]].locationName,ee(()=>s=!1)),E.$set(fe),r[1].policyConflictLog[r[0]].stage!="Design"?L?(L.p(r,b),b&3&&k(L,1)):(L=De(r),L.c(),k(L,1),L.m(S.parentNode,S)):L&&(se(),I(L,1,1,()=>{L=null}),re());const ue={};!D&&b&3&&(D=!0,ue.value=r[1].policyConflictLog[r[0]].notes,ee(()=>D=!1)),N.$set(ue)},i(r){w||(k(f.$$.fragment,r),k(d.$$.fragment,r),k(E.$$.fragment,r),k(L),k(N.$$.fragment,r),w=!0)},o(r){I(f.$$.fragment,r),I(d.$$.fragment,r),I(E.$$.fragment,r),I(L),I(N.$$.fragment,r),w=!1},d(r){r&&($(e),$(_),$(g),$(C),$(p),$(S)),G(f,r),G(d,r),G(E,r),L&&L.d(r),G(N,r)}}}function Lt(t,e,n){let l;ye(t,U,f=>n(1,l=f));let{idx:o}=e;function a(f){t.$$.not_equal(l.policyConflictLog[o].conflict,f)&&(l.policyConflictLog[o].conflict=f,U.set(l))}function i(f){t.$$.not_equal(l.policyConflictLog[o].stage,f)&&(l.policyConflictLog[o].stage=f,U.set(l))}function c(f){t.$$.not_equal(l.policyConflictLog[o].locationName,f)&&(l.policyConflictLog[o].locationName=f,U.set(l))}function u(f){t.$$.not_equal(l.policyConflictLog[o].resolved,f)&&(l.policyConflictLog[o].resolved=f,U.set(l))}function _(f){t.$$.not_equal(l.policyConflictLog[o].notes,f)&&(l.policyConflictLog[o].notes=f,U.set(l))}return t.$$set=f=>{"idx"in f&&n(0,o=f.idx)},[o,l,a,i,c,u,_]}class St extends Ie{constructor(e){super(),Le(this,e,Lt,It,we,{idx:0})}}const{window:Nt}=tt;function Ee(t,e,n){const l=t.slice();return l[38]=e[n],l[39]=e,l[40]=n,l}function je(t,e,n){const l=t.slice();return l[41]=e[n],l[42]=e,l[40]=n,l}function Ae(t,e,n){const l=t.slice();return l[38]=e[n],l[40]=n,l}function Te(t,e,n){const l=t.slice();return l[41]=e[n],l[40]=n,l}function Dt(t){let e,n,l,o,a,i,c,u;e=new ht({props:{$$slots:{default:[jt]},$$scope:{ctx:t}}}),e.$on("click",t[11]),l=new bt({props:{$$slots:{default:[At]},$$scope:{ctx:t}}}),l.$on("click",t[13]);const _=[qt,Tt],f=[];function j(g,d){return g[0].kind=="critical"?0:1}return a=j(t),i=f[a]=_[a](t),{c(){M(e.$$.fragment),n=T(),M(l.$$.fragment),o=T(),i.c(),c=_e()},l(g){V(e.$$.fragment,g),n=q(g),V(l.$$.fragment,g),o=q(g),i.l(g),c=_e()},m(g,d){F(e,g,d),y(g,n,d),F(l,g,d),y(g,o,d),f[a].m(g,d),y(g,c,d),u=!0},p(g,d){const B={};d[1]&16384&&(B.$$scope={dirty:d,ctx:g}),e.$set(B);const C={};d[1]&16384&&(C.$$scope={dirty:d,ctx:g}),l.$set(C);let E=a;a=j(g),a===E?f[a].p(g,d):(se(),I(f[E],1,1,()=>{f[E]=null}),re(),i=f[a],i?i.p(g,d):(i=f[a]=_[a](g),i.c()),k(i,1),i.m(c.parentNode,c))},i(g){u||(k(e.$$.fragment,g),k(l.$$.fragment,g),k(i),u=!0)},o(g){I(e.$$.fragment,g),I(l.$$.fragment,g),I(i),u=!1},d(g){g&&($(n),$(o),$(c)),G(e,g),G(l,g),f[a].d(g)}}}function Et(t){let e,n,l,o,a,i,c="Click the map to add a problem, or select a problem to fill out data",u,_,f="Critical Issues",j,g,d,B="Policy Conflicts",C,E,s;e=new dt({props:{label:"Tools",open:!0,$$slots:{default:[Mt]},$$scope:{ctx:t}}});function p(m){t[21](m)}let S={legend:"Create new problems",choices:[["critical","Critical Issue"],["conflict","Policy Conflict"]],inlineSmall:!0};t[5]!==void 0&&(S.value=t[5]),l=new Se({props:S}),x.push(()=>te(l,"value",p));let N=oe(t[2].criticalIssues),D=[];for(let m=0;m<N.length;m+=1)D[m]=Pe(Te(t,N,m));const w=m=>I(D[m],1,1,()=>{D[m]=null});let J=oe(t[2].policyConflictLog),P=[];for(let m=0;m<J.length;m+=1)P[m]=Me(Ae(t,J,m));const ae=m=>I(P[m],1,1,()=>{P[m]=null});return{c(){M(e.$$.fragment),n=T(),M(l.$$.fragment),a=T(),i=W("p"),i.textContent=c,u=T(),_=W("h3"),_.textContent=f,j=T();for(let m=0;m<D.length;m+=1)D[m].c();g=T(),d=W("h3"),d.textContent=B,C=T();for(let m=0;m<P.length;m+=1)P[m].c();E=_e()},l(m){V(e.$$.fragment,m),n=q(m),V(l.$$.fragment,m),a=q(m),i=Z(m,"P",{"data-svelte-h":!0}),ve(i)!=="svelte-12ba5j2"&&(i.textContent=c),u=q(m),_=Z(m,"H3",{"data-svelte-h":!0}),ve(_)!=="svelte-1qhh5xr"&&(_.textContent=f),j=q(m);for(let v=0;v<D.length;v+=1)D[v].l(m);g=q(m),d=Z(m,"H3",{"data-svelte-h":!0}),ve(d)!=="svelte-eyxzjx"&&(d.textContent=B),C=q(m);for(let v=0;v<P.length;v+=1)P[v].l(m);E=_e()},m(m,v){F(e,m,v),y(m,n,v),F(l,m,v),y(m,a,v),y(m,i,v),y(m,u,v),y(m,_,v),y(m,j,v);for(let H=0;H<D.length;H+=1)D[H]&&D[H].m(m,v);y(m,g,v),y(m,d,v),y(m,C,v);for(let H=0;H<P.length;H+=1)P[H]&&P[H].m(m,v);y(m,E,v),s=!0},p(m,v){const H={};v[0]&200|v[1]&16384&&(H.$$scope={dirty:v,ctx:m}),e.$set(H);const L={};if(!o&&v[0]&32&&(o=!0,L.value=m[5],ee(()=>o=!1)),l.$set(L),v[0]&33798){N=oe(m[2].criticalIssues);let A;for(A=0;A<N.length;A+=1){const le=Te(m,N,A);D[A]?(D[A].p(le,v),k(D[A],1)):(D[A]=Pe(le),D[A].c(),k(D[A],1),D[A].m(g.parentNode,g))}for(se(),A=N.length;A<D.length;A+=1)w(A);re()}if(v[0]&66566){J=oe(m[2].policyConflictLog);let A;for(A=0;A<J.length;A+=1){const le=Ae(m,J,A);P[A]?(P[A].p(le,v),k(P[A],1)):(P[A]=Me(le),P[A].c(),k(P[A],1),P[A].m(E.parentNode,E))}for(se(),A=J.length;A<P.length;A+=1)ae(A);re()}},i(m){if(!s){k(e.$$.fragment,m),k(l.$$.fragment,m);for(let v=0;v<N.length;v+=1)k(D[v]);for(let v=0;v<J.length;v+=1)k(P[v]);s=!0}},o(m){I(e.$$.fragment,m),I(l.$$.fragment,m),D=D.filter(Boolean);for(let v=0;v<D.length;v+=1)I(D[v]);P=P.filter(Boolean);for(let v=0;v<P.length;v+=1)I(P[v]);s=!1},d(m){m&&($(n),$(a),$(i),$(u),$(_),$(j),$(g),$(d),$(C),$(E)),G(e,m),G(l,m),ge(D,m),ge(P,m)}}}function jt(t){let e;return{c(){e=X("Save")},l(n){e=Q(n,"Save")},m(n,l){y(n,e,l)},d(n){n&&$(e)}}}function At(t){let e;return{c(){e=X("Delete")},l(n){e=Q(n,"Delete")},m(n,l){y(n,e,l)},d(n){n&&$(e)}}}function Tt(t){let e,n;return e=new St({props:{idx:t[0].idx}}),{c(){M(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,o){F(e,l,o),n=!0},p(l,o){const a={};o[0]&1&&(a.idx=l[0].idx),e.$set(a)},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function qt(t){let e,n;return e=new yt({props:{idx:t[0].idx}}),{c(){M(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,o){F(e,l,o),n=!0},p(l,o){const a={};o[0]&1&&(a.idx=l[0].idx),e.$set(a)},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function Pt(t){let e;return{c(){e=X("Zoom to fit")},l(n){e=Q(n,"Zoom to fit")},m(n,l){y(n,e,l)},d(n){n&&$(e)}}}function Bt(t){let e;return{c(){e=X("Show scheme context")},l(n){e=Q(n,"Show scheme context")},m(n,l){y(n,e,l)},d(n){n&&$(e)}}}function Mt(t){let e,n,l,o,a,i,c,u,_,f,j,g;e=new vt({props:{$$slots:{default:[Pt]},$$scope:{ctx:t}}}),e.$on("click",t[18]),l=new pt({}),a=new _t({});function d(s){t[19](s)}let B={map:t[3]};t[6]!==void 0&&(B.enabled=t[6]),c=new gt({props:B}),x.push(()=>te(c,"enabled",d));function C(s){t[20](s)}let E={$$slots:{default:[Bt]},$$scope:{ctx:t}};return t[7]!==void 0&&(E.checked=t[7]),f=new mt({props:E}),x.push(()=>te(f,"checked",C)),{c(){M(e.$$.fragment),n=T(),M(l.$$.fragment),o=T(),M(a.$$.fragment),i=T(),M(c.$$.fragment),_=T(),M(f.$$.fragment)},l(s){V(e.$$.fragment,s),n=q(s),V(l.$$.fragment,s),o=q(s),V(a.$$.fragment,s),i=q(s),V(c.$$.fragment,s),_=q(s),V(f.$$.fragment,s)},m(s,p){F(e,s,p),y(s,n,p),F(l,s,p),y(s,o,p),F(a,s,p),y(s,i,p),F(c,s,p),y(s,_,p),F(f,s,p),g=!0},p(s,p){const S={};p[1]&16384&&(S.$$scope={dirty:p,ctx:s}),e.$set(S);const N={};p[0]&8&&(N.map=s[3]),!u&&p[0]&64&&(u=!0,N.enabled=s[6],ee(()=>u=!1)),c.$set(N);const D={};p[1]&16384&&(D.$$scope={dirty:p,ctx:s}),!j&&p[0]&128&&(j=!0,D.checked=s[7],ee(()=>j=!1)),f.$set(D)},i(s){g||(k(e.$$.fragment,s),k(l.$$.fragment,s),k(a.$$.fragment,s),k(c.$$.fragment,s),k(f.$$.fragment,s),g=!0)},o(s){I(e.$$.fragment,s),I(l.$$.fragment,s),I(a.$$.fragment,s),I(c.$$.fragment,s),I(f.$$.fragment,s),g=!1},d(s){s&&($(n),$(o),$(i),$(_)),G(e,s),G(l,s),G(a,s),G(c,s),G(f,s)}}}function qe(t){let e,n,l=t[41].resolved+"",o;return{c(){e=W("span"),n=X("Resolved: "),o=X(l)},l(a){e=Z(a,"SPAN",{});var i=z(e);n=Q(i,"Resolved: "),o=Q(i,l),i.forEach($)},m(a,i){y(a,e,i),R(e,n),R(e,o)},p(a,i){i[0]&4&&l!==(l=a[41].resolved+"")&&ce(o,l)},d(a){a&&$(e)}}}function Vt(t){let e,n,l,o=t[41].stage+"",a,i,c=t[41].stage!="Design"&&qe(t);return{c(){e=W("div"),n=W("span"),l=X("Stage: "),a=X(o),i=T(),c&&c.c(),this.h()},l(u){e=Z(u,"DIV",{style:!0});var _=z(e);n=Z(_,"SPAN",{});var f=z(n);l=Q(f,"Stage: "),a=Q(f,o),f.forEach($),i=q(_),c&&c.l(_),_.forEach($),this.h()},h(){K(e,"width","100%"),K(e,"display","flex"),K(e,"justify-content","space-between")},m(u,_){y(u,e,_),R(e,n),R(n,l),R(n,a),R(e,i),c&&c.m(e,null)},p(u,_){_[0]&4&&o!==(o=u[41].stage+"")&&ce(a,o),u[41].stage!="Design"?c?c.p(u,_):(c=qe(u),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(u){u&&$(e),c&&c.d()}}}function Pe(t){let e,n,l;function o(){return t[22](t[40])}function a(){return t[23](t[40])}return n=new Ze({props:{name:t[15](t[41]),$$slots:{default:[Vt]},$$scope:{ctx:t}}}),n.$on("click",o),n.$on("mouseenter",a),n.$on("mouseleave",t[24]),{c(){e=W("li"),M(n.$$.fragment)},l(i){e=Z(i,"LI",{});var c=z(e);V(n.$$.fragment,c),c.forEach($)},m(i,c){y(i,e,c),F(n,e,null),l=!0},p(i,c){t=i;const u={};c[0]&4&&(u.name=t[15](t[41])),c[0]&4|c[1]&16384&&(u.$$scope={dirty:c,ctx:t}),n.$set(u)},i(i){l||(k(n.$$.fragment,i),l=!0)},o(i){I(n.$$.fragment,i),l=!1},d(i){i&&$(e),G(n)}}}function Be(t){let e,n,l=t[38].resolved+"",o;return{c(){e=W("span"),n=X("Resolved: "),o=X(l)},l(a){e=Z(a,"SPAN",{});var i=z(e);n=Q(i,"Resolved: "),o=Q(i,l),i.forEach($)},m(a,i){y(a,e,i),R(e,n),R(e,o)},p(a,i){i[0]&4&&l!==(l=a[38].resolved+"")&&ce(o,l)},d(a){a&&$(e)}}}function Ft(t){let e,n,l,o=t[38].stage+"",a,i,c,u=t[38].stage!="Design"&&Be(t);return{c(){e=W("div"),n=W("span"),l=X("Stage: "),a=X(o),i=T(),u&&u.c(),c=T(),this.h()},l(_){e=Z(_,"DIV",{style:!0});var f=z(e);n=Z(f,"SPAN",{});var j=z(n);l=Q(j,"Stage: "),a=Q(j,o),j.forEach($),i=q(f),u&&u.l(f),f.forEach($),c=q(_),this.h()},h(){K(e,"width","100%"),K(e,"display","flex"),K(e,"justify-content","space-between")},m(_,f){y(_,e,f),R(e,n),R(n,l),R(n,a),R(e,i),u&&u.m(e,null),y(_,c,f)},p(_,f){f[0]&4&&o!==(o=_[38].stage+"")&&ce(a,o),_[38].stage!="Design"?u?u.p(_,f):(u=Be(_),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(_){_&&($(e),$(c)),u&&u.d()}}}function Me(t){let e,n;function l(){return t[25](t[40])}function o(){return t[26](t[40])}return e=new Ze({props:{name:t[16](t[38]),$$slots:{default:[Ft]},$$scope:{ctx:t}}}),e.$on("click",l),e.$on("mouseenter",o),e.$on("mouseleave",t[27]),{c(){M(e.$$.fragment)},l(a){V(e.$$.fragment,a)},m(a,i){F(e,a,i),n=!0},p(a,i){t=a;const c={};i[0]&4&&(c.name=t[16](t[38])),i[0]&4|i[1]&16384&&(c.$$scope={dirty:i,ctx:t}),e.$set(c)},i(a){n||(k(e.$$.fragment,a),n=!0)},o(a){I(e.$$.fragment,a),n=!1},d(a){G(e,a)}}}function Gt(t){let e,n,l,o=t[41].criticalIssue+"",a;return{c(){e=be("svg"),n=be("polygon"),l=be("text"),a=X(o),this.h()},l(i){e=ke(i,"svg",{width:!0,height:!0,xmlns:!0});var c=z(e);n=ke(c,"polygon",{points:!0,fill:!0,class:!0}),z(n).forEach($),l=ke(c,"text",{x:!0,y:!0});var u=z(l);a=Q(u,o),u.forEach($),c.forEach($),this.h()},h(){O(n,"points","20,0 0,40 40,40"),O(n,"fill",st.critical.background),O(n,"class","svelte-ktyu3j"),O(l,"x","13"),O(l,"y","30"),K(l,"fill","white"),O(e,"width","40"),O(e,"height","40"),O(e,"xmlns","http://www.w3.org/2000/svg")},m(i,c){y(i,e,c),R(e,n),R(e,l),R(l,a)},p(i,c){c[0]&4&&o!==(o=i[41].criticalIssue+"")&&ce(a,o)},d(i){i&&$(e)}}}function Ve(t){let e,n,l;function o(u){t[29](u,t[41])}function a(){return t[30](t[40])}function i(){return t[31](t[40])}let c={draggable:!0,$$slots:{default:[Gt]},$$scope:{ctx:t}};return t[41].point!==void 0&&(c.lngLat=t[41].point),e=new We({props:c}),x.push(()=>te(e,"lngLat",o)),e.$on("click",a),e.$on("dragend",i),{c(){M(e.$$.fragment)},l(u){V(e.$$.fragment,u)},m(u,_){F(e,u,_),l=!0},p(u,_){t=u;const f={};_[0]&4|_[1]&16384&&(f.$$scope={dirty:_,ctx:t}),!n&&_[0]&4&&(n=!0,f.lngLat=t[41].point,ee(()=>n=!1)),e.$set(f)},i(u){l||(k(e.$$.fragment,u),l=!0)},o(u){I(e.$$.fragment,u),l=!1},d(u){G(e,u)}}}function Rt(t){let e,n=t[38].conflict+"",l;return{c(){e=W("span"),l=X(n),this.h()},l(o){e=Z(o,"SPAN",{class:!0});var a=z(e);l=Q(a,n),a.forEach($),this.h()},h(){O(e,"class","dot svelte-ktyu3j"),K(e,"background",rt)},m(o,a){y(o,e,a),R(e,l)},p(o,a){a[0]&4&&n!==(n=o[38].conflict+"")&&ce(l,n)},d(o){o&&$(e)}}}function Fe(t){let e,n,l;function o(u){t[32](u,t[38])}function a(){return t[33](t[40])}function i(){return t[34](t[40])}let c={draggable:!0,$$slots:{default:[Rt]},$$scope:{ctx:t}};return t[38].point!==void 0&&(c.lngLat=t[38].point),e=new We({props:c}),x.push(()=>te(e,"lngLat",o)),e.$on("click",a),e.$on("dragend",i),{c(){M(e.$$.fragment)},l(u){V(e.$$.fragment,u)},m(u,_){F(e,u,_),l=!0},p(u,_){t=u;const f={};_[0]&4|_[1]&16384&&(f.$$scope={dirty:_,ctx:t}),!n&&_[0]&4&&(n=!0,f.lngLat=t[38].point,ee(()=>n=!1)),e.$set(f)},i(u){l||(k(e.$$.fragment,u),l=!0)},o(u){I(e.$$.fragment,u),l=!1},d(u){G(e,u)}}}function Ut(t){let e,n;return e=new ot({props:{paint:{"circle-radius":30,"circle-opacity":0,"circle-stroke-width":5,"circle-stroke-color":"yellow"}}}),{c(){M(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,o){F(e,l,o),n=!0},p:xe,i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function Ot(t){let e,n,l,o,a,i,c,u,_,f;e=new $t({}),e.$on("click",t[12]),l=new nt({props:{gj:t[2].summary.networkMap,show:t[7]}});let j=oe(t[2].criticalIssues),g=[];for(let s=0;s<j.length;s+=1)g[s]=Ve(je(t,j,s));const d=s=>I(g[s],1,1,()=>{g[s]=null});let B=oe(t[2].policyConflictLog),C=[];for(let s=0;s<B.length;s+=1)C[s]=Fe(Ee(t,B,s));const E=s=>I(C[s],1,1,()=>{C[s]=null});return c=new it({props:{data:t[8],$$slots:{default:[Ut]},$$scope:{ctx:t}}}),_=new kt({props:{map:t[3]}}),{c(){M(e.$$.fragment),n=T(),M(l.$$.fragment),o=T();for(let s=0;s<g.length;s+=1)g[s].c();a=T();for(let s=0;s<C.length;s+=1)C[s].c();i=T(),M(c.$$.fragment),u=T(),M(_.$$.fragment)},l(s){V(e.$$.fragment,s),n=q(s),V(l.$$.fragment,s),o=q(s);for(let p=0;p<g.length;p+=1)g[p].l(s);a=q(s);for(let p=0;p<C.length;p+=1)C[p].l(s);i=q(s),V(c.$$.fragment,s),u=q(s),V(_.$$.fragment,s)},m(s,p){F(e,s,p),y(s,n,p),F(l,s,p),y(s,o,p);for(let S=0;S<g.length;S+=1)g[S]&&g[S].m(s,p);y(s,a,p);for(let S=0;S<C.length;S+=1)C[S]&&C[S].m(s,p);y(s,i,p),F(c,s,p),y(s,u,p),F(_,s,p),f=!0},p(s,p){const S={};if(p[0]&4&&(S.gj=s[2].summary.networkMap),p[0]&128&&(S.show=s[7]),l.$set(S),p[0]&516){j=oe(s[2].criticalIssues);let w;for(w=0;w<j.length;w+=1){const J=je(s,j,w);g[w]?(g[w].p(J,p),k(g[w],1)):(g[w]=Ve(J),g[w].c(),k(g[w],1),g[w].m(a.parentNode,a))}for(se(),w=j.length;w<g.length;w+=1)d(w);re()}if(p[0]&516){B=oe(s[2].policyConflictLog);let w;for(w=0;w<B.length;w+=1){const J=Ee(s,B,w);C[w]?(C[w].p(J,p),k(C[w],1)):(C[w]=Fe(J),C[w].c(),k(C[w],1),C[w].m(i.parentNode,i))}for(se(),w=B.length;w<C.length;w+=1)E(w);re()}const N={};p[0]&256&&(N.data=s[8]),p[1]&16384&&(N.$$scope={dirty:p,ctx:s}),c.$set(N);const D={};p[0]&8&&(D.map=s[3]),_.$set(D)},i(s){if(!f){k(e.$$.fragment,s),k(l.$$.fragment,s);for(let p=0;p<j.length;p+=1)k(g[p]);for(let p=0;p<B.length;p+=1)k(C[p]);k(c.$$.fragment,s),k(_.$$.fragment,s),f=!0}},o(s){I(e.$$.fragment,s),I(l.$$.fragment,s),g=g.filter(Boolean);for(let p=0;p<g.length;p+=1)I(g[p]);C=C.filter(Boolean);for(let p=0;p<C.length;p+=1)I(C[p]);I(c.$$.fragment,s),I(_.$$.fragment,s),f=!1},d(s){s&&($(n),$(o),$(a),$(i),$(u)),G(e,s),G(l,s),ge(g,s),ge(C,s),G(c,s),G(_,s)}}}function Ht(t){let e,n,l,o,a,i,c,u,_,f,j;const g=[Et,Dt],d=[];function B(s,p){return s[0]==null?0:1}l=B(t),o=d[l]=g[l](t);function C(s){t[35](s)}let E={$$slots:{default:[Ot]},$$scope:{ctx:t}};return t[3]!==void 0&&(E.map=t[3]),c=new et({props:E}),x.push(()=>te(c,"map",C)),{c(){e=W("div"),n=W("div"),o.c(),a=T(),i=W("div"),M(c.$$.fragment),this.h()},l(s){e=Z(s,"DIV",{style:!0});var p=z(e);n=Z(p,"DIV",{style:!0});var S=z(n);o.l(S),S.forEach($),a=q(p),i=Z(p,"DIV",{style:!0});var N=z(i);V(c.$$.fragment,N),N.forEach($),p.forEach($),this.h()},h(){K(n,"width","30%"),K(n,"overflow-y","scroll"),K(n,"padding","10px"),K(n,"border","1px solid black"),K(i,"position","relative"),K(i,"width","70%"),K(e,"display","flex"),K(e,"height","80vh")},m(s,p){y(s,e,p),R(e,n),d[l].m(n,null),t[28](n),R(e,a),R(e,i),F(c,i,null),_=!0,f||(j=Xe(Nt,"keydown",t[17]),f=!0)},p(s,p){let S=l;l=B(s),l===S?d[l].p(s,p):(se(),I(d[S],1,1,()=>{d[S]=null}),re(),o=d[l],o?o.p(s,p):(o=d[l]=g[l](s),o.c()),k(o,1),o.m(n,null));const N={};p[0]&396|p[1]&16384&&(N.$$scope={dirty:p,ctx:s}),!u&&p[0]&8&&(u=!0,N.map=s[3],ee(()=>u=!1)),c.$set(N)},i(s){_||(k(o),k(c.$$.fragment,s),_=!0)},o(s){I(o),I(c.$$.fragment,s),_=!1},d(s){s&&$(e),d[l].d(),t[28](null),G(c),f=!1,j()}}}function Kt(t,e,n){let l={type:"FeatureCollection",features:[]},o=e??n;if(o!=null){let a=o.kind=="critical"?t.criticalIssues:t.policyConflictLog;l.features.push(Ce(a[o.idx].point))}return l}function Wt(t,e){const n=t.conflict||"",l=e.conflict||"";return n.localeCompare(l)}function Zt(t,e){const n=t.criticalIssue||"",l=e.criticalIssue||"",[o,a]=Ge(n),[i,c]=Ge(l);return(o-i)*10+a.localeCompare(c)}function Ge(t){if(t==="")return[0,""];let e=t.substring(t.length-1),n=isNaN(e)?e:"";return[parseInt(t),n]}function Ce(t){return{type:"Feature",properties:{},geometry:{type:"Point",coordinates:t}}}function zt(t,e,n){let l,o;ye(t,U,h=>n(2,o=h));let a,i,c="critical",u=null,_=null,f=null,j=!1,g=!0;async function d(h){_=i.scrollTop,n(0,u=h),n(1,f=null),await he(),n(4,i.scrollTop=0,i)}async function B(h){_=i.scrollTop,n(0,u=h),n(1,f=null),await he(),n(4,i.scrollTop=0,i);let Y=h.kind=="critical"?o.criticalIssues:o.policyConflictLog;a.flyTo({center:Y[h.idx].point,duration:500})}async function C(){n(0,u=null),s(),_!=null&&(await he(),n(4,i.scrollTop=_,i),_=null)}function E(h){if(!j){if(u!=null){C();return}c=="critical"?(pe(U,o.criticalIssues=[...o.criticalIssues,{criticalIssue:"",stage:"",point:h.detail.lngLat.toArray(),locationName:"",resolved:"",notes:""}],o),d({kind:"critical",idx:o.criticalIssues.length-1})):(pe(U,o.policyConflictLog=[...o.policyConflictLog,{conflict:"",stage:"",point:h.detail.lngLat.toArray(),locationName:"",resolved:"",notes:""}],o),d({kind:"conflict",idx:o.policyConflictLog.length-1}))}}function s(){pe(U,o.policyConflictLog=o.policyConflictLog.toSorted(Wt),o),pe(U,o.criticalIssues=o.criticalIssues.toSorted(Zt),o)}Qe(()=>{S(!1)});function p(){window.confirm("Delete this entry?")&&(u.kind=="critical"?(o.criticalIssues.splice(u.idx,1),U.set(o)):(o.policyConflictLog.splice(u.idx,1),U.set(o)),C())}function S(h){let Y={type:"FeatureCollection",features:[...o.criticalIssues.map(de=>Ce(de.point)),...o.policyConflictLog.map(de=>Ce(de.point)),...o.summary.networkMap.features]};Y.features.length>0&&a.fitBounds(lt(Y),{padding:20,animate:h})}function N(h){let Y=h.criticalIssue?ut(h.criticalIssue):"Unknown critical";return h.locationName?`${Y} (${h.locationName})`:Y}function D(h){let Y=h.conflict?ct(h.conflict):"Unknown conflict";return h.locationName?`${Y} (${h.locationName})`:Y}function w(h){if(u!=null&&h.key=="Escape")h.stopPropagation(),C();else if(u!=null&&h.key=="Delete"){let Y=h.target.tagName;if(Y=="INPUT"||Y=="TEXTAREA")return;h.stopPropagation(),p()}}const J=()=>S(!0);function P(h){j=h,n(6,j)}function ae(h){g=h,n(7,g)}function m(h){c=h,n(5,c)}const v=h=>B({kind:"critical",idx:h}),H=h=>n(1,f={kind:"critical",idx:h}),L=()=>n(1,f=null),A=h=>B({kind:"conflict",idx:h}),le=h=>n(1,f={kind:"conflict",idx:h}),r=()=>n(1,f=null);function b(h){x[h?"unshift":"push"](()=>{i=h,n(4,i)})}function ne(h,Y){t.$$.not_equal(Y.point,h)&&(Y.point=h,U.set(o))}const ie=h=>d({kind:"critical",idx:h}),fe=h=>d({kind:"critical",idx:h});function ue(h,Y){t.$$.not_equal(Y.point,h)&&(Y.point=h,U.set(o))}const ze=h=>d({kind:"conflict",idx:h}),Je=h=>d({kind:"conflict",idx:h});function Ye(h){a=h,n(3,a)}return t.$$.update=()=>{t.$$.dirty[0]&7&&n(8,l=Kt(o,u,f))},[u,f,o,a,i,c,j,g,l,d,B,C,E,p,S,N,D,w,J,P,ae,m,v,H,L,A,le,r,b,ne,ie,fe,ue,ze,Je,Ye]}class dl extends Ie{constructor(e){super(),Le(this,e,zt,Ht,we,{},null,[-1,-1])}}export{dl as component};
