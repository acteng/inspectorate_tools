import{s as De,a as k,g as x,i as F,f as m,T as Ve,e as b,c as v,m as $e,p as g,w as Je,n as me,y as Be,l as Pe,t as V,b as O,d as J,h as c,u as Ue,r as qe,v as Oe,j as Te,z as We,K as ye,U as Le,x as ce,o as Ge}from"./scheduler.CT9iOTEw.js";import{S as je,i as Ne,c as G,a as j,m as N,t as h,b as I,d as X,e as ze,g as Xe,f as He}from"./index.CnK_PB-e.js";import{L as Ke,d as Me}from"./download.BHaGILUs.js";import{b as pe}from"./paths.CJO2Qaa3.js";import"./entry.CYmK8e6o.js";import{B as Ee}from"./ButtonGroup.CPR9Q03l.js";import{D as Qe}from"./DefaultButton.qd2_wY_n.js";import{F as Ze}from"./FileInput.B-XXAmlJ.js";import{R as et}from"./Radio.X_Wkl5Zy.js";/* empty css                                            */import{S as _e}from"./SecondaryButton.Bjah1jNo.js";import{W as tt}from"./WarningButton.B5FdEria.js";import{a as Re,p as lt}from"./index.C1goRHJC.js";import{F as nt}from"./FormElement.22zQJVbE.js";import"./index.BJF7fj0i.js";function st(r){let e,l,n,a=`You can import from an existing route check .xlsx file, <b>only if there&#39;s an up-to-date DALOG sheet added</b>
    . After importing, there will still be some problems:
    <ul><li>You must fill out the Junction Assessment Tool (JAT); it won&#39;t be
        imported</li> <li>Some text fields on the Summary of Scheme page will be missing</li></ul>`,t,o;return{c(){e=b("input"),l=k(),n=b("div"),n.innerHTML=a,this.h()},l(s){e=v(s,"INPUT",{class:!0,id:!0,type:!0}),l=x(s),n=v(s,"DIV",{class:!0,"data-svelte-h":!0}),$e(n)!=="svelte-1alapt1"&&(n.innerHTML=a),this.h()},h(){g(e,"class","govuk-file-upload"),g(e,"id","import-xlsx"),g(e,"type","file"),g(n,"class","govuk-hint")},m(s,u){F(s,e,u),r[4](e),F(s,l,u),F(s,n,u),t||(o=Je(e,"change",r[2]),t=!0)},p:me,d(s){s&&(m(e),m(l),m(n)),r[4](null),t=!1,o()}}}function ot(r){let e,l,n,a;return e=new nt({props:{label:"Import from XLSX file",id:"import-xlsx",$$slots:{default:[st]},$$scope:{ctx:r}}}),n=new Ke({props:{loading:r[0]}}),{c(){G(e.$$.fragment),l=k(),G(n.$$.fragment)},l(t){j(e.$$.fragment,t),l=x(t),j(n.$$.fragment,t)},m(t,o){N(e,t,o),F(t,l,o),N(n,t,o),a=!0},p(t,[o]){const s={};o&66&&(s.$$scope={dirty:o,ctx:t}),e.$set(s);const u={};o&1&&(u.loading=t[0]),n.$set(u)},i(t){a||(h(e.$$.fragment,t),h(n.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),I(n.$$.fragment,t),a=!1},d(t){t&&m(l),X(e,t),X(n,t)}}}function rt(r,e,l){let n=Ve(),{xlsxImporter:a}=e,t="",o;async function s(L){let D=o.files[0].name;try{l(0,t=`Loading ${D}`);let y=await o.files[0].arrayBuffer(),p=await a(y);l(0,t=""),n("imported",{filename:Re(D,".xlsx"),data:p})}catch(y){window.alert(`Couldn't import ${D}: ${y}`),l(0,t="")}}function u(L){Be[L?"unshift":"push"](()=>{o=L,l(1,o)})}return r.$$set=L=>{"xlsxImporter"in L&&l(3,a=L.xlsxImporter)},[t,o,s,a,u]}class at extends je{constructor(e){super(),Ne(this,e,rt,ot,De,{xlsxImporter:3})}}function it(r){let e,l,n;return{c(){e=b("img"),n=V(`
          Export .json`),this.h()},l(a){e=v(a,"IMG",{src:!0,alt:!0,class:!0}),n=J(a,`
          Export .json`),this.h()},h(){Ge(e.src,l=Me)||g(e,"src",l),g(e,"alt","Export .json"),g(e,"class","svelte-1ysyede")},m(a,t){F(a,e,t),F(a,n,t)},p:me,d(a){a&&(m(e),m(n))}}}function Ce(r){let e,l;return e=new _e({props:{$$slots:{default:[ft]},$$scope:{ctx:r}}}),e.$on("click",r[17]),{c(){G(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,a){N(e,n,a),l=!0},p(n,a){const t={};a&4194304&&(t.$$scope={dirty:a,ctx:n}),e.$set(t)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){I(e.$$.fragment,n),l=!1},d(n){X(e,n)}}}function ft(r){let e,l,n;return{c(){e=b("img"),n=V(`
            Export .xlsx`),this.h()},l(a){e=v(a,"IMG",{src:!0,alt:!0,class:!0}),n=J(a,`
            Export .xlsx`),this.h()},h(){Ge(e.src,l=Me)||g(e,"src",l),g(e,"alt","Export .xlsx"),g(e,"class","svelte-1ysyede")},m(a,t){F(a,e,t),F(a,n,t)},p:me,d(a){a&&(m(e),m(n))}}}function ut(r){let e,l,n,a;e=new _e({props:{$$slots:{default:[it]},$$scope:{ctx:r}}}),e.$on("click",r[9]);let t=r[3]&&Ce(r);return{c(){G(e.$$.fragment),l=k(),t&&t.c(),n=ye()},l(o){j(e.$$.fragment,o),l=x(o),t&&t.l(o),n=ye()},m(o,s){N(e,o,s),F(o,l,s),t&&t.m(o,s),F(o,n,s),a=!0},p(o,s){const u={};s&4194304&&(u.$$scope={dirty:s,ctx:o}),e.$set(u),o[3]?t?(t.p(o,s),s&8&&h(t,1)):(t=Ce(o),t.c(),h(t,1),t.m(n.parentNode,n)):t&&(Xe(),I(t,1,1,()=>{t=null}),He())},i(o){a||(h(e.$$.fragment,o),h(t),a=!0)},o(o){I(e.$$.fragment,o),I(t),a=!1},d(o){o&&(m(l),m(n)),X(e,o),t&&t.d(o)}}}function ct(r){let e;return{c(){e=V("New blank file")},l(l){e=J(l,"New blank file")},m(l,n){F(l,e,n)},d(l){l&&m(e)}}}function Se(r){let e,l,n,a;return n=new at({props:{xlsxImporter:r[4]}}),n.$on("imported",r[13]),{c(){e=b("hr"),l=k(),G(n.$$.fragment)},l(t){e=v(t,"HR",{}),l=x(t),j(n.$$.fragment,t)},m(t,o){F(t,e,o),F(t,l,o),N(n,t,o),a=!0},p(t,o){const s={};o&16&&(s.xlsxImporter=t[4]),n.$set(s)},i(t){a||(h(n.$$.fragment,t),a=!0)},o(t){I(n.$$.fragment,t),a=!1},d(t){t&&(m(e),m(l)),X(n,t)}}}function mt(r){let e;return{c(){e=V("Load selected file")},l(l){e=J(l,"Load selected file")},m(l,n){F(l,e,n)},d(l){l&&m(e)}}}function dt(r){let e;return{c(){e=V("Rename selected file")},l(l){e=J(l,"Rename selected file")},m(l,n){F(l,e,n)},d(l){l&&m(e)}}}function pt(r){let e;return{c(){e=V("Delete selected file")},l(l){e=J(l,"Delete selected file")},m(l,n){F(l,e,n)},d(l){l&&m(e)}}}function $t(r){let e,l,n,a,t,o;return e=new _e({props:{$$slots:{default:[mt]},$$scope:{ctx:r}}}),e.$on("click",r[18]),n=new _e({props:{$$slots:{default:[dt]},$$scope:{ctx:r}}}),n.$on("click",r[19]),t=new tt({props:{$$slots:{default:[pt]},$$scope:{ctx:r}}}),t.$on("click",r[20]),{c(){G(e.$$.fragment),l=k(),G(n.$$.fragment),a=k(),G(t.$$.fragment)},l(s){j(e.$$.fragment,s),l=x(s),j(n.$$.fragment,s),a=x(s),j(t.$$.fragment,s)},m(s,u){N(e,s,u),F(s,l,u),N(n,s,u),F(s,a,u),N(t,s,u),o=!0},p(s,u){const L={};u&4194304&&(L.$$scope={dirty:u,ctx:s}),e.$set(L);const D={};u&4194304&&(D.$$scope={dirty:u,ctx:s}),n.$set(D);const y={};u&4194304&&(y.$$scope={dirty:u,ctx:s}),t.$set(y)},i(s){o||(h(e.$$.fragment,s),h(n.$$.fragment,s),h(t.$$.fragment,s),o=!0)},o(s){I(e.$$.fragment,s),I(n.$$.fragment,s),I(t.$$.fragment,s),o=!1},d(s){s&&(m(l),m(a)),X(e,s),X(n,s),X(t,s)}}}function _t(r){let e,l,n,a,t,o,s,u=`All files are auto-saved in your browser's local storage. You can close
        your browser and resume later. You can export the file to your computer
        to share with someone else, and import from a file below.`,L,D,y,p,E,Y,T,ee,C,S,te,W,oe="Create or import a file",le,R,re,z,ae,P,ie,fe,H,i,$="Manage Existing Files",M,A,ge,ne,U,he,we,K,be,de,q;const ve=r[16].default,B=Pe(ve,r,r[22],null);S=new Ee({props:{$$slots:{default:[ut]},$$scope:{ctx:r}}}),R=new Qe({props:{$$slots:{default:[ct]},$$scope:{ctx:r}}}),R.$on("click",r[11]),P=new Ze({props:{label:"Import from a .json file",onLoad:r[12]}});let _=r[4]!=null&&Se(r);A=new Ee({props:{$$slots:{default:[$t]},$$scope:{ctx:r}}});function Ye(f){r[21](f)}let ke={label:"Selected file:",choices:r[6]};return r[5]!==void 0&&(ke.value=r[5]),U=new et({props:ke}),Be.push(()=>ze(U,"value",Ye)),{c(){e=b("div"),B&&B.c(),l=k(),n=b("hr"),a=k(),t=b("div"),o=b("div"),s=b("p"),s.textContent=u,L=k(),D=b("p"),y=b("b"),p=V("You are editing: "),E=b("a"),Y=V(r[7]),ee=V(`
          .`),C=k(),G(S.$$.fragment),te=k(),W=b("h2"),W.textContent=oe,le=k(),G(R.$$.fragment),re=k(),z=b("hr"),ae=k(),G(P.$$.fragment),ie=k(),_&&_.c(),fe=k(),H=b("div"),i=b("h2"),i.textContent=$,M=k(),G(A.$$.fragment),ge=k(),ne=b("div"),G(U.$$.fragment),we=k(),K=b("a"),be=V("Back to overview"),this.h()},l(f){e=v(f,"DIV",{class:!0});var d=O(e);B&&B.l(d),l=x(d),n=v(d,"HR",{}),a=x(d),t=v(d,"DIV",{class:!0});var Z=O(t);o=v(Z,"DIV",{class:!0});var w=O(o);s=v(w,"P",{"data-svelte-h":!0}),$e(s)!=="svelte-wkz669"&&(s.textContent=u),L=x(w),D=v(w,"P",{});var ue=O(D);y=v(ue,"B",{});var Q=O(y);p=J(Q,"You are editing: "),E=v(Q,"A",{href:!0});var xe=O(E);Y=J(xe,r[7]),xe.forEach(m),ee=J(Q,`
          .`),Q.forEach(m),ue.forEach(m),C=x(w),j(S.$$.fragment,w),te=x(w),W=v(w,"H2",{"data-svelte-h":!0}),$e(W)!=="svelte-1yqhw3l"&&(W.textContent=oe),le=x(w),j(R.$$.fragment,w),re=x(w),z=v(w,"HR",{}),ae=x(w),j(P.$$.fragment,w),ie=x(w),_&&_.l(w),w.forEach(m),fe=x(Z),H=v(Z,"DIV",{class:!0});var se=O(H);i=v(se,"H2",{"data-svelte-h":!0}),$e(i)!=="svelte-t00wtv"&&(i.textContent=$),M=x(se),j(A.$$.fragment,se),ge=x(se),ne=v(se,"DIV",{class:!0});var Fe=O(ne);j(U.$$.fragment,Fe),Fe.forEach(m),se.forEach(m),Z.forEach(m),we=x(d),K=v(d,"A",{href:!0,class:!0});var Ie=O(K);be=J(Ie,"Back to overview"),Ie.forEach(m),d.forEach(m),this.h()},h(){g(E,"href",T=pe+"/"+r[0].prefix),g(o,"class","govuk-grid-column-two-thirds"),g(ne,"class","file-radio-container svelte-1ysyede"),g(H,"class","govuk-grid-column-one-third"),g(t,"class","govuk-grid-row"),g(K,"href",de=pe+"/"+r[0].prefix),g(K,"class","govuk-back-link"),g(e,"class","govuk-width-container")},m(f,d){F(f,e,d),B&&B.m(e,null),c(e,l),c(e,n),c(e,a),c(e,t),c(t,o),c(o,s),c(o,L),c(o,D),c(D,y),c(y,p),c(y,E),c(E,Y),c(y,ee),c(o,C),N(S,o,null),c(o,te),c(o,W),c(o,le),N(R,o,null),c(o,re),c(o,z),c(o,ae),N(P,o,null),c(o,ie),_&&_.m(o,null),c(t,fe),c(t,H),c(H,i),c(H,M),N(A,H,null),c(H,ge),c(H,ne),N(U,ne,null),c(e,we),c(e,K),c(K,be),q=!0},p(f,[d]){B&&B.p&&(!q||d&4194304)&&Ue(B,ve,f,f[22],q?Oe(ve,f[22],d,null):qe(f[22]),null),(!q||d&128)&&Te(Y,f[7]),(!q||d&1&&T!==(T=pe+"/"+f[0].prefix))&&g(E,"href",T);const Z={};d&4194312&&(Z.$$scope={dirty:d,ctx:f}),S.$set(Z);const w={};d&4194304&&(w.$$scope={dirty:d,ctx:f}),R.$set(w),f[4]!=null?_?(_.p(f,d),d&16&&h(_,1)):(_=Se(f),_.c(),h(_,1),_.m(o,null)):_&&(Xe(),I(_,1,1,()=>{_=null}),He());const ue={};d&4194336&&(ue.$$scope={dirty:d,ctx:f}),A.$set(ue);const Q={};d&64&&(Q.choices=f[6]),!he&&d&32&&(he=!0,Q.value=f[5],We(()=>he=!1)),U.$set(Q),(!q||d&1&&de!==(de=pe+"/"+f[0].prefix))&&g(K,"href",de)},i(f){q||(h(B,f),h(S.$$.fragment,f),h(R.$$.fragment,f),h(P.$$.fragment,f),h(_),h(A.$$.fragment,f),h(U.$$.fragment,f),q=!0)},o(f){I(B,f),I(S.$$.fragment,f),I(R.$$.fragment,f),I(P.$$.fragment,f),I(_),I(A.$$.fragment,f),I(U.$$.fragment,f),q=!1},d(f){f&&m(e),B&&B.d(f),X(S),X(R),X(P),_&&_.d(),X(A),X(U)}}}function Ae(r,e){let l=document.createElement("a");l.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),l.setAttribute("download",r),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function gt(r,e,l){let n,a,t=me,o=()=>(t(),t=Le(Y,i=>l(23,a=i)),Y),s,u=me,L=()=>(u(),u=Le(E,i=>l(7,s=i)),E);r.$$.on_destroy.push(()=>t()),r.$$.on_destroy.push(()=>u());let{$$slots:D={},$$scope:y}=e,{files:p}=e,{currentFile:E}=e;L();let{state:Y}=e;o();let{downloadXlsx:T=void 0}=e,{xlsxImporter:ee=null}=e,C=p.getFileList(),S=C[0];function te(i){let $=window.prompt(`Rename file ${i} to what?`,i);if($){let M=p.key(i),A=window.localStorage.getItem(M);window.localStorage.setItem(p.key($),A),window.localStorage.removeItem(M),l(15,C=p.getFileList()),s===i&&ce(E,s=$,s)}}function W(){Ae(s+".json",JSON.stringify(a))}async function oe(i){if(window.confirm(`Really delete file ${i}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`)){let $=p.key(i);Ae(`${i}.json`,window.localStorage.getItem($)),window.localStorage.removeItem($),i==s?(l(15,C=p.getFileList()),C.length>0?ce(E,s=C[0],s):await le()):l(15,C=p.saveAndGetFileList(s,a)),l(5,S=C[0]||"")}}async function le(){let i=window.prompt("What should the file be called?","")||p.newFilename(),$=p.emptyState();l(15,C=p.saveAndGetFileList(i,$)),ce(E,s=i,s)}async function R(i,$){let M=Re(i,".json");try{let A=JSON.parse($);p.validate(A),l(15,C=p.saveAndGetFileList(M,A)),await z(M)}catch(A){window.alert(`Couldn't load ${M}: ${A}`)}}async function re(i){let{filename:$,data:M}=i.detail;l(15,C=p.saveAndGetFileList($,M)),await z($)}async function z(i){try{let $=p.loadFile(i);ce(E,s=i,s),ce(Y,a=$,a)}catch($){window.alert(`Couldn't load ${i}: ${$}`)}}const ae=()=>{T()},P=()=>{z(S)},ie=()=>{te(S)},fe=()=>{oe(S)};function H(i){S=i,l(5,S)}return r.$$set=i=>{"files"in i&&l(0,p=i.files),"currentFile"in i&&L(l(1,E=i.currentFile)),"state"in i&&o(l(2,Y=i.state)),"downloadXlsx"in i&&l(3,T=i.downloadXlsx),"xlsxImporter"in i&&l(4,ee=i.xlsxImporter),"$$scope"in i&&l(22,y=i.$$scope)},r.$$.update=()=>{r.$$.dirty&32768&&l(6,n=lt(C))},[p,E,Y,T,ee,S,n,s,te,W,oe,le,R,re,z,C,D,ae,P,ie,fe,H,y]}class Bt extends je{constructor(e){super(),Ne(this,e,gt,_t,De,{files:0,currentFile:1,state:2,downloadXlsx:3,xlsxImporter:4})}}export{Bt as F};
