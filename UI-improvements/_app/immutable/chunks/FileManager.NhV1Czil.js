import{s as je,a as k,g as y,i as I,f as c,T as Je,e as b,c as v,m as de,p as _,w as Pe,n as fe,y as Be,l as Ue,t as V,b as U,d as Y,h as m,u as qe,r as Oe,v as Te,j as Ke,z as We,K as Ee,U as pe,V as Le,x as ie,o as Ge}from"./scheduler.Dx5MGYrL.js";import{S as Xe,i as He,c as D,a as j,m as B,t as g,b as F,d as G,e as ze,g as Me,f as Ne}from"./index.BJbZCI5a.js";import{L as Qe,d as Re}from"./download.Cab441mH.js";import{b as ce}from"./paths.4B0TiqlA.js";import"./entry.oHYRJ-UW.js";import{B as Ce}from"./ButtonGroup.B3sPa8ER.js";import{D as Ze}from"./DefaultButton.CoNc33RB.js";import{F as et}from"./FileInput.CxJP3gw0.js";import{R as tt}from"./Radio.BMh6hVzt.js";/* empty css                                            */import{S as $e}from"./SecondaryButton.CMMQeibZ.js";import{W as lt}from"./WarningButton.DFuuP4wJ.js";import{a as Ve,p as nt}from"./index.Ba88fC-S.js";import{F as st}from"./FormElement.DFHmLU7S.js";import"./index.DRdNH6rT.js";function ot(s){let e,l,n,a=`You can import from an existing route check .xlsx file, <b>only if there&#39;s an up-to-date DALOG sheet added</b>
    . After importing, there will still be some problems:
    <ul><li>You must fill out the Junction Assessment Tool (JAT); it won&#39;t be
        imported</li> <li>Some text fields on the Summary of Scheme page will be missing</li></ul>`,t,r;return{c(){e=b("input"),l=k(),n=b("div"),n.innerHTML=a,this.h()},l(o){e=v(o,"INPUT",{class:!0,id:!0,type:!0}),l=y(o),n=v(o,"DIV",{class:!0,"data-svelte-h":!0}),de(n)!=="svelte-1alapt1"&&(n.innerHTML=a),this.h()},h(){_(e,"class","govuk-file-upload"),_(e,"id","import-xlsx"),_(e,"type","file"),_(n,"class","govuk-hint")},m(o,u){I(o,e,u),s[4](e),I(o,l,u),I(o,n,u),t||(r=Pe(e,"change",s[2]),t=!0)},p:fe,d(o){o&&(c(e),c(l),c(n)),s[4](null),t=!1,r()}}}function rt(s){let e,l,n,a;return e=new st({props:{label:"Import from XLSX file",id:"import-xlsx",$$slots:{default:[ot]},$$scope:{ctx:s}}}),n=new Qe({props:{loading:s[0]}}),{c(){D(e.$$.fragment),l=k(),D(n.$$.fragment)},l(t){j(e.$$.fragment,t),l=y(t),j(n.$$.fragment,t)},m(t,r){B(e,t,r),I(t,l,r),B(n,t,r),a=!0},p(t,[r]){const o={};r&66&&(o.$$scope={dirty:r,ctx:t}),e.$set(o);const u={};r&1&&(u.loading=t[0]),n.$set(u)},i(t){a||(g(e.$$.fragment,t),g(n.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),F(n.$$.fragment,t),a=!1},d(t){t&&c(l),G(e,t),G(n,t)}}}function at(s,e,l){let n=Je(),{xlsxImporter:a}=e,t="",r;async function o(L){let S=r.files[0].name;try{l(0,t=`Loading ${S}`);let x=await r.files[0].arrayBuffer(),p=await a(x);l(0,t=""),n("imported",{filename:Ve(S,".xlsx"),data:p})}catch(x){window.alert(`Couldn't import ${S}: ${x}`),l(0,t="")}}function u(L){Be[L?"unshift":"push"](()=>{r=L,l(1,r)})}return s.$$set=L=>{"xlsxImporter"in L&&l(3,a=L.xlsxImporter)},[t,r,o,a,u]}class it extends Xe{constructor(e){super(),He(this,e,at,rt,je,{xlsxImporter:3})}}function ft(s){let e,l,n;return{c(){e=b("img"),n=V(`
          Export .json`),this.h()},l(a){e=v(a,"IMG",{src:!0,alt:!0,class:!0}),n=Y(a,`
          Export .json`),this.h()},h(){Ge(e.src,l=Re)||_(e,"src",l),_(e,"alt","Export .json"),_(e,"class","svelte-1ysyede")},m(a,t){I(a,e,t),I(a,n,t)},p:fe,d(a){a&&(c(e),c(n))}}}function Se(s){let e,l;return e=new $e({props:{$$slots:{default:[ut]},$$scope:{ctx:s}}}),e.$on("click",function(){pe(s[3])&&s[3].apply(this,arguments)}),{c(){D(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,a){B(e,n,a),l=!0},p(n,a){s=n;const t={};a&262144&&(t.$$scope={dirty:a,ctx:s}),e.$set(t)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){G(e,n)}}}function ut(s){let e,l,n;return{c(){e=b("img"),n=V(`
            Export .xlsx`),this.h()},l(a){e=v(a,"IMG",{src:!0,alt:!0,class:!0}),n=Y(a,`
            Export .xlsx`),this.h()},h(){Ge(e.src,l=Re)||_(e,"src",l),_(e,"alt","Export .xlsx"),_(e,"class","svelte-1ysyede")},m(a,t){I(a,e,t),I(a,n,t)},p:fe,d(a){a&&(c(e),c(n))}}}function mt(s){let e,l,n,a;e=new $e({props:{$$slots:{default:[ft]},$$scope:{ctx:s}}}),e.$on("click",s[9]);let t=s[3]&&Se(s);return{c(){D(e.$$.fragment),l=k(),t&&t.c(),n=Ee()},l(r){j(e.$$.fragment,r),l=y(r),t&&t.l(r),n=Ee()},m(r,o){B(e,r,o),I(r,l,o),t&&t.m(r,o),I(r,n,o),a=!0},p(r,o){const u={};o&262144&&(u.$$scope={dirty:o,ctx:r}),e.$set(u),r[3]?t?(t.p(r,o),o&8&&g(t,1)):(t=Se(r),t.c(),g(t,1),t.m(n.parentNode,n)):t&&(Me(),F(t,1,1,()=>{t=null}),Ne())},i(r){a||(g(e.$$.fragment,r),g(t),a=!0)},o(r){F(e.$$.fragment,r),F(t),a=!1},d(r){r&&(c(l),c(n)),G(e,r),t&&t.d(r)}}}function ct(s){let e;return{c(){e=V("New blank file")},l(l){e=Y(l,"New blank file")},m(l,n){I(l,e,n)},d(l){l&&c(e)}}}function Ae(s){let e,l,n,a;return n=new it({props:{xlsxImporter:s[4]}}),n.$on("imported",s[13]),{c(){e=b("hr"),l=k(),D(n.$$.fragment)},l(t){e=v(t,"HR",{}),l=y(t),j(n.$$.fragment,t)},m(t,r){I(t,e,r),I(t,l,r),B(n,t,r),a=!0},p(t,r){const o={};r&16&&(o.xlsxImporter=t[4]),n.$set(o)},i(t){a||(g(n.$$.fragment,t),a=!0)},o(t){F(n.$$.fragment,t),a=!1},d(t){t&&(c(e),c(l)),G(n,t)}}}function dt(s){let e;return{c(){e=V("Load saved file")},l(l){e=Y(l,"Load saved file")},m(l,n){I(l,e,n)},d(l){l&&c(e)}}}function pt(s){let e;return{c(){e=V("Rename saved file")},l(l){e=Y(l,"Rename saved file")},m(l,n){I(l,e,n)},d(l){l&&c(e)}}}function $t(s){let e;return{c(){e=V("Delete saved file")},l(l){e=Y(l,"Delete saved file")},m(l,n){I(l,e,n)},d(l){l&&c(e)}}}function _t(s){let e,l,n,a,t,r;return e=new $e({props:{$$slots:{default:[dt]},$$scope:{ctx:s}}}),e.$on("click",function(){pe(s[14](s[5]))&&s[14](s[5]).apply(this,arguments)}),n=new $e({props:{$$slots:{default:[pt]},$$scope:{ctx:s}}}),n.$on("click",function(){pe(s[8](s[5]))&&s[8](s[5]).apply(this,arguments)}),t=new lt({props:{$$slots:{default:[$t]},$$scope:{ctx:s}}}),t.$on("click",function(){pe(s[10](s[5]))&&s[10](s[5]).apply(this,arguments)}),{c(){D(e.$$.fragment),l=k(),D(n.$$.fragment),a=k(),D(t.$$.fragment)},l(o){j(e.$$.fragment,o),l=y(o),j(n.$$.fragment,o),a=y(o),j(t.$$.fragment,o)},m(o,u){B(e,o,u),I(o,l,u),B(n,o,u),I(o,a,u),B(t,o,u),r=!0},p(o,u){s=o;const L={};u&262144&&(L.$$scope={dirty:u,ctx:s}),e.$set(L);const S={};u&262144&&(S.$$scope={dirty:u,ctx:s}),n.$set(S);const x={};u&262144&&(x.$$scope={dirty:u,ctx:s}),t.$set(x)},i(o){r||(g(e.$$.fragment,o),g(n.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),F(n.$$.fragment,o),F(t.$$.fragment,o),r=!1},d(o){o&&(c(l),c(a)),G(e,o),G(n,o),G(t,o)}}}function gt(s){let e,l,n,a,t,r,o,u=`All files are auto-saved in your browser's local storage. You can close your
        browser and resume later. You can export the file to your computer to share
        with someone else, and import from a file below.`,L,S,x,p,C,N,K,Z,X,H,oe,q,ue="Create or import a file",ee,R,re,W,ae,i,h,M,E,te,ke="Manage Existing Files",_e,le,J,ge,he,O,we,T,be,me,P;const ve=s[16].default,A=Ue(ve,s,s[18],null);H=new Ce({props:{$$slots:{default:[mt]},$$scope:{ctx:s}}}),R=new Ze({props:{$$slots:{default:[ct]},$$scope:{ctx:s}}}),R.$on("click",s[11]),i=new et({props:{label:"Import from a .json file",onLoad:s[12]}});let $=s[4]!=null&&Ae(s);function Ye(f){s[17](f)}let ye={label:"Selected file:",choices:s[6]};return s[5]!==void 0&&(ye.value=s[5]),J=new tt({props:ye}),Be.push(()=>ze(J,"value",Ye)),O=new Ce({props:{$$slots:{default:[_t]},$$scope:{ctx:s}}}),{c(){e=b("div"),A&&A.c(),l=k(),n=b("hr"),a=k(),t=b("div"),r=b("div"),o=b("p"),o.textContent=u,L=k(),S=b("p"),x=b("b"),p=V("You are editing: "),C=b("a"),N=V(s[7]),Z=V(`
        .`),X=k(),D(H.$$.fragment),oe=k(),q=b("h2"),q.textContent=ue,ee=k(),D(R.$$.fragment),re=k(),W=b("hr"),ae=k(),D(i.$$.fragment),h=k(),$&&$.c(),M=k(),E=b("div"),te=b("h2"),te.textContent=ke,_e=k(),le=b("div"),D(J.$$.fragment),he=k(),D(O.$$.fragment),we=k(),T=b("a"),be=V("Back to overview"),this.h()},l(f){e=v(f,"DIV",{class:!0});var d=U(e);A&&A.l(d),l=y(d),n=v(d,"HR",{}),a=y(d),t=v(d,"DIV",{class:!0});var z=U(t);r=v(z,"DIV",{class:!0});var w=U(r);o=v(w,"P",{"data-svelte-h":!0}),de(o)!=="svelte-1hg0jwl"&&(o.textContent=u),L=y(w),S=v(w,"P",{});var ne=U(S);x=v(ne,"B",{});var Q=U(x);p=Y(Q,"You are editing: "),C=v(Q,"A",{href:!0});var Ie=U(C);N=Y(Ie,s[7]),Ie.forEach(c),Z=Y(Q,`
        .`),Q.forEach(c),ne.forEach(c),X=y(w),j(H.$$.fragment,w),oe=y(w),q=v(w,"H2",{"data-svelte-h":!0}),de(q)!=="svelte-1yqhw3l"&&(q.textContent=ue),ee=y(w),j(R.$$.fragment,w),re=y(w),W=v(w,"HR",{}),ae=y(w),j(i.$$.fragment,w),h=y(w),$&&$.l(w),w.forEach(c),M=y(z),E=v(z,"DIV",{class:!0});var se=U(E);te=v(se,"H2",{"data-svelte-h":!0}),de(te)!=="svelte-t00wtv"&&(te.textContent=ke),_e=y(se),le=v(se,"DIV",{class:!0});var Fe=U(le);j(J.$$.fragment,Fe),Fe.forEach(c),he=y(se),j(O.$$.fragment,se),se.forEach(c),z.forEach(c),we=y(d),T=v(d,"A",{href:!0,class:!0});var xe=U(T);be=Y(xe,"Back to overview"),xe.forEach(c),d.forEach(c),this.h()},h(){_(C,"href",K=ce+"/"+s[0].prefix),_(r,"class","govuk-grid-column-one-half"),_(le,"class","file-radio-container svelte-1ysyede"),_(E,"class","govuk-grid-column-one-half"),_(t,"class","govuk-grid-row"),_(T,"href",me=ce+"/"+s[0].prefix),_(T,"class","govuk-back-link"),_(e,"class","govuk-width-container")},m(f,d){I(f,e,d),A&&A.m(e,null),m(e,l),m(e,n),m(e,a),m(e,t),m(t,r),m(r,o),m(r,L),m(r,S),m(S,x),m(x,p),m(x,C),m(C,N),m(x,Z),m(r,X),B(H,r,null),m(r,oe),m(r,q),m(r,ee),B(R,r,null),m(r,re),m(r,W),m(r,ae),B(i,r,null),m(r,h),$&&$.m(r,null),m(t,M),m(t,E),m(E,te),m(E,_e),m(E,le),B(J,le,null),m(E,he),B(O,E,null),m(e,we),m(e,T),m(T,be),P=!0},p(f,[d]){A&&A.p&&(!P||d&262144)&&qe(A,ve,f,f[18],P?Te(ve,f[18],d,null):Oe(f[18]),null),(!P||d&128)&&Ke(N,f[7]),(!P||d&1&&K!==(K=ce+"/"+f[0].prefix))&&_(C,"href",K);const z={};d&262152&&(z.$$scope={dirty:d,ctx:f}),H.$set(z);const w={};d&262144&&(w.$$scope={dirty:d,ctx:f}),R.$set(w),f[4]!=null?$?($.p(f,d),d&16&&g($,1)):($=Ae(f),$.c(),g($,1),$.m(r,null)):$&&(Me(),F($,1,1,()=>{$=null}),Ne());const ne={};d&64&&(ne.choices=f[6]),!ge&&d&32&&(ge=!0,ne.value=f[5],We(()=>ge=!1)),J.$set(ne);const Q={};d&262176&&(Q.$$scope={dirty:d,ctx:f}),O.$set(Q),(!P||d&1&&me!==(me=ce+"/"+f[0].prefix))&&_(T,"href",me)},i(f){P||(g(A,f),g(H.$$.fragment,f),g(R.$$.fragment,f),g(i.$$.fragment,f),g($),g(J.$$.fragment,f),g(O.$$.fragment,f),P=!0)},o(f){F(A,f),F(H.$$.fragment,f),F(R.$$.fragment,f),F(i.$$.fragment,f),F($),F(J.$$.fragment,f),F(O.$$.fragment,f),P=!1},d(f){f&&c(e),A&&A.d(f),G(H),G(R),G(i),$&&$.d(),G(J),G(O)}}}function De(s,e){let l=document.createElement("a");l.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),l.setAttribute("download",s),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function ht(s,e,l){let n,a,t=fe,r=()=>(t(),t=Le(N,i=>l(19,a=i)),N),o,u=fe,L=()=>(u(),u=Le(C,i=>l(7,o=i)),C);s.$$.on_destroy.push(()=>t()),s.$$.on_destroy.push(()=>u());let{$$slots:S={},$$scope:x}=e,{files:p}=e,{currentFile:C}=e;L();let{state:N}=e;r();let{downloadXlsx:K=void 0}=e,{xlsxImporter:Z=null}=e,X=p.getFileList(),H=X[0];function oe(i){let h=window.prompt(`Rename file ${i} to what?`,i);if(h){let M=p.key(i),E=window.localStorage.getItem(M);window.localStorage.setItem(p.key(h),E),window.localStorage.removeItem(M),l(15,X=p.getFileList()),o===i&&ie(C,o=h,o)}}function q(){De(o+".json",JSON.stringify(a))}async function ue(i){if(window.confirm(`Really delete file ${i}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`)){let h=p.key(i);De(`${i}.json`,window.localStorage.getItem(h)),window.localStorage.removeItem(h),i==o?await ee():l(15,X=p.saveAndGetFileList(o,a))}}async function ee(){ie(C,o=p.newFilename(),o),ie(N,a=p.emptyState(),a),l(15,X=p.saveAndGetFileList(o,a))}async function R(i,h){let M=Ve(i,".json");try{let E=JSON.parse(h);p.validate(E),l(15,X=p.saveAndGetFileList(M,E)),await W(M)}catch(E){window.alert(`Couldn't load ${M}: ${E}`)}}async function re(i){let{filename:h,data:M}=i.detail;l(15,X=p.saveAndGetFileList(h,M)),await W(h)}async function W(i){try{let h=p.loadFile(i);ie(C,o=i,o),ie(N,a=h,a)}catch(h){window.alert(`Couldn't load ${i}: ${h}`)}}function ae(i){H=i,l(5,H)}return s.$$set=i=>{"files"in i&&l(0,p=i.files),"currentFile"in i&&L(l(1,C=i.currentFile)),"state"in i&&r(l(2,N=i.state)),"downloadXlsx"in i&&l(3,K=i.downloadXlsx),"xlsxImporter"in i&&l(4,Z=i.xlsxImporter),"$$scope"in i&&l(18,x=i.$$scope)},s.$$.update=()=>{s.$$.dirty&32768&&l(6,n=nt(X))},[p,C,N,K,Z,H,n,o,oe,q,ue,ee,R,re,W,X,S,ae,x]}class Bt extends Xe{constructor(e){super(),He(this,e,ht,gt,je,{files:0,currentFile:1,state:2,downloadXlsx:3,xlsxImporter:4})}}export{Bt as F};
