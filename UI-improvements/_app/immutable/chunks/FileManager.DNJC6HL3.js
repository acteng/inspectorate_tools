import{s as De,a as w,g as b,i as $,f as m,T as Ye,e as g,c as h,p as y,w as Pe,y as He,m as oe,n as me,l as Je,t as Y,b as q,d as P,h as d,u as Ue,r as Ve,v as We,j as qe,z as Oe,K as ye,U as Le,x as pe,o as Me}from"./scheduler.CT9iOTEw.js";import{S as Be,i as Ge,c as H,a as M,m as B,t as v,b as L,d as G,e as ze,g as je,f as Ne}from"./index.CnK_PB-e.js";import{L as Ke,d as Te}from"./download.BHaGILUs.js";import{b as $e}from"./paths.DhJwuIZu.js";import"./entry.BHBFxJwM.js";import{B as Ce}from"./ButtonGroup.CPR9Q03l.js";import{D as Qe}from"./DefaultButton.qd2_wY_n.js";import{F as Ze}from"./FileInput.B-XXAmlJ.js";import{R as et}from"./Radio.X_Wkl5Zy.js";/* empty css                                            */import{S as _e}from"./SecondaryButton.Bjah1jNo.js";import{W as tt}from"./WarningButton.B5FdEria.js";import{a as Xe,p as lt}from"./index.Az-G3YJw.js";import{F as nt}from"./FormElement.22zQJVbE.js";import{W as st}from"./WarningText.B1G2rPFl.js";import"./index.3crKjIBD.js";function ot(a){let e,l="<b>You can import from an existing route check .xlsx file, only if there&#39;s an up-to-date DALOG sheet added.</b>",s,r,t="<b>After importing, there will still be some problems:</b>",o,n,u=`<li>You must fill out the Junction Assessment Tool (JAT); it won&#39;t be
        imported</li> <li>Some text fields on the Summary of Scheme page will be missing</li>`;return{c(){e=g("p"),e.innerHTML=l,s=w(),r=g("p"),r.innerHTML=t,o=w(),n=g("ul"),n.innerHTML=u},l(c){e=h(c,"P",{"data-svelte-h":!0}),oe(e)!=="svelte-1f3imul"&&(e.innerHTML=l),s=b(c),r=h(c,"P",{"data-svelte-h":!0}),oe(r)!=="svelte-1odff57"&&(r.innerHTML=t),o=b(c),n=h(c,"UL",{"data-svelte-h":!0}),oe(n)!=="svelte-1tt4pqo"&&(n.innerHTML=u)},m(c,k){$(c,e,k),$(c,s,k),$(c,r,k),$(c,o,k),$(c,n,k)},p:me,d(c){c&&(m(e),m(s),m(r),m(o),m(n))}}}function rt(a){let e,l,s,r,t,o;return s=new st({props:{$$slots:{default:[ot]},$$scope:{ctx:a}}}),{c(){e=g("input"),l=w(),H(s.$$.fragment),this.h()},l(n){e=h(n,"INPUT",{class:!0,id:!0,type:!0}),l=b(n),M(s.$$.fragment,n),this.h()},h(){y(e,"class","govuk-file-upload"),y(e,"id","import-xlsx"),y(e,"type","file")},m(n,u){$(n,e,u),a[4](e),$(n,l,u),B(s,n,u),r=!0,t||(o=Pe(e,"change",a[2]),t=!0)},p(n,u){const c={};u&64&&(c.$$scope={dirty:u,ctx:n}),s.$set(c)},i(n){r||(v(s.$$.fragment,n),r=!0)},o(n){L(s.$$.fragment,n),r=!1},d(n){n&&(m(e),m(l)),a[4](null),G(s,n),t=!1,o()}}}function at(a){let e,l,s,r;return e=new nt({props:{label:"Import from XLSX file",id:"import-xlsx",$$slots:{default:[rt]},$$scope:{ctx:a}}}),s=new Ke({props:{loading:a[0]}}),{c(){H(e.$$.fragment),l=w(),H(s.$$.fragment)},l(t){M(e.$$.fragment,t),l=b(t),M(s.$$.fragment,t)},m(t,o){B(e,t,o),$(t,l,o),B(s,t,o),r=!0},p(t,[o]){const n={};o&66&&(n.$$scope={dirty:o,ctx:t}),e.$set(n);const u={};o&1&&(u.loading=t[0]),s.$set(u)},i(t){r||(v(e.$$.fragment,t),v(s.$$.fragment,t),r=!0)},o(t){L(e.$$.fragment,t),L(s.$$.fragment,t),r=!1},d(t){t&&m(l),G(e,t),G(s,t)}}}function it(a,e,l){let s=Ye(),{xlsxImporter:r}=e,t="",o;async function n(c){let k=o.files[0].name;try{l(0,t=`Loading ${k}`);let C=await o.files[0].arrayBuffer(),_=await r(C);l(0,t=""),s("imported",{filename:Xe(k,".xlsx"),data:_})}catch(C){window.alert(`Couldn't import ${k}: ${C}`),l(0,t="")}}function u(c){He[c?"unshift":"push"](()=>{o=c,l(1,o)})}return a.$$set=c=>{"xlsxImporter"in c&&l(3,r=c.xlsxImporter)},[t,o,n,r,u]}class ft extends Be{constructor(e){super(),Ge(this,e,it,at,De,{xlsxImporter:3})}}function ut(a){let e,l,s;return{c(){e=g("img"),s=Y(`
          Export .json`),this.h()},l(r){e=h(r,"IMG",{src:!0,alt:!0,class:!0}),s=P(r,`
          Export .json`),this.h()},h(){Me(e.src,l=Te)||y(e,"src",l),y(e,"alt","Export .json"),y(e,"class","svelte-1ysyede")},m(r,t){$(r,e,t),$(r,s,t)},p:me,d(r){r&&(m(e),m(s))}}}function Ee(a){let e,l;return e=new _e({props:{$$slots:{default:[ct]},$$scope:{ctx:a}}}),e.$on("click",a[17]),{c(){H(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,r){B(e,s,r),l=!0},p(s,r){const t={};r&4194304&&(t.$$scope={dirty:r,ctx:s}),e.$set(t)},i(s){l||(v(e.$$.fragment,s),l=!0)},o(s){L(e.$$.fragment,s),l=!1},d(s){G(e,s)}}}function ct(a){let e,l,s;return{c(){e=g("img"),s=Y(`
            Export .xlsx`),this.h()},l(r){e=h(r,"IMG",{src:!0,alt:!0,class:!0}),s=P(r,`
            Export .xlsx`),this.h()},h(){Me(e.src,l=Te)||y(e,"src",l),y(e,"alt","Export .xlsx"),y(e,"class","svelte-1ysyede")},m(r,t){$(r,e,t),$(r,s,t)},p:me,d(r){r&&(m(e),m(s))}}}function mt(a){let e,l,s,r;e=new _e({props:{$$slots:{default:[ut]},$$scope:{ctx:a}}}),e.$on("click",a[9]);let t=a[3]&&Ee(a);return{c(){H(e.$$.fragment),l=w(),t&&t.c(),s=ye()},l(o){M(e.$$.fragment,o),l=b(o),t&&t.l(o),s=ye()},m(o,n){B(e,o,n),$(o,l,n),t&&t.m(o,n),$(o,s,n),r=!0},p(o,n){const u={};n&4194304&&(u.$$scope={dirty:n,ctx:o}),e.$set(u),o[3]?t?(t.p(o,n),n&8&&v(t,1)):(t=Ee(o),t.c(),v(t,1),t.m(s.parentNode,s)):t&&(je(),L(t,1,1,()=>{t=null}),Ne())},i(o){r||(v(e.$$.fragment,o),v(t),r=!0)},o(o){L(e.$$.fragment,o),L(t),r=!1},d(o){o&&(m(l),m(s)),G(e,o),t&&t.d(o)}}}function dt(a){let e;return{c(){e=Y("New blank file")},l(l){e=P(l,"New blank file")},m(l,s){$(l,e,s)},d(l){l&&m(e)}}}function Se(a){let e,l,s,r;return s=new ft({props:{xlsxImporter:a[4]}}),s.$on("imported",a[13]),{c(){e=g("hr"),l=w(),H(s.$$.fragment)},l(t){e=h(t,"HR",{}),l=b(t),M(s.$$.fragment,t)},m(t,o){$(t,e,o),$(t,l,o),B(s,t,o),r=!0},p(t,o){const n={};o&16&&(n.xlsxImporter=t[4]),s.$set(n)},i(t){r||(v(s.$$.fragment,t),r=!0)},o(t){L(s.$$.fragment,t),r=!1},d(t){t&&(m(e),m(l)),G(s,t)}}}function pt(a){let e;return{c(){e=Y("Load selected file")},l(l){e=P(l,"Load selected file")},m(l,s){$(l,e,s)},d(l){l&&m(e)}}}function $t(a){let e;return{c(){e=Y("Rename selected file")},l(l){e=P(l,"Rename selected file")},m(l,s){$(l,e,s)},d(l){l&&m(e)}}}function _t(a){let e;return{c(){e=Y("Delete selected file")},l(l){e=P(l,"Delete selected file")},m(l,s){$(l,e,s)},d(l){l&&m(e)}}}function gt(a){let e,l,s,r,t,o;return e=new _e({props:{$$slots:{default:[pt]},$$scope:{ctx:a}}}),e.$on("click",a[18]),s=new _e({props:{$$slots:{default:[$t]},$$scope:{ctx:a}}}),s.$on("click",a[19]),t=new tt({props:{$$slots:{default:[_t]},$$scope:{ctx:a}}}),t.$on("click",a[20]),{c(){H(e.$$.fragment),l=w(),H(s.$$.fragment),r=w(),H(t.$$.fragment)},l(n){M(e.$$.fragment,n),l=b(n),M(s.$$.fragment,n),r=b(n),M(t.$$.fragment,n)},m(n,u){B(e,n,u),$(n,l,u),B(s,n,u),$(n,r,u),B(t,n,u),o=!0},p(n,u){const c={};u&4194304&&(c.$$scope={dirty:u,ctx:n}),e.$set(c);const k={};u&4194304&&(k.$$scope={dirty:u,ctx:n}),s.$set(k);const C={};u&4194304&&(C.$$scope={dirty:u,ctx:n}),t.$set(C)},i(n){o||(v(e.$$.fragment,n),v(s.$$.fragment,n),v(t.$$.fragment,n),o=!0)},o(n){L(e.$$.fragment,n),L(s.$$.fragment,n),L(t.$$.fragment,n),o=!1},d(n){n&&(m(l),m(r)),G(e,n),G(s,n),G(t,n)}}}function ht(a){let e,l,s,r,t,o,n,u=`All files are auto-saved in your browser's local storage. You can close
        your browser and resume later. You can export the file to your computer
        to share with someone else, and import from a file below.`,c,k,C,_,A,R,O,ee,E,S,te,z,re="Create or import a file",le,X,ae,J,ie,U,fe,ue,N,i,x="Manage Existing Files",T,D,ge,ne,V,he,we,K,be,de,W;const ve=a[16].default,j=Je(ve,a,a[22],null);S=new Ce({props:{$$slots:{default:[mt]},$$scope:{ctx:a}}}),X=new Qe({props:{$$slots:{default:[dt]},$$scope:{ctx:a}}}),X.$on("click",a[11]),U=new Ze({props:{label:"Import from a .json file",onLoad:a[12]}});let F=a[4]!=null&&Se(a);D=new Ce({props:{$$slots:{default:[gt]},$$scope:{ctx:a}}});function Re(f){a[21](f)}let ke={label:"Selected file:",choices:a[6]};return a[5]!==void 0&&(ke.value=a[5]),V=new et({props:ke}),He.push(()=>ze(V,"value",Re)),{c(){e=g("div"),j&&j.c(),l=w(),s=g("hr"),r=w(),t=g("div"),o=g("div"),n=g("p"),n.textContent=u,c=w(),k=g("p"),C=g("b"),_=Y("You are editing: "),A=g("a"),R=Y(a[7]),ee=Y(`
          .`),E=w(),H(S.$$.fragment),te=w(),z=g("h2"),z.textContent=re,le=w(),H(X.$$.fragment),ae=w(),J=g("hr"),ie=w(),H(U.$$.fragment),fe=w(),F&&F.c(),ue=w(),N=g("div"),i=g("h2"),i.textContent=x,T=w(),H(D.$$.fragment),ge=w(),ne=g("div"),H(V.$$.fragment),we=w(),K=g("a"),be=Y("Back to overview"),this.h()},l(f){e=h(f,"DIV",{class:!0});var p=q(e);j&&j.l(p),l=b(p),s=h(p,"HR",{}),r=b(p),t=h(p,"DIV",{class:!0});var Z=q(t);o=h(Z,"DIV",{class:!0});var I=q(o);n=h(I,"P",{"data-svelte-h":!0}),oe(n)!=="svelte-wkz669"&&(n.textContent=u),c=b(I),k=h(I,"P",{});var ce=q(k);C=h(ce,"B",{});var Q=q(C);_=P(Q,"You are editing: "),A=h(Q,"A",{href:!0});var xe=q(A);R=P(xe,a[7]),xe.forEach(m),ee=P(Q,`
          .`),Q.forEach(m),ce.forEach(m),E=b(I),M(S.$$.fragment,I),te=b(I),z=h(I,"H2",{"data-svelte-h":!0}),oe(z)!=="svelte-1yqhw3l"&&(z.textContent=re),le=b(I),M(X.$$.fragment,I),ae=b(I),J=h(I,"HR",{}),ie=b(I),M(U.$$.fragment,I),fe=b(I),F&&F.l(I),I.forEach(m),ue=b(Z),N=h(Z,"DIV",{class:!0});var se=q(N);i=h(se,"H2",{"data-svelte-h":!0}),oe(i)!=="svelte-t00wtv"&&(i.textContent=x),T=b(se),M(D.$$.fragment,se),ge=b(se),ne=h(se,"DIV",{class:!0});var Fe=q(ne);M(V.$$.fragment,Fe),Fe.forEach(m),se.forEach(m),Z.forEach(m),we=b(p),K=h(p,"A",{href:!0,class:!0});var Ie=q(K);be=P(Ie,"Back to overview"),Ie.forEach(m),p.forEach(m),this.h()},h(){y(A,"href",O=$e+"/"+a[0].prefix),y(o,"class","govuk-grid-column-two-thirds"),y(ne,"class","file-radio-container svelte-1ysyede"),y(N,"class","govuk-grid-column-one-third"),y(t,"class","govuk-grid-row"),y(K,"href",de=$e+"/"+a[0].prefix),y(K,"class","govuk-back-link"),y(e,"class","govuk-width-container")},m(f,p){$(f,e,p),j&&j.m(e,null),d(e,l),d(e,s),d(e,r),d(e,t),d(t,o),d(o,n),d(o,c),d(o,k),d(k,C),d(C,_),d(C,A),d(A,R),d(C,ee),d(o,E),B(S,o,null),d(o,te),d(o,z),d(o,le),B(X,o,null),d(o,ae),d(o,J),d(o,ie),B(U,o,null),d(o,fe),F&&F.m(o,null),d(t,ue),d(t,N),d(N,i),d(N,T),B(D,N,null),d(N,ge),d(N,ne),B(V,ne,null),d(e,we),d(e,K),d(K,be),W=!0},p(f,[p]){j&&j.p&&(!W||p&4194304)&&Ue(j,ve,f,f[22],W?We(ve,f[22],p,null):Ve(f[22]),null),(!W||p&128)&&qe(R,f[7]),(!W||p&1&&O!==(O=$e+"/"+f[0].prefix))&&y(A,"href",O);const Z={};p&4194312&&(Z.$$scope={dirty:p,ctx:f}),S.$set(Z);const I={};p&4194304&&(I.$$scope={dirty:p,ctx:f}),X.$set(I),f[4]!=null?F?(F.p(f,p),p&16&&v(F,1)):(F=Se(f),F.c(),v(F,1),F.m(o,null)):F&&(je(),L(F,1,1,()=>{F=null}),Ne());const ce={};p&4194336&&(ce.$$scope={dirty:p,ctx:f}),D.$set(ce);const Q={};p&64&&(Q.choices=f[6]),!he&&p&32&&(he=!0,Q.value=f[5],Oe(()=>he=!1)),V.$set(Q),(!W||p&1&&de!==(de=$e+"/"+f[0].prefix))&&y(K,"href",de)},i(f){W||(v(j,f),v(S.$$.fragment,f),v(X.$$.fragment,f),v(U.$$.fragment,f),v(F),v(D.$$.fragment,f),v(V.$$.fragment,f),W=!0)},o(f){L(j,f),L(S.$$.fragment,f),L(X.$$.fragment,f),L(U.$$.fragment,f),L(F),L(D.$$.fragment,f),L(V.$$.fragment,f),W=!1},d(f){f&&m(e),j&&j.d(f),G(S),G(X),G(U),F&&F.d(),G(D),G(V)}}}function Ae(a,e){let l=document.createElement("a");l.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),l.setAttribute("download",a),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function wt(a,e,l){let s,r,t=me,o=()=>(t(),t=Le(R,i=>l(23,r=i)),R),n,u=me,c=()=>(u(),u=Le(A,i=>l(7,n=i)),A);a.$$.on_destroy.push(()=>t()),a.$$.on_destroy.push(()=>u());let{$$slots:k={},$$scope:C}=e,{files:_}=e,{currentFile:A}=e;c();let{state:R}=e;o();let{downloadXlsx:O=void 0}=e,{xlsxImporter:ee=null}=e,E=_.getFileList(),S=E[0];function te(i){let x=window.prompt(`Rename file ${i} to what?`,i);if(x){let T=_.key(i),D=window.localStorage.getItem(T);window.localStorage.setItem(_.key(x),D),window.localStorage.removeItem(T),l(15,E=_.getFileList()),n===i&&pe(A,n=x,n)}}function z(){Ae(n+".json",JSON.stringify(r))}async function re(i){if(window.confirm(`Really delete file ${i}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`)){let x=_.key(i);Ae(`${i}.json`,window.localStorage.getItem(x)),window.localStorage.removeItem(x),i==n?(l(15,E=_.getFileList()),E.length>0?J(E[0]):await le()):l(15,E=_.saveAndGetFileList(n,r)),l(5,S=E[0]||"")}}async function le(){let i=window.prompt("What should the file be called?","")||_.newFilename(),x=_.emptyState();l(15,E=_.saveAndGetFileList(i,x)),pe(A,n=i,n)}async function X(i,x){let T=Xe(i,".json");try{let D=JSON.parse(x);_.validate(D),l(15,E=_.saveAndGetFileList(T,D)),await J(T)}catch(D){window.alert(`Couldn't load ${T}: ${D}`)}}async function ae(i){let{filename:x,data:T}=i.detail;l(15,E=_.saveAndGetFileList(x,T)),await J(x)}async function J(i){try{let x=_.loadFile(i);pe(A,n=i,n),pe(R,r=x,r)}catch(x){window.alert(`Couldn't load ${i}: ${x}`)}}const ie=()=>{O()},U=()=>{J(S)},fe=()=>{te(S)},ue=()=>{re(S)};function N(i){S=i,l(5,S)}return a.$$set=i=>{"files"in i&&l(0,_=i.files),"currentFile"in i&&c(l(1,A=i.currentFile)),"state"in i&&o(l(2,R=i.state)),"downloadXlsx"in i&&l(3,O=i.downloadXlsx),"xlsxImporter"in i&&l(4,ee=i.xlsxImporter),"$$scope"in i&&l(22,C=i.$$scope)},a.$$.update=()=>{a.$$.dirty&32768&&l(6,s=lt(E))},[_,A,R,O,ee,S,s,n,te,z,re,le,X,ae,J,E,k,ie,U,fe,ue,N,C]}class Gt extends Be{constructor(e){super(),Ge(this,e,wt,ht,De,{files:0,currentFile:1,state:2,downloadXlsx:3,xlsxImporter:4})}}export{Gt as F};
