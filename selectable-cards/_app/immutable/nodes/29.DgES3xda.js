import{s as _e,B as te,i as $,n as Ve,f as _,r as qe,e as E,t as N,a as S,c as D,b as O,d as B,g as W,h as M,m as z,o as he,v as le,j as me,w as oe,k as Ee,Q as st,x as Z,z as it,U as at,S as et,T as je}from"../chunks/scheduler.guEzRCZz.js";import{S as ge,i as $e,e as se,c as q,b as A,m as L,t as k,g as ce,a as T,f as ue,d as H}from"../chunks/index.BSBdbbf8.js";import{e as ne,u as rt,o as ft}from"../chunks/each.DItetQGL.js";import{W as tt,S as nt}from"../chunks/WarningButton.wqkTj77w.js";import{s as R}from"../chunks/data.C6QcQ4S4.js";import"../chunks/paths.BwgzXhtl.js";import{D as lt}from"../chunks/DecimalInput.Dt2Kb5H9.js";import{T as ot}from"../chunks/TextArea.CrAVEq9f.js";/* empty css                                                            */import{B as ct,G as ut,C as mt,a as ht,S as pt,M as dt}from"../chunks/GeoreferenceLayer.svelte_svelte_type_style_lang.eTxqMFWP.js";import{D as _t,C as gt}from"../chunks/DefaultButton.D3Rrm7NM.js";import{C as $t}from"../chunks/ClickableCard.D72orTyn.js";import{M as bt,b as vt,C as kt}from"../chunks/index.fu6JDPGt.js";import{c as Oe}from"../chunks/logic.Ct59EqJd.js";function Ge(o,e,n){const t=o.slice();return t[4]=e[n][0],t[5]=e[n][1][0],t[6]=e[n][1][1],t}function wt(o){let e,n="Insufficient Space";return{c(){e=E("strong"),e.textContent=n,this.h()},l(t){e=D(t,"STRONG",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-9xvf61"&&(e.textContent=n),this.h()},h(){he(e,"class","govuk-tag govuk-tag--red")},m(t,s){$(t,e,s)},d(t){t&&_(e)}}}function Tt(o){let e,n="Absolute Minimum";return{c(){e=E("strong"),e.textContent=n,this.h()},l(t){e=D(t,"STRONG",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-hmipw0"&&(e.textContent=n),this.h()},h(){he(e,"class","govuk-tag govuk-tag--yellow")},m(t,s){$(t,e,s)},d(t){t&&_(e)}}}function Ct(o){let e,n="Desirable Minimum";return{c(){e=E("strong"),e.textContent=n,this.h()},l(t){e=D(t,"STRONG",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-11simwv"&&(e.textContent=n),this.h()},h(){he(e,"class","govuk-tag govuk-tag--green")},m(t,s){$(t,e,s)},d(t){t&&_(e)}}}function Re(o){let e,n=o[4]+"",t,s,a;function l(u,c){return u[0]>=u[5]?Ct:u[0]>u[6]?Tt:wt}let f=l(o),i=f(o);return{c(){e=E("p"),t=N(n),s=N(` cross sections possible:
    `),i.c(),a=S()},l(u){e=D(u,"P",{});var c=O(e);t=B(c,n),s=B(c,` cross sections possible:
    `),i.l(c),a=W(c),c.forEach(_)},m(u,c){$(u,e,c),M(e,t),M(e,s),i.m(e,null),M(e,a)},p(u,c){f!==(f=l(u))&&(i.d(1),i=f(u),i&&(i.c(),i.m(e,a)))},d(u){u&&_(e),i.d()}}}function Pt(o){let e,n=ne(o[1]),t=[];for(let s=0;s<n.length;s+=1)t[s]=Re(Ge(o,n,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=te()},l(s){for(let a=0;a<t.length;a+=1)t[a].l(s);e=te()},m(s,a){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(s,a);$(s,e,a)},p(s,[a]){if(a&3){n=ne(s[1]);let l;for(l=0;l<n.length;l+=1){const f=Ge(s,n,l);t[l]?t[l].p(f,a):(t[l]=Re(f),t[l].c(),t[l].m(e.parentNode,e))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},i:Ve,o:Ve,d(s){s&&_(e),qe(t,s)}}}function St(o,e,n){let{available:t}=e,{preferredTotals:s}=e,{compromisedTotals:a}=e,l=[["Preferred",s],["Compromised",a]];return o.$$set=f=>{"available"in f&&n(0,t=f.available),"preferredTotals"in f&&n(2,s=f.preferredTotals),"compromisedTotals"in f&&n(3,a=f.compromisedTotals)},[t,l,s,a]}class Ae extends ge{constructor(e){super(),$e(this,e,St,Pt,_e,{available:0,preferredTotals:2,compromisedTotals:3})}}function ye(o){let e,n,t;function s(l){o[6](l)}let a={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return o[3].checks.homogeneousSections[o[0]].notes!==void 0&&(a.value=o[3].checks.homogeneousSections[o[0]].notes),e=new ot({props:a}),le.push(()=>se(e,"value",s)),{c(){q(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,f){L(e,l,f),t=!0},p(l,f){const i={};!n&&f&9&&(n=!0,i.value=l[3].checks.homogeneousSections[l[0]].notes,oe(()=>n=!1)),e.$set(i)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Wt(o){let e;return{c(){e=N("Delete")},l(n){e=B(n,"Delete")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Mt(o){let e,n,t,s=o[0]+1+"",a,l,f,i,u,c,r,m,d,p;function P(v){o[5](v)}let F={label:"Available width (m)",width:4,min:0};o[3].checks.homogeneousSections[o[0]].availableWidth!==void 0&&(F.value=o[3].checks.homogeneousSections[o[0]].availableWidth),f=new lt({props:F}),le.push(()=>se(f,"value",P)),c=new Ae({props:{available:o[3].checks.homogeneousSections[o[0]].availableWidth,preferredTotals:o[1],compromisedTotals:o[2]}});let b=o[3].checks.homogeneousSections[o[0]].availableWidth<o[1][0]&&ye(o);return d=new tt({props:{$$slots:{default:[Wt]},$$scope:{ctx:o}}}),d.$on("click",o[7]),{c(){e=E("div"),n=E("u"),t=N("Cross-section #"),a=N(s),l=S(),q(f.$$.fragment),u=S(),q(c.$$.fragment),r=S(),b&&b.c(),m=S(),q(d.$$.fragment),this.h()},l(v){e=D(v,"DIV",{class:!0});var C=O(e);n=D(C,"U",{});var I=O(n);t=B(I,"Cross-section #"),a=B(I,s),I.forEach(_),l=W(C),A(f.$$.fragment,C),u=W(C),A(c.$$.fragment,C),r=W(C),b&&b.l(C),m=W(C),A(d.$$.fragment,C),C.forEach(_),this.h()},h(){he(e,"class","svelte-d4ufy0")},m(v,C){$(v,e,C),M(e,n),M(n,t),M(n,a),M(e,l),L(f,e,null),M(e,u),L(c,e,null),M(e,r),b&&b.m(e,null),M(e,m),L(d,e,null),p=!0},p(v,[C]){(!p||C&1)&&s!==(s=v[0]+1+"")&&me(a,s);const I={};!i&&C&9&&(i=!0,I.value=v[3].checks.homogeneousSections[v[0]].availableWidth,oe(()=>i=!1)),f.$set(I);const y={};C&9&&(y.available=v[3].checks.homogeneousSections[v[0]].availableWidth),C&2&&(y.preferredTotals=v[1]),C&4&&(y.compromisedTotals=v[2]),c.$set(y),v[3].checks.homogeneousSections[v[0]].availableWidth<v[1][0]?b?(b.p(v,C),C&11&&k(b,1)):(b=ye(v),b.c(),k(b,1),b.m(e,m)):b&&(ce(),T(b,1,1,()=>{b=null}),ue());const G={};C&256&&(G.$$scope={dirty:C,ctx:v}),d.$set(G)},i(v){p||(k(f.$$.fragment,v),k(c.$$.fragment,v),k(b),k(d.$$.fragment,v),p=!0)},o(v){T(f.$$.fragment,v),T(c.$$.fragment,v),T(b),T(d.$$.fragment,v),p=!1},d(v){v&&_(e),H(f),H(c),b&&b.d(),H(d)}}}function Et(o,e,n){let t;Ee(o,R,r=>n(3,t=r));let{i:s}=e,{preferredTotals:a}=e,{compromisedTotals:l}=e,f=st();function i(r){o.$$.not_equal(t.checks.homogeneousSections[s].availableWidth,r)&&(t.checks.homogeneousSections[s].availableWidth=r,R.set(t))}function u(r){o.$$.not_equal(t.checks.homogeneousSections[s].notes,r)&&(t.checks.homogeneousSections[s].notes=r,R.set(t))}const c=()=>f("delete");return o.$$set=r=>{"i"in r&&n(0,s=r.i),"preferredTotals"in r&&n(1,a=r.preferredTotals),"compromisedTotals"in r&&n(2,l=r.compromisedTotals)},[s,a,l,t,f,i,u,c]}class Dt extends ge{constructor(e){super(),$e(this,e,Et,Mt,_e,{i:0,preferredTotals:1,compromisedTotals:2})}}function ze(o){let e,n,t;function s(l){o[5](l)}let a={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return o[3].checks.pinchPoints[o[0]].notes!==void 0&&(a.value=o[3].checks.pinchPoints[o[0]].notes),e=new ot({props:a}),le.push(()=>se(e,"value",s)),{c(){q(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,f){L(e,l,f),t=!0},p(l,f){const i={};!n&&f&9&&(n=!0,i.value=l[3].checks.pinchPoints[l[0]].notes,oe(()=>n=!1)),e.$set(i)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function qt(o){let e,n,t,s,a,l,f;function i(r){o[4](r)}let u={label:"Available width (m)",width:4,min:0};o[3].checks.pinchPoints[o[0]].availableWidth!==void 0&&(u.value=o[3].checks.pinchPoints[o[0]].availableWidth),n=new lt({props:u}),le.push(()=>se(n,"value",i)),a=new Ae({props:{available:o[3].checks.pinchPoints[o[0]].availableWidth,preferredTotals:o[1],compromisedTotals:o[2]}});let c=o[3].checks.pinchPoints[o[0]].availableWidth<o[1][0]&&ze(o);return{c(){e=E("div"),q(n.$$.fragment),s=S(),q(a.$$.fragment),l=S(),c&&c.c(),this.h()},l(r){e=D(r,"DIV",{class:!0});var m=O(e);A(n.$$.fragment,m),s=W(m),A(a.$$.fragment,m),l=W(m),c&&c.l(m),m.forEach(_),this.h()},h(){he(e,"class","svelte-jig4ga")},m(r,m){$(r,e,m),L(n,e,null),M(e,s),L(a,e,null),M(e,l),c&&c.m(e,null),f=!0},p(r,[m]){const d={};!t&&m&9&&(t=!0,d.value=r[3].checks.pinchPoints[r[0]].availableWidth,oe(()=>t=!1)),n.$set(d);const p={};m&9&&(p.available=r[3].checks.pinchPoints[r[0]].availableWidth),m&2&&(p.preferredTotals=r[1]),m&4&&(p.compromisedTotals=r[2]),a.$set(p),r[3].checks.pinchPoints[r[0]].availableWidth<r[1][0]?c?(c.p(r,m),m&11&&k(c,1)):(c=ze(r),c.c(),k(c,1),c.m(e,null)):c&&(ce(),T(c,1,1,()=>{c=null}),ue())},i(r){f||(k(n.$$.fragment,r),k(a.$$.fragment,r),k(c),f=!0)},o(r){T(n.$$.fragment,r),T(a.$$.fragment,r),T(c),f=!1},d(r){r&&_(e),H(n),H(a),c&&c.d()}}}function At(o,e,n){let t;Ee(o,R,u=>n(3,t=u));let{i:s}=e,{preferredTotals:a}=e,{compromisedTotals:l}=e;function f(u){o.$$.not_equal(t.checks.pinchPoints[s].availableWidth,u)&&(t.checks.pinchPoints[s].availableWidth=u,R.set(t))}function i(u){o.$$.not_equal(t.checks.pinchPoints[s].notes,u)&&(t.checks.pinchPoints[s].notes=u,R.set(t))}return o.$$set=u=>{"i"in u&&n(0,s=u.i),"preferredTotals"in u&&n(1,a=u.preferredTotals),"compromisedTotals"in u&&n(2,l=u.compromisedTotals)},[s,a,l,t,f,i]}class Lt extends ge{constructor(e){super(),$e(this,e,At,qt,_e,{i:0,preferredTotals:1,compromisedTotals:2})}}function Ze(o,e,n){const t=o.slice();return t[23]=e[n],t[24]=e,t[25]=n,t}function Ke(o,e,n){const t=o.slice();return t[26]=e[n],t[25]=n,t}function Ht(o){let e,n,t=o[5]+1+"",s,a,l,f,i,u,c,r;return l=new _t({props:{$$slots:{default:[Nt]},$$scope:{ctx:o}}}),l.$on("click",o[18]),i=new tt({props:{$$slots:{default:[Bt]},$$scope:{ctx:o}}}),i.$on("click",o[19]),c=new Lt({props:{i:o[5],preferredTotals:o[0],compromisedTotals:o[1]}}),{c(){e=E("h2"),n=N("Pinch point "),s=N(t),a=S(),q(l.$$.fragment),f=S(),q(i.$$.fragment),u=S(),q(c.$$.fragment)},l(m){e=D(m,"H2",{});var d=O(e);n=B(d,"Pinch point "),s=B(d,t),d.forEach(_),a=W(m),A(l.$$.fragment,m),f=W(m),A(i.$$.fragment,m),u=W(m),A(c.$$.fragment,m)},m(m,d){$(m,e,d),M(e,n),M(e,s),$(m,a,d),L(l,m,d),$(m,f,d),L(i,m,d),$(m,u,d),L(c,m,d),r=!0},p(m,d){(!r||d&32)&&t!==(t=m[5]+1+"")&&me(s,t);const p={};d&268435456&&(p.$$scope={dirty:d,ctx:m}),l.$set(p);const P={};d&268435456&&(P.$$scope={dirty:d,ctx:m}),i.$set(P);const F={};d&32&&(F.i=m[5]),d&1&&(F.preferredTotals=m[0]),d&2&&(F.compromisedTotals=m[1]),c.$set(F)},i(m){r||(k(l.$$.fragment,m),k(i.$$.fragment,m),k(c.$$.fragment,m),r=!0)},o(m){T(l.$$.fragment,m),T(i.$$.fragment,m),T(c.$$.fragment,m),r=!1},d(m){m&&(_(e),_(a),_(f),_(u)),H(l,m),H(i,m),H(c,m)}}}function Ft(o){let e,n,t,s;e=new gt({props:{label:"Tools",$$slots:{default:[Vt]},$$scope:{ctx:o}}});let a=ne(o[7].checks.pinchPoints),l=[];for(let i=0;i<a.length;i+=1)l[i]=Xe(Ke(o,a,i));const f=i=>T(l[i],1,1,()=>{l[i]=null});return{c(){q(e.$$.fragment),n=S();for(let i=0;i<l.length;i+=1)l[i].c();t=te()},l(i){A(e.$$.fragment,i),n=W(i);for(let u=0;u<l.length;u+=1)l[u].l(i);t=te()},m(i,u){L(e,i,u),$(i,n,u);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(i,u);$(i,t,u),s=!0},p(i,u){const c={};if(u&268435484&&(c.$$scope={dirty:u,ctx:i}),e.$set(c),u&451){a=ne(i[7].checks.pinchPoints);let r;for(r=0;r<a.length;r+=1){const m=Ke(i,a,r);l[r]?(l[r].p(m,u),k(l[r],1)):(l[r]=Xe(m),l[r].c(),k(l[r],1),l[r].m(t.parentNode,t))}for(ce(),r=a.length;r<l.length;r+=1)f(r);ue()}},i(i){if(!s){k(e.$$.fragment,i);for(let u=0;u<a.length;u+=1)k(l[u]);s=!0}},o(i){T(e.$$.fragment,i),l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)T(l[u]);s=!1},d(i){i&&(_(n),_(t)),H(e,i),qe(l,i)}}}function Nt(o){let e;return{c(){e=N("Save")},l(n){e=B(n,"Save")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Bt(o){let e;return{c(){e=N("Delete")},l(n){e=B(n,"Delete")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function It(o){let e;return{c(){e=N("Zoom to fit")},l(n){e=B(n,"Zoom to fit")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Qe(o){let e,n,t;function s(l){o[14](l)}let a={map:o[2]};return o[3]!==void 0&&(a.enabled=o[3]),e=new pt({props:a}),le.push(()=>se(e,"enabled",s)),{c(){q(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,f){L(e,l,f),t=!0},p(l,f){const i={};f&4&&(i.map=l[2]),!n&&f&8&&(n=!0,i.enabled=l[3],oe(()=>n=!1)),e.$set(i)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Ut(o){let e;return{c(){e=N("Show scheme context")},l(n){e=B(n,"Show scheme context")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Vt(o){let e,n,t,s,a,l,f,i,u,c;e=new nt({props:{$$slots:{default:[It]},$$scope:{ctx:o}}}),e.$on("click",o[13]),t=new ct({}),a=new ut({});let r=o[2]&&Qe(o);function m(p){o[15](p)}let d={$$slots:{default:[Ut]},$$scope:{ctx:o}};return o[4]!==void 0&&(d.checked=o[4]),i=new mt({props:d}),le.push(()=>se(i,"checked",m)),{c(){q(e.$$.fragment),n=S(),q(t.$$.fragment),s=S(),q(a.$$.fragment),l=S(),r&&r.c(),f=S(),q(i.$$.fragment)},l(p){A(e.$$.fragment,p),n=W(p),A(t.$$.fragment,p),s=W(p),A(a.$$.fragment,p),l=W(p),r&&r.l(p),f=W(p),A(i.$$.fragment,p)},m(p,P){L(e,p,P),$(p,n,P),L(t,p,P),$(p,s,P),L(a,p,P),$(p,l,P),r&&r.m(p,P),$(p,f,P),L(i,p,P),c=!0},p(p,P){const F={};P&268435456&&(F.$$scope={dirty:P,ctx:p}),e.$set(F),p[2]?r?(r.p(p,P),P&4&&k(r,1)):(r=Qe(p),r.c(),k(r,1),r.m(f.parentNode,f)):r&&(ce(),T(r,1,1,()=>{r=null}),ue());const b={};P&268435456&&(b.$$scope={dirty:P,ctx:p}),!u&&P&16&&(u=!0,b.checked=p[4],oe(()=>u=!1)),i.$set(b)},i(p){c||(k(e.$$.fragment,p),k(t.$$.fragment,p),k(a.$$.fragment,p),k(r),k(i.$$.fragment,p),c=!0)},o(p){T(e.$$.fragment,p),T(t.$$.fragment,p),T(a.$$.fragment,p),T(r),T(i.$$.fragment,p),c=!1},d(p){p&&(_(n),_(s),_(l),_(f)),H(e,p),H(t,p),H(a,p),r&&r.d(p),H(i,p)}}}function jt(o){let e,n,t;return e=new Ae({props:{available:o[26].availableWidth,preferredTotals:o[0],compromisedTotals:o[1]}}),{c(){q(e.$$.fragment),n=S()},l(s){A(e.$$.fragment,s),n=W(s)},m(s,a){L(e,s,a),$(s,n,a),t=!0},p(s,a){const l={};a&128&&(l.available=s[26].availableWidth),a&1&&(l.preferredTotals=s[0]),a&2&&(l.compromisedTotals=s[1]),e.$set(l)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){s&&_(n),H(e,s)}}}function Xe(o){let e,n;function t(){return o[16](o[25])}function s(){return o[17](o[25])}return e=new $t({props:{name:`Pinch point ${o[25]+1}`,$$slots:{default:[jt]},$$scope:{ctx:o}}}),e.$on("click",t),e.$on("mouseenter",s),{c(){q(e.$$.fragment)},l(a){A(e.$$.fragment,a)},m(a,l){L(e,a,l),n=!0},p(a,l){o=a;const f={};l&268435587&&(f.$$scope={dirty:l,ctx:o}),e.$set(f)},i(a){n||(k(e.$$.fragment,a),n=!0)},o(a){T(e.$$.fragment,a),n=!1},d(a){H(e,a)}}}function Ot(o){let e,n=o[25]+1+"",t,s;return{c(){e=E("span"),t=N(n),s=S(),this.h()},l(a){e=D(a,"SPAN",{class:!0});var l=O(e);t=B(l,n),l.forEach(_),s=W(a),this.h()},h(){he(e,"class","dot svelte-48lsk4"),je(e,"highlight",o[25]==o[5]||o[25]==o[6])},m(a,l){$(a,e,l),M(e,t),$(a,s,l)},p(a,l){l&96&&je(e,"highlight",a[25]==a[5]||a[25]==a[6])},d(a){a&&(_(e),_(s))}}}function Je(o){let e,n,t;function s(f){o[20](f,o[23])}function a(){return o[21](o[25])}let l={draggable:!0,$$slots:{default:[Ot]},$$scope:{ctx:o}};return o[23].location!==void 0&&(l.lngLat=o[23].location),e=new dt({props:l}),le.push(()=>se(e,"lngLat",s)),e.$on("click",a),{c(){q(e.$$.fragment)},l(f){A(e.$$.fragment,f)},m(f,i){L(e,f,i),t=!0},p(f,i){o=f;const u={};i&268435552&&(u.$$scope={dirty:i,ctx:o}),!n&&i&128&&(n=!0,u.lngLat=o[23].location,oe(()=>n=!1)),e.$set(u)},i(f){t||(k(e.$$.fragment,f),t=!0)},o(f){T(e.$$.fragment,f),t=!1},d(f){H(e,f)}}}function Gt(o){let e,n,t,s,a,l;e=new ht({}),e.$on("click",o[10]),t=new kt({props:{gj:o[7].summary.networkMap,show:o[4]}});let f=ne(o[7].checks.pinchPoints),i=[];for(let c=0;c<f.length;c+=1)i[c]=Je(Ze(o,f,c));const u=c=>T(i[c],1,1,()=>{i[c]=null});return{c(){q(e.$$.fragment),n=S(),q(t.$$.fragment),s=S();for(let c=0;c<i.length;c+=1)i[c].c();a=te()},l(c){A(e.$$.fragment,c),n=W(c),A(t.$$.fragment,c),s=W(c);for(let r=0;r<i.length;r+=1)i[r].l(c);a=te()},m(c,r){L(e,c,r),$(c,n,r),L(t,c,r),$(c,s,r);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(c,r);$(c,a,r),l=!0},p(c,r){const m={};if(r&128&&(m.gj=c[7].summary.networkMap),r&16&&(m.show=c[4]),t.$set(m),r&480){f=ne(c[7].checks.pinchPoints);let d;for(d=0;d<f.length;d+=1){const p=Ze(c,f,d);i[d]?(i[d].p(p,r),k(i[d],1)):(i[d]=Je(p),i[d].c(),k(i[d],1),i[d].m(a.parentNode,a))}for(ce(),d=f.length;d<i.length;d+=1)u(d);ue()}},i(c){if(!l){k(e.$$.fragment,c),k(t.$$.fragment,c);for(let r=0;r<f.length;r+=1)k(i[r]);l=!0}},o(c){T(e.$$.fragment,c),T(t.$$.fragment,c),i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)T(i[r]);l=!1},d(c){c&&(_(n),_(s),_(a)),H(e,c),H(t,c),qe(i,c)}}}function Rt(o){let e,n,t,s,a,l,f,i,u,c,r;const m=[Ft,Ht],d=[];function p(b,v){return b[5]==null?0:1}t=p(o),s=d[t]=m[t](o);function P(b){o[22](b)}let F={$$slots:{default:[Gt]},$$scope:{ctx:o}};return o[2]!==void 0&&(F.map=o[2]),f=new bt({props:F}),le.push(()=>se(f,"map",P)),{c(){e=E("div"),n=E("div"),s.c(),a=S(),l=E("div"),q(f.$$.fragment),this.h()},l(b){e=D(b,"DIV",{style:!0});var v=O(e);n=D(v,"DIV",{style:!0});var C=O(n);s.l(C),C.forEach(_),a=W(v),l=D(v,"DIV",{style:!0});var I=O(l);A(f.$$.fragment,I),I.forEach(_),v.forEach(_),this.h()},h(){Z(n,"width","30%"),Z(n,"overflow-y","scroll"),Z(n,"padding","10px"),Z(n,"border","1px solid black"),Z(l,"position","relative"),Z(l,"width","100%"),Z(e,"display","flex"),Z(e,"height","80vh")},m(b,v){$(b,e,v),M(e,n),d[t].m(n,null),M(e,a),M(e,l),L(f,l,null),u=!0,c||(r=it(window,"keydown",o[12]),c=!0)},p(b,[v]){let C=t;t=p(b),t===C?d[t].p(b,v):(ce(),T(d[C],1,1,()=>{d[C]=null}),ue(),s=d[t],s?s.p(b,v):(s=d[t]=m[t](b),s.c()),k(s,1),s.m(n,null));const I={};v&268435696&&(I.$$scope={dirty:v,ctx:b}),!i&&v&4&&(i=!0,I.map=b[2],oe(()=>i=!1)),f.$set(I)},i(b){u||(k(s),k(f.$$.fragment,b),u=!0)},o(b){T(s),T(f.$$.fragment,b),u=!1},d(b){b&&_(e),d[t].d(),H(f),c=!1,r()}}}function yt(o,e,n){let t;Ee(o,R,w=>n(7,t=w));let{preferredTotals:s}=e,{compromisedTotals:a}=e,l,f=!1,i=!0,u,c;at(()=>{m(!1)});function r(w){n(5,u=w),n(6,c=null)}function m(w){let j={type:"FeatureCollection",features:t.checks.pinchPoints.map(J=>({type:"Feature",properties:{},geometry:{type:"Point",coordinates:J.location}}))};for(let J of t.summary.networkMap.features)j.features.push(J);j.features.length>0&&l.fitBounds(vt(j),{padding:20,animate:w})}function d(w){if(!f){if(u!=null){n(5,u=null);return}et(R,t.checks.pinchPoints=[...t.checks.pinchPoints,{location:w.detail.lngLat.toArray(),availableWidth:0,notes:""}],t),r(t.checks.pinchPoints.length-1)}}function p(){t.checks.pinchPoints.splice(u,1),R.set(t),n(5,u=null)}function P(w){if(u!=null&&w.key=="Escape")w.stopPropagation(),n(5,u=null);else if(u!=null&&w.key=="Delete"){let j=w.target.tagName;if(j=="INPUT"||j=="TEXTAREA")return;w.stopPropagation(),p()}}const F=()=>m(!0);function b(w){f=w,n(3,f)}function v(w){i=w,n(4,i)}const C=w=>{r(w)},I=w=>n(6,c=w),y=()=>n(5,u=null),G=()=>p();function X(w,j){o.$$.not_equal(j.location,w)&&(j.location=w,R.set(t))}const be=w=>r(w);function pe(w){l=w,n(2,l)}return o.$$set=w=>{"preferredTotals"in w&&n(0,s=w.preferredTotals),"compromisedTotals"in w&&n(1,a=w.compromisedTotals)},[s,a,l,f,i,u,c,t,r,m,d,p,P,F,b,v,C,I,y,G,X,be,pe]}class zt extends ge{constructor(e){super(),$e(this,e,yt,Rt,_e,{preferredTotals:0,compromisedTotals:1})}}function Ye(o,e,n){const t=o.slice();return t[6]=e[n],t[8]=n,t}function Zt(o){let e;return{c(){e=N("Add")},l(n){e=B(n,"Add")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function xe(o,e){let n,t,s;function a(){return e[5](e[8])}return t=new Dt({props:{i:e[8],preferredTotals:e[2],compromisedTotals:e[1]}}),t.$on("delete",a),{key:o,first:null,c(){n=te(),q(t.$$.fragment),this.h()},l(l){n=te(),A(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,f){$(l,n,f),L(t,l,f),s=!0},p(l,f){e=l;const i={};f&1&&(i.i=e[8]),f&4&&(i.preferredTotals=e[2]),f&2&&(i.compromisedTotals=e[1]),t.$set(i)},i(l){s||(k(t.$$.fragment,l),s=!0)},o(l){T(t.$$.fragment,l),s=!1},d(l){l&&_(n),H(t,l)}}}function Kt(o){let e,n,t="Preferred",s,a=o[2][0].toFixed(2)+"",l,f,i,u,c="Preferred",r,m=o[2][1].toFixed(2)+"",d,p,P,F,b="Compromised",v,C=o[1][0].toFixed(2)+"",I,y,G,X,be="Compromised",pe,w=o[1][1].toFixed(2)+"",j,J,ie,Le=`Checking possible cross-sections of <u>homogeneous sections</u>
  of route along the proposed corridor`,ve,ae,He=`At regular intervals along the corridor measure and enter the available width
  to see if your proposed cross-sections can be accommodated`,ke,Q,we,K,U=[],Fe=new Map,Te,Ce,Pe,re,Ne=`Checking possible cross-sections of any <u>constrained or atypical locations</u>
  along the proposed corridor`,Se,fe,Be=`At key constraints along the corridor, measure and enter the available width
  to see if your proposed cross-sections can be accommodated. Click the map to
  add a pinch point.`,We,Y,x;Q=new nt({props:{$$slots:{default:[Zt]},$$scope:{ctx:o}}}),Q.$on("click",o[3]);let de=ne(o[0].checks.homogeneousSections);const Ie=h=>h[6];for(let h=0;h<de.length;h+=1){let g=Ye(o,de,h),V=Ie(g);Fe.set(V,U[h]=xe(V,g))}return Y=new zt({props:{preferredTotals:o[2],compromisedTotals:o[1]}}),{c(){e=E("p"),n=E("u"),n.textContent=t,s=N(`
  cross-section requites a desirable minimum width (m): `),l=N(a),f=S(),i=E("p"),u=E("u"),u.textContent=c,r=N(`
  cross-section requites an absolute minimum width (m): `),d=N(m),p=S(),P=E("p"),F=E("u"),F.textContent=b,v=N(`
  cross-section requites a desirable minimum width (m): `),I=N(C),y=S(),G=E("p"),X=E("u"),X.textContent=be,pe=N(`
  cross-section requites an absolute minimum width (m): `),j=N(w),J=S(),ie=E("h2"),ie.innerHTML=Le,ve=S(),ae=E("p"),ae.textContent=He,ke=S(),q(Q.$$.fragment),we=S(),K=E("div");for(let h=0;h<U.length;h+=1)U[h].c();Te=S(),Ce=E("hr"),Pe=S(),re=E("h2"),re.innerHTML=Ne,Se=S(),fe=E("p"),fe.textContent=Be,We=S(),q(Y.$$.fragment),this.h()},l(h){e=D(h,"P",{});var g=O(e);n=D(g,"U",{"data-svelte-h":!0}),z(n)!=="svelte-1gb9n3v"&&(n.textContent=t),s=B(g,`
  cross-section requites a desirable minimum width (m): `),l=B(g,a),g.forEach(_),f=W(h),i=D(h,"P",{});var V=O(i);u=D(V,"U",{"data-svelte-h":!0}),z(u)!=="svelte-1gb9n3v"&&(u.textContent=c),r=B(V,`
  cross-section requites an absolute minimum width (m): `),d=B(V,m),V.forEach(_),p=W(h),P=D(h,"P",{});var ee=O(P);F=D(ee,"U",{"data-svelte-h":!0}),z(F)!=="svelte-svpwa8"&&(F.textContent=b),v=B(ee,`
  cross-section requites a desirable minimum width (m): `),I=B(ee,C),ee.forEach(_),y=W(h),G=D(h,"P",{});var Me=O(G);X=D(Me,"U",{"data-svelte-h":!0}),z(X)!=="svelte-svpwa8"&&(X.textContent=be),pe=B(Me,`
  cross-section requites an absolute minimum width (m): `),j=B(Me,w),Me.forEach(_),J=W(h),ie=D(h,"H2",{"data-svelte-h":!0}),z(ie)!=="svelte-1x2x8kb"&&(ie.innerHTML=Le),ve=W(h),ae=D(h,"P",{"data-svelte-h":!0}),z(ae)!=="svelte-x0c18j"&&(ae.textContent=He),ke=W(h),A(Q.$$.fragment,h),we=W(h),K=D(h,"DIV",{style:!0});var Ue=O(K);for(let De=0;De<U.length;De+=1)U[De].l(Ue);Ue.forEach(_),Te=W(h),Ce=D(h,"HR",{}),Pe=W(h),re=D(h,"H2",{"data-svelte-h":!0}),z(re)!=="svelte-1m1bgig"&&(re.innerHTML=Ne),Se=W(h),fe=D(h,"P",{"data-svelte-h":!0}),z(fe)!=="svelte-x52uk0"&&(fe.textContent=Be),We=W(h),A(Y.$$.fragment,h),this.h()},h(){Z(K,"display","flex"),Z(K,"flex-direction","row"),Z(K,"overflow-x","scroll")},m(h,g){$(h,e,g),M(e,n),M(e,s),M(e,l),$(h,f,g),$(h,i,g),M(i,u),M(i,r),M(i,d),$(h,p,g),$(h,P,g),M(P,F),M(P,v),M(P,I),$(h,y,g),$(h,G,g),M(G,X),M(G,pe),M(G,j),$(h,J,g),$(h,ie,g),$(h,ve,g),$(h,ae,g),$(h,ke,g),L(Q,h,g),$(h,we,g),$(h,K,g);for(let V=0;V<U.length;V+=1)U[V]&&U[V].m(K,null);$(h,Te,g),$(h,Ce,g),$(h,Pe,g),$(h,re,g),$(h,Se,g),$(h,fe,g),$(h,We,g),L(Y,h,g),x=!0},p(h,[g]){(!x||g&4)&&a!==(a=h[2][0].toFixed(2)+"")&&me(l,a),(!x||g&4)&&m!==(m=h[2][1].toFixed(2)+"")&&me(d,m),(!x||g&2)&&C!==(C=h[1][0].toFixed(2)+"")&&me(I,C),(!x||g&2)&&w!==(w=h[1][1].toFixed(2)+"")&&me(j,w);const V={};g&512&&(V.$$scope={dirty:g,ctx:h}),Q.$set(V),g&23&&(de=ne(h[0].checks.homogeneousSections),ce(),U=rt(U,g,Ie,1,h,de,Fe,K,ft,xe,null,Ye),ue());const ee={};g&4&&(ee.preferredTotals=h[2]),g&2&&(ee.compromisedTotals=h[1]),Y.$set(ee)},i(h){if(!x){k(Q.$$.fragment,h);for(let g=0;g<de.length;g+=1)k(U[g]);k(Y.$$.fragment,h),x=!0}},o(h){T(Q.$$.fragment,h);for(let g=0;g<U.length;g+=1)T(U[g]);T(Y.$$.fragment,h),x=!1},d(h){h&&(_(e),_(f),_(i),_(p),_(P),_(y),_(G),_(J),_(ie),_(ve),_(ae),_(ke),_(we),_(K),_(Te),_(Ce),_(Pe),_(re),_(Se),_(fe),_(We)),H(Q,h);for(let g=0;g<U.length;g+=1)U[g].d();H(Y,h)}}}function Qt(o,e,n){let t,s,a;Ee(o,R,u=>n(0,a=u));function l(){et(R,a.checks.homogeneousSections=[...a.checks.homogeneousSections,{availableWidth:0,notes:""}],a)}function f(u){a.checks.homogeneousSections.splice(u,1),R.set(a)}const i=u=>f(u);return o.$$.update=()=>{o.$$.dirty&1&&n(2,t=Oe(a,"Preferred")),o.$$.dirty&1&&n(1,s=Oe(a,"Compromised"))},[a,s,t,l,f,i]}class un extends ge{constructor(e){super(),$e(this,e,Qt,Kt,_e,{})}}export{un as component};
