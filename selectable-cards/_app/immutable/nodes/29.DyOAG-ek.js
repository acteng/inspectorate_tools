import{s as _e,B as ne,i as $,n as Ue,f as _,r as qe,e as D,t as I,a as W,c as M,b as V,d as F,g as E,o as se,h as P,j as te,m as Z,v as oe,w as ie,k as De,Q as ot,x as y,z as it,U as at,S as et,T as je}from"../chunks/scheduler.guEzRCZz.js";import{S as ge,i as $e,e as ae,c as q,b as A,m as L,t as k,g as me,a as T,f as he,d as H}from"../chunks/index.BSBdbbf8.js";import{e as le,u as rt,o as ft}from"../chunks/each.DItetQGL.js";import{W as tt,S as nt}from"../chunks/WarningButton.wqkTj77w.js";import{s as R}from"../chunks/data.BFW2yUHv.js";import"../chunks/paths.D6O2pIlZ.js";import{D as lt}from"../chunks/DecimalInput.Dt2Kb5H9.js";import{T as st}from"../chunks/TextArea.CrAVEq9f.js";/* empty css                                                            */import{B as ct,G as ut,C as mt,a as ht,S as pt,M as dt}from"../chunks/GeoreferenceLayer.svelte_svelte_type_style_lang.eTxqMFWP.js";import{D as _t,C as gt}from"../chunks/DefaultButton.D3Rrm7NM.js";import{C as $t}from"../chunks/ClickableCard.D72orTyn.js";import{M as bt,b as vt,C as kt}from"../chunks/index.fu6JDPGt.js";import{c as Oe}from"../chunks/logic.Ct59EqJd.js";function Ge(s,e,n){const t=s.slice();return t[5]=e[n][0],t[6]=e[n][1][0],t[7]=e[n][1][1],t}function wt(s){let e,n="Insufficient Space";return{c(){e=D("strong"),e.textContent=n,this.h()},l(t){e=M(t,"STRONG",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-9xvf61"&&(e.textContent=n),this.h()},h(){se(e,"class","govuk-tag govuk-tag--red")},m(t,r){$(t,e,r)},d(t){t&&_(e)}}}function Tt(s){let e,n="Absolute Minimum";return{c(){e=D("strong"),e.textContent=n,this.h()},l(t){e=M(t,"STRONG",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-hmipw0"&&(e.textContent=n),this.h()},h(){se(e,"class","govuk-tag govuk-tag--yellow")},m(t,r){$(t,e,r)},d(t){t&&_(e)}}}function Ct(s){let e,n="Desirable Minimum";return{c(){e=D("strong"),e.textContent=n,this.h()},l(t){e=M(t,"STRONG",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-11simwv"&&(e.textContent=n),this.h()},h(){se(e,"class","govuk-tag govuk-tag--green")},m(t,r){$(t,e,r)},d(t){t&&_(e)}}}function Re(s){let e,n=s[5]+"",t,r=s[1]?"cross sections possible:":":",a,l,c;function i(o,u){return o[0]>=o[6]?Ct:o[0]>o[7]?Tt:wt}let m=i(s),f=m(s);return{c(){e=D("p"),t=I(n),a=I(r),l=W(),f.c(),c=W(),this.h()},l(o){e=M(o,"P",{class:!0});var u=V(e);t=F(u,n),a=F(u,r),l=E(u),f.l(u),c=E(u),u.forEach(_),this.h()},h(){se(e,"class","svelte-1d0pd4t")},m(o,u){$(o,e,u),P(e,t),P(e,a),P(e,l),f.m(e,null),P(e,c)},p(o,u){u&2&&r!==(r=o[1]?"cross sections possible:":":")&&te(a,r),m!==(m=i(o))&&(f.d(1),f=m(o),f&&(f.c(),f.m(e,c)))},d(o){o&&_(e),f.d()}}}function Pt(s){let e,n=le(s[2]),t=[];for(let r=0;r<n.length;r+=1)t[r]=Re(Ge(s,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ne()},l(r){for(let a=0;a<t.length;a+=1)t[a].l(r);e=ne()},m(r,a){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(r,a);$(r,e,a)},p(r,[a]){if(a&7){n=le(r[2]);let l;for(l=0;l<n.length;l+=1){const c=Ge(r,n,l);t[l]?t[l].p(c,a):(t[l]=Re(c),t[l].c(),t[l].m(e.parentNode,e))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},i:Ue,o:Ue,d(r){r&&_(e),qe(t,r)}}}function St(s,e,n){let{available:t}=e,{preferredTotals:r}=e,{compromisedTotals:a}=e,{verbose:l=!0}=e,c=[["Preferred",r],["Compromised",a]];return s.$$set=i=>{"available"in i&&n(0,t=i.available),"preferredTotals"in i&&n(3,r=i.preferredTotals),"compromisedTotals"in i&&n(4,a=i.compromisedTotals),"verbose"in i&&n(1,l=i.verbose)},[t,l,c,r,a]}class Ae extends ge{constructor(e){super(),$e(this,e,St,Pt,_e,{available:0,preferredTotals:3,compromisedTotals:4,verbose:1})}}function ye(s){let e,n,t;function r(l){s[6](l)}let a={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return s[3].checks.homogeneousSections[s[0]].notes!==void 0&&(a.value=s[3].checks.homogeneousSections[s[0]].notes),e=new st({props:a}),oe.push(()=>ae(e,"value",r)),{c(){q(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,c){L(e,l,c),t=!0},p(l,c){const i={};!n&&c&9&&(n=!0,i.value=l[3].checks.homogeneousSections[l[0]].notes,ie(()=>n=!1)),e.$set(i)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Wt(s){let e;return{c(){e=I("Delete")},l(n){e=F(n,"Delete")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Et(s){let e,n,t,r=s[0]+1+"",a,l,c,i,m,f,o,u,p,d;function S(v){s[5](v)}let N={label:"Available width (m)",width:4,min:0};s[3].checks.homogeneousSections[s[0]].availableWidth!==void 0&&(N.value=s[3].checks.homogeneousSections[s[0]].availableWidth),c=new lt({props:N}),oe.push(()=>ae(c,"value",S)),f=new Ae({props:{available:s[3].checks.homogeneousSections[s[0]].availableWidth,preferredTotals:s[1],compromisedTotals:s[2]}});let b=s[3].checks.homogeneousSections[s[0]].availableWidth<s[1][0]&&ye(s);return p=new tt({props:{$$slots:{default:[Wt]},$$scope:{ctx:s}}}),p.$on("click",s[7]),{c(){e=D("div"),n=D("u"),t=I("Cross-section #"),a=I(r),l=W(),q(c.$$.fragment),m=W(),q(f.$$.fragment),o=W(),b&&b.c(),u=W(),q(p.$$.fragment),this.h()},l(v){e=M(v,"DIV",{class:!0});var C=V(e);n=M(C,"U",{});var B=V(n);t=F(B,"Cross-section #"),a=F(B,r),B.forEach(_),l=E(C),A(c.$$.fragment,C),m=E(C),A(f.$$.fragment,C),o=E(C),b&&b.l(C),u=E(C),A(p.$$.fragment,C),C.forEach(_),this.h()},h(){se(e,"class","svelte-d4ufy0")},m(v,C){$(v,e,C),P(e,n),P(n,t),P(n,a),P(e,l),L(c,e,null),P(e,m),L(f,e,null),P(e,o),b&&b.m(e,null),P(e,u),L(p,e,null),d=!0},p(v,[C]){(!d||C&1)&&r!==(r=v[0]+1+"")&&te(a,r);const B={};!i&&C&9&&(i=!0,B.value=v[3].checks.homogeneousSections[v[0]].availableWidth,ie(()=>i=!1)),c.$set(B);const z={};C&9&&(z.available=v[3].checks.homogeneousSections[v[0]].availableWidth),C&2&&(z.preferredTotals=v[1]),C&4&&(z.compromisedTotals=v[2]),f.$set(z),v[3].checks.homogeneousSections[v[0]].availableWidth<v[1][0]?b?(b.p(v,C),C&11&&k(b,1)):(b=ye(v),b.c(),k(b,1),b.m(e,u)):b&&(me(),T(b,1,1,()=>{b=null}),he());const G={};C&256&&(G.$$scope={dirty:C,ctx:v}),p.$set(G)},i(v){d||(k(c.$$.fragment,v),k(f.$$.fragment,v),k(b),k(p.$$.fragment,v),d=!0)},o(v){T(c.$$.fragment,v),T(f.$$.fragment,v),T(b),T(p.$$.fragment,v),d=!1},d(v){v&&_(e),H(c),H(f),b&&b.d(),H(p)}}}function Dt(s,e,n){let t;De(s,R,o=>n(3,t=o));let{i:r}=e,{preferredTotals:a}=e,{compromisedTotals:l}=e,c=ot();function i(o){s.$$.not_equal(t.checks.homogeneousSections[r].availableWidth,o)&&(t.checks.homogeneousSections[r].availableWidth=o,R.set(t))}function m(o){s.$$.not_equal(t.checks.homogeneousSections[r].notes,o)&&(t.checks.homogeneousSections[r].notes=o,R.set(t))}const f=()=>c("delete");return s.$$set=o=>{"i"in o&&n(0,r=o.i),"preferredTotals"in o&&n(1,a=o.preferredTotals),"compromisedTotals"in o&&n(2,l=o.compromisedTotals)},[r,a,l,t,c,i,m,f]}class Mt extends ge{constructor(e){super(),$e(this,e,Dt,Et,_e,{i:0,preferredTotals:1,compromisedTotals:2})}}function ze(s){let e,n,t;function r(l){s[5](l)}let a={label:"Where only the absolute minimum cross-section is possible, what (if anything) could change to fit in the desirable minimum cross-section? Where there is insufficient space even for the absolute minimum cross-section, what (if anything) could change to allow this to be implemented? Otherwise, what else could be implemented as an alternative?"};return s[3].checks.pinchPoints[s[0]].notes!==void 0&&(a.value=s[3].checks.pinchPoints[s[0]].notes),e=new st({props:a}),oe.push(()=>ae(e,"value",r)),{c(){q(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,c){L(e,l,c),t=!0},p(l,c){const i={};!n&&c&9&&(n=!0,i.value=l[3].checks.pinchPoints[l[0]].notes,ie(()=>n=!1)),e.$set(i)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function qt(s){let e,n,t,r,a,l,c;function i(o){s[4](o)}let m={label:"Available width (m)",width:4,min:0};s[3].checks.pinchPoints[s[0]].availableWidth!==void 0&&(m.value=s[3].checks.pinchPoints[s[0]].availableWidth),n=new lt({props:m}),oe.push(()=>ae(n,"value",i)),a=new Ae({props:{available:s[3].checks.pinchPoints[s[0]].availableWidth,preferredTotals:s[1],compromisedTotals:s[2]}});let f=s[3].checks.pinchPoints[s[0]].availableWidth<s[1][0]&&ze(s);return{c(){e=D("div"),q(n.$$.fragment),r=W(),q(a.$$.fragment),l=W(),f&&f.c(),this.h()},l(o){e=M(o,"DIV",{class:!0});var u=V(e);A(n.$$.fragment,u),r=E(u),A(a.$$.fragment,u),l=E(u),f&&f.l(u),u.forEach(_),this.h()},h(){se(e,"class","svelte-jig4ga")},m(o,u){$(o,e,u),L(n,e,null),P(e,r),L(a,e,null),P(e,l),f&&f.m(e,null),c=!0},p(o,[u]){const p={};!t&&u&9&&(t=!0,p.value=o[3].checks.pinchPoints[o[0]].availableWidth,ie(()=>t=!1)),n.$set(p);const d={};u&9&&(d.available=o[3].checks.pinchPoints[o[0]].availableWidth),u&2&&(d.preferredTotals=o[1]),u&4&&(d.compromisedTotals=o[2]),a.$set(d),o[3].checks.pinchPoints[o[0]].availableWidth<o[1][0]?f?(f.p(o,u),u&11&&k(f,1)):(f=ze(o),f.c(),k(f,1),f.m(e,null)):f&&(me(),T(f,1,1,()=>{f=null}),he())},i(o){c||(k(n.$$.fragment,o),k(a.$$.fragment,o),k(f),c=!0)},o(o){T(n.$$.fragment,o),T(a.$$.fragment,o),T(f),c=!1},d(o){o&&_(e),H(n),H(a),f&&f.d()}}}function At(s,e,n){let t;De(s,R,m=>n(3,t=m));let{i:r}=e,{preferredTotals:a}=e,{compromisedTotals:l}=e;function c(m){s.$$.not_equal(t.checks.pinchPoints[r].availableWidth,m)&&(t.checks.pinchPoints[r].availableWidth=m,R.set(t))}function i(m){s.$$.not_equal(t.checks.pinchPoints[r].notes,m)&&(t.checks.pinchPoints[r].notes=m,R.set(t))}return s.$$set=m=>{"i"in m&&n(0,r=m.i),"preferredTotals"in m&&n(1,a=m.preferredTotals),"compromisedTotals"in m&&n(2,l=m.compromisedTotals)},[r,a,l,t,c,i]}class Lt extends ge{constructor(e){super(),$e(this,e,At,qt,_e,{i:0,preferredTotals:1,compromisedTotals:2})}}function Ze(s,e,n){const t=s.slice();return t[23]=e[n],t[24]=e,t[25]=n,t}function Ke(s,e,n){const t=s.slice();return t[26]=e[n],t[25]=n,t}function Ht(s){let e,n,t=s[5]+1+"",r,a,l,c,i,m,f,o;return l=new _t({props:{$$slots:{default:[Ft]},$$scope:{ctx:s}}}),l.$on("click",s[18]),i=new tt({props:{$$slots:{default:[Nt]},$$scope:{ctx:s}}}),i.$on("click",s[19]),f=new Lt({props:{i:s[5],preferredTotals:s[0],compromisedTotals:s[1]}}),{c(){e=D("h2"),n=I("Pinch point "),r=I(t),a=W(),q(l.$$.fragment),c=W(),q(i.$$.fragment),m=W(),q(f.$$.fragment)},l(u){e=M(u,"H2",{});var p=V(e);n=F(p,"Pinch point "),r=F(p,t),p.forEach(_),a=E(u),A(l.$$.fragment,u),c=E(u),A(i.$$.fragment,u),m=E(u),A(f.$$.fragment,u)},m(u,p){$(u,e,p),P(e,n),P(e,r),$(u,a,p),L(l,u,p),$(u,c,p),L(i,u,p),$(u,m,p),L(f,u,p),o=!0},p(u,p){(!o||p&32)&&t!==(t=u[5]+1+"")&&te(r,t);const d={};p&268435456&&(d.$$scope={dirty:p,ctx:u}),l.$set(d);const S={};p&268435456&&(S.$$scope={dirty:p,ctx:u}),i.$set(S);const N={};p&32&&(N.i=u[5]),p&1&&(N.preferredTotals=u[0]),p&2&&(N.compromisedTotals=u[1]),f.$set(N)},i(u){o||(k(l.$$.fragment,u),k(i.$$.fragment,u),k(f.$$.fragment,u),o=!0)},o(u){T(l.$$.fragment,u),T(i.$$.fragment,u),T(f.$$.fragment,u),o=!1},d(u){u&&(_(e),_(a),_(c),_(m)),H(l,u),H(i,u),H(f,u)}}}function It(s){let e,n,t,r;e=new gt({props:{label:"Tools",$$slots:{default:[Ut]},$$scope:{ctx:s}}});let a=le(s[7].checks.pinchPoints),l=[];for(let i=0;i<a.length;i+=1)l[i]=Xe(Ke(s,a,i));const c=i=>T(l[i],1,1,()=>{l[i]=null});return{c(){q(e.$$.fragment),n=W();for(let i=0;i<l.length;i+=1)l[i].c();t=ne()},l(i){A(e.$$.fragment,i),n=E(i);for(let m=0;m<l.length;m+=1)l[m].l(i);t=ne()},m(i,m){L(e,i,m),$(i,n,m);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(i,m);$(i,t,m),r=!0},p(i,m){const f={};if(m&268435484&&(f.$$scope={dirty:m,ctx:i}),e.$set(f),m&451){a=le(i[7].checks.pinchPoints);let o;for(o=0;o<a.length;o+=1){const u=Ke(i,a,o);l[o]?(l[o].p(u,m),k(l[o],1)):(l[o]=Xe(u),l[o].c(),k(l[o],1),l[o].m(t.parentNode,t))}for(me(),o=a.length;o<l.length;o+=1)c(o);he()}},i(i){if(!r){k(e.$$.fragment,i);for(let m=0;m<a.length;m+=1)k(l[m]);r=!0}},o(i){T(e.$$.fragment,i),l=l.filter(Boolean);for(let m=0;m<l.length;m+=1)T(l[m]);r=!1},d(i){i&&(_(n),_(t)),H(e,i),qe(l,i)}}}function Ft(s){let e;return{c(){e=I("Save")},l(n){e=F(n,"Save")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Nt(s){let e;return{c(){e=I("Delete")},l(n){e=F(n,"Delete")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Bt(s){let e;return{c(){e=I("Zoom to fit")},l(n){e=F(n,"Zoom to fit")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Qe(s){let e,n,t;function r(l){s[14](l)}let a={map:s[2]};return s[3]!==void 0&&(a.enabled=s[3]),e=new pt({props:a}),oe.push(()=>ae(e,"enabled",r)),{c(){q(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,c){L(e,l,c),t=!0},p(l,c){const i={};c&4&&(i.map=l[2]),!n&&c&8&&(n=!0,i.enabled=l[3],ie(()=>n=!1)),e.$set(i)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Vt(s){let e;return{c(){e=I("Show scheme context")},l(n){e=F(n,"Show scheme context")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function Ut(s){let e,n,t,r,a,l,c,i,m,f;e=new nt({props:{$$slots:{default:[Bt]},$$scope:{ctx:s}}}),e.$on("click",s[13]),t=new ct({}),a=new ut({});let o=s[2]&&Qe(s);function u(d){s[15](d)}let p={$$slots:{default:[Vt]},$$scope:{ctx:s}};return s[4]!==void 0&&(p.checked=s[4]),i=new mt({props:p}),oe.push(()=>ae(i,"checked",u)),{c(){q(e.$$.fragment),n=W(),q(t.$$.fragment),r=W(),q(a.$$.fragment),l=W(),o&&o.c(),c=W(),q(i.$$.fragment)},l(d){A(e.$$.fragment,d),n=E(d),A(t.$$.fragment,d),r=E(d),A(a.$$.fragment,d),l=E(d),o&&o.l(d),c=E(d),A(i.$$.fragment,d)},m(d,S){L(e,d,S),$(d,n,S),L(t,d,S),$(d,r,S),L(a,d,S),$(d,l,S),o&&o.m(d,S),$(d,c,S),L(i,d,S),f=!0},p(d,S){const N={};S&268435456&&(N.$$scope={dirty:S,ctx:d}),e.$set(N),d[2]?o?(o.p(d,S),S&4&&k(o,1)):(o=Qe(d),o.c(),k(o,1),o.m(c.parentNode,c)):o&&(me(),T(o,1,1,()=>{o=null}),he());const b={};S&268435456&&(b.$$scope={dirty:S,ctx:d}),!m&&S&16&&(m=!0,b.checked=d[4],ie(()=>m=!1)),i.$set(b)},i(d){f||(k(e.$$.fragment,d),k(t.$$.fragment,d),k(a.$$.fragment,d),k(o),k(i.$$.fragment,d),f=!0)},o(d){T(e.$$.fragment,d),T(t.$$.fragment,d),T(a.$$.fragment,d),T(o),T(i.$$.fragment,d),f=!1},d(d){d&&(_(n),_(r),_(l),_(c)),H(e,d),H(t,d),H(a,d),o&&o.d(d),H(i,d)}}}function jt(s){let e,n,t,r=s[26].availableWidth+"",a,l,c,i,m,f;return i=new Ae({props:{available:s[26].availableWidth,preferredTotals:s[0],compromisedTotals:s[1],verbose:!1}}),{c(){e=D("div"),n=D("p"),t=I("Available Width: "),a=I(r),l=W(),c=D("div"),q(i.$$.fragment),m=W(),this.h()},l(o){e=M(o,"DIV",{class:!0});var u=V(e);n=M(u,"P",{});var p=V(n);t=F(p,"Available Width: "),a=F(p,r),p.forEach(_),l=E(u),c=M(u,"DIV",{style:!0});var d=V(c);A(i.$$.fragment,d),d.forEach(_),u.forEach(_),m=E(o),this.h()},h(){y(c,"display","flex"),se(e,"class","card-bottom-half svelte-1vx5eqo")},m(o,u){$(o,e,u),P(e,n),P(n,t),P(n,a),P(e,l),P(e,c),L(i,c,null),$(o,m,u),f=!0},p(o,u){(!f||u&128)&&r!==(r=o[26].availableWidth+"")&&te(a,r);const p={};u&128&&(p.available=o[26].availableWidth),u&1&&(p.preferredTotals=o[0]),u&2&&(p.compromisedTotals=o[1]),i.$set(p)},i(o){f||(k(i.$$.fragment,o),f=!0)},o(o){T(i.$$.fragment,o),f=!1},d(o){o&&(_(e),_(m)),H(i)}}}function Xe(s){let e,n;function t(){return s[16](s[25])}function r(){return s[17](s[25])}return e=new $t({props:{name:`Pinch point ${s[25]+1}`,$$slots:{default:[jt]},$$scope:{ctx:s}}}),e.$on("click",t),e.$on("mouseenter",r),{c(){q(e.$$.fragment)},l(a){A(e.$$.fragment,a)},m(a,l){L(e,a,l),n=!0},p(a,l){s=a;const c={};l&268435587&&(c.$$scope={dirty:l,ctx:s}),e.$set(c)},i(a){n||(k(e.$$.fragment,a),n=!0)},o(a){T(e.$$.fragment,a),n=!1},d(a){H(e,a)}}}function Ot(s){let e,n=s[25]+1+"",t,r;return{c(){e=D("span"),t=I(n),r=W(),this.h()},l(a){e=M(a,"SPAN",{class:!0});var l=V(e);t=F(l,n),l.forEach(_),r=E(a),this.h()},h(){se(e,"class","dot svelte-1vx5eqo"),je(e,"highlight",s[25]==s[5]||s[25]==s[6])},m(a,l){$(a,e,l),P(e,t),$(a,r,l)},p(a,l){l&96&&je(e,"highlight",a[25]==a[5]||a[25]==a[6])},d(a){a&&(_(e),_(r))}}}function Je(s){let e,n,t;function r(c){s[20](c,s[23])}function a(){return s[21](s[25])}let l={draggable:!0,$$slots:{default:[Ot]},$$scope:{ctx:s}};return s[23].location!==void 0&&(l.lngLat=s[23].location),e=new dt({props:l}),oe.push(()=>ae(e,"lngLat",r)),e.$on("click",a),{c(){q(e.$$.fragment)},l(c){A(e.$$.fragment,c)},m(c,i){L(e,c,i),t=!0},p(c,i){s=c;const m={};i&268435552&&(m.$$scope={dirty:i,ctx:s}),!n&&i&128&&(n=!0,m.lngLat=s[23].location,ie(()=>n=!1)),e.$set(m)},i(c){t||(k(e.$$.fragment,c),t=!0)},o(c){T(e.$$.fragment,c),t=!1},d(c){H(e,c)}}}function Gt(s){let e,n,t,r,a,l;e=new ht({}),e.$on("click",s[10]),t=new kt({props:{gj:s[7].summary.networkMap,show:s[4]}});let c=le(s[7].checks.pinchPoints),i=[];for(let f=0;f<c.length;f+=1)i[f]=Je(Ze(s,c,f));const m=f=>T(i[f],1,1,()=>{i[f]=null});return{c(){q(e.$$.fragment),n=W(),q(t.$$.fragment),r=W();for(let f=0;f<i.length;f+=1)i[f].c();a=ne()},l(f){A(e.$$.fragment,f),n=E(f),A(t.$$.fragment,f),r=E(f);for(let o=0;o<i.length;o+=1)i[o].l(f);a=ne()},m(f,o){L(e,f,o),$(f,n,o),L(t,f,o),$(f,r,o);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(f,o);$(f,a,o),l=!0},p(f,o){const u={};if(o&128&&(u.gj=f[7].summary.networkMap),o&16&&(u.show=f[4]),t.$set(u),o&480){c=le(f[7].checks.pinchPoints);let p;for(p=0;p<c.length;p+=1){const d=Ze(f,c,p);i[p]?(i[p].p(d,o),k(i[p],1)):(i[p]=Je(d),i[p].c(),k(i[p],1),i[p].m(a.parentNode,a))}for(me(),p=c.length;p<i.length;p+=1)m(p);he()}},i(f){if(!l){k(e.$$.fragment,f),k(t.$$.fragment,f);for(let o=0;o<c.length;o+=1)k(i[o]);l=!0}},o(f){T(e.$$.fragment,f),T(t.$$.fragment,f),i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)T(i[o]);l=!1},d(f){f&&(_(n),_(r),_(a)),H(e,f),H(t,f),qe(i,f)}}}function Rt(s){let e,n,t,r,a,l,c,i,m,f,o;const u=[It,Ht],p=[];function d(b,v){return b[5]==null?0:1}t=d(s),r=p[t]=u[t](s);function S(b){s[22](b)}let N={$$slots:{default:[Gt]},$$scope:{ctx:s}};return s[2]!==void 0&&(N.map=s[2]),c=new bt({props:N}),oe.push(()=>ae(c,"map",S)),{c(){e=D("div"),n=D("div"),r.c(),a=W(),l=D("div"),q(c.$$.fragment),this.h()},l(b){e=M(b,"DIV",{style:!0});var v=V(e);n=M(v,"DIV",{style:!0});var C=V(n);r.l(C),C.forEach(_),a=E(v),l=M(v,"DIV",{style:!0});var B=V(l);A(c.$$.fragment,B),B.forEach(_),v.forEach(_),this.h()},h(){y(n,"width","30%"),y(n,"overflow-y","scroll"),y(n,"padding","10px"),y(n,"border","1px solid black"),y(l,"position","relative"),y(l,"width","100%"),y(e,"display","flex"),y(e,"height","80vh")},m(b,v){$(b,e,v),P(e,n),p[t].m(n,null),P(e,a),P(e,l),L(c,l,null),m=!0,f||(o=it(window,"keydown",s[12]),f=!0)},p(b,[v]){let C=t;t=d(b),t===C?p[t].p(b,v):(me(),T(p[C],1,1,()=>{p[C]=null}),he(),r=p[t],r?r.p(b,v):(r=p[t]=u[t](b),r.c()),k(r,1),r.m(n,null));const B={};v&268435696&&(B.$$scope={dirty:v,ctx:b}),!i&&v&4&&(i=!0,B.map=b[2],ie(()=>i=!1)),c.$set(B)},i(b){m||(k(r),k(c.$$.fragment,b),m=!0)},o(b){T(r),T(c.$$.fragment,b),m=!1},d(b){b&&_(e),p[t].d(),H(c),f=!1,o()}}}function yt(s,e,n){let t;De(s,R,w=>n(7,t=w));let{preferredTotals:r}=e,{compromisedTotals:a}=e,l,c=!1,i=!0,m,f;at(()=>{u(!1)});function o(w){n(5,m=w),n(6,f=null)}function u(w){let O={type:"FeatureCollection",features:t.checks.pinchPoints.map(J=>({type:"Feature",properties:{},geometry:{type:"Point",coordinates:J.location}}))};for(let J of t.summary.networkMap.features)O.features.push(J);O.features.length>0&&l.fitBounds(vt(O),{padding:20,animate:w})}function p(w){if(!c){if(m!=null){n(5,m=null);return}et(R,t.checks.pinchPoints=[...t.checks.pinchPoints,{location:w.detail.lngLat.toArray(),availableWidth:0,notes:""}],t),o(t.checks.pinchPoints.length-1)}}function d(){t.checks.pinchPoints.splice(m,1),R.set(t),n(5,m=null)}function S(w){if(m!=null&&w.key=="Escape")w.stopPropagation(),n(5,m=null);else if(m!=null&&w.key=="Delete"){let O=w.target.tagName;if(O=="INPUT"||O=="TEXTAREA")return;w.stopPropagation(),d()}}const N=()=>u(!0);function b(w){c=w,n(3,c)}function v(w){i=w,n(4,i)}const C=w=>{o(w)},B=w=>n(6,f=w),z=()=>n(5,m=null),G=()=>d();function X(w,O){s.$$.not_equal(O.location,w)&&(O.location=w,R.set(t))}const be=w=>o(w);function pe(w){l=w,n(2,l)}return s.$$set=w=>{"preferredTotals"in w&&n(0,r=w.preferredTotals),"compromisedTotals"in w&&n(1,a=w.compromisedTotals)},[r,a,l,c,i,m,f,t,o,u,p,d,S,N,b,v,C,B,z,G,X,be,pe]}class zt extends ge{constructor(e){super(),$e(this,e,yt,Rt,_e,{preferredTotals:0,compromisedTotals:1})}}function Ye(s,e,n){const t=s.slice();return t[6]=e[n],t[8]=n,t}function Zt(s){let e;return{c(){e=I("Add")},l(n){e=F(n,"Add")},m(n,t){$(n,e,t)},d(n){n&&_(e)}}}function xe(s,e){let n,t,r;function a(){return e[5](e[8])}return t=new Mt({props:{i:e[8],preferredTotals:e[2],compromisedTotals:e[1]}}),t.$on("delete",a),{key:s,first:null,c(){n=ne(),q(t.$$.fragment),this.h()},l(l){n=ne(),A(t.$$.fragment,l),this.h()},h(){this.first=n},m(l,c){$(l,n,c),L(t,l,c),r=!0},p(l,c){e=l;const i={};c&1&&(i.i=e[8]),c&4&&(i.preferredTotals=e[2]),c&2&&(i.compromisedTotals=e[1]),t.$set(i)},i(l){r||(k(t.$$.fragment,l),r=!0)},o(l){T(t.$$.fragment,l),r=!1},d(l){l&&_(n),H(t,l)}}}function Kt(s){let e,n,t="Preferred",r,a=s[2][0].toFixed(2)+"",l,c,i,m,f="Preferred",o,u=s[2][1].toFixed(2)+"",p,d,S,N,b="Compromised",v,C=s[1][0].toFixed(2)+"",B,z,G,X,be="Compromised",pe,w=s[1][1].toFixed(2)+"",O,J,re,Le=`Checking possible cross-sections of <u>homogeneous sections</u>
  of route along the proposed corridor`,ve,fe,He=`At regular intervals along the corridor measure and enter the available width
  to see if your proposed cross-sections can be accommodated`,ke,Q,we,K,U=[],Ie=new Map,Te,Ce,Pe,ce,Fe=`Checking possible cross-sections of any <u>constrained or atypical locations</u>
  along the proposed corridor`,Se,ue,Ne=`At key constraints along the corridor, measure and enter the available width
  to see if your proposed cross-sections can be accommodated. Click the map to
  add a pinch point.`,We,Y,x;Q=new nt({props:{$$slots:{default:[Zt]},$$scope:{ctx:s}}}),Q.$on("click",s[3]);let de=le(s[0].checks.homogeneousSections);const Be=h=>h[6];for(let h=0;h<de.length;h+=1){let g=Ye(s,de,h),j=Be(g);Ie.set(j,U[h]=xe(j,g))}return Y=new zt({props:{preferredTotals:s[2],compromisedTotals:s[1]}}),{c(){e=D("p"),n=D("u"),n.textContent=t,r=I(`
  cross-section requites a desirable minimum width (m): `),l=I(a),c=W(),i=D("p"),m=D("u"),m.textContent=f,o=I(`
  cross-section requites an absolute minimum width (m): `),p=I(u),d=W(),S=D("p"),N=D("u"),N.textContent=b,v=I(`
  cross-section requites a desirable minimum width (m): `),B=I(C),z=W(),G=D("p"),X=D("u"),X.textContent=be,pe=I(`
  cross-section requites an absolute minimum width (m): `),O=I(w),J=W(),re=D("h2"),re.innerHTML=Le,ve=W(),fe=D("p"),fe.textContent=He,ke=W(),q(Q.$$.fragment),we=W(),K=D("div");for(let h=0;h<U.length;h+=1)U[h].c();Te=W(),Ce=D("hr"),Pe=W(),ce=D("h2"),ce.innerHTML=Fe,Se=W(),ue=D("p"),ue.textContent=Ne,We=W(),q(Y.$$.fragment),this.h()},l(h){e=M(h,"P",{});var g=V(e);n=M(g,"U",{"data-svelte-h":!0}),Z(n)!=="svelte-1gb9n3v"&&(n.textContent=t),r=F(g,`
  cross-section requites a desirable minimum width (m): `),l=F(g,a),g.forEach(_),c=E(h),i=M(h,"P",{});var j=V(i);m=M(j,"U",{"data-svelte-h":!0}),Z(m)!=="svelte-1gb9n3v"&&(m.textContent=f),o=F(j,`
  cross-section requites an absolute minimum width (m): `),p=F(j,u),j.forEach(_),d=E(h),S=M(h,"P",{});var ee=V(S);N=M(ee,"U",{"data-svelte-h":!0}),Z(N)!=="svelte-svpwa8"&&(N.textContent=b),v=F(ee,`
  cross-section requites a desirable minimum width (m): `),B=F(ee,C),ee.forEach(_),z=E(h),G=M(h,"P",{});var Ee=V(G);X=M(Ee,"U",{"data-svelte-h":!0}),Z(X)!=="svelte-svpwa8"&&(X.textContent=be),pe=F(Ee,`
  cross-section requites an absolute minimum width (m): `),O=F(Ee,w),Ee.forEach(_),J=E(h),re=M(h,"H2",{"data-svelte-h":!0}),Z(re)!=="svelte-1x2x8kb"&&(re.innerHTML=Le),ve=E(h),fe=M(h,"P",{"data-svelte-h":!0}),Z(fe)!=="svelte-x0c18j"&&(fe.textContent=He),ke=E(h),A(Q.$$.fragment,h),we=E(h),K=M(h,"DIV",{style:!0});var Ve=V(K);for(let Me=0;Me<U.length;Me+=1)U[Me].l(Ve);Ve.forEach(_),Te=E(h),Ce=M(h,"HR",{}),Pe=E(h),ce=M(h,"H2",{"data-svelte-h":!0}),Z(ce)!=="svelte-1m1bgig"&&(ce.innerHTML=Fe),Se=E(h),ue=M(h,"P",{"data-svelte-h":!0}),Z(ue)!=="svelte-x52uk0"&&(ue.textContent=Ne),We=E(h),A(Y.$$.fragment,h),this.h()},h(){y(K,"display","flex"),y(K,"flex-direction","row"),y(K,"overflow-x","scroll")},m(h,g){$(h,e,g),P(e,n),P(e,r),P(e,l),$(h,c,g),$(h,i,g),P(i,m),P(i,o),P(i,p),$(h,d,g),$(h,S,g),P(S,N),P(S,v),P(S,B),$(h,z,g),$(h,G,g),P(G,X),P(G,pe),P(G,O),$(h,J,g),$(h,re,g),$(h,ve,g),$(h,fe,g),$(h,ke,g),L(Q,h,g),$(h,we,g),$(h,K,g);for(let j=0;j<U.length;j+=1)U[j]&&U[j].m(K,null);$(h,Te,g),$(h,Ce,g),$(h,Pe,g),$(h,ce,g),$(h,Se,g),$(h,ue,g),$(h,We,g),L(Y,h,g),x=!0},p(h,[g]){(!x||g&4)&&a!==(a=h[2][0].toFixed(2)+"")&&te(l,a),(!x||g&4)&&u!==(u=h[2][1].toFixed(2)+"")&&te(p,u),(!x||g&2)&&C!==(C=h[1][0].toFixed(2)+"")&&te(B,C),(!x||g&2)&&w!==(w=h[1][1].toFixed(2)+"")&&te(O,w);const j={};g&512&&(j.$$scope={dirty:g,ctx:h}),Q.$set(j),g&23&&(de=le(h[0].checks.homogeneousSections),me(),U=rt(U,g,Be,1,h,de,Ie,K,ft,xe,null,Ye),he());const ee={};g&4&&(ee.preferredTotals=h[2]),g&2&&(ee.compromisedTotals=h[1]),Y.$set(ee)},i(h){if(!x){k(Q.$$.fragment,h);for(let g=0;g<de.length;g+=1)k(U[g]);k(Y.$$.fragment,h),x=!0}},o(h){T(Q.$$.fragment,h);for(let g=0;g<U.length;g+=1)T(U[g]);T(Y.$$.fragment,h),x=!1},d(h){h&&(_(e),_(c),_(i),_(d),_(S),_(z),_(G),_(J),_(re),_(ve),_(fe),_(ke),_(we),_(K),_(Te),_(Ce),_(Pe),_(ce),_(Se),_(ue),_(We)),H(Q,h);for(let g=0;g<U.length;g+=1)U[g].d();H(Y,h)}}}function Qt(s,e,n){let t,r,a;De(s,R,m=>n(0,a=m));function l(){et(R,a.checks.homogeneousSections=[...a.checks.homogeneousSections,{availableWidth:0,notes:""}],a)}function c(m){a.checks.homogeneousSections.splice(m,1),R.set(a)}const i=m=>c(m);return s.$$.update=()=>{s.$$.dirty&1&&n(2,t=Oe(a,"Preferred")),s.$$.dirty&1&&n(1,r=Oe(a,"Compromised"))},[a,r,t,l,c,i]}class un extends ge{constructor(e){super(),$e(this,e,Qt,Kt,_e,{})}}export{un as component};
