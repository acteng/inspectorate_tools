import{L as c,v as l,r as u}from"./authority_names.BOyO7GpT.js";import{w as s}from"./entry.DtH6hALQ.js";import"./index.B_gktW-4.js";import"./index.Ck5rPG5_.js";function m(e){return e=="google"||e=="bing"}const C=s(null);function a(e){return[Math.round(e[0]*1e7)/1e7,Math.round(e[1]*1e7)/1e7]}const g=s(f());g.subscribe(e=>window.localStorage.setItem("userSettings",JSON.stringify(e)));function f(){let e={streetViewImagery:"google",avoidDoublingBack:!1};try{let o=JSON.parse(window.localStorage.getItem("userSettings")||"{}");m(o.streetViewImagery)&&(e.streetViewImagery=o.streetViewImagery),typeof o.avoidDoublingBack=="boolean"&&(e.avoidDoublingBack=o.avoidDoublingBack)}catch(o){console.log(`Couldn't parse userSettings from local storage: ${o}`)}return e}let p=s(n()),h=s(""),b=new c("route_check/",n,y,d,p,h);function I(e){return{"":0,C:0,0:0,1:1,2:2,"N/A":0}[e]}function y(e){var o;if(e.version=="alpha-0"&&(e.version="alpha-1",e.horseRiders=""),e.version!="alpha-1")throw new Error("File format appears outdated");(o=e.summary).networkMap||(o.networkMap={type:"FeatureCollection",features:[]});for(let r of e.policyConflictLog)r.stage=="Design"&&(r.resolved="");for(let r of e.criticalIssues)r.stage=="Design"&&(r.resolved="");e.criticalIssues.forEach(r=>{const t=a(r.point);r.point[0]=t[0],r.point[1]=t[1]}),e.policyConflictLog.forEach(r=>{const t=a(r.point);r.point[0]=t[0],r.point[1]=t[1]}),e.summary.authority=l(e.summary.authority)}function d(e){let o=e.summary.schemeName;return e.summary.schemeReference&&(o+=` (${e.summary.schemeReference})`),o}function n(){return{version:"alpha-1",summary:{dateDesignReview:"",schemeReference:"",schemeName:"",schemeSummary:"",schemeInfoReviewed:"",authority:"",transportOrCombinedAuthority:"",region:"",fundingProgramme:"",designStage:"",fundingConditions:"",inspectorEmail:"",assessedRouteLengthKm:0,totalRouteLengthKm:0,notes:"",checkType:"",networkMap:{type:"FeatureCollection",features:[]}},policyCheck:u(6,{existing:"",proposed:"",commentary:""}),policyConflictLog:[],safetyCheck:i(16),criticalIssues:[],streetCheck:i(26),streetPlacemakingCheck:i(26),pathCheck:i(30),horseRiders:"",pathPlacemakingCheck:i(19),jat:[],resultsReviewStatement:""}}function i(e){return{existingScores:Array(e).fill(""),proposedScores:Array(e).fill(""),existingScoreNotes:Array(e).fill(""),proposedScoreNotes:Array(e).fill("")}}export{a,h as c,n as e,b as f,I as n,C as r,p as s,g as u};
