import{s as we,r as te,w as ne,a as C,e as E,g as L,c as N,q as X,i as S,J as Lt,y as Et,f as _,x as sr,t as A,b as B,d as U,p as ve,v as Re,h as v,j as ce,k as ze,$ as or,K as fr,D as Pe,n as Je,U as ur,V as tr}from"../chunks/scheduler.DGwhun8C.js";import{S as ke,i as ye,e as le,c as W,a as R,m as P,t as y,b as T,d as O,g as fe,f as ue}from"../chunks/index.B2vZYn3d.js";import{C as st}from"../chunks/CollapsibleCard.NCxe97a7.js";import"../chunks/SelectWithCustom.svelte_svelte_type_style_lang.eK1QC991.js";import{S as Oe}from"../chunks/SecondaryButton.zQkvdoBX.js";import{s as K,a as rr,b as cr}from"../chunks/data.Cgun-5Yu.js";import{e as G,u as be,o as He,d as mt}from"../chunks/each.osbS1YKp.js";import{p as We}from"../chunks/index.BU7J0p14.js";import{D as ht}from"../chunks/DefaultButton.Dnb4gInE.js";import{S as dr}from"../chunks/Select.DVwempGl.js";import{W as nr}from"../chunks/WarningButton.B3j9Frnm.js";import{W as pr}from"../chunks/WarningText.wRiJ9IQ1.js";import{E as mr}from"../chunks/ExternalLink.C3Nx3-Hy.js";import"../chunks/paths.BwWlIiVI.js";import"../chunks/entry.hCazxM9D.js";import{a as lr,c as hr,n as _r,g as ot}from"../chunks/logic.QIc_5A2T.js";import{D as gr}from"../chunks/DecimalInput.Cm1TA3Fp.js";import{E as ir}from"../chunks/ErrorMessage.BvpF5yI9.js";import{T as $r}from"../chunks/TextInput.DK6-oKIl.js";import{M as br}from"../chunks/Modal.DyG9b9uZ.js";import{v as vr}from"../chunks/v4.b0td5MfA.js";import{F as wr}from"../chunks/FormElement.Cd26lsYY.js";import{v as kr}from"../chunks/v4.D8aEg3BZ.js";import{R as Me}from"../chunks/Radio.B3rPOftU.js";function yr(n){let e,r,t;function l(a){n[9](a)}let i={label:n[0],hint:n[1],choices:n[5],emptyOption:n[2],disabled:n[3]};return n[4]!==void 0&&(i.value=n[4]),e=new dr({props:i}),te.push(()=>le(e,"value",l)),e.$on("change",n[6]),{c(){W(e.$$.fragment)},l(a){R(e.$$.fragment,a)},m(a,o){P(e,a,o),t=!0},p(a,[o]){const s={};o&1&&(s.label=a[0]),o&2&&(s.hint=a[1]),o&32&&(s.choices=a[5]),o&4&&(s.emptyOption=a[2]),o&8&&(s.disabled=a[3]),!r&&o&16&&(r=!0,s.value=a[4],ne(()=>r=!1)),e.$set(s)},i(a){t||(y(e.$$.fragment,a),t=!0)},o(a){T(e.$$.fragment,a),t=!1},d(a){O(e,a)}}}function Dr(n){return n.map(e=>[JSON.stringify(e[0]),e[1]])}function Tr(n,e,r){let t,l,{label:i}=e,{hint:a=""}=e,{choices:o}=e,{emptyOption:s=!1}=e,{disabled:f=!1}=e,{value:p}=e;function d(){r(7,p=l==""?"":JSON.parse(l))}function h($){l=$,r(4,l),r(7,p)}return n.$$set=$=>{"label"in $&&r(0,i=$.label),"hint"in $&&r(1,a=$.hint),"choices"in $&&r(8,o=$.choices),"emptyOption"in $&&r(2,s=$.emptyOption),"disabled"in $&&r(3,f=$.disabled),"value"in $&&r(7,p=$.value)},n.$$.update=()=>{n.$$.dirty&256&&r(5,t=Dr(o)),n.$$.dirty&128&&r(4,l=JSON.stringify(p))},[i,a,s,f,l,t,d,p,o,h]}class Sr extends ke{constructor(e){super(),ye(this,e,Tr,yr,we,{label:0,hint:1,choices:8,emptyOption:2,disabled:3,value:7})}}function Fr(n){let e,r,t,l,i,a,o;return e=new ir({props:{errorMessage:n[5](n[2])}}),{c(){W(e.$$.fragment),r=C(),t=E("input"),this.h()},l(s){R(e.$$.fragment,s),r=L(s),t=N(s,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){X(t,"type","text"),X(t,"inputmode","numeric"),X(t,"class",l=`govuk-input govuk-input--width-${n[1]}`),X(t,"id",n[3])},m(s,f){P(e,s,f),S(s,r,f),S(s,t,f),Lt(t,n[2]),i=!0,a||(o=[Et(t,"input",n[9]),Et(t,"change",n[4])],a=!0)},p(s,f){const p={};f&4&&(p.errorMessage=s[5](s[2])),e.$set(p),(!i||f&2&&l!==(l=`govuk-input govuk-input--width-${s[1]}`))&&X(t,"class",l),f&4&&t.value!==s[2]&&Lt(t,s[2])},i(s){i||(y(e.$$.fragment,s),i=!0)},o(s){T(e.$$.fragment,s),i=!1},d(s){s&&(_(r),_(t)),O(e,s),a=!1,sr(o)}}}function Cr(n){let e,r;return e=new wr({props:{label:n[0],id:n[3],$$slots:{default:[Fr]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){P(e,t,l),r=!0},p(t,[l]){const i={};l&1&&(i.label=t[0]),l&1030&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){O(e,t)}}}function Lr(n,e,r){let{label:t}=e,{value:l}=e,{width:i}=e,{min:a=void 0}=e,{max:o=void 0}=e,s=l==null?void 0:l.toString(),f=kr();function p(){r(6,l=s==null?void 0:parseInt(s,10))}function d($){if($==""||$==null)return"";if($.includes("."))return"Please enter a number without decimals";let b=Number($);return isNaN(b)?"Please enter a valid number":a!=null&&b<a?`Please enter a number that's at least ${a};`:o!=null&&b>o?`Please enter a number that's at most ${o};`:""}function h(){s=this.value,r(2,s)}return n.$$set=$=>{"label"in $&&r(0,t=$.label),"value"in $&&r(6,l=$.value),"width"in $&&r(1,i=$.width),"min"in $&&r(7,a=$.min),"max"in $&&r(8,o=$.max)},[t,i,s,f,p,d,l,a,o,h]}class Er extends ke{constructor(e){super(),ye(this,e,Lr,Cr,we,{label:0,value:6,width:1,min:7,max:8})}}function Nt(n){return typeof n=="object"||n==""?[]:Nr[n]}let Nr={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",ae(76)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",ae(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",ae(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",ae(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",ae(54)]]};function ae(n){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${n}`}function Mt(n,e){let r=lr(e.speedLimit,e.observedSpeed);switch(n){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&r==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&r==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return r==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":r==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":r==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return r==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":r==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":r==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Wt(n,e,r){const t=n.slice();return t[19]=e[r],t[21]=r,t}function Rt(n,e,r){const t=n.slice();return t[19]=e[r],t[21]=r,t}function Pt(n,e,r){const t=n.slice();return t[23]=e[r][0],t[24]=e[r][1],t}function Ot(n,e,r){const t=n.slice();t[19]=e[r],t[21]=r;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const i=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=i,t}function Bt(n,e,r){const t=n.slice();t[19]=e[r],t[21]=r;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const i=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=i,t}function It(n,e,r){const t=n.slice();t[19]=e[r],t[21]=r;const l=t[21]==0?"":t[0][t[21]-1];t[27]=l;const i=t[21]==t[0].length-1?"":t[0][t[21]+1];t[28]=i;const a=_r(t[19],t[27],t[28]);return t[31]=a,t}function qt(n,e,r){const t=n.slice();return t[19]=e[r],t[33]=e,t[21]=r,t}function Vt(n,e,r){const t=n.slice();return t[34]=e[r],t[21]=r,t}function Mr(n){let e;return{c(){e=A("Add feature")},l(r){e=U(r,"Add feature")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Wr(n){let e;return{c(){e=A("←")},l(r){e=U(r,"←")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Rr(n){let e;return{c(){e=A("Delete")},l(r){e=U(r,"Delete")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Pr(n){let e;return{c(){e=A("→")},l(r){e=U(r,"→")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function jt(n,e){let r,t,l,i,a,o,s,f,p;function d(){return e[11](e[21])}l=new Oe({props:{disabled:e[21]==0,$$slots:{default:[Wr]},$$scope:{ctx:e}}}),l.$on("click",d);function h(){return e[12](e[21])}a=new nr({props:{$$slots:{default:[Rr]},$$scope:{ctx:e}}}),a.$on("click",h);function $(){return e[13](e[21])}return s=new Oe({props:{disabled:e[21]==e[0].length-1,$$slots:{default:[Pr]},$$scope:{ctx:e}}}),s.$on("click",$),{key:n,first:null,c(){r=E("td"),t=E("div"),W(l.$$.fragment),i=C(),W(a.$$.fragment),o=C(),W(s.$$.fragment),f=C(),this.h()},l(b){r=N(b,"TD",{class:!0});var m=B(r);t=N(m,"DIV",{style:!0});var D=B(t);R(l.$$.fragment,D),i=L(D),R(a.$$.fragment,D),o=L(D),R(s.$$.fragment,D),D.forEach(_),f=L(m),m.forEach(_),this.h()},h(){Re(t,"display","flex"),Re(t,"justify-content","space-between"),X(r,"class","svelte-18bftjb"),this.first=r},m(b,m){S(b,r,m),v(r,t),P(l,t,null),v(t,i),P(a,t,null),v(t,o),P(s,t,null),v(r,f),p=!0},p(b,m){e=b;const D={};m[0]&1&&(D.disabled=e[21]==0),m[1]&32&&(D.$$scope={dirty:m,ctx:e}),l.$set(D);const g={};m[1]&32&&(g.$$scope={dirty:m,ctx:e}),a.$set(g);const M={};m[0]&1&&(M.disabled=e[21]==e[0].length-1),m[1]&32&&(M.$$scope={dirty:m,ctx:e}),s.$set(M)},i(b){p||(y(l.$$.fragment,b),y(a.$$.fragment,b),y(s.$$.fragment,b),p=!0)},o(b){T(l.$$.fragment,b),T(a.$$.fragment,b),T(s.$$.fragment,b),p=!1},d(b){b&&_(r),O(l),O(a),O(s)}}}function At(n,e){let r,t,l,i,a;function o(f){e[14](f,e[19],e[33],e[21])}let s={label:"Street feature type",emptyOption:!0,choices:e[3]};return e[19]!==void 0&&(s.value=e[19]),t=new Sr({props:s}),te.push(()=>le(t,"value",o)),{key:n,first:null,c(){r=E("td"),W(t.$$.fragment),i=C(),this.h()},l(f){r=N(f,"TD",{class:!0});var p=B(r);R(t.$$.fragment,p),i=L(p),p.forEach(_),this.h()},h(){X(r,"class","svelte-18bftjb"),this.first=r},m(f,p){S(f,r,p),P(t,r,null),v(r,i),a=!0},p(f,p){e=f;const d={};p[0]&8&&(d.choices=e[3]),!l&&p[0]&1&&(l=!0,d.value=e[19],ne(()=>l=!1)),t.$set(d)},i(f){a||(y(t.$$.fragment,f),a=!0)},o(f){T(t.$$.fragment,f),a=!1},d(f){f&&_(r),O(t)}}}function Ut(n){let e,r;return e=new pr({props:{$$slots:{default:[Br]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){P(e,t,l),r=!0},p(t,l){const i={};l[0]&1|l[1]&32&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){O(e,t)}}}function Or(n){let e;return{c(){e=A("Add")},l(r){e=U(r,"Add")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Br(n){let e=n[31].warning+"",r,t,l,i;function a(){return n[15](n[21],n[31])}return l=new Oe({props:{style:"margin-bottom: 0px; float: right",$$slots:{default:[Or]},$$scope:{ctx:n}}}),l.$on("click",a),{c(){r=A(e),t=C(),W(l.$$.fragment)},l(o){r=U(o,e),t=L(o),R(l.$$.fragment,o)},m(o,s){S(o,r,s),S(o,t,s),P(l,o,s),i=!0},p(o,s){n=o,(!i||s[0]&1)&&e!==(e=n[31].warning+"")&&ce(r,e);const f={};s[1]&32&&(f.$$scope={dirty:s,ctx:n}),l.$set(f)},i(o){i||(y(l.$$.fragment,o),i=!0)},o(o){T(l.$$.fragment,o),i=!1},d(o){o&&(_(r),_(t)),O(l,o)}}}function Ht(n,e){let r,t,l,i=e[31].warning!=""&&Ut(e);return{key:n,first:null,c(){r=E("td"),i&&i.c(),t=C(),this.h()},l(a){r=N(a,"TD",{class:!0});var o=B(r);i&&i.l(o),t=L(o),o.forEach(_),this.h()},h(){X(r,"class","svelte-18bftjb"),this.first=r},m(a,o){S(a,r,o),i&&i.m(r,null),v(r,t),l=!0},p(a,o){e=a,e[31].warning!=""?i?(i.p(e,o),o[0]&1&&y(i,1)):(i=Ut(e),i.c(),y(i,1),i.m(r,t)):i&&(fe(),T(i,1,1,()=>{i=null}),ue())},i(a){l||(y(i),l=!0)},o(a){T(i),l=!1},d(a){a&&_(r),i&&i.d()}}}function Jt(n,e){let r,t=ot(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"",l,i;return{key:n,first:null,c(){r=E("td"),l=A(t),i=C(),this.h()},l(a){r=N(a,"TD",{class:!0});var o=B(r);l=U(o,t),i=L(o),o.forEach(_),this.h()},h(){X(r,"class","svelte-18bftjb"),this.first=r},m(a,o){S(a,r,o),v(r,l),v(r,i)},p(a,o){e=a,o[0]&3&&t!==(t=ot(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"")&&ce(l,t)},d(a){a&&_(r)}}}function zt(n,e){let r,t=ot(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"",l,i;return{key:n,first:null,c(){r=E("td"),l=A(t),i=C(),this.h()},l(a){r=N(a,"TD",{class:!0});var o=B(r);l=U(o,t),i=L(o),o.forEach(_),this.h()},h(){X(r,"class","svelte-18bftjb"),this.first=r},m(a,o){S(a,r,o),v(r,l),v(r,i)},p(a,o){e=a,o[0]&3&&t!==(t=ot(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"")&&ce(l,t)},d(a){a&&_(r)}}}function Ir(n){let e,r=n[23]+"",t;return{c(){e=E("li"),t=A(r)},l(l){e=N(l,"LI",{});var i=B(e);t=U(i,r),i.forEach(_)},m(l,i){S(l,e,i),v(e,t)},p(l,i){i[0]&1&&r!==(r=l[23]+"")&&ce(t,r)},i:Je,o:Je,d(l){l&&_(e)}}}function qr(n){let e,r,t;return r=new mr({props:{href:n[24],$$slots:{default:[Vr]},$$scope:{ctx:n}}}),{c(){e=E("li"),W(r.$$.fragment)},l(l){e=N(l,"LI",{});var i=B(e);R(r.$$.fragment,i),i.forEach(_)},m(l,i){S(l,e,i),P(r,e,null),t=!0},p(l,i){const a={};i[0]&1&&(a.href=l[24]),i[0]&1|i[1]&32&&(a.$$scope={dirty:i,ctx:l}),r.$set(a)},i(l){t||(y(r.$$.fragment,l),t=!0)},o(l){T(r.$$.fragment,l),t=!1},d(l){l&&_(e),O(r)}}}function Vr(n){let e=n[23]+"",r;return{c(){r=A(e)},l(t){r=U(t,e)},m(t,l){S(t,r,l)},p(t,l){l[0]&1&&e!==(e=t[23]+"")&&ce(r,e)},d(t){t&&_(r)}}}function Gt(n){let e,r,t,l;const i=[qr,Ir],a=[];function o(s,f){return s[24]?0:1}return e=o(n),r=a[e]=i[e](n),{c(){r.c(),t=Pe()},l(s){r.l(s),t=Pe()},m(s,f){a[e].m(s,f),S(s,t,f),l=!0},p(s,f){let p=e;e=o(s),e===p?a[e].p(s,f):(fe(),T(a[p],1,1,()=>{a[p]=null}),ue(),r=a[e],r?r.p(s,f):(r=a[e]=i[e](s),r.c()),y(r,1),r.m(t.parentNode,t))},i(s){l||(y(r),l=!0)},o(s){T(r),l=!1},d(s){s&&_(t),a[e].d(s)}}}function Kt(n,e){let r,t,l,i,a=G(Nt(e[19])),o=[];for(let f=0;f<a.length;f+=1)o[f]=Gt(Pt(e,a,f));const s=f=>T(o[f],1,1,()=>{o[f]=null});return{key:n,first:null,c(){r=E("td"),t=E("ul");for(let f=0;f<o.length;f+=1)o[f].c();l=C(),this.h()},l(f){r=N(f,"TD",{class:!0});var p=B(r);t=N(p,"UL",{});var d=B(t);for(let h=0;h<o.length;h+=1)o[h].l(d);d.forEach(_),l=L(p),p.forEach(_),this.h()},h(){X(r,"class","svelte-18bftjb"),this.first=r},m(f,p){S(f,r,p),v(r,t);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(t,null);v(r,l),i=!0},p(f,p){if(e=f,p[0]&1){a=G(Nt(e[19]));let d;for(d=0;d<a.length;d+=1){const h=Pt(e,a,d);o[d]?(o[d].p(h,p),y(o[d],1)):(o[d]=Gt(h),o[d].c(),y(o[d],1),o[d].m(t,null))}for(fe(),d=a.length;d<o.length;d+=1)s(d);ue()}},i(f){if(!i){for(let p=0;p<a.length;p+=1)y(o[p]);i=!0}},o(f){o=o.filter(Boolean);for(let p=0;p<o.length;p+=1)T(o[p]);i=!1},d(f){f&&_(r),fr(o,f)}}}function Yt(n,e){let r,t,l=Mt(e[19],e[1].proposed.trafficData)+"",i,a;return{key:n,first:null,c(){r=E("td"),t=E("p"),i=A(l),a=C(),this.h()},l(o){r=N(o,"TD",{class:!0});var s=B(r);t=N(s,"P",{style:!0});var f=B(t);i=U(f,l),f.forEach(_),a=L(s),s.forEach(_),this.h()},h(){Re(t,"max-width","400px"),X(r,"class","svelte-18bftjb"),this.first=r},m(o,s){S(o,r,s),v(r,t),v(t,i),v(r,a)},p(o,s){e=o,s[0]&3&&l!==(l=Mt(e[19],e[1].proposed.trafficData)+"")&&ce(i,l)},d(o){o&&_(r)}}}function jr(n){let e,r,t,l,i,a=n[4][0].toFixed(2)+"",o,s,f,p,d,h=n[4][1].toFixed(2)+"",$,b,m,D,g,M,Q,V=[],se=new Map,F,I,Y,oe="Street Feature",Be,J=[],Ge=new Map,De,de,me,Ke="Buffers",Te,q=[],Ye=new Map,Se,pe,he,Qe="Desirable minimum width (m)",Fe,k=[],z=new Map,Z,H,_e,Ie="Absolute minimum width (m)",Ce,x=[],qe=new Map,ft,ge,Le,_t="References",ut,ee=[],gt=new Map,ct,$e,Ee,$t="Guidance",dt,ie=[],bt=new Map,Ne;e=new ht({props:{$$slots:{default:[Mr]},$$scope:{ctx:n}}}),e.$on("click",n[5]);let Ve=G(n[0]);const vt=u=>u[21];for(let u=0;u<Ve.length;u+=1){let c=Vt(n,Ve,u),w=vt(c);se.set(w,V[u]=jt(w,c))}let je=G(n[0]);const wt=u=>u[21];for(let u=0;u<je.length;u+=1){let c=qt(n,je,u),w=wt(c);Ge.set(w,J[u]=At(w,c))}let Ae=G(n[0]);const kt=u=>u[21];for(let u=0;u<Ae.length;u+=1){let c=It(n,Ae,u),w=kt(c);Ye.set(w,q[u]=Ht(w,c))}let Xe=G(n[0]);const yt=u=>u[21];for(let u=0;u<Xe.length;u+=1){let c=Bt(n,Xe,u),w=yt(c);z.set(w,k[u]=Jt(w,c))}let Ze=G(n[0]);const Dt=u=>u[21];for(let u=0;u<Ze.length;u+=1){let c=Ot(n,Ze,u),w=Dt(c);qe.set(w,x[u]=zt(w,c))}let Ue=G(n[0]);const Tt=u=>u[21];for(let u=0;u<Ue.length;u+=1){let c=Rt(n,Ue,u),w=Tt(c);gt.set(w,ee[u]=Kt(w,c))}let xe=G(n[0]);const St=u=>u[21];for(let u=0;u<xe.length;u+=1){let c=Wt(n,xe,u),w=St(c);bt.set(w,ie[u]=Yt(w,c))}return{c(){W(e.$$.fragment),r=C(),t=E("p"),l=A("Desirable minimum total width required (m): "),i=E("b"),o=A(a),s=C(),f=E("p"),p=A("Absolute minimum total width required (m): "),d=E("b"),$=A(h),b=C(),m=E("div"),D=E("table"),g=E("tr"),M=E("td"),Q=C();for(let u=0;u<V.length;u+=1)V[u].c();F=C(),I=E("tr"),Y=E("th"),Y.textContent=oe,Be=C();for(let u=0;u<J.length;u+=1)J[u].c();De=C(),de=E("tr"),me=E("th"),me.textContent=Ke,Te=C();for(let u=0;u<q.length;u+=1)q[u].c();Se=C(),pe=E("tr"),he=E("th"),he.textContent=Qe,Fe=C();for(let u=0;u<k.length;u+=1)k[u].c();Z=C(),H=E("tr"),_e=E("th"),_e.textContent=Ie,Ce=C();for(let u=0;u<x.length;u+=1)x[u].c();ft=C(),ge=E("tr"),Le=E("th"),Le.textContent=_t,ut=C();for(let u=0;u<ee.length;u+=1)ee[u].c();ct=C(),$e=E("tr"),Ee=E("th"),Ee.textContent=$t,dt=C();for(let u=0;u<ie.length;u+=1)ie[u].c();this.h()},l(u){R(e.$$.fragment,u),r=L(u),t=N(u,"P",{});var c=B(t);l=U(c,"Desirable minimum total width required (m): "),i=N(c,"B",{});var w=B(i);o=U(w,a),w.forEach(_),c.forEach(_),s=L(u),f=N(u,"P",{});var pt=B(f);p=U(pt,"Absolute minimum total width required (m): "),d=N(pt,"B",{});var Ft=B(d);$=U(Ft,h),Ft.forEach(_),pt.forEach(_),b=L(u),m=N(u,"DIV",{style:!0});var Ct=B(m);D=N(Ct,"TABLE",{});var re=B(D);g=N(re,"TR",{});var et=B(g);M=N(et,"TD",{class:!0}),B(M).forEach(_),Q=L(et);for(let j=0;j<V.length;j+=1)V[j].l(et);et.forEach(_),F=L(re),I=N(re,"TR",{});var tt=B(I);Y=N(tt,"TH",{"data-svelte-h":!0}),ve(Y)!=="svelte-16tcugb"&&(Y.textContent=oe),Be=L(tt);for(let j=0;j<J.length;j+=1)J[j].l(tt);tt.forEach(_),De=L(re),de=N(re,"TR",{});var rt=B(de);me=N(rt,"TH",{"data-svelte-h":!0}),ve(me)!=="svelte-11hw9wb"&&(me.textContent=Ke),Te=L(rt);for(let j=0;j<q.length;j+=1)q[j].l(rt);rt.forEach(_),Se=L(re),pe=N(re,"TR",{});var nt=B(pe);he=N(nt,"TH",{"data-svelte-h":!0}),ve(he)!=="svelte-i7hz1h"&&(he.textContent=Qe),Fe=L(nt);for(let j=0;j<k.length;j+=1)k[j].l(nt);nt.forEach(_),Z=L(re),H=N(re,"TR",{});var lt=B(H);_e=N(lt,"TH",{"data-svelte-h":!0}),ve(_e)!=="svelte-zhiq21"&&(_e.textContent=Ie),Ce=L(lt);for(let j=0;j<x.length;j+=1)x[j].l(lt);lt.forEach(_),ft=L(re),ge=N(re,"TR",{});var it=B(ge);Le=N(it,"TH",{"data-svelte-h":!0}),ve(Le)!=="svelte-o075z0"&&(Le.textContent=_t),ut=L(it);for(let j=0;j<ee.length;j+=1)ee[j].l(it);it.forEach(_),ct=L(re),$e=N(re,"TR",{});var at=B($e);Ee=N(at,"TH",{"data-svelte-h":!0}),ve(Ee)!=="svelte-pnu4jc"&&(Ee.textContent=$t),dt=L(at);for(let j=0;j<ie.length;j+=1)ie[j].l(at);at.forEach(_),re.forEach(_),Ct.forEach(_),this.h()},h(){X(M,"class","svelte-18bftjb"),Re(m,"display","flex"),Re(m,"flex-direction","row"),Re(m,"overflow-x","scroll")},m(u,c){P(e,u,c),S(u,r,c),S(u,t,c),v(t,l),v(t,i),v(i,o),S(u,s,c),S(u,f,c),v(f,p),v(f,d),v(d,$),S(u,b,c),S(u,m,c),v(m,D),v(D,g),v(g,M),v(g,Q);for(let w=0;w<V.length;w+=1)V[w]&&V[w].m(g,null);v(D,F),v(D,I),v(I,Y),v(I,Be);for(let w=0;w<J.length;w+=1)J[w]&&J[w].m(I,null);v(D,De),v(D,de),v(de,me),v(de,Te);for(let w=0;w<q.length;w+=1)q[w]&&q[w].m(de,null);v(D,Se),v(D,pe),v(pe,he),v(pe,Fe);for(let w=0;w<k.length;w+=1)k[w]&&k[w].m(pe,null);v(D,Z),v(D,H),v(H,_e),v(H,Ce);for(let w=0;w<x.length;w+=1)x[w]&&x[w].m(H,null);v(D,ft),v(D,ge),v(ge,Le),v(ge,ut);for(let w=0;w<ee.length;w+=1)ee[w]&&ee[w].m(ge,null);v(D,ct),v(D,$e),v($e,Ee),v($e,dt);for(let w=0;w<ie.length;w+=1)ie[w]&&ie[w].m($e,null);n[16](m),Ne=!0},p(u,c){const w={};c[1]&32&&(w.$$scope={dirty:c,ctx:u}),e.$set(w),(!Ne||c[0]&16)&&a!==(a=u[4][0].toFixed(2)+"")&&ce(o,a),(!Ne||c[0]&16)&&h!==(h=u[4][1].toFixed(2)+"")&&ce($,h),c[0]&449&&(Ve=G(u[0]),fe(),V=be(V,c,vt,1,u,Ve,se,g,He,jt,null,Vt),ue()),c[0]&9&&(je=G(u[0]),fe(),J=be(J,c,wt,1,u,je,Ge,I,He,At,null,qt),ue()),c[0]&513&&(Ae=G(u[0]),fe(),q=be(q,c,kt,1,u,Ae,Ye,de,He,Ht,null,It),ue()),c[0]&3&&(Xe=G(u[0]),k=be(k,c,yt,1,u,Xe,z,pe,mt,Jt,null,Bt)),c[0]&3&&(Ze=G(u[0]),x=be(x,c,Dt,1,u,Ze,qe,H,mt,zt,null,Ot)),c[0]&1&&(Ue=G(u[0]),fe(),ee=be(ee,c,Tt,1,u,Ue,gt,ge,He,Kt,null,Rt),ue()),c[0]&3&&(xe=G(u[0]),ie=be(ie,c,St,1,u,xe,bt,$e,mt,Yt,null,Wt))},i(u){if(!Ne){y(e.$$.fragment,u);for(let c=0;c<Ve.length;c+=1)y(V[c]);for(let c=0;c<je.length;c+=1)y(J[c]);for(let c=0;c<Ae.length;c+=1)y(q[c]);for(let c=0;c<Ue.length;c+=1)y(ee[c]);Ne=!0}},o(u){T(e.$$.fragment,u);for(let c=0;c<V.length;c+=1)T(V[c]);for(let c=0;c<J.length;c+=1)T(J[c]);for(let c=0;c<q.length;c+=1)T(q[c]);for(let c=0;c<ee.length;c+=1)T(ee[c]);Ne=!1},d(u){u&&(_(r),_(t),_(s),_(f),_(b),_(m)),O(e,u);for(let c=0;c<V.length;c+=1)V[c].d();for(let c=0;c<J.length;c+=1)J[c].d();for(let c=0;c<q.length;c+=1)q[c].d();for(let c=0;c<k.length;c+=1)k[c].d();for(let c=0;c<x.length;c+=1)x[c].d();for(let c=0;c<ee.length;c+=1)ee[c].d();for(let c=0;c<ie.length;c+=1)ie[c].d();n[16](null)}}}function Ar(n,e,r){let t,l,i;ze(n,K,F=>r(1,i=F));let{streetFeaturesLeftToRight:a}=e,{sectionType:o}=e,s,f=!1;or(()=>{f&&(f=!1,r(2,s.scrollLeft=s.scrollWidth,s))});function p(){r(0,a=[...a,""]),f=!0}function d(F){a.splice(F,1),r(0,a)}function h(F){r(0,[a[F-1],a[F]]=[a[F],a[F-1]],a)}function $(F){r(0,[a[F+1],a[F]]=[a[F],a[F+1]],a)}function b(F){let I=rr.map(Y=>[Y,Y]);for(let[Y,oe]of Object.entries(F))I.push([{custom:Y},`Custom: ${oe.name}`]);return I}function m(F,I){(I=="right"||I=="both")&&a.splice(F+1,0,"Buffer / Verge"),(I=="left"||I=="both")&&a.splice(F,0,"Buffer / Verge"),r(0,a)}const D=F=>h(F),g=F=>d(F),M=F=>$(F);function Q(F,I,Y,oe){Y[oe]=F,r(0,a)}const V=(F,I)=>m(F,I.fix);function se(F){te[F?"unshift":"push"](()=>{s=F,r(2,s)})}return n.$$set=F=>{"streetFeaturesLeftToRight"in F&&r(0,a=F.streetFeaturesLeftToRight),"sectionType"in F&&r(10,o=F.sectionType)},n.$$.update=()=>{n.$$.dirty[0]&1026&&r(4,t=hr(i,o)),n.$$.dirty[0]&2&&r(3,l=b(i.proposed.customFeatures))},[a,i,s,l,t,p,d,h,$,m,o,D,g,M,Q,V,se]}class ar extends ke{constructor(e){super(),ye(this,e,Ar,jr,we,{streetFeaturesLeftToRight:0,sectionType:10},null,[-1,-1])}}function Ur(n){let e;return{c(){e=A("Confirm")},l(r){e=U(r,"Confirm")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Hr(n){let e;return{c(){e=A("Cancel")},l(r){e=U(r,"Cancel")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Jr(n){let e,r,t,l,i,a,o,s,f,p,d,h;function $(g){n[6](g)}let b={label:"Name"};n[0]!==void 0&&(b.value=n[0]),e=new $r({props:b}),te.push(()=>le(e,"value",$));function m(g){n[7](g)}let D={label:"Minimum width (m)",width:4,min:0};return n[1]!==void 0&&(D.value=n[1]),l=new gr({props:D}),te.push(()=>le(l,"value",m)),o=new ir({props:{errorMessage:n[2]}}),f=new ht({props:{disabled:n[2]!="",$$slots:{default:[Ur]},$$scope:{ctx:n}}}),f.$on("click",n[8]),d=new Oe({props:{$$slots:{default:[Hr]},$$scope:{ctx:n}}}),d.$on("click",n[9]),{c(){W(e.$$.fragment),t=C(),W(l.$$.fragment),a=C(),W(o.$$.fragment),s=C(),W(f.$$.fragment),p=C(),W(d.$$.fragment)},l(g){R(e.$$.fragment,g),t=L(g),R(l.$$.fragment,g),a=L(g),R(o.$$.fragment,g),s=L(g),R(f.$$.fragment,g),p=L(g),R(d.$$.fragment,g)},m(g,M){P(e,g,M),S(g,t,M),P(l,g,M),S(g,a,M),P(o,g,M),S(g,s,M),P(f,g,M),S(g,p,M),P(d,g,M),h=!0},p(g,M){const Q={};!r&&M&1&&(r=!0,Q.value=g[0],ne(()=>r=!1)),e.$set(Q);const V={};!i&&M&2&&(i=!0,V.value=g[1],ne(()=>i=!1)),l.$set(V);const se={};M&4&&(se.errorMessage=g[2]),o.$set(se);const F={};M&4&&(F.disabled=g[2]!=""),M&4096&&(F.$$scope={dirty:M,ctx:g}),f.$set(F);const I={};M&4096&&(I.$$scope={dirty:M,ctx:g}),d.$set(I)},i(g){h||(y(e.$$.fragment,g),y(l.$$.fragment,g),y(o.$$.fragment,g),y(f.$$.fragment,g),y(d.$$.fragment,g),h=!0)},o(g){T(e.$$.fragment,g),T(l.$$.fragment,g),T(o.$$.fragment,g),T(f.$$.fragment,g),T(d.$$.fragment,g),h=!1},d(g){g&&(_(t),_(a),_(s),_(p)),O(e,g),O(l,g),O(o,g),O(f,g),O(d,g)}}}function zr(n){let e,r;return e=new br({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[Jr]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){P(e,t,l),r=!0},p(t,[l]){const i={};l&4103&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){O(e,t)}}}function Gr(n,e,r){let t,l;ze(n,K,m=>r(10,l=m));let{initialName:i}=e,{initialWidth:a}=e,o=ur(),s=i,f=a;function p(m,D){return m==""?"Name must be specified":m!=i&&Object.values(l.proposed.customFeatures).some(g=>g.name==m)?"That name is already used by another custom feature":rr.includes(m)?"That name is the same as one of the built-in features":isNaN(D)?"Enter a valid width":D<=0?"Enter a positive width":""}function d(m){s=m,r(0,s)}function h(m){f=m,r(1,f)}const $=()=>o("confirm",{name:s,width:f}),b=()=>o("cancel");return n.$$set=m=>{"initialName"in m&&r(4,i=m.initialName),"initialWidth"in m&&r(5,a=m.initialWidth)},n.$$.update=()=>{n.$$.dirty&3&&r(2,t=p(s,f))},[s,f,t,o,i,a,d,h,$,b]}class Kr extends ke{constructor(e){super(),ye(this,e,Gr,zr,we,{initialName:4,initialWidth:5})}}function Qt(n,e,r){const t=n.slice();return t[9]=e[r],t}function Yr(n){let e;return{c(){e=A("Add custom feature")},l(r){e=U(r,"Add custom feature")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Qr(n){let e,r=n[1].proposed.customFeatures[n[9]].name+"",t,l,i=n[1].proposed.customFeatures[n[9]].width+"",a,o;return{c(){e=E("u"),t=A(r),l=A(`
      : `),a=A(i),o=A(" m minimum width")},l(s){e=N(s,"U",{});var f=B(e);t=U(f,r),f.forEach(_),l=U(s,`
      : `),a=U(s,i),o=U(s," m minimum width")},m(s,f){S(s,e,f),v(e,t),S(s,l,f),S(s,a,f),S(s,o,f)},p(s,f){f&2&&r!==(r=s[1].proposed.customFeatures[s[9]].name+"")&&ce(t,r),f&2&&i!==(i=s[1].proposed.customFeatures[s[9]].width+"")&&ce(a,i)},d(s){s&&(_(e),_(l),_(a),_(o))}}}function Xr(n){let e;return{c(){e=A("Delete")},l(r){e=U(r,"Delete")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Xt(n,e){let r,t,l,i,a;function o(){return e[6](e[9])}t=new Oe({props:{$$slots:{default:[Qr]},$$scope:{ctx:e}}}),t.$on("click",o);function s(){return e[7](e[9])}return i=new nr({props:{$$slots:{default:[Xr]},$$scope:{ctx:e}}}),i.$on("click",s),{key:n,first:null,c(){r=E("div"),W(t.$$.fragment),l=C(),W(i.$$.fragment),this.h()},l(f){r=N(f,"DIV",{});var p=B(r);R(t.$$.fragment,p),l=L(p),R(i.$$.fragment,p),p.forEach(_),this.h()},h(){this.first=r},m(f,p){S(f,r,p),P(t,r,null),v(r,l),P(i,r,null),a=!0},p(f,p){e=f;const d={};p&4098&&(d.$$scope={dirty:p,ctx:e}),t.$set(d);const h={};p&4096&&(h.$$scope={dirty:p,ctx:e}),i.$set(h)},i(f){a||(y(t.$$.fragment,f),y(i.$$.fragment,f),a=!0)},o(f){T(t.$$.fragment,f),T(i.$$.fragment,f),a=!1},d(f){f&&_(r),O(t),O(i)}}}function Zt(n){let e,r;return e=new Kr({props:{initialName:n[0].initialName,initialWidth:n[0].initialWidth}}),e.$on("cancel",n[8]),e.$on("confirm",n[5]),{c(){W(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){P(e,t,l),r=!0},p(t,l){const i={};l&1&&(i.initialName=t[0].initialName),l&1&&(i.initialWidth=t[0].initialWidth),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){O(e,t)}}}function Zr(n){let e,r,t=[],l=new Map,i,a,o;e=new ht({props:{$$slots:{default:[Yr]},$$scope:{ctx:n}}}),e.$on("click",n[2]);let s=G(Object.keys(n[1].proposed.customFeatures));const f=d=>d[9];for(let d=0;d<s.length;d+=1){let h=Qt(n,s,d),$=f(h);l.set($,t[d]=Xt($,h))}let p=n[0]&&Zt(n);return{c(){W(e.$$.fragment),r=C();for(let d=0;d<t.length;d+=1)t[d].c();i=C(),p&&p.c(),a=Pe()},l(d){R(e.$$.fragment,d),r=L(d);for(let h=0;h<t.length;h+=1)t[h].l(d);i=L(d),p&&p.l(d),a=Pe()},m(d,h){P(e,d,h),S(d,r,h);for(let $=0;$<t.length;$+=1)t[$]&&t[$].m(d,h);S(d,i,h),p&&p.m(d,h),S(d,a,h),o=!0},p(d,[h]){const $={};h&4096&&($.$$scope={dirty:h,ctx:d}),e.$set($),h&26&&(s=G(Object.keys(d[1].proposed.customFeatures)),fe(),t=be(t,h,f,1,d,s,l,i.parentNode,He,Xt,i,Qt),ue()),d[0]?p?(p.p(d,h),h&1&&y(p,1)):(p=Zt(d),p.c(),y(p,1),p.m(a.parentNode,a)):p&&(fe(),T(p,1,1,()=>{p=null}),ue())},i(d){if(!o){y(e.$$.fragment,d);for(let h=0;h<s.length;h+=1)y(t[h]);y(p),o=!0}},o(d){T(e.$$.fragment,d);for(let h=0;h<t.length;h+=1)T(t[h]);T(p),o=!1},d(d){d&&(_(r),_(i),_(a)),O(e,d);for(let h=0;h<t.length;h+=1)t[h].d(d);p&&p.d(d)}}}function xr(n,e,r){let t;ze(n,K,h=>r(1,t=h));let l=null;function i(){r(0,l={id:vr(),initialName:"",initialWidth:0})}function a(h){let $=t.proposed.customFeatures[h].name,b=JSON.stringify({custom:h});if(t.proposed.desirableMinimumCrossSection.some(m=>JSON.stringify(m)==b)){window.alert(`The ${$} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(t.proposed.absoluteMinimumCrossSection.some(m=>JSON.stringify(m)==b)){window.alert(`The ${$} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete t.proposed.customFeatures[h],K.set(t)}function o(h){r(0,l={id:h,initialName:t.proposed.customFeatures[h].name,initialWidth:t.proposed.customFeatures[h].width})}function s(h){tr(K,t.proposed.customFeatures[l.id]={name:h.detail.name,width:h.detail.width},t),K.set(t),r(0,l=null)}return[l,t,i,a,o,s,h=>o(h),h=>a(h),()=>r(0,l=null)]}class en extends ke{constructor(e){super(),ye(this,e,xr,Zr,we,{})}}function xt(n){let e,r,t,l,i;return{c(){e=E("p"),r=E("i"),t=A("Effective speed limit, based on the limit and 85 percentile: "),l=A(n[1]),i=A(`
            mph`)},l(a){e=N(a,"P",{});var o=B(e);r=N(o,"I",{});var s=B(r);t=U(s,"Effective speed limit, based on the limit and 85 percentile: "),l=U(s,n[1]),i=U(s,`
            mph`),s.forEach(_),o.forEach(_)},m(a,o){S(a,e,o),v(e,r),v(r,t),v(r,l),v(r,i)},p(a,o){o&2&&ce(l,a[1])},d(a){a&&_(e)}}}function tn(n){let e,r,t,l,i,a,o,s,f,p,d,h,$,b,m,D,g,M,Q,V,se,F,I,Y,oe;function Be(k){n[4](k)}let J={label:"Expected peak hour cycle flow: 1-way cycle tracks",inlineSmall:!0,choices:We(["<200","200-800",">800"])};n[0].proposed.trafficData.flowOneWay!==void 0&&(J.value=n[0].proposed.trafficData.flowOneWay),t=new Me({props:J}),te.push(()=>le(t,"value",Be));function Ge(k){n[5](k)}let De={label:"Expected peak hour cycle flow: 2-way cycle tracks",inlineSmall:!0,choices:We(["<300","300-1,000",">1,000"])};n[0].proposed.trafficData.flowTwoWay!==void 0&&(De.value=n[0].proposed.trafficData.flowTwoWay),a=new Me({props:De}),te.push(()=>le(a,"value",Ge));function de(k){n[6](k)}let me={label:"Expected peak hour cycle flow: shared use cycle tracks",inlineSmall:!0,choices:We(["<300",">300"])};n[0].proposed.trafficData.flowSharedUse!==void 0&&(me.value=n[0].proposed.trafficData.flowSharedUse),f=new Me({props:me}),te.push(()=>le(f,"value",de));function Ke(k){n[7](k)}let Te={label:"Traffic flow (vpd)",inlineSmall:!0,choices:We(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};n[0].proposed.trafficData.trafficFlow!==void 0&&(Te.value=n[0].proposed.trafficData.trafficFlow),h=new Me({props:Te}),te.push(()=>le(h,"value",Ke));let q=n[1]&&xt(n);function Ye(k){n[8](k)}let Se={label:"Speed limit (MPH)",inlineSmall:!0,choices:n[2]};n[0].proposed.trafficData.speedLimit!==void 0&&(Se.value=n[0].proposed.trafficData.speedLimit),g=new Me({props:Se}),te.push(()=>le(g,"value",Ye));function pe(k){n[9](k)}let he={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};n[0].proposed.trafficData.observedSpeed!==void 0&&(he.value=n[0].proposed.trafficData.observedSpeed),V=new Er({props:he}),te.push(()=>le(V,"value",pe));function Qe(k){n[10](k)}let Fe={label:"Street function",inlineSmall:!0,choices:We(["High Street (active frontages)","Residential street","Local distributor road"])};return n[0].proposed.trafficData.streetFunction!==void 0&&(Fe.value=n[0].proposed.trafficData.streetFunction),I=new Me({props:Fe}),te.push(()=>le(I,"value",Qe)),{c(){e=E("div"),r=E("div"),W(t.$$.fragment),i=C(),W(a.$$.fragment),s=C(),W(f.$$.fragment),d=C(),W(h.$$.fragment),b=C(),m=E("div"),q&&q.c(),D=C(),W(g.$$.fragment),Q=C(),W(V.$$.fragment),F=C(),W(I.$$.fragment),this.h()},l(k){e=N(k,"DIV",{class:!0});var z=B(e);r=N(z,"DIV",{class:!0});var Z=B(r);R(t.$$.fragment,Z),i=L(Z),R(a.$$.fragment,Z),s=L(Z),R(f.$$.fragment,Z),d=L(Z),R(h.$$.fragment,Z),Z.forEach(_),b=L(z),m=N(z,"DIV",{class:!0});var H=B(m);q&&q.l(H),D=L(H),R(g.$$.fragment,H),Q=L(H),R(V.$$.fragment,H),F=L(H),R(I.$$.fragment,H),H.forEach(_),z.forEach(_),this.h()},h(){X(r,"class","govuk-grid-column-one-half"),X(m,"class","govuk-grid-column-one-half"),X(e,"class","govuk-grid-row")},m(k,z){S(k,e,z),v(e,r),P(t,r,null),v(r,i),P(a,r,null),v(r,s),P(f,r,null),v(r,d),P(h,r,null),v(e,b),v(e,m),q&&q.m(m,null),v(m,D),P(g,m,null),v(m,Q),P(V,m,null),v(m,F),P(I,m,null),oe=!0},p(k,z){const Z={};!l&&z&1&&(l=!0,Z.value=k[0].proposed.trafficData.flowOneWay,ne(()=>l=!1)),t.$set(Z);const H={};!o&&z&1&&(o=!0,H.value=k[0].proposed.trafficData.flowTwoWay,ne(()=>o=!1)),a.$set(H);const _e={};!p&&z&1&&(p=!0,_e.value=k[0].proposed.trafficData.flowSharedUse,ne(()=>p=!1)),f.$set(_e);const Ie={};!$&&z&1&&($=!0,Ie.value=k[0].proposed.trafficData.trafficFlow,ne(()=>$=!1)),h.$set(Ie),k[1]?q?q.p(k,z):(q=xt(k),q.c(),q.m(m,D)):q&&(q.d(1),q=null);const Ce={};!M&&z&1&&(M=!0,Ce.value=k[0].proposed.trafficData.speedLimit,ne(()=>M=!1)),g.$set(Ce);const x={};!se&&z&1&&(se=!0,x.value=k[0].proposed.trafficData.observedSpeed,ne(()=>se=!1)),V.$set(x);const qe={};!Y&&z&1&&(Y=!0,qe.value=k[0].proposed.trafficData.streetFunction,ne(()=>Y=!1)),I.$set(qe)},i(k){oe||(y(t.$$.fragment,k),y(a.$$.fragment,k),y(f.$$.fragment,k),y(h.$$.fragment,k),y(g.$$.fragment,k),y(V.$$.fragment,k),y(I.$$.fragment,k),oe=!0)},o(k){T(t.$$.fragment,k),T(a.$$.fragment,k),T(f.$$.fragment,k),T(h.$$.fragment,k),T(g.$$.fragment,k),T(V.$$.fragment,k),T(I.$$.fragment,k),oe=!1},d(k){k&&_(e),O(t),O(a),O(f),O(h),q&&q.d(),O(g),O(V),O(I)}}}function rn(n){let e,r;return e=new st({props:{label:"Traffic data and additional information",open:!0,$$slots:{default:[tn]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){P(e,t,l),r=!0},p(t,[l]){const i={};l&2051&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){O(e,t)}}}function nn(n,e,r){let t,l;ze(n,K,b=>r(0,l=b));let{valid:i}=e,a=We(cr);function o(b){n.$$.not_equal(l.proposed.trafficData.flowOneWay,b)&&(l.proposed.trafficData.flowOneWay=b,K.set(l))}function s(b){n.$$.not_equal(l.proposed.trafficData.flowTwoWay,b)&&(l.proposed.trafficData.flowTwoWay=b,K.set(l))}function f(b){n.$$.not_equal(l.proposed.trafficData.flowSharedUse,b)&&(l.proposed.trafficData.flowSharedUse=b,K.set(l))}function p(b){n.$$.not_equal(l.proposed.trafficData.trafficFlow,b)&&(l.proposed.trafficData.trafficFlow=b,K.set(l))}function d(b){n.$$.not_equal(l.proposed.trafficData.speedLimit,b)&&(l.proposed.trafficData.speedLimit=b,K.set(l))}function h(b){n.$$.not_equal(l.proposed.trafficData.observedSpeed,b)&&(l.proposed.trafficData.observedSpeed=b,K.set(l))}function $(b){n.$$.not_equal(l.proposed.trafficData.streetFunction,b)&&(l.proposed.trafficData.streetFunction=b,K.set(l))}return n.$$set=b=>{"valid"in b&&r(3,i=b.valid)},n.$$.update=()=>{n.$$.dirty&1&&r(3,i=l.proposed.trafficData.flowOneWay!=""&&l.proposed.trafficData.flowTwoWay!=""&&l.proposed.trafficData.flowSharedUse!=""&&l.proposed.trafficData.trafficFlow!=""&&l.proposed.trafficData.speedLimit!=""&&l.proposed.trafficData.observedSpeed!=null&&l.proposed.trafficData.streetFunction!=""),n.$$.dirty&1&&r(1,t=lr(l.proposed.trafficData.speedLimit,l.proposed.trafficData.observedSpeed))},[l,t,a,i,o,s,f,p,d,h,$]}class ln extends ke{constructor(e){super(),ye(this,e,nn,rn,we,{valid:3})}}function an(n){let e,r;return e=new en({}),{c(){W(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){P(e,t,l),r=!0},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){O(e,t)}}}function sn(n){let e,r="Fill out all traffic data above to continue";return{c(){e=E("p"),e.textContent=r},l(t){e=N(t,"P",{"data-svelte-h":!0}),ve(e)!=="svelte-72a5ry"&&(e.textContent=r)},m(t,l){S(t,e,l)},p:Je,i:Je,o:Je,d(t){t&&_(e)}}}function on(n){let e,r,t,l;return e=new st({props:{label:"Preferred Cross-Section",open:!0,$$slots:{default:[fn]},$$scope:{ctx:n}}}),t=new st({props:{label:"Compromised Cross-Section",open:!0,$$slots:{default:[cn]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment),r=C(),W(t.$$.fragment)},l(i){R(e.$$.fragment,i),r=L(i),R(t.$$.fragment,i)},m(i,a){P(e,i,a),S(i,r,a),P(t,i,a),l=!0},p(i,a){const o={};a&66&&(o.$$scope={dirty:a,ctx:i}),e.$set(o);const s={};a&66&&(s.$$scope={dirty:a,ctx:i}),t.$set(s)},i(i){l||(y(e.$$.fragment,i),y(t.$$.fragment,i),l=!0)},o(i){T(e.$$.fragment,i),T(t.$$.fragment,i),l=!1},d(i){i&&_(r),O(e,i),O(t,i)}}}function fn(n){let e,r,t;function l(a){n[4](a)}let i={sectionType:"Preferred"};return n[1].proposed.desirableMinimumCrossSection!==void 0&&(i.streetFeaturesLeftToRight=n[1].proposed.desirableMinimumCrossSection),e=new ar({props:i}),te.push(()=>le(e,"streetFeaturesLeftToRight",l)),{c(){W(e.$$.fragment)},l(a){R(e.$$.fragment,a)},m(a,o){P(e,a,o),t=!0},p(a,o){const s={};!r&&o&2&&(r=!0,s.streetFeaturesLeftToRight=a[1].proposed.desirableMinimumCrossSection,ne(()=>r=!1)),e.$set(s)},i(a){t||(y(e.$$.fragment,a),t=!0)},o(a){T(e.$$.fragment,a),t=!1},d(a){O(e,a)}}}function er(n){let e,r;return e=new Oe({props:{$$slots:{default:[un]},$$scope:{ctx:n}}}),e.$on("click",n[2]),{c(){W(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){P(e,t,l),r=!0},p(t,l){const i={};l&64&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){O(e,t)}}}function un(n){let e;return{c(){e=A("Copy Preferred")},l(r){e=U(r,"Copy Preferred")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function cn(n){let e,r,t,l,i=n[1].proposed.absoluteMinimumCrossSection.length==0&&er(n);function a(s){n[5](s)}let o={sectionType:"Compromised"};return n[1].proposed.absoluteMinimumCrossSection!==void 0&&(o.streetFeaturesLeftToRight=n[1].proposed.absoluteMinimumCrossSection),r=new ar({props:o}),te.push(()=>le(r,"streetFeaturesLeftToRight",a)),{c(){i&&i.c(),e=C(),W(r.$$.fragment)},l(s){i&&i.l(s),e=L(s),R(r.$$.fragment,s)},m(s,f){i&&i.m(s,f),S(s,e,f),P(r,s,f),l=!0},p(s,f){s[1].proposed.absoluteMinimumCrossSection.length==0?i?(i.p(s,f),f&2&&y(i,1)):(i=er(s),i.c(),y(i,1),i.m(e.parentNode,e)):i&&(fe(),T(i,1,1,()=>{i=null}),ue());const p={};!t&&f&2&&(t=!0,p.streetFeaturesLeftToRight=s[1].proposed.absoluteMinimumCrossSection,ne(()=>t=!1)),r.$set(p)},i(s){l||(y(i),y(r.$$.fragment,s),l=!0)},o(s){T(i),T(r.$$.fragment,s),l=!1},d(s){s&&_(e),i&&i.d(s),O(r,s)}}}function dn(n){let e,r,t,l,i,a,o,s,f;function p(m){n[3](m)}let d={};n[0]!==void 0&&(d.valid=n[0]),e=new ln({props:d}),te.push(()=>le(e,"valid",p)),l=new st({props:{label:"Custom Street Features",$$slots:{default:[an]},$$scope:{ctx:n}}});const h=[on,sn],$=[];function b(m,D){return m[0]?0:1}return a=b(n),o=$[a]=h[a](n),{c(){W(e.$$.fragment),t=C(),W(l.$$.fragment),i=C(),o.c(),s=Pe()},l(m){R(e.$$.fragment,m),t=L(m),R(l.$$.fragment,m),i=L(m),o.l(m),s=Pe()},m(m,D){P(e,m,D),S(m,t,D),P(l,m,D),S(m,i,D),$[a].m(m,D),S(m,s,D),f=!0},p(m,[D]){const g={};!r&&D&1&&(r=!0,g.valid=m[0],ne(()=>r=!1)),e.$set(g);const M={};D&64&&(M.$$scope={dirty:D,ctx:m}),l.$set(M);let Q=a;a=b(m),a===Q?$[a].p(m,D):(fe(),T($[Q],1,1,()=>{$[Q]=null}),ue(),o=$[a],o?o.p(m,D):(o=$[a]=h[a](m),o.c()),y(o,1),o.m(s.parentNode,s))},i(m){f||(y(e.$$.fragment,m),y(l.$$.fragment,m),y(o),f=!0)},o(m){T(e.$$.fragment,m),T(l.$$.fragment,m),T(o),f=!1},d(m){m&&(_(t),_(i),_(s)),O(e,m),O(l,m),$[a].d(m)}}}function pn(n,e,r){let t;ze(n,K,f=>r(1,t=f));let l=!1;function i(){tr(K,t.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(t.proposed.desirableMinimumCrossSection)),t)}function a(f){l=f,r(0,l)}function o(f){n.$$.not_equal(t.proposed.desirableMinimumCrossSection,f)&&(t.proposed.desirableMinimumCrossSection=f,K.set(t))}function s(f){n.$$.not_equal(t.proposed.absoluteMinimumCrossSection,f)&&(t.proposed.absoluteMinimumCrossSection=f,K.set(t))}return[l,t,i,a,o,s]}class In extends ke{constructor(e){super(),ye(this,e,pn,dn,we,{})}}export{In as component};
