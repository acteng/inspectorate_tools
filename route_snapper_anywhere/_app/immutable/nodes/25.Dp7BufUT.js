import{s as pe,a as S,w as X,c as T,i as b,d as h,x as me,k as de,t as ie,h as se,l as $e,r as D,v as W}from"../chunks/scheduler.Cns_Y-fU.js";import{S as _e,i as ge,c as y,a as k,m as C,t as v,f as ve,b as w,d as A,g as be,e as q}from"../chunks/index.B1sdSzhI.js";import{e as Z}from"../chunks/Geocoder.svelte_svelte_type_style_lang.MMiTdOl1.js";import{p as he}from"../chunks/index.Dnu7imyA.js";import{C as we}from"../chunks/CollapsibleCard.DYQ4B8hz.js";import{S as ye}from"../chunks/SecondaryButton.aZZSPwDr.js";import{S as x}from"../chunks/Select.D65_JAfX.js";import{T as ke}from"../chunks/TextArea.DODp0uDl.js";import{T as ee}from"../chunks/TextInput.8vA7YF52.js";import{W as Ce}from"../chunks/WarningButton.CSppIYFd.js";import{s as I}from"../chunks/data.BLC5LW6j.js";import{B as Ae}from"../chunks/Breadcrumbs.DcaTKjbK.js";import{Y as Be}from"../chunks/YesNo.CeGpJ8V5.js";function te(t,s,a){const n=t.slice();return n[11]=s[a],n[12]=s,n[13]=a,n}function Ie(t){let s;return{c(){s=ie("Add")},l(a){s=se(a,"Add")},m(a,n){b(a,s,n)},d(a){a&&h(s)}}}function Se(t){let s;return{c(){s=ie("Delete")},l(a){s=se(a,"Delete")},m(a,n){b(a,s,n)},d(a){a&&h(s)}}}function Te(t){let s,a,n,$,m,d,_,o,g,i,l,p,c,r,f,P,N,B,R,L,M;function ae(){return t[4](t[13])}s=new Ce({props:{$$slots:{default:[Se]},$$scope:{ctx:t}}}),s.$on("click",ae);function oe(e){t[5](e,t[11])}let F={label:"Critical Issue",emptyOption:!0,choices:t[1]};t[11].criticalIssue!==void 0&&(F.value=t[11].criticalIssue),n=new x({props:F}),D.push(()=>q(n,"value",oe));function re(e){t[6](e,t[11])}let E={label:"Stage",emptyOption:!0,choices:he(["Existing","Design"])};t[11].stage!==void 0&&(E.value=t[11].stage),d=new x({props:E}),D.push(()=>q(d,"value",re));function le(e){t[7](e,t[11])}let O={label:"Location"};t[11].point!==void 0&&(O.value=t[11].point),g=new ee({props:O}),D.push(()=>q(g,"value",le));function fe(e){t[8](e,t[11])}let j={label:"Location Name"};t[11].locationName!==void 0&&(j.value=t[11].locationName),p=new ee({props:j}),D.push(()=>q(p,"value",fe));function ue(e){t[9](e,t[11])}let V={label:"Resolved by Design"};t[11].resolved!==void 0&&(V.value=t[11].resolved),f=new Be({props:V}),D.push(()=>q(f,"value",ue));function ce(e){t[10](e,t[11])}let G={label:"Commentary & Feedback"};return t[11].notes!==void 0&&(G.value=t[11].notes),B=new ke({props:G}),D.push(()=>q(B,"value",ce)),{c(){y(s.$$.fragment),a=S(),y(n.$$.fragment),m=S(),y(d.$$.fragment),o=S(),y(g.$$.fragment),l=S(),y(p.$$.fragment),r=S(),y(f.$$.fragment),N=S(),y(B.$$.fragment),L=S()},l(e){k(s.$$.fragment,e),a=T(e),k(n.$$.fragment,e),m=T(e),k(d.$$.fragment,e),o=T(e),k(g.$$.fragment,e),l=T(e),k(p.$$.fragment,e),r=T(e),k(f.$$.fragment,e),N=T(e),k(B.$$.fragment,e),L=T(e)},m(e,u){C(s,e,u),b(e,a,u),C(n,e,u),b(e,m,u),C(d,e,u),b(e,o,u),C(g,e,u),b(e,l,u),C(p,e,u),b(e,r,u),C(f,e,u),b(e,N,u),C(B,e,u),b(e,L,u),M=!0},p(e,u){t=e;const H={};u&16384&&(H.$$scope={dirty:u,ctx:t}),s.$set(H);const J={};!$&&u&1&&($=!0,J.value=t[11].criticalIssue,W(()=>$=!1)),n.$set(J);const K={};!_&&u&1&&(_=!0,K.value=t[11].stage,W(()=>_=!1)),d.$set(K);const Y={};!i&&u&1&&(i=!0,Y.value=t[11].point,W(()=>i=!1)),g.$set(Y);const z={};!c&&u&1&&(c=!0,z.value=t[11].locationName,W(()=>c=!1)),p.$set(z);const U={};!P&&u&1&&(P=!0,U.value=t[11].resolved,W(()=>P=!1)),f.$set(U);const Q={};!R&&u&1&&(R=!0,Q.value=t[11].notes,W(()=>R=!1)),B.$set(Q)},i(e){M||(v(s.$$.fragment,e),v(n.$$.fragment,e),v(d.$$.fragment,e),v(g.$$.fragment,e),v(p.$$.fragment,e),v(f.$$.fragment,e),v(B.$$.fragment,e),M=!0)},o(e){w(s.$$.fragment,e),w(n.$$.fragment,e),w(d.$$.fragment,e),w(g.$$.fragment,e),w(p.$$.fragment,e),w(f.$$.fragment,e),w(B.$$.fragment,e),M=!1},d(e){e&&(h(a),h(m),h(o),h(l),h(r),h(N),h(L)),A(s,e),A(n,e),A(d,e),A(g,e),A(p,e),A(f,e),A(B,e)}}}function ne(t){let s,a;return s=new we({props:{label:t[11].id,open:!0,$$slots:{default:[Te]},$$scope:{ctx:t}}}),{c(){y(s.$$.fragment)},l(n){k(s.$$.fragment,n)},m(n,$){C(s,n,$),a=!0},p(n,$){const m={};$&1&&(m.label=n[11].id),$&16385&&(m.$$scope={dirty:$,ctx:n}),s.$set(m)},i(n){a||(v(s.$$.fragment,n),a=!0)},o(n){w(s.$$.fragment,n),a=!1},d(n){A(s,n)}}}function De(t){let s,a,n,$,m,d;s=new Ae({props:{links:[["Tools","/"],["Route check tool","/route_check"]],current:"Critical Issue Log"}}),n=new ye({props:{$$slots:{default:[Ie]},$$scope:{ctx:t}}}),n.$on("click",t[2]);let _=Z(t[0].criticalIssues),o=[];for(let i=0;i<_.length;i+=1)o[i]=ne(te(t,_,i));const g=i=>w(o[i],1,1,()=>{o[i]=null});return{c(){y(s.$$.fragment),a=S(),y(n.$$.fragment),$=S();for(let i=0;i<o.length;i+=1)o[i].c();m=X()},l(i){k(s.$$.fragment,i),a=T(i),k(n.$$.fragment,i),$=T(i);for(let l=0;l<o.length;l+=1)o[l].l(i);m=X()},m(i,l){C(s,i,l),b(i,a,l),C(n,i,l),b(i,$,l);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(i,l);b(i,m,l),d=!0},p(i,[l]){const p={};if(l&16384&&(p.$$scope={dirty:l,ctx:i}),n.$set(p),l&11){_=Z(i[0].criticalIssues);let c;for(c=0;c<_.length;c+=1){const r=te(i,_,c);o[c]?(o[c].p(r,l),v(o[c],1)):(o[c]=ne(r),o[c].c(),v(o[c],1),o[c].m(m.parentNode,m))}for(be(),c=_.length;c<o.length;c+=1)g(c);ve()}},i(i){if(!d){v(s.$$.fragment,i),v(n.$$.fragment,i);for(let l=0;l<_.length;l+=1)v(o[l]);d=!0}},o(i){w(s.$$.fragment,i),w(n.$$.fragment,i),o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)w(o[l]);d=!1},d(i){i&&(h(a),h($),h(m)),A(s,i),A(n,i),me(o,i)}}}function We(t,s,a){let n;de(t,I,r=>a(0,n=r));let $=[["1","1 - Conflict at Side Roads and Priority Junctions: >2,500vpd cut across main walking, wheeling or cycling streams"],["2","2 - Conflict at Roundabouts and Signal Junctions: >2,500vpd cut across main walking, wheeling or cycling streams"],["3","3 - Lane Widths: Cyclists unprotected in 3.25-3.9m wide nearside lane"],["4","4 - Trip Hazards: Level differences >13mm with no tactile information and colour contrast"],["5A","5A - Kerbside Activity: Cycle facility next to parking/loading with insufficient buffer"],["5B","5B - Kerbside Activity: Unprotected cycle lane next to a frequently used bus layby"],["6A","6A - Provision of Crossings: on busy streets (>8,000vpd), formal crossings are more than 400m apart"],["6B","6B - Provision of Crossings: on quieter streets (<8,000vpd), desire lines are blocked by parking/loading"],["7A","7A - Standard of Crossings: on busy streets (>8,000vpd), uncontrolled crossings of 2+ lanes with no gaps in traffic"],["7B","7B - Standard of Crossings: at signal junctions, there are arms with no green man for pedestrians"],["8","8 - Motor Traffic Speed: Mean speed > 30mph when cyclists/pedestrians are unprotected"],["9A","9A - Motor Traffic Volume: >1,000 vehicles in busiest hour when cyclists/pedestrians are unprotected"],["9B","9B - Motor Traffic Volume: >5% HGV traffic when cyclists/pedestrians are unprotected and >500 vehicles in busiest hour"],["10","10 - Pedestrian Crossing Speed: Pedestrians must cross at speeds >1.2m/s"],["11A","11A - Footway Width: <1m clear width"],["11B","11B - Footway Width: 1.0-1.5m wide clear width for over 6m"],["11C","11C - Footway Width: <2m clear width and pedestrian comfort level is poor (PCL of D-E)"],["11D","11D - Footway Width: no footway"],["12A","12A - Effective Width next to Tram Lines: <2.4m effective width for cyclists from tramline edge to kerb on a straight run"],["12B","12B - Effective Width next to Tram Lines: insufficient effective width for cyclists on a curved section of tram route"],["13","13 - Crossing Angle of Tram/Train Rails: Cyclist crossing angle <60Â°"],["14",'14 - Cycling Surface and Maintenance Defects: Major defects (provide further information in "commentary and feedback")'],["15",'15 - Walking/Wheeling Surface and Maintenance Defects: Major defects (provide further information in "commentary and feedback")'],["16","16 - Guard Railing: used as standard without consideration of inherent safety risks"]];function m(){$e(I,n.criticalIssues=[...n.criticalIssues,{id:"TODO",criticalIssue:"",stage:"",point:"",locationName:"",resolved:"",notes:""}],n)}function d(r){window.confirm("Delete this entry?")&&(n.criticalIssues.splice(r,1),I.set(n))}const _=r=>d(r);function o(r,f){t.$$.not_equal(f.criticalIssue,r)&&(f.criticalIssue=r,I.set(n))}function g(r,f){t.$$.not_equal(f.stage,r)&&(f.stage=r,I.set(n))}function i(r,f){t.$$.not_equal(f.point,r)&&(f.point=r,I.set(n))}function l(r,f){t.$$.not_equal(f.locationName,r)&&(f.locationName=r,I.set(n))}function p(r,f){t.$$.not_equal(f.resolved,r)&&(f.resolved=r,I.set(n))}function c(r,f){t.$$.not_equal(f.notes,r)&&(f.notes=r,I.set(n))}return[n,$,m,d,_,o,g,i,l,p,c]}class Je extends _e{constructor(s){super(),ge(this,s,We,De,pe,{})}}export{Je as component};
