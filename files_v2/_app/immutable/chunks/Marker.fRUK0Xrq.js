import{s as K,l as U,e as C,c as w,b as E,f as p,p as k,i as b,u as V,r as F,v as G,a as T,g as N,q as x,h as B,w as L,A as ge,F as ze,T as Pe,k as q,y as Ae,K as Z,m as Me,z as De,n as pe,x as $,C as Oe,t as z,d as P,a9 as re,aa as X,$ as Te,U as Ne}from"./scheduler.DdbCgG5Y.js";import{S as H,i as J,t as y,b as S,c as le,a as ne,m as ae,d as se,e as Ke,g as be,f as ke}from"./index.C_YYYqaa.js";import{v as Re}from"./ErrorMessage.Sg158ol5.js";import{e as ue}from"./each.B7ptbZHf.js";import{C as qe}from"./DefaultButton.BQ4AsOPo.js";/* empty css                                            */import{S as Ue}from"./SecondaryButton.BN4AfecE.js";import{S as Ve}from"./Select.BFHWg2EK.js";import{k as Y,u as Fe,d as Ge}from"./index.B39wmWv_.js";function Ze(l){let e,n;const s=l[1].default,t=U(s,l,l[0],null);return{c(){e=C("div"),t&&t.c(),this.h()},l(i){e=w(i,"DIV",{class:!0});var o=E(e);t&&t.l(o),o.forEach(p),this.h()},h(){k(e,"class","govuk-button-group")},m(i,o){b(i,e,o),t&&t.m(e,null),n=!0},p(i,[o]){t&&t.p&&(!n||o&1)&&V(t,s,i,i[0],n?G(s,i[0],o,null):F(i[0]),null)},i(i){n||(y(t,i),n=!0)},o(i){S(t,i),n=!1},d(i){i&&p(e),t&&t.d(i)}}}function je(l,e,n){let{$$slots:s={},$$scope:t}=e;return l.$$set=i=>{"$$scope"in i&&n(0,t=i.$$scope)},[t,s]}class mt extends H{constructor(e){super(),J(this,e,je,Ze,K,{})}}const He=l=>({}),ce=l=>({});function Je(l){let e,n,s,t,i,o,u,f,c;const m=l[5].default,_=U(m,l,l[4],null),g=l[5].right,a=U(g,l,l[4],ce);return{c(){e=C("div"),n=C("input"),s=T(),t=C("label"),_&&_.c(),i=T(),o=C("span"),a&&a.c(),this.h()},l(r){e=w(r,"DIV",{class:!0,style:!0});var h=E(e);n=w(h,"INPUT",{type:!0,class:!0,id:!0}),s=N(h),t=w(h,"LABEL",{class:!0,for:!0,title:!0});var M=E(t);_&&_.l(M),M.forEach(p),i=N(h),o=w(h,"SPAN",{style:!0});var I=E(o);a&&a.l(I),I.forEach(p),h.forEach(p),this.h()},h(){k(n,"type","checkbox"),k(n,"class","govuk-checkboxes__input"),k(n,"id",l[3]),k(t,"class","govuk-label govuk-checkboxes__label"),k(t,"for",l[3]),k(t,"title",l[1]),x(o,"float","right"),k(e,"class","govuk-checkboxes__item"),k(e,"style",l[2])},m(r,h){b(r,e,h),B(e,n),n.checked=l[0],B(e,s),B(e,t),_&&_.m(t,null),B(e,i),B(e,o),a&&a.m(o,null),u=!0,f||(c=[L(n,"change",l[7]),L(n,"change",l[6])],f=!0)},p(r,[h]){h&1&&(n.checked=r[0]),_&&_.p&&(!u||h&16)&&V(_,m,r,r[4],u?G(m,r[4],h,null):F(r[4]),null),(!u||h&2)&&k(t,"title",r[1]),a&&a.p&&(!u||h&16)&&V(a,g,r,r[4],u?G(g,r[4],h,He):F(r[4]),ce)},i(r){u||(y(_,r),y(a,r),u=!0)},o(r){S(_,r),S(a,r),u=!1},d(r){r&&p(e),_&&_.d(r),a&&a.d(r),f=!1,ge(c)}}}function Qe(l,e,n){let{$$slots:s={},$$scope:t}=e;const i=Pe(s);let{checked:o}=e,{hint:u=null}=e,c=i.right!==void 0?"float: none":"",m=Re();function _(a){ze.call(this,l,a)}function g(){o=this.checked,n(0,o)}return l.$$set=a=>{"checked"in a&&n(0,o=a.checked),"hint"in a&&n(1,u=a.hint),"$$scope"in a&&n(4,t=a.$$scope)},[o,u,c,m,t,s,_,g]}class ht extends H{constructor(e){super(),J(this,e,Qe,Je,K,{checked:0,hint:1})}}function fe(l,e,n){const s=l.slice();return s[6]=e[n][0],s[7]=e[n][1],s}function We(l){let e;return{c(){e=z("disabled")},l(n){e=P(n,"disabled")},m(n,s){b(n,e,s)},d(n){n&&p(e)}}}function Xe(l){let e;return{c(){e=z("enabled")},l(n){e=P(n,"enabled")},m(n,s){b(n,e,s)},d(n){n&&p(e)}}}function Ye(l){let e,n=l[7]+"",s,t;return{c(){e=z("Set "),s=z(n),t=z(` API key
      `)},l(i){e=P(i,"Set "),s=P(i,n),t=P(i,` API key
      `)},m(i,o){b(i,e,o),b(i,s,o),b(i,t,o)},p:pe,d(i){i&&(p(e),p(s),p(t))}}}function de(l){let e,n,s=l[7]+"",t,i,o,u,f;function c(a,r){return te(a[6])?Xe:We}let _=c(l)(l);function g(){return l[5](l[6])}return u=new Ue({props:{$$slots:{default:[Ye]},$$scope:{ctx:l}}}),u.$on("click",g),{c(){e=C("p"),n=C("u"),t=z(s),i=z(`
        : `),_.c(),o=T(),le(u.$$.fragment)},l(a){e=w(a,"P",{});var r=E(e);n=w(r,"U",{});var h=E(n);t=P(h,s),h.forEach(p),i=P(r,`
        : `),_.l(r),r.forEach(p),o=N(a),ne(u.$$.fragment,a)},m(a,r){b(a,e,r),B(e,n),B(n,t),B(e,i),_.m(e,null),b(a,o,r),ae(u,a,r),f=!0},p(a,r){l=a;const h={};r&1024&&(h.$$scope={dirty:r,ctx:l}),u.$set(h)},i(a){f||(y(u.$$.fragment,a),f=!0)},o(a){S(u.$$.fragment,a),f=!1},d(a){a&&(p(e),p(o)),_.d(),se(u,a)}}}function _e(l){let e,n,s=ue([[j,"Bluesky"],[ee,"Ordnance Survey"]]),t=[];for(let o=0;o<2;o+=1)t[o]=de(fe(l,s,o));const i=o=>S(t[o],1,1,()=>{t[o]=null});return{c(){for(let o=0;o<2;o+=1)t[o].c();e=Z()},l(o){for(let u=0;u<2;u+=1)t[u].l(o);e=Z()},m(o,u){for(let f=0;f<2;f+=1)t[f]&&t[f].m(o,u);b(o,e,u),n=!0},p(o,u){if(u&8){s=ue([[j,"Bluesky"],[ee,"Ordnance Survey"]]);let f;for(f=0;f<2;f+=1){const c=fe(o,s,f);t[f]?(t[f].p(c,u),y(t[f],1)):(t[f]=de(c),t[f].c(),y(t[f],1),t[f].m(e.parentNode,e))}for(be(),f=2;f<2;f+=1)i(f);ke()}},i(o){if(!n){for(let u=0;u<2;u+=1)y(t[u]);n=!0}},o(o){t=t.filter(Boolean);for(let u=0;u<2;u+=1)S(t[u]);n=!1},d(o){o&&p(e),Oe(t,o)}}}function xe(l){let e,n,s,t,i=`If you have internal access, you can opt into higher-quality satellite
    imagery.`,o,u=l[0],f,c;function m(a){l[4](a)}let _={label:"Basemap",choices:l[1]};l[2]!==void 0&&(_.value=l[2]),e=new Ve({props:_}),Ae.push(()=>Ke(e,"value",m));let g=_e(l);return{c(){le(e.$$.fragment),s=T(),t=C("p"),t.textContent=i,o=T(),g.c(),f=Z()},l(a){ne(e.$$.fragment,a),s=N(a),t=w(a,"P",{"data-svelte-h":!0}),Me(t)!=="svelte-itr0ad"&&(t.textContent=i),o=N(a),g.l(a),f=Z()},m(a,r){ae(e,a,r),b(a,s,r),b(a,t,r),b(a,o,r),g.m(a,r),b(a,f,r),c=!0},p(a,r){const h={};r&2&&(h.choices=a[1]),!n&&r&4&&(n=!0,h.value=a[2],De(()=>n=!1)),e.$set(h),r&1&&K(u,u=a[0])?(be(),S(g,1,1,pe),ke(),g=_e(a),g.c(),y(g,1),g.m(f.parentNode,f)):g.p(a,r)},i(a){c||(y(e.$$.fragment,a),y(g),c=!0)},o(a){S(e.$$.fragment,a),S(g),c=!1},d(a){a&&(p(s),p(t),p(o),p(f)),se(e,a),g.d(a)}}}function $e(l){let e,n;return e=new qe({props:{label:"Basemap",$$slots:{default:[xe]},$$scope:{ctx:l}}}),{c(){le(e.$$.fragment)},l(s){ne(e.$$.fragment,s)},m(s,t){ae(e,s,t),n=!0},p(s,[t]){const i={};t&1031&&(i.$$scope={dirty:t,ctx:s}),e.$set(i)},i(s){n||(y(e.$$.fragment,s),n=!0)},o(s){S(e.$$.fragment,s),n=!1},d(s){se(e,s)}}}let j="bluesky-api-key",ee="os-api-key";function te(l){let e=window.localStorage.getItem(l);return e!=null&&e.length>0}function me(){let l=[];return te(j)&&l.push(["bluesky","Bluesky Satellite (12.5cm)"]),te(ee)&&l.push(["os-road","OS Road"]),l.push(["maptiler-hybrid","MapTiler Satellite"]),l.push(["maptiler-streets","MapTiler Streets"]),l.push(["maptiler-dataviz","MapTiler Dataviz"]),l.push(["maptiler-uk-openzoomstack-light","OS Open Zoomstack"]),l}function et(l,e,n){let s;q(l,Y,c=>n(2,s=c));let t=0;function i(c){let m=window.prompt("Enter the API key provided to you",window.localStorage.getItem(c)||"");window.localStorage.setItem(c,m||""),n(1,o=me()),n(0,t+=1),m&&m.length>0&&$(Y,s=c==j?"bluesky":"os-road",s)}let o=me();function u(c){s=c,Y.set(s)}return[t,o,s,i,u,c=>i(c)]}class gt extends H{constructor(e){super(),J(this,e,et,$e,K,{})}}const tt=l=>({marker:l&8}),he=l=>({marker:l[3]});function lt(l){let e,n,s,t,i,o,u;const f=l[19].default,c=U(f,l,l[18],he);return{c(){e=C("div"),c&&c.c(),this.h()},l(m){e=w(m,"DIV",{tabindex:!0,role:!0});var _=E(e);c&&c.l(_),_.forEach(p),this.h()},h(){k(e,"tabindex",n=l[1]?0:void 0),k(e,"role",s=l[1]?"button":void 0),x(e,"z-index",l[2])},m(m,_){b(m,e,_),c&&c.m(e,null),i=!0,o||(u=[re(l[7].call(null,e)),re(t=nt.call(null,e,l[0])),L(e,"click",X(l[20])),L(e,"dblclick",X(l[21])),L(e,"contextmenu",X(l[22])),L(e,"mouseenter",l[23]),L(e,"mouseleave",l[24]),L(e,"mousemove",l[25]),L(e,"keydown",l[8])],o=!0)},p(m,[_]){c&&c.p&&(!i||_&262152)&&V(c,f,m,m[18],i?G(f,m[18],_,tt):F(m[18]),he),(!i||_&2&&n!==(n=m[1]?0:void 0))&&k(e,"tabindex",n),(!i||_&2&&s!==(s=m[1]?"button":void 0))&&k(e,"role",s),t&&Te(t.update)&&_&1&&t.update.call(null,m[0]),_&4&&x(e,"z-index",m[2])},i(m){i||(y(c,m),i=!0)},o(m){S(c,m),i=!1},d(m){m&&p(e),c&&c.d(m),o=!1,ge(u)}}}function nt(l,e){const n=l.className;function s(t){t?l.className=`${n} ${t}`:l.className=n}return s(e),{update:s}}function at(l,e,n){let s,t,i,{$$slots:o={},$$scope:u}=e,{marker:f=void 0}=e,{lngLat:c}=e,{class:m=void 0}=e,{interactive:_=!0}=e,{asButton:g=!1}=e,{draggable:a=!1}=e,{feature:r=null}=e,{offset:h=void 0}=e,{zIndex:M=void 0}=e,{rotation:I=0}=e,{opacity:R=1}=e;const ye=Ne(),{map:oe,layerEvent:Q,self:W}=Fe();q(l,oe,d=>n(27,i=d)),q(l,Q,d=>n(26,s=d)),q(l,W,d=>n(3,t=d));function ve(d){$(W,t=new Ge.Marker({element:d,rotation:I,draggable:a,offset:h,opacity:R.toString()}).setLngLat(c).addTo(i),t),n(11,f=t);const A=()=>v("dragstart"),D=()=>{ie(),v("drag")},O=()=>{ie(),v("dragend")};return a&&(t.on("dragstart",A),t.on("drag",D),t.on("dragend",O)),{destroy(){a&&(t==null||t.off("dragstart",A),t==null||t.off("drag",D),t==null||t.off("dragend",O)),n(11,f=void 0),t==null||t.remove()}}}function ie(){let d=t==null?void 0:t.getLngLat();d&&(Array.isArray(c)?n(10,c=[d.lng,d.lat]):c&&"lon"in c?n(10,c={lon:d.lng,lat:d.lat}):n(10,c=d))}function Se(d){d.key===" "&&(d.preventDefault(),d.stopPropagation(),v("click"))}function v(d){if(!_)return;let A=t==null?void 0:t.getLngLat();if(!A)return;const D=[A.lng,A.lat];let O={map:i,marker:t,lngLat:D,features:[{type:"Feature",properties:(r==null?void 0:r.properties)??{},geometry:{type:"Point",coordinates:D}}]};$(Q,s={...O,layerType:"marker",type:d},s),ye(d,O)}const Le=()=>v("click"),Ce=()=>v("dblclick"),we=()=>v("contextmenu"),Be=d=>{v("mouseenter")},Ie=()=>{v("mouseleave")},Ee=()=>v("mousemove");return l.$$set=d=>{"marker"in d&&n(11,f=d.marker),"lngLat"in d&&n(10,c=d.lngLat),"class"in d&&n(0,m=d.class),"interactive"in d&&n(12,_=d.interactive),"asButton"in d&&n(1,g=d.asButton),"draggable"in d&&n(13,a=d.draggable),"feature"in d&&n(14,r=d.feature),"offset"in d&&n(15,h=d.offset),"zIndex"in d&&n(2,M=d.zIndex),"rotation"in d&&n(16,I=d.rotation),"opacity"in d&&n(17,R=d.opacity),"$$scope"in d&&n(18,u=d.$$scope)},l.$$.update=()=>{l.$$.dirty&1032&&(t==null||t.setLngLat(c)),l.$$.dirty&32776&&(t==null||t.setOffset(h??[0,0])),l.$$.dirty&65544&&(t==null||t.setRotation(I)),l.$$.dirty&131080&&(t==null||t.setOpacity(R.toString()))},[m,g,M,t,oe,Q,W,ve,Se,v,c,f,_,a,r,h,I,R,u,o,Le,Ce,we,Be,Ie,Ee]}class pt extends H{constructor(e){super(),J(this,e,at,lt,K,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}export{gt as B,ht as C,pt as M,mt as a};
