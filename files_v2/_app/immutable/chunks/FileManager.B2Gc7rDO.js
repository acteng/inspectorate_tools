import{s as re,a as y,g as L,i as k,f as _,U as ye,e as M,c as E,m as Z,p,w as Le,n as V,y as we,t as O,M as me,b as J,d as W,N as ce,h as x,l as ke,u as Ie,r as xe,v as Fe,o as ie,ab as de,x as X,z as Se}from"./scheduler.DdbCgG5Y.js";import{S as oe,i as ae,c as T,a as q,m as B,t as F,b as S,d as G,g as se,f as ne,e as Me}from"./index.C_YYYqaa.js";import{L as Ee,d as He}from"./download.B6rNME97.js";import{b as pe}from"./paths.BlIXDe0Y.js";import"./entry.D2LBkwNf.js";import{F as Ae}from"./FileInput.B4SJ2ocV.js";import{R as De}from"./Radio.BxxyVDs2.js";/* empty css                                            */import{S as le}from"./SecondaryButton.BN4AfecE.js";import{W as je}from"./WarningButton.Cq01xR4u.js";import{b as Ce,p as _e}from"./index.ITcyW1e2.js";import{F as Re}from"./FormElement.BKjrlGKy.js";import"./index.CDhv8Yzn.js";const Ne="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M200-200h57l391-391-57-57-391%20391v57Zm-80%2080v-170l528-527q12-11%2026.5-17t30.5-6q16%200%2031%206t26%2018l55%2056q12%2011%2017.5%2026t5.5%2030q0%2016-5.5%2030.5T817-647L290-120H120Zm640-584-56-56%2056%2056Zm-141%2085-28-29%2057%2057-29-28Z'/%3e%3c/svg%3e",Te="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='white'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M6%2019c0%201.1.9%202%202%202h8c1.1%200%202-.9%202-2V7H6v12zM19%204h-3.5l-1-1h-5l-1%201H5v2h14V4z'/%3e%3c/svg%3e";function qe(r){let e,s,t,n=`You can import from an existing route check .xlsx file, <b>only if there&#39;s an up-to-date DALOG sheet added</b>
    . After importing, there will still be some problems:
    <ul><li>You must fill out the Junction Assessment Tool (JAT); it won&#39;t be
        imported</li> <li>Some text fields on the Summary of Scheme page will be missing</li></ul>`,l,o;return{c(){e=M("input"),s=y(),t=M("div"),t.innerHTML=n,this.h()},l(a){e=E(a,"INPUT",{class:!0,id:!0,type:!0}),s=L(a),t=E(a,"DIV",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-1alapt1"&&(t.innerHTML=n),this.h()},h(){p(e,"class","govuk-file-upload"),p(e,"id","import-xlsx"),p(e,"type","file"),p(t,"class","govuk-hint")},m(a,w){k(a,e,w),r[4](e),k(a,s,w),k(a,t,w),l||(o=Le(e,"change",r[2]),l=!0)},p:V,d(a){a&&(_(e),_(s),_(t)),r[4](null),l=!1,o()}}}function Be(r){let e,s,t,n;return e=new Re({props:{label:"Import from XLSX file",id:"import-xlsx",$$slots:{default:[qe]},$$scope:{ctx:r}}}),t=new Ee({props:{loading:r[0]}}),{c(){T(e.$$.fragment),s=y(),T(t.$$.fragment)},l(l){q(e.$$.fragment,l),s=L(l),q(t.$$.fragment,l)},m(l,o){B(e,l,o),k(l,s,o),B(t,l,o),n=!0},p(l,[o]){const a={};o&66&&(a.$$scope={dirty:o,ctx:l}),e.$set(a);const w={};o&1&&(w.loading=l[0]),t.$set(w)},i(l){n||(F(e.$$.fragment,l),F(t.$$.fragment,l),n=!0)},o(l){S(e.$$.fragment,l),S(t.$$.fragment,l),n=!1},d(l){l&&_(s),G(e,l),G(t,l)}}}function Ge(r,e,s){let t=ye(),{xlsxImporter:n}=e,l="",o;async function a(g){let H=o.files[0].name;try{s(0,l=`Loading ${H}`);let d=await o.files[0].arrayBuffer(),i=await n(d);s(0,l=""),t("imported",{filename:Ce(H,".xlsx"),data:i})}catch(d){window.alert(`Couldn't import ${H}: ${d}`),s(0,l="")}}function w(g){we[g?"unshift":"push"](()=>{o=g,s(1,o)})}return r.$$set=g=>{"xlsxImporter"in g&&s(3,n=g.xlsxImporter)},[l,o,a,n,w]}class Ve extends oe{constructor(e){super(),ae(this,e,Ge,Be,re,{xlsxImporter:3})}}function Ue(r){let e,s,t,n;return{c(){e=M("a"),s=O(`Start
  `),t=me("svg"),n=me("path"),this.h()},l(l){e=E(l,"A",{href:!0,role:!0,draggable:!0,class:!0,"data-module":!0});var o=J(e);s=W(o,`Start
  `),t=ce(o,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,"aria-hidden":!0,focusable:!0});var a=J(t);n=ce(a,"path",{fill:!0,d:!0}),J(n).forEach(_),a.forEach(_),o.forEach(_),this.h()},h(){p(n,"fill","currentColor"),p(n,"d","M0 0h13l20 20-20 20H0l20-20z"),p(t,"class","govuk-button__start-icon"),p(t,"xmlns","http://www.w3.org/2000/svg"),p(t,"width","17.5"),p(t,"height","19"),p(t,"viewBox","0 0 33 40"),p(t,"aria-hidden","true"),p(t,"focusable","false"),p(e,"href",r[0]),p(e,"role","button"),p(e,"draggable","false"),p(e,"class","govuk-button govuk-button--start"),p(e,"data-module","govuk-button")},m(l,o){k(l,e,o),x(e,s),x(e,t),x(t,n)},p(l,[o]){o&1&&p(e,"href",l[0])},i:V,o:V,d(l){l&&_(e)}}}function ze(r,e,s){let{href:t}=e;return r.$$set=n=>{"href"in n&&s(0,t=n.href)},[t]}class Ye extends oe{constructor(e){super(),ae(this,e,ze,Ue,re,{href:0})}}const Je=r=>({}),he=r=>({}),Pe=r=>({}),ge=r=>({});function $e(r){let e,s="<b>You are editing:</b>",t,n,l,o,a,w,g,H,d;a=new Ye({props:{href:`${pe}/${r[0].prefix}nav`}}),g=new le({props:{$$slots:{default:[Xe]},$$scope:{ctx:r}}}),g.$on("click",r[10]);const i=r[14].import,u=ke(i,r,r[16],he);return{c(){e=M("p"),e.innerHTML=s,t=y(),n=M("div"),l=M("input"),o=y(),T(a.$$.fragment),w=y(),T(g.$$.fragment),H=y(),u&&u.c(),this.h()},l(f){e=E(f,"P",{"data-svelte-h":!0}),Z(e)!=="svelte-st3pjg"&&(e.innerHTML=s),t=L(f),n=E(f,"DIV",{});var m=J(n);l=E(m,"INPUT",{class:!0}),o=L(m),q(a.$$.fragment,m),m.forEach(_),w=L(f),q(g.$$.fragment,f),H=L(f),u&&u.l(f),this.h()},h(){p(l,"class","govuk-input govuk-!-width-three-quarters"),l.value=r[6],l.disabled=!0},m(f,m){k(f,e,m),k(f,t,m),k(f,n,m),x(n,l),x(n,o),B(a,n,null),k(f,w,m),B(g,f,m),k(f,H,m),u&&u.m(f,m),d=!0},p(f,m){(!d||m&64&&l.value!==f[6])&&(l.value=f[6]);const I={};m&1&&(I.href=`${pe}/${f[0].prefix}nav`),a.$set(I);const R={};m&65536&&(R.$$scope={dirty:m,ctx:f}),g.$set(R),u&&u.p&&(!d||m&65536)&&Ie(u,i,f,f[16],d?Fe(i,f[16],m,Je):xe(f[16]),he)},i(f){d||(F(a.$$.fragment,f),F(g.$$.fragment,f),F(u,f),d=!0)},o(f){S(a.$$.fragment,f),S(g.$$.fragment,f),S(u,f),d=!1},d(f){f&&(_(e),_(t),_(n),_(w),_(H)),G(a),G(g,f),u&&u.d(f)}}}function Xe(r){let e,s,t;return{c(){e=M("img"),t=O(`
          Export .json`),this.h()},l(n){e=E(n,"IMG",{src:!0,alt:!0,class:!0}),t=W(n,`
          Export .json`),this.h()},h(){ie(e.src,s=He)||p(e,"src",s),p(e,"alt","Export .json"),p(e,"class","svelte-1f2msch")},m(n,l){k(n,e,l),k(n,t,l)},p:V,d(n){n&&(_(e),_(t))}}}function Ze(r){let e;return{c(){e=O("New blank file")},l(s){e=W(s,"New blank file")},m(s,t){k(s,e,t)},d(s){s&&_(e)}}}function ve(r){let e,s,t,n;return t=new Ve({props:{xlsxImporter:r[3]}}),t.$on("imported",r[13]),{c(){e=M("hr"),s=y(),T(t.$$.fragment)},l(l){e=E(l,"HR",{}),s=L(l),q(t.$$.fragment,l)},m(l,o){k(l,e,o),k(l,s,o),B(t,l,o),n=!0},p(l,o){const a={};o&8&&(a.xlsxImporter=l[3]),t.$set(a)},i(l){n||(F(t.$$.fragment,l),n=!0)},o(l){S(t.$$.fragment,l),n=!1},d(l){l&&(_(e),_(s)),G(t,l)}}}function Oe(r){let e,s="No saved files";return{c(){e=M("p"),e.textContent=s},l(t){e=E(t,"P",{"data-svelte-h":!0}),Z(e)!=="svelte-yojds1"&&(e.textContent=s)},m(t,n){k(t,e,n)},p:V,i:V,o:V,d(t){t&&_(e)}}}function We(r){let e,s,t,n,l,o,a,w,g;e=new le({props:{disabled:r[4]=="",$$slots:{default:[Ke]},$$scope:{ctx:r}}}),e.$on("click",r[7]),t=new le({props:{disabled:r[4]=="",$$slots:{default:[Qe]},$$scope:{ctx:r}}}),t.$on("click",r[8]),l=new je({props:{disabled:r[4]=="",$$slots:{default:[et]},$$scope:{ctx:r}}}),l.$on("click",r[9]);function H(i){r[15](i)}let d={label:"Manage existing file",choices:_e(r[5])};return r[4]!==void 0&&(d.value=r[4]),a=new De({props:d}),we.push(()=>Me(a,"value",H)),{c(){T(e.$$.fragment),s=y(),T(t.$$.fragment),n=y(),T(l.$$.fragment),o=y(),T(a.$$.fragment)},l(i){q(e.$$.fragment,i),s=L(i),q(t.$$.fragment,i),n=L(i),q(l.$$.fragment,i),o=L(i),q(a.$$.fragment,i)},m(i,u){B(e,i,u),k(i,s,u),B(t,i,u),k(i,n,u),B(l,i,u),k(i,o,u),B(a,i,u),g=!0},p(i,u){const f={};u&16&&(f.disabled=i[4]==""),u&65536&&(f.$$scope={dirty:u,ctx:i}),e.$set(f);const m={};u&16&&(m.disabled=i[4]==""),u&65536&&(m.$$scope={dirty:u,ctx:i}),t.$set(m);const I={};u&16&&(I.disabled=i[4]==""),u&65536&&(I.$$scope={dirty:u,ctx:i}),l.$set(I);const R={};u&32&&(R.choices=_e(i[5])),!w&&u&16&&(w=!0,R.value=i[4],Se(()=>w=!1)),a.$set(R)},i(i){g||(F(e.$$.fragment,i),F(t.$$.fragment,i),F(l.$$.fragment,i),F(a.$$.fragment,i),g=!0)},o(i){S(e.$$.fragment,i),S(t.$$.fragment,i),S(l.$$.fragment,i),S(a.$$.fragment,i),g=!1},d(i){i&&(_(s),_(n),_(o)),G(e,i),G(t,i),G(l,i),G(a,i)}}}function Ke(r){let e;return{c(){e=O("Load saved file")},l(s){e=W(s,"Load saved file")},m(s,t){k(s,e,t)},d(s){s&&_(e)}}}function Qe(r){let e,s,t;return{c(){e=M("img"),t=O(`
          Rename saved file`),this.h()},l(n){e=E(n,"IMG",{src:!0,alt:!0,class:!0}),t=W(n,`
          Rename saved file`),this.h()},h(){ie(e.src,s=Ne)||p(e,"src",s),p(e,"alt","Rename saved file"),p(e,"class","svelte-1f2msch")},m(n,l){k(n,e,l),k(n,t,l)},p:V,d(n){n&&(_(e),_(t))}}}function et(r){let e,s,t;return{c(){e=M("img"),t=O(`
          Delete saved file`),this.h()},l(n){e=E(n,"IMG",{src:!0,alt:!0,class:!0}),t=W(n,`
          Delete saved file`),this.h()},h(){ie(e.src,s=Te)||p(e,"src",s),p(e,"alt","Delete saved file"),p(e,"class","svelte-1f2msch")},m(n,l){k(n,e,l),k(n,t,l)},p:V,d(n){n&&(_(e),_(t))}}}function tt(r){let e,s,t,n,l,o=`All files are auto-saved in your browser's local storage. You can close
        your browser and resume later. You can export the file to your computer
        to share with someone else, and import from a file below.`,a,w,g,H="Create or import a file",d,i,u,f,m,I,R,K,N,U,ee="Manage existing files",Q,j,A,z;const c=r[14].description,v=ke(c,r,r[16],ge);let $=r[6]&&$e(r);i=new le({props:{$$slots:{default:[Ze]},$$scope:{ctx:r}}}),i.$on("click",r[11]),I=new Ae({props:{label:"Import from a .json file",onLoad:r[12]}});let b=r[3]!=null&&ve(r);const fe=[We,Oe],Y=[];function ue(h,D){return h[5].length>0?0:1}return j=ue(r),A=Y[j]=fe[j](r),{c(){e=M("div"),s=M("div"),t=M("div"),v&&v.c(),n=y(),l=M("p"),l.textContent=o,a=y(),$&&$.c(),w=y(),g=M("h2"),g.textContent=H,d=y(),T(i.$$.fragment),u=y(),f=M("hr"),m=y(),T(I.$$.fragment),R=y(),b&&b.c(),K=y(),N=M("div"),U=M("h2"),U.textContent=ee,Q=y(),A.c(),this.h()},l(h){e=E(h,"DIV",{class:!0});var D=J(e);s=E(D,"DIV",{class:!0});var P=J(s);t=E(P,"DIV",{class:!0});var C=J(t);v&&v.l(C),n=L(C),l=E(C,"P",{"data-svelte-h":!0}),Z(l)!=="svelte-wkz669"&&(l.textContent=o),a=L(C),$&&$.l(C),w=L(C),g=E(C,"H2",{"data-svelte-h":!0}),Z(g)!=="svelte-1yqhw3l"&&(g.textContent=H),d=L(C),q(i.$$.fragment,C),u=L(C),f=E(C,"HR",{}),m=L(C),q(I.$$.fragment,C),R=L(C),b&&b.l(C),C.forEach(_),K=L(P),N=E(P,"DIV",{class:!0});var te=J(N);U=E(te,"H2",{class:!0,"data-svelte-h":!0}),Z(U)!=="svelte-7j9603"&&(U.textContent=ee),Q=L(te),A.l(te),te.forEach(_),P.forEach(_),D.forEach(_),this.h()},h(){p(t,"class","govuk-grid-column-two-thirds"),p(U,"class","green-bar svelte-1f2msch"),p(N,"class","govuk-grid-column-one-third"),p(s,"class","govuk-grid-row"),p(e,"class","govuk-width-container")},m(h,D){k(h,e,D),x(e,s),x(s,t),v&&v.m(t,null),x(t,n),x(t,l),x(t,a),$&&$.m(t,null),x(t,w),x(t,g),x(t,d),B(i,t,null),x(t,u),x(t,f),x(t,m),B(I,t,null),x(t,R),b&&b.m(t,null),x(s,K),x(s,N),x(N,U),x(N,Q),Y[j].m(N,null),z=!0},p(h,[D]){v&&v.p&&(!z||D&65536)&&Ie(v,c,h,h[16],z?Fe(c,h[16],D,Pe):xe(h[16]),ge),h[6]?$?($.p(h,D),D&64&&F($,1)):($=$e(h),$.c(),F($,1),$.m(t,w)):$&&(se(),S($,1,1,()=>{$=null}),ne());const P={};D&65536&&(P.$$scope={dirty:D,ctx:h}),i.$set(P),h[3]!=null?b?(b.p(h,D),D&8&&F(b,1)):(b=ve(h),b.c(),F(b,1),b.m(t,null)):b&&(se(),S(b,1,1,()=>{b=null}),ne());let C=j;j=ue(h),j===C?Y[j].p(h,D):(se(),S(Y[C],1,1,()=>{Y[C]=null}),ne(),A=Y[j],A?A.p(h,D):(A=Y[j]=fe[j](h),A.c()),F(A,1),A.m(N,null))},i(h){z||(F(v,h),F($),F(i.$$.fragment,h),F(I.$$.fragment,h),F(b),F(A),z=!0)},o(h){S(v,h),S($),S(i.$$.fragment,h),S(I.$$.fragment,h),S(b),S(A),z=!1},d(h){h&&_(e),v&&v.d(h),$&&$.d(),G(i),G(I),b&&b.d(),Y[j].d()}}}function be(r,e){let s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),s.setAttribute("download",r),document.body.appendChild(s),s.click(),document.body.removeChild(s)}function lt(r,e,s){let t,n=V,l=()=>(n(),n=de(u,c=>s(17,t=c)),u),o,a=V,w=()=>(a(),a=de(i,c=>s(6,o=c)),i);r.$$.on_destroy.push(()=>n()),r.$$.on_destroy.push(()=>a());let{$$slots:g={},$$scope:H}=e,{files:d}=e,{currentFile:i}=e;w();let{state:u}=e;l();let{xlsxImporter:f=null}=e,m=o,I=d.getFileList();function R(){m&&A(m)}function K(){if(!m)return;let c=m==o,v=window.prompt(`Rename file ${m} to what?`,m);if(v){let $=d.key(m),b=window.localStorage.getItem($);window.localStorage.setItem(d.key(v),b),window.localStorage.removeItem($),c&&X(i,o=v,o),s(4,m=v),s(5,I=d.getFileList())}}function N(){if(!m||!window.confirm(`Really delete file ${m}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let c=d.key(m);be(`${m}.json`,window.localStorage.getItem(c)),window.localStorage.removeItem(c),m==o&&(X(i,o="",o),X(u,t=d.emptyState(),t)),s(4,m=""),s(5,I=d.getFileList())}function U(){be(o+".json",JSON.stringify(t))}function ee(){let c=window.prompt("What do you want to name your new file?");c&&(X(i,o=c,o),X(u,t=d.emptyState(),t),s(5,I=d.saveAndGetFileList(o,t)))}function Q(c,v){let $=Ce(c,".json");try{let b=JSON.parse(v);d.validate(b),s(5,I=d.saveAndGetFileList($,b)),A($)}catch(b){window.alert(`Couldn't load ${$}: ${b}`)}}function j(c){let{filename:v,data:$}=c.detail;s(5,I=d.saveAndGetFileList(v,$)),A(v)}function A(c){try{let v=d.loadFile(c);X(i,o=c,o),X(u,t=v,t)}catch(v){window.alert(`Couldn't load ${c}: ${v}`)}}function z(c){m=c,s(4,m)}return r.$$set=c=>{"files"in c&&s(0,d=c.files),"currentFile"in c&&w(s(1,i=c.currentFile)),"state"in c&&l(s(2,u=c.state)),"xlsxImporter"in c&&s(3,f=c.xlsxImporter),"$$scope"in c&&s(16,H=c.$$scope)},[d,i,u,f,m,I,o,R,K,N,U,ee,Q,j,g,z,H]}class ht extends oe{constructor(e){super(),ae(this,e,lt,tt,re,{files:0,currentFile:1,state:2,xlsxImporter:3})}}export{ht as F};
