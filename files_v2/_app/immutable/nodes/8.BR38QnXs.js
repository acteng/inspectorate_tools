import{s as re,l as le,e as y,a as $,t as D,c as v,b as R,g as k,m as ne,d as G,f as l,o as oe,p as U,q as J,i as m,h as p,w as ie,j as W,u as ue,r as me,v as fe,k as L,x as pe}from"../chunks/scheduler.DKH-jSat.js";import{S as ce,i as _e,c as X,a as Z,m as x,t as Y,b as B,d as ee}from"../chunks/index.DfgmShX9.js";import{g as he}from"../chunks/globals.D0QH3NT1.js";import{c as ge,s as te,f as de}from"../chunks/data.B44P6Wkm.js";import{b as se}from"../chunks/paths.WpDDu2k2.js";import{g as ae,c as ye}from"../chunks/index.LxF3DIeF.js";import{p as $e}from"../chunks/stores.D1HVx0wz.js";import{N as ve,a as ke,f as be}from"../chunks/folder.B5zovIdn.js";import{g as we}from"../chunks/entry.CKjjln7K.js";const{window:Ce}=he;function Te(a){let r,o,c,_,i,H="Manage files",w,u,s,f,C,S,h,q,F,I,b,E=ae(a[1].url.pathname)+"",M,V,A,O,P,g,d,j,K;h=new ve({props:{routeCheckType:a[2].summary.checkType}});const z=a[5].default,n=le(z,a,a[4],null);return g=new ke({props:{routeCheckType:a[2].summary.checkType}}),{c(){r=y("div"),o=y("img"),_=$(),i=y("a"),i.textContent=H,w=$(),u=y("span"),s=D("Editing file "),f=y("u"),C=D(a[0]),S=$(),X(h.$$.fragment),q=$(),F=y("hr"),I=$(),b=y("h1"),M=D(E),V=$(),n&&n.c(),A=$(),O=y("hr"),P=$(),X(g.$$.fragment),this.h()},l(e){r=v(e,"DIV",{});var t=R(r);o=v(t,"IMG",{src:!0,alt:!0,style:!0}),_=k(t),i=v(t,"A",{href:!0,"data-svelte-h":!0}),ne(i)!=="svelte-1tlkei2"&&(i.textContent=H),w=k(t),u=v(t,"SPAN",{class:!0,style:!0});var T=R(u);s=G(T,"Editing file "),f=v(T,"U",{});var N=R(f);C=G(N,a[0]),N.forEach(l),T.forEach(l),t.forEach(l),S=k(e),Z(h.$$.fragment,e),q=k(e),F=v(e,"HR",{}),I=k(e),b=v(e,"H1",{style:!0});var Q=R(b);M=G(Q,E),Q.forEach(l),V=k(e),n&&n.l(e),A=k(e),O=v(e,"HR",{}),P=k(e),Z(g.$$.fragment,e),this.h()},h(){oe(o.src,c=be)||U(o,"src",c),U(o,"alt","Manage files"),J(o,"vertical-align","middle"),U(i,"href",se+"/route_check"),U(u,"class","govuk-body"),J(u,"margin-left","8px"),J(b,"text-align","center")},m(e,t){m(e,r,t),p(r,o),p(r,_),p(r,i),p(r,w),p(r,u),p(u,s),p(u,f),p(f,C),m(e,S,t),x(h,e,t),m(e,q,t),m(e,F,t),m(e,I,t),m(e,b,t),p(b,M),m(e,V,t),n&&n.m(e,t),m(e,A,t),m(e,O,t),m(e,P,t),x(g,e,t),d=!0,j||(K=ie(Ce,"storage",a[3]),j=!0)},p(e,[t]){(!d||t&1)&&W(C,e[0]);const T={};t&4&&(T.routeCheckType=e[2].summary.checkType),h.$set(T),(!d||t&2)&&E!==(E=ae(e[1].url.pathname)+"")&&W(M,E),n&&n.p&&(!d||t&16)&&ue(n,z,e,e[4],d?fe(z,e[4],t,null):me(e[4]),null);const N={};t&4&&(N.routeCheckType=e[2].summary.checkType),g.$set(N)},i(e){d||(Y(h.$$.fragment,e),Y(n,e),Y(g.$$.fragment,e),d=!0)},o(e){B(h.$$.fragment,e),B(n,e),B(g.$$.fragment,e),d=!1},d(e){e&&(l(r),l(S),l(q),l(F),l(I),l(b),l(V),l(A),l(O),l(P)),ee(h,e),n&&n.d(e),ee(g,e),j=!1,K()}}}function Ee(a,r,o){let c,_,i;L(a,ge,s=>o(0,c=s)),L(a,te,s=>o(2,_=s)),L(a,$e,s=>o(1,i=s));let{$$slots:H={},$$scope:w}=r;function u(s){let f=de.key(c);if(f==s.key)if(s.newValue)try{console.log(`${f} changed in another tab; applying the data here`),pe(te,_=JSON.parse(s.newValue),_)}catch(C){console.error(`${f} changed in another tab, but the new value is broken: ${C}`)}else window.alert(`You deleted ${c} from another tab. If you continue editing it here, it'll be saved again.`)}return a.$$set=s=>{"$$scope"in s&&o(4,w=s.$$scope)},a.$$.update=()=>{a.$$.dirty&3&&c==""&&ye(i.url.pathname)!="/route_check"&&(console.log("On a content page without any file loaded; redirecting"),we(`${se}/route_check`))},[c,i,_,u,w,H]}class Oe extends ce{constructor(r){super(),_e(this,r,Ee,Te,re,{})}}export{Oe as component};
