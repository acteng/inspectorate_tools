import{af as Td,ag as Jp,s as Jt,E as ln,i as nt,f as U,U as Ua,k as Ue,Y as Hr,V as Ti,n as zt,l as Zi,u as Ki,m as Ji,o as Qi,r as Ts,w as Il,D as on,G as Rd,ad as Md,e as yt,c as _t,b as It,q as R,ah as fa,B as Lr,y as ze,Z as Ad,x as qa,a as Vt,g as jt,M as Dd,t as Ai,N as Fd,d as Di,p as Qp,h as ft,O as jr,P as Wr,j as hs,I as De,v as js,J as dc,W as kd,T as Gd}from"./scheduler.Bpan6Ont.js";import{S as ge,i as de,t as X,g as Fn,b as Z,f as kn,e as Ll,c as $t,a as te,m as ee,d as ne}from"./index.B_gktW-4.js";import{m as qo}from"./index.DNqFbhas.js";import{w as Sr,r as du}from"./entry.ByqvqYRk.js";import{g as Bd}from"./globals.D0QH3NT1.js";import{e as mc,u as zd,o as Ud}from"./each.rqQRCiyP.js";import{i as qd,b as Nl,g as Vd}from"./authority_names.DvvSx3AH.js";import"./SelectWithCustom.svelte_svelte_type_style_lang.wN5bLBlN.js";var yc=Object.prototype.toString,$p=function(t){var n=yc.call(t),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&yc.call(t.callee)==="[object Function]"),r},mu,_c;function jd(){if(_c)return mu;_c=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=$p,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),s=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(p){var g=p.constructor;return g&&g.prototype===p},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},c=function(){if(typeof window>"u")return!1;for(var p in window)try{if(!l["$"+p]&&t.call(window,p)&&window[p]!==null&&typeof window[p]=="object")try{u(window[p])}catch{return!0}}catch{return!0}return!1}(),f=function(p){if(typeof window>"u"||!c)return u(p);try{return u(p)}catch{return!1}};e=function(g){var h=g!==null&&typeof g=="object",m=n.call(g)==="[object Function]",d=r(g),y=h&&n.call(g)==="[object String]",v=[];if(!h&&!m&&!d)throw new TypeError("Object.keys called on a non-object");var b=s&&m;if(y&&g.length>0&&!t.call(g,0))for(var I=0;I<g.length;++I)v.push(String(I));if(d&&g.length>0)for(var w=0;w<g.length;++w)v.push(String(w));else for(var O in g)!(b&&O==="prototype")&&t.call(g,O)&&v.push(String(O));if(o)for(var M=f(g),x=0;x<a.length;++x)!(M&&a[x]==="constructor")&&t.call(g,a[x])&&v.push(a[x]);return v}}return mu=e,mu}var Wd=Array.prototype.slice,Xd=$p,vc=Object.keys,ta=vc?function(t){return vc(t)}:jd(),bc=Object.keys;ta.shim=function(){if(Object.keys){var t=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);t||(Object.keys=function(r){return Xd(r)?bc(Wd.call(r)):bc(r)})}else Object.keys=ta;return Object.keys||ta};var xl=ta,Yd=Error,Hd=EvalError,Zd=RangeError,Kd=ReferenceError,th=SyntaxError,Ni=TypeError,Jd=URIError,Va=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;t[n]=i;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,n);if(s.value!==i||s.enumerable!==!0)return!1}return!0},Ec=typeof Symbol<"u"&&Symbol,Qd=Va,wl=function(){return typeof Ec!="function"||typeof Symbol!="function"||typeof Ec("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Qd()},yu={__proto__:null,foo:{}},$d=Object,tm=function(){return{__proto__:yu}.foo===yu.foo&&!(yu instanceof $d)},em="Function.prototype.bind called on incompatible ",nm=Object.prototype.toString,rm=Math.max,im="[object Function]",Sc=function(t,n){for(var r=[],i=0;i<t.length;i+=1)r[i]=t[i];for(var o=0;o<n.length;o+=1)r[o+t.length]=n[o];return r},om=function(t,n){for(var r=[],i=n||0,o=0;i<t.length;i+=1,o+=1)r[o]=t[i];return r},sm=function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n},am=function(t){var n=this;if(typeof n!="function"||nm.apply(n)!==im)throw new TypeError(em+n);for(var r=om(arguments,1),i,o=function(){if(this instanceof i){var c=n.apply(this,Sc(r,arguments));return Object(c)===c?c:this}return n.apply(t,Sc(r,arguments))},s=rm(0,n.length-r.length),a=[],u=0;u<s;u++)a[u]="$"+u;if(i=Function("binder","return function ("+sm(a,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var l=function(){};l.prototype=n.prototype,i.prototype=new l,l.prototype=null}return i},um=am,Cl=Function.prototype.bind||um,lm=Function.prototype.call,cm=Object.prototype.hasOwnProperty,fm=Cl,eh=fm.call(lm,cm),ct,pm=Yd,hm=Hd,gm=Zd,dm=Kd,_o=th,mo=Ni,mm=Jd,nh=Function,_u=function(e){try{return nh('"use strict"; return ('+e+").constructor;")()}catch{}},Ri=Object.getOwnPropertyDescriptor;if(Ri)try{Ri({},"")}catch{Ri=null}var vu=function(){throw new mo},ym=Ri?function(){try{return arguments.callee,vu}catch{try{return Ri(arguments,"callee").get}catch{return vu}}}():vu,ao=wl(),_m=tm(),Se=Object.getPrototypeOf||(_m?function(e){return e.__proto__}:null),fo={},vm=typeof Uint8Array>"u"||!Se?ct:Se(Uint8Array),Mi={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ct:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ct:ArrayBuffer,"%ArrayIteratorPrototype%":ao&&Se?Se([][Symbol.iterator]()):ct,"%AsyncFromSyncIteratorPrototype%":ct,"%AsyncFunction%":fo,"%AsyncGenerator%":fo,"%AsyncGeneratorFunction%":fo,"%AsyncIteratorPrototype%":fo,"%Atomics%":typeof Atomics>"u"?ct:Atomics,"%BigInt%":typeof BigInt>"u"?ct:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ct:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ct:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ct:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":pm,"%eval%":eval,"%EvalError%":hm,"%Float32Array%":typeof Float32Array>"u"?ct:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ct:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ct:FinalizationRegistry,"%Function%":nh,"%GeneratorFunction%":fo,"%Int8Array%":typeof Int8Array>"u"?ct:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ct:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ct:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ao&&Se?Se(Se([][Symbol.iterator]())):ct,"%JSON%":typeof JSON=="object"?JSON:ct,"%Map%":typeof Map>"u"?ct:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ao||!Se?ct:Se(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ct:Promise,"%Proxy%":typeof Proxy>"u"?ct:Proxy,"%RangeError%":gm,"%ReferenceError%":dm,"%Reflect%":typeof Reflect>"u"?ct:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ct:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ao||!Se?ct:Se(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ct:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ao&&Se?Se(""[Symbol.iterator]()):ct,"%Symbol%":ao?Symbol:ct,"%SyntaxError%":_o,"%ThrowTypeError%":ym,"%TypedArray%":vm,"%TypeError%":mo,"%Uint8Array%":typeof Uint8Array>"u"?ct:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ct:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ct:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ct:Uint32Array,"%URIError%":mm,"%WeakMap%":typeof WeakMap>"u"?ct:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ct:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ct:WeakSet};if(Se)try{null.error}catch(e){var bm=Se(Se(e));Mi["%Error.prototype%"]=bm}var Em=function e(t){var n;if(t==="%AsyncFunction%")n=_u("async function () {}");else if(t==="%GeneratorFunction%")n=_u("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=_u("async function* () {}");else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Se&&(n=Se(i.prototype))}return Mi[t]=n,n},Ic={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Rs=Cl,pa=eh,Sm=Rs.call(Function.call,Array.prototype.concat),Im=Rs.call(Function.apply,Array.prototype.splice),Lc=Rs.call(Function.call,String.prototype.replace),ha=Rs.call(Function.call,String.prototype.slice),Lm=Rs.call(Function.call,RegExp.prototype.exec),Nm=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,xm=/\\(\\)?/g,wm=function(t){var n=ha(t,0,1),r=ha(t,-1);if(n==="%"&&r!=="%")throw new _o("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new _o("invalid intrinsic syntax, expected opening `%`");var i=[];return Lc(t,Nm,function(o,s,a,u){i[i.length]=a?Lc(u,xm,"$1"):s||o}),i},Cm=function(t,n){var r=t,i;if(pa(Ic,r)&&(i=Ic[r],r="%"+i[0]+"%"),pa(Mi,r)){var o=Mi[r];if(o===fo&&(o=Em(r)),typeof o>"u"&&!n)throw new mo("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:o}}throw new _o("intrinsic "+t+" does not exist!")},Ar=function(t,n){if(typeof t!="string"||t.length===0)throw new mo("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new mo('"allowMissing" argument must be a boolean');if(Lm(/^%?[^%]*%?$/,t)===null)throw new _o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=wm(t),i=r.length>0?r[0]:"",o=Cm("%"+i+"%",n),s=o.name,a=o.value,u=!1,l=o.alias;l&&(i=l[0],Im(r,Sm([0,1],l)));for(var c=1,f=!0;c<r.length;c+=1){var p=r[c],g=ha(p,0,1),h=ha(p,-1);if((g==='"'||g==="'"||g==="`"||h==='"'||h==="'"||h==="`")&&g!==h)throw new _o("property names with quotes must have matching quotes");if((p==="constructor"||!f)&&(u=!0),i+="."+p,s="%"+i+"%",pa(Mi,s))a=Mi[s];else if(a!=null){if(!(p in a)){if(!n)throw new mo("base intrinsic for "+t+" exists, but the property is not available.");return}if(Ri&&c+1>=r.length){var m=Ri(a,p);f=!!m,f&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[p]}else f=pa(a,p),a=a[p];f&&!u&&(Mi[s]=a)}}return a},Om=Ar,ea=Om("%Object.defineProperty%",!0)||!1;if(ea)try{ea({},"a",{value:1})}catch{ea=!1}var Ol=ea,Pm=Ar,na=Pm("%Object.getOwnPropertyDescriptor%",!0);if(na)try{na([],"length")}catch{na=null}var Pl=na,Nc=Ol,Tm=th,uo=Ni,xc=Pl,Tl=function(t,n,r){if(!t||typeof t!="object"&&typeof t!="function")throw new uo("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new uo("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new uo("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new uo("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new uo("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new uo("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!xc&&xc(t,n);if(Nc)Nc(t,n,{configurable:s===null&&u?u.configurable:!s,enumerable:i===null&&u?u.enumerable:!i,value:r,writable:o===null&&u?u.writable:!o});else if(a||!i&&!o&&!s)t[n]=r;else throw new Tm("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},zu=Ol,rh=function(){return!!zu};rh.hasArrayLengthDefineBug=function(){if(!zu)return null;try{return zu([],"length",{value:1}).length!==1}catch{return!0}};var Rl=rh,Rm=xl,Mm=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Am=Object.prototype.toString,Dm=Array.prototype.concat,wc=Tl,Fm=function(e){return typeof e=="function"&&Am.call(e)==="[object Function]"},ih=Rl(),km=function(e,t,n,r){if(t in e){if(r===!0){if(e[t]===n)return}else if(!Fm(r)||!r())return}ih?wc(e,t,n,!0):wc(e,t,n)},oh=function(e,t){var n=arguments.length>2?arguments[2]:{},r=Rm(t);Mm&&(r=Dm.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)km(e,r[i],t[r[i]],n[r[i]])};oh.supportsDescriptors=!!ih;var $i=oh,sh={exports:{}},Gm=Ar,Cc=Tl,Bm=Rl(),Oc=Pl,Pc=Ni,zm=Gm("%Math.floor%"),Um=function(t,n){if(typeof t!="function")throw new Pc("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||zm(n)!==n)throw new Pc("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&Oc){var s=Oc(t,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!r)&&(Bm?Cc(t,"length",n,!0,!0):Cc(t,"length",n)),t};(function(e){var t=Cl,n=Ar,r=Um,i=Ni,o=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||t.call(s,o),u=Ol,l=n("%Math.max%");e.exports=function(p){if(typeof p!="function")throw new i("a function is required");var g=a(t,s,arguments);return r(g,1+l(0,p.length-(arguments.length-1)),!0)};var c=function(){return a(t,o,arguments)};u?u(e.exports,"apply",{value:c}):e.exports.apply=c})(sh);var Vo=sh.exports,ah=Ar,uh=Vo,qm=uh(ah("String.prototype.indexOf")),Kn=function(t,n){var r=ah(t,!!n);return typeof r=="function"&&qm(t,".prototype.")>-1?uh(r):r},Vm=xl,lh=Va(),ch=Kn,Tc=Object,jm=ch("Array.prototype.push"),Rc=ch("Object.prototype.propertyIsEnumerable"),Wm=lh?Object.getOwnPropertySymbols:null,fh=function(t,n){if(t==null)throw new TypeError("target must be an object");var r=Tc(t);if(arguments.length===1)return r;for(var i=1;i<arguments.length;++i){var o=Tc(arguments[i]),s=Vm(o),a=lh&&(Object.getOwnPropertySymbols||Wm);if(a)for(var u=a(o),l=0;l<u.length;++l){var c=u[l];Rc(o,c)&&jm(s,c)}for(var f=0;f<s.length;++f){var p=s[f];if(Rc(o,p)){var g=o[p];r[p]=g}}}return r},bu=fh,Xm=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),o="";for(var s in i)o+=s;return e!==o},Ym=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return e[1]==="y"}return!1},ph=function(){return!Object.assign||Xm()||Ym()?bu:Object.assign},Hm=$i,Zm=ph,Km=function(){var t=Zm();return Hm(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},Jm=$i,Qm=Vo,$m=fh,hh=ph,ty=Km,ey=Qm.apply(hh()),gh=function(t,n){return ey(Object,arguments)};Jm(gh,{getPolyfill:hh,implementation:$m,shim:ty});var ny=gh,gs=function(){return typeof(function(){}).name=="string"},us=Object.getOwnPropertyDescriptor;if(us)try{us([],"length")}catch{us=null}gs.functionsHaveConfigurableNames=function(){if(!gs()||!us)return!1;var t=us(function(){},"name");return!!t&&!!t.configurable};var ry=Function.prototype.bind;gs.boundFunctionsHaveNames=function(){return gs()&&typeof ry=="function"&&(function(){}).bind().name!==""};var iy=gs,Mc=Tl,oy=Rl(),sy=iy.functionsHaveConfigurableNames(),ay=Ni,uy=function(t,n){if(typeof t!="function")throw new ay("`fn` is not a function");var r=arguments.length>2&&!!arguments[2];return(!r||sy)&&(oy?Mc(t,"name",n,!0,!0):Mc(t,"name",n)),t},ly=uy,cy=Ni,fy=Object,dh=ly(function(){if(this==null||this!==fy(this))throw new cy("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0),py=dh,hy=$i.supportsDescriptors,gy=Object.getOwnPropertyDescriptor,mh=function(){if(hy&&/a/mig.flags==="gim"){var t=gy(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var n="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){n+="d"}}),Object.defineProperty(r,"sticky",{get:function(){n+="y"}}),n==="dy")return t.get}}return py},dy=$i.supportsDescriptors,my=mh,yy=Object.getOwnPropertyDescriptor,_y=Object.defineProperty,vy=TypeError,Ac=Object.getPrototypeOf,by=/a/,Ey=function(){if(!dy||!Ac)throw new vy("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=my(),n=Ac(by),r=yy(n,"flags");return(!r||r.get!==t)&&_y(n,"flags",{configurable:!0,enumerable:!1,get:t}),t},Sy=$i,Iy=Vo,Ly=dh,yh=mh,Ny=Ey,_h=Iy(yh());Sy(_h,{getPolyfill:yh,implementation:Ly,shim:Ny});var xy=_h,ra={exports:{}},wy=Va,to=function(){return wy()&&!!Symbol.toStringTag},Cy=to(),Oy=Kn,Uu=Oy("Object.prototype.toString"),ja=function(t){return Cy&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:Uu(t)==="[object Arguments]"},vh=function(t){return ja(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Uu(t)!=="[object Array]"&&Uu(t.callee)==="[object Function]"},Py=function(){return ja(arguments)}();ja.isLegacyArguments=vh;var bh=Py?ja:vh;const Ty={},Ry=Object.freeze(Object.defineProperty({__proto__:null,default:Ty},Symbol.toStringTag,{value:"Module"})),My=qd(Ry);var Ml=typeof Map=="function"&&Map.prototype,Eu=Object.getOwnPropertyDescriptor&&Ml?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ga=Ml&&Eu&&typeof Eu.get=="function"?Eu.get:null,Dc=Ml&&Map.prototype.forEach,Al=typeof Set=="function"&&Set.prototype,Su=Object.getOwnPropertyDescriptor&&Al?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,da=Al&&Su&&typeof Su.get=="function"?Su.get:null,Fc=Al&&Set.prototype.forEach,Ay=typeof WeakMap=="function"&&WeakMap.prototype,ls=Ay?WeakMap.prototype.has:null,Dy=typeof WeakSet=="function"&&WeakSet.prototype,cs=Dy?WeakSet.prototype.has:null,Fy=typeof WeakRef=="function"&&WeakRef.prototype,kc=Fy?WeakRef.prototype.deref:null,ky=Boolean.prototype.valueOf,Gy=Object.prototype.toString,By=Function.prototype.toString,zy=String.prototype.match,Dl=String.prototype.slice,fi=String.prototype.replace,Uy=String.prototype.toUpperCase,Gc=String.prototype.toLowerCase,Eh=RegExp.prototype.test,Bc=Array.prototype.concat,Ir=Array.prototype.join,qy=Array.prototype.slice,zc=Math.floor,qu=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Iu=Object.getOwnPropertySymbols,Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,vo=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ve=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===vo||!0)?Symbol.toStringTag:null,Sh=Object.prototype.propertyIsEnumerable,Uc=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function qc(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Eh.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var r=e<0?-zc(-e):zc(e);if(r!==e){var i=String(r),o=Dl.call(t,i.length+1);return fi.call(i,n,"$&_")+"."+fi.call(fi.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return fi.call(t,n,"$&_")}var ju=My,Vc=ju.custom,jc=Lh(Vc)?Vc:null,Vy=function e(t,n,r,i){var o=n||{};if(li(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(li(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=li(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(li(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(li(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return xh(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return a?qc(t,u):u}if(typeof t=="bigint"){var l=String(t)+"n";return a?qc(t,l):l}var c=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=c&&c>0&&typeof t=="object")return Wu(t)?"[Array]":"[Object]";var f=a_(o,r);if(typeof i>"u")i=[];else if(Nh(i,t)>=0)return"[Circular]";function p($,N,z){if(N&&(i=qy.call(i),i.push(N)),z){var q={depth:o.depth};return li(o,"quoteStyle")&&(q.quoteStyle=o.quoteStyle),e($,q,r+1,i)}return e($,o,r+1,i)}if(typeof t=="function"&&!Wc(t)){var g=Qy(t),h=Ws(t,p);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(h.length>0?" { "+Ir.call(h,", ")+" }":"")}if(Lh(t)){var m=vo?fi.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Vu.call(t);return typeof t=="object"&&!vo?Qo(m):m}if(i_(t)){for(var d="<"+Gc.call(String(t.nodeName)),y=t.attributes||[],v=0;v<y.length;v++)d+=" "+y[v].name+"="+Ih(jy(y[v].value),"double",o);return d+=">",t.childNodes&&t.childNodes.length&&(d+="..."),d+="</"+Gc.call(String(t.nodeName))+">",d}if(Wu(t)){if(t.length===0)return"[]";var b=Ws(t,p);return f&&!s_(b)?"["+Xu(b,f)+"]":"[ "+Ir.call(b,", ")+" ]"}if(Xy(t)){var I=Ws(t,p);return!("cause"in Error.prototype)&&"cause"in t&&!Sh.call(t,"cause")?"{ ["+String(t)+"] "+Ir.call(Bc.call("[cause]: "+p(t.cause),I),", ")+" }":I.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Ir.call(I,", ")+" }"}if(typeof t=="object"&&s){if(jc&&typeof t[jc]=="function"&&ju)return ju(t,{depth:c-r});if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if($y(t)){var w=[];return Dc&&Dc.call(t,function($,N){w.push(p(N,t,!0)+" => "+p($,t))}),Xc("Map",ga.call(t),w,f)}if(n_(t)){var O=[];return Fc&&Fc.call(t,function($){O.push(p($,t))}),Xc("Set",da.call(t),O,f)}if(t_(t))return Lu("WeakMap");if(r_(t))return Lu("WeakSet");if(e_(t))return Lu("WeakRef");if(Hy(t))return Qo(p(Number(t)));if(Ky(t))return Qo(p(qu.call(t)));if(Zy(t))return Qo(ky.call(t));if(Yy(t))return Qo(p(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===Nl)return"{ [object globalThis] }";if(!Wy(t)&&!Wc(t)){var M=Ws(t,p),x=Uc?Uc(t)===Object.prototype:t instanceof Object||t.constructor===Object,T=t instanceof Object?"":"null prototype",k=!x&&Ve&&Object(t)===t&&Ve in t?Dl.call(xi(t),8,-1):T?"Object":"",A=x||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",C=A+(k||T?"["+Ir.call(Bc.call([],k||[],T||[]),": ")+"] ":"");return M.length===0?C+"{}":f?C+"{"+Xu(M,f)+"}":C+"{ "+Ir.call(M,", ")+" }"}return String(t)};function Ih(e,t,n){var r=(n.quoteStyle||t)==="double"?'"':"'";return r+e+r}function jy(e){return fi.call(String(e),/"/g,"&quot;")}function Wu(e){return xi(e)==="[object Array]"&&(!Ve||!(typeof e=="object"&&Ve in e))}function Wy(e){return xi(e)==="[object Date]"&&(!Ve||!(typeof e=="object"&&Ve in e))}function Wc(e){return xi(e)==="[object RegExp]"&&(!Ve||!(typeof e=="object"&&Ve in e))}function Xy(e){return xi(e)==="[object Error]"&&(!Ve||!(typeof e=="object"&&Ve in e))}function Yy(e){return xi(e)==="[object String]"&&(!Ve||!(typeof e=="object"&&Ve in e))}function Hy(e){return xi(e)==="[object Number]"&&(!Ve||!(typeof e=="object"&&Ve in e))}function Zy(e){return xi(e)==="[object Boolean]"&&(!Ve||!(typeof e=="object"&&Ve in e))}function Lh(e){if(vo)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Vu)return!1;try{return Vu.call(e),!0}catch{}return!1}function Ky(e){if(!e||typeof e!="object"||!qu)return!1;try{return qu.call(e),!0}catch{}return!1}var Jy=Object.prototype.hasOwnProperty||function(e){return e in this};function li(e,t){return Jy.call(e,t)}function xi(e){return Gy.call(e)}function Qy(e){if(e.name)return e.name;var t=zy.call(By.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Nh(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function $y(e){if(!ga||!e||typeof e!="object")return!1;try{ga.call(e);try{da.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function t_(e){if(!ls||!e||typeof e!="object")return!1;try{ls.call(e,ls);try{cs.call(e,cs)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function e_(e){if(!kc||!e||typeof e!="object")return!1;try{return kc.call(e),!0}catch{}return!1}function n_(e){if(!da||!e||typeof e!="object")return!1;try{da.call(e);try{ga.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function r_(e){if(!cs||!e||typeof e!="object")return!1;try{cs.call(e,cs);try{ls.call(e,ls)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function i_(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function xh(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return xh(Dl.call(e,0,t.maxStringLength),t)+r}var i=fi.call(fi.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,o_);return Ih(i,"single",t)}function o_(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+Uy.call(t.toString(16))}function Qo(e){return"Object("+e+")"}function Lu(e){return e+" { ? }"}function Xc(e,t,n,r){var i=r?Xu(n,r):Ir.call(n,", ");return e+" ("+t+") {"+i+"}"}function s_(e){for(var t=0;t<e.length;t++)if(Nh(e[t],`
`)>=0)return!1;return!0}function a_(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=Ir.call(Array(e.indent+1)," ");else return null;return{base:n,prev:Ir.call(Array(t+1),n)}}function Xu(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+Ir.call(e,","+n)+`
`+t.prev}function Ws(e,t){var n=Wu(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=li(e,i)?t(e[i],e):""}var o=typeof Iu=="function"?Iu(e):[],s;if(vo){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var u in e)li(e,u)&&(n&&String(Number(u))===u&&u<e.length||vo&&s["$"+u]instanceof Symbol||(Eh.call(/[^\w$]/,u)?r.push(t(u,e)+": "+t(e[u],e)):r.push(u+": "+t(e[u],e))));if(typeof Iu=="function")for(var l=0;l<o.length;l++)Sh.call(e,o[l])&&r.push("["+t(o[l])+"]: "+t(e[o[l]],e));return r}var wh=Ar,jo=Kn,u_=Vy,l_=Ni,Xs=wh("%WeakMap%",!0),Ys=wh("%Map%",!0),c_=jo("WeakMap.prototype.get",!0),f_=jo("WeakMap.prototype.set",!0),p_=jo("WeakMap.prototype.has",!0),h_=jo("Map.prototype.get",!0),g_=jo("Map.prototype.set",!0),d_=jo("Map.prototype.has",!0),Fl=function(e,t){for(var n=e,r;(r=n.next)!==null;n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r},m_=function(e,t){var n=Fl(e,t);return n&&n.value},y_=function(e,t,n){var r=Fl(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}},__=function(e,t){return!!Fl(e,t)},Ch=function(){var t,n,r,i={assert:function(o){if(!i.has(o))throw new l_("Side channel does not contain "+u_(o))},get:function(o){if(Xs&&o&&(typeof o=="object"||typeof o=="function")){if(t)return c_(t,o)}else if(Ys){if(n)return h_(n,o)}else if(r)return m_(r,o)},has:function(o){if(Xs&&o&&(typeof o=="object"||typeof o=="function")){if(t)return p_(t,o)}else if(Ys){if(n)return d_(n,o)}else if(r)return __(r,o);return!1},set:function(o,s){Xs&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new Xs),f_(t,o,s)):Ys?(n||(n=new Ys),g_(n,o,s)):(r||(r={key:{},next:null}),y_(r,o,s))}};return i},v_=eh,$o=Ch(),zr=Ni,kl={assert:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new zr("`O` is not an object");if(typeof t!="string")throw new zr("`slot` must be a string");if($o.assert(e),!kl.has(e,t))throw new zr("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new zr("`O` is not an object");if(typeof t!="string")throw new zr("`slot` must be a string");var n=$o.get(e);return n&&n["$"+t]},has:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new zr("`O` is not an object");if(typeof t!="string")throw new zr("`slot` must be a string");var n=$o.get(e);return!!n&&v_(n,"$"+t)},set:function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new zr("`O` is not an object");if(typeof t!="string")throw new zr("`slot` must be a string");var r=$o.get(e);r||(r={},$o.set(e,r)),r["$"+t]=n}};Object.freeze&&Object.freeze(kl);var b_=kl,ts=b_,E_=SyntaxError,Yc=typeof StopIteration=="object"?StopIteration:null,S_=function(t){if(!Yc)throw new E_("this environment lacks StopIteration");ts.set(t,"[[Done]]",!1);var n={next:function(){var i=ts.get(this,"[[Iterator]]"),o=ts.get(i,"[[Done]]");try{return{done:o,value:o?void 0:i.next()}}catch(s){if(ts.set(i,"[[Done]]",!0),s!==Yc)throw s;return{done:!0,value:void 0}}}};return ts.set(n,"[[Iterator]]",t),n},I_={}.toString,Oh=Array.isArray||function(e){return I_.call(e)=="[object Array]"},L_=String.prototype.valueOf,N_=function(t){try{return L_.call(t),!0}catch{return!1}},x_=Object.prototype.toString,w_="[object String]",C_=to(),Ph=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:C_?N_(t):x_.call(t)===w_},Gl=typeof Map=="function"&&Map.prototype?Map:null,O_=typeof Set=="function"&&Set.prototype?Set:null,ma;Gl||(ma=function(t){return!1});var Th=Gl?Map.prototype.has:null,Hc=O_?Set.prototype.has:null;!ma&&!Th&&(ma=function(t){return!1});var Rh=ma||function(t){if(!t||typeof t!="object")return!1;try{if(Th.call(t),Hc)try{Hc.call(t)}catch{return!0}return t instanceof Gl}catch{}return!1},P_=typeof Map=="function"&&Map.prototype?Map:null,Bl=typeof Set=="function"&&Set.prototype?Set:null,ya;Bl||(ya=function(t){return!1});var Zc=P_?Map.prototype.has:null,Mh=Bl?Set.prototype.has:null;!ya&&!Mh&&(ya=function(t){return!1});var Ah=ya||function(t){if(!t||typeof t!="object")return!1;try{if(Mh.call(t),Zc)try{Zc.call(t)}catch{return!0}return t instanceof Bl}catch{}return!1},Kc=bh,Jc=S_;if(wl()||Va()){var Nu=Symbol.iterator;ra.exports=function(t){if(t!=null&&typeof t[Nu]<"u")return t[Nu]();if(Kc(t))return Array.prototype[Nu].call(t)}}else{var T_=Oh,R_=Ph,Qc=Ar,M_=Qc("%Map%",!0),A_=Qc("%Set%",!0),er=Kn,$c=er("Array.prototype.push"),tf=er("String.prototype.charCodeAt"),D_=er("String.prototype.slice"),F_=function(t,n){var r=t.length;if(n+1>=r)return n+1;var i=tf(t,n);if(i<55296||i>56319)return n+1;var o=tf(t,n+1);return o<56320||o>57343?n+1:n+2},xu=function(t){var n=0;return{next:function(){var i=n>=t.length,o;return i||(o=t[n],n+=1),{done:i,value:o}}}},ef=function(t,n){if(T_(t)||Kc(t))return xu(t);if(R_(t)){var r=0;return{next:function(){var o=F_(t,r),s=D_(t,r,o);return r=o,{done:o>t.length,value:s}}}}if(n&&typeof t["_es6-shim iterator_"]<"u")return t["_es6-shim iterator_"]()};if(!M_&&!A_)ra.exports=function(t){if(t!=null)return ef(t,!0)};else{var k_=Rh,G_=Ah,nf=er("Map.prototype.forEach",!0),rf=er("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var of=er("Map.prototype.iterator",!0),sf=er("Set.prototype.iterator",!0);var af=er("Map.prototype.@@iterator",!0)||er("Map.prototype._es6-shim iterator_",!0),uf=er("Set.prototype.@@iterator",!0)||er("Set.prototype._es6-shim iterator_",!0),B_=function(t){if(k_(t)){if(of)return Jc(of(t));if(af)return af(t);if(nf){var n=[];return nf(t,function(i,o){$c(n,[o,i])}),xu(n)}}if(G_(t)){if(sf)return Jc(sf(t));if(uf)return uf(t);if(rf){var r=[];return rf(t,function(i){$c(r,i)}),xu(r)}}};ra.exports=function(t){return B_(t)||ef(t)}}}var z_=ra.exports,lf=function(e){return e!==e},Dh=function(t,n){return t===0&&n===0?1/t===1/n:!!(t===n||lf(t)&&lf(n))},U_=Dh,Fh=function(){return typeof Object.is=="function"?Object.is:U_},q_=Fh,V_=$i,j_=function(){var t=q_();return V_(Object,{is:t},{is:function(){return Object.is!==t}}),t},W_=$i,X_=Vo,Y_=Dh,kh=Fh,H_=j_,Gh=X_(kh(),Object);W_(Gh,{getPolyfill:kh,implementation:Y_,shim:H_});var Z_=Gh,K_=Vo,Bh=Kn,J_=Ar,Yu=J_("%ArrayBuffer%",!0),ia=Bh("ArrayBuffer.prototype.byteLength",!0),Q_=Bh("Object.prototype.toString"),cf=!!Yu&&!ia&&new Yu(0).slice,ff=!!cf&&K_(cf),zh=ia||ff?function(t){if(!t||typeof t!="object")return!1;try{return ia?ia(t):ff(t,0),!0}catch{return!1}}:Yu?function(t){return Q_(t)==="[object ArrayBuffer]"}:function(t){return!1},$_=Date.prototype.getDay,tv=function(t){try{return $_.call(t),!0}catch{return!1}},ev=Object.prototype.toString,nv="[object Date]",rv=to(),iv=function(t){return typeof t!="object"||t===null?!1:rv?tv(t):ev.call(t)===nv},Hu=Kn,Uh=to(),qh,Vh,Zu,Ku;if(Uh){qh=Hu("Object.prototype.hasOwnProperty"),Vh=Hu("RegExp.prototype.exec"),Zu={};var wu=function(){throw Zu};Ku={toString:wu,valueOf:wu},typeof Symbol.toPrimitive=="symbol"&&(Ku[Symbol.toPrimitive]=wu)}var ov=Hu("Object.prototype.toString"),sv=Object.getOwnPropertyDescriptor,av="[object RegExp]",uv=Uh?function(t){if(!t||typeof t!="object")return!1;var n=sv(t,"lastIndex"),r=n&&qh(n,"value");if(!r)return!1;try{Vh(t,Ku)}catch(i){return i===Zu}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:ov(t)===av},lv=Kn,pf=lv("SharedArrayBuffer.prototype.byteLength",!0),cv=pf?function(t){if(!t||typeof t!="object")return!1;try{return pf(t),!0}catch{return!1}}:function(t){return!1},fv=Number.prototype.toString,pv=function(t){try{return fv.call(t),!0}catch{return!1}},hv=Object.prototype.toString,gv="[object Number]",dv=to(),mv=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:dv?pv(t):hv.call(t)===gv},jh=Kn,yv=jh("Boolean.prototype.toString"),_v=jh("Object.prototype.toString"),vv=function(t){try{return yv(t),!0}catch{return!1}},bv="[object Boolean]",Ev=to(),Sv=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:Ev&&Symbol.toStringTag in t?vv(t):_v(t)===bv},Ju={exports:{}},Iv=Object.prototype.toString,Lv=wl();if(Lv){var Nv=Symbol.prototype.toString,xv=/^Symbol\(.*\)$/,wv=function(t){return typeof t.valueOf()!="symbol"?!1:xv.test(Nv.call(t))};Ju.exports=function(t){if(typeof t=="symbol")return!0;if(Iv.call(t)!=="[object Symbol]")return!1;try{return wv(t)}catch{return!1}}}else Ju.exports=function(t){return!1};var Cv=Ju.exports,Qu={exports:{}},hf=typeof BigInt<"u"&&BigInt,Ov=function(){return typeof hf=="function"&&typeof BigInt=="function"&&typeof hf(42)=="bigint"&&typeof BigInt(42)=="bigint"},Pv=Ov();if(Pv){var Tv=BigInt.prototype.valueOf,Rv=function(t){try{return Tv.call(t),!0}catch{}return!1};Qu.exports=function(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:Rv(t)}}else Qu.exports=function(t){return!1};var Mv=Qu.exports,Av=Ph,Dv=mv,Fv=Sv,kv=Cv,Gv=Mv,Bv=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(Av(t))return"String";if(Dv(t))return"Number";if(Fv(t))return"Boolean";if(kv(t))return"Symbol";if(Gv(t))return"BigInt"},_a=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,gf=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,va;_a||(va=function(t){return!1});var $u=_a?_a.prototype.has:null,Cu=gf?gf.prototype.has:null;!va&&!$u&&(va=function(t){return!1});var zv=va||function(t){if(!t||typeof t!="object")return!1;try{if($u.call(t,$u),Cu)try{Cu.call(t,Cu)}catch{return!0}return t instanceof _a}catch{}return!1},tl={exports:{}},Uv=Ar,Wh=Kn,qv=Uv("%WeakSet%",!0),Ou=Wh("WeakSet.prototype.has",!0);if(Ou){var Pu=Wh("WeakMap.prototype.has",!0);tl.exports=function(t){if(!t||typeof t!="object")return!1;try{if(Ou(t,Ou),Pu)try{Pu(t,Pu)}catch{return!0}return t instanceof qv}catch{}return!1}}else tl.exports=function(t){return!1};var Vv=tl.exports,jv=Rh,Wv=Ah,Xv=zv,Yv=Vv,Hv=function(t){if(t&&typeof t=="object"){if(jv(t))return"Map";if(Wv(t))return"Set";if(Xv(t))return"WeakMap";if(Yv(t))return"WeakSet"}return!1},Xh=Function.prototype.toString,ho=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,el,oa;if(typeof ho=="function"&&typeof Object.defineProperty=="function")try{el=Object.defineProperty({},"length",{get:function(){throw oa}}),oa={},ho(function(){throw 42},null,el)}catch(e){e!==oa&&(ho=null)}else ho=null;var Zv=/^\s*class\b/,nl=function(t){try{var n=Xh.call(t);return Zv.test(n)}catch{return!1}},Tu=function(t){try{return nl(t)?!1:(Xh.call(t),!0)}catch{return!1}},sa=Object.prototype.toString,Kv="[object Object]",Jv="[object Function]",Qv="[object GeneratorFunction]",$v="[object HTMLAllCollection]",t0="[object HTML document.all class]",e0="[object HTMLCollection]",n0=typeof Symbol=="function"&&!!Symbol.toStringTag,r0=!(0 in[,]),rl=function(){return!1};if(typeof document=="object"){var i0=document.all;sa.call(i0)===sa.call(document.all)&&(rl=function(t){if((r0||!t)&&(typeof t>"u"||typeof t=="object"))try{var n=sa.call(t);return(n===$v||n===t0||n===e0||n===Kv)&&t("")==null}catch{}return!1})}var o0=ho?function(t){if(rl(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{ho(t,null,el)}catch(n){if(n!==oa)return!1}return!nl(t)&&Tu(t)}:function(t){if(rl(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(n0)return Tu(t);if(nl(t))return!1;var n=sa.call(t);return n!==Jv&&n!==Qv&&!/^\[object HTML/.test(n)?!1:Tu(t)},s0=o0,a0=Object.prototype.toString,Yh=Object.prototype.hasOwnProperty,u0=function(t,n,r){for(var i=0,o=t.length;i<o;i++)Yh.call(t,i)&&(r==null?n(t[i],i,t):n.call(r,t[i],i,t))},l0=function(t,n,r){for(var i=0,o=t.length;i<o;i++)r==null?n(t.charAt(i),i,t):n.call(r,t.charAt(i),i,t)},c0=function(t,n,r){for(var i in t)Yh.call(t,i)&&(r==null?n(t[i],i,t):n.call(r,t[i],i,t))},f0=function(t,n,r){if(!s0(n))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=r),a0.call(t)==="[object Array]"?u0(t,n,i):typeof t=="string"?l0(t,n,i):c0(t,n,i)},p0=f0,h0=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],Ru=h0,g0=typeof globalThis>"u"?Nl:globalThis,d0=function(){for(var t=[],n=0;n<Ru.length;n++)typeof g0[Ru[n]]=="function"&&(t[t.length]=Ru[n]);return t},ba=p0,m0=d0,df=Vo,zl=Kn,aa=Pl,y0=zl("Object.prototype.toString"),Hh=to(),mf=typeof globalThis>"u"?Nl:globalThis,il=m0(),Ul=zl("String.prototype.slice"),Mu=Object.getPrototypeOf,_0=zl("Array.prototype.indexOf",!0)||function(t,n){for(var r=0;r<t.length;r+=1)if(t[r]===n)return r;return-1},Ea={__proto__:null};Hh&&aa&&Mu?ba(il,function(e){var t=new mf[e];if(Symbol.toStringTag in t){var n=Mu(t),r=aa(n,Symbol.toStringTag);if(!r){var i=Mu(n);r=aa(i,Symbol.toStringTag)}Ea["$"+e]=df(r.get)}}):ba(il,function(e){var t=new mf[e],n=t.slice||t.set;n&&(Ea["$"+e]=df(n))});var v0=function(t){var n=!1;return ba(Ea,function(r,i){if(!n)try{"$"+r(t)===i&&(n=Ul(i,1))}catch{}}),n},b0=function(t){var n=!1;return ba(Ea,function(r,i){if(!n)try{r(t),n=Ul(i,1)}catch{}}),n},E0=function(t){if(!t||typeof t!="object")return!1;if(!Hh){var n=Ul(y0(t),8,-1);return _0(il,n)>-1?n:n!=="Object"?!1:b0(t)}return aa?v0(t):null},S0=Kn,yf=S0("ArrayBuffer.prototype.byteLength",!0),I0=zh,L0=function(t){return I0(t)?yf?yf(t):t.byteLength:NaN},Zh=ny,Dr=Kn,_f=xy,N0=Ar,bo=z_,x0=Ch,vf=Z_,bf=bh,Ef=Oh,Sf=zh,If=iv,Lf=uv,Nf=cv,xf=xl,wf=Bv,Cf=Hv,Of=E0,Pf=L0,Tf=Dr("SharedArrayBuffer.prototype.byteLength",!0),Rf=Dr("Date.prototype.getTime"),Au=Object.getPrototypeOf,Mf=Dr("Object.prototype.toString"),Sa=N0("%Set%",!0),ol=Dr("Map.prototype.has",!0),Ia=Dr("Map.prototype.get",!0),Af=Dr("Map.prototype.size",!0),La=Dr("Set.prototype.add",!0),Kh=Dr("Set.prototype.delete",!0),Na=Dr("Set.prototype.has",!0),ua=Dr("Set.prototype.size",!0);function Df(e,t,n,r){for(var i=bo(e),o;(o=i.next())&&!o.done;)if(ir(t,o.value,n,r))return Kh(e,o.value),!0;return!1}function Jh(e){if(typeof e>"u")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function w0(e,t,n,r,i,o){var s=Jh(n);if(s!=null)return s;var a=Ia(t,s),u=Zh({},i,{strict:!1});return typeof a>"u"&&!ol(t,s)||!ir(r,a,u,o)?!1:!ol(e,s)&&ir(r,a,u,o)}function C0(e,t,n){var r=Jh(n);return r??(Na(t,r)&&!Na(e,r))}function Ff(e,t,n,r,i,o){for(var s=bo(e),a,u;(a=s.next())&&!a.done;)if(u=a.value,ir(n,u,i,o)&&ir(r,Ia(t,u),i,o))return Kh(e,u),!0;return!1}function ir(e,t,n,r){var i=n||{};if(i.strict?vf(e,t):e===t)return!0;var o=wf(e),s=wf(t);if(o!==s)return!1;if(!e||!t||typeof e!="object"&&typeof t!="object")return i.strict?vf(e,t):e==t;var a=r.has(e),u=r.has(t),l;if(a&&u){if(r.get(e)===r.get(t))return!0}else l={};return a||r.set(e,l),u||r.set(t,l),T0(e,t,i,r)}function kf(e){return!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function O0(e,t,n,r){if(ua(e)!==ua(t))return!1;for(var i=bo(e),o=bo(t),s,a,u;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")u||(u=new Sa),La(u,s.value);else if(!Na(t,s.value)){if(n.strict||!C0(e,t,s.value))return!1;u||(u=new Sa),La(u,s.value)}if(u){for(;(a=o.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!Df(u,a.value,n.strict,r))return!1}else if(!n.strict&&!Na(e,a.value)&&!Df(u,a.value,n.strict,r))return!1;return ua(u)===0}return!0}function P0(e,t,n,r){if(Af(e)!==Af(t))return!1;for(var i=bo(e),o=bo(t),s,a,u,l,c,f;(s=i.next())&&!s.done;)if(l=s.value[0],c=s.value[1],l&&typeof l=="object")u||(u=new Sa),La(u,l);else if(f=Ia(t,l),typeof f>"u"&&!ol(t,l)||!ir(c,f,n,r)){if(n.strict||!w0(e,t,l,c,n,r))return!1;u||(u=new Sa),La(u,l)}if(u){for(;(a=o.next())&&!a.done;)if(l=a.value[0],f=a.value[1],l&&typeof l=="object"){if(!Ff(u,e,l,f,n,r))return!1}else if(!n.strict&&(!e.has(l)||!ir(Ia(e,l),f,n,r))&&!Ff(u,e,l,f,Zh({},n,{strict:!1}),r))return!1;return ua(u)===0}return!0}function T0(e,t,n,r){var i,o;if(typeof e!=typeof t||e==null||t==null||Mf(e)!==Mf(t)||bf(e)!==bf(t))return!1;var s=Ef(e),a=Ef(t);if(s!==a)return!1;var u=e instanceof Error,l=t instanceof Error;if(u!==l||(u||l)&&(e.name!==t.name||e.message!==t.message))return!1;var c=Lf(e),f=Lf(t);if(c!==f||(c||f)&&(e.source!==t.source||_f(e)!==_f(t)))return!1;var p=If(e),g=If(t);if(p!==g||(p||g)&&Rf(e)!==Rf(t)||n.strict&&Au&&Au(e)!==Au(t))return!1;var h=Of(e),m=Of(t);if(h!==m)return!1;if(h||m){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var d=kf(e),y=kf(t);if(d!==y)return!1;if(d||y){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var v=Sf(e),b=Sf(t);if(v!==b)return!1;if(v||b)return Pf(e)!==Pf(t)?!1:typeof Uint8Array=="function"&&ir(new Uint8Array(e),new Uint8Array(t),n,r);var I=Nf(e),w=Nf(t);if(I!==w)return!1;if(I||w)return Tf(e)!==Tf(t)?!1:typeof Uint8Array=="function"&&ir(new Uint8Array(e),new Uint8Array(t),n,r);if(typeof e!=typeof t)return!1;var O=xf(e),M=xf(t);if(O.length!==M.length)return!1;for(O.sort(),M.sort(),i=O.length-1;i>=0;i--)if(O[i]!=M[i])return!1;for(i=O.length-1;i>=0;i--)if(o=O[i],!ir(e[o],t[o],n,r))return!1;var x=Cf(e),T=Cf(t);return x!==T?!1:x==="Set"||T==="Set"?O0(e,t,n,r):x==="Map"?P0(e,t,n,r):!0}var R0=function(t,n,r){return ir(t,n,r,x0())};const M0=Vd(R0);var A0=Object.defineProperty,Nt=(e,t)=>A0(e,"name",{value:t,configurable:!0}),D0=class{constructor(t){this.direction=!1,this.compareProperties=!0;var n,r,i;this.precision=10**-((n=t==null?void 0:t.precision)!=null?n:17),this.direction=(r=t==null?void 0:t.direction)!=null?r:!1,this.compareProperties=(i=t==null?void 0:t.compareProperties)!=null?i:!0}compare(t,n){if(t.type!==n.type||!os(t,n))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,n.coordinates);case"LineString":return this.compareLine(t.coordinates,n.coordinates);case"Polygon":return this.comparePolygon(t,n);case"GeometryCollection":return this.compareGeometryCollection(t,n);case"Feature":return this.compareFeature(t,n);case"FeatureCollection":return this.compareFeatureCollection(t,n);default:if(t.type.startsWith("Multi")){const r=sl(t),i=sl(n);return r.every(o=>i.some(s=>this.compare(o,s)))}}return!1}compareCoord(t,n){return t.length===n.length&&t.every((r,i)=>Math.abs(r-n[i])<this.precision)}compareLine(t,n,r=0,i=!1){if(!os(t,n))return!1;const o=t;let s=n;if(i&&!this.compareCoord(o[0],s[0])){const u=this.fixStartIndex(s,o);if(u)s=u;else return!1}const a=this.compareCoord(o[r],s[r]);return this.direction||a?this.comparePath(o,s):this.compareCoord(o[r],s[s.length-(1+r)])?this.comparePath(o.slice().reverse(),s):!1}fixStartIndex(t,n){let r,i=-1;for(let o=0;o<t.length;o++)if(this.compareCoord(t[o],n[0])){i=o;break}return i>=0&&(r=[].concat(t.slice(i,t.length),t.slice(1,i+1))),r}comparePath(t,n){return t.every((r,i)=>this.compareCoord(r,n[i]))}comparePolygon(t,n){if(this.compareLine(t.coordinates[0],n.coordinates[0],1,!0)){const r=t.coordinates.slice(1,t.coordinates.length),i=n.coordinates.slice(1,n.coordinates.length);return r.every(o=>i.some(s=>this.compareLine(o,s,1,!0)))}return!1}compareGeometryCollection(t,n){return os(t.geometries,n.geometries)&&this.compareBBox(t,n)&&t.geometries.every((r,i)=>this.compare(r,n.geometries[i]))}compareFeature(t,n){return t.id===n.id&&(this.compareProperties?M0(t.properties,n.properties):!0)&&this.compareBBox(t,n)&&this.compare(t.geometry,n.geometry)}compareFeatureCollection(t,n){return os(t.features,n.features)&&this.compareBBox(t,n)&&t.features.every((r,i)=>this.compare(r,n.features[i]))}compareBBox(t,n){return!t.bbox&&!n.bbox||(t.bbox&&n.bbox?this.compareCoord(t.bbox,n.bbox):!1)}};Nt(D0,"GeojsonEquality");function os(e,t){return e.coordinates?e.coordinates.length===t.coordinates.length:e.length===t.length}Nt(os,"sameLength");function sl(e){return e.coordinates.map(t=>({type:e.type.replace("Multi",""),coordinates:t}))}Nt(sl,"explode");var yn=63710088e-1,Qh={centimeters:yn*100,centimetres:yn*100,degrees:360/(2*Math.PI),feet:yn*3.28084,inches:yn*39.37,kilometers:yn/1e3,kilometres:yn/1e3,meters:yn,metres:yn,miles:yn/1609.344,millimeters:yn*1e3,millimetres:yn*1e3,nauticalmiles:yn/1852,radians:1,yards:yn*1.0936},Gf={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function wr(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}Nt(wr,"feature");function F0(e,t,n={}){switch(e){case"Point":return Ur(t).geometry;case"LineString":return qr(t).geometry;case"Polygon":return ql(t).geometry;case"MultiPoint":return tg(t).geometry;case"MultiLineString":return $h(t).geometry;case"MultiPolygon":return eg(t).geometry;default:throw new Error(e+" is invalid")}}Nt(F0,"geometry");function Ur(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!xa(e[0])||!xa(e[1]))throw new Error("coordinates must contain numbers");return wr({type:"Point",coordinates:e},t,n)}Nt(Ur,"point");function k0(e,t,n={}){return Wa(e.map(r=>Ur(r,t)),n)}Nt(k0,"points");function ql(e,t,n={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}return wr({type:"Polygon",coordinates:e},t,n)}Nt(ql,"polygon");function G0(e,t,n={}){return Wa(e.map(r=>ql(r,t)),n)}Nt(G0,"polygons");function qr(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return wr({type:"LineString",coordinates:e},t,n)}Nt(qr,"lineString");function B0(e,t,n={}){return Wa(e.map(r=>qr(r,t)),n)}Nt(B0,"lineStrings");function Wa(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}Nt(Wa,"featureCollection");function $h(e,t,n={}){return wr({type:"MultiLineString",coordinates:e},t,n)}Nt($h,"multiLineString");function tg(e,t,n={}){return wr({type:"MultiPoint",coordinates:e},t,n)}Nt(tg,"multiPoint");function eg(e,t,n={}){return wr({type:"MultiPolygon",coordinates:e},t,n)}Nt(eg,"multiPolygon");function z0(e,t,n={}){return wr({type:"GeometryCollection",geometries:e},t,n)}Nt(z0,"geometryCollection");function U0(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,t||0);return Math.round(e*n)/n}Nt(U0,"round");function ng(e,t="kilometers"){const n=Qh[t];if(!n)throw new Error(t+" units is invalid");return e*n}Nt(ng,"radiansToLength");function Vl(e,t="kilometers"){const n=Qh[t];if(!n)throw new Error(t+" units is invalid");return e/n}Nt(Vl,"lengthToRadians");function q0(e,t){return rg(Vl(e,t))}Nt(q0,"lengthToDegrees");function V0(e){let t=e%360;return t<0&&(t+=360),t}Nt(V0,"bearingToAzimuth");function rg(e){return e%(2*Math.PI)*180/Math.PI}Nt(rg,"radiansToDegrees");function j0(e){return e%360*Math.PI/180}Nt(j0,"degreesToRadians");function W0(e,t="kilometers",n="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return ng(Vl(e,t),n)}Nt(W0,"convertLength");function X0(e,t="meters",n="kilometers"){if(!(e>=0))throw new Error("area must be a positive number");const r=Gf[t];if(!r)throw new Error("invalid original units");const i=Gf[n];if(!i)throw new Error("invalid final units");return e/r*i}Nt(X0,"convertArea");function xa(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}Nt(xa,"isNumber");function jl(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}Nt(jl,"isObject");function Y0(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(t=>{if(!xa(t))throw new Error("bbox must only contain numbers")})}Nt(Y0,"validateBBox");function H0(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}Nt(H0,"validateId");var Z0=Object.defineProperty,Be=(e,t)=>Z0(e,"name",{value:t,configurable:!0});function Wo(e,t,n){if(e!==null)for(var r,i,o,s,a,u,l,c=0,f=0,p,g=e.type,h=g==="FeatureCollection",m=g==="Feature",d=h?e.features.length:1,y=0;y<d;y++){l=h?e.features[y].geometry:m?e.geometry:e,p=l?l.type==="GeometryCollection":!1,a=p?l.geometries.length:1;for(var v=0;v<a;v++){var b=0,I=0;if(s=p?l.geometries[v]:l,s!==null){u=s.coordinates;var w=s.type;switch(c=n&&(w==="Polygon"||w==="MultiPolygon")?1:0,w){case null:break;case"Point":if(t(u,f,y,b,I)===!1)return!1;f++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(t(u[r],f,y,b,I)===!1)return!1;f++,w==="MultiPoint"&&b++}w==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(t(u[r][i],f,y,b,I)===!1)return!1;f++}w==="MultiLineString"&&b++,w==="Polygon"&&I++}w==="Polygon"&&b++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(I=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(t(u[r][i][o],f,y,b,I)===!1)return!1;f++}I++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(Wo(s.geometries[r],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}Be(Wo,"coordEach");function K0(e,t,n,r){var i=n;return Wo(e,function(o,s,a,u,l){s===0&&n===void 0?i=o:i=t(i,o,s,a,u,l)},r),i}Be(K0,"coordReduce");function ig(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&t(e.features[n].properties,n)!==!1;n++);break;case"Feature":t(e.properties,0);break}}Be(ig,"propEach");function J0(e,t,n){var r=n;return ig(e,function(i,o){o===0&&n===void 0?r=i:r=t(r,i,o)}),r}Be(J0,"propReduce");function og(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}Be(og,"featureEach");function Q0(e,t,n){var r=n;return og(e,function(i,o){o===0&&n===void 0?r=i:r=t(r,i,o)}),r}Be(Q0,"featureReduce");function $0(e){var t=[];return Wo(e,function(n){t.push(n)}),t}Be($0,"coordAll");function Wl(e,t){var n,r,i,o,s,a,u,l,c,f,p=0,g=e.type==="FeatureCollection",h=e.type==="Feature",m=g?e.features.length:1;for(n=0;n<m;n++){for(a=g?e.features[n].geometry:h?e.geometry:e,l=g?e.features[n].properties:h?e.properties:{},c=g?e.features[n].bbox:h?e.bbox:void 0,f=g?e.features[n].id:h?e.id:void 0,u=a?a.type==="GeometryCollection":!1,s=u?a.geometries.length:1,i=0;i<s;i++){if(o=u?a.geometries[i]:a,o===null){if(t(null,p,l,c,f)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,p,l,c,f)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],p,l,c,f)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}Be(Wl,"geomEach");function t1(e,t,n){var r=n;return Wl(e,function(i,o,s,a,u){o===0&&n===void 0?r=i:r=t(r,i,o,s,a,u)}),r}Be(t1,"geomReduce");function Xa(e,t){Wl(e,function(n,r,i,o,s){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(wr(n,i,{bbox:o,id:s}),r,0)===!1?!1:void 0}var u;switch(a){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var l=0;l<n.coordinates.length;l++){var c=n.coordinates[l],f={type:u,coordinates:c};if(t(wr(f,i),r,l)===!1)return!1}})}Be(Xa,"flattenEach");function e1(e,t,n){var r=n;return Xa(e,function(i,o,s){o===0&&s===0&&n===void 0?r=i:r=t(r,i,o,s)}),r}Be(e1,"flattenReduce");function sg(e,t){Xa(e,function(n,r,i){var o=0;if(n.geometry){var s=n.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var a,u=0,l=0,c=0;if(Wo(n,function(f,p,g,h,m){if(a===void 0||r>u||h>l||m>c){a=f,u=r,l=h,c=m,o=0;return}var d=qr([a,f],n.properties);if(t(d,r,i,m,o)===!1)return!1;o++,a=f})===!1)return!1}}})}Be(sg,"segmentEach");function n1(e,t,n){var r=n,i=!1;return sg(e,function(o,s,a,u,l){i===!1&&n===void 0?r=o:r=t(r,o,s,a,u,l),i=!0}),r}Be(n1,"segmentReduce");function ag(e,t){if(!e)throw new Error("geojson is required");Xa(e,function(n,r,i){if(n.geometry!==null){var o=n.geometry.type,s=n.geometry.coordinates;switch(o){case"LineString":if(t(n,r,i,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(t(qr(s[a],n.properties),r,i,a)===!1)return!1;break}}})}Be(ag,"lineEach");function r1(e,t,n){var r=n;return ag(e,function(i,o,s,a){o===0&&n===void 0?r=i:r=t(r,i,o,s,a)}),r}Be(r1,"lineReduce");function i1(e,t){if(t=t||{},!jl(t))throw new Error("options is invalid");var n=t.featureIndex||0,r=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.segmentIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,a=e.features[n].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var u=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=u.length+o-1),qr([u[o],u[o+1]],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o-1),qr([u[i][o],u[i][o+1]],s,t);case"MultiLineString":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o-1),qr([u[r][o],u[r][o+1]],s,t);case"MultiPolygon":return r<0&&(r=u.length+r),i<0&&(i=u[r].length+i),o<0&&(o=u[r][i].length-o-1),qr([u[r][i][o],u[r][i][o+1]],s,t)}throw new Error("geojson is invalid")}Be(i1,"findSegment");function o1(e,t){if(t=t||{},!jl(t))throw new Error("options is invalid");var n=t.featureIndex||0,r=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.coordIndex||0,s=t.properties,a;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,a=e.features[n].geometry;break;case"Feature":s=s||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var u=a.coordinates;switch(a.type){case"Point":return Ur(u,s,t);case"MultiPoint":return r<0&&(r=u.length+r),Ur(u[r],s,t);case"LineString":return o<0&&(o=u.length+o),Ur(u[o],s,t);case"Polygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),Ur(u[i][o],s,t);case"MultiLineString":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o),Ur(u[r][o],s,t);case"MultiPolygon":return r<0&&(r=u.length+r),i<0&&(i=u[r].length+i),o<0&&(o=u[r][i].length-o),Ur(u[r][i][o],s,t)}throw new Error("geojson is invalid")}Be(o1,"findPoint");var s1=Object.defineProperty,a1=(e,t)=>s1(e,"name",{value:t,configurable:!0});function ug(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return Wo(e,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}a1(ug,"bbox");var u1=ug,wa=l1;function l1(e){var t,n,r;if(e){if(Array.isArray(e)){for(t=[],n=e.length,r=0;r<n;r++){var i=e[r];i!=null&&t.push(i)}return t}if(typeof e=="object"){t={};var o=Object.keys(e);for(n=o.length,r=0;r<n;r++){var s=o[r],a=e[s];a!=null&&(t[s]=a)}return t}}}var lo=Xl;function Xl(e,t){return e===t||e!==e&&t!==t?!0:typeof e!=typeof t||{}.toString.call(e)!={}.toString.call(t)||e!==Object(e)||!e?!1:Array.isArray(e)?Bf(e,t):{}.toString.call(e)=="[object Set]"?Bf(Array.from(e),Array.from(t)):{}.toString.call(e)=="[object Object]"?f1(e,t):c1(e,t)}function c1(e,t){return e.toString()===t.toString()}function Bf(e,t){var n=e.length;if(n!=t.length)return!1;for(var r=0;r<n;r++)if(!Xl(e[r],t[r]))return!1;return!0}function f1(e,t){var n=Object.keys(e),r=n.length;if(r!=Object.keys(t).length)return!1;for(var i=0;i<r;i++){var o=n[i];if(!(t.hasOwnProperty(o)&&Xl(e[o],t[o])))return!1}return!0}let p1=Sr(h1());function h1(){return(window.localStorage.getItem("google-api-key")||"").length>0?"google":(window.localStorage.getItem("os-api-key")||"").length>0?"os-road":"maptiler-hybrid"}let g1=Date.now();function Ya(e){return`${e}-${g1++}`}const Yl=Symbol.for("svelte-maplibre");function Xo(){return Td(Yl)}function d1(e){let t=new WeakMap;return n=>{var s;let r=t.get(n.originalEvent);if(r!==void 0)return r;let o=(s=n.target.queryRenderedFeatures(n.point).find(a=>{var u;return(u=e.get(a.layer.id))==null?void 0:u.interactive}))==null?void 0:s.layer.id;return t.set(n.originalEvent,o),o}}function m1(){let e=new Map;return Jp(Yl,{map:Sr(null),source:du(null),layer:du(null),popupTarget:du(null),cluster:Sr(),loadedImages:Sr(new Set),minzoom:Sr(0),maxzoom:Sr(24),layerEvent:Sr(null),layerInfo:e,eventTopMost:d1(e)})}function zf(e){return{subscribe:e.subscribe}}function Hl({key:e,setPopupTarget:t=!1,setCluster:n=!1,setMouseEvent:r=!1}){let i=Xo(),o=Sr(null),s=zf(o),a={...i,[e]:zf(o)};if(t&&(a.popupTarget=s),r){let u=Sr(null);a.layerEvent=u,i.layerEvent=u}return n&&(a.cluster=Sr()),Jp(Yl,a),{...i,self:o}}function y1(){return Hl({key:"source",setCluster:!0})}function _1(e=!0){return Hl({key:"layer",setPopupTarget:e,setMouseEvent:e})}function XS(){return Hl({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function YS(e){return"layerType"in e&&e.layerType==="deckgl"}function Uf(e){let t;return n=>{if(n)for(let r in n){let i=t==null?void 0:t[r],o=n[r];i!==o&&e(r,o,i)}else if(t)for(let r in t)e(r,void 0,t[r]);t=n}}function v1(e,...t){let n=[e];for(let r of t)if(r)Array.isArray(r)&&r[0]===e?n.push(...r.slice(1)):n.push(r);else continue;if(n.length!==1)return n.length===2?n[1]:n}function b1(e){return e===!0?["has","point_count"]:e===!1?["!",["has","point_count"]]:void 0}function HS(e,t){return["case",["boolean",["feature-state","hover"],!1],t,e]}function qf(e){let t=e[0],n,r,i=Vf(e);return{c(){i.c(),n=ln()},l(o){i.l(o),n=ln()},m(o,s){i.m(o,s),nt(o,n,s),r=!0},p(o,s){s[0]&1&&Jt(t,t=o[0])?(Fn(),Z(i,1,1,zt),kn(),i=Vf(o),i.c(),X(i,1),i.m(n.parentNode,n)):i.p(o,s)},i(o){r||(X(i),r=!0)},o(o){Z(i),r=!1},d(o){o&&U(n),i.d(o)}}}function Vf(e){let t;const n=e[36].default,r=Zi(n,e,e[35],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o[1]&16)&&Ki(r,n,i,i[35],t?Qi(n,i[35],o,null):Ji(i[35]),null)},i(i){t||(X(r,i),t=!0)},o(i){Z(r,i),t=!1},d(i){r&&r.d(i)}}}function E1(e){let t,n,r=e[0]&&qf(e);return{c(){r&&r.c(),t=ln()},l(i){r&&r.l(i),t=ln()},m(i,o){r&&r.m(i,o),nt(i,t,o),n=!0},p(i,o){i[0]?r?(r.p(i,o),o[0]&1&&X(r,1)):(r=qf(i),r.c(),X(r,1),r.m(t.parentNode,t)):r&&(Fn(),Z(r,1,1,()=>{r=null}),kn())},i(i){n||(X(r),n=!0)},o(i){Z(r),n=!1},d(i){i&&U(t),r&&r.d(i)}}}function S1(e,t,n){let r,i,o,s,a,u,l,c,f,p,g,h,{$$slots:m={},$$scope:d}=t,{id:y=Ya("layer")}=t,{source:v=void 0}=t,{sourceLayer:b=void 0}=t,{beforeId:I=void 0}=t,{beforeLayerType:w=void 0}=t,{type:O}=t,{paint:M=void 0}=t,{layout:x=void 0}=t,{filter:T=void 0}=t,{applyToClusters:k=void 0}=t,{minzoom:A=void 0}=t,{maxzoom:C=void 0}=t,{manageHoverState:$=!1}=t,{hovered:N=null}=t,{interactive:z=!0}=t,{hoverCursor:q=void 0}=t,{eventsIfTopMost:ot=!1}=t;const ht=Ua(),{map:St,source:Ot,self:kt,minzoom:qt,maxzoom:Kt,eventTopMost:He,layerInfo:Ee}=_1();Ue(e,St,_=>n(31,f=_)),Ue(e,Ot,_=>n(32,p=_)),Ue(e,kt,_=>n(0,c=_)),Ue(e,qt,_=>n(34,h=_)),Ue(e,Kt,_=>n(33,g=_)),Hr(()=>{c&&f&&(Ee.delete(c),f==null||f.removeLayer(c))});let me;function On(_){var Qt,gt;if(!z||!c||!f||ot&&He(_)!==c)return;let B=_.features??[],V=(gt=(Qt=B[0])==null?void 0:Qt.properties)==null?void 0:gt.cluster_id,Re={event:_,map:f,clusterId:V,layer:c,source:a,features:B};ht(_.type,Re)}function Gr(_){var Qt,gt;if(!z||!c||!f||ot&&He(_)!==c)return;q&&(f.getCanvas().style.cursor=q);let B=_.features??[];n(6,N=B[0]??null);let V=(gt=(Qt=B[0])==null?void 0:Qt.properties)==null?void 0:gt.cluster_id;ht("mouseenter",{event:_,map:f,clusterId:V,layer:c,source:a,features:B})}function Oi(_){var Qt,gt,dn;if(!z||!f)return;if(ot&&He(_)!==c){n(6,N=null),$&&me!==void 0&&(f==null||f.setFeatureState({source:a,sourceLayer:b,id:me},{hover:!1}),me=void 0);return}f.getCanvas().style.cursor=q;let B=_.features??[],V=(gt=(Qt=B[0])==null?void 0:Qt.properties)==null?void 0:gt.cluster_id,Re=(dn=B[0])==null?void 0:dn.id;Re!==me&&($&&(me!==void 0&&(f==null||f.setFeatureState({source:a,id:me,sourceLayer:b},{hover:!1})),f==null||f.setFeatureState({source:a,id:Re,sourceLayer:b},{hover:!0})),me=Re,n(6,N=B[0]??null)),ht("mousemove",{event:_,map:f,clusterId:V,layer:c,source:a,features:B})}function ii(_){if(!(!z||!c||!f)){if(q&&(f.getCanvas().style.cursor=""),n(6,N=null),$&&me!==void 0){const B={source:a,id:me,sourceLayer:b};f==null||f.setFeatureState(B,{hover:!1}),me=void 0}ht("mouseleave",{map:f,layer:c,source:a})}}let Br=!0;function tr(_){f&&(f.off("click",_,On),f.off("dblclick",_,On),f.off("contextmenu",_,On),f.off("mouseenter",_,Gr),f.off("mousemove",_,Oi),f.off("mouseleave",_,ii))}return Hr(()=>{f&&c&&tr(c)}),e.$$set=_=>{"id"in _&&n(7,y=_.id),"source"in _&&n(8,v=_.source),"sourceLayer"in _&&n(9,b=_.sourceLayer),"beforeId"in _&&n(10,I=_.beforeId),"beforeLayerType"in _&&n(11,w=_.beforeLayerType),"type"in _&&n(12,O=_.type),"paint"in _&&n(13,M=_.paint),"layout"in _&&n(14,x=_.layout),"filter"in _&&n(15,T=_.filter),"applyToClusters"in _&&n(16,k=_.applyToClusters),"minzoom"in _&&n(17,A=_.minzoom),"maxzoom"in _&&n(18,C=_.maxzoom),"manageHoverState"in _&&n(19,$=_.manageHoverState),"hovered"in _&&n(6,N=_.hovered),"interactive"in _&&n(20,z=_.interactive),"hoverCursor"in _&&n(21,q=_.hoverCursor),"eventsIfTopMost"in _&&n(22,ot=_.eventsIfTopMost),"$$scope"in _&&n(35,d=_.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&65536&&n(30,r=b1(k)),e.$$.dirty[0]&1073774592&&n(24,i=v1("all",r,T)),e.$$.dirty[0]&131072|e.$$.dirty[1]&8&&n(26,o=A??h),e.$$.dirty[0]&262144|e.$$.dirty[1]&4&&n(25,s=C??g),e.$$.dirty[0]&256|e.$$.dirty[1]&2&&n(29,a=v||p),e.$$.dirty[0]&654343809|e.$$.dirty[1]&1&&f&&c!==y&&a){c&&(tr(c),Ee.delete(c));let _=I;if(!I&&w){let B=f.getStyle().layers,V=typeof w=="function"?w:Qt=>Qt.type===w,Re=B==null?void 0:B.find(V);Re&&(_=Re.id)}Ti(kt,c=y,c),f.addLayer(wa({id:c,type:O,source:a,"source-layer":b,filter:i,paint:M,layout:x,minzoom:o,maxzoom:s}),_),n(23,Br=!0),f.on("click",c,On),f.on("dblclick",c,On),f.on("contextmenu",c,On),f.on("mouseenter",c,Gr),f.on("mousemove",c,Oi),f.on("mouseleave",c,ii)}e.$$.dirty[0]&1048577&&c&&Ee.set(c,{interactive:z}),e.$$.dirty[0]&1|e.$$.dirty[1]&1&&n(28,u=c?Uf((_,B)=>f==null?void 0:f.setPaintProperty(c,_,B)):void 0),e.$$.dirty[0]&1|e.$$.dirty[1]&1&&n(27,l=c?Uf((_,B)=>f==null?void 0:f.setLayoutProperty(c,_,B)):void 0),e.$$.dirty[0]&268443648&&(u==null||u(M)),e.$$.dirty[0]&134234112&&(l==null||l(x)),e.$$.dirty[0]&100663297|e.$$.dirty[1]&1&&c&&(f==null||f.setLayerZoomRange(c,o,s)),e.$$.dirty[0]&25165825|e.$$.dirty[1]&1&&c&&(Br?n(23,Br=!1):f==null||f.setFilter(c,i))},[c,St,Ot,kt,qt,Kt,N,y,v,b,I,w,O,M,x,T,k,A,C,$,z,q,ot,Br,i,s,o,l,u,a,r,f,p,g,h,d,m]}class lg extends ge{constructor(t){super(),de(this,t,S1,E1,Jt,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,interactive:20,hoverCursor:21,eventsIfTopMost:22},null,[-1,-1])}}function I1(e){let t;const n=e[16].default,r=Zi(n,e,e[24],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&16777216)&&Ki(r,n,i,i[24],t?Qi(n,i[24],o,null):Ji(i[24]),null)},i(i){t||(X(r,i),t=!0)},o(i){Z(r,i),t=!1},d(i){r&&r.d(i)}}}function L1(e){let t,n,r;function i(s){e[17](s)}let o={id:e[1],type:"circle",source:e[2],sourceLayer:e[3],beforeId:e[4],beforeLayerType:e[5],paint:e[6],layout:e[7],filter:e[8],applyToClusters:e[9],minzoom:e[10],maxzoom:e[11],hoverCursor:e[12],manageHoverState:e[13],eventsIfTopMost:e[14],interactive:e[15],$$slots:{default:[I1]},$$scope:{ctx:e}};return e[0]!==void 0&&(o.hovered=e[0]),t=new lg({props:o}),Ts.push(()=>Ll(t,"hovered",i)),t.$on("click",e[18]),t.$on("dblclick",e[19]),t.$on("contextmenu",e[20]),t.$on("mouseenter",e[21]),t.$on("mousemove",e[22]),t.$on("mouseleave",e[23]),{c(){$t(t.$$.fragment)},l(s){te(t.$$.fragment,s)},m(s,a){ee(t,s,a),r=!0},p(s,[a]){const u={};a&2&&(u.id=s[1]),a&4&&(u.source=s[2]),a&8&&(u.sourceLayer=s[3]),a&16&&(u.beforeId=s[4]),a&32&&(u.beforeLayerType=s[5]),a&64&&(u.paint=s[6]),a&128&&(u.layout=s[7]),a&256&&(u.filter=s[8]),a&512&&(u.applyToClusters=s[9]),a&1024&&(u.minzoom=s[10]),a&2048&&(u.maxzoom=s[11]),a&4096&&(u.hoverCursor=s[12]),a&8192&&(u.manageHoverState=s[13]),a&16384&&(u.eventsIfTopMost=s[14]),a&32768&&(u.interactive=s[15]),a&16777216&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.hovered=s[0],Il(()=>n=!1)),t.$set(u)},i(s){r||(X(t.$$.fragment,s),r=!0)},o(s){Z(t.$$.fragment,s),r=!1},d(s){ne(t,s)}}}function N1(e,t,n){let{$$slots:r={},$$scope:i}=t,{id:o=Ya("circle")}=t,{source:s=void 0}=t,{sourceLayer:a=void 0}=t,{beforeId:u=void 0}=t,{beforeLayerType:l=void 0}=t,{paint:c}=t,{layout:f=void 0}=t,{filter:p=void 0}=t,{applyToClusters:g=void 0}=t,{minzoom:h=void 0}=t,{maxzoom:m=void 0}=t,{hoverCursor:d=void 0}=t,{manageHoverState:y=!1}=t,{hovered:v=null}=t,{eventsIfTopMost:b=!1}=t,{interactive:I=!0}=t;function w(C){v=C,n(0,v)}function O(C){on.call(this,e,C)}function M(C){on.call(this,e,C)}function x(C){on.call(this,e,C)}function T(C){on.call(this,e,C)}function k(C){on.call(this,e,C)}function A(C){on.call(this,e,C)}return e.$$set=C=>{"id"in C&&n(1,o=C.id),"source"in C&&n(2,s=C.source),"sourceLayer"in C&&n(3,a=C.sourceLayer),"beforeId"in C&&n(4,u=C.beforeId),"beforeLayerType"in C&&n(5,l=C.beforeLayerType),"paint"in C&&n(6,c=C.paint),"layout"in C&&n(7,f=C.layout),"filter"in C&&n(8,p=C.filter),"applyToClusters"in C&&n(9,g=C.applyToClusters),"minzoom"in C&&n(10,h=C.minzoom),"maxzoom"in C&&n(11,m=C.maxzoom),"hoverCursor"in C&&n(12,d=C.hoverCursor),"manageHoverState"in C&&n(13,y=C.manageHoverState),"hovered"in C&&n(0,v=C.hovered),"eventsIfTopMost"in C&&n(14,b=C.eventsIfTopMost),"interactive"in C&&n(15,I=C.interactive),"$$scope"in C&&n(24,i=C.$$scope)},[v,o,s,a,u,l,c,f,p,g,h,m,d,y,b,I,r,w,O,M,x,T,k,A,i]}class ZS extends ge{constructor(t){super(),de(this,t,N1,L1,Jt,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function x1(e,t,n){let r;const{map:i}=Xo();Ue(e,i,u=>n(4,r=u));let{position:o="top-left"}=t,{container:s=void 0}=t,a=null;return Hr(()=>{r!=null&&r.loaded()&&a&&r.removeControl(a)}),e.$$set=u=>{"position"in u&&n(1,o=u.position),"container"in u&&n(2,s=u.container)},e.$$.update=()=>{if(e.$$.dirty&30&&r&&!a){let u;typeof s=="string"?u=document.querySelector(s)??void 0:u=s,n(3,a=new qo.FullscreenControl({container:u})),r.addControl(a,o)}},[i,o,s,a,r]}class w1 extends ge{constructor(t){super(),de(this,t,x1,null,Jt,{position:1,container:2})}}function C1(e,t,n,r,i){let o=!1;e.getSource(t)&&(o=!0,e.removeSource(t));const s=()=>{r(t)&&(e.addSource(t,n),i())};if(o){const a=()=>{t&&(e.getSource(t)?setTimeout(a,1):s())};a()}else s()}function O1(e,t,n){Rd().then(()=>{let r=Md(e);if(!r)return;r.getSource(t)===n&&r.removeSource(t)})}function jf(e){let t=e[0],n,r,i=Wf(e);return{c(){i.c(),n=ln()},l(o){i.l(o),n=ln()},m(o,s){i.m(o,s),nt(o,n,s),r=!0},p(o,s){s&1&&Jt(t,t=o[0])?(Fn(),Z(i,1,1,zt),kn(),i=Wf(o),i.c(),X(i,1),i.m(n.parentNode,n)):i.p(o,s)},i(o){r||(X(i),r=!0)},o(o){Z(i),r=!1},d(o){o&&U(n),i.d(o)}}}function Wf(e){let t;const n=e[19].default,r=Zi(n,e,e[18],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&262144)&&Ki(r,n,i,i[18],t?Qi(n,i[18],o,null):Ji(i[18]),null)},i(i){t||(X(r,i),t=!0)},o(i){Z(r,i),t=!1},d(i){r&&r.d(i)}}}function P1(e){let t,n,r=e[0]&&jf(e);return{c(){r&&r.c(),t=ln()},l(i){r&&r.l(i),t=ln()},m(i,o){r&&r.m(i,o),nt(i,t,o),n=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&X(r,1)):(r=jf(i),r.c(),X(r,1),r.m(t.parentNode,t)):r&&(Fn(),Z(r,1,1,()=>{r=null}),kn())},i(i){n||(X(r),n=!0)},o(i){Z(r),n=!1},d(i){i&&U(t),r&&r.d(i)}}}function T1(e,t,n){let r,i,o,{$$slots:s={},$$scope:a}=t,{id:u=Ya("geojson")}=t,{data:l}=t,{generateId:c=!1}=t,{promoteId:f=void 0}=t,{filter:p=void 0}=t,{lineMetrics:g=void 0}=t,{cluster:h=void 0}=t,{maxzoom:m=void 0}=t,{attribution:d=void 0}=t,{buffer:y=void 0}=t,{tolerance:v=void 0}=t;const{map:b,cluster:I,self:w}=y1();Ue(e,b,x=>n(17,i=x)),Ue(e,I,x=>n(20,o=x)),Ue(e,w,x=>n(0,r=x));let O,M=!0;return Hr(()=>{r&&O&&i&&(O1(b,r,O),Ti(w,r=null,r),n(15,O=void 0))}),e.$$set=x=>{"id"in x&&n(4,u=x.id),"data"in x&&n(5,l=x.data),"generateId"in x&&n(6,c=x.generateId),"promoteId"in x&&n(7,f=x.promoteId),"filter"in x&&n(8,p=x.filter),"lineMetrics"in x&&n(9,g=x.lineMetrics),"cluster"in x&&n(10,h=x.cluster),"maxzoom"in x&&n(11,m=x.maxzoom),"attribution"in x&&n(12,d=x.attribution),"buffer"in x&&n(13,y=x.buffer),"tolerance"in x&&n(14,v=x.tolerance),"$$scope"in x&&n(18,a=x.$$scope)},e.$$.update=()=>{e.$$.dirty&1024&&Ti(I,o=h,o),e.$$.dirty&196593&&i&&r!==u&&(Ti(w,r=u,r),C1(i,r,wa({type:"geojson",data:l,filter:p,lineMetrics:g,generateId:c,promoteId:f,cluster:!!h,clusterMinPoints:h==null?void 0:h.minPoints,clusterMaxZoom:h==null?void 0:h.maxZoom,clusterRadius:h==null?void 0:h.radius,clusterProperties:h==null?void 0:h.properties,maxzoom:m,attribution:d,buffer:y,tolerance:v}),x=>i&&x===r,()=>{r&&(n(15,O=i==null?void 0:i.getSource(r)),n(16,M=!0))})),e.$$.dirty&131088&&(i==null||i.on("style.load",()=>{n(15,O=i==null?void 0:i.getSource(u))})),e.$$.dirty&98336&&O&&(M?n(16,M=!1):O.setData(l)),e.$$.dirty&33792&&(O==null||O.setClusterOptions(wa({cluster:!!h,clusterMaxZoom:h==null?void 0:h.maxZoom,clusterRadius:h==null?void 0:h.radius})))},[r,b,I,w,u,l,c,f,p,g,h,m,d,y,v,O,M,i,a,s]}class KS extends ge{constructor(t){super(),de(this,t,T1,P1,Jt,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10,maxzoom:11,attribution:12,buffer:13,tolerance:14})}}function R1(e,t,n){let r;const{map:i}=Xo();Ue(e,i,p=>n(8,r=p));let{position:o="top-left"}=t,{positionOptions:s=void 0}=t,{fitBoundsOptions:a=void 0}=t,{trackUserLocation:u=!1}=t,{showAccuracyCircle:l=!0}=t,{showUserLocation:c=!0}=t,{control:f=null}=t;return Hr(()=>{r!=null&&r.loaded()&&f&&r.removeControl(f)}),e.$$set=p=>{"position"in p&&n(2,o=p.position),"positionOptions"in p&&n(3,s=p.positionOptions),"fitBoundsOptions"in p&&n(4,a=p.fitBoundsOptions),"trackUserLocation"in p&&n(5,u=p.trackUserLocation),"showAccuracyCircle"in p&&n(6,l=p.showAccuracyCircle),"showUserLocation"in p&&n(7,c=p.showUserLocation),"control"in p&&n(1,f=p.control)},e.$$.update=()=>{e.$$.dirty&510&&r&&!f&&(n(1,f=new qo.GeolocateControl({positionOptions:s,fitBoundsOptions:a,trackUserLocation:u,showAccuracyCircle:l,showUserLocation:c})),r.addControl(f,o))},[i,f,o,s,a,u,l,c,r]}class M1 extends ge{constructor(t){super(),de(this,t,R1,null,Jt,{position:2,positionOptions:3,fitBoundsOptions:4,trackUserLocation:5,showAccuracyCircle:6,showUserLocation:7,control:1})}}function A1(e){let t;const n=e[15].default,r=Zi(n,e,e[23],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,o){r&&r.m(i,o),t=!0},p(i,o){r&&r.p&&(!t||o&8388608)&&Ki(r,n,i,i[23],t?Qi(n,i[23],o,null):Ji(i[23]),null)},i(i){t||(X(r,i),t=!0)},o(i){Z(r,i),t=!1},d(i){r&&r.d(i)}}}function D1(e){let t,n,r;function i(s){e[16](s)}let o={id:e[1],type:"line",source:e[2],sourceLayer:e[3],beforeId:e[4],beforeLayerType:e[5],paint:e[6],layout:e[7],filter:e[8],minzoom:e[9],maxzoom:e[10],hoverCursor:e[11],manageHoverState:e[12],eventsIfTopMost:e[13],interactive:e[14],$$slots:{default:[A1]},$$scope:{ctx:e}};return e[0]!==void 0&&(o.hovered=e[0]),t=new lg({props:o}),Ts.push(()=>Ll(t,"hovered",i)),t.$on("click",e[17]),t.$on("dblclick",e[18]),t.$on("contextmenu",e[19]),t.$on("mouseenter",e[20]),t.$on("mousemove",e[21]),t.$on("mouseleave",e[22]),{c(){$t(t.$$.fragment)},l(s){te(t.$$.fragment,s)},m(s,a){ee(t,s,a),r=!0},p(s,[a]){const u={};a&2&&(u.id=s[1]),a&4&&(u.source=s[2]),a&8&&(u.sourceLayer=s[3]),a&16&&(u.beforeId=s[4]),a&32&&(u.beforeLayerType=s[5]),a&64&&(u.paint=s[6]),a&128&&(u.layout=s[7]),a&256&&(u.filter=s[8]),a&512&&(u.minzoom=s[9]),a&1024&&(u.maxzoom=s[10]),a&2048&&(u.hoverCursor=s[11]),a&4096&&(u.manageHoverState=s[12]),a&8192&&(u.eventsIfTopMost=s[13]),a&16384&&(u.interactive=s[14]),a&8388608&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.hovered=s[0],Il(()=>n=!1)),t.$set(u)},i(s){r||(X(t.$$.fragment,s),r=!0)},o(s){Z(t.$$.fragment,s),r=!1},d(s){ne(t,s)}}}function F1(e,t,n){let{$$slots:r={},$$scope:i}=t,{id:o=Ya("line")}=t,{source:s=void 0}=t,{sourceLayer:a=void 0}=t,{beforeId:u=void 0}=t,{beforeLayerType:l=void 0}=t,{paint:c}=t,{layout:f=void 0}=t,{filter:p=void 0}=t,{minzoom:g=void 0}=t,{maxzoom:h=void 0}=t,{hoverCursor:m=void 0}=t,{manageHoverState:d=!1}=t,{hovered:y=null}=t,{eventsIfTopMost:v=!1}=t,{interactive:b=!0}=t;function I(A){y=A,n(0,y)}function w(A){on.call(this,e,A)}function O(A){on.call(this,e,A)}function M(A){on.call(this,e,A)}function x(A){on.call(this,e,A)}function T(A){on.call(this,e,A)}function k(A){on.call(this,e,A)}return e.$$set=A=>{"id"in A&&n(1,o=A.id),"source"in A&&n(2,s=A.source),"sourceLayer"in A&&n(3,a=A.sourceLayer),"beforeId"in A&&n(4,u=A.beforeId),"beforeLayerType"in A&&n(5,l=A.beforeLayerType),"paint"in A&&n(6,c=A.paint),"layout"in A&&n(7,f=A.layout),"filter"in A&&n(8,p=A.filter),"minzoom"in A&&n(9,g=A.minzoom),"maxzoom"in A&&n(10,h=A.maxzoom),"hoverCursor"in A&&n(11,m=A.hoverCursor),"manageHoverState"in A&&n(12,d=A.manageHoverState),"hovered"in A&&n(0,y=A.hovered),"eventsIfTopMost"in A&&n(13,v=A.eventsIfTopMost),"interactive"in A&&n(14,b=A.interactive),"$$scope"in A&&n(23,i=A.$$scope)},[y,o,s,a,u,l,c,f,p,g,h,m,d,v,b,r,I,w,O,M,x,T,k,i]}class JS extends ge{constructor(t){super(),de(this,t,F1,D1,Jt,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function k1(e,t,n){let r;const i=Ua();let{layer:o=void 0}=t;const{map:s}=Xo();Ue(e,s,c=>n(2,r=c));function a(c){i(c.type,{...c,map:s})}const u=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],l=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return Hr(()=>{if(r)if(o)for(const c of u)r.off(c,o,a);else for(const c of l)r.off(c,a)}),e.$$set=c=>{"layer"in c&&n(1,o=c.layer)},e.$$.update=()=>{if(e.$$.dirty&6&&r)if(o)for(const c of u)r.on(c,o,a);else for(const c of l)r.on(c,a)},[s,o,r]}class G1 extends ge{constructor(t){super(),de(this,t,k1,null,Jt,{layer:1})}}function B1(e){let t=e.getCenter(),n=Math.round(e.getZoom()*100)/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(t.lat*i)/i,s=Math.round(t.lng*i)/i,a=`${n}/${o}/${s}`,u=e.getBearing(),l=e.getPitch();return(u||l)&&(a+=`/${Math.round(u*10)/10}`),l&&(a+=`/${Math.round(l)}`),`#${a}`}function z1(e){return e.replace("#","").split("/").map(parseFloat)}function U1(e,t,n){let r;const{map:i}=Xo();Ue(e,i,c=>n(6,r=c));let{position:o="top-left"}=t,{showCompass:s=!0}=t,{showZoom:a=!0}=t,{visualizePitch:u=!1}=t,l=null;return Hr(()=>{r!=null&&r.loaded()&&l&&r.removeControl(l)}),e.$$set=c=>{"position"in c&&n(1,o=c.position),"showCompass"in c&&n(2,s=c.showCompass),"showZoom"in c&&n(3,a=c.showZoom),"visualizePitch"in c&&n(4,u=c.visualizePitch)},e.$$.update=()=>{e.$$.dirty&126&&r&&!l&&(n(5,l=new qo.NavigationControl({showCompass:s,showZoom:a,visualizePitch:u})),r.addControl(l,o))},[i,o,s,a,u,l,r]}class cg extends ge{constructor(t){super(),de(this,t,U1,null,Jt,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function q1(e,t,n){let r;const{map:i}=Xo();Ue(e,i,l=>n(5,r=l));let{position:o="bottom-left"}=t,{maxWidth:s=void 0}=t,{unit:a="metric"}=t,u=null;return Hr(()=>{r!=null&&r.loaded()&&u&&r.removeControl(u)}),e.$$set=l=>{"position"in l&&n(1,o=l.position),"maxWidth"in l&&n(2,s=l.maxWidth),"unit"in l&&n(3,a=l.unit)},e.$$.update=()=>{e.$$.dirty&62&&r&&!u&&(n(4,u=new qo.ScaleControl({maxWidth:s,unit:a})),r.addControl(u,o))},[i,o,s,a,u,r]}class fg extends ge{constructor(t){super(),de(this,t,q1,null,Jt,{position:1,maxWidth:2,unit:3})}}const{window:V1}=Bd,j1=e=>({map:e[0]&16,loadedImages:e[0]&32,allImagesLoaded:e[0]&64}),Xf=e=>({map:e[4],loadedImages:e[5],allImagesLoaded:e[6]});function Yf(e){let t,n,r=e[3]&&Hf(e);const i=e[40].default,o=Zi(i,e,e[39],Xf);return{c(){r&&r.c(),t=Vt(),o&&o.c()},l(s){r&&r.l(s),t=jt(s),o&&o.l(s)},m(s,a){r&&r.m(s,a),nt(s,t,a),o&&o.m(s,a),n=!0},p(s,a){s[3]?r?(r.p(s,a),a[0]&8&&X(r,1)):(r=Hf(s),r.c(),X(r,1),r.m(t.parentNode,t)):r&&(Fn(),Z(r,1,1,()=>{r=null}),kn()),o&&o.p&&(!n||a[0]&112|a[1]&256)&&Ki(o,i,s,s[39],n?Qi(i,s[39],a,j1):Ji(s[39]),Xf)},i(s){n||(X(r),X(o,s),n=!0)},o(s){Z(r),Z(o,s),n=!1},d(s){s&&U(t),r&&r.d(s),o&&o.d(s)}}}function Hf(e){let t,n,r,i,o,s,a,u;return t=new cg({props:{position:e[7]}}),r=new M1({props:{position:e[7],fitBoundsOptions:{maxZoom:12}}}),o=new w1({props:{position:e[7]}}),a=new fg({props:{position:e[7]}}),{c(){$t(t.$$.fragment),n=Vt(),$t(r.$$.fragment),i=Vt(),$t(o.$$.fragment),s=Vt(),$t(a.$$.fragment)},l(l){te(t.$$.fragment,l),n=jt(l),te(r.$$.fragment,l),i=jt(l),te(o.$$.fragment,l),s=jt(l),te(a.$$.fragment,l)},m(l,c){ee(t,l,c),nt(l,n,c),ee(r,l,c),nt(l,i,c),ee(o,l,c),nt(l,s,c),ee(a,l,c),u=!0},p(l,c){const f={};c[0]&128&&(f.position=l[7]),t.$set(f);const p={};c[0]&128&&(p.position=l[7]),r.$set(p);const g={};c[0]&128&&(g.position=l[7]),o.$set(g);const h={};c[0]&128&&(h.position=l[7]),a.$set(h)},i(l){u||(X(t.$$.fragment,l),X(r.$$.fragment,l),X(o.$$.fragment,l),X(a.$$.fragment,l),u=!0)},o(l){Z(t.$$.fragment,l),Z(r.$$.fragment,l),Z(o.$$.fragment,l),Z(a.$$.fragment,l),u=!1},d(l){l&&(U(n),U(i),U(s)),ne(t,l),ne(r,l),ne(o,l),ne(a,l)}}}function W1(e){let t,n,r,i,o,s=e[4]&&e[0]&&Yf(e);return{c(){t=yt("div"),s&&s.c(),this.h()},l(a){t=_t(a,"DIV",{class:!0,"data-testid":!0});var u=It(t);s&&s.l(u),u.forEach(U),this.h()},h(){R(t,"class",n=fa(e[2])+" svelte-p00lfq"),R(t,"data-testid","map-container"),Lr(t,"expand-map",!e[2])},m(a,u){nt(a,t,u),s&&s.m(t,null),e[41](t),r=!0,i||(o=[ze(V1,"hashchange",e[11]),Ad(e[10].call(null,t))],i=!0)},p(a,u){a[4]&&a[0]?s?(s.p(a,u),u[0]&17&&X(s,1)):(s=Yf(a),s.c(),X(s,1),s.m(t,null)):s&&(Fn(),Z(s,1,1,()=>{s=null}),kn()),(!r||u[0]&4&&n!==(n=fa(a[2])+" svelte-p00lfq"))&&R(t,"class",n),(!r||u[0]&4)&&Lr(t,"expand-map",!a[2])},i(a){r||(X(s),r=!0)},o(a){Z(s),r=!1},d(a){a&&U(t),s&&s.d(),e[41](null),i=!1,qa(o)}}}function X1(e,t,n){let r,i,o,s,{$$slots:a={},$$scope:u}=t,{map:l=null}=t,{mapContainer:c=void 0}=t,{class:f=void 0}=t,{style:p}=t,{diffStyleUpdates:g=!1}=t,{center:h=void 0}=t,{zoom:m=void 0}=t,{pitch:d=0}=t,{bearing:y=0}=t,{bounds:v=void 0}=t,{hash:b=!1}=t,{updateHash:I=_=>{window.history.replaceState(window.history.state,"",_)}}=t,{loaded:w=!1}=t,{minZoom:O=0}=t,{maxZoom:M=22}=t,{antialias:x=void 0}=t,{zoomOnDoubleClick:T=!0}=t,{locale:k=void 0}=t,{interactive:A=!0}=t,{attributionControl:C=!0}=t,{cooperativeGestures:$=!1}=t,{preserveDrawingBuffer:N=!1}=t,{maxBounds:z=void 0}=t,{images:q=[]}=t,{standardControls:ot=!1}=t,{filterLayers:ht=void 0}=t,{transformRequest:St=void 0}=t;const Ot=Ua(),{map:kt,loadedImages:qt}=m1();Ue(e,kt,_=>n(4,o=_)),Ue(e,qt,_=>n(5,s=_));let Kt=new Set;async function He(_,B=!1){if(o&&!(!o.loaded()&&!B))if("url"in _){Kt.add(_.id);try{let V=await o.loadImage(_.url);o==null||o.addImage(_.id,V.data,_.options),s.add(_.id),qt.set(s)}catch(V){Ot("error",V)}finally{Kt.delete(_.id)}}else o.addImage(_.id,_.data,_.options),s.add(_.id),qt.set(s)}let Ee,me,On,Gr;function Oi(_){return Br(),Ti(kt,o=new qo.Map(wa({container:_,style:p,locale:k,center:h,zoom:m,pitch:d,bearing:y,minZoom:O,maxZoom:M,antialias:x,interactive:A,preserveDrawingBuffer:N,maxBounds:z,bounds:v,attributionControl:C,transformRequest:St,cooperativeGestures:$})),o),o.on("load",B=>{B.target.getContainer().setAttribute("data-testid","map"),B.target.getCanvas().setAttribute("data-testid","map-canvas"),n(0,w=!0),Ot("load",o)}),o.on("error",B=>Ot("error",{...B,map:o})),o.on("movestart",B=>Ot("movestart",{...B,map:o})),o.on("moveend",B=>{if(n(12,h=B.target.getCenter()),n(13,m=B.target.getZoom()),n(14,d=B.target.getPitch()),n(15,y=B.target.getBearing()),n(16,v=B.target.getBounds()),Ot("moveend",{...B,map:o}),b){let V=new URL(window.location.href.replace(/(#.+)?$/,B1(o)));I(V)}}),o.on("click",B=>Ot("click",{...B,map:o})),o.on("dblclick",B=>Ot("dblclick",{...B,map:o})),o.on("contextmenu",B=>Ot("contextmenu",{...B,map:o})),o.on("zoomstart",B=>Ot("zoomstart",{...B,map:o})),o.on("zoom",B=>{Ot("zoom",{...B,map:o})}),o.on("zoomend",B=>{Ot("zoomend",{...B,map:o})}),o.on("style.load",()=>{if(o){const B=o.getStyle();if(n(36,Ee=B.layers.map(V=>V.id)),n(37,me=Object.keys(B.sources)),Gr)for(const[V,Re]of Object.entries(Gr))o.addSource(V,Re);if(On)for(const V of On)o.addLayer(V);for(const V of q)He(V,!0)}}),o.on("styledata",B=>{if(o&&ht){const V=o.getStyle().layers;if(V)for(let Re of V)ht(Re)||o.setLayoutProperty(Re.id,"visibility","none")}Ot("styledata",{...B,map:o})}),{destroy(){n(0,w=!1),o==null||o.remove(),Ti(kt,o=null,o)}}}let ii=p;function Br(){if(b){let _=z1(window.location.hash);_.length>=3&&(n(13,m=_[0]),n(12,h=[_[2],_[1]])),_.length==5&&(n(15,y=_[3]),n(14,d=_[4]))}}function tr(_){Ts[_?"unshift":"push"](()=>{c=_,n(1,c)})}return e.$$set=_=>{"map"in _&&n(17,l=_.map),"mapContainer"in _&&n(1,c=_.mapContainer),"class"in _&&n(2,f=_.class),"style"in _&&n(18,p=_.style),"diffStyleUpdates"in _&&n(19,g=_.diffStyleUpdates),"center"in _&&n(12,h=_.center),"zoom"in _&&n(13,m=_.zoom),"pitch"in _&&n(14,d=_.pitch),"bearing"in _&&n(15,y=_.bearing),"bounds"in _&&n(16,v=_.bounds),"hash"in _&&n(20,b=_.hash),"updateHash"in _&&n(21,I=_.updateHash),"loaded"in _&&n(0,w=_.loaded),"minZoom"in _&&n(22,O=_.minZoom),"maxZoom"in _&&n(23,M=_.maxZoom),"antialias"in _&&n(24,x=_.antialias),"zoomOnDoubleClick"in _&&n(25,T=_.zoomOnDoubleClick),"locale"in _&&n(26,k=_.locale),"interactive"in _&&n(27,A=_.interactive),"attributionControl"in _&&n(28,C=_.attributionControl),"cooperativeGestures"in _&&n(29,$=_.cooperativeGestures),"preserveDrawingBuffer"in _&&n(30,N=_.preserveDrawingBuffer),"maxBounds"in _&&n(31,z=_.maxBounds),"images"in _&&n(32,q=_.images),"standardControls"in _&&n(3,ot=_.standardControls),"filterLayers"in _&&n(33,ht=_.filterLayers),"transformRequest"in _&&n(34,St=_.transformRequest),"$$scope"in _&&n(39,u=_.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&8&&n(7,r=typeof ot=="boolean"?void 0:ot),e.$$.dirty[0]&16&&n(17,l=o),e.$$.dirty[0]&786448|e.$$.dirty[1]&224&&o&&!lo(p,ii)){const _=o.getStyle();if(Ee&&(On=_.layers.filter(B=>!Ee.includes(B.id))),me){const B=Object.keys(_.sources).filter(V=>!me.includes(V));Gr={};for(const V of B)Gr[V]=_.sources[V]}n(38,ii=p),o.setStyle(p,{diff:g}),Ti(qt,s=new Set,s),n(35,Kt=new Set)}if(e.$$.dirty[0]&49|e.$$.dirty[1]&18&&w&&o!=null&&o.loaded())for(let _ of q)!s.has(_.id)&&!Kt.has(_.id)&&!o.hasImage(_.id)&&He(_);if(e.$$.dirty[0]&32|e.$$.dirty[1]&2&&n(6,i=q.every(_=>s.has(_.id))),e.$$.dirty[0]&61456&&o){let _={};h!=null&&!lo(h,o==null?void 0:o.getCenter())&&(_.center=h),m!=null&&!lo(m,o==null?void 0:o.getZoom())&&(_.zoom=m),y!=null&&!lo(y,o==null?void 0:o.getBearing())&&(_.bearing=y),d!=null&&!lo(d,o==null?void 0:o.getPitch())&&(_.pitch=d),Object.keys(_).length&&o.easeTo(_)}e.$$.dirty[0]&65552&&v&&!lo(v,o==null?void 0:o.getBounds())&&(o==null||o.fitBounds(v)),e.$$.dirty[0]&33554448&&(T?o==null||o.doubleClickZoom.enable():o==null||o.doubleClickZoom.disable())},[w,c,f,ot,o,s,i,r,kt,qt,Oi,Br,h,m,d,y,v,l,p,g,b,I,O,M,x,T,k,A,C,$,N,z,q,ht,St,Kt,Ee,me,ii,u,a,tr]}class Y1 extends ge{constructor(t){super(),de(this,t,X1,W1,Jt,{map:17,mapContainer:1,class:2,style:18,diffStyleUpdates:19,center:12,zoom:13,pitch:14,bearing:15,bounds:16,hash:20,updateHash:21,loaded:0,minZoom:22,maxZoom:23,antialias:24,zoomOnDoubleClick:25,locale:26,interactive:27,attributionControl:28,cooperativeGestures:29,preserveDrawingBuffer:30,maxBounds:31,images:32,standardControls:3,filterLayers:33,transformRequest:34},null,[-1,-1])}}const H1=""+new URL("../assets/google_on_non_white_hdpi.lXqnPdbA.png",import.meta.url).href;function Z1(e){let t,n,r,i,o="MapLibre";return{c(){t=yt("div"),n=new Dd(!1),r=Ai(` |
  `),i=yt("a"),i.textContent=o,this.h()},l(s){t=_t(s,"DIV",{class:!0});var a=It(t);n=Fd(a,!1),r=Di(a,` |
  `),i=_t(a,"A",{href:!0,target:!0,"data-svelte-h":!0}),Qp(i)!=="svelte-7ng3r3"&&(i.textContent=o),a.forEach(U),this.h()},h(){n.a=r,R(i,"href","https://maplibre.org/"),R(i,"target","_blank"),R(t,"class","svelte-1yeu1m4")},m(s,a){nt(s,t,a),n.m(e[0],t),ft(t,r),ft(t,i)},p(s,[a]){a&1&&n.p(s[0])},i:zt,o:zt,d(s){s&&U(t)}}}function K1(e,t,n){let{attribution:r}=t;return e.$$set=i=>{"attribution"in i&&n(0,r=i.attribution)},[r]}class J1 extends ge{constructor(t){super(),de(this,t,K1,Z1,Jt,{attribution:0})}}var pg={},Q1=Object.defineProperty,$1=(e,t,n)=>t in e?Q1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zf=(e,t,n)=>($1(e,typeof t!="symbol"?t+"":t,n),n);function ds(){}function hg(e){return e()}function Kf(){return Object.create(null)}function Ha(e){e.forEach(hg)}function gg(e){return typeof e=="function"}function tb(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function eb(e){return Object.keys(e).length===0}function nb(e,t){e.appendChild(t)}function rb(e,t,n){e.insertBefore(t,n||null)}function dg(e){e.parentNode&&e.parentNode.removeChild(e)}function Jf(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function si(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ib(e){return Array.from(e.childNodes)}function Hs(e,t,n){e.classList.toggle(t,!!n)}let Zl;function fs(e){Zl=e}const po=[],Qf=[];let yo=[];const $f=[],ob=Promise.resolve();let al=!1;function sb(){al||(al=!0,ob.then(mg))}function ul(e){yo.push(e)}const Du=new Set;let co=0;function mg(){if(co!==0)return;const e=Zl;do{try{for(;co<po.length;){const t=po[co];co++,fs(t),ab(t.$$)}}catch(t){throw po.length=0,co=0,t}for(fs(null),po.length=0,co=0;Qf.length;)Qf.pop()();for(let t=0;t<yo.length;t+=1){const n=yo[t];Du.has(n)||(Du.add(n),n())}yo.length=0}while(po.length);for(;$f.length;)$f.pop()();al=!1,Du.clear(),fs(e)}function ab(e){if(e.fragment!==null){e.update(),Ha(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ul)}}function ub(e){const t=[],n=[];yo.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),yo=t}const lb=new Set;function cb(e,t){e&&e.i&&(lb.delete(e),e.i(t))}function fb(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),ul(()=>{const o=e.$$.on_mount.map(hg).filter(gg);e.$$.on_destroy?e.$$.on_destroy.push(...o):Ha(o),e.$$.on_mount=[]}),i.forEach(ul)}function pb(e,t){const n=e.$$;n.fragment!==null&&(ub(n.after_update),Ha(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function hb(e,t){e.$$.dirty[0]===-1&&(po.push(e),sb(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function gb(e,t,n,r,i,o,s=null,a=[-1]){const u=Zl;fs(e);const l=e.$$={fragment:null,ctx:[],props:o,update:ds,not_equal:i,bound:Kf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Kf(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};s&&s(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(f,p,...g)=>{const h=g.length?g[0]:p;return l.ctx&&i(l.ctx[f],l.ctx[f]=h)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](h),c&&hb(e,f)),p}):[],l.update(),c=!0,Ha(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=ib(t.target);l.fragment&&l.fragment.l(f),f.forEach(dg)}else l.fragment&&l.fragment.c();t.intro&&cb(e.$$.fragment),fb(e,t.target,t.anchor),mg()}fs(u)}class db{constructor(){Zf(this,"$$"),Zf(this,"$$set")}$destroy(){pb(this,1),this.$destroy=ds}$on(t,n){if(!gg(n))return ds;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!eb(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const mb="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(mb);function yb(e){let t,n,r;return{c(){t=Jf("svg"),n=Jf("path"),si(n,"stroke-width","4"),si(n,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),si(n,"class","svelte-gzo3ar"),si(t,"width",r=e[0]==="list"?20:void 0),si(t,"viewBox","0 0 70 85"),si(t,"fill","none"),si(t,"class","svelte-gzo3ar"),Hs(t,"in-map",e[0]!=="list"),Hs(t,"list-icon",e[0]==="list")},m(i,o){rb(i,t,o),nb(t,n)},p(i,[o]){o&1&&r!==(r=i[0]==="list"?20:void 0)&&si(t,"width",r),o&1&&Hs(t,"in-map",i[0]!=="list"),o&1&&Hs(t,"list-icon",i[0]==="list")},i:ds,o:ds,d(i){i&&dg(t)}}}function _b(e,t,n){let{displayIn:r}=t;return e.$$set=i=>{"displayIn"in i&&n(0,r=i.displayIn)},[r]}class vb extends db{constructor(t){super(),gb(this,t,_b,yb,tb,{displayIn:0})}}const bb=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:'40° 7´ 22.8" N 74° 7´ 22.8" W',verbatimLatitude:'40° 7´ 22.8" N',verbatimLongitude:'74° 7´ 22.8" W'},{verbatimCoordinates:"40° 7.38’ , -74° 7.38’",verbatimLatitude:"40° 7.38’",verbatimLongitude:"-74° 7.38’"},{verbatimCoordinates:"N40°7’22.8’’, W74°7’22.8’’",verbatimLatitude:"N40°7’22.8’’",verbatimLongitude:"W74°7’22.8’’"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:`40°7'22.8"N, 74°7'22.8"W`,verbatimLatitude:`40°7'22.8"N`,verbatimLongitude:`74°7'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123°,-74.123°",verbatimLatitude:"40.123°",verbatimLongitude:"-74.123°"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40°7’23"N 74°7’23"W',verbatimLatitude:'40°7’23"N',verbatimLongitude:'74°7’23"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40°7’23"S 74°7’23"E',verbatimLatitude:'40°7’23"S',verbatimLongitude:'74°7’23"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40°7’23" -74°7’23"',verbatimLatitude:'40°7’23"',verbatimLongitude:'-74°7’23"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7’ 23" N 74d 7’ 23" W',verbatimLatitude:'40d 7’ 23" N',verbatimLongitude:'74d 7’ 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],Eb={decimalLatitude:40.123,decimalLongitude:-74.123},Sb=[{verbatimCoordinates:`50°4'17.698"south, 14°24'2.826"east`,verbatimLatitude:`50°4'17.698"south`,verbatimLongitude:`14°24'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"40°26′47″N 79°58′36″W",verbatimLatitude:"40°26′47″N",verbatimLongitude:"79°58′36″W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26′ 47″ N 79d 58′ 36″ W",verbatimLatitude:"40d 26′ 47″ N",verbatimLongitude:"79d 58′ 36″ W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195° 79,948862°",verbatimLatitude:"40,446195°",verbatimLongitude:"79,948862°",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40° 26.7717, -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"18°24S 22°45E",verbatimLatitude:"18°24S",verbatimLongitude:"22°45E",decimalLatitude:-18.4,decimalLongitude:22.75}],Ib=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245° S / 28.2344° E",verbatimLatitude:"-23.3245° S",verbatimLongitude:"28.2344° E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40° 26.7717 -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563 °  E22.45634 °",verbatimLatitude:"S23.43563 °",verbatimLongitude:"E22.45634 °",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372° S 23,07771° E",verbatimLatitude:"27,71372° S",verbatimLongitude:"23,07771° E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48° 30,6410', E 18° 57,4583'",verbatimLatitude:"N 48° 30,6410'",verbatimLongitude:"E 18° 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764}];function Lb(){const e=[];return bb.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...Eb})}),[...e,...Sb,...Ib]}const Nb=Lb();Nb.map(e=>e.verbatimCoordinates);/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function xb(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var di=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function wb(e,t){return e>t?1:e<t?-1:0}function ci(e,t,n){for(var r=new di(null,null),i=r,o=r;;){var s=n(e,t.key);if(s<0){if(t.left===null)break;if(n(e,t.left.key)<0){var a=t.left;if(t.left=a.right,a.right=t,t=a,t.left===null)break}o.left=t,o=t,t=t.left}else if(s>0){if(t.right===null)break;if(n(e,t.right.key)>0){var a=t.right;if(t.right=a.left,a.left=t,t=a,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=r.right,t.right=r.left,t}function Fu(e,t,n,r){var i=new di(e,t);if(n===null)return i.left=i.right=null,i;n=ci(e,n,r);var o=r(e,n.key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function tp(e,t,n){var r=null,i=null;if(t){t=ci(e,t,n);var o=n(t.key,e);o===0?(r=t.left,i=t.right):o<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function Cb(e,t,n){return t===null?e:(e===null||(t=ci(e.key,t,n),t.left=e),t)}function ll(e,t,n,r,i){if(e){r(""+t+(n?"└── ":"├── ")+i(e)+`
`);var o=t+(n?"    ":"│   ");e.left&&ll(e.left,o,!1,r,i),e.right&&ll(e.right,o,!0,r,i)}}var Kl=function(){function e(t){t===void 0&&(t=wb),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=Fu(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new di(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,o=ci(t,this._root,i),s=i(t,o.key);return s===0?this._root=o:(s<0?(r.left=o.left,r.right=o,o.left=null):s>0&&(r.right=o.right,r.left=o,o.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var i;if(n===null)return null;n=ci(t,n,r);var o=r(t,n.key);return o===0?(n.left===null?i=n.right:(i=ci(t,n.left,r),i.right=n.right),this._size--,i):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=ci(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=ci(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,i=[],o=!1;!o;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),t.call(n,r),r=r.right):o=!0;return this},e.prototype.range=function(t,n,r,i){for(var o=[],s=this._comparator,a=this._root,u;o.length!==0||a;)if(a)o.push(a),a=a.left;else{if(a=o.pop(),u=s(a.key,n),u>0)break;if(s(a.key,t)>=0&&r.call(i,a))return this;a=a.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,i=0,o=[];!r;)if(n)o.push(n),n=n.left;else if(o.length>0){if(n=o.pop(),i===t)return n;i++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return Pb(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=t.length,o=this._comparator;if(r&&pl(t,n,0,i-1,o),this._root===null)this._root=cl(t,n,0,i),this._size=i;else{var s=Tb(this.toList(),Ob(t,n),o);i=this._size+i,this._root=fl({head:s},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return ll(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var i=this._comparator,o=tp(t,this._root,i),s=o.left,a=o.right;i(t,n)<0?a=Fu(n,r,a,i):s=Fu(n,r,s,i),this._root=Cb(s,a,i)},e.prototype.split=function(t){return tp(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,r;return xb(this,function(i){switch(i.label){case 0:t=this._root,n=[],r=!1,i.label=1;case 1:return r?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:r=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function cl(e,t,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),s=e[o],a=t[o],u=new di(s,a);return u.left=cl(e,t,n,o),u.right=cl(e,t,o+1,r),u}return null}function Ob(e,t){for(var n=new di(null,null),r=n,i=0;i<e.length;i++)r=r.next=new di(e[i],t[i]);return r.next=null,n.next}function Pb(e){for(var t=e,n=[],r=!1,i=new di(null,null),o=i;!r;)t?(n.push(t),t=t.left):n.length>0?(t=o=o.next=n.pop(),t=t.right):r=!0;return o.next=null,i.next}function fl(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),o=fl(e,t,i),s=e.head;return s.left=o,e.head=e.head.next,s.right=fl(e,i+1,n),s}return null}function Tb(e,t,n){for(var r=new di(null,null),i=r,o=e,s=t;o!==null&&s!==null;)n(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return o!==null?i.next=o:s!==null&&(i.next=s),r.next}function pl(e,t,n,r,i){if(!(n>=r)){for(var o=e[n+r>>1],s=n-1,a=r+1;;){do s++;while(i(e[s],o)<0);do a--;while(i(e[a],o)>0);if(s>=a)break;var u=e[s];e[s]=e[a],e[a]=u,u=t[s],t[s]=t[a],t[a]=u}pl(e,t,n,a,i),pl(e,t,a+1,r,i)}}function Jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ep(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t,n){return t&&ep(e.prototype,t),n&&ep(e,n),e}var es=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},hl=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,i=e.ll.y<t.ll.y?t.ll.y:e.ll.y,o=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}},pi=Number.EPSILON;pi===void 0&&(pi=Math.pow(2,-52));var Rb=pi*pi,gl=function(e,t){if(-pi<e&&e<pi&&-pi<t&&t<pi)return 0;var n=e-t;return n*n<Rb*e*t?0:e<t?-1:1},Mb=function(){function e(){Jn(this,e),this.reset()}return Qe(e,[{key:"reset",value:function(){this.xRounder=new np,this.yRounder=new np}},{key:"round",value:function(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}]),e}(),np=function(){function e(){Jn(this,e),this.tree=new Kl,this.round(0)}return Qe(e,[{key:"round",value:function(t){var n=this.tree.add(t),r=this.tree.prev(n);if(r!==null&&gl(n.key,r.key)===0)return this.tree.remove(t),r.key;var i=this.tree.next(n);return i!==null&&gl(n.key,i.key)===0?(this.tree.remove(t),i.key):t}}]),e}(),ms=new Mb,ps=function(e,t){return e.x*t.y-e.y*t.x},yg=function(e,t){return e.x*t.x+e.y*t.y},rp=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},o=ps(r,i);return gl(o,0)},Ca=function(e){return Math.sqrt(yg(e,e))},Ab=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return ps(i,r)/Ca(i)/Ca(r)},Db=function(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return yg(i,r)/Ca(i)/Ca(r)},ip=function(e,t,n){return t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},op=function(e,t,n){return t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},Fb=function(e,t,n,r){if(t.x===0)return op(n,r,e.x);if(r.x===0)return op(e,t,n.x);if(t.y===0)return ip(n,r,e.y);if(r.y===0)return ip(e,t,n.y);var i=ps(t,r);if(i==0)return null;var o={x:n.x-e.x,y:n.y-e.y},s=ps(o,t)/i,a=ps(o,r)/i,u=e.x+a*t.x,l=n.x+s*r.x,c=e.y+a*t.y,f=n.y+s*r.y,p=(u+l)/2,g=(c+f)/2;return{x:p,y:g}},br=function(){Qe(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:Oa.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}}]);function e(t,n){Jn(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}return Qe(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var n=t.point.events,r=0,i=n.length;r<i;r++){var o=n[r];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,n=0;n<t;n++){var r=this.point.events[n];if(r.segment.consumedBy===void 0)for(var i=n+1;i<t;i++){var o=this.point.events[i];o.consumedBy===void 0&&r.otherSE.point.events===o.otherSE.point.events&&r.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],n=0,r=this.point.events.length;n<r;n++){var i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var n=this,r=new Map,i=function(o){var s=o.otherSE;r.set(o,{sine:Ab(n.point,t.point,s.point),cosine:Db(n.point,t.point,s.point)})};return function(o,s){r.has(o)||i(o),r.has(s)||i(s);var a=r.get(o),u=a.sine,l=a.cosine,c=r.get(s),f=c.sine,p=c.cosine;return u>=0&&f>=0?l<p?1:l>p?-1:0:u<0&&f<0?l<p?-1:l>p?1:0:f<u?-1:f>u?1:0}}}]),e}(),kb=0,Oa=function(){Qe(e,null,[{key:"compare",value:function(t,n){var r=t.leftSE.point.x,i=n.leftSE.point.x,o=t.rightSE.point.x,s=n.rightSE.point.x;if(s<r)return 1;if(o<i)return-1;var a=t.leftSE.point.y,u=n.leftSE.point.y,l=t.rightSE.point.y,c=n.rightSE.point.y;if(r<i){if(u<a&&u<l)return 1;if(u>a&&u>l)return-1;var f=t.comparePoint(n.leftSE.point);if(f<0)return 1;if(f>0)return-1;var p=n.comparePoint(t.rightSE.point);return p!==0?p:-1}if(r>i){if(a<u&&a<c)return-1;if(a>u&&a>c)return 1;var g=n.comparePoint(t.leftSE.point);if(g!==0)return g;var h=t.comparePoint(n.rightSE.point);return h<0?1:h>0?-1:1}if(a<u)return-1;if(a>u)return 1;if(o<s){var m=n.comparePoint(t.rightSE.point);if(m!==0)return m}if(o>s){var d=t.comparePoint(n.rightSE.point);if(d<0)return 1;if(d>0)return-1}if(o!==s){var y=l-a,v=o-r,b=c-u,I=s-i;if(y>v&&b<I)return 1;if(y<v&&b>I)return-1}return o>s?1:o<s||l<c?-1:l>c?1:t.id<n.id?-1:t.id>n.id?1:0}}]);function e(t,n,r,i){Jn(this,e),this.id=++kb,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=i}return Qe(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return t.x===n.x?0:t.x<n.x?1:-1;var o=(t.y-n.y)/i.y,s=n.x+o*i.x;if(t.x===s)return 0;var a=(t.x-n.x)/i.x,u=n.y+a*i.y;return t.y===u?0:t.y<u?-1:1}},{key:"getIntersection",value:function(t){var n=this.bbox(),r=t.bbox(),i=hl(n,r);if(i===null)return null;var o=this.leftSE.point,s=this.rightSE.point,a=t.leftSE.point,u=t.rightSE.point,l=es(n,a)&&this.comparePoint(a)===0,c=es(r,o)&&t.comparePoint(o)===0,f=es(n,u)&&this.comparePoint(u)===0,p=es(r,s)&&t.comparePoint(s)===0;if(c&&l)return p&&!f?s:!p&&f?u:null;if(c)return f&&o.x===u.x&&o.y===u.y?null:o;if(l)return p&&s.x===a.x&&s.y===a.y?null:a;if(p&&f)return null;if(p)return s;if(f)return u;var g=Fb(o,this.vector(),a,t.vector());return g===null||!es(i,g)?null:ms.round(g.x,g.y)}},{key:"split",value:function(t){var n=[],r=t.events!==void 0,i=new br(t,!0),o=new br(t,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new e(i,s,this.rings.slice(),this.windings.slice());return br.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),br.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(i!==0){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var l=r.rings[a],c=r.windings[a],f=n.rings.indexOf(l);f===-1?(n.rings.push(l),n.windings.push(c)):n.windings[f]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys,o=0,s=this.rings.length;o<s;o++){var a=this.rings[o],u=this.windings[o],l=n.indexOf(a);l===-1?(n.push(a),r.push(u)):r[l]+=u}for(var c=[],f=[],p=0,g=n.length;p<g;p++)if(r[p]!==0){var h=n[p],m=h.poly;if(f.indexOf(m)===-1)if(h.isExterior)c.push(m);else{f.indexOf(m)===-1&&f.push(m);var d=c.indexOf(h.poly);d!==-1&&c.splice(d,1)}}for(var y=0,v=c.length;y<v;y++){var b=c[y].multiPoly;i.indexOf(b)===-1&&i.push(b)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(rr.type){case"union":{var r=t.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{var o,s;t.length<n.length?(o=t.length,s=n.length):(o=n.length,s=t.length),this._isInResult=s===rr.numMultiPolys&&o<s;break}case"xor":{var a=Math.abs(t.length-n.length);this._isInResult=a%2===1;break}case"difference":{var u=function(l){return l.length===1&&l[0].isSubject};this._isInResult=u(t)!==u(n);break}default:throw new Error("Unrecognized operation type found ".concat(rr.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,s,a=br.comparePoints(t,n);if(a<0)i=t,o=n,s=1;else if(a>0)i=n,o=t,s=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var u=new br(i,!0),l=new br(o,!1);return new e(u,l,[r],[s])}}]),e}(),sp=function(){function e(t,n,r){if(Jn(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=ms.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=t.length;s<a;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=ms.round(t[s][0],t[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(Oa.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(Oa.fromRing(o,i,this))}return Qe(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.segments.length;n<r;n++){var i=this.segments[n];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),e}(),Gb=function(){function e(t,n){if(Jn(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new sp(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=t.length;r<i;r++){var o=new sp(t[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Qe(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),n=0,r=this.interiorRings.length;n<r;n++)for(var i=this.interiorRings[n].getSweepEvents(),o=0,s=i.length;o<s;o++)t.push(i[o]);return t}}]),e}(),ap=function(){function e(t,n){if(Jn(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=t.length;r<i;r++){var o=new Gb(t[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Qe(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++)for(var i=this.polys[n].getSweepEvents(),o=0,s=i.length;o<s;o++)t.push(i[o]);return t}}]),e}(),Bb=function(){Qe(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!(!o.isInResult()||o.ringOut)){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],c=a.point,f=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var p=a.getAvailableLinkedEvents();if(p.length===0){var g=l[0].point,h=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(g.x,",")+" ".concat(g.y,"]. Last matching segment found ends at")+" [".concat(h.x,", ").concat(h.y,"]."))}if(p.length===1){u=p[0].otherSE;break}for(var m=null,d=0,y=f.length;d<y;d++)if(f[d].point===a.point){m=d;break}if(m!==null){var v=f.splice(m)[0],b=l.splice(v.index);b.unshift(b[0].otherSE),n.push(new e(b.reverse()));continue}f.push({index:l.length,point:a.point});var I=a.getLeftmostComparator(s);u=p.sort(I)[0].otherSE;break}n.push(new e(l))}}return n}}]);function e(t){Jn(this,e),this.events=t;for(var n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}return Qe(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,n=[t],r=1,i=this.events.length-1;r<i;r++){var o=this.events[r].point,s=this.events[r+1].point;rp(o,t,s)!==0&&(n.push(o),t=o)}if(n.length===1)return null;var a=n[0],u=n[1];rp(a,t,u)===0&&n.shift(),n.push(n[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:n.length-1,f=this.isExteriorRing()?n.length:-1,p=[],g=c;g!=f;g+=l)p.push([n[g].x,n[g].y]);return p}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],n=1,r=this.events.length;n<r;n++){var i=this.events[n];br.compare(t,i)>0&&(t=i)}for(var o=t.segment.prevInResult(),s=o?o.prevInResult():null;;){if(!o)return null;if(!s)return o.ringOut;if(s.ringOut!==o.ringOut)return s.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=s.prevInResult(),s=o?o.prevInResult():null}}}]),e}(),up=function(){function e(t){Jn(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return Qe(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();i!==null&&t.push(i)}return t}}]),e}(),zb=function(){function e(t){Jn(this,e),this.rings=t,this.polys=this._composePolys(t)}return Qe(e,[{key:"getGeom",value:function(){for(var t=[],n=0,r=this.polys.length;n<r;n++){var i=this.polys[n].getGeom();i!==null&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(!o.poly)if(o.isExteriorRing())n.push(new up(o));else{var s=o.enclosingRing();s.poly||n.push(new up(s)),s.poly.addInterior(o)}}return n}}]),e}(),Ub=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Oa.compare;Jn(this,e),this.queue=t,this.tree=new Kl(n),this.segments=[]}return Qe(e,[{key:"process",value:function(t){var n=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),r;var i=t.isLeft?this.tree.insert(n):this.tree.find(n);if(!i)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=i,s=i,a=void 0,u=void 0;a===void 0;)o=this.tree.prev(o),o===null?a=null:o.key.consumedBy===void 0&&(a=o.key);for(;u===void 0;)s=this.tree.next(s),s===null?u=null:s.key.consumedBy===void 0&&(u=s.key);if(t.isLeft){var l=null;if(a){var c=a.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(l=c),!a.isAnEndpoint(c)))for(var f=this._splitSafely(a,c),p=0,g=f.length;p<g;p++)r.push(f[p])}var h=null;if(u){var m=u.getIntersection(n);if(m!==null&&(n.isAnEndpoint(m)||(h=m),!u.isAnEndpoint(m)))for(var d=this._splitSafely(u,m),y=0,v=d.length;y<v;y++)r.push(d[y])}if(l!==null||h!==null){var b=null;if(l===null)b=h;else if(h===null)b=l;else{var I=br.comparePoints(l,h);b=I<=0?l:h}this.queue.remove(n.rightSE),r.push(n.rightSE);for(var w=n.split(b),O=0,M=w.length;O<M;O++)r.push(w[O])}r.length>0?(this.tree.remove(n),r.push(t)):(this.segments.push(n),n.prev=a)}else{if(a&&u){var x=a.getIntersection(u);if(x!==null){if(!a.isAnEndpoint(x))for(var T=this._splitSafely(a,x),k=0,A=T.length;k<A;k++)r.push(T[k]);if(!u.isAnEndpoint(x))for(var C=this._splitSafely(u,x),$=0,N=C.length;$<N;$++)r.push(C[$])}}this.tree.remove(n)}return r}},{key:"_splitSafely",value:function(t,n){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var i=t.split(n);return i.push(r),t.consumedBy===void 0&&this.tree.insert(t),i}}]),e}(),lp=typeof process<"u"&&pg.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,qb=typeof process<"u"&&pg.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Vb=function(){function e(){Jn(this,e)}return Qe(e,[{key:"run",value:function(t,n,r){rr.type=t,ms.reset();for(var i=[new ap(n,!0)],o=0,s=r.length;o<s;o++)i.push(new ap(r[o],!1));if(rr.numMultiPolys=i.length,rr.type==="difference")for(var a=i[0],u=1;u<i.length;)hl(i[u].bbox,a.bbox)!==null?u++:i.splice(u,1);if(rr.type==="intersection"){for(var l=0,c=i.length;l<c;l++)for(var f=i[l],p=l+1,g=i.length;p<g;p++)if(hl(f.bbox,i[p].bbox)===null)return[]}for(var h=new Kl(br.compare),m=0,d=i.length;m<d;m++)for(var y=i[m].getSweepEvents(),v=0,b=y.length;v<b;v++)if(h.insert(y[v]),h.size>lp)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var I=new Ub(h),w=h.size,O=h.pop();O;){var M=O.key;if(h.size===w){var x=M.segment;throw new Error("Unable to pop() ".concat(M.isLeft?"left":"right"," SweepEvent ")+"[".concat(M.point.x,", ").concat(M.point.y,"] from segment #").concat(x.id," ")+"[".concat(x.leftSE.point.x,", ").concat(x.leftSE.point.y,"] -> ")+"[".concat(x.rightSE.point.x,", ").concat(x.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(h.size>lp)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(I.segments.length>qb)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var T=I.process(M),k=0,A=T.length;k<A;k++){var C=T[k];C.consumedBy===void 0&&h.insert(C)}w=h.size,O=h.pop()}ms.reset();var $=Bb.factory(I.segments),N=new zb($);return N.getGeom()}}]),e}(),rr=new Vb,jb=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rr.run("union",e,n)},Wb=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rr.run("intersection",e,n)},Xb=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rr.run("xor",e,n)},Yb=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rr.run("difference",e,n)},_g={union:jb,intersection:Wb,xor:Xb,difference:Yb},Ze=63710088e-1,vg={centimeters:Ze*100,centimetres:Ze*100,degrees:Ze/111325,feet:Ze*3.28084,inches:Ze*39.37,kilometers:Ze/1e3,kilometres:Ze/1e3,meters:Ze,metres:Ze,miles:Ze/1609.344,millimeters:Ze*1e3,millimetres:Ze*1e3,nauticalmiles:Ze/1852,radians:1,yards:Ze*1.0936};function Za(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function Hb(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!cp(e[0])||!cp(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return Za(r,t,n)}function bg(e,t,n){n===void 0&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:e};return Za(a,t,n)}function dl(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function Eg(e,t,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:e};return Za(r,t,n)}function Zb(e,t){var n=vg[t];return e*n}function Kb(e,t){t===void 0&&(t="kilometers");var n=vg[t];if(!n)throw new Error(t+" units is invalid");return e/n}function cp(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Pa(e){return e.type==="Feature"?e.geometry:e}function Jb(e,t,n){n===void 0&&(n={});var r=Pa(e),i=Pa(t),o=_g.union(r.coordinates,i.coordinates);return o.length===0?null:o.length===1?bg(o[0],n.properties):Eg(o,n.properties)}function Sg(e,t,n){if(e!==null)for(var r,i,o,s,a,u,l,c=0,f=0,p,g=e.type,h=g==="FeatureCollection",m=g==="Feature",d=h?e.features.length:1,y=0;y<d;y++){l=h?e.features[y].geometry:m?e.geometry:e,p=l?l.type==="GeometryCollection":!1,a=p?l.geometries.length:1;for(var v=0;v<a;v++){var b=0,I=0;if(s=p?l.geometries[v]:l,s!==null){u=s.coordinates;var w=s.type;switch(c=0,w){case null:break;case"Point":if(t(u,f,y,b,I)===!1)return!1;f++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(t(u[r],f,y,b,I)===!1)return!1;f++,w==="MultiPoint"&&b++}w==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(t(u[r][i],f,y,b,I)===!1)return!1;f++}w==="MultiLineString"&&b++,w==="Polygon"&&I++}w==="Polygon"&&b++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(I=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(t(u[r][i][o],f,y,b,I)===!1)return!1;f++}I++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(Sg(s.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function fp(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function Ig(e,t){var n,r,i,o,s,a,u,l,c,f,p=0,g=e.type==="FeatureCollection",h=e.type==="Feature",m=g?e.features.length:1;for(n=0;n<m;n++){for(a=g?e.features[n].geometry:h?e.geometry:e,l=g?e.features[n].properties:h?e.properties:{},c=g?e.features[n].bbox:h?e.bbox:void 0,f=g?e.features[n].id:h?e.id:void 0,u=a?a.type==="GeometryCollection":!1,s=u?a.geometries.length:1,i=0;i<s;i++){if(o=u?a.geometries[i]:a,o===null){if(t(null,p,l,c,f)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,p,l,c,f)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],p,l,c,f)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}function ml(e){var t=[1/0,1/0,-1/0,-1/0];return Sg(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}ml.default=ml;function Qb(e,t){t===void 0&&(t={});var n=ml(e),r=(n[0]+n[2])/2,i=(n[1]+n[3])/2;return Hb([r,i],t.properties,t)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var t=Object(this),n=Math.max(Math.min(t.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)t[r]=e,++r;return t},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var Fi=function(){};Fi.prototype.interfaces_=function(){return[]};Fi.prototype.getClass=function(){return Fi};Fi.prototype.equalsWithTolerance=function(e,t,n){return Math.abs(e-t)<=n};var xt=function(e){function t(n){e.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),K=function(){},Lg={MAX_VALUE:{configurable:!0}};K.isNaN=function(e){return Number.isNaN(e)};K.doubleToLongBits=function(e){return e};K.longBitsToDouble=function(e){return e};K.isInfinite=function(e){return!Number.isFinite(e)};Lg.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(K,Lg);var hn=function(){},Ka=function(){},Eo=function(){};function gn(){}var E=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},eo={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};E.prototype.setOrdinate=function(e,t){switch(e){case E.X:this.x=t;break;case E.Y:this.y=t;break;case E.Z:this.z=t;break;default:throw new xt("Invalid ordinate index: "+e)}};E.prototype.equals2D=function(){if(arguments.length===1){var e=arguments[0];return!(this.x!==e.x||this.y!==e.y)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return!(!Fi.equalsWithTolerance(this.x,t.x,n)||!Fi.equalsWithTolerance(this.y,t.y,n))}};E.prototype.getOrdinate=function(e){switch(e){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.z}throw new xt("Invalid ordinate index: "+e)};E.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||K.isNaN(this.z))&&K.isNaN(e.z)};E.prototype.equals=function(e){return e instanceof E?this.equals2D(e):!1};E.prototype.equalInZ=function(e,t){return Fi.equalsWithTolerance(this.z,e.z,t)};E.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};E.prototype.clone=function(){};E.prototype.copy=function(){return new E(this)};E.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};E.prototype.distance3D=function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return Math.sqrt(t*t+n*n+r*r)};E.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)};E.prototype.hashCode=function(){var e=17;return e=37*e+E.hashCode(this.x),e=37*e+E.hashCode(this.y),e};E.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z};E.prototype.interfaces_=function(){return[hn,Ka,gn]};E.prototype.getClass=function(){return E};E.hashCode=function(){if(arguments.length===1){var e=arguments[0],t=K.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}};eo.DimensionalComparator.get=function(){return Vr};eo.serialVersionUID.get=function(){return 6683108902428367e3};eo.NULL_ORDINATE.get=function(){return K.NaN};eo.X.get=function(){return 0};eo.Y.get=function(){return 1};eo.Z.get=function(){return 2};Object.defineProperties(E,eo);var Vr=function(e){if(this._dimensionsToTest=2,arguments.length!==0&&arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new xt("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};Vr.prototype.compare=function(e,t){var n=e,r=t,i=Vr.compare(n.x,r.x);if(i!==0)return i;var o=Vr.compare(n.y,r.y);if(o!==0)return o;if(this._dimensionsToTest<=2)return 0;var s=Vr.compare(n.z,r.z);return s};Vr.prototype.interfaces_=function(){return[Eo]};Vr.prototype.getClass=function(){return Vr};Vr.compare=function(e,t){return e<t?-1:e>t?1:K.isNaN(e)?K.isNaN(t)?0:-1:K.isNaN(t)?1:0};var So=function(){};So.prototype.create=function(){};So.prototype.interfaces_=function(){return[]};So.prototype.getClass=function(){return So};var S=function(){},Ms={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};S.prototype.interfaces_=function(){return[]};S.prototype.getClass=function(){return S};S.toLocationSymbol=function(e){switch(e){case S.EXTERIOR:return"e";case S.BOUNDARY:return"b";case S.INTERIOR:return"i";case S.NONE:return"-"}throw new xt("Unknown location value: "+e)};Ms.INTERIOR.get=function(){return 0};Ms.BOUNDARY.get=function(){return 1};Ms.EXTERIOR.get=function(){return 2};Ms.NONE.get=function(){return-1};Object.defineProperties(S,Ms);var H=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},$e=function(){},Ng={LOG_10:{configurable:!0}};$e.prototype.interfaces_=function(){return[]};$e.prototype.getClass=function(){return $e};$e.log10=function(e){var t=Math.log(e);return K.isInfinite(t)||K.isNaN(t)?t:t/$e.LOG_10};$e.min=function(e,t,n,r){var i=e;return t<i&&(i=t),n<i&&(i=n),r<i&&(i=r),i};$e.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}};$e.wrap=function(e,t){return e<0?t- -e%t:e%t};$e.max=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2],r=e;return t>r&&(r=t),n>r&&(r=n),r}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}};$e.average=function(e,t){return(e+t)/2};Ng.LOG_10.get=function(){return Math.log(10)};Object.defineProperties($e,Ng);var Qn=function(e){this.str=e};Qn.prototype.append=function(e){this.str+=e};Qn.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)};Qn.prototype.toString=function(e){return this.str};var zn=function(e){this.value=e};zn.prototype.intValue=function(){return this.value};zn.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0};zn.isNaN=function(e){return Number.isNaN(e)};var ys=function(){};ys.isWhitespace=function(e){return e<=32&&e>=0||e===127};ys.toUpperCase=function(e){return e.toUpperCase()};var L=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if(typeof arguments[0]=="string"){var r=arguments[0];e.call(this,e.parse(r))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},wn={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};L.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo};L.prototype.extractSignificantDigits=function(e,t){var n=this.abs(),r=L.magnitude(n._hi),i=L.TEN.pow(r);n=n.divide(i),n.gt(L.TEN)?(n=n.divide(L.TEN),r+=1):n.lt(L.ONE)&&(n=n.multiply(L.TEN),r-=1);for(var o=r+1,s=new Qn,a=L.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){e&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,f=0;l>9?(c=!0,f="9"):f="0"+l,s.append(f),n=n.subtract(L.valueOf(l)).multiply(L.TEN),c&&n.selfAdd(L.TEN);var p=!0,g=L.magnitude(n._hi);if(g<0&&Math.abs(g)>=a-u&&(p=!1),!p)break}return t[0]=r,s.toString()};L.prototype.sqr=function(){return this.multiply(this)};L.prototype.doubleValue=function(){return this._hi+this._lo};L.prototype.subtract=function(){if(arguments[0]instanceof L){var e=arguments[0];return this.add(e.negate())}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}};L.prototype.equals=function(){if(arguments.length===1){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}};L.prototype.isZero=function(){return this._hi===0&&this._lo===0};L.prototype.selfSubtract=function(){if(arguments[0]instanceof L){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}};L.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};L.prototype.min=function(e){return this.le(e)?this:e};L.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof L){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,c=null,f=null;return u=this._hi/n,l=L.SPLIT*u,i=l-u,f=L.SPLIT*n,i=l-i,o=u-i,s=f-n,c=u*n,s=f-s,a=n-s,f=i*s-c+i*a+o*s+o*a,l=(this._hi-c-f+this._lo-u*r)/n,f=u+l,this._hi=f,this._lo=u-f+l,this}};L.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};L.prototype.divide=function(){if(arguments[0]instanceof L){var e=arguments[0],t=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;o=this._hi/e._hi,s=L.SPLIT*o,t=s-o,u=L.SPLIT*e._hi,t=s-t,n=o-t,r=u-e._hi,a=o*e._hi,r=u-r,i=e._hi-r,u=t*r-a+t*i+n*r+n*i,s=(this._hi-a-u+this._lo-o*e._lo)/e._hi,u=o+s;var l=u,c=o-u+s;return new L(l,c)}else if(typeof arguments[0]=="number"){var f=arguments[0];return K.isNaN(f)?L.createNaN():L.copy(this).selfDivide(f,0)}};L.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo};L.prototype.pow=function(e){if(e===0)return L.valueOf(1);var t=new L(this),n=L.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(t),r/=2,r>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n};L.prototype.ceil=function(){if(this.isNaN())return L.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new L(e,t)};L.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};L.prototype.rint=function(){if(this.isNaN())return this;var e=this.add(.5);return e.floor()};L.prototype.setValue=function(){if(arguments[0]instanceof L){var e=arguments[0];return this.init(e),this}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}};L.prototype.max=function(e){return this.ge(e)?this:e};L.prototype.sqrt=function(){if(this.isZero())return L.valueOf(0);if(this.isNegative())return L.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=L.valueOf(t),r=this.subtract(n.sqr()),i=r._hi*(e*.5);return n.add(i)};L.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof L){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return i=this._hi+t,s=i-this._hi,o=i-s,o=t-s+(this._hi-o),a=o+this._lo,n=i+a,r=a+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(arguments.length===2){var u=arguments[0],l=arguments[1],c=null,f=null,p=null,g=null,h=null,m=null,d=null,y=null;h=this._hi+u,p=this._lo+l,d=h-this._hi,y=p-this._lo,m=h-d,g=p-y,m=u-d+(this._hi-m),g=l-y+(this._lo-g),d=m+p,c=h+d,f=d+(h-c),d=g+f;var v=c+d,b=d+(c-v);return this._hi=v,this._lo=b,this}};L.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof L){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}else if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;u=L.SPLIT*this._hi,i=u-this._hi,l=L.SPLIT*n,i=u-i,o=this._hi-i,s=l-n,u=this._hi*n,s=l-s,a=n-s,l=i*s-u+i*a+o*s+o*a+(this._hi*r+this._lo*n);var c=u+l;i=u-c;var f=l+i;return this._hi=c,this._lo=f,this}};L.prototype.selfSqr=function(){return this.selfMultiply(this)};L.prototype.floor=function(){if(this.isNaN())return L.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new L(e,t)};L.prototype.negate=function(){return this.isNaN()?this:new L(-this._hi,-this._lo)};L.prototype.clone=function(){};L.prototype.multiply=function(){if(arguments[0]instanceof L){var e=arguments[0];return e.isNaN()?L.createNaN():L.copy(this).selfMultiply(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return K.isNaN(t)?L.createNaN():L.copy(this).selfMultiply(t,0)}};L.prototype.isNaN=function(){return K.isNaN(this._hi)};L.prototype.intValue=function(){return Math.trunc(this._hi)};L.prototype.toString=function(){var e=L.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()};L.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),r=t[0]+1,i=n;if(n.charAt(0)===".")i="0"+n;else if(r<0)i="0."+L.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var o=r-n.length,s=L.stringOfChar("0",o);i=n+s+".0"}return this.isNegative()?"-"+i:i};L.prototype.reciprocal=function(){var e=null,t=null,n=null,r=null,i=null,o=null,s=null,a=null;i=1/this._hi,o=L.SPLIT*i,e=o-i,a=L.SPLIT*this._hi,e=o-e,t=i-e,n=a-this._hi,s=i*this._hi,n=a-n,r=this._hi-n,a=e*n-s+e*r+t*n+t*r,o=(1-s-a-i*this._lo)/this._hi;var u=i+o,l=i-u+o;return new L(u,l)};L.prototype.toSciNotation=function(){if(this.isZero())return L.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=L.SCI_NOT_EXPONENT_CHAR+t[0];if(n.charAt(0)==="0")throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r};L.prototype.abs=function(){return this.isNaN()?L.NaN:this.isNegative()?this.negate():new L(this)};L.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};L.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo};L.prototype.add=function(){if(arguments[0]instanceof L){var e=arguments[0];return L.copy(this).selfAdd(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return L.copy(this).selfAdd(t)}};L.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof L){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}};L.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo};L.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};L.prototype.trunc=function(){return this.isNaN()?L.NaN:this.isPositive()?this.floor():this.ceil()};L.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};L.prototype.interfaces_=function(){return[gn,hn,Ka]};L.prototype.getClass=function(){return L};L.sqr=function(e){return L.valueOf(e).selfMultiply(e)};L.valueOf=function(){if(typeof arguments[0]=="string"){var e=arguments[0];return L.parse(e)}else if(typeof arguments[0]=="number"){var t=arguments[0];return new L(t)}};L.sqrt=function(e){return L.valueOf(e).sqrt()};L.parse=function(e){for(var t=0,n=e.length;ys.isWhitespace(e.charAt(t));)t++;var r=!1;if(t<n){var i=e.charAt(t);(i==="-"||i==="+")&&(t++,i==="-"&&(r=!0))}for(var o=new L,s=0,a=0,u=0;!(t>=n);){var l=e.charAt(t);if(t++,ys.isDigit(l)){var c=l-"0";o.selfMultiply(L.TEN),o.selfAdd(c),s++;continue}if(l==="."){a=s;continue}if(l==="e"||l==="E"){var f=e.substring(t);try{u=zn.parseInt(f)}catch(d){throw d instanceof Error?new Error("Invalid exponent "+f+" in string "+e):d}finally{}break}throw new Error("Unexpected character '"+l+"' at position "+t+" in string "+e)}var p=o,g=s-a-u;if(g===0)p=o;else if(g>0){var h=L.TEN.pow(g);p=o.divide(h)}else if(g<0){var m=L.TEN.pow(-g);p=o.multiply(m)}return r?p.negate():p};L.createNaN=function(){return new L(K.NaN,K.NaN)};L.copy=function(e){return new L(e)};L.magnitude=function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return i*10<=t&&(r+=1),r};L.stringOfChar=function(e,t){for(var n=new Qn,r=0;r<t;r++)n.append(e);return n.toString()};wn.PI.get=function(){return new L(3.141592653589793,12246467991473532e-32)};wn.TWO_PI.get=function(){return new L(6.283185307179586,24492935982947064e-32)};wn.PI_2.get=function(){return new L(1.5707963267948966,6123233995736766e-32)};wn.E.get=function(){return new L(2.718281828459045,14456468917292502e-32)};wn.NaN.get=function(){return new L(K.NaN,K.NaN)};wn.EPS.get=function(){return 123259516440783e-46};wn.SPLIT.get=function(){return 134217729};wn.MAX_PRINT_DIGITS.get=function(){return 32};wn.TEN.get=function(){return L.valueOf(10)};wn.ONE.get=function(){return L.valueOf(1)};wn.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};wn.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(L,wn);var Ae=function(){},xg={DP_SAFE_EPSILON:{configurable:!0}};Ae.prototype.interfaces_=function(){return[]};Ae.prototype.getClass=function(){return Ae};Ae.orientationIndex=function(e,t,n){var r=Ae.orientationIndexFilter(e,t,n);if(r<=1)return r;var i=L.valueOf(t.x).selfAdd(-e.x),o=L.valueOf(t.y).selfAdd(-e.y),s=L.valueOf(n.x).selfAdd(-t.x),a=L.valueOf(n.y).selfAdd(-t.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()};Ae.signOfDet2x2=function(e,t,n,r){var i=e.multiply(r).selfSubtract(t.multiply(n));return i.signum()};Ae.intersection=function(e,t,n,r){var i=L.valueOf(r.y).selfSubtract(n.y).selfMultiply(L.valueOf(t.x).selfSubtract(e.x)),o=L.valueOf(r.x).selfSubtract(n.x).selfMultiply(L.valueOf(t.y).selfSubtract(e.y)),s=i.subtract(o),a=L.valueOf(r.x).selfSubtract(n.x).selfMultiply(L.valueOf(e.y).selfSubtract(n.y)),u=L.valueOf(r.y).selfSubtract(n.y).selfMultiply(L.valueOf(e.x).selfSubtract(n.x)),l=a.subtract(u),c=l.selfDivide(s).doubleValue(),f=L.valueOf(e.x).selfAdd(L.valueOf(t.x).selfSubtract(e.x).selfMultiply(c)).doubleValue(),p=L.valueOf(t.x).selfSubtract(e.x).selfMultiply(L.valueOf(e.y).selfSubtract(n.y)),g=L.valueOf(t.y).selfSubtract(e.y).selfMultiply(L.valueOf(e.x).selfSubtract(n.x)),h=p.subtract(g),m=h.selfDivide(s).doubleValue(),d=L.valueOf(n.y).selfAdd(L.valueOf(r.y).selfSubtract(n.y).selfMultiply(m)).doubleValue();return new E(f,d)};Ae.orientationIndexFilter=function(e,t,n){var r=null,i=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),s=i-o;if(i>0){if(o<=0)return Ae.signum(s);r=i+o}else if(i<0){if(o>=0)return Ae.signum(s);r=-i-o}else return Ae.signum(s);var a=Ae.DP_SAFE_EPSILON*r;return s>=a||-s>=a?Ae.signum(s):2};Ae.signum=function(e){return e>0?1:e<0?-1:0};xg.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(Ae,xg);var it=function(){},As={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};As.X.get=function(){return 0};As.Y.get=function(){return 1};As.Z.get=function(){return 2};As.M.get=function(){return 3};it.prototype.setOrdinate=function(e,t,n){};it.prototype.size=function(){};it.prototype.getOrdinate=function(e,t){};it.prototype.getCoordinate=function(){};it.prototype.getCoordinateCopy=function(e){};it.prototype.getDimension=function(){};it.prototype.getX=function(e){};it.prototype.clone=function(){};it.prototype.expandEnvelope=function(e){};it.prototype.copy=function(){};it.prototype.getY=function(e){};it.prototype.toCoordinateArray=function(){};it.prototype.interfaces_=function(){return[Ka]};it.prototype.getClass=function(){return it};Object.defineProperties(it,As);var wg=function(){},Yo=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(wg),ce=function(){};ce.arraycopy=function(e,t,n,r,i){for(var o=0,s=t;s<t+i;s++)n[r+o]=e[s],o++};ce.getProperty=function(e){return{"line.separator":`
`}[e]};var _n=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(arguments.length===3){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(arguments.length===4){var f=arguments[0],p=arguments[1],g=arguments[2],h=arguments[3],m=f.y-p.y,d=p.x-f.x,y=f.x*p.y-p.x*f.y,v=g.y-h.y,b=h.x-g.x,I=g.x*h.y-h.x*g.y;this.x=d*I-b*y,this.y=v*y-m*I,this.w=m*b-v*d}};_n.prototype.getY=function(){var e=this.y/this.w;if(K.isNaN(e)||K.isInfinite(e))throw new Yo;return e};_n.prototype.getX=function(){var e=this.x/this.w;if(K.isNaN(e)||K.isInfinite(e))throw new Yo;return e};_n.prototype.getCoordinate=function(){var e=new E;return e.x=this.getX(),e.y=this.getY(),e};_n.prototype.interfaces_=function(){return[]};_n.prototype.getClass=function(){return _n};_n.intersection=function(e,t,n,r){var i=e.y-t.y,o=t.x-e.x,s=e.x*t.y-t.x*e.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=o*l-u*s,f=a*s-i*l,p=i*u-a*o,g=c/p,h=f/p;if(K.isNaN(g)||K.isInfinite(g)||K.isNaN(h)||K.isInfinite(h))throw new Yo;return new E(g,h)};var j=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof E){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Cg={serialVersionUID:{configurable:!0}};j.prototype.getArea=function(){return this.getWidth()*this.getHeight()};j.prototype.equals=function(e){if(!(e instanceof j))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};j.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new j;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny,r=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new j(t,r,n,i)};j.prototype.isNull=function(){return this._maxx<this._minx};j.prototype.getMaxX=function(){return this._maxx};j.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof E){var e=arguments[0];return this.covers(e.x,e.y)}else if(arguments[0]instanceof j){var t=arguments[0];return this.isNull()||t.isNull()?!1:t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}};j.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof j){var e=arguments[0];return this.isNull()||e.isNull()?!1:!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}else if(arguments[0]instanceof E){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}};j.prototype.getMinY=function(){return this._miny};j.prototype.getMinX=function(){return this._minx};j.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof E){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof j){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}};j.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t};j.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};j.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};j.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)};j.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};j.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};j.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};j.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t};j.prototype.expandBy=function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};j.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof j){var e=arguments[0];return this.covers(e)}else if(arguments[0]instanceof E){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}};j.prototype.centre=function(){return this.isNull()?null:new E((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};j.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof E){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof j){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}};j.prototype.getMaxY=function(){return this._maxy};j.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)};j.prototype.hashCode=function(){var e=17;return e=37*e+E.hashCode(this._minx),e=37*e+E.hashCode(this._maxx),e=37*e+E.hashCode(this._miny),e=37*e+E.hashCode(this._maxy),e};j.prototype.interfaces_=function(){return[hn,gn]};j.prototype.getClass=function(){return j};j.intersects=function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u)||c<a)}};Cg.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(j,Cg);var Rn={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Ja=function(e){this.geometryFactory=e||new tt};Ja.prototype.read=function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=Rn.typeStr.exec(e);if(e.search("EMPTY")!==-1&&(i=Rn.emptyTypeStr.exec(e),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],go[n]&&(t=go[n].apply(this,[r]))),t===void 0)throw new Error("Could not parse WKT "+e);return t};Ja.prototype.write=function(e){return this.extractGeometry(e)};Ja.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!_r[t])return null;var n=t.toUpperCase(),r;return e.isEmpty()?r=n+" EMPTY":r=n+"("+_r[t].apply(this,[e])+")",r};var _r={coordinate:function(e){return e.x+" "+e.y},point:function(e){return _r.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+_r.point.apply(t,[e._geometries[r]])+")");return n.join(",")},linestring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(_r.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},linearring:function(e){for(var t=this,n=[],r=0,i=e._points._coordinates.length;r<i;++r)n.push(_r.coordinate.apply(t,[e._points._coordinates[r]]));return n.join(",")},multilinestring:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+_r.linestring.apply(t,[e._geometries[r]])+")");return n.join(",")},polygon:function(e){var t=this,n=[];n.push("("+_r.linestring.apply(this,[e._shell])+")");for(var r=0,i=e._holes.length;r<i;++r)n.push("("+_r.linestring.apply(t,[e._holes[r]])+")");return n.join(",")},multipolygon:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push("("+_r.polygon.apply(t,[e._geometries[r]])+")");return n.join(",")},geometrycollection:function(e){for(var t=this,n=[],r=0,i=e._geometries.length;r<i;++r)n.push(t.extractGeometry(e._geometries[r]));return n.join(",")}},go={point:function(e){if(e===void 0)return this.geometryFactory.createPoint();var t=e.trim().split(Rn.spaces);return this.geometryFactory.createPoint(new E(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPoint();for(var n,r=e.trim().split(","),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(Rn.trimParens,"$1"),i.push(go.point.apply(t,[n]));return this.geometryFactory.createMultiPoint(i)},linestring:function(e){if(e===void 0)return this.geometryFactory.createLineString();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(Rn.spaces),n.push(new E(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLineString(n)},linearring:function(e){if(e===void 0)return this.geometryFactory.createLinearRing();for(var t=e.trim().split(","),n=[],r,i=0,o=t.length;i<o;++i)r=t[i].trim().split(Rn.spaces),n.push(new E(Number.parseFloat(r[0]),Number.parseFloat(r[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiLineString();for(var n,r=e.trim().split(Rn.parenComma),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(Rn.trimParens,"$1"),i.push(go.linestring.apply(t,[n]));return this.geometryFactory.createMultiLineString(i)},polygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createPolygon();for(var n,r,i,o=e.trim().split(Rn.parenComma),s,a=[],u=0,l=o.length;u<l;++u)n=o[u].replace(Rn.trimParens,"$1"),r=go.linestring.apply(t,[n]),i=t.geometryFactory.createLinearRing(r._points),u===0?s=i:a.push(i);return this.geometryFactory.createPolygon(s,a)},multipolygon:function(e){var t=this;if(e===void 0)return this.geometryFactory.createMultiPolygon();for(var n,r=e.trim().split(Rn.doubleParenComma),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(Rn.trimParens,"$1"),i.push(go.polygon.apply(t,[n]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(e){var t=this;if(e===void 0)return this.geometryFactory.createGeometryCollection();e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=e.trim().split("|"),r=[],i=0,o=n.length;i<o;++i)r.push(t.read(n[i]));return this.geometryFactory.createGeometryCollection(r)}},bn=function(e){this.parser=new Ja(e)};bn.prototype.write=function(e){return this.parser.write(e)};bn.toLineString=function(e,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var Cr=function(e){function t(n){e.call(this,n),this.name="RuntimeException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Ta=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var n=arguments[0];e.call(this,n)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Cr),Q=function(){};Q.prototype.interfaces_=function(){return[]};Q.prototype.getClass=function(){return Q};Q.shouldNeverReachHere=function(){if(arguments.length===0)Q.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new Ta("Should never reach here"+(e!==null?": "+e:""))}};Q.isTrue=function(){var e,t;if(arguments.length===1)e=arguments[0],Q.isTrue(e,null);else if(arguments.length===2&&(e=arguments[0],t=arguments[1],!e))throw t===null?new Ta:new Ta(t)};Q.equals=function(){var e,t,n;if(arguments.length===2)e=arguments[0],t=arguments[1],Q.equals(e,t,null);else if(arguments.length===3&&(e=arguments[0],t=arguments[1],n=arguments[2],!t.equals(e)))throw new Ta("Expected "+e+" but encountered "+t+(n!==null?": "+n:""))};var wt=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new E,this._intPt[1]=new E,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},no={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};wt.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]};wt.prototype.getTopologySummary=function(){var e=new Qn;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()};wt.prototype.computeIntersection=function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)};wt.prototype.getIntersectionNum=function(){return this._result};wt.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0],t=this.getEdgeDistance(e,0),n=this.getEdgeDistance(e,1);t>n?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}};wt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};wt.prototype.setPrecisionModel=function(e){this._precisionModel=e};wt.prototype.isInteriorIntersection=function(){var e=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var t=arguments[0],n=0;n<this._result;n++)if(!(e._intPt[n].equals2D(e._inputLines[t][0])||e._intPt[n].equals2D(e._inputLines[t][1])))return!0;return!1}};wt.prototype.getIntersection=function(e){return this._intPt[e]};wt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};wt.prototype.hasIntersection=function(){return this._result!==wt.NO_INTERSECTION};wt.prototype.getEdgeDistance=function(e,t){var n=wt.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1]);return n};wt.prototype.isCollinear=function(){return this._result===wt.COLLINEAR_INTERSECTION};wt.prototype.toString=function(){return bn.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+bn.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};wt.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]};wt.prototype.isIntersection=function(e){for(var t=this,n=0;n<this._result;n++)if(t._intPt[n].equals2D(e))return!0;return!1};wt.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]};wt.prototype.interfaces_=function(){return[]};wt.prototype.getClass=function(){return wt};wt.computeEdgeDistance=function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))r>i?o=r:o=i;else{var s=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y);r>i?o=s:o=a,o===0&&!e.equals(t)&&(o=Math.max(s,a))}return Q.isTrue(!(o===0&&!e.equals(t)),"Bad distance calculation"),o};wt.nonRobustComputeEdgeDistance=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i);return Q.isTrue(!(o===0&&!e.equals(t)),"Invalid distance calculation"),o};no.DONT_INTERSECT.get=function(){return 0};no.DO_INTERSECT.get=function(){return 1};no.COLLINEAR.get=function(){return 2};no.NO_INTERSECTION.get=function(){return 0};no.POINT_INTERSECTION.get=function(){return 1};no.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(wt,no);var wi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(n){var r=new j(this._inputLines[0][0],this._inputLines[0][1]),i=new j(this._inputLines[1][0],this._inputLines[1][1]);return r.contains(n)&&i.contains(n)},t.prototype.computeIntersection=function(){if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];if(this._isProper=!1,j.intersects(r,i,n)&&G.orientationIndex(r,i,n)===0&&G.orientationIndex(i,r,n)===0)return this._isProper=!0,(n.equals(r)||n.equals(i))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(n,r,i,o,s){s.x=this.smallestInAbsValue(n.x,r.x,i.x,o.x),s.y=this.smallestInAbsValue(n.y,r.y,i.y,o.y),n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y},t.prototype.safeHCoordinateIntersection=function(n,r,i,o){var s=null;try{s=_n.intersection(n,r,i,o)}catch(a){if(a instanceof Yo)s=t.nearestEndpoint(n,r,i,o);else throw a}finally{}return s},t.prototype.intersection=function(n,r,i,o){var s=this.intersectionWithNormalization(n,r,i,o);return this.isInSegmentEnvelopes(s)||(s=new E(t.nearestEndpoint(n,r,i,o))),this._precisionModel!==null&&this._precisionModel.makePrecise(s),s},t.prototype.smallestInAbsValue=function(n,r,i,o){var s=n,a=Math.abs(s);return Math.abs(r)<a&&(s=r,a=Math.abs(r)),Math.abs(i)<a&&(s=i,a=Math.abs(i)),Math.abs(o)<a&&(s=o),s},t.prototype.checkDD=function(n,r,i,o,s){var a=Ae.intersection(n,r,i,o),u=this.isInSegmentEnvelopes(a);ce.out.println("DD in env = "+u+"  --------------------- "+a),s.distance(a)>1e-4&&ce.out.println("Distance = "+s.distance(a))},t.prototype.intersectionWithNormalization=function(n,r,i,o){var s=new E(n),a=new E(r),u=new E(i),l=new E(o),c=new E;this.normalizeToEnvCentre(s,a,u,l,c);var f=this.safeHCoordinateIntersection(s,a,u,l);return f.x+=c.x,f.y+=c.y,f},t.prototype.computeCollinearIntersection=function(n,r,i,o){var s=j.intersects(n,r,i),a=j.intersects(n,r,o),u=j.intersects(i,o,n),l=j.intersects(i,o,r);return s&&a?(this._intPt[0]=i,this._intPt[1]=o,e.COLLINEAR_INTERSECTION):u&&l?(this._intPt[0]=n,this._intPt[1]=r,e.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,i.equals(n)&&!a&&!l?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=i,this._intPt[1]=r,i.equals(r)&&!a&&!u?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=o,this._intPt[1]=n,o.equals(n)&&!s&&!l?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=o,this._intPt[1]=r,o.equals(r)&&!s&&!u?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(n,r,i,o,s){var a=n.x<r.x?n.x:r.x,u=n.y<r.y?n.y:r.y,l=n.x>r.x?n.x:r.x,c=n.y>r.y?n.y:r.y,f=i.x<o.x?i.x:o.x,p=i.y<o.y?i.y:o.y,g=i.x>o.x?i.x:o.x,h=i.y>o.y?i.y:o.y,m=a>f?a:f,d=l<g?l:g,y=u>p?u:p,v=c<h?c:h,b=(m+d)/2,I=(y+v)/2;s.x=b,s.y=I,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y},t.prototype.computeIntersect=function(n,r,i,o){if(this._isProper=!1,!j.intersects(n,r,i,o))return e.NO_INTERSECTION;var s=G.orientationIndex(n,r,i),a=G.orientationIndex(n,r,o);if(s>0&&a>0||s<0&&a<0)return e.NO_INTERSECTION;var u=G.orientationIndex(i,o,n),l=G.orientationIndex(i,o,r);if(u>0&&l>0||u<0&&l<0)return e.NO_INTERSECTION;var c=s===0&&a===0&&u===0&&l===0;return c?this.computeCollinearIntersection(n,r,i,o):(s===0||a===0||u===0||l===0?(this._isProper=!1,n.equals2D(i)||n.equals2D(o)?this._intPt[0]=n:r.equals2D(i)||r.equals2D(o)?this._intPt[0]=r:s===0?this._intPt[0]=new E(i):a===0?this._intPt[0]=new E(o):u===0?this._intPt[0]=new E(n):l===0&&(this._intPt[0]=new E(r))):(this._isProper=!0,this._intPt[0]=this.intersection(n,r,i,o)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(n,r,i,o){var s=n,a=G.distancePointLine(n,i,o),u=G.distancePointLine(r,i,o);return u<a&&(a=u,s=r),u=G.distancePointLine(i,n,r),u<a&&(a=u,s=i),u=G.distancePointLine(o,n,r),u<a&&(a=u,s=o),s},t}(wt),ki=function(){};ki.prototype.interfaces_=function(){return[]};ki.prototype.getClass=function(){return ki};ki.orientationIndex=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-t.x,s=n.y-t.y;return ki.signOfDet2x2(r,i,o,s)};ki.signOfDet2x2=function(e,t,n,r){var i=null,o=null,s=null;if(i=1,e===0||r===0)return t===0||n===0?0:t>0?n>0?-i:i:n>0?i:-i;if(t===0||n===0)return r>0?e>0?i:-i:e>0?-i:i;if(t>0?r>0?t<=r||(i=-i,o=e,e=n,n=o,o=t,t=r,r=o):t<=-r?(i=-i,n=-n,r=-r):(o=e,e=-n,n=o,o=t,t=-r,r=o):r>0?-t<=r?(i=-i,e=-e,t=-t):(o=-e,e=n,n=o,o=-t,t=r,r=o):t>=r?(e=-e,t=-t,n=-n,r=-r):(i=-i,o=-e,e=-n,n=o,o=-t,t=-r,r=o),e>0)if(n>0){if(!(e<=n))return i}else return i;else{if(n>0)return-i;if(e>=n)i=-i,e=-e,n=-n;else return-i}for(;;){if(s=Math.floor(n/e),n=n-s*e,r=r-s*t,r<0)return-i;if(r>t)return i;if(e>n+n){if(t<r+r)return i}else{if(t>r+r)return-i;n=e-n,r=t-r,i=-i}if(r===0)return n===0?0:-i;if(n===0||(s=Math.floor(e/n),e=e-s*n,t=t-s*r,t<0))return i;if(t>r)return-i;if(n>e+e){if(r<t+t)return-i}else{if(r>t+t)return i;e=n-e,t=r-t,i=-i}if(t===0)return e===0?0:i;if(e===0)return-i}};var Gn=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};Gn.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=e.x-this._p.x,o=e.y-this._p.y,s=t.x-this._p.x,a=t.y-this._p.y,u=ki.signOfDet2x2(i,o,s,a);if(u===0)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}};Gn.prototype.isPointInPolygon=function(){return this.getLocation()!==S.EXTERIOR};Gn.prototype.getLocation=function(){return this._isPointOnSegment?S.BOUNDARY:this._crossingCount%2===1?S.INTERIOR:S.EXTERIOR};Gn.prototype.isOnSegment=function(){return this._isPointOnSegment};Gn.prototype.interfaces_=function(){return[]};Gn.prototype.getClass=function(){return Gn};Gn.locatePointInRing=function(){if(arguments[0]instanceof E&&H(arguments[1],it)){for(var e=arguments[0],t=arguments[1],n=new Gn(e),r=new E,i=new E,o=1;o<t.size();o++)if(t.getCoordinate(o,r),t.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}else if(arguments[0]instanceof E&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new Gn(s),l=1;l<a.length;l++){var c=a[l],f=a[l-1];if(u.countSegment(c,f),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var G=function(){},ro={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};G.prototype.interfaces_=function(){return[]};G.prototype.getClass=function(){return G};G.orientationIndex=function(e,t,n){return Ae.orientationIndex(e,t,n)};G.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,r=1;r<e.length-1;r++){var i=e[r].x-n,o=e[r+1].y,s=e[r-1].y;t+=i*(s-o)}return t/2}else if(H(arguments[0],it)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new E,c=new E,f=new E;a.getCoordinate(0,c),a.getCoordinate(1,f);var p=c.x;f.x-=p;for(var g=0,h=1;h<u-1;h++)l.y=c.y,c.x=f.x,c.y=f.y,a.getCoordinate(h+1,f),f.x-=p,g+=c.x*(l.y-f.y);return g/2}};G.distanceLineLine=function(e,t,n,r){if(e.equals(t))return G.distancePointLine(e,n,r);if(n.equals(r))return G.distancePointLine(r,e,t);var i=!1;if(!j.intersects(e,t,n,r))i=!0;else{var o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(o===0)i=!0;else{var s=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),a=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y),u=a/o,l=s/o;(l<0||l>1||u<0||u>1)&&(i=!0)}}return i?$e.min(G.distancePointLine(e,n,r),G.distancePointLine(t,n,r),G.distancePointLine(n,e,t),G.distancePointLine(r,e,t)):0};G.isPointInRing=function(e,t){return G.locatePointInRing(e,t)!==S.EXTERIOR};G.computeLength=function(e){var t=e.size();if(t<=1)return 0;var n=0,r=new E;e.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<t;s++){e.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=a,o=u}return n};G.isCCW=function(e){var t=e.length-1;if(t<3)throw new xt("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,i=1;i<=t;i++){var o=e[i];o.y>n.y&&(n=o,r=i)}var s=r;do s=s-1,s<0&&(s=t);while(e[s].equals2D(n)&&s!==r);var a=r;do a=(a+1)%t;while(e[a].equals2D(n)&&a!==r);var u=e[s],l=e[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=G.computeOrientation(u,n,l),f=!1;return c===0?f=u.x>l.x:f=c>0,f};G.locatePointInRing=function(e,t){return Gn.locatePointInRing(e,t)};G.distancePointLinePerpendicular=function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)};G.computeOrientation=function(e,t,n){return G.orientationIndex(e,t,n)};G.distancePointLine=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(t.length===0)throw new xt("Line array must contain at least one vertex");for(var n=e.distance(t[0]),r=0;r<t.length-1;r++){var i=G.distancePointLine(e,t[r],t[r+1]);i<n&&(n=i)}return n}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}};G.isOnLine=function(e,t){for(var n=new wi,r=1;r<t.length;r++){var i=t[r-1],o=t[r];if(n.computeIntersection(e,i,o),n.hasIntersection())return!0}return!1};ro.CLOCKWISE.get=function(){return-1};ro.RIGHT.get=function(){return G.CLOCKWISE};ro.COUNTERCLOCKWISE.get=function(){return 1};ro.LEFT.get=function(){return G.COUNTERCLOCKWISE};ro.COLLINEAR.get=function(){return 0};ro.STRAIGHT.get=function(){return G.COLLINEAR};Object.defineProperties(G,ro);var Or=function(){};Or.prototype.filter=function(e){};Or.prototype.interfaces_=function(){return[]};Or.prototype.getClass=function(){return Or};var Y=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},mr={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Y.prototype.isGeometryCollection=function(){return this.getSortIndex()===Y.SORTINDEX_GEOMETRYCOLLECTION};Y.prototype.getFactory=function(){return this._factory};Y.prototype.getGeometryN=function(e){return this};Y.prototype.getArea=function(){return 0};Y.prototype.isRectangle=function(){return!1};Y.prototype.equals=function(){if(arguments[0]instanceof Y){var e=arguments[0];return e===null?!1:this.equalsTopo(e)}else if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof Y))return!1;var n=t;return this.equalsExact(n)}};Y.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)};Y.prototype.geometryChanged=function(){this.apply(Y.geometryChangedFilter)};Y.prototype.geometryChangedAction=function(){this._envelope=null};Y.prototype.equalsNorm=function(e){return e===null?!1:this.norm().equalsExact(e.norm())};Y.prototype.getLength=function(){return 0};Y.prototype.getNumGeometries=function(){return 1};Y.prototype.compareTo=function(){if(arguments.length===1){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}};Y.prototype.getUserData=function(){return this._userData};Y.prototype.getSRID=function(){return this._SRID};Y.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};Y.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===Y.SORTINDEX_GEOMETRYCOLLECTION)throw new xt("This method does not support GeometryCollection arguments")};Y.prototype.equal=function(e,t,n){return n===0?e.equals(t):e.distance(t)<=n};Y.prototype.norm=function(){var e=this.copy();return e.normalize(),e};Y.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};Y.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new j(this._envelope)};Y.prototype.setSRID=function(e){this._SRID=e};Y.prototype.setUserData=function(e){this._userData=e};Y.prototype.compare=function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(s!==0)return s}return n.hasNext()?1:r.hasNext()?-1:0};Y.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};Y.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Y.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Y.SORTINDEX_MULTIPOINT||this.getSortIndex()===Y.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Y.SORTINDEX_MULTIPOLYGON};Y.prototype.interfaces_=function(){return[Ka,hn,gn]};Y.prototype.getClass=function(){return Y};Y.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1};Y.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1};mr.serialVersionUID.get=function(){return 8763622679187377e3};mr.SORTINDEX_POINT.get=function(){return 0};mr.SORTINDEX_MULTIPOINT.get=function(){return 1};mr.SORTINDEX_LINESTRING.get=function(){return 2};mr.SORTINDEX_LINEARRING.get=function(){return 3};mr.SORTINDEX_MULTILINESTRING.get=function(){return 4};mr.SORTINDEX_POLYGON.get=function(){return 5};mr.SORTINDEX_MULTIPOLYGON.get=function(){return 6};mr.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};mr.geometryChangedFilter.get=function(){return Jl};Object.defineProperties(Y,mr);var Jl=function(){};Jl.interfaces_=function(){return[Or]};Jl.filter=function(e){e.geometryChangedAction()};var ar=function(){};ar.prototype.filter=function(e){};ar.prototype.interfaces_=function(){return[]};ar.prototype.getClass=function(){return ar};var cn=function(){},Fr={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};cn.prototype.isInBoundary=function(e){};cn.prototype.interfaces_=function(){return[]};cn.prototype.getClass=function(){return cn};Fr.Mod2BoundaryNodeRule.get=function(){return Io};Fr.EndPointBoundaryNodeRule.get=function(){return Lo};Fr.MultiValentEndPointBoundaryNodeRule.get=function(){return No};Fr.MonoValentEndPointBoundaryNodeRule.get=function(){return xo};Fr.MOD2_BOUNDARY_RULE.get=function(){return new Io};Fr.ENDPOINT_BOUNDARY_RULE.get=function(){return new Lo};Fr.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new No};Fr.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new xo};Fr.OGC_SFS_BOUNDARY_RULE.get=function(){return cn.MOD2_BOUNDARY_RULE};Object.defineProperties(cn,Fr);var Io=function(){};Io.prototype.isInBoundary=function(e){return e%2===1};Io.prototype.interfaces_=function(){return[cn]};Io.prototype.getClass=function(){return Io};var Lo=function(){};Lo.prototype.isInBoundary=function(e){return e>0};Lo.prototype.interfaces_=function(){return[cn]};Lo.prototype.getClass=function(){return Lo};var No=function(){};No.prototype.isInBoundary=function(e){return e>1};No.prototype.interfaces_=function(){return[cn]};No.prototype.getClass=function(){return No};var xo=function(){};xo.prototype.isInBoundary=function(e){return e===1};xo.prototype.interfaces_=function(){return[cn]};xo.prototype.getClass=function(){return xo};var Wt=function(){};Wt.prototype.add=function(){};Wt.prototype.addAll=function(){};Wt.prototype.isEmpty=function(){};Wt.prototype.iterator=function(){};Wt.prototype.size=function(){};Wt.prototype.toArray=function(){};Wt.prototype.remove=function(){};function Ql(e){this.message=e||""}Ql.prototype=new Error;Ql.prototype.name="IndexOutOfBoundsException";var Ho=function(){};Ho.prototype.hasNext=function(){};Ho.prototype.next=function(){};Ho.prototype.remove=function(){};var vn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(Wt);function Zo(e){this.message=e||""}Zo.prototype=new Error;Zo.prototype.name="NoSuchElementException";var F=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Wt&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,Wt]},t.prototype.add=function(n){return arguments.length===1?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.set=function(n,r){var i=this.array_[n];return this.array_[n]=r,i},t.prototype.iterator=function(){return new $b(this)},t.prototype.get=function(n){if(n<0||n>=this.size())throw new Ql;return this.array_[n]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.remove=function(n){for(var r=this,i=!1,o=0,s=this.array_.length;o<s;o++)if(r.array_[o]===n){r.array_.splice(o,1),i=!0;break}return i},t}(vn),$b=function(e){function t(n){e.call(this),this.arrayList_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Zo;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(Ho),Ds=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(r){return this.get(r)},t.prototype.addAll=function(){var r=this;if(arguments.length===2){for(var i=arguments[0],o=arguments[1],s=!1,a=i.iterator();a.hasNext();)r.add(a.next(),o),s=!0;return s}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var r=this,i=e.prototype.clone.call(this),o=0;o<this.size();o++)i.add(o,r.get(o).copy());return i},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var r=this;if(arguments.length===1){var i=arguments[0];e.prototype.add.call(this,i)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var o=arguments[0],s=arguments[1];return this.add(o,s,!0),!0}else if(arguments[0]instanceof E&&typeof arguments[1]=="boolean"){var a=arguments[0],u=arguments[1];if(!u&&this.size()>=1){var l=this.get(this.size()-1);if(l.equals2D(a))return null}e.prototype.add.call(this,a)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var c=arguments[0],f=arguments[1];return this.add(c,f),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var p=arguments[0],g=arguments[1],h=arguments[2];if(h)for(var m=0;m<p.length;m++)r.add(p[m],g);else for(var d=p.length-1;d>=0;d--)r.add(p[d],g);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof E){var y=arguments[0],v=arguments[1],b=arguments[2];if(!b){var I=this.size();if(I>0){if(y>0){var w=this.get(y-1);if(w.equals2D(v))return null}if(y<I){var O=this.get(y);if(O.equals2D(v))return null}}}e.prototype.add.call(this,y,v)}}else if(arguments.length===4){var M=arguments[0],x=arguments[1],T=arguments[2],k=arguments[3],A=1;T>k&&(A=-1);for(var C=T;C!==k;C+=A)r.add(M[C],x);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new E(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}(F),et=function(){},Qa={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Qa.ForwardComparator.get=function(){return _s};Qa.BidirectionalComparator.get=function(){return wo};Qa.coordArrayType.get=function(){return new Array(0).fill(null)};et.prototype.interfaces_=function(){return[]};et.prototype.getClass=function(){return et};et.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))};et.ptNotInList=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(et.indexOf(r,t)<0)return r}return null};et.scroll=function(e,t){var n=et.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);ce.arraycopy(e,n,r,0,e.length-n),ce.arraycopy(e,0,r,e.length-n,n),ce.arraycopy(r,0,e,0,e.length)};et.equals=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(r===null||i===null||r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(o.compare(r[s],i[s])!==0)return!1;return!0}};et.intersection=function(e,t){for(var n=new Ds,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()};et.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1};et.removeRepeatedPoints=function(e){if(!et.hasRepeatedPoints(e))return e;var t=new Ds(e,!1);return t.toCoordinateArray()};et.reverse=function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}};et.removeNull=function(e){for(var t=0,n=0;n<e.length;n++)e[n]!==null&&t++;var r=new Array(t).fill(null);if(t===0)return r;for(var i=0,o=0;o<e.length;o++)e[o]!==null&&(r[i++]=e[o]);return r};et.copyDeep=function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=new E(e[n]);return t}else if(arguments.length===5)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new E(r[i+u])};et.isEqualReversed=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(r.compareTo(i)!==0)return!1}return!0};et.envelope=function(e){for(var t=new j,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t};et.toCoordinateArray=function(e){return e.toArray(et.coordArrayType)};et.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]};et.indexOf=function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1};et.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(r!==0)return r}return 1};et.compare=function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(r!==0)return r;n++}return n<t.length?-1:n<e.length?1:0};et.minCoordinate=function(e){for(var t=null,n=0;n<e.length;n++)(t===null||t.compareTo(e[n])>0)&&(t=e[n]);return t};et.extract=function(e,t,n){t=$e.clamp(t,0,e.length),n=$e.clamp(n,-1,e.length);var r=n-t+1;n<0&&(r=0),t>=e.length&&(r=0),n<t&&(r=0);var i=new Array(r).fill(null);if(r===0)return i;for(var o=0,s=t;s<=n;s++)i[o++]=e[s];return i};Object.defineProperties(et,Qa);var _s=function(){};_s.prototype.compare=function(e,t){var n=e,r=t;return et.compare(n,r)};_s.prototype.interfaces_=function(){return[Eo]};_s.prototype.getClass=function(){return _s};var wo=function(){};wo.prototype.compare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var i=et.compare(n,r),o=et.isEqualReversed(n,r);return o?0:i};wo.prototype.OLDcompare=function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var i=et.increasingDirection(n),o=et.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(l!==0)return l;s+=i,a+=o}return 0};wo.prototype.interfaces_=function(){return[Eo]};wo.prototype.getClass=function(){return wo};var io=function(){};io.prototype.get=function(){};io.prototype.put=function(){};io.prototype.size=function(){};io.prototype.values=function(){};io.prototype.entrySet=function(){};var tE=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(io);function Fs(e){this.message=e||""}Fs.prototype=new Error;Fs.prototype.name="OperationNotSupported";function $a(){}$a.prototype=new Wt;$a.prototype.contains=function(){};var $l=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof Wt&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(n){for(var r=this,i=0,o=this.array_.length;i<o;i++){var s=r.array_[i];if(s===n)return!0}return!1},t.prototype.add=function(n){return this.contains(n)?!1:(this.array_.push(n),!0)},t.prototype.addAll=function(n){for(var r=this,i=n.iterator();i.hasNext();)r.add(i.next());return!0},t.prototype.remove=function(n){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var n=this,r=[],i=0,o=this.array_.length;i<o;i++)r.push(n.array_[i]);return r},t.prototype.iterator=function(){return new eE(this)},t}($a),eE=function(e){function t(n){e.call(this),this.hashSet_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Zo;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new Fs},t}(Ho),Er=0,ai=1;function pp(e){return e===null?Er:e.color}function bt(e){return e===null?null:e.parent}function yr(e,t){e!==null&&(e.color=t)}function ku(e){return e===null?null:e.left}function hp(e){return e===null?null:e.right}function _e(){this.root_=null,this.size_=0}_e.prototype=new tE;_e.prototype.get=function(e){for(var t=this.root_;t!==null;){var n=e.compareTo(t.key);if(n<0)t=t.left;else if(n>0)t=t.right;else return t.value}return null};_e.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Er,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n=this.root_,r,i;do if(r=n,i=e.compareTo(n.key),i<0)n=n.left;else if(i>0)n=n.right;else{var o=n.value;return n.value=t,o}while(n!==null);var s={key:e,left:null,right:null,value:t,parent:r,color:Er,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=s:r.right=s,this.fixAfterInsertion(s),this.size_++,null};_e.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=ai;e!=null&&e!==this.root_&&e.parent.color===ai;)if(bt(e)===ku(bt(bt(e)))){var n=hp(bt(bt(e)));pp(n)===ai?(yr(bt(e),Er),yr(n,Er),yr(bt(bt(e)),ai),e=bt(bt(e))):(e===hp(bt(e))&&(e=bt(e),t.rotateLeft(e)),yr(bt(e),Er),yr(bt(bt(e)),ai),t.rotateRight(bt(bt(e))))}else{var r=ku(bt(bt(e)));pp(r)===ai?(yr(bt(e),Er),yr(r,Er),yr(bt(bt(e)),ai),e=bt(bt(e))):(e===ku(bt(e))&&(e=bt(e),t.rotateRight(e)),yr(bt(e),Er),yr(bt(bt(e)),ai),t.rotateLeft(bt(bt(e))))}this.root_.color=Er};_e.prototype.values=function(){var e=new F,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=_e.successor(t))!==null;)e.add(t.value);return e};_e.prototype.entrySet=function(){var e=new $l,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=_e.successor(t))!==null;)e.add(t);return e};_e.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};_e.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};_e.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};_e.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var n=e.parent,r=e;n!==null&&r===n.right;)r=n,n=n.parent;return n}};_e.prototype.size=function(){return this.size_};var vs=function(){};vs.prototype.interfaces_=function(){return[]};vs.prototype.getClass=function(){return vs};function Og(){}Og.prototype=new $a;function Un(){this.array_=[],arguments[0]instanceof Wt&&this.addAll(arguments[0])}Un.prototype=new Og;Un.prototype.contains=function(e){for(var t=this,n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===0)return!0}return!1};Un.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===1)return t.array_.splice(n,0,e),!0}return this.array_.push(e),!0};Un.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next());return!0};Un.prototype.remove=function(e){throw new Fs};Un.prototype.size=function(){return this.array_.length};Un.prototype.isEmpty=function(){return this.array_.length===0};Un.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};Un.prototype.iterator=function(){return new tu(this)};var tu=function(e){this.treeSet_=e,this.position_=0};tu.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Zo;return this.treeSet_.array_[this.position_++]};tu.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};tu.prototype.remove=function(){throw new Fs};var hi=function(){};hi.sort=function(){var e=arguments[0],t,n,r,i;if(arguments.length===1)i=function(s,a){return s.compareTo(a)},e.sort(i);else if(arguments.length===2)r=arguments[1],i=function(s,a){return r.compare(s,a)},e.sort(i);else if(arguments.length===3){n=e.slice(arguments[1],arguments[2]),n.sort();var o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));for(e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])}else if(arguments.length===4)for(n=e.slice(arguments[1],arguments[2]),r=arguments[3],i=function(s,a){return r.compare(s,a)},n.sort(i),o=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length)),e.splice(0,e.length),t=0;t<o.length;t++)e.push(o[t])};hi.asList=function(e){for(var t=new F,n=0,r=e.length;n<r;n++)t.add(e[n]);return t};var st=function(){},Cn={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Cn.P.get=function(){return 0};Cn.L.get=function(){return 1};Cn.A.get=function(){return 2};Cn.FALSE.get=function(){return-1};Cn.TRUE.get=function(){return-2};Cn.DONTCARE.get=function(){return-3};Cn.SYM_FALSE.get=function(){return"F"};Cn.SYM_TRUE.get=function(){return"T"};Cn.SYM_DONTCARE.get=function(){return"*"};Cn.SYM_P.get=function(){return"0"};Cn.SYM_L.get=function(){return"1"};Cn.SYM_A.get=function(){return"2"};st.prototype.interfaces_=function(){return[]};st.prototype.getClass=function(){return st};st.toDimensionSymbol=function(e){switch(e){case st.FALSE:return st.SYM_FALSE;case st.TRUE:return st.SYM_TRUE;case st.DONTCARE:return st.SYM_DONTCARE;case st.P:return st.SYM_P;case st.L:return st.SYM_L;case st.A:return st.SYM_A}throw new xt("Unknown dimension value: "+e)};st.toDimensionValue=function(e){switch(ys.toUpperCase(e)){case st.SYM_FALSE:return st.FALSE;case st.SYM_TRUE:return st.TRUE;case st.SYM_DONTCARE:return st.DONTCARE;case st.SYM_P:return st.P;case st.SYM_L:return st.L;case st.SYM_A:return st.A}throw new xt("Unknown dimension symbol: "+e)};Object.defineProperties(st,Cn);var qn=function(){};qn.prototype.filter=function(e){};qn.prototype.interfaces_=function(){return[]};qn.prototype.getClass=function(){return qn};var En=function(){};En.prototype.filter=function(e,t){};En.prototype.isDone=function(){};En.prototype.isGeometryChanged=function(){};En.prototype.interfaces_=function(){return[]};En.prototype.getClass=function(){return En};var Ce=function(e){function t(r,i){if(e.call(this,i),this._geometries=r||[],e.hasNullElements(this._geometries))throw new xt("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var r=this,i=new j,o=0;o<this._geometries.length;o++)i.expandToInclude(r._geometries[o].getEnvelopeInternal());return i},t.prototype.getGeometryN=function(r){return this._geometries[r]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var r=this,i=new Array(this.getNumPoints()).fill(null),o=-1,s=0;s<this._geometries.length;s++)for(var a=r._geometries[s].getCoordinates(),u=0;u<a.length;u++)o++,i[o]=a[u];return i},t.prototype.getArea=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getArea();return i},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this._geometries.length!==s._geometries.length)return!1;for(var a=0;a<this._geometries.length;a++)if(!r._geometries[a].equalsExact(s._geometries[a],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<this._geometries.length;i++)r._geometries[i].normalize();hi.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var r=this,i=st.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getBoundaryDimension());return i},t.prototype.getDimension=function(){for(var r=this,i=st.FALSE,o=0;o<this._geometries.length;o++)i=Math.max(i,r._geometries[o].getDimension());return i},t.prototype.getLength=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=0,o=0;o<this._geometries.length;o++)i+=r._geometries[o].getNumPoints();return i},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[s]=r._geometries[s].reverse();return this.getFactory().createGeometryCollection(o)},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=new Un(hi.asList(this._geometries)),s=new Un(hi.asList(i._geometries));return this.compare(o,s)}else if(arguments.length===2){for(var a=arguments[0],u=arguments[1],l=a,c=this.getNumGeometries(),f=l.getNumGeometries(),p=0;p<c&&p<f;){var g=r.getGeometryN(p),h=l.getGeometryN(p),m=g.compareToSameClass(h,u);if(m!==0)return m;p++}return p<c?1:p<f?-1:0}},t.prototype.apply=function(){var r=this;if(H(arguments[0],ar))for(var i=arguments[0],o=0;o<this._geometries.length;o++)r._geometries[o].apply(i);else if(H(arguments[0],En)){var s=arguments[0];if(this._geometries.length===0)return null;for(var a=0;a<this._geometries.length&&(r._geometries[a].apply(s),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(H(arguments[0],qn)){var u=arguments[0];u.filter(this);for(var l=0;l<this._geometries.length;l++)r._geometries[l].apply(u)}else if(H(arguments[0],Or)){var c=arguments[0];c.filter(this);for(var f=0;f<this._geometries.length;f++)r._geometries[f].apply(c)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Q.shouldNeverReachHere(),null},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._geometries=new Array(this._geometries.length).fill(null);for(var o=0;o<this._geometries.length;o++)i._geometries[o]=r._geometries[o].clone();return i},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.isEmpty=function(){for(var r=this,i=0;i<this._geometries.length;i++)if(!r._geometries[i].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,n),t}(Y),mi=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Y.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?st.FALSE:0},t.prototype.isClosed=function(){var r=this;if(this.isEmpty())return!1;for(var i=0;i<this._geometries.length;i++)if(!r._geometries[i].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[i-1-s]=r._geometries[s].reverse();return this.getFactory().createMultiLineString(o)},t.prototype.getBoundary=function(){return new sn(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[vs]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,n),t}(Ce),sn=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var e=arguments[0],t=cn.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};sn.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return t.length===1?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};sn.prototype.getBoundary=function(){return this._geom instanceof Tt?this.boundaryLineString(this._geom):this._geom instanceof mi?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};sn.prototype.boundaryLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(e.isClosed()){var t=this._bnRule.isInBoundary(2);return t?e.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])};sn.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};sn.prototype.computeBoundaryCoordinates=function(e){var t=this,n=new F;this._endpointMap=new _e;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);i.getNumPoints()!==0&&(t.addEndpoint(i.getCoordinateN(0)),t.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue(),u=a.count;t._bnRule.isInBoundary(u)&&n.add(s.getKey())}return et.toCoordinateArray(n)};sn.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);t===null&&(t=new Ra,this._endpointMap.put(e,t)),t.count++};sn.prototype.interfaces_=function(){return[]};sn.prototype.getClass=function(){return sn};sn.getBoundary=function(){if(arguments.length===1){var e=arguments[0],t=new sn(e);return t.getBoundary()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new sn(n,r);return i.getBoundary()}};var Ra=function(){this.count=null};Ra.prototype.interfaces_=function(){return[]};Ra.prototype.getClass=function(){return Ra};function nE(){}function rE(){}var iE=function(){};function oE(){}function sE(){}function aE(){}var an=function(){},tc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};an.prototype.interfaces_=function(){return[]};an.prototype.getClass=function(){return an};an.chars=function(e,t){for(var n=new Array(t).fill(null),r=0;r<t;r++)n[r]=e;return String(n)};an.getStackTrace=function(){if(arguments.length===1){var e=arguments[0],t=new oE,n=new nE;return e.printStackTrace(n),t.toString()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o="";new rE(an.getStackTrace(r));for(var s=new aE,a=0;a<i;a++)try{o+=s.readLine()+an.NEWLINE}catch(u){if(u instanceof sE)Q.shouldNeverReachHere();else throw u}finally{}return o}};an.split=function(e,t){for(var n=t.length,r=new F,i=""+e,o=i.indexOf(t);o>=0;){var s=i.substring(0,o);r.add(s),i=i.substring(o+n),o=i.indexOf(t)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a};an.toString=function(){if(arguments.length===1){var e=arguments[0];return an.SIMPLE_ORDINATE_FORMAT.format(e)}};an.spaces=function(e){return an.chars(" ",e)};tc.NEWLINE.get=function(){return ce.getProperty("line.separator")};tc.SIMPLE_ORDINATE_FORMAT.get=function(){return new iE};Object.defineProperties(an,tc);var Dt=function(){};Dt.prototype.interfaces_=function(){return[]};Dt.prototype.getClass=function(){return Dt};Dt.copyCoord=function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,e.getOrdinate(t,o))};Dt.isRing=function(e){var t=e.size();return t===0?!0:t<=3?!1:e.getOrdinate(0,it.X)===e.getOrdinate(t-1,it.X)&&e.getOrdinate(0,it.Y)===e.getOrdinate(t-1,it.Y)};Dt.isEqual=function(e,t){var n=e.size(),r=t.size();if(n!==r)return!1;for(var i=Math.min(e.getDimension(),t.getDimension()),o=0;o<n;o++)for(var s=0;s<i;s++){var a=e.getOrdinate(o,s),u=t.getOrdinate(o,s);if(e.getOrdinate(o,s)!==t.getOrdinate(o,s)&&!(K.isNaN(a)&&K.isNaN(u)))return!1}return!0};Dt.extend=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();if(Dt.copy(t,0,r,0,i),i>0)for(var o=i;o<n;o++)Dt.copy(t,i-1,r,o,1);return r};Dt.reverse=function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)Dt.swap(e,r,t-r)};Dt.swap=function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}};Dt.copy=function(e,t,n,r,i){for(var o=0;o<i;o++)Dt.copyCoord(e,t+o,n,r+o)};Dt.toString=function(){if(arguments.length===1){var e=arguments[0],t=e.size();if(t===0)return"()";var n=e.getDimension(),r=new Qn;r.append("(");for(var i=0;i<t;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(an.toString(e.getOrdinate(i,o)))}return r.append(")"),r.toString()}};Dt.ensureValidRing=function(e,t){var n=t.size();if(n===0)return t;if(n<=3)return Dt.createClosedRing(e,t,4);var r=t.getOrdinate(0,it.X)===t.getOrdinate(n-1,it.X)&&t.getOrdinate(0,it.Y)===t.getOrdinate(n-1,it.Y);return r?t:Dt.createClosedRing(e,t,n+1)};Dt.createClosedRing=function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();Dt.copy(t,0,r,0,i);for(var o=i;o<n;o++)Dt.copy(t,0,r,o,1);return r};var Tt=function(e){function t(r,i){e.call(this,i),this._points=null,this.init(r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new j:this._points.expandEnvelope(new j)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this._points.size()!==s._points.size())return!1;for(var a=0;a<this._points.size();a++)if(!r.equal(r._points.getCoordinate(a),s._points.getCoordinate(a),o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var r=this,i=0;i<Math.trunc(this._points.size()/2);i++){var o=r._points.size()-1-i;if(!r._points.getCoordinate(i).equals(r._points.getCoordinate(o)))return r._points.getCoordinate(i).compareTo(r._points.getCoordinate(o))>0&&Dt.reverse(r._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?st.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return G.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var r=this._points.copy();Dt.reverse(r);var i=this.getFactory().createLineString(r);return i},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){for(var i=arguments[0],o=i,s=0,a=0;s<this._points.size()&&a<o._points.size();){var u=r._points.getCoordinate(s).compareTo(o._points.getCoordinate(a));if(u!==0)return u;s++,a++}return s<this._points.size()?1:a<o._points.size()?-1:0}else if(arguments.length===2){var l=arguments[0],c=arguments[1],f=l;return c.compare(this._points,f._points)}},t.prototype.apply=function(){var r=this;if(H(arguments[0],ar))for(var i=arguments[0],o=0;o<this._points.size();o++)i.filter(r._points.getCoordinate(o));else if(H(arguments[0],En)){var s=arguments[0];if(this._points.size()===0)return null;for(var a=0;a<this._points.size()&&(s.filter(r._points,a),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(H(arguments[0],qn)){var u=arguments[0];u.filter(this)}else if(H(arguments[0],Or)){var l=arguments[0];l.filter(this)}},t.prototype.getBoundary=function(){return new sn(this).getBoundary()},t.prototype.isEquivalentClass=function(r){return r instanceof t},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._points=this._points.clone(),r},t.prototype.getCoordinateN=function(r){return this._points.getCoordinate(r)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(r){if(r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),r.size()===1)throw new xt("Invalid number of points in LineString (found "+r.size()+" - must be 0 or >= 2)");this._points=r},t.prototype.isCoordinate=function(r){for(var i=this,o=0;o<this._points.size();o++)if(i._points.getCoordinate(o).equals(r))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(r){return this.getFactory().createPoint(this._points.getCoordinate(r))},t.prototype.interfaces_=function(){return[vs]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(Y),bs=function(){};bs.prototype.interfaces_=function(){return[]};bs.prototype.getClass=function(){return bs};var je=function(e){function t(r,i){e.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new j;var r=new j;return r.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),r},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?this.isEmpty()&&r.isEmpty()?!0:this.isEmpty()!==r.isEmpty()?!1:this.equal(r.getCoordinate(),this.getCoordinate(),i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return st.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var r=arguments[0],i=r;return this.getCoordinate().compareTo(i.getCoordinate())}else if(arguments.length===2){var o=arguments[0],s=arguments[1],a=o;return s.compare(this._coordinates,a._coordinates)}},t.prototype.apply=function(){if(H(arguments[0],ar)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(H(arguments[0],En)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this._coordinates,0),i.isGeometryChanged()&&this.geometryChanged()}else if(H(arguments[0],qn)){var o=arguments[0];o.filter(this)}else if(H(arguments[0],Or)){var s=arguments[0];s.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var r=e.prototype.clone.call(this);return r._coordinates=this._coordinates.clone(),r},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(r){r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),Q.isTrue(r.size()<=1),this._coordinates=r},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[bs]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,n),t}(Y),Zr=function(){};Zr.prototype.interfaces_=function(){return[]};Zr.prototype.getClass=function(){return Zr};var Zt=function(e){function t(r,i,o){if(e.call(this,o),this._shell=null,this._holes=null,r===null&&(r=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new xt("holes must not contain null elements");if(r.isEmpty()&&e.hasNonEmptyElements(i))throw new xt("shell is empty but holes are not");this._shell=r,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var r=this;if(this.isEmpty())return[];for(var i=new Array(this.getNumPoints()).fill(null),o=-1,s=this._shell.getCoordinates(),a=0;a<s.length;a++)o++,i[o]=s[a];for(var u=0;u<this._holes.length;u++)for(var l=r._holes[u].getCoordinates(),c=0;c<l.length;c++)o++,i[o]=l[c];return i},t.prototype.getArea=function(){var r=this,i=0;i+=Math.abs(G.signedArea(this._shell.getCoordinateSequence()));for(var o=0;o<this._holes.length;o++)i-=Math.abs(G.signedArea(r._holes[o].getCoordinateSequence()));return i},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var r=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),o=0;o<5;o++){var s=r.getX(o);if(!(s===i.getMinX()||s===i.getMaxX()))return!1;var a=r.getY(o);if(!(a===i.getMinY()||a===i.getMaxY()))return!1}for(var u=r.getX(0),l=r.getY(0),c=1;c<=4;c++){var f=r.getX(c),p=r.getY(c),g=f!==u,h=p!==l;if(g===h)return!1;u=f,l=p}return!0},t.prototype.equalsExact=function(){var r=this;if(arguments.length===2){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i,a=this._shell,u=s._shell;if(!a.equalsExact(u,o)||this._holes.length!==s._holes.length)return!1;for(var l=0;l<this._holes.length;l++)if(!r._holes[l].equalsExact(s._holes[l],o))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var r=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var i=0;i<this._holes.length;i++)r.normalize(r._holes[i],!1);hi.sort(this._holes)}else if(arguments.length===2){var o=arguments[0],s=arguments[1];if(o.isEmpty())return null;var a=new Array(o.getCoordinates().length-1).fill(null);ce.arraycopy(o.getCoordinates(),0,a,0,a.length);var u=et.minCoordinate(o.getCoordinates());et.scroll(a,u),ce.arraycopy(a,0,o.getCoordinates(),0,a.length),o.getCoordinates()[a.length]=a[0],G.isCCW(o.getCoordinates())===s&&et.reverse(o.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var r=this,i=0;i+=this._shell.getLength();for(var o=0;o<this._holes.length;o++)i+=r._holes[o].getLength();return i},t.prototype.getNumPoints=function(){for(var r=this,i=this._shell.getNumPoints(),o=0;o<this._holes.length;o++)i+=r._holes[o].getNumPoints();return i},t.prototype.reverse=function(){var r=this,i=this.copy();i._shell=this._shell.copy().reverse(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].copy().reverse();return i},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=this._shell,s=i._shell;return o.compareToSameClass(s)}else if(arguments.length===2){var a=arguments[0],u=arguments[1],l=a,c=this._shell,f=l._shell,p=c.compareToSameClass(f,u);if(p!==0)return p;for(var g=this.getNumInteriorRing(),h=l.getNumInteriorRing(),m=0;m<g&&m<h;){var d=r.getInteriorRingN(m),y=l.getInteriorRingN(m),v=d.compareToSameClass(y,u);if(v!==0)return v;m++}return m<g?1:m<h?-1:0}},t.prototype.apply=function(r){var i=this;if(H(r,ar)){this._shell.apply(r);for(var o=0;o<this._holes.length;o++)i._holes[o].apply(r)}else if(H(r,En)){if(this._shell.apply(r),!r.isDone())for(var s=0;s<this._holes.length&&(i._holes[s].apply(r),!r.isDone());s++);r.isGeometryChanged()&&this.geometryChanged()}else if(H(r,qn))r.filter(this);else if(H(r,Or)){r.filter(this),this._shell.apply(r);for(var a=0;a<this._holes.length;a++)i._holes[a].apply(r)}},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var i=new Array(this._holes.length+1).fill(null);i[0]=this._shell;for(var o=0;o<this._holes.length;o++)i[o+1]=r._holes[o];return i.length<=1?this.getFactory().createLinearRing(i[0].getCoordinateSequence()):this.getFactory().createMultiLineString(i)},t.prototype.clone=function(){var r=this,i=e.prototype.clone.call(this);i._shell=this._shell.clone(),i._holes=new Array(this._holes.length).fill(null);for(var o=0;o<this._holes.length;o++)i._holes[o]=r._holes[o].clone();return i},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var r=this,i=this._shell.copy(),o=new Array(this._holes.length).fill(null),s=0;s<o.length;s++)o[s]=r._holes[s].copy();return new t(i,o,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(r){return this._holes[r]},t.prototype.interfaces_=function(){return[Zr]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(Y),Co=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Y.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var r=arguments[0];return this._geometries[r].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return st.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[bs]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,n),t}(Ce),ur=function(e){function t(r,i){r instanceof E&&i instanceof tt&&(r=i.getCoordinateSequenceFactory().create(r)),e.call(this,r,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Y.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return st.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var r=this._points.copy();Dt.reverse(r);var i=this.getFactory().createLinearRing(r);return i},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new xt("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new xt("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(Tt),or=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Y.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isEquivalentClass(r)?e.prototype.equalsExact.call(this,r,i):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var r=this,i=this._geometries.length,o=new Array(i).fill(null),s=0;s<this._geometries.length;s++)o[s]=r._geometries[s].reverse();return this.getFactory().createMultiPolygon(o)},t.prototype.getBoundary=function(){var r=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var i=new F,o=0;o<this._geometries.length;o++)for(var s=r._geometries[o],a=s.getBoundary(),u=0;u<a.getNumGeometries();u++)i.add(a.getGeometryN(u));var l=new Array(i.size()).fill(null);return this.getFactory().createMultiLineString(i.toArray(l))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var r=this,i=new Array(this._geometries.length).fill(null),o=0;o<i.length;o++)i[o]=r._geometries[o].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[Zr]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(Ce),fn=function(e){this._factory=e||null,this._isUserDataCopied=!1},eu={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};fn.prototype.setCopyUserData=function(e){this._isUserDataCopied=e};fn.prototype.edit=function(e,t){if(e===null)return null;var n=this.editInternal(e,t);return this._isUserDataCopied&&n.setUserData(e.getUserData()),n};fn.prototype.editInternal=function(e,t){return this._factory===null&&(this._factory=e.getFactory()),e instanceof Ce?this.editGeometryCollection(e,t):e instanceof Zt?this.editPolygon(e,t):e instanceof je?t.edit(e,this._factory):e instanceof Tt?t.edit(e,this._factory):(Q.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)};fn.prototype.editGeometryCollection=function(e,t){for(var n=this,r=t.edit(e,this._factory),i=new F,o=0;o<r.getNumGeometries();o++){var s=n.edit(r.getGeometryN(o),t);s===null||s.isEmpty()||i.add(s)}return r.getClass()===Co?this._factory.createMultiPoint(i.toArray([])):r.getClass()===mi?this._factory.createMultiLineString(i.toArray([])):r.getClass()===or?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))};fn.prototype.editPolygon=function(e,t){var n=this,r=t.edit(e,this._factory);if(r===null&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var i=this.edit(r.getExteriorRing(),t);if(i===null||i.isEmpty())return this._factory.createPolygon();for(var o=new F,s=0;s<r.getNumInteriorRing();s++){var a=n.edit(r.getInteriorRingN(s),t);a===null||a.isEmpty()||o.add(a)}return this._factory.createPolygon(i,o.toArray([]))};fn.prototype.interfaces_=function(){return[]};fn.prototype.getClass=function(){return fn};fn.GeometryEditorOperation=function(){};eu.NoOpGeometryOperation.get=function(){return Es};eu.CoordinateOperation.get=function(){return Ss};eu.CoordinateSequenceOperation.get=function(){return Is};Object.defineProperties(fn,eu);var Es=function(){};Es.prototype.edit=function(e,t){return e};Es.prototype.interfaces_=function(){return[fn.GeometryEditorOperation]};Es.prototype.getClass=function(){return Es};var Ss=function(){};Ss.prototype.edit=function(e,t){var n=this.editCoordinates(e.getCoordinates(),e);return n===null?e:e instanceof ur?t.createLinearRing(n):e instanceof Tt?t.createLineString(n):e instanceof je?n.length>0?t.createPoint(n[0]):t.createPoint():e};Ss.prototype.interfaces_=function(){return[fn.GeometryEditorOperation]};Ss.prototype.getClass=function(){return Ss};var Is=function(){};Is.prototype.edit=function(e,t){return e instanceof ur?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof Tt?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof je?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e};Is.prototype.interfaces_=function(){return[fn.GeometryEditorOperation]};Is.prototype.getClass=function(){return Is};var Mt=function(){var e=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)e._coordinates[n]=new E}else if(H(arguments[0],it)){var r=arguments[0];if(r===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)e._coordinates[i]=r.getCoordinateCopy(i)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,o===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)e._coordinates[l]=new E}}},Pg={serialVersionUID:{configurable:!0}};Mt.prototype.setOrdinate=function(e,t,n){switch(t){case it.X:this._coordinates[e].x=n;break;case it.Y:this._coordinates[e].y=n;break;case it.Z:this._coordinates[e].z=n;break;default:throw new xt("invalid ordinateIndex")}};Mt.prototype.size=function(){return this._coordinates.length};Mt.prototype.getOrdinate=function(e,t){switch(t){case it.X:return this._coordinates[e].x;case it.Y:return this._coordinates[e].y;case it.Z:return this._coordinates[e].z}return K.NaN};Mt.prototype.getCoordinate=function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}else if(arguments.length===2){var t=arguments[0],n=arguments[1];n.x=this._coordinates[t].x,n.y=this._coordinates[t].y,n.z=this._coordinates[t].z}};Mt.prototype.getCoordinateCopy=function(e){return new E(this._coordinates[e])};Mt.prototype.getDimension=function(){return this._dimension};Mt.prototype.getX=function(e){return this._coordinates[e].x};Mt.prototype.clone=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].clone();return new Mt(t,this._dimension)};Mt.prototype.expandEnvelope=function(e){for(var t=this,n=0;n<this._coordinates.length;n++)e.expandToInclude(t._coordinates[n]);return e};Mt.prototype.copy=function(){for(var e=this,t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=e._coordinates[n].copy();return new Mt(t,this._dimension)};Mt.prototype.toString=function(){var e=this;if(this._coordinates.length>0){var t=new Qn(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)t.append(", "),t.append(e._coordinates[n]);return t.append(")"),t.toString()}else return"()"};Mt.prototype.getY=function(e){return this._coordinates[e].y};Mt.prototype.toCoordinateArray=function(){return this._coordinates};Mt.prototype.interfaces_=function(){return[it,gn]};Mt.prototype.getClass=function(){return Mt};Pg.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(Mt,Pg);var lr=function(){},ec={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};lr.prototype.readResolve=function(){return lr.instance()};lr.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return new Mt(e)}else if(H(arguments[0],it)){var t=arguments[0];return new Mt(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new Mt(n):new Mt(n,r)}};lr.prototype.interfaces_=function(){return[So,gn]};lr.prototype.getClass=function(){return lr};lr.instance=function(){return lr.instanceObject};ec.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};ec.instanceObject.get=function(){return new lr};Object.defineProperties(lr,ec);var Tg=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(n){return this.map_.get(n)||null},t.prototype.put=function(n,r){return this.map_.set(n,r),r},t.prototype.values=function(){for(var n=new F,r=this.map_.values(),i=r.next();!i.done;)n.add(i.value),i=r.next();return n},t.prototype.entrySet=function(){var n=new $l;return this.map_.entries().forEach(function(r){return n.add(r)}),n},t.prototype.size=function(){return this.map_.size()},t}(io),ut=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Vn){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},nc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};ut.prototype.equals=function(e){if(!(e instanceof ut))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale};ut.prototype.compareTo=function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new zn(n).compareTo(new zn(r))};ut.prototype.getScale=function(){return this._scale};ut.prototype.isFloating=function(){return this._modelType===ut.FLOATING||this._modelType===ut.FLOATING_SINGLE};ut.prototype.getType=function(){return this._modelType};ut.prototype.toString=function(){var e="UNKNOWN";return this._modelType===ut.FLOATING?e="Floating":this._modelType===ut.FLOATING_SINGLE?e="Floating-Single":this._modelType===ut.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e};ut.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var e=arguments[0];if(K.isNaN(e))return e;if(this._modelType===ut.FLOATING_SINGLE){var t=e;return t}return this._modelType===ut.FIXED?Math.round(e*this._scale)/this._scale:e}else if(arguments[0]instanceof E){var n=arguments[0];if(this._modelType===ut.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}};ut.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===ut.FLOATING?e=16:this._modelType===ut.FLOATING_SINGLE?e=6:this._modelType===ut.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e};ut.prototype.setScale=function(e){this._scale=Math.abs(e)};ut.prototype.interfaces_=function(){return[gn,hn]};ut.prototype.getClass=function(){return ut};ut.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t};nc.serialVersionUID.get=function(){return 7777263578777804e3};nc.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(ut,nc);var Vn=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},rc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Vn.prototype.readResolve=function(){return Vn.nameToTypeMap.get(this._name)};Vn.prototype.toString=function(){return this._name};Vn.prototype.interfaces_=function(){return[gn]};Vn.prototype.getClass=function(){return Vn};rc.serialVersionUID.get=function(){return-552860263173159e4};rc.nameToTypeMap.get=function(){return new Tg};Object.defineProperties(Vn,rc);ut.Type=Vn;ut.FIXED=new Vn("FIXED");ut.FLOATING=new Vn("FLOATING");ut.FLOATING_SINGLE=new Vn("FLOATING SINGLE");var tt=function e(){this._precisionModel=new ut,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?H(arguments[0],So)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof ut&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Rg={serialVersionUID:{configurable:!0}};tt.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new E(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new E(e.getMinX(),e.getMinY()),new E(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new E(e.getMinX(),e.getMinY()),new E(e.getMinX(),e.getMaxY()),new E(e.getMaxX(),e.getMaxY()),new E(e.getMaxX(),e.getMinY()),new E(e.getMinX(),e.getMinY())]),null)};tt.prototype.createLineString=function(e){if(e){if(e instanceof Array)return new Tt(this.getCoordinateSequenceFactory().create(e),this);if(H(e,it))return new Tt(e,this)}else return new Tt(this.getCoordinateSequenceFactory().create([]),this)};tt.prototype.createMultiLineString=function(){if(arguments.length===0)return new mi(null,this);if(arguments.length===1){var e=arguments[0];return new mi(e,this)}};tt.prototype.buildGeometry=function(e){for(var t=null,n=!1,r=!1,i=e.iterator();i.hasNext();){var o=i.next(),s=o.getClass();t===null&&(t=s),s!==t&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(t===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(tt.toGeometryArray(e));var a=e.iterator().next(),u=e.size()>1;if(u){if(a instanceof Zt)return this.createMultiPolygon(tt.toPolygonArray(e));if(a instanceof Tt)return this.createMultiLineString(tt.toLineStringArray(e));if(a instanceof je)return this.createMultiPoint(tt.toPointArray(e));Q.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a};tt.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)};tt.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof E){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}else if(H(arguments[0],it)){var t=arguments[0];return new je(t,this)}}};tt.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};tt.prototype.createPolygon=function(){if(arguments.length===0)return new Zt(null,null,this);if(arguments.length===1){if(H(arguments[0],it)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}else if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof ur){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return new Zt(r,i,this)}};tt.prototype.getSRID=function(){return this._SRID};tt.prototype.createGeometryCollection=function(){if(arguments.length===0)return new Ce(null,this);if(arguments.length===1){var e=arguments[0];return new Ce(e,this)}};tt.prototype.createGeometry=function(e){var t=new fn(this);return t.edit(e,{edit:function(){if(arguments.length===2){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};tt.prototype.getPrecisionModel=function(){return this._precisionModel};tt.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}else if(H(arguments[0],it)){var t=arguments[0];return new ur(t,this)}}};tt.prototype.createMultiPolygon=function(){if(arguments.length===0)return new or(null,this);if(arguments.length===1){var e=arguments[0];return new or(e,this)}};tt.prototype.createMultiPoint=function(){var e=this;if(arguments.length===0)return new Co(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new Co(t,this)}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(n!==null?this.getCoordinateSequenceFactory().create(n):null)}else if(H(arguments[0],it)){var r=arguments[0];if(r===null)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var s=e.getCoordinateSequenceFactory().create(1,r.getDimension());Dt.copy(r,o,s,0,1),i[o]=e.createPoint(s)}return this.createMultiPoint(i)}}};tt.prototype.interfaces_=function(){return[gn]};tt.prototype.getClass=function(){return tt};tt.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};tt.toGeometryArray=function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)};tt.getDefaultCoordinateSequenceFactory=function(){return lr.instance()};tt.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};tt.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};tt.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};tt.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};tt.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};tt.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)};tt.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)};Rg.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(tt,Rg);var uE=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],nu=function(e){this.geometryFactory=e||new tt};nu.prototype.read=function(e){var t;typeof e=="string"?t=JSON.parse(e):t=e;var n=t.type;if(!An[n])throw new Error("Unknown GeoJSON type: "+t.type);return uE.indexOf(n)!==-1?An[n].apply(this,[t.coordinates]):n==="GeometryCollection"?An[n].apply(this,[t.geometries]):An[n].apply(this,[t])};nu.prototype.write=function(e){var t=e.getGeometryType();if(!vr[t])throw new Error("Geometry is not supported");return vr[t].apply(this,[e])};var An={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!An[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=An.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t=this,n={};if(e.features){n.features=[];for(var r=0;r<e.features.length;++r)n.features.push(t.read(e.features[r]))}return e.bbox&&(n.bbox=this.parse.bbox.apply(this,[e.bbox])),n},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(new E(r[0],r[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new E(e[0],e[1]),new E(e[2],e[1]),new E(e[2],e[3]),new E(e[0],e[3]),new E(e[0],e[1])])},Point:function(e){var t=new E(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(An.Point.apply(t,[e[r]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(e){var t=An.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(An.LineString.apply(t,[e[r]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(e){for(var t=this,n=An.coordinates.apply(this,[e[0]]),r=this.geometryFactory.createLinearRing(n),i=[],o=1;o<e.length;++o){var s=e[o],a=An.coordinates.apply(t,[s]),u=t.geometryFactory.createLinearRing(a);i.push(u)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(An.Polygon.apply(t,[i]))}return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(t.read(i))}return this.geometryFactory.createGeometryCollection(n)}},vr={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=vr.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=vr.Point.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(e){for(var t=this,n=[],r=e.getCoordinates(),i=0;i<r.length;++i){var o=r[i];n.push(vr.coordinate.apply(t,[o]))}return{type:"LineString",coordinates:n}},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=vr.LineString.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(e){var t=this,n=[],r=vr.LineString.apply(this,[e._shell]);n.push(r.coordinates);for(var i=0;i<e._holes.length;++i){var o=e._holes[i],s=vr.LineString.apply(t,[o]);n.push(s.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=vr.Polygon.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=i.getGeometryType();n.push(vr[o].apply(t,[i]))}return{type:"GeometryCollection",geometries:n}}},ic=function(e){this.geometryFactory=e||new tt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new nu(this.geometryFactory)};ic.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===ut.FIXED&&this.reducePrecision(t),t};ic.prototype.reducePrecision=function(e){var t=this,n,r;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(n=0,r=e.points.length;n<r;n++)t.precisionModel.makePrecise(e.points[n]);else if(e.geometries)for(n=0,r=e.geometries.length;n<r;n++)t.reducePrecision(e.geometries[n])};var Mg=function(){this.parser=new nu(this.geometryFactory)};Mg.prototype.write=function(e){return this.parser.write(e)};var D=function(){},ru={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};D.prototype.interfaces_=function(){return[]};D.prototype.getClass=function(){return D};D.opposite=function(e){return e===D.LEFT?D.RIGHT:e===D.RIGHT?D.LEFT:e};ru.ON.get=function(){return 0};ru.LEFT.get=function(){return 1};ru.RIGHT.get=function(){return 2};Object.defineProperties(D,ru);function iu(e){this.message=e||""}iu.prototype=new Error;iu.prototype.name="EmptyStackException";function $n(){this.array_=[]}$n.prototype=new vn;$n.prototype.add=function(e){return this.array_.push(e),!0};$n.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};$n.prototype.push=function(e){return this.array_.push(e),e};$n.prototype.pop=function(e){if(this.array_.length===0)throw new iu;return this.array_.pop()};$n.prototype.peek=function(){if(this.array_.length===0)throw new iu;return this.array_[this.array_.length-1]};$n.prototype.empty=function(){return this.array_.length===0};$n.prototype.isEmpty=function(){return this.empty()};$n.prototype.search=function(e){return this.array_.indexOf(e)};$n.prototype.size=function(){return this.array_.length};$n.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};var jn=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};jn.prototype.getCoordinate=function(){return this._minCoord};jn.prototype.getRightmostSide=function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n};jn.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();Q.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],r=G.computeOrientation(this._minCoord,n,t),i=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&r===G.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&r===G.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)};jn.prototype.getRightmostSideOfSegment=function(e,t){var n=e.getEdge(),r=n.getCoordinates();if(t<0||t+1>=r.length||r[t].y===r[t+1].y)return-1;var i=D.LEFT;return r[t].y<r[t+1].y&&(i=D.RIGHT),i};jn.prototype.getEdge=function(){return this._orientedDe};jn.prototype.checkForRightmostCoordinate=function(e){for(var t=this,n=e.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(t._minCoord===null||n[r].x>t._minCoord.x)&&(t._minDe=e,t._minIndex=r,t._minCoord=n[r])};jn.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode(),t=e.getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};jn.prototype.findEdge=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();r.isForward()&&t.checkForRightmostCoordinate(r)}Q.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var i=this.getRightmostSide(this._minDe,this._minIndex);i===D.LEFT&&(this._orientedDe=this._minDe.getSym())};jn.prototype.interfaces_=function(){return[]};jn.prototype.getClass=function(){return jn};var Pr=function(e){function t(n,r){e.call(this,t.msgWithCoord(n,r)),this.pt=r?new E(r):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(n,r){return r?n:n+" [ "+r+" ]"},t}(Cr),ou=function(){this.array_=[]};ou.prototype.addLast=function(e){this.array_.push(e)};ou.prototype.removeFirst=function(){return this.array_.shift()};ou.prototype.isEmpty=function(){return this.array_.length===0};var Oe=function(){this._finder=null,this._dirEdgeList=new F,this._nodes=new F,this._rightMostCoord=null,this._env=null,this._finder=new jn};Oe.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.setVisited(!1)}};Oe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};Oe.prototype.computeNodeDepth=function(e){for(var t=this,n=null,r=e.getEdges().iterator();r.hasNext();){var i=r.next();if(i.isVisited()||i.getSym().isVisited()){n=i;break}}if(n===null)throw new Pr("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(n);for(var o=e.getEdges().iterator();o.hasNext();){var s=o.next();s.setVisited(!0),t.copySymDepths(s)}};Oe.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(D.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)};Oe.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};Oe.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(D.RIGHT)>=1&&t.getDepth(D.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}};Oe.prototype.computeDepths=function(e){var t=this,n=new $l,r=new ou,i=e.getNode();for(r.addLast(i),n.add(i),e.setVisited(!0);!r.isEmpty();){var o=r.removeFirst();n.add(o),t.computeNodeDepth(o);for(var s=o.getEdges().iterator();s.hasNext();){var a=s.next(),u=a.getSym();if(!u.isVisited()){var l=u.getNode();n.contains(l)||(r.addLast(l),n.add(l))}}}};Oe.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};Oe.prototype.getEnvelope=function(){if(this._env===null){for(var e=new j,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)e.expandToInclude(r[i]);this._env=e}return this._env};Oe.prototype.addReachable=function(e){var t=this,n=new $n;for(n.add(e);!n.empty();){var r=n.pop();t.add(r,n)}};Oe.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(D.LEFT,e.getDepth(D.RIGHT)),t.setDepth(D.RIGHT,e.getDepth(D.LEFT))};Oe.prototype.add=function(e,t){var n=this;e.setVisited(!0),this._nodes.add(e);for(var r=e.getEdges().iterator();r.hasNext();){var i=r.next();n._dirEdgeList.add(i);var o=i.getSym(),s=o.getNode();s.isVisited()||t.push(s)}};Oe.prototype.getNodes=function(){return this._nodes};Oe.prototype.getDirectedEdges=function(){return this._dirEdgeList};Oe.prototype.interfaces_=function(){return[hn]};Oe.prototype.getClass=function(){return Oe};var Et=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[D.ON]=r}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[D.ON]=s,this.location[D.LEFT]=a,this.location[D.RIGHT]=u}};Et.prototype.setAllLocations=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]=e};Et.prototype.isNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]!==S.NONE)return!1;return!0};Et.prototype.setAllLocationsIfNull=function(e){for(var t=this,n=0;n<this.location.length;n++)t.location[n]===S.NONE&&(t.location[n]=e)};Et.prototype.isLine=function(){return this.location.length===1};Et.prototype.merge=function(e){var t=this;if(e.location.length>this.location.length){var n=new Array(3).fill(null);n[D.ON]=this.location[D.ON],n[D.LEFT]=S.NONE,n[D.RIGHT]=S.NONE,this.location=n}for(var r=0;r<this.location.length;r++)t.location[r]===S.NONE&&r<e.location.length&&(t.location[r]=e.location[r])};Et.prototype.getLocations=function(){return this.location};Et.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[D.LEFT];this.location[D.LEFT]=this.location[D.RIGHT],this.location[D.RIGHT]=e};Et.prototype.toString=function(){var e=new Qn;return this.location.length>1&&e.append(S.toLocationSymbol(this.location[D.LEFT])),e.append(S.toLocationSymbol(this.location[D.ON])),this.location.length>1&&e.append(S.toLocationSymbol(this.location[D.RIGHT])),e.toString()};Et.prototype.setLocations=function(e,t,n){this.location[D.ON]=e,this.location[D.LEFT]=t,this.location[D.RIGHT]=n};Et.prototype.get=function(e){return e<this.location.length?this.location[e]:S.NONE};Et.prototype.isArea=function(){return this.location.length>1};Et.prototype.isAnyNull=function(){for(var e=this,t=0;t<this.location.length;t++)if(e.location[t]===S.NONE)return!0;return!1};Et.prototype.setLocation=function(){if(arguments.length===1){var e=arguments[0];this.setLocation(D.ON,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.location[t]=n}};Et.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(S.NONE)};Et.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]};Et.prototype.allPositionsEqual=function(e){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==e)return!1;return!0};Et.prototype.interfaces_=function(){return[]};Et.prototype.getClass=function(){return Et};var pt=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Et(t),this.elt[1]=new Et(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new Et(n.elt[0]),this.elt[1]=new Et(n.elt[1])}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.elt[0]=new Et(S.NONE),this.elt[1]=new Et(S.NONE),this.elt[r].setLocation(i)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Et(o,s,a),this.elt[1]=new Et(o,s,a)}else if(arguments.length===4){var u=arguments[0],l=arguments[1],c=arguments[2],f=arguments[3];this.elt[0]=new Et(S.NONE,S.NONE,S.NONE),this.elt[1]=new Et(S.NONE,S.NONE,S.NONE),this.elt[u].setLocations(l,c,f)}};pt.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e};pt.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)};pt.prototype.isNull=function(e){return this.elt[e].isNull()};pt.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}};pt.prototype.isLine=function(e){return this.elt[e].isLine()};pt.prototype.merge=function(e){for(var t=this,n=0;n<2;n++)t.elt[n]===null&&e.elt[n]!==null?t.elt[n]=new Et(e.elt[n]):t.elt[n].merge(e.elt[n])};pt.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};pt.prototype.getLocation=function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(D.ON)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}};pt.prototype.toString=function(){var e=new Qn;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()};pt.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}};pt.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()};pt.prototype.setLocation=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(D.ON,t)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}};pt.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)};pt.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)};pt.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new Et(this.elt[e].location[0]))};pt.prototype.interfaces_=function(){return[]};pt.prototype.getClass=function(){return pt};pt.toLineLabel=function(e){for(var t=new pt(S.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t};var Ut=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new F,this._pts=new F,this._label=new pt(S.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new F,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};Ut.prototype.computeRing=function(){var e=this;if(this._ring!==null)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=e._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=G.isCCW(this._ring.getCoordinates())};Ut.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};Ut.prototype.computePoints=function(e){var t=this;this._startDe=e;var n=e,r=!0;do{if(n===null)throw new Pr("Found null DirectedEdge");if(n.getEdgeRing()===t)throw new Pr("Directed Edge visited twice during ring-building at "+n.getCoordinate());t._edges.add(n);var i=n.getLabel();Q.isTrue(i.isArea()),t.mergeLabel(i),t.addPoints(n.getEdge(),n.isForward(),r),r=!1,t.setEdgeRing(n,t),n=t.getNext(n)}while(n!==this._startDe)};Ut.prototype.getLinearRing=function(){return this._ring};Ut.prototype.getCoordinate=function(e){return this._pts.get(e)};Ut.prototype.computeMaxNodeDegree=function(){var e=this;this._maxNodeDegree=0;var t=this._startDe;do{var n=t.getNode(),r=n.getEdges().getOutgoingDegree(e);r>e._maxNodeDegree&&(e._maxNodeDegree=r),t=e.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2};Ut.prototype.addPoints=function(e,t,n){var r=this,i=e.getCoordinates();if(t){var o=1;n&&(o=0);for(var s=o;s<i.length;s++)r._pts.add(i[s])}else{var a=i.length-2;n&&(a=i.length-1);for(var u=a;u>=0;u--)r._pts.add(i[u])}};Ut.prototype.isHole=function(){return this._isHole};Ut.prototype.setInResult=function(){var e=this._startDe;do e.getEdge().setInResult(!0),e=e.getNext();while(e!==this._startDe)};Ut.prototype.containsPoint=function(e){var t=this.getLinearRing(),n=t.getEnvelopeInternal();if(!n.contains(e)||!G.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(e))return!1}return!0};Ut.prototype.addHole=function(e){this._holes.add(e)};Ut.prototype.isShell=function(){return this._shell===null};Ut.prototype.getLabel=function(){return this._label};Ut.prototype.getEdges=function(){return this._edges};Ut.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};Ut.prototype.getShell=function(){return this._shell};Ut.prototype.mergeLabel=function(){if(arguments.length===1){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=t.getLocation(n,D.RIGHT);if(r===S.NONE)return null;if(this._label.getLocation(n)===S.NONE)return this._label.setLocation(n,r),null}};Ut.prototype.setShell=function(e){this._shell=e,e!==null&&e.addHole(this)};Ut.prototype.toPolygon=function(e){for(var t=this,n=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)n[r]=t._holes.get(r).getLinearRing();var i=e.createPolygon(this.getLinearRing(),n);return i};Ut.prototype.interfaces_=function(){return[]};Ut.prototype.getClass=function(){return Ut};var lE=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(n,r){n.setMinEdgeRing(r)},t.prototype.getNext=function(n){return n.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ut),cE=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var n=this,r=new F,i=this._startDe;do{if(i.getMinEdgeRing()===null){var o=new lE(i,n._geometryFactory);r.add(o)}i=i.getNext()}while(i!==this._startDe);return r},t.prototype.setEdgeRing=function(n,r){n.setEdgeRing(r)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this,r=this._startDe;do{var i=r.getNode();i.getEdges().linkMinimalDirectedEdges(n),r=r.getNext()}while(r!==this._startDe)},t.prototype.getNext=function(n){return n.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ut),tn=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._label=e}};tn.prototype.setVisited=function(e){this._isVisited=e};tn.prototype.setInResult=function(e){this._isInResult=e};tn.prototype.isCovered=function(){return this._isCovered};tn.prototype.isCoveredSet=function(){return this._isCoveredSet};tn.prototype.setLabel=function(e){this._label=e};tn.prototype.getLabel=function(){return this._label};tn.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0};tn.prototype.updateIM=function(e){Q.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)};tn.prototype.isInResult=function(){return this._isInResult};tn.prototype.isVisited=function(){return this._isVisited};tn.prototype.interfaces_=function(){return[]};tn.prototype.getClass=function(){return tn};var su=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var n=arguments[0],r=arguments[1];this._coord=n,this._edges=r,this._label=new pt(0,S.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(n){},t.prototype.computeMergedLocation=function(n,r){var i=S.NONE;if(i=this._label.getLocation(r),!n.isNull(r)){var o=n.getLocation(r);i!==S.BOUNDARY&&(i=o)}return i},t.prototype.setLabel=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];this._label===null?this._label=new pt(n,r):this._label.setLocation(n,r)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof t){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof pt)for(var i=arguments[0],o=0;o<2;o++){var s=n.computeMergedLocation(i,o),a=n._label.getLocation(o);a===S.NONE&&n._label.setLocation(o,s)}},t.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},t.prototype.setLabelBoundary=function(n){if(this._label===null)return null;var r=S.NONE;this._label!==null&&(r=this._label.getLocation(n));var i=null;switch(r){case S.BOUNDARY:i=S.INTERIOR;break;case S.INTERIOR:i=S.BOUNDARY;break;default:i=S.BOUNDARY;break}this._label.setLocation(n,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(tn),Wn=function(){this.nodeMap=new _e,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};Wn.prototype.find=function(e){return this.nodeMap.get(e)};Wn.prototype.addNode=function(){if(arguments[0]instanceof E){var e=arguments[0],t=this.nodeMap.get(e);return t===null&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}else if(arguments[0]instanceof su){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return r===null?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}};Wn.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Wn.prototype.iterator=function(){return this.nodeMap.values().iterator()};Wn.prototype.values=function(){return this.nodeMap.values()};Wn.prototype.getBoundaryNodes=function(e){for(var t=new F,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===S.BOUNDARY&&t.add(r)}return t};Wn.prototype.add=function(e){var t=e.getCoordinate(),n=this.addNode(t);n.add(e)};Wn.prototype.interfaces_=function(){return[]};Wn.prototype.getClass=function(){return Wn};var mt=function(){},ks={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};mt.prototype.interfaces_=function(){return[]};mt.prototype.getClass=function(){return mt};mt.isNorthern=function(e){return e===mt.NE||e===mt.NW};mt.isOpposite=function(e,t){if(e===t)return!1;var n=(e-t+4)%4;return n===2};mt.commonHalfPlane=function(e,t){if(e===t)return e;var n=(e-t+4)%4;if(n===2)return-1;var r=e<t?e:t,i=e>t?e:t;return r===0&&i===3?3:r};mt.isInHalfPlane=function(e,t){return t===mt.SE?e===mt.SE||e===mt.SW:e===t||e===t+1};mt.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new xt("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?mt.NE:mt.SE:t>=0?mt.NW:mt.SW}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new xt("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?mt.NE:mt.SE:r.y>=n.y?mt.NW:mt.SW}};ks.NE.get=function(){return 0};ks.NW.get=function(){return 1};ks.SW.get=function(){return 2};ks.SE.get=function(){return 3};Object.defineProperties(mt,ks);var ve=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=t,this.init(n,r),this._label=i}else if(arguments.length===4){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};ve.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:G.computeOrientation(e._p0,e._p1,this._p1)};ve.prototype.getDy=function(){return this._dy};ve.prototype.getCoordinate=function(){return this._p0};ve.prototype.setNode=function(e){this._node=e};ve.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)};ve.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)};ve.prototype.getDirectedCoordinate=function(){return this._p1};ve.prototype.getDx=function(){return this._dx};ve.prototype.getLabel=function(){return this._label};ve.prototype.getEdge=function(){return this._edge};ve.prototype.getQuadrant=function(){return this._quadrant};ve.prototype.getNode=function(){return this._node};ve.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf("."),r=t.substring(n+1);return"  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label};ve.prototype.computeLabel=function(e){};ve.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=mt.quadrant(this._dx,this._dy),Q.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};ve.prototype.interfaces_=function(){return[hn]};ve.prototype.getClass=function(){return ve};var yl=function(e){function t(){var n=arguments[0],r=arguments[1];if(e.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(n){return this._depth[n]},t.prototype.setVisited=function(n){this._isVisited=n},t.prototype.computeDirectedLabel=function(){this._label=new pt(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(n,r){if(this._depth[n]!==-999&&this._depth[n]!==r)throw new Pr("assigned depths do not match",this.getCoordinate());this._depth[n]=r},t.prototype.isInteriorAreaEdge=function(){for(var n=this,r=!0,i=0;i<2;i++)n._label.isArea(i)&&n._label.getLocation(i,D.LEFT)===S.INTERIOR&&n._label.getLocation(i,D.RIGHT)===S.INTERIOR||(r=!1);return r},t.prototype.setNextMin=function(n){this._nextMin=n},t.prototype.print=function(n){e.prototype.print.call(this,n),n.print(" "+this._depth[D.LEFT]+"/"+this._depth[D.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},t.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},t.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),r=!this._label.isArea(0)||this._label.allPositionsEqual(0,S.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,S.EXTERIOR);return n&&r&&i},t.prototype.setEdgeRing=function(n){this._edgeRing=n},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},t.prototype.setInResult=function(n){this._isInResult=n},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},t.prototype.setSym=function(n){this._sym=n},t.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},t.prototype.setEdgeDepths=function(n,r){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var o=1;n===D.LEFT&&(o=-1);var s=D.opposite(n),a=i*o,u=r+a;this.setDepth(n,r),this.setDepth(s,u)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(n){this._next=n},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(n,r){return n===S.EXTERIOR&&r===S.INTERIOR?1:n===S.INTERIOR&&r===S.EXTERIOR?-1:0},t}(ve),Oo=function(){};Oo.prototype.createNode=function(e){return new su(e,null)};Oo.prototype.interfaces_=function(){return[]};Oo.prototype.getClass=function(){return Oo};var Ct=function(){if(this._edges=new F,this._nodes=null,this._edgeEndList=new F,arguments.length===0)this._nodes=new Wn(new Oo);else if(arguments.length===1){var e=arguments[0];this._nodes=new Wn(e)}};Ct.prototype.printEdges=function(e){var t=this;e.println("Edges:");for(var n=0;n<this._edges.size();n++){e.println("edge "+n+":");var r=t._edges.get(n);r.print(e),r.eiList.print(e)}};Ct.prototype.find=function(e){return this._nodes.find(e)};Ct.prototype.addNode=function(){if(arguments[0]instanceof su){var e=arguments[0];return this._nodes.addNode(e)}else if(arguments[0]instanceof E){var t=arguments[0];return this._nodes.addNode(t)}};Ct.prototype.getNodeIterator=function(){return this._nodes.iterator()};Ct.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkResultDirectedEdges()}};Ct.prototype.debugPrintln=function(e){ce.out.println(e)};Ct.prototype.isBoundaryNode=function(e,t){var n=this._nodes.find(t);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(e)===S.BOUNDARY};Ct.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){var t=e.next();t.getEdges().linkAllDirectedEdges()}};Ct.prototype.matchInSameDirection=function(e,t,n,r){return e.equals(n)?G.computeOrientation(e,t,r)===G.COLLINEAR&&mt.quadrant(e,t)===mt.quadrant(n,r):!1};Ct.prototype.getEdgeEnds=function(){return this._edgeEndList};Ct.prototype.debugPrint=function(e){ce.out.print(e)};Ct.prototype.getEdgeIterator=function(){return this._edges.iterator()};Ct.prototype.findEdgeInSameDirection=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(e,t,o[0],o[1])||n.matchInSameDirection(e,t,o[o.length-1],o[o.length-2]))return i}return null};Ct.prototype.insertEdge=function(e){this._edges.add(e)};Ct.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null};Ct.prototype.addEdges=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next();t._edges.add(r);var i=new yl(r,!0),o=new yl(r,!1);i.setSym(o),o.setSym(i),t.add(i),t.add(o)}};Ct.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)};Ct.prototype.getNodes=function(){return this._nodes.values()};Ct.prototype.findEdge=function(e,t){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(e.equals(o[0])&&t.equals(o[1]))return i}return null};Ct.prototype.interfaces_=function(){return[]};Ct.prototype.getClass=function(){return Ct};Ct.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};var We=function(){this._geometryFactory=null,this._shellList=new F;var e=arguments[0];this._geometryFactory=e};We.prototype.sortShellsAndHoles=function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}};We.prototype.computePolygons=function(e){for(var t=this,n=new F,r=e.iterator();r.hasNext();){var i=r.next(),o=i.toPolygon(t._geometryFactory);n.add(o)}return n};We.prototype.placeFreeHoles=function(e,t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();if(i.getShell()===null){var o=n.findEdgeRingContaining(i,e);if(o===null)throw new Pr("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(o)}}};We.prototype.buildMinimalEdgeRings=function(e,t,n){for(var r=this,i=new F,o=e.iterator();o.hasNext();){var s=o.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var a=s.buildMinimalRings(),u=r.findShell(a);u!==null?(r.placePolygonHoles(u,a),t.add(u)):n.addAll(a)}else i.add(s)}return i};We.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){var n=t.next();if(n.containsPoint(e))return!0}return!1};We.prototype.buildMaximalEdgeRings=function(e){for(var t=this,n=new F,r=e.iterator();r.hasNext();){var i=r.next();if(i.isInResult()&&i.getLabel().isArea()&&i.getEdgeRing()===null){var o=new cE(i,t._geometryFactory);n.add(o),o.setInResult()}}return n};We.prototype.placePolygonHoles=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}};We.prototype.getPolygons=function(){var e=this.computePolygons(this._shellList);return e};We.prototype.findEdgeRingContaining=function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=t.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();o!==null&&(s=o.getLinearRing().getEnvelopeInternal());var f=!1;c.contains(r)&&G.isPointInRing(i,l.getCoordinates())&&(f=!0),f&&(o===null||s.contains(c))&&(o=u)}return o};We.prototype.findShell=function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return Q.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n};We.prototype.add=function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];Ct.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(t),i=new F,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}};We.prototype.interfaces_=function(){return[]};We.prototype.getClass=function(){return We};var Po=function(){};Po.prototype.getBounds=function(){};Po.prototype.interfaces_=function(){return[]};Po.prototype.getClass=function(){return Po};var Sn=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};Sn.prototype.getItem=function(){return this._item};Sn.prototype.getBounds=function(){return this._bounds};Sn.prototype.interfaces_=function(){return[Po,gn]};Sn.prototype.getClass=function(){return Sn};var Tr=function(){this._size=null,this._items=null,this._size=0,this._items=new F,this._items.add(null)};Tr.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e};Tr.prototype.size=function(){return this._size};Tr.prototype.reorder=function(e){for(var t=this,n=null,r=this._items.get(e);e*2<=this._size&&(n=e*2,n!==t._size&&t._items.get(n+1).compareTo(t._items.get(n))<0&&n++,t._items.get(n).compareTo(r)<0);e=n)t._items.set(e,t._items.get(n));this._items.set(e,r)};Tr.prototype.clear=function(){this._size=0,this._items.clear()};Tr.prototype.isEmpty=function(){return this._size===0};Tr.prototype.add=function(e){var t=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)t._items.set(n,t._items.get(Math.trunc(n/2)));this._items.set(n,e)};Tr.prototype.interfaces_=function(){return[]};Tr.prototype.getClass=function(){return Tr};var Kr=function(){};Kr.prototype.visitItem=function(e){};Kr.prototype.interfaces_=function(){return[]};Kr.prototype.getClass=function(){return Kr};var Gi=function(){};Gi.prototype.insert=function(e,t){};Gi.prototype.remove=function(e,t){};Gi.prototype.query=function(){};Gi.prototype.interfaces_=function(){return[]};Gi.prototype.getClass=function(){return Gi};var Ht=function(){if(this._childBoundables=new F,this._bounds=null,this._level=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this._level=e}},Ag={serialVersionUID:{configurable:!0}};Ht.prototype.getLevel=function(){return this._level};Ht.prototype.size=function(){return this._childBoundables.size()};Ht.prototype.getChildBoundables=function(){return this._childBoundables};Ht.prototype.addChildBoundable=function(e){Q.isTrue(this._bounds===null),this._childBoundables.add(e)};Ht.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Ht.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Ht.prototype.interfaces_=function(){return[Po,gn]};Ht.prototype.getClass=function(){return Ht};Ag.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Ht,Ag);var In=function(){};In.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}};In.min=function(e){return In.sort(e),e.get(0)};In.sort=function(e,t){var n=e.toArray();t?hi.sort(n,t):hi.sort(n);for(var r=e.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])};In.singletonList=function(e){var t=new F;return t.add(e),t};var Gt=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()};Gt.prototype.expandToQueue=function(e,t){var n=Gt.isComposite(this._boundable1),r=Gt.isComposite(this._boundable2);if(n&&r)return Gt.area(this._boundable1)>Gt.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new xt("neither boundable is composite")};Gt.prototype.isLeaves=function(){return!(Gt.isComposite(this._boundable1)||Gt.isComposite(this._boundable2))};Gt.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0};Gt.prototype.expand=function(e,t,n,r){for(var i=this,o=e.getChildBoundables(),s=o.iterator();s.hasNext();){var a=s.next(),u=new Gt(a,t,i._itemDistance);u.getDistance()<r&&n.add(u)}};Gt.prototype.getBoundable=function(e){return e===0?this._boundable1:this._boundable2};Gt.prototype.getDistance=function(){return this._distance};Gt.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};Gt.prototype.interfaces_=function(){return[hn]};Gt.prototype.getClass=function(){return Gt};Gt.area=function(e){return e.getBounds().getArea()};Gt.isComposite=function(e){return e instanceof Ht};var re=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new F,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var n=arguments[0];Q.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},au={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};re.prototype.getNodeCapacity=function(){return this._nodeCapacity};re.prototype.lastNode=function(e){return e.get(e.size()-1)};re.prototype.size=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ht?n+=e.size(i):i instanceof Sn&&(n+=1)}return n}};re.prototype.removeItem=function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Sn&&i.getItem()===t&&(n=i)}return n!==null?(e.getChildBoundables().remove(n),!0):!1};re.prototype.itemsTree=function(){var e=this;if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new F:t}else if(arguments.length===1){for(var n=arguments[0],r=new F,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Ht){var s=e.itemsTree(o);s!==null&&r.add(s)}else o instanceof Sn?r.add(o.getItem()):Q.shouldNeverReachHere()}return r.size()<=0?null:r}};re.prototype.insert=function(e,t){Q.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Sn(e,t))};re.prototype.boundablesAtLevel=function(){var e=this;if(arguments.length===1){var t=arguments[0],n=new F;return this.boundablesAtLevel(t,this._root,n),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(Q.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof Ht?e.boundablesAtLevel(r,a,o):(Q.isTrue(a instanceof Sn),r===-1&&o.add(a))}return null}};re.prototype.query=function(){var e=this;if(arguments.length===1){var t=arguments[0];this.build();var n=new F;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,n),n}else if(arguments.length===2){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(arguments.length===3){if(H(arguments[2],Kr)&&arguments[0]instanceof Object&&arguments[1]instanceof Ht)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);e.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof Ht?e.query(o,c,a):c instanceof Sn?a.visitItem(c.getItem()):Q.shouldNeverReachHere())}else if(H(arguments[2],vn)&&arguments[0]instanceof Object&&arguments[1]instanceof Ht)for(var f=arguments[0],p=arguments[1],g=arguments[2],h=p.getChildBoundables(),m=0;m<h.size();m++){var d=h.get(m);e.getIntersectsOp().intersects(d.getBounds(),f)&&(d instanceof Ht?e.query(f,d,g):d instanceof Sn?g.add(d.getItem()):Q.shouldNeverReachHere())}}};re.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};re.prototype.getRoot=function(){return this.build(),this._root};re.prototype.remove=function(){var e=this;if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),t)?this.remove(t,this._root,n):!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(e.getIntersectsOp().intersects(l.getBounds(),r)&&l instanceof Ht&&(s=e.remove(r,l,o),s)){a=l;break}}return a!==null&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}};re.prototype.createHigherLevels=function(e,t){Q.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return n.size()===1?n.get(0):this.createHigherLevels(n,t+1)};re.prototype.depth=function(){var e=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=arguments[0],n=0,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ht){var o=e.depth(i);o>n&&(n=o)}}return n+1}};re.prototype.createParentBoundables=function(e,t){var n=this;Q.isTrue(!e.isEmpty());var r=new F;r.add(this.createNode(t));var i=new F(e);In.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(t)),n.lastNode(r).addChildBoundable(s)}return r};re.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};re.prototype.interfaces_=function(){return[gn]};re.prototype.getClass=function(){return re};re.compareDoubles=function(e,t){return e>t?1:e<t?-1:0};au.IntersectsOp.get=function(){return fE};au.serialVersionUID.get=function(){return-3886435814360241e3};au.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(re,au);var fE=function(){},To=function(){};To.prototype.distance=function(e,t){};To.prototype.interfaces_=function(){return[]};To.prototype.getClass=function(){return To};var Dg=function(e){function t(r){r=r||t.DEFAULT_NODE_CAPACITY,e.call(this,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(r,i){var o=this;Q.isTrue(r.length>0);for(var s=new F,a=0;a<r.length;a++)s.addAll(o.createParentBoundablesFromVerticalSlice(r[a],i));return s},t.prototype.createNode=function(r){return new gp(r)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];if(r.isNull())return null;e.prototype.insert.call(this,r,i)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(r,i){for(var o=Math.trunc(Math.ceil(r.size()/i)),s=new Array(i).fill(null),a=r.iterator(),u=0;u<i;u++){s[u]=new F;for(var l=0;a.hasNext()&&l<o;){var c=a.next();s[u].add(c),l++}}return s},t.prototype.query=function(){if(arguments.length===1){var r=arguments[0];return e.prototype.query.call(this,r)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];e.prototype.query.call(this,i,o)}else if(arguments.length===3){if(H(arguments[2],Kr)&&arguments[0]instanceof Object&&arguments[1]instanceof Ht){var s=arguments[0],a=arguments[1],u=arguments[2];e.prototype.query.call(this,s,a,u)}else if(H(arguments[2],vn)&&arguments[0]instanceof Object&&arguments[1]instanceof Ht){var l=arguments[0],c=arguments[1],f=arguments[2];e.prototype.query.call(this,l,c,f)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(r,i){return e.prototype.createParentBoundables.call(this,r,i)},t.prototype.remove=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return e.prototype.remove.call(this,r,i)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(r,i){Q.isTrue(!r.isEmpty());var o=Math.trunc(Math.ceil(r.size()/this.getNodeCapacity())),s=new F(r);In.sort(s,t.xComparator);var a=this.verticalSlices(s,Math.trunc(Math.ceil(Math.sqrt(o))));return this.createParentBoundablesFromVerticalSlices(a,i)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(H(arguments[0],To)){var r=arguments[0],i=new Gt(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(i)}else if(arguments[0]instanceof Gt){var o=arguments[0];return this.nearestNeighbour(o,K.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&H(arguments[1],To)){var s=arguments[0],a=arguments[1],u=new Gt(this.getRoot(),s.getRoot(),a);return this.nearestNeighbour(u)}else if(arguments[0]instanceof Gt&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],f=c,p=null,g=new Tr;for(g.add(l);!g.isEmpty()&&f>0;){var h=g.poll(),m=h.getDistance();if(m>=f)break;h.isLeaves()?(f=m,p=h):h.expandToQueue(g,f)}return[p.getBoundable(0).getItem(),p.getBoundable(1).getItem()]}}else if(arguments.length===3){var d=arguments[0],y=arguments[1],v=arguments[2],b=new Sn(d,y),I=new Gt(this.getRoot(),b,v);return this.nearestNeighbour(I)[0]}},t.prototype.interfaces_=function(){return[Gi,gn]},t.prototype.getClass=function(){return t},t.centreX=function(r){return t.avg(r.getMinX(),r.getMaxX())},t.avg=function(r,i){return(r+i)/2},t.centreY=function(r){return t.avg(r.getMinY(),r.getMaxY())},n.STRtreeNode.get=function(){return gp},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Eo]},compare:function(r,i){return e.compareDoubles(t.centreX(r.getBounds()),t.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Eo]},compare:function(r,i){return e.compareDoubles(t.centreY(r.getBounds()),t.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,n),t}(re),gp=function(e){function t(){var n=arguments[0];e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var n=null,r=this.getChildBoundables().iterator();r.hasNext();){var i=r.next();n===null?n=new j(i.getBounds()):n.expandToInclude(i.getBounds())}return n},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ht),Me=function(){};Me.prototype.interfaces_=function(){return[]};Me.prototype.getClass=function(){return Me};Me.relativeSign=function(e,t){return e<t?-1:e>t?1:0};Me.compare=function(e,t,n){if(t.equals2D(n))return 0;var r=Me.relativeSign(t.x,n.x),i=Me.relativeSign(t.y,n.y);switch(e){case 0:return Me.compareValue(r,i);case 1:return Me.compareValue(i,r);case 2:return Me.compareValue(i,-r);case 3:return Me.compareValue(-r,i);case 4:return Me.compareValue(-r,-i);case 5:return Me.compareValue(-i,-r);case 6:return Me.compareValue(-i,r);case 7:return Me.compareValue(r,-i)}return Q.shouldNeverReachHere("invalid octant value"),0};Me.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var Jr=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._segString=e,this.coord=new E(t),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!t.equals2D(e.getCoordinate(n))};Jr.prototype.getCoordinate=function(){return this.coord};Jr.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)};Jr.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:Me.compare(this._segmentOctant,this.coord,t.coord)};Jr.prototype.isEndPoint=function(e){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===e};Jr.prototype.isInterior=function(){return this._isInterior};Jr.prototype.interfaces_=function(){return[hn]};Jr.prototype.getClass=function(){return Jr};var Pe=function(){this._nodeMap=new _e,this._edge=null;var e=arguments[0];this._edge=e};Pe.prototype.getSplitCoordinates=function(){var e=this,t=new Ds;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();e.addEdgeCoordinates(r,i,t),r=i}return t.toCoordinateArray()};Pe.prototype.addCollapsedNodes=function(){var e=this,t=new F;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var n=t.iterator();n.hasNext();){var r=n.next().intValue();e.add(e._edge.getCoordinate(r),r)}};Pe.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};Pe.prototype.findCollapsesFromExistingVertices=function(e){for(var t=this,n=0;n<this._edge.size()-2;n++){var r=t._edge.getCoordinate(n),i=t._edge.getCoordinate(n+2);r.equals2D(i)&&e.add(new zn(n+1))}};Pe.prototype.addEdgeCoordinates=function(e,t,n){var r=this,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);n.add(new E(e.coord),!1);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)n.add(r._edge.getCoordinate(s));o&&n.add(new E(t.coord))};Pe.prototype.iterator=function(){return this._nodeMap.values().iterator()};Pe.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};Pe.prototype.findCollapseIndex=function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,r===1?(n[0]=e.segmentIndex+1,!0):!1};Pe.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=this,n=new Array(1).fill(null),r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),s=t.findCollapseIndex(i,o,n);s&&e.add(new zn(n[0])),i=o}};Pe.prototype.getEdge=function(){return this._edge};Pe.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)};Pe.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(i);o||r--;var s=new Array(r).fill(null),a=0;s[a++]=new E(e.coord);for(var u=e.segmentIndex+1;u<=t.segmentIndex;u++)s[a++]=n._edge.getCoordinate(u);return o&&(s[a]=new E(t.coord)),new Ft(s,this._edge.getData())};Pe.prototype.add=function(e,t){var n=new Jr(this._edge,e,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(n);return r!==null?(Q.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)};Pe.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),n=e.get(0),r=n.getCoordinate(0);if(!r.equals2D(t[0]))throw new Cr("bad split edge start point at "+r);var i=e.get(e.size()-1),o=i.getCoordinates(),s=o[o.length-1];if(!s.equals2D(t[t.length-1]))throw new Cr("bad split edge end point at "+s)};Pe.prototype.interfaces_=function(){return[]};Pe.prototype.getClass=function(){return Pe};var Bi=function(){};Bi.prototype.interfaces_=function(){return[]};Bi.prototype.getClass=function(){return Bi};Bi.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new xt("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return e>=0?t>=0?n>=r?0:1:n>=r?7:6:t>=0?n>=r?3:2:n>=r?4:5}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(s===0&&a===0)throw new xt("Cannot compute the octant for two identical points "+i);return Bi.octant(s,a)}};var cr=function(){};cr.prototype.getCoordinates=function(){};cr.prototype.size=function(){};cr.prototype.getCoordinate=function(e){};cr.prototype.isClosed=function(){};cr.prototype.setData=function(e){};cr.prototype.getData=function(){};cr.prototype.interfaces_=function(){return[]};cr.prototype.getClass=function(){return cr};var Ls=function(){};Ls.prototype.addIntersection=function(e,t){};Ls.prototype.interfaces_=function(){return[cr]};Ls.prototype.getClass=function(){return Ls};var Ft=function(){this._nodeList=new Pe(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Ft.prototype.getCoordinates=function(){return this._pts};Ft.prototype.size=function(){return this._pts.length};Ft.prototype.getCoordinate=function(e){return this._pts[e]};Ft.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Ft.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))};Ft.prototype.setData=function(e){this._data=e};Ft.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:Bi.octant(e,t)};Ft.prototype.getData=function(){return this._data};Ft.prototype.addIntersection=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[3],o=new E(n.getIntersection(i));this.addIntersection(o,r)}};Ft.prototype.toString=function(){return bn.toLineString(new Mt(this._pts))};Ft.prototype.getNodeList=function(){return this._nodeList};Ft.prototype.addIntersectionNode=function(e,t){var n=t,r=n+1;if(r<this._pts.length){var i=this._pts[r];e.equals2D(i)&&(n=r)}var o=this._nodeList.add(e,n);return o};Ft.prototype.addIntersections=function(e,t,n){for(var r=this,i=0;i<e.getIntersectionNum();i++)r.addIntersection(e,t,n,i)};Ft.prototype.interfaces_=function(){return[Ls]};Ft.prototype.getClass=function(){return Ft};Ft.getNodedSubstrings=function(){if(arguments.length===1){var e=arguments[0],t=new F;return Ft.getNodedSubstrings(e,t),t}else if(arguments.length===2)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var W=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new E,this.p1=new E;else if(arguments.length===1){var e=arguments[0];this.p0=new E(e.p0),this.p1=new E(e.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new E(t,n),this.p1=new E(r,i)}},Fg={serialVersionUID:{configurable:!0}};W.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};W.prototype.orientationIndex=function(){if(arguments[0]instanceof W){var e=arguments[0],t=G.orientationIndex(this.p0,this.p1,e.p0),n=G.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}else if(arguments[0]instanceof E){var r=arguments[0];return G.orientationIndex(this.p0,this.p1,r)}};W.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])};W.prototype.isVertical=function(){return this.p0.x===this.p1.x};W.prototype.equals=function(e){if(!(e instanceof W))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};W.prototype.intersection=function(e){var t=new wi;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null};W.prototype.project=function(){if(arguments[0]instanceof E){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new E(e);var t=this.projectionFactor(e),n=new E;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}else if(arguments[0]instanceof W){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1||i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new W(s,a)}};W.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};W.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};W.prototype.getCoordinate=function(e){return e===0?this.p0:this.p1};W.prototype.distancePerpendicular=function(e){return G.distancePointLinePerpendicular(e,this.p0,this.p1)};W.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};W.prototype.midPoint=function(){return W.midPoint(this.p0,this.p1)};W.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;if(r<=0)return K.NaN;var i=((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r;return i};W.prototype.closestPoints=function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=new Array(2).fill(null),r=K.MAX_VALUE,i=null,o=this.closestPoint(e.p0);r=o.distance(e.p0),n[0]=o,n[1]=e.p0;var s=this.closestPoint(e.p1);i=s.distance(e.p1),i<r&&(r=i,n[0]=s,n[1]=e.p1);var a=e.closestPoint(this.p0);i=a.distance(this.p0),i<r&&(r=i,n[0]=this.p0,n[1]=a);var u=e.closestPoint(this.p1);return i=u.distance(this.p1),i<r&&(r=i,n[0]=this.p1,n[1]=u),n};W.prototype.closestPoint=function(e){var t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);var n=this.p0.distance(e),r=this.p1.distance(e);return n<r?this.p0:this.p1};W.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};W.prototype.getLength=function(){return this.p0.distance(this.p1)};W.prototype.compareTo=function(e){var t=e,n=this.p0.compareTo(t.p0);return n!==0?n:this.p1.compareTo(t.p1)};W.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e};W.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)};W.prototype.lineIntersection=function(e){try{var t=_n.intersection(this.p0,this.p1,e.p0,e.p1);return t}catch(n){if(!(n instanceof Yo))throw n}finally{}return null};W.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};W.prototype.pointAlongOffset=function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(t!==0){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=t*i/s,u=t*o/s}var l=n-u,c=r+a,f=new E(l,c);return f};W.prototype.setCoordinates=function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}};W.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||K.isNaN(t))&&(t=1),t};W.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};W.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};W.prototype.distance=function(){if(arguments[0]instanceof W){var e=arguments[0];return G.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}else if(arguments[0]instanceof E){var t=arguments[0];return G.distancePointLine(t,this.p0,this.p1)}};W.prototype.pointAlong=function(e){var t=new E;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t};W.prototype.hashCode=function(){var e=K.doubleToLongBits(this.p0.x);e^=K.doubleToLongBits(this.p0.y)*31;var t=Math.trunc(e)^Math.trunc(e>>32),n=K.doubleToLongBits(this.p1.x);n^=K.doubleToLongBits(this.p1.y)*31;var r=Math.trunc(n)^Math.trunc(n>>32);return t^r};W.prototype.interfaces_=function(){return[hn,gn]};W.prototype.getClass=function(){return W};W.midPoint=function(e,t){return new E((e.x+t.x)/2,(e.y+t.y)/2)};Fg.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(W,Fg);var Ns=function(){this.tempEnv1=new j,this.tempEnv2=new j,this._overlapSeg1=new W,this._overlapSeg2=new W};Ns.prototype.overlap=function(){if(arguments.length!==2&&arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];e.getLineSegment(t,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}};Ns.prototype.interfaces_=function(){return[]};Ns.prototype.getClass=function(){return Ns};var Xe=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=r};Xe.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]};Xe.prototype.computeSelect=function(e,t,n,r){var i=this._pts[t],o=this._pts[n];if(r.tempEnv1.init(i,o),n-t===1)return r.select(this,t),null;if(!e.intersects(r.tempEnv1))return null;var s=Math.trunc((t+n)/2);t<s&&this.computeSelect(e,t,s,r),s<n&&this.computeSelect(e,s,n,r)};Xe.prototype.getCoordinates=function(){for(var e=this,t=new Array(this._end-this._start+1).fill(null),n=0,r=this._start;r<=this._end;r++)t[n++]=e._pts[r];return t};Xe.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)};Xe.prototype.setId=function(e){this._id=e};Xe.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)};Xe.prototype.getEnvelope=function(){if(this._env===null){var e=this._pts[this._start],t=this._pts[this._end];this._env=new j(e,t)}return this._env};Xe.prototype.getEndIndex=function(){return this._end};Xe.prototype.getStartIndex=function(){return this._start};Xe.prototype.getContext=function(){return this._context};Xe.prototype.getId=function(){return this._id};Xe.prototype.computeOverlapsInternal=function(e,t,n,r,i,o){var s=this._pts[e],a=this._pts[t],u=n._pts[r],l=n._pts[i];if(t-e===1&&i-r===1)return o.overlap(this,e,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((e+t)/2),f=Math.trunc((r+i)/2);e<c&&(r<f&&this.computeOverlapsInternal(e,c,n,r,f,o),f<i&&this.computeOverlapsInternal(e,c,n,f,i,o)),c<t&&(r<f&&this.computeOverlapsInternal(c,t,n,r,f,o),f<i&&this.computeOverlapsInternal(c,t,n,f,i,o))};Xe.prototype.interfaces_=function(){return[]};Xe.prototype.getClass=function(){return Xe};var Bn=function(){};Bn.prototype.interfaces_=function(){return[]};Bn.prototype.getClass=function(){return Bn};Bn.getChainStartIndices=function(e){var t=0,n=new F;n.add(new zn(t));do{var r=Bn.findChainEnd(e,t);n.add(new zn(r)),t=r}while(t<e.length-1);var i=Bn.toIntArray(n);return i};Bn.findChainEnd=function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=mt.quadrant(e[n],e[n+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i])){var o=mt.quadrant(e[i-1],e[i]);if(o!==r)break}i++}return i-1};Bn.getChains=function(){if(arguments.length===1){var e=arguments[0];return Bn.getChains(e,null)}else if(arguments.length===2){for(var t=arguments[0],n=arguments[1],r=new F,i=Bn.getChainStartIndices(t),o=0;o<i.length-1;o++){var s=new Xe(t,i[o],i[o+1],n);r.add(s)}return r}};Bn.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var yi=function(){};yi.prototype.computeNodes=function(e){};yi.prototype.getNodedSubstrings=function(){};yi.prototype.interfaces_=function(){return[]};yi.prototype.getClass=function(){return yi};var xs=function(){if(this._segInt=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];this.setSegmentIntersector(e)}};xs.prototype.setSegmentIntersector=function(e){this._segInt=e};xs.prototype.interfaces_=function(){return[yi]};xs.prototype.getClass=function(){return xs};var oc=function(e){function t(r){r?e.call(this,r):e.call(this),this._monoChains=new F,this._index=new Dg,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return Ft.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(r){for(var i=this,o=Bn.getChains(r.getCoordinates(),r),s=o.iterator();s.hasNext();){var a=s.next();a.setId(i._idCounter++),i._index.insert(a.getEnvelope(),a),i._monoChains.add(a)}},t.prototype.computeNodes=function(r){var i=this;this._nodedSegStrings=r;for(var o=r.iterator();o.hasNext();)i.add(o.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var r=this,i=new dp(this._segInt),o=this._monoChains.iterator();o.hasNext();)for(var s=o.next(),a=r._index.query(s.getEnvelope()),u=a.iterator();u.hasNext();){var l=u.next();if(l.getId()>s.getId()&&(s.computeOverlaps(l,i),r._nOverlaps++),r._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return dp},Object.defineProperties(t,n),t}(xs),dp=function(e){function t(){e.call(this),this._si=null;var n=arguments[0];this._si=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],s=n.getContext(),a=i.getContext();this._si.processIntersections(s,r,a,o)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ns),at=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}}},kr={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};at.prototype.getEndCapStyle=function(){return this._endCapStyle};at.prototype.isSingleSided=function(){return this._isSingleSided};at.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=at.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=at.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==at.JOIN_ROUND&&(this._quadrantSegments=at.DEFAULT_QUADRANT_SEGMENTS)};at.prototype.getJoinStyle=function(){return this._joinStyle};at.prototype.setJoinStyle=function(e){this._joinStyle=e};at.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e};at.prototype.getSimplifyFactor=function(){return this._simplifyFactor};at.prototype.getQuadrantSegments=function(){return this._quadrantSegments};at.prototype.setEndCapStyle=function(e){this._endCapStyle=e};at.prototype.getMitreLimit=function(){return this._mitreLimit};at.prototype.setMitreLimit=function(e){this._mitreLimit=e};at.prototype.setSingleSided=function(e){this._isSingleSided=e};at.prototype.interfaces_=function(){return[]};at.prototype.getClass=function(){return at};at.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)};kr.CAP_ROUND.get=function(){return 1};kr.CAP_FLAT.get=function(){return 2};kr.CAP_SQUARE.get=function(){return 3};kr.JOIN_ROUND.get=function(){return 1};kr.JOIN_MITRE.get=function(){return 2};kr.JOIN_BEVEL.get=function(){return 3};kr.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};kr.DEFAULT_MITRE_LIMIT.get=function(){return 5};kr.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(at,kr);var Rt=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=G.COUNTERCLOCKWISE,this._inputLine=e||null},Gs={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Rt.prototype.isDeletable=function(e,t,n,r){var i=this._inputLine[e],o=this._inputLine[t],s=this._inputLine[n];return!this.isConcave(i,o,s)||!this.isShallow(i,o,s,r)?!1:this.isShallowSampled(i,o,e,n,r)};Rt.prototype.deleteShallowConcavities=function(){for(var e=this,t=1,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;e.isDeletable(t,n,r,e._distanceTol)&&(e._isDeleted[n]=Rt.DELETE,o=!0,i=!0),o?t=r:t=n,n=e.findNextNonDeletedIndex(t),r=e.findNextNonDeletedIndex(n)}return i};Rt.prototype.isShallowConcavity=function(e,t,n,r){var i=G.computeOrientation(e,t,n),o=i===this._angleOrientation;if(!o)return!1;var s=G.distancePointLine(t,e,n);return s<r};Rt.prototype.isShallowSampled=function(e,t,n,r,i){var o=this,s=Math.trunc((r-n)/Rt.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var a=n;a<r;a+=s)if(!o.isShallow(e,t,o._inputLine[a],i))return!1;return!0};Rt.prototype.isConcave=function(e,t,n){var r=G.computeOrientation(e,t,n),i=r===this._angleOrientation;return i};Rt.prototype.simplify=function(e){var t=this;this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=G.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=t.deleteShallowConcavities();while(n);return this.collapseLine()};Rt.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===Rt.DELETE;)t++;return t};Rt.prototype.isShallow=function(e,t,n,r){var i=G.distancePointLine(t,e,n);return i<r};Rt.prototype.collapseLine=function(){for(var e=this,t=new Ds,n=0;n<this._inputLine.length;n++)e._isDeleted[n]!==Rt.DELETE&&t.add(e._inputLine[n]);return t.toCoordinateArray()};Rt.prototype.interfaces_=function(){return[]};Rt.prototype.getClass=function(){return Rt};Rt.simplify=function(e,t){var n=new Rt(e);return n.simplify(t)};Gs.INIT.get=function(){return 0};Gs.DELETE.get=function(){return 1};Gs.KEEP.get=function(){return 1};Gs.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(Rt,Gs);var en=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new F},kg={COORDINATE_ARRAY_TYPE:{configurable:!0}};en.prototype.getCoordinates=function(){var e=this._ptList.toArray(en.COORDINATE_ARRAY_TYPE);return e};en.prototype.setPrecisionModel=function(e){this._precisionModel=e};en.prototype.addPt=function(e){var t=new E(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};en.prototype.revere=function(){};en.prototype.addPts=function(e,t){var n=this;if(t)for(var r=0;r<e.length;r++)n.addPt(e[r]);else for(var i=e.length-1;i>=0;i--)n.addPt(e[i])};en.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1),n=e.distance(t);return n<this._minimimVertexDistance};en.prototype.toString=function(){var e=new tt,t=e.createLineString(this.getCoordinates());return t.toString()};en.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new E(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)};en.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e};en.prototype.interfaces_=function(){return[]};en.prototype.getClass=function(){return en};kg.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(en,kg);var rt=function(){},oo={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};rt.prototype.interfaces_=function(){return[]};rt.prototype.getClass=function(){return rt};rt.toDegrees=function(e){return e*180/Math.PI};rt.normalize=function(e){for(;e>Math.PI;)e-=rt.PI_TIMES_2;for(;e<=-Math.PI;)e+=rt.PI_TIMES_2;return e};rt.angle=function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=n.x-t.x,i=n.y-t.y;return Math.atan2(i,r)}};rt.isAcute=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,s=n.y-t.y,a=r*o+i*s;return a>0};rt.isObtuse=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,s=n.y-t.y,a=r*o+i*s;return a<0};rt.interiorAngle=function(e,t,n){var r=rt.angle(t,e),i=rt.angle(t,n);return Math.abs(i-r)};rt.normalizePositive=function(e){if(e<0){for(;e<0;)e+=rt.PI_TIMES_2;e>=rt.PI_TIMES_2&&(e=0)}else{for(;e>=rt.PI_TIMES_2;)e-=rt.PI_TIMES_2;e<0&&(e=0)}return e};rt.angleBetween=function(e,t,n){var r=rt.angle(t,e),i=rt.angle(t,n);return rt.diff(r,i)};rt.diff=function(e,t){var n=null;return e<t?n=t-e:n=e-t,n>Math.PI&&(n=2*Math.PI-n),n};rt.toRadians=function(e){return e*Math.PI/180};rt.getTurn=function(e,t){var n=Math.sin(t-e);return n>0?rt.COUNTERCLOCKWISE:n<0?rt.CLOCKWISE:rt.NONE};rt.angleBetweenOriented=function(e,t,n){var r=rt.angle(t,e),i=rt.angle(t,n),o=i-r;return o<=-Math.PI?o+rt.PI_TIMES_2:o>Math.PI?o-rt.PI_TIMES_2:o};oo.PI_TIMES_2.get=function(){return 2*Math.PI};oo.PI_OVER_2.get=function(){return Math.PI/2};oo.PI_OVER_4.get=function(){return Math.PI/4};oo.COUNTERCLOCKWISE.get=function(){return G.COUNTERCLOCKWISE};oo.CLOCKWISE.get=function(){return G.CLOCKWISE};oo.NONE.get=function(){return G.COLLINEAR};Object.defineProperties(rt,oo);var Lt=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new W,this._seg1=new W,this._offset0=new W,this._offset1=new W,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new wi,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===at.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Bs={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Lt.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=G.computeOrientation(this._s0,this._s1,this._s2),r=n===G.CLOCKWISE&&this._side===D.LEFT||n===G.COUNTERCLOCKWISE&&this._side===D.RIGHT;n===0?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)};Lt.prototype.addLineEndCap=function(e,t){var n=new W(e,t),r=new W;this.computeOffsetSegment(n,D.LEFT,this._distance,r);var i=new W;this.computeOffsetSegment(n,D.RIGHT,this._distance,i);var o=t.x-e.x,s=t.y-e.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case at.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(t,a+Math.PI/2,a-Math.PI/2,G.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case at.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case at.CAP_SQUARE:var u=new E;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new E(r.p1.x+u.x,r.p1.y+u.y),c=new E(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c);break}};Lt.prototype.getCoordinates=function(){var e=this._segList.getCoordinates();return e};Lt.prototype.addMitreJoin=function(e,t,n,r){var i=!0,o=null;try{o=_n.intersection(t.p0,t.p1,n.p0,n.p1);var s=r<=0?1:o.distance(e)/Math.abs(r);s>this._bufParams.getMitreLimit()&&(i=!1)}catch(a){if(a instanceof Yo)o=new E(0,0),i=!1;else throw a}finally{}i?this._segList.addPt(o):this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())};Lt.prototype.addFilletCorner=function(e,t,n,r,i){var o=t.x-e.x,s=t.y-e.y,a=Math.atan2(s,o),u=n.x-e.x,l=n.y-e.y,c=Math.atan2(l,u);r===G.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,a,c,r,i),this._segList.addPt(n)};Lt.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Lt.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===at.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===at.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))};Lt.prototype.createSquare=function(e){this._segList.addPt(new E(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new E(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new E(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new E(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()};Lt.prototype.addSegments=function(e,t){this._segList.addPts(e,t)};Lt.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};Lt.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};Lt.prototype.initSideSegments=function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)};Lt.prototype.addLimitedMitreJoin=function(e,t,n,r){var i=this._seg0.p1,o=rt.angle(i,this._seg0.p0),s=rt.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1),a=s/2,u=rt.normalize(o+a),l=rt.normalize(u+Math.PI),c=r*n,f=c*Math.abs(Math.sin(a)),p=n-f,g=i.x+c*Math.cos(l),h=i.y+c*Math.sin(l),m=new E(g,h),d=new W(i,m),y=d.pointAlongOffset(1,p),v=d.pointAlongOffset(1,-p);this._side===D.LEFT?(this._segList.addPt(y),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(y))};Lt.prototype.computeOffsetSegment=function(e,t,n,r){var i=t===D.LEFT?1:-1,o=e.p1.x-e.p0.x,s=e.p1.y-e.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=e.p0.x-l,r.p0.y=e.p0.y+u,r.p1.x=e.p1.x-l,r.p1.y=e.p1.y+u};Lt.prototype.addFilletArc=function(e,t,n,r,i){var o=this,s=r===G.CLOCKWISE?-1:1,a=Math.abs(t-n),u=Math.trunc(a/this._filletAngleQuantum+.5);if(u<1)return null;for(var l=0,c=a/u,f=l,p=new E;f<a;){var g=t+s*f;p.x=e.x+i*Math.cos(g),p.y=e.y+i*Math.sin(g),o._segList.addPt(p),f+=c}};Lt.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Lt.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new E((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new E((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};Lt.prototype.createCircle=function(e){var t=new E(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};Lt.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)};Lt.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new en,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*Lt.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};Lt.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var t=this._li.getIntersectionNum();t>=2&&(this._bufParams.getJoinStyle()===at.JOIN_BEVEL||this._bufParams.getJoinStyle()===at.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,G.CLOCKWISE,this._distance))};Lt.prototype.closeRing=function(){this._segList.closeRing()};Lt.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};Lt.prototype.interfaces_=function(){return[]};Lt.prototype.getClass=function(){return Lt};Bs.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};Bs.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};Bs.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};Bs.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(Lt,Bs);var Fe=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};Fe.prototype.getOffsetCurve=function(e,t){if(this._distance=t,t===0)return null;var n=t<0,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var o=i.getCoordinates();return n&&et.reverse(o),o};Fe.prototype.computeSingleSidedBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var i=Rt.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],D.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(e,!1);var a=Rt.simplify(e,r),u=a.length-1;n.initSideSegments(a[0],a[1],D.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()};Fe.prototype.computeRingBufferCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);t===D.RIGHT&&(r=-r);var i=Rt.simplify(e,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],t);for(var s=1;s<=o;s++){var a=s!==1;n.addNextSegment(i[s],a)}n.closeRing()};Fe.prototype.computeLineBufferCurve=function(e,t){var n=this.simplifyTolerance(this._distance),r=Rt.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],D.LEFT);for(var o=2;o<=i;o++)t.addNextSegment(r[o],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var s=Rt.simplify(e,-n),a=s.length-1;t.initSideSegments(s[a],s[a-1],D.LEFT);for(var u=a-2;u>=0;u--)t.addNextSegment(s[u],!0);t.addLastSegment(),t.addLineEndCap(s[1],s[0]),t.closeRing()};Fe.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case at.CAP_ROUND:t.createCircle(e);break;case at.CAP_SQUARE:t.createSquare(e);break}};Fe.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided()||t===0)return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this._bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);var o=r.getCoordinates();return o};Fe.prototype.getBufferParameters=function(){return this._bufParams};Fe.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()};Fe.prototype.getRingCurve=function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(n===0)return Fe.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()};Fe.prototype.computeOffsetCurve=function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var i=Rt.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],D.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Rt.simplify(e,r),u=a.length-1;n.initSideSegments(a[0],a[1],D.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()};Fe.prototype.getSegGen=function(e){return new Lt(this._precisionModel,this._bufParams,e)};Fe.prototype.interfaces_=function(){return[]};Fe.prototype.getClass=function(){return Fe};Fe.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new E(e[n]);return t};var zi=function(){this._subgraphs=null,this._seg=new W,this._cga=new G;var e=arguments[0];this._subgraphs=e},Gg={DepthSegment:{configurable:!0}};zi.prototype.findStabbedSegments=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=new F,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();t.y<o.getMinY()||t.y>o.getMaxY()||e.findStabbedSegments(t,i.getDirectedEdges(),n)}return n}else if(arguments.length===3){if(H(arguments[2],vn)&&arguments[0]instanceof E&&arguments[1]instanceof yl)for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++){e._seg.p0=l[c],e._seg.p1=l[c+1],e._seg.p0.y>e._seg.p1.y&&e._seg.reverse();var f=Math.max(e._seg.p0.x,e._seg.p1.x);if(!(f<s.x)&&!e._seg.isHorizontal()&&!(s.y<e._seg.p0.y||s.y>e._seg.p1.y)&&G.computeOrientation(e._seg.p0,e._seg.p1,s)!==G.RIGHT){var p=a.getDepth(D.LEFT);e._seg.p0.equals(l[c])||(p=a.getDepth(D.RIGHT));var g=new _i(e._seg,p);u.add(g)}}else if(H(arguments[2],vn)&&arguments[0]instanceof E&&H(arguments[1],vn))for(var h=arguments[0],m=arguments[1],d=arguments[2],y=m.iterator();y.hasNext();){var v=y.next();v.isForward()&&e.findStabbedSegments(h,v,d)}}};zi.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);if(t.size()===0)return 0;var n=In.min(t);return n._leftDepth};zi.prototype.interfaces_=function(){return[]};zi.prototype.getClass=function(){return zi};Gg.DepthSegment.get=function(){return _i};Object.defineProperties(zi,Gg);var _i=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new W(e),this._leftDepth=t};_i.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return n!==0||(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg),n!==0)?n:this._upwardSeg.compareTo(t._upwardSeg)};_i.prototype.compareX=function(e,t){var n=e.p0.compareTo(t.p0);return n!==0?n:e.p1.compareTo(t.p1)};_i.prototype.toString=function(){return this._upwardSeg.toString()};_i.prototype.interfaces_=function(){return[hn]};_i.prototype.getClass=function(){return _i};var lt=function(e,t,n){this.p0=e||null,this.p1=t||null,this.p2=n||null};lt.prototype.area=function(){return lt.area(this.p0,this.p1,this.p2)};lt.prototype.signedArea=function(){return lt.signedArea(this.p0,this.p1,this.p2)};lt.prototype.interpolateZ=function(e){if(e===null)throw new xt("Supplied point is null.");return lt.interpolateZ(e,this.p0,this.p1,this.p2)};lt.prototype.longestSideLength=function(){return lt.longestSideLength(this.p0,this.p1,this.p2)};lt.prototype.isAcute=function(){return lt.isAcute(this.p0,this.p1,this.p2)};lt.prototype.circumcentre=function(){return lt.circumcentre(this.p0,this.p1,this.p2)};lt.prototype.area3D=function(){return lt.area3D(this.p0,this.p1,this.p2)};lt.prototype.centroid=function(){return lt.centroid(this.p0,this.p1,this.p2)};lt.prototype.inCentre=function(){return lt.inCentre(this.p0,this.p1,this.p2)};lt.prototype.interfaces_=function(){return[]};lt.prototype.getClass=function(){return lt};lt.area=function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)};lt.signedArea=function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2};lt.det=function(e,t,n,r){return e*r-t*n};lt.interpolateZ=function(e,t,n,r){var i=t.x,o=t.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,c=s*l-a*u,f=e.x-i,p=e.y-o,g=(l*f-a*p)/c,h=(-u*f+s*p)/c,m=t.z+g*(n.z-t.z)+h*(r.z-t.z);return m};lt.longestSideLength=function(e,t,n){var r=e.distance(t),i=t.distance(n),o=n.distance(e),s=r;return i>s&&(s=i),o>s&&(s=o),s};lt.isAcute=function(e,t,n){return!(!rt.isAcute(e,t,n)||!rt.isAcute(t,n,e)||!rt.isAcute(n,e,t))};lt.circumcentre=function(e,t,n){var r=n.x,i=n.y,o=e.x-r,s=e.y-i,a=t.x-r,u=t.y-i,l=2*lt.det(o,s,a,u),c=lt.det(s,o*o+s*s,u,a*a+u*u),f=lt.det(o,o*o+s*s,a,a*a+u*u),p=r-c/l,g=i+f/l;return new E(p,g)};lt.perpendicularBisector=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new _n(e.x+n/2,e.y+r/2,1),o=new _n(e.x-r+n/2,e.y+n+r/2,1);return new _n(i,o)};lt.angleBisector=function(e,t,n){var r=t.distance(e),i=t.distance(n),o=r/(r+i),s=n.x-e.x,a=n.y-e.y,u=new E(e.x+o*s,e.y+o*a);return u};lt.area3D=function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=t.z-e.z,s=n.x-e.x,a=n.y-e.y,u=n.z-e.z,l=i*u-o*a,c=o*s-r*u,f=r*a-i*s,p=l*l+c*c+f*f,g=Math.sqrt(p)/2;return g};lt.centroid=function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new E(r,i)};lt.inCentre=function(e,t,n){var r=t.distance(n),i=e.distance(n),o=e.distance(t),s=r+i+o,a=(r*e.x+i*t.x+o*n.x)/s,u=(r*e.y+i*t.y+o*n.y)/s;return new E(a,u)};var pn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new F;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n};pn.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)};pn.prototype.addPolygon=function(e){var t=this,n=this._distance,r=D.LEFT;this._distance<0&&(n=-this._distance,r=D.RIGHT);var i=e.getExteriorRing(),o=et.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,S.EXTERIOR,S.INTERIOR);for(var s=0;s<e.getNumInteriorRing();s++){var a=e.getInteriorRingN(s),u=et.removeRepeatedPoints(a.getCoordinates());t._distance>0&&t.isErodedCompletely(a,-t._distance)||t.addPolygonRing(u,n,D.opposite(r),S.INTERIOR,S.EXTERIOR)}};pn.prototype.isTriangleErodedCompletely=function(e,t){var n=new lt(e[0],e[1],e[2]),r=n.inCentre(),i=G.distancePointLine(r,n.p0,n.p1);return i<Math.abs(t)};pn.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=et.removeRepeatedPoints(e.getCoordinates()),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)};pn.prototype.addCurve=function(e,t,n){if(e===null||e.length<2)return null;var r=new Ft(e,new pt(0,S.BOUNDARY,t,n));this._curveList.add(r)};pn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};pn.prototype.addPolygonRing=function(e,t,n,r,i){if(t===0&&e.length<ur.MINIMUM_VALID_SIZE)return null;var o=r,s=i;e.length>=ur.MINIMUM_VALID_SIZE&&G.isCCW(e)&&(o=i,s=r,n=D.opposite(n));var a=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(a,o,s)};pn.prototype.add=function(e){if(e.isEmpty())return null;e instanceof Zt?this.addPolygon(e):e instanceof Tt?this.addLineString(e):e instanceof je?this.addPoint(e):e instanceof Co?this.addCollection(e):e instanceof mi?this.addCollection(e):e instanceof or?this.addCollection(e):e instanceof Ce&&this.addCollection(e)};pn.prototype.isErodedCompletely=function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(n.length===4)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>i};pn.prototype.addCollection=function(e){for(var t=this,n=0;n<e.getNumGeometries();n++){var r=e.getGeometryN(n);t.add(r)}};pn.prototype.interfaces_=function(){return[]};pn.prototype.getClass=function(){return pn};var Ro=function(){};Ro.prototype.locate=function(e){};Ro.prototype.interfaces_=function(){return[]};Ro.prototype.getClass=function(){return Ro};var sr=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};sr.prototype.next=function(){if(this._atStart)return this._atStart=!1,sr.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Zo;var e=this._parent.getGeometryN(this._index++);return e instanceof Ce?(this._subcollectionIterator=new sr(e),this._subcollectionIterator.next()):e};sr.prototype.remove=function(){throw new Error(this.getClass().getName())};sr.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};sr.prototype.interfaces_=function(){return[Ho]};sr.prototype.getClass=function(){return sr};sr.isAtomic=function(e){return!(e instanceof Ce)};var Je=function(){this._geom=null;var e=arguments[0];this._geom=e};Je.prototype.locate=function(e){return Je.locate(e,this._geom)};Je.prototype.interfaces_=function(){return[Ro]};Je.prototype.getClass=function(){return Je};Je.isPointInRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?G.isPointInRing(e,t.getCoordinates()):!1};Je.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var n=t.getExteriorRing();if(!Je.isPointInRing(e,n))return!1;for(var r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r);if(Je.isPointInRing(e,i))return!1}return!0};Je.containsPoint=function(e,t){if(t instanceof Zt)return Je.containsPointInPolygon(e,t);if(t instanceof Ce)for(var n=new sr(t);n.hasNext();){var r=n.next();if(r!==t&&Je.containsPoint(e,r))return!0}return!1};Je.locate=function(e,t){return t.isEmpty()?S.EXTERIOR:Je.containsPoint(e,t)?S.INTERIOR:S.EXTERIOR};var be=function(){this._edgeMap=new _e,this._edgeList=null,this._ptInAreaLocation=[S.NONE,S.NONE]};be.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return t===0&&(n=this._edgeList.size()-1),this._edgeList.get(n)};be.prototype.propagateSideLabels=function(e){for(var t=S.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(e)&&i.getLocation(e,D.LEFT)!==S.NONE&&(t=i.getLocation(e,D.LEFT))}if(t===S.NONE)return null;for(var o=t,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();if(u.getLocation(e,D.ON)===S.NONE&&u.setLocation(e,D.ON,o),u.isArea(e)){var l=u.getLocation(e,D.LEFT),c=u.getLocation(e,D.RIGHT);if(c!==S.NONE){if(c!==o)throw new Pr("side location conflict",a.getCoordinate());l===S.NONE&&Q.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),o=l}else Q.isTrue(u.getLocation(e,D.LEFT)===S.NONE,"found single null side"),u.setLocation(e,D.RIGHT,o),u.setLocation(e,D.LEFT,o)}}};be.prototype.getCoordinate=function(){var e=this.iterator();if(!e.hasNext())return null;var t=e.next();return t.getCoordinate()};be.prototype.print=function(e){ce.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};be.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};be.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel(),i=r.getLocation(e,D.LEFT);Q.isTrue(i!==S.NONE,"Found unlabelled area edge");for(var o=i,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();Q.isTrue(u.isArea(e),"Found non-area edge");var l=u.getLocation(e,D.LEFT),c=u.getLocation(e,D.RIGHT);if(l===c||c!==o)return!1;o=l}return!0};be.prototype.findIndex=function(e){var t=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var r=t._edgeList.get(n);if(r===e)return n}return-1};be.prototype.iterator=function(){return this.getEdges().iterator()};be.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new F(this._edgeMap.values())),this._edgeList};be.prototype.getLocation=function(e,t,n){return this._ptInAreaLocation[e]===S.NONE&&(this._ptInAreaLocation[e]=Je.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]};be.prototype.toString=function(){var e=new Qn;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append(`
`);for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append(`
`)}return e.toString()};be.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();n.computeLabel(e)}};be.prototype.computeLabelling=function(e){var t=this;this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],r=this.iterator();r.hasNext();)for(var i=r.next(),o=i.getLabel(),s=0;s<2;s++)o.isLine(s)&&o.getLocation(s)===S.BOUNDARY&&(n[s]=!0);for(var a=this.iterator();a.hasNext();)for(var u=a.next(),l=u.getLabel(),c=0;c<2;c++)if(l.isAnyNull(c)){var f=S.NONE;if(n[c])f=S.EXTERIOR;else{var p=u.getCoordinate();f=t.getLocation(c,p,e)}l.setAllLocationsIfNull(c,f)}};be.prototype.getDegree=function(){return this._edgeMap.size()};be.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null};be.prototype.interfaces_=function(){return[]};be.prototype.getClass=function(){return be};var pE=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var r=null,i=null,o=this._SCANNING_FOR_INCOMING,s=0;s<this._resultAreaEdgeList.size();s++){var a=n._resultAreaEdgeList.get(s),u=a.getSym();if(a.getLabel().isArea())switch(r===null&&a.isInResult()&&(r=a),o){case n._SCANNING_FOR_INCOMING:if(!u.isInResult())continue;i=u,o=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!a.isInResult())continue;i.setNext(a),o=n._SCANNING_FOR_INCOMING;break}}if(o===this._LINKING_TO_OUTGOING){if(r===null)throw new Pr("no outgoing dirEdge found",this.getCoordinate());Q.isTrue(r.isInResult(),"unable to link last incoming dirEdge"),i.setNext(r)}},t.prototype.insert=function(n){var r=n;this.insertEdgeEnd(r,r)},t.prototype.getRightmostEdge=function(){var n=this.getEdges(),r=n.size();if(r<1)return null;var i=n.get(0);if(r===1)return i;var o=n.get(r-1),s=i.getQuadrant(),a=o.getQuadrant();return mt.isNorthern(s)&&mt.isNorthern(a)?i:!mt.isNorthern(s)&&!mt.isNorthern(a)?o:i.getDy()!==0?i:o.getDy()!==0?o:(Q.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(n){ce.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var i=r.next();n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()}},t.prototype.getResultAreaEdges=function(){var n=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new F;for(var r=this.iterator();r.hasNext();){var i=r.next();(i.isInResult()||i.getSym().isInResult())&&n._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(n){for(var r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.setAllLocationsIfNull(0,n.getLocation(0)),o.setAllLocationsIfNull(1,n.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var n=this;this.getEdges();for(var r=null,i=null,o=this._edgeList.size()-1;o>=0;o--){var s=n._edgeList.get(o),a=s.getSym();i===null&&(i=a),r!==null&&a.setNext(r),r=s}i.setNext(r)},t.prototype.computeDepths=function(){var n=this;if(arguments.length===1){var r=arguments[0],i=this.findIndex(r),o=r.getDepth(D.LEFT),s=r.getDepth(D.RIGHT),a=this.computeDepths(i+1,this._edgeList.size(),o),u=this.computeDepths(0,i,a);if(u!==s)throw new Pr("depth mismatch at "+r.getCoordinate())}else if(arguments.length===3){for(var l=arguments[0],c=arguments[1],f=arguments[2],p=f,g=l;g<c;g++){var h=n._edgeList.get(g);h.setEdgeDepths(D.RIGHT,p),p=h.getDepth(D.LEFT)}return p}},t.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.merge(r.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(n){for(var r=this,i=null,o=null,s=this._SCANNING_FOR_INCOMING,a=this._resultAreaEdgeList.size()-1;a>=0;a--){var u=r._resultAreaEdgeList.get(a),l=u.getSym();switch(i===null&&u.getEdgeRing()===n&&(i=u),s){case r._SCANNING_FOR_INCOMING:if(l.getEdgeRing()!==n)continue;o=l,s=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(u.getEdgeRing()!==n)continue;o.setNextMin(u),s=r._SCANNING_FOR_INCOMING;break}}s===this._LINKING_TO_OUTGOING&&(Q.isTrue(i!==null,"found null for first outgoing dirEdge"),Q.isTrue(i.getEdgeRing()===n,"unable to link last incoming dirEdge"),o.setNextMin(i))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var n=0,r=this.iterator();r.hasNext();){var i=r.next();i.isInResult()&&n++}return n}else if(arguments.length===1){for(var o=arguments[0],s=0,a=this.iterator();a.hasNext();){var u=a.next();u.getEdgeRing()===o&&s++}return s}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var n=S.NONE,r=this.iterator();r.hasNext();){var i=r.next(),o=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){n=S.INTERIOR;break}if(o.isInResult()){n=S.EXTERIOR;break}}}if(n===S.NONE)return null;for(var s=n,a=this.iterator();a.hasNext();){var u=a.next(),l=u.getSym();u.isLineEdge()?u.getEdge().setCovered(s===S.INTERIOR):(u.isInResult()&&(s=S.EXTERIOR),l.isInResult()&&(s=S.INTERIOR))}},t.prototype.computeLabelling=function(n){var r=this;e.prototype.computeLabelling.call(this,n),this._label=new pt(S.NONE);for(var i=this.iterator();i.hasNext();)for(var o=i.next(),s=o.getEdge(),a=s.getLabel(),u=0;u<2;u++){var l=a.getLocation(u);(l===S.INTERIOR||l===S.BOUNDARY)&&r._label.setLocation(u,S.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(be),Bg=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(n){return new su(n,new pE)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Oo),Qr=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};Qr.prototype.compareTo=function(e){var t=e,n=Qr.compareOriented(this._pts,this._orientation,t._pts,t._orientation);return n};Qr.prototype.interfaces_=function(){return[hn]};Qr.prototype.getClass=function(){return Qr};Qr.orientation=function(e){return et.increasingDirection(e)===1};Qr.compareOriented=function(e,t,n,r){for(var i=t?1:-1,o=r?1:-1,s=t?e.length:-1,a=r?n.length:-1,u=t?0:e.length-1,l=r?0:n.length-1;;){var c=e[u].compareTo(n[l]);if(c!==0)return c;u+=i,l+=o;var f=u===s,p=l===a;if(f&&!p)return-1;if(!f&&p)return 1;if(f&&p)return 0}};var Ln=function(){this._edges=new F,this._ocaMap=new _e};Ln.prototype.print=function(e){var t=this;e.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var r=t._edges.get(n);n>0&&e.print(","),e.print("(");for(var i=r.getCoordinates(),o=0;o<i.length;o++)o>0&&e.print(","),e.print(i[o].x+" "+i[o].y);e.println(")")}e.print(")  ")};Ln.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next())};Ln.prototype.findEdgeIndex=function(e){for(var t=this,n=0;n<this._edges.size();n++)if(t._edges.get(n).equals(e))return n;return-1};Ln.prototype.iterator=function(){return this._edges.iterator()};Ln.prototype.getEdges=function(){return this._edges};Ln.prototype.get=function(e){return this._edges.get(e)};Ln.prototype.findEqualEdge=function(e){var t=new Qr(e.getCoordinates()),n=this._ocaMap.get(t);return n};Ln.prototype.add=function(e){this._edges.add(e);var t=new Qr(e.getCoordinates());this._ocaMap.put(t,e)};Ln.prototype.interfaces_=function(){return[]};Ln.prototype.getClass=function(){return Ln};var vi=function(){};vi.prototype.processIntersections=function(e,t,n,r){};vi.prototype.isDone=function(){};vi.prototype.interfaces_=function(){return[]};vi.prototype.getClass=function(){return vi};var nn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};nn.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(nn.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};nn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};nn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};nn.prototype.getLineIntersector=function(){return this._li};nn.prototype.hasProperIntersection=function(){return this._hasProper};nn.prototype.processIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};nn.prototype.hasIntersection=function(){return this._hasIntersection};nn.prototype.isDone=function(){return!1};nn.prototype.hasInteriorIntersection=function(){return this._hasInterior};nn.prototype.interfaces_=function(){return[vi]};nn.prototype.getClass=function(){return nn};nn.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var Xn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new E(e),this.segmentIndex=t,this.dist=n};Xn.prototype.getSegmentIndex=function(){return this.segmentIndex};Xn.prototype.getCoordinate=function(){return this.coord};Xn.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)};Xn.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)};Xn.prototype.isEndPoint=function(e){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===e};Xn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};Xn.prototype.getDistance=function(){return this.dist};Xn.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0};Xn.prototype.interfaces_=function(){return[hn]};Xn.prototype.getClass=function(){return Xn};var fr=function(){this._nodeMap=new _e,this.edge=null;var e=arguments[0];this.edge=e};fr.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){var n=t.next();n.print(e)}};fr.prototype.iterator=function(){return this._nodeMap.values().iterator()};fr.prototype.addSplitEdges=function(e){var t=this;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=t.createSplitEdge(r,i);e.add(o),r=i}};fr.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)};fr.prototype.createSplitEdge=function(e,t){var n=this,r=t.segmentIndex-e.segmentIndex+2,i=this.edge.pts[t.segmentIndex],o=t.dist>0||!t.coord.equals2D(i);o||r--;var s=new Array(r).fill(null),a=0;s[a++]=new E(e.coord);for(var u=e.segmentIndex+1;u<=t.segmentIndex;u++)s[a++]=n.edge.pts[u];return o&&(s[a]=t.coord),new Ma(s,new pt(this.edge._label))};fr.prototype.add=function(e,t,n){var r=new Xn(e,t,n),i=this._nodeMap.get(r);return i!==null?i:(this._nodeMap.put(r,r),r)};fr.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){var n=t.next();if(n.coord.equals(e))return!0}return!1};fr.prototype.interfaces_=function(){return[]};fr.prototype.getClass=function(){return fr};var bi=function(){};bi.prototype.getChainStartIndices=function(e){var t=this,n=0,r=new F;r.add(new zn(n));do{var i=t.findChainEnd(e,n);r.add(new zn(i)),n=i}while(n<e.length-1);var o=bi.toIntArray(r);return o};bi.prototype.findChainEnd=function(e,t){for(var n=mt.quadrant(e[t],e[t+1]),r=t+1;r<e.length;){var i=mt.quadrant(e[r-1],e[r]);if(i!==n)break;r++}return r-1};bi.prototype.interfaces_=function(){return[]};bi.prototype.getClass=function(){return bi};bi.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t};var Rr=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new j,this.env2=new j;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new bi;this.startIndex=t.getChainStartIndices(this.pts)};Rr.prototype.getCoordinates=function(){return this.pts};Rr.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n};Rr.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n};Rr.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],r)}else if(arguments.length===6){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],f=this.pts[o],p=s.pts[a],g=s.pts[u];if(o-i===1&&u-a===1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,f),this.env2.init(p,g),!this.env1.intersects(this.env2))return null;var h=Math.trunc((i+o)/2),m=Math.trunc((a+u)/2);i<h&&(a<m&&this.computeIntersectsForChain(i,h,s,a,m,l),m<u&&this.computeIntersectsForChain(i,h,s,m,u,l)),h<o&&(a<m&&this.computeIntersectsForChain(h,o,s,a,m,l),m<u&&this.computeIntersectsForChain(h,o,s,m,u,l))}};Rr.prototype.getStartIndexes=function(){return this.startIndex};Rr.prototype.computeIntersects=function(e,t){for(var n=this,r=0;r<this.startIndex.length-1;r++)for(var i=0;i<e.startIndex.length-1;i++)n.computeIntersectsForChain(r,e,i,t)};Rr.prototype.interfaces_=function(){return[]};Rr.prototype.getClass=function(){return Rr};var le=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var r=0;r<3;r++)t._depth[n][r]=e.NULL_VALUE},zg={NULL_VALUE:{configurable:!0}};le.prototype.getDepth=function(e,t){return this._depth[e][t]};le.prototype.setDepth=function(e,t,n){this._depth[e][t]=n};le.prototype.isNull=function(){var e=this;if(arguments.length===0){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(e._depth[t][n]!==le.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var r=arguments[0];return this._depth[r][1]===le.NULL_VALUE}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._depth[i][o]===le.NULL_VALUE}};le.prototype.normalize=function(){for(var e=this,t=0;t<2;t++)if(!e.isNull(t)){var n=e._depth[t][1];e._depth[t][2]<n&&(n=e._depth[t][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;e._depth[t][r]>n&&(i=1),e._depth[t][r]=i}}};le.prototype.getDelta=function(e){return this._depth[e][D.RIGHT]-this._depth[e][D.LEFT]};le.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?S.EXTERIOR:S.INTERIOR};le.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};le.prototype.add=function(){var e=this;if(arguments.length===1)for(var t=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=t.getLocation(n,r);(i===S.EXTERIOR||i===S.INTERIOR)&&(e.isNull(n,r)?e._depth[n][r]=le.depthAtLocation(i):e._depth[n][r]+=le.depthAtLocation(i))}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];a===S.INTERIOR&&this._depth[o][s]++}};le.prototype.interfaces_=function(){return[]};le.prototype.getClass=function(){return le};le.depthAtLocation=function(e){return e===S.EXTERIOR?0:e===S.INTERIOR?1:le.NULL_VALUE};zg.NULL_VALUE.get=function(){return-1};Object.defineProperties(le,zg);var Ma=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new fr(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new le,this._depthDelta=0,arguments.length===1){var n=arguments[0];t.call(this,n,null)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);n[0]=this.pts[0],n[1]=this.pts[1];var r=new t(n,pt.toLineLabel(this._label));return r},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(n){this._isIsolated=n},t.prototype.setName=function(n){this._name=n},t.prototype.equals=function(n){var r=this;if(!(n instanceof t))return!1;var i=n;if(this.pts.length!==i.pts.length)return!1;for(var o=!0,s=!0,a=this.pts.length,u=0;u<this.pts.length;u++)if(r.pts[u].equals2D(i.pts[u])||(o=!1),r.pts[u].equals2D(i.pts[--a])||(s=!1),!o&&!s)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var n=arguments[0];return this.pts[n]}},t.prototype.print=function(n){var r=this;n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.print(","),n.print(r.pts[i].x+" "+r.pts[i].y);n.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(n){t.updateIM(this._label,n)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(n){var r=this;n.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)n.print(r.pts[i]+" ");n.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new Rr(this)),this._mce},t.prototype.getEnvelope=function(){var n=this;if(this._env===null){this._env=new j;for(var r=0;r<this.pts.length;r++)n._env.expandToInclude(n.pts[r])}return this._env},t.prototype.addIntersection=function(n,r,i,o){var s=new E(n.getIntersection(o)),a=r,u=n.getEdgeDistance(i,o),l=a+1;if(l<this.pts.length){var c=this.pts[l];s.equals2D(c)&&(a=l,u=0)}this.eiList.add(s,a,u)},t.prototype.toString=function(){var n=this,r=new Qn;r.append("edge "+this._name+": "),r.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&r.append(","),r.append(n.pts[i].x+" "+n.pts[i].y);return r.append(")  "+this._label+" "+this._depthDelta),r.toString()},t.prototype.isPointwiseEqual=function(n){var r=this;if(this.pts.length!==n.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!r.pts[i].equals2D(n.pts[i]))return!1;return!0},t.prototype.setDepthDelta=function(n){this._depthDelta=n},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(n,r,i){for(var o=this,s=0;s<n.getIntersectionNum();s++)o.addIntersection(n,r,i,s)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];r.setAtLeastIfValid(n.getLocation(0,D.ON),n.getLocation(1,D.ON),1),n.isArea()&&(r.setAtLeastIfValid(n.getLocation(0,D.LEFT),n.getLocation(1,D.LEFT),2),r.setAtLeastIfValid(n.getLocation(0,D.RIGHT),n.getLocation(1,D.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(tn),we=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Ln,this._bufParams=e||null};we.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e};we.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new pt(e.getLabel()),r.flip()),n.merge(r);var i=we.depthDelta(r),o=t.getDepthDelta(),s=o+i;t.setDepthDelta(s)}else this._edgeList.add(e),e.setDepthDelta(we.depthDelta(e.getLabel()))};we.prototype.buildSubgraphs=function(e,t){for(var n=new F,r=e.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new zi(n),a=s.getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}};we.prototype.createSubgraphs=function(e){for(var t=new F,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Oe;i.create(r),t.add(i)}}return In.sort(t,In.reverseOrder()),t};we.prototype.createEmptyResultGeometry=function(){var e=this._geomFact.createPolygon();return e};we.prototype.getNoder=function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new oc,n=new wi;return n.setPrecisionModel(e),t.setSegmentIntersector(new nn(n)),t};we.prototype.buffer=function(e,t){var n=this._workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new Fe(n,this._bufParams),i=new pn(e,t,r),o=i.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this._graph=new Ct(new Bg),this._graph.addEdges(this._edgeList.getEdges());var s=this.createSubgraphs(this._graph),a=new We(this._geomFact);this.buildSubgraphs(s,a);var u=a.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var l=this._geomFact.buildGeometry(u);return l};we.prototype.computeNodedEdges=function(e,t){var n=this,r=this.getNoder(t);r.computeNodes(e);for(var i=r.getNodedSubstrings(),o=i.iterator();o.hasNext();){var s=o.next(),a=s.getCoordinates();if(!(a.length===2&&a[0].equals2D(a[1]))){var u=s.getData(),l=new Ma(s.getCoordinates(),new pt(u));n.insertUniqueEdge(l)}}};we.prototype.setNoder=function(e){this._workingNoder=e};we.prototype.interfaces_=function(){return[]};we.prototype.getClass=function(){return we};we.depthDelta=function(e){var t=e.getLocation(0,D.LEFT),n=e.getLocation(0,D.RIGHT);return t===S.INTERIOR&&n===S.EXTERIOR?1:t===S.EXTERIOR&&n===S.INTERIOR?-1:0};we.convertSegStrings=function(e){for(var t=new tt,n=new F;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)};var $r=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};$r.prototype.rescale=function(){var e=this;if(H(arguments[0],Wt))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/e._scaleFactor+e._offsetX,i[o].y=i[o].y/e._scaleFactor+e._offsetY;i.length===2&&i[0].equals2D(i[1])&&ce.out.println(i)}};$r.prototype.scale=function(){var e=this;if(H(arguments[0],Wt)){for(var t=arguments[0],n=new F,r=t.iterator();r.hasNext();){var i=r.next();n.add(new Ft(e.scale(i.getCoordinates()),i.getData()))}return n}else if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new E(Math.round((o[a].x-e._offsetX)*e._scaleFactor),Math.round((o[a].y-e._offsetY)*e._scaleFactor),o[a].z);var u=et.removeRepeatedPoints(s);return u}};$r.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};$r.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e};$r.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)};$r.prototype.interfaces_=function(){return[yi]};$r.prototype.getClass=function(){return $r};var Yn=function(){this._li=new wi,this._segStrings=null;var e=arguments[0];this._segStrings=e},Ug={fact:{configurable:!0}};Yn.prototype.checkEndPtVertexIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next(),r=n.getCoordinates();e.checkEndPtVertexIntersections(r[0],e._segStrings),e.checkEndPtVertexIntersections(r[r.length-1],e._segStrings)}else if(arguments.length===2){for(var i=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new Cr("found endpt/interior pt intersection at index "+l+" :pt "+i)}};Yn.prototype.checkInteriorIntersections=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var n=t.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();e.checkInteriorIntersections(n,i)}else if(arguments.length===2)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<u.length-1;c++)e.checkInteriorIntersections(o,l,s,c);else if(arguments.length===4){var f=arguments[0],p=arguments[1],g=arguments[2],h=arguments[3];if(f===g&&p===h)return null;var m=f.getCoordinates()[p],d=f.getCoordinates()[p+1],y=g.getCoordinates()[h],v=g.getCoordinates()[h+1];if(this._li.computeIntersection(m,d,y,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,m,d)||this.hasInteriorIntersection(this._li,y,v)))throw new Cr("found non-noded intersection at "+m+"-"+d+" and "+y+"-"+v)}};Yn.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};Yn.prototype.checkCollapses=function(){var e=this;if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var n=t.next();e.checkCollapses(n)}else if(arguments.length===1)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)e.checkCollapse(i[o],i[o+1],i[o+2])};Yn.prototype.hasInteriorIntersection=function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!(i.equals(t)||i.equals(n)))return!0}return!1};Yn.prototype.checkCollapse=function(e,t,n){if(e.equals(n))throw new Cr("found non-noded collapse at "+Yn.fact.createLineString([e,t,n]))};Yn.prototype.interfaces_=function(){return[]};Yn.prototype.getClass=function(){return Yn};Ug.fact.get=function(){return new tt};Object.defineProperties(Yn,Ug);var ke=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new xt("Scale factor must be non-zero");t!==1&&(this._pt=new E(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new E,this._p1Scaled=new E),this.initCorners(this._pt)},qg={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ke.prototype.intersectsScaled=function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(e,t);return Q.isTrue(!(s&&a),"Found bad envelope test"),a};ke.prototype.initCorners=function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new E(this._maxx,this._maxy),this._corner[1]=new E(this._minx,this._maxy),this._corner[2]=new E(this._minx,this._miny),this._corner[3]=new E(this._maxx,this._miny)};ke.prototype.intersects=function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};ke.prototype.scale=function(e){return Math.round(e*this._scaleFactor)};ke.prototype.getCoordinate=function(){return this._originalPt};ke.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)};ke.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var e=ke.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new j(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv};ke.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))};ke.prototype.intersectsToleranceSquare=function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper())||n&&r||e.equals(this._pt)||t.equals(this._pt))};ke.prototype.addSnappedNode=function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return this.intersects(n,r)?(e.addIntersection(this.getCoordinate(),t),!0):!1};ke.prototype.interfaces_=function(){return[]};ke.prototype.getClass=function(){return ke};qg.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(ke,qg);var ws=function(){this.tempEnv1=new j,this.selectedSegment=new W};ws.prototype.select=function(){if(arguments.length!==1&&arguments.length===2){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}};ws.prototype.interfaces_=function(){return[]};ws.prototype.getClass=function(){return ws};var Mo=function(){this._index=null;var e=arguments[0];this._index=e},Vg={HotPixelSnapAction:{configurable:!0}};Mo.prototype.snap=function(){if(arguments.length===1){var e=arguments[0];return this.snap(e,null,-1)}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getSafeEnvelope(),o=new jg(t,n,r);return this._index.query(i,{interfaces_:function(){return[Kr]},visitItem:function(s){var a=s;a.select(i,o)}}),o.isNodeAdded()}};Mo.prototype.interfaces_=function(){return[]};Mo.prototype.getClass=function(){return Mo};Vg.HotPixelSnapAction.get=function(){return jg};Object.defineProperties(Mo,Vg);var jg=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=n,this._parentEdge=r,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1],i=n.getContext();if(this._parentEdge!==null&&i===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,r)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ws),Ui=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new F};Ui.prototype.processIntersections=function(e,t,n,r){var i=this;if(e===n&&t===r)return null;var o=e.getCoordinates()[t],s=e.getCoordinates()[t+1],a=n.getCoordinates()[r],u=n.getCoordinates()[r+1];if(this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)i._interiorIntersections.add(i._li.getIntersection(l));e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)}};Ui.prototype.isDone=function(){return!1};Ui.prototype.getInteriorIntersections=function(){return this._interiorIntersections};Ui.prototype.interfaces_=function(){return[vi]};Ui.prototype.getClass=function(){return Ui};var pr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new wi,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};pr.prototype.checkCorrectness=function(e){var t=Ft.getNodedSubstrings(e),n=new Yn(t);try{n.checkValid()}catch(r){if(r instanceof wg)r.printStackTrace();else throw r}finally{}};pr.prototype.getNodedSubstrings=function(){return Ft.getNodedSubstrings(this._nodedSegStrings)};pr.prototype.snapRound=function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)};pr.prototype.findInteriorIntersections=function(e,t){var n=new Ui(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()};pr.prototype.computeVertexSnaps=function(){var e=this;if(H(arguments[0],Wt))for(var t=arguments[0],n=t.iterator();n.hasNext();){var r=n.next();e.computeVertexSnaps(r)}else if(arguments[0]instanceof Ft)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new ke(o[s],e._scaleFactor,e._li),u=e._pointSnapper.snap(a,i,s);u&&i.addIntersection(o[s],s)}};pr.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new oc,this._pointSnapper=new Mo(this._noder.getIndex()),this.snapRound(e,this._li)};pr.prototype.computeIntersectionSnaps=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=new ke(r,t._scaleFactor,t._li);t._pointSnapper.snap(i)}};pr.prototype.interfaces_=function(){return[yi]};pr.prototype.getClass=function(){return pr};var ue=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new at,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}},Ko={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};ue.prototype.bufferFixedPrecision=function(e){var t=new $r(new pr(new ut(1)),e.getScale()),n=new we(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)};ue.prototype.bufferReducedPrecision=function(){var e=this;if(arguments.length===0){for(var t=ue.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(o){if(o instanceof Pr)e._saveException=o;else throw o}finally{}if(e._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var n=arguments[0],r=ue.precisionScaleFactor(this._argGeom,this._distance,n),i=new ut(r);this.bufferFixedPrecision(i)}};ue.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===ut.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()};ue.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)};ue.prototype.bufferOriginalPrecision=function(){try{var e=new we(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(t instanceof Cr)this._saveException=t;else throw t}finally{}};ue.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry};ue.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)};ue.prototype.interfaces_=function(){return[]};ue.prototype.getClass=function(){return ue};ue.bufferOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new ue(e),r=n.getResultGeometry(t);return r}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Y&&typeof arguments[1]=="number"){var i=arguments[0],o=arguments[1],s=arguments[2],a=new ue(i);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}else if(arguments[2]instanceof at&&arguments[0]instanceof Y&&typeof arguments[1]=="number"){var l=arguments[0],c=arguments[1],f=arguments[2],p=new ue(l,f),g=p.getResultGeometry(c);return g}}else if(arguments.length===4){var h=arguments[0],m=arguments[1],d=arguments[2],y=arguments[3],v=new ue(h);v.setQuadrantSegments(d),v.setEndCapStyle(y);var b=v.getResultGeometry(m);return b}};ue.precisionScaleFactor=function(e,t,n){var r=e.getEnvelopeInternal(),i=$e.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),o=t>0?t:0,s=i+2*o,a=Math.trunc(Math.log(s)/Math.log(10)+1),u=n-a,l=Math.pow(10,u);return l};Ko.CAP_ROUND.get=function(){return at.CAP_ROUND};Ko.CAP_BUTT.get=function(){return at.CAP_FLAT};Ko.CAP_FLAT.get=function(){return at.CAP_FLAT};Ko.CAP_SQUARE.get=function(){return at.CAP_SQUARE};Ko.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(ue,Ko);var Le=function(){this._pt=[new E,new E],this._distance=K.NaN,this._isNull=!0};Le.prototype.getCoordinates=function(){return this._pt};Le.prototype.getCoordinate=function(e){return this._pt[e]};Le.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};Le.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};Le.prototype.getDistance=function(){return this._distance};Le.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};Le.prototype.interfaces_=function(){return[]};Le.prototype.getClass=function(){return Le};var nr=function(){};nr.prototype.interfaces_=function(){return[]};nr.prototype.getClass=function(){return nr};nr.computeDistance=function(){if(arguments[2]instanceof Le&&arguments[0]instanceof Tt&&arguments[1]instanceof E)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=e.getCoordinates(),i=new W,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(t);n.setMinimum(s,t)}else if(arguments[2]instanceof Le&&arguments[0]instanceof Zt&&arguments[1]instanceof E){var a=arguments[0],u=arguments[1],l=arguments[2];nr.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)nr.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Le&&arguments[0]instanceof Y&&arguments[1]instanceof E){var f=arguments[0],p=arguments[1],g=arguments[2];if(f instanceof Tt)nr.computeDistance(f,p,g);else if(f instanceof Zt)nr.computeDistance(f,p,g);else if(f instanceof Ce)for(var h=f,m=0;m<h.getNumGeometries();m++){var d=h.getGeometryN(m);nr.computeDistance(d,p,g)}else g.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof Le&&arguments[0]instanceof W&&arguments[1]instanceof E){var y=arguments[0],v=arguments[1],b=arguments[2],I=y.closestPoint(v);b.setMinimum(I,v)}};var Ei=function(e){this._maxPtDist=new Le,this._inputGeom=e||null},sc={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ei.prototype.computeMaxMidpointDistance=function(e){var t=new ti(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Ei.prototype.computeMaxVertexDistance=function(e){var t=new qi(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())};Ei.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()};Ei.prototype.getDistancePoints=function(){return this._maxPtDist};Ei.prototype.interfaces_=function(){return[]};Ei.prototype.getClass=function(){return Ei};sc.MaxPointDistanceFilter.get=function(){return qi};sc.MaxMidpointDistanceFilter.get=function(){return ti};Object.defineProperties(Ei,sc);var qi=function(e){this._maxPtDist=new Le,this._minPtDist=new Le,this._geom=e||null};qi.prototype.filter=function(e){this._minPtDist.initialize(),nr.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};qi.prototype.getMaxPointDistance=function(){return this._maxPtDist};qi.prototype.interfaces_=function(){return[ar]};qi.prototype.getClass=function(){return qi};var ti=function(e){this._maxPtDist=new Le,this._minPtDist=new Le,this._geom=e||null};ti.prototype.filter=function(e,t){if(t===0)return null;var n=e.getCoordinate(t-1),r=e.getCoordinate(t),i=new E((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),nr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};ti.prototype.isDone=function(){return!1};ti.prototype.isGeometryChanged=function(){return!1};ti.prototype.getMaxPointDistance=function(){return this._maxPtDist};ti.prototype.interfaces_=function(){return[En]};ti.prototype.getClass=function(){return ti};var xr=function(e){this._comps=e||null};xr.prototype.filter=function(e){e instanceof Zt&&this._comps.add(e)};xr.prototype.interfaces_=function(){return[qn]};xr.prototype.getClass=function(){return xr};xr.getPolygons=function(){if(arguments.length===1){var e=arguments[0];return xr.getPolygons(e,new F)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof Zt?n.add(t):t instanceof Ce&&t.apply(new xr(n)),n}};var ae=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var e=arguments[0];this._lines=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._lines=t,this._isForcedToLineString=n}};ae.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof ur){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof Tt&&this._lines.add(e)};ae.prototype.setForceToLineString=function(e){this._isForcedToLineString=e};ae.prototype.interfaces_=function(){return[Or]};ae.prototype.getClass=function(){return ae};ae.getGeometry=function(){if(arguments.length===1){var e=arguments[0];return e.getFactory().buildGeometry(ae.getLines(e))}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t.getFactory().buildGeometry(ae.getLines(t,n))}};ae.getLines=function(){if(arguments.length===1){var e=arguments[0];return ae.getLines(e,!1)}else if(arguments.length===2){if(H(arguments[0],Wt)&&H(arguments[1],Wt)){for(var t=arguments[0],n=arguments[1],r=t.iterator();r.hasNext();){var i=r.next();ae.getLines(i,n)}return n}else if(arguments[0]instanceof Y&&typeof arguments[1]=="boolean"){var o=arguments[0],s=arguments[1],a=new F;return o.apply(new ae(a,s)),a}else if(arguments[0]instanceof Y&&H(arguments[1],Wt)){var u=arguments[0],l=arguments[1];return u instanceof Tt?l.add(u):u.apply(new ae(l)),l}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&H(arguments[0],Wt)&&H(arguments[1],Wt)){for(var c=arguments[0],f=arguments[1],p=arguments[2],g=c.iterator();g.hasNext();){var h=g.next();ae.getLines(h,f,p)}return f}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Y&&H(arguments[1],Wt)){var m=arguments[0],d=arguments[1],y=arguments[2];return m.apply(new ae(d,y)),d}}};var Nn=function(){if(this._boundaryRule=cn.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0&&arguments.length===1){var e=arguments[0];if(e===null)throw new xt("Rule must be non-null");this._boundaryRule=e}};Nn.prototype.locateInternal=function(){var e=this;if(arguments[0]instanceof E&&arguments[1]instanceof Zt){var t=arguments[0],n=arguments[1];if(n.isEmpty())return S.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(t,r);if(i===S.EXTERIOR)return S.EXTERIOR;if(i===S.BOUNDARY)return S.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=e.locateInPolygonRing(t,s);if(a===S.INTERIOR)return S.EXTERIOR;if(a===S.BOUNDARY)return S.BOUNDARY}return S.INTERIOR}else if(arguments[0]instanceof E&&arguments[1]instanceof Tt){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return S.EXTERIOR;var c=l.getCoordinates();return!l.isClosed()&&(u.equals(c[0])||u.equals(c[c.length-1]))?S.BOUNDARY:G.isOnLine(u,c)?S.INTERIOR:S.EXTERIOR}else if(arguments[0]instanceof E&&arguments[1]instanceof je){var f=arguments[0],p=arguments[1],g=p.getCoordinate();return g.equals2D(f)?S.INTERIOR:S.EXTERIOR}};Nn.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?G.locatePointInRing(e,t.getCoordinates()):S.EXTERIOR};Nn.prototype.intersects=function(e,t){return this.locate(e,t)!==S.EXTERIOR};Nn.prototype.updateLocationInfo=function(e){e===S.INTERIOR&&(this._isIn=!0),e===S.BOUNDARY&&this._numBoundaries++};Nn.prototype.computeLocation=function(e,t){var n=this;if(t instanceof je&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof Tt)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Zt)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof mi)for(var r=t,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(e,o))}else if(t instanceof or)for(var s=t,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(e,u))}else if(t instanceof Ce)for(var l=new sr(t);l.hasNext();){var c=l.next();c!==t&&n.computeLocation(e,c)}};Nn.prototype.locate=function(e,t){return t.isEmpty()?S.EXTERIOR:t instanceof Tt?this.locateInternal(e,t):t instanceof Zt?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?S.BOUNDARY:this._numBoundaries>0||this._isIn?S.INTERIOR:S.EXTERIOR)};Nn.prototype.interfaces_=function(){return[]};Nn.prototype.getClass=function(){return Nn};var Ne=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],n=arguments[1];e.call(this,t,e.INSIDE_AREA,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Wg={INSIDE_AREA:{configurable:!0}};Ne.prototype.isInsideArea=function(){return this._segIndex===Ne.INSIDE_AREA};Ne.prototype.getCoordinate=function(){return this._pt};Ne.prototype.getGeometryComponent=function(){return this._component};Ne.prototype.getSegmentIndex=function(){return this._segIndex};Ne.prototype.interfaces_=function(){return[]};Ne.prototype.getClass=function(){return Ne};Wg.INSIDE_AREA.get=function(){return-1};Object.defineProperties(Ne,Wg);var Xr=function(e){this._pts=e||null};Xr.prototype.filter=function(e){e instanceof je&&this._pts.add(e)};Xr.prototype.interfaces_=function(){return[qn]};Xr.prototype.getClass=function(){return Xr};Xr.getPoints=function(){if(arguments.length===1){var e=arguments[0];return e instanceof je?In.singletonList(e):Xr.getPoints(e,new F)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];return t instanceof je?n.add(t):t instanceof Ce&&t.apply(new Xr(n)),n}};var Vi=function(){this._locations=null;var e=arguments[0];this._locations=e};Vi.prototype.filter=function(e){(e instanceof je||e instanceof Tt||e instanceof Zt)&&this._locations.add(new Ne(e,0,e.getCoordinate()))};Vi.prototype.interfaces_=function(){return[qn]};Vi.prototype.getClass=function(){return Vi};Vi.getLocations=function(e){var t=new F;return e.apply(new Vi(t)),t};var fe=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Nn,this._minDistanceLocation=null,this._minDistance=K.MAX_VALUE,arguments.length===2){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};fe.prototype.computeContainmentDistance=function(){var e=this;if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=1-n,o=xr.getPolygons(this._geom[n]);if(o.size()>0){var s=Vi.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&H(arguments[0],vn)&&H(arguments[1],vn)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var f=a.get(c),p=0;p<u.size();p++)if(e.computeContainmentDistance(f,u.get(p),l),e._minDistance<=e._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ne&&arguments[1]instanceof Zt){var g=arguments[0],h=arguments[1],m=arguments[2],d=g.getCoordinate();if(S.EXTERIOR!==this._ptLocator.locate(d,h))return this._minDistance=0,m[0]=g,m[1]=new Ne(h,d),null}}};fe.prototype.computeMinDistanceLinesPoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),s=0;s<t.size();s++){var a=t.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}};fe.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=ae.getLines(this._geom[0]),n=ae.getLines(this._geom[1]),r=Xr.getPoints(this._geom[0]),i=Xr.getPoints(this._geom[1]);if(this.computeMinDistanceLines(t,n,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance)||(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,r,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance))return null;e[0]=null,e[1]=null,this.computeMinDistancePoints(r,i,e),this.updateMinDistance(e,!1)};fe.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};fe.prototype.updateMinDistance=function(e,t){if(e[0]===null)return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])};fe.prototype.nearestPoints=function(){this.computeMinDistance();var e=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return e};fe.prototype.computeMinDistance=function(){var e=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof Tt&&arguments[1]instanceof je){var t=arguments[0],n=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=G.distancePointLine(o,i[s],i[s+1]);if(a<e._minDistance){e._minDistance=a;var u=new W(i[s],i[s+1]),l=u.closestPoint(o);r[0]=new Ne(t,s,l),r[1]=new Ne(n,0,o)}if(e._minDistance<=e._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Tt&&arguments[1]instanceof Tt){var c=arguments[0],f=arguments[1],p=arguments[2];if(c.getEnvelopeInternal().distance(f.getEnvelopeInternal())>this._minDistance)return null;for(var g=c.getCoordinates(),h=f.getCoordinates(),m=0;m<g.length-1;m++)for(var d=0;d<h.length-1;d++){var y=G.distanceLineLine(g[m],g[m+1],h[d],h[d+1]);if(y<e._minDistance){e._minDistance=y;var v=new W(g[m],g[m+1]),b=new W(h[d],h[d+1]),I=v.closestPoints(b);p[0]=new Ne(c,m,I[0]),p[1]=new Ne(f,d,I[1])}if(e._minDistance<=e._terminateDistance)return null}}}};fe.prototype.computeMinDistancePoints=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),s=0;s<t.size();s++){var a=t.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new Ne(o,0,o.getCoordinate()),n[1]=new Ne(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}};fe.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new xt("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};fe.prototype.computeMinDistanceLines=function(e,t,n){for(var r=this,i=0;i<e.size();i++)for(var o=e.get(i),s=0;s<t.size();s++){var a=t.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}};fe.prototype.interfaces_=function(){return[]};fe.prototype.getClass=function(){return fe};fe.distance=function(e,t){var n=new fe(e,t);return n.distance()};fe.isWithinDistance=function(e,t,n){var r=new fe(e,t,n);return r.distance()<=n};fe.nearestPoints=function(e,t){var n=new fe(e,t);return n.nearestPoints()};var ye=function(){this._pt=[new E,new E],this._distance=K.NaN,this._isNull=!0};ye.prototype.getCoordinates=function(){return this._pt};ye.prototype.getCoordinate=function(e){return this._pt[e]};ye.prototype.setMinimum=function(){if(arguments.length===1){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r<this._distance&&this.initialize(t,n,r)}};ye.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}};ye.prototype.toString=function(){return bn.toLineString(this._pt[0],this._pt[1])};ye.prototype.getDistance=function(){return this._distance};ye.prototype.setMaximum=function(){if(arguments.length===1){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(t,n),null;var r=t.distance(n);r>this._distance&&this.initialize(t,n,r)}};ye.prototype.interfaces_=function(){return[]};ye.prototype.getClass=function(){return ye};var Dn=function(){};Dn.prototype.interfaces_=function(){return[]};Dn.prototype.getClass=function(){return Dn};Dn.computeDistance=function(){if(arguments[2]instanceof ye&&arguments[0]instanceof Tt&&arguments[1]instanceof E)for(var e=arguments[0],t=arguments[1],n=arguments[2],r=new W,i=e.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(t);n.setMinimum(s,t)}else if(arguments[2]instanceof ye&&arguments[0]instanceof Zt&&arguments[1]instanceof E){var a=arguments[0],u=arguments[1],l=arguments[2];Dn.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Dn.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof ye&&arguments[0]instanceof Y&&arguments[1]instanceof E){var f=arguments[0],p=arguments[1],g=arguments[2];if(f instanceof Tt)Dn.computeDistance(f,p,g);else if(f instanceof Zt)Dn.computeDistance(f,p,g);else if(f instanceof Ce)for(var h=f,m=0;m<h.getNumGeometries();m++){var d=h.getGeometryN(m);Dn.computeDistance(d,p,g)}else g.setMinimum(f.getCoordinate(),p)}else if(arguments[2]instanceof ye&&arguments[0]instanceof W&&arguments[1]instanceof E){var y=arguments[0],v=arguments[1],b=arguments[2],I=y.closestPoint(v);b.setMinimum(I,v)}};var un=function(){this._g0=null,this._g1=null,this._ptDist=new ye,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},ac={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};un.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};un.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new xt("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e};un.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)};un.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};un.prototype.computeOrientedDistance=function(e,t,n){var r=new ji(t);if(e.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new ei(t,this._densifyFrac);e.apply(i),n.setMaximum(i.getMaxPointDistance())}};un.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};un.prototype.interfaces_=function(){return[]};un.prototype.getClass=function(){return un};un.distance=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new un(e,t);return n.distance()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=new un(r,i);return s.setDensifyFraction(o),s.distance()}};ac.MaxPointDistanceFilter.get=function(){return ji};ac.MaxDensifiedByFractionDistanceFilter.get=function(){return ei};Object.defineProperties(un,ac);var ji=function(){this._maxPtDist=new ye,this._minPtDist=new ye,this._euclideanDist=new Dn,this._geom=null;var e=arguments[0];this._geom=e};ji.prototype.filter=function(e){this._minPtDist.initialize(),Dn.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};ji.prototype.getMaxPointDistance=function(){return this._maxPtDist};ji.prototype.interfaces_=function(){return[ar]};ji.prototype.getClass=function(){return ji};var ei=function(){this._maxPtDist=new ye,this._minPtDist=new ye,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};ei.prototype.filter=function(e,t){var n=this;if(t===0)return null;for(var r=e.getCoordinate(t-1),i=e.getCoordinate(t),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=r.x+a*o,l=r.y+a*s,c=new E(u,l);n._minPtDist.initialize(),Dn.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}};ei.prototype.isDone=function(){return!1};ei.prototype.isGeometryChanged=function(){return!1};ei.prototype.getMaxPointDistance=function(){return this._maxPtDist};ei.prototype.interfaces_=function(){return[En]};ei.prototype.getClass=function(){return ei};var qe=function(e,t,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=n||null},uc={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};qe.prototype.checkMaximumDistance=function(e,t,n){var r=new un(t,e);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+bn.toLineString(i[0],i[1])+")"}};qe.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=qe.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),qe.VERBOSE&&ce.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};qe.prototype.checkNegativeValid=function(){if(!(this._input instanceof Zt||this._input instanceof or||this._input instanceof Ce))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)};qe.prototype.getErrorIndicator=function(){return this._errorIndicator};qe.prototype.checkMinimumDistance=function(e,t,n){var r=new fe(e,t,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+bn.toLineString(i[0],i[1])+" )"}};qe.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)};qe.prototype.getErrorLocation=function(){return this._errorLocation};qe.prototype.getPolygonLines=function(e){for(var t=new F,n=new ae(t),r=xr.getPolygons(e),i=r.iterator();i.hasNext();){var o=i.next();o.apply(n)}return e.getFactory().buildGeometry(t)};qe.prototype.getErrorMessage=function(){return this._errMsg};qe.prototype.interfaces_=function(){return[]};qe.prototype.getClass=function(){return qe};uc.VERBOSE.get=function(){return!1};uc.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(qe,uc);var pe=function(e,t,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=n||null},lc={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};pe.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};pe.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*pe.MAX_ENV_DIFF_FRAC;e===0&&(e=.001);var t=new j(this._input.getEnvelopeInternal());t.expandBy(this._distance);var n=new j(this._result.getEnvelopeInternal());n.expandBy(e),n.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")};pe.prototype.checkDistance=function(){var e=new qe(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")};pe.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};pe.prototype.checkPolygonal=function(){this._result instanceof Zt||this._result instanceof or||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};pe.prototype.getErrorIndicator=function(){return this._errorIndicator};pe.prototype.getErrorLocation=function(){return this._errorLocation};pe.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};pe.prototype.report=function(e){if(!pe.VERBOSE)return null;ce.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))};pe.prototype.getErrorMessage=function(){return this._errorMsg};pe.prototype.interfaces_=function(){return[]};pe.prototype.getClass=function(){return pe};pe.isValidMsg=function(e,t,n){var r=new pe(e,t,n);return r.isValid()?null:r.getErrorMessage()};pe.isValid=function(e,t,n){var r=new pe(e,t,n);return!!r.isValid()};lc.VERBOSE.get=function(){return!1};lc.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(pe,lc);var Hn=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Hn.prototype.getCoordinates=function(){return this._pts};Hn.prototype.size=function(){return this._pts.length};Hn.prototype.getCoordinate=function(e){return this._pts[e]};Hn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Hn.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:Bi.octant(this.getCoordinate(e),this.getCoordinate(e+1))};Hn.prototype.setData=function(e){this._data=e};Hn.prototype.getData=function(){return this._data};Hn.prototype.toString=function(){return bn.toLineString(new Mt(this._pts))};Hn.prototype.interfaces_=function(){return[cr]};Hn.prototype.getClass=function(){return Hn};var ie=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new F,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};ie.prototype.getInteriorIntersection=function(){return this._interiorIntersection};ie.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e};ie.prototype.getIntersectionSegments=function(){return this._intSegments};ie.prototype.count=function(){return this._intersectionCount};ie.prototype.getIntersections=function(){return this._intersections};ie.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};ie.prototype.setKeepIntersections=function(e){this._keepIntersections=e};ie.prototype.processIntersections=function(e,t,n,r){if(!this._findAllIntersections&&this.hasIntersection()||e===n&&t===r)return null;if(this._isCheckEndSegmentsOnly){var i=this.isEndSegment(e,t)||this.isEndSegment(n,r);if(!i)return null}var o=e.getCoordinates()[t],s=e.getCoordinates()[t+1],a=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=o,this._intSegments[1]=s,this._intSegments[2]=a,this._intSegments[3]=u,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};ie.prototype.isEndSegment=function(e,t){return t===0||t>=e.size()-2};ie.prototype.hasIntersection=function(){return this._interiorIntersection!==null};ie.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};ie.prototype.interfaces_=function(){return[vi]};ie.prototype.getClass=function(){return ie};ie.createAllIntersectionsFinder=function(e){var t=new ie(e);return t.setFindAllIntersections(!0),t};ie.createAnyIntersectionFinder=function(e){return new ie(e)};ie.createIntersectionCounter=function(e){var t=new ie(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var xn=function(){this._li=new wi,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};xn.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};xn.prototype.getIntersections=function(){return this._segInt.getIntersections()};xn.prototype.isValid=function(){return this.execute(),this._isValid};xn.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e};xn.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new ie(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new oc;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};xn.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Pr(this.getErrorMessage(),this._segInt.getInteriorIntersection())};xn.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+bn.toLineString(e[0],e[1])+" and "+bn.toLineString(e[2],e[3])};xn.prototype.interfaces_=function(){return[]};xn.prototype.getClass=function(){return xn};xn.computeIntersections=function(e){var t=new xn(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var Si=function e(){this._nv=null;var t=arguments[0];this._nv=new xn(e.toSegmentStrings(t))};Si.prototype.checkValid=function(){this._nv.checkValid()};Si.prototype.interfaces_=function(){return[]};Si.prototype.getClass=function(){return Si};Si.toSegmentStrings=function(e){for(var t=new F,n=e.iterator();n.hasNext();){var r=n.next();t.add(new Hn(r.getCoordinates(),r))}return t};Si.checkValid=function(e){var t=new Si(e);t.checkValid()};var Wi=function(e){this._mapOp=e};Wi.prototype.map=function(e){for(var t=this,n=new F,r=0;r<e.getNumGeometries();r++){var i=t._mapOp.map(e.getGeometryN(r));i.isEmpty()||n.add(i)}return e.getFactory().createGeometryCollection(tt.toGeometryArray(n))};Wi.prototype.interfaces_=function(){return[]};Wi.prototype.getClass=function(){return Wi};Wi.map=function(e,t){var n=new Wi(t);return n.map(e)};var Zn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new F,this._resultLineList=new F;var e=arguments[0],t=arguments[1],n=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=n};Zn.prototype.collectLines=function(e){for(var t=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();t.collectLineEdge(r,e,t._lineEdgesList),t.collectBoundaryTouchEdge(r,e,t._lineEdgesList)}};Zn.prototype.labelIsolatedLine=function(e,t){var n=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,n)};Zn.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList};Zn.prototype.collectLineEdge=function(e,t,n){var r=e.getLabel(),i=e.getEdge();e.isLineEdge()&&!e.isVisited()&&J.isResultOfOp(r,t)&&!i.isCovered()&&(n.add(i),e.setVisitedEdge(!0))};Zn.prototype.findCoveredLineEdges=function(){for(var e=this,t=this._op.getGraph().getNodes().iterator();t.hasNext();){var n=t.next();n.getEdges().findCoveredLineEdges()}for(var r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getEdge();if(i.isLineEdge()&&!o.isCoveredSet()){var s=e._op.isCoveredByA(i.getCoordinate());o.setCovered(s)}}};Zn.prototype.labelIsolatedLines=function(e){for(var t=this,n=e.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();r.isIsolated()&&(i.isNull(0)?t.labelIsolatedLine(r,0):t.labelIsolatedLine(r,1))}};Zn.prototype.buildLines=function(e){for(var t=this,n=this._lineEdgesList.iterator();n.hasNext();){var r=n.next(),i=t._geometryFactory.createLineString(r.getCoordinates());t._resultLineList.add(i),r.setInResult(!0)}};Zn.prototype.collectBoundaryTouchEdge=function(e,t,n){var r=e.getLabel();if(e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult())return null;Q.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),J.isResultOfOp(r,t)&&t===J.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0))};Zn.prototype.interfaces_=function(){return[]};Zn.prototype.getClass=function(){return Zn};var Xi=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new F;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};Xi.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var n=this._geometryFactory.createPoint(t);this._resultPointList.add(n)}};Xi.prototype.extractNonCoveredResultNodes=function(e){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isInResult()&&!r.isIncidentEdgeInResult()&&(r.getEdges().getDegree()===0||e===J.INTERSECTION)){var i=r.getLabel();J.isResultOfOp(i,e)&&t.filterCoveredNodeToPoint(r)}}};Xi.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList};Xi.prototype.interfaces_=function(){return[]};Xi.prototype.getClass=function(){return Xi};var Ge=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Ge.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))};Ge.prototype.transformPolygon=function(e,t){var n=this,r=!0,i=this.transformLinearRing(e.getExteriorRing(),e);(i===null||!(i instanceof ur)||i.isEmpty())&&(r=!1);for(var o=new F,s=0;s<e.getNumInteriorRing();s++){var a=n.transformLinearRing(e.getInteriorRingN(s),e);a===null||a.isEmpty()||(a instanceof ur||(r=!1),o.add(a))}if(r)return this._factory.createPolygon(i,o.toArray([]));var u=new F;return i!==null&&u.add(i),u.addAll(o),this._factory.buildGeometry(u)};Ge.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)};Ge.prototype.getInputGeometry=function(){return this._inputGeom};Ge.prototype.transformMultiLineString=function(e,t){for(var n=this,r=new F,i=0;i<e.getNumGeometries();i++){var o=n.transformLineString(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Ge.prototype.transformCoordinates=function(e,t){return this.copy(e)};Ge.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))};Ge.prototype.transformMultiPoint=function(e,t){for(var n=this,r=new F,i=0;i<e.getNumGeometries();i++){var o=n.transformPoint(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Ge.prototype.transformMultiPolygon=function(e,t){for(var n=this,r=new F,i=0;i<e.getNumGeometries();i++){var o=n.transformPolygon(e.getGeometryN(i),e);o!==null&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)};Ge.prototype.copy=function(e){return e.copy()};Ge.prototype.transformGeometryCollection=function(e,t){for(var n=this,r=new F,i=0;i<e.getNumGeometries();i++){var o=n.transform(e.getGeometryN(i));o!==null&&(n._pruneEmptyGeometry&&o.isEmpty()||r.add(o))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(tt.toGeometryArray(r)):this._factory.buildGeometry(r)};Ge.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof je)return this.transformPoint(e,null);if(e instanceof Co)return this.transformMultiPoint(e,null);if(e instanceof ur)return this.transformLinearRing(e,null);if(e instanceof Tt)return this.transformLineString(e,null);if(e instanceof mi)return this.transformMultiLineString(e,null);if(e instanceof Zt)return this.transformPolygon(e,null);if(e instanceof or)return this.transformMultiPolygon(e,null);if(e instanceof Ce)return this.transformGeometryCollection(e,null);throw new xt("Unknown Geometry subtype: "+e.getClass().getName())};Ge.prototype.transformLinearRing=function(e,t){var n=this.transformCoordinates(e.getCoordinateSequence(),e);if(n===null)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)};Ge.prototype.interfaces_=function(){return[]};Ge.prototype.getClass=function(){return Ge};var hr=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new W,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Tt&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];e.call(this,t.getCoordinates(),n)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=e.isClosed(r),this._snapTolerance=i}};hr.prototype.snapVertices=function(e,t){for(var n=this,r=this._isClosed?e.size()-1:e.size(),i=0;i<r;i++){var o=e.get(i),s=n.findSnapForVertex(o,t);s!==null&&(e.set(i,new E(s)),i===0&&n._isClosed&&e.set(e.size()-1,new E(s)))}};hr.prototype.findSnapForVertex=function(e,t){for(var n=this,r=0;r<t.length;r++){if(e.equals2D(t[r]))return null;if(e.distance(t[r])<n._snapTolerance)return t[r]}return null};hr.prototype.snapTo=function(e){var t=new Ds(this._srcPts);this.snapVertices(t,e),this.snapSegments(t,e);var n=t.toCoordinateArray();return n};hr.prototype.snapSegments=function(e,t){var n=this;if(t.length===0)return null;var r=t.length;t[0].equals2D(t[t.length-1])&&(r=t.length-1);for(var i=0;i<r;i++){var o=t[i],s=n.findSegmentIndexToSnap(o,e);s>=0&&e.add(s+1,new E(o),!1)}};hr.prototype.findSegmentIndexToSnap=function(e,t){for(var n=this,r=K.MAX_VALUE,i=-1,o=0;o<t.size()-1;o++){if(n._seg.p0=t.get(o),n._seg.p1=t.get(o+1),n._seg.p0.equals2D(e)||n._seg.p1.equals2D(e)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(e);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i};hr.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e};hr.prototype.interfaces_=function(){return[]};hr.prototype.getClass=function(){return hr};hr.isClosed=function(e){return e.length<=1?!1:e[0].equals2D(e[e.length-1])};var At=function(e){this._srcGeom=e||null},Xg={SNAP_PRECISION_FACTOR:{configurable:!0}};At.prototype.snapTo=function(e,t){var n=this.extractTargetCoordinates(e),r=new Yg(t,n);return r.transform(this._srcGeom)};At.prototype.snapToSelf=function(e,t){var n=this.extractTargetCoordinates(this._srcGeom),r=new Yg(e,n,!0),i=r.transform(this._srcGeom),o=i;return t&&H(o,Zr)&&(o=i.buffer(0)),o};At.prototype.computeSnapTolerance=function(e){var t=this.computeMinimumSegmentLength(e),n=t/10;return n};At.prototype.extractTargetCoordinates=function(e){for(var t=new Un,n=e.getCoordinates(),r=0;r<n.length;r++)t.add(n[r]);return t.toArray(new Array(0).fill(null))};At.prototype.computeMinimumSegmentLength=function(e){for(var t=K.MAX_VALUE,n=0;n<e.length-1;n++){var r=e[n].distance(e[n+1]);r<t&&(t=r)}return t};At.prototype.interfaces_=function(){return[]};At.prototype.getClass=function(){return At};At.snap=function(e,t,n){var r=new Array(2).fill(null),i=new At(e);r[0]=i.snapTo(t,n);var o=new At(t);return r[1]=o.snapTo(r[0],n),r};At.computeOverlaySnapTolerance=function(){if(arguments.length===1){var e=arguments[0],t=At.computeSizeBasedSnapTolerance(e),n=e.getPrecisionModel();if(n.getType()===ut.FIXED){var r=1/n.getScale()*2/1.415;r>t&&(t=r)}return t}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return Math.min(At.computeOverlaySnapTolerance(i),At.computeOverlaySnapTolerance(o))}};At.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal(),n=Math.min(t.getHeight(),t.getWidth()),r=n*At.SNAP_PRECISION_FACTOR;return r};At.snapToSelf=function(e,t,n){var r=new At(e);return r.snapToSelf(t,n)};Xg.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(At,Xg);var Yg=function(e){function t(n,r,i){e.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(n,r){var i=new hr(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(r)},t.prototype.transformCoordinates=function(n,r){var i=n.toCoordinateArray(),o=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ge),Ie=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Ie.prototype.getCommon=function(){return K.longBitsToDouble(this._commonBits)};Ie.prototype.add=function(e){var t=K.doubleToLongBits(e);if(this._isFirst)return this._commonBits=t,this._commonSignExp=Ie.signExpBits(this._commonBits),this._isFirst=!1,null;var n=Ie.signExpBits(t);if(n!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=Ie.numCommonMostSigMantissaBits(this._commonBits,t),this._commonBits=Ie.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};Ie.prototype.toString=function(){if(arguments.length===1){var e=arguments[0],t=K.longBitsToDouble(e),n=K.toBinaryString(e),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+t+" ]";return o}};Ie.prototype.interfaces_=function(){return[]};Ie.prototype.getClass=function(){return Ie};Ie.getBit=function(e,t){var n=1<<t;return e&n?1:0};Ie.signExpBits=function(e){return e>>52};Ie.zeroLowerBits=function(e,t){var n=(1<<t)-1,r=~n,i=e&r;return i};Ie.numCommonMostSigMantissaBits=function(e,t){for(var n=0,r=52;r>=0;r--){if(Ie.getBit(e,r)!==Ie.getBit(t,r))return n;n++}return 52};var ni=function(){this._commonCoord=null,this._ccFilter=new Yi},cc={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ni.prototype.addCommonBits=function(e){var t=new ri(this._commonCoord);e.apply(t),e.geometryChanged()};ni.prototype.removeCommonBits=function(e){if(this._commonCoord.x===0&&this._commonCoord.y===0)return e;var t=new E(this._commonCoord);t.x=-t.x,t.y=-t.y;var n=new ri(t);return e.apply(n),e.geometryChanged(),e};ni.prototype.getCommonCoordinate=function(){return this._commonCoord};ni.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};ni.prototype.interfaces_=function(){return[]};ni.prototype.getClass=function(){return ni};cc.CommonCoordinateFilter.get=function(){return Yi};cc.Translater.get=function(){return ri};Object.defineProperties(ni,cc);var Yi=function(){this._commonBitsX=new Ie,this._commonBitsY=new Ie};Yi.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)};Yi.prototype.getCommonCoordinate=function(){return new E(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};Yi.prototype.interfaces_=function(){return[ar]};Yi.prototype.getClass=function(){return Yi};var ri=function(){this.trans=null;var e=arguments[0];this.trans=e};ri.prototype.filter=function(e,t){var n=e.getOrdinate(t,0)+this.trans.x,r=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,n),e.setOrdinate(t,1,r)};ri.prototype.isDone=function(){return!1};ri.prototype.isGeometryChanged=function(){return!0};ri.prototype.interfaces_=function(){return[En]};ri.prototype.getClass=function(){return ri};var oe=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};oe.prototype.selfSnap=function(e){var t=new At(e),n=t.snapTo(e,this._snapTolerance);return n};oe.prototype.removeCommonBits=function(e){this._cbr=new ni,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t};oe.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e};oe.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),n=J.overlayOp(t[0],t[1],e);return this.prepareResult(n)};oe.prototype.checkValid=function(e){e.isValid()||ce.out.println("Snapped geometry is invalid")};oe.prototype.computeSnapTolerance=function(){this._snapTolerance=At.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};oe.prototype.snap=function(e){var t=this.removeCommonBits(e),n=At.snap(t[0],t[1],this._snapTolerance);return n};oe.prototype.interfaces_=function(){return[]};oe.prototype.getClass=function(){return oe};oe.overlayOp=function(e,t,n){var r=new oe(e,t);return r.getResultGeometry(n)};oe.union=function(e,t){return oe.overlayOp(e,t,J.UNION)};oe.intersection=function(e,t){return oe.overlayOp(e,t,J.INTERSECTION)};oe.symDifference=function(e,t){return oe.overlayOp(e,t,J.SYMDIFFERENCE)};oe.difference=function(e,t){return oe.overlayOp(e,t,J.DIFFERENCE)};var Te=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};Te.prototype.getResultGeometry=function(e){var t=null,n=!1,r=null;try{t=J.overlayOp(this._geom[0],this._geom[1],e);var i=!0;i&&(n=!0)}catch(o){if(o instanceof Cr)r=o;else throw o}finally{}if(!n)try{t=oe.overlayOp(this._geom[0],this._geom[1],e)}catch(o){throw o instanceof Cr?r:o}finally{}return t};Te.prototype.interfaces_=function(){return[]};Te.prototype.getClass=function(){return Te};Te.overlayOp=function(e,t,n){var r=new Te(e,t);return r.getResultGeometry(n)};Te.union=function(e,t){return Te.overlayOp(e,t,J.UNION)};Te.intersection=function(e,t){return Te.overlayOp(e,t,J.INTERSECTION)};Te.symDifference=function(e,t){return Te.overlayOp(e,t,J.SYMDIFFERENCE)};Te.difference=function(e,t){return Te.overlayOp(e,t,J.DIFFERENCE)};var Cs=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};Cs.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)};Cs.prototype.interfaces_=function(){return[]};Cs.prototype.getClass=function(){return Cs};var Ye=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o}},fc={INSERT:{configurable:!0},DELETE:{configurable:!0}};Ye.prototype.isDelete=function(){return this._eventType===Ye.DELETE};Ye.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e};Ye.prototype.getObject=function(){return this._obj};Ye.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};Ye.prototype.getInsertEvent=function(){return this._insertEvent};Ye.prototype.isInsert=function(){return this._eventType===Ye.INSERT};Ye.prototype.isSameLabel=function(e){return this._label===null?!1:this._label===e._label};Ye.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};Ye.prototype.interfaces_=function(){return[hn]};Ye.prototype.getClass=function(){return Ye};fc.INSERT.get=function(){return 1};fc.DELETE.get=function(){return 2};Object.defineProperties(Ye,fc);var Aa=function(){};Aa.prototype.interfaces_=function(){return[]};Aa.prototype.getClass=function(){return Aa};var he=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=n};he.prototype.isTrivialIntersection=function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(he.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(t===0&&r===i||r===0&&t===i)return!0}}return!1};he.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};he.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e};he.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};he.prototype.isBoundaryPointInternal=function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(e.isIntersection(i))return!0}return!1};he.prototype.hasProperIntersection=function(){return this._hasProper};he.prototype.hasIntersection=function(){return this._hasIntersection};he.prototype.isDone=function(){return this._isDone};he.prototype.isBoundaryPoint=function(e,t){return t===null?!1:!!(this.isBoundaryPointInternal(e,t[0])||this.isBoundaryPointInternal(e,t[1]))};he.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t};he.prototype.addIntersections=function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};he.prototype.interfaces_=function(){return[]};he.prototype.getClass=function(){return he};he.isAdjacentSegments=function(e,t){return Math.abs(e-t)===1};var hE=function(e){function t(){e.call(this),this.events=new F,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var n=this;In.sort(this.events);for(var r=0;r<this.events.size();r++){var i=n.events.get(r);i.isDelete()&&i.getInsertEvent().setDeleteEventIndex(r)}},t.prototype.computeIntersections=function(){var n=this;if(arguments.length===1){var r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var o=n.events.get(i);if(o.isInsert()&&n.processOverlaps(i,o.getDeleteEventIndex(),o,r),r.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof he&&H(arguments[0],vn)&&H(arguments[1],vn)){var s=arguments[0],a=arguments[1],u=arguments[2];this.addEdges(s,s),this.addEdges(a,a),this.computeIntersections(u)}else if(typeof arguments[2]=="boolean"&&H(arguments[0],vn)&&arguments[1]instanceof he){var l=arguments[0],c=arguments[1],f=arguments[2];f?this.addEdges(l,null):this.addEdges(l),this.computeIntersections(c)}}},t.prototype.addEdge=function(n,r){for(var i=this,o=n.getMonotoneChainEdge(),s=o.getStartIndexes(),a=0;a<s.length-1;a++){var u=new Cs(o,a),l=new Ye(r,o.getMinX(a),u);i.events.add(l),i.events.add(new Ye(o.getMaxX(a),l))}},t.prototype.processOverlaps=function(n,r,i,o){for(var s=this,a=i.getObject(),u=n;u<r;u++){var l=s.events.get(u);if(l.isInsert()){var c=l.getObject();i.isSameLabel(l)||(a.computeIntersections(c,o),s.nOverlaps++)}}},t.prototype.addEdges=function(){var n=this;if(arguments.length===1)for(var r=arguments[0],i=r.iterator();i.hasNext();){var o=i.next();n.addEdge(o,o)}else if(arguments.length===2)for(var s=arguments[0],a=arguments[1],u=s.iterator();u.hasNext();){var l=u.next();n.addEdge(l,a)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Aa),gr=function(){this._min=K.POSITIVE_INFINITY,this._max=K.NEGATIVE_INFINITY},Hg={NodeComparator:{configurable:!0}};gr.prototype.getMin=function(){return this._min};gr.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)};gr.prototype.getMax=function(){return this._max};gr.prototype.toString=function(){return bn.toLineString(new E(this._min,0),new E(this._max,0))};gr.prototype.interfaces_=function(){return[]};gr.prototype.getClass=function(){return gr};Hg.NodeComparator.get=function(){return Os};Object.defineProperties(gr,Hg);var Os=function(){};Os.prototype.compare=function(e,t){var n=e,r=t,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0};Os.prototype.interfaces_=function(){return[Eo]};Os.prototype.getClass=function(){return Os};var gE=function(e){function t(){e.call(this),this._item=null;var n=arguments[0],r=arguments[1],i=arguments[2];this._min=n,this._max=r,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;i.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(gr),dE=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var n=arguments[0],r=arguments[1];this._node1=n,this._node2=r,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(n,r){this._min=Math.min(n._min,r._min),this._max=Math.max(n._max,r._max)},t.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;this._node1!==null&&this._node1.query(n,r,i),this._node2!==null&&this._node2.query(n,r,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(gr),dr=function(){this._leaves=new F,this._root=null,this._level=0};dr.prototype.buildTree=function(){var e=this;In.sort(this._leaves,new gr.NodeComparator);for(var t=this._leaves,n=null,r=new F;;){if(e.buildLevel(t,r),r.size()===1)return r.get(0);n=t,t=r,r=n}};dr.prototype.insert=function(e,t,n){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gE(e,t,n))};dr.prototype.query=function(e,t,n){this.init(),this._root.query(e,t,n)};dr.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};dr.prototype.printNode=function(e){ce.out.println(bn.toLineString(new E(e._min,this._level),new E(e._max,this._level)))};dr.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};dr.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var n=0;n<e.size();n+=2){var r=e.get(n),i=n+1<e.size()?e.get(n):null;if(i===null)t.add(r);else{var o=new dE(e.get(n),e.get(n+1));t.add(o)}}};dr.prototype.interfaces_=function(){return[]};dr.prototype.getClass=function(){return dr};var Ao=function(){this._items=new F};Ao.prototype.visitItem=function(e){this._items.add(e)};Ao.prototype.getItems=function(){return this._items};Ao.prototype.interfaces_=function(){return[Kr]};Ao.prototype.getClass=function(){return Ao};var Do=function(){this._index=null;var e=arguments[0];if(!H(e,Zr))throw new xt("Argument must be Polygonal");this._index=new Ii(e)},pc={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Do.prototype.locate=function(e){var t=new Gn(e),n=new Fo(t);return this._index.query(e.y,e.y,n),t.getLocation()};Do.prototype.interfaces_=function(){return[Ro]};Do.prototype.getClass=function(){return Do};pc.SegmentVisitor.get=function(){return Fo};pc.IntervalIndexedGeometry.get=function(){return Ii};Object.defineProperties(Do,pc);var Fo=function(){this._counter=null;var e=arguments[0];this._counter=e};Fo.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};Fo.prototype.interfaces_=function(){return[Kr]};Fo.prototype.getClass=function(){return Fo};var Ii=function(){this._index=new dr;var e=arguments[0];this.init(e)};Ii.prototype.init=function(e){for(var t=this,n=ae.getLines(e),r=n.iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();t.addLine(o)}};Ii.prototype.addLine=function(e){for(var t=this,n=1;n<e.length;n++){var r=new W(e[n-1],e[n]),i=Math.min(r.p0.y,r.p1.y),o=Math.max(r.p0.y,r.p1.y);t._index.insert(i,o,r)}};Ii.prototype.query=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new Ao;return this._index.query(e,t,n),n.getItems()}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}};Ii.prototype.interfaces_=function(){return[]};Ii.prototype.getClass=function(){return Ii};var ns=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new Tg,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Nn,arguments.length===2){var n=arguments[0],r=arguments[1],i=cn.OGC_SFS_BOUNDARY_RULE;this._argIndex=n,this._parentGeom=r,this._boundaryNodeRule=i,r!==null&&this.add(r)}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2];this._argIndex=o,this._parentGeom=s,this._boundaryNodeRule=a,s!==null&&this.add(s)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(n,r){var i=this._nodes.addNode(r),o=i.getLabel(),s=1,a=S.NONE;a=o.getLocation(n,D.ON),a===S.BOUNDARY&&s++;var u=t.determineBoundary(this._boundaryNodeRule,s);o.setLocation(n,u)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.computeSelfNodes(n,r,!1)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2],a=new he(i,!0,!1);a.setIsDoneIfProperInt(s);var u=this.createEdgeSetIntersector(),l=this._parentGeom instanceof ur||this._parentGeom instanceof Zt||this._parentGeom instanceof or,c=o||!l;return u.computeIntersections(this._edges,a,c),this.addSelfIntersectionNodes(this._argIndex),a}},t.prototype.computeSplitEdges=function(n){for(var r=this._edges.iterator();r.hasNext();){var i=r.next();i.eiList.addSplitEdges(n)}},t.prototype.computeEdgeIntersections=function(n,r,i){var o=new he(r,i,!0);o.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes());var s=this.createEdgeSetIntersector();return s.computeIntersections(this._edges,n._edges,o),o},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof je){var n=arguments[0],r=n.getCoordinate();this.insertPoint(this._argIndex,r,S.INTERIOR)}else if(arguments[0]instanceof E){var i=arguments[0];this.insertPoint(this._argIndex,i,S.INTERIOR)}},t.prototype.addPolygon=function(n){var r=this;this.addPolygonRing(n.getExteriorRing(),S.EXTERIOR,S.INTERIOR);for(var i=0;i<n.getNumInteriorRing();i++){var o=n.getInteriorRingN(i);r.addPolygonRing(o,S.INTERIOR,S.EXTERIOR)}},t.prototype.addEdge=function(n){this.insertEdge(n);var r=n.getCoordinates();this.insertPoint(this._argIndex,r[0],S.BOUNDARY),this.insertPoint(this._argIndex,r[r.length-1],S.BOUNDARY)},t.prototype.addLineString=function(n){var r=et.removeRepeatedPoints(n.getCoordinates());if(r.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=new Ma(r,new pt(this._argIndex,S.INTERIOR));this._lineEdgeMap.put(n,i),this.insertEdge(i),Q.isTrue(r.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,r[0]),this.insertBoundaryPoint(this._argIndex,r[r.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),r=new Array(n.size()).fill(null),i=0,o=n.iterator();o.hasNext();){var s=o.next();r[i++]=s.getCoordinate().copy()}return r},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(n,r,i){if(this.isBoundaryNode(n,r))return null;i===S.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,r):this.insertPoint(n,r,i)},t.prototype.addPolygonRing=function(n,r,i){if(n.isEmpty())return null;var o=et.removeRepeatedPoints(n.getCoordinates());if(o.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=o[0],null;var s=r,a=i;G.isCCW(o)&&(s=i,a=r);var u=new Ma(o,new pt(this._argIndex,S.BOUNDARY,s,a));this._lineEdgeMap.put(n,u),this.insertEdge(u),this.insertPoint(this._argIndex,o[0],S.BOUNDARY)},t.prototype.insertPoint=function(n,r,i){var o=this._nodes.addNode(r),s=o.getLabel();s===null?o._label=new pt(n,i):s.setLocation(n,i)},t.prototype.createEdgeSetIntersector=function(){return new hE},t.prototype.addSelfIntersectionNodes=function(n){for(var r=this,i=this._edges.iterator();i.hasNext();)for(var o=i.next(),s=o.getLabel().getLocation(n),a=o.eiList.iterator();a.hasNext();){var u=a.next();r.addSelfIntersectionNode(n,u.coord,s)}},t.prototype.add=function(){if(arguments.length===1){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof or&&(this._useBoundaryDeterminationRule=!1),n instanceof Zt)this.addPolygon(n);else if(n instanceof Tt)this.addLineString(n);else if(n instanceof je)this.addPoint(n);else if(n instanceof Co)this.addCollection(n);else if(n instanceof mi)this.addCollection(n);else if(n instanceof or)this.addCollection(n);else if(n instanceof Ce)this.addCollection(n);else throw new Error(n.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(n){for(var r=this,i=0;i<n.getNumGeometries();i++){var o=n.getGeometryN(i);r.add(o)}},t.prototype.locate=function(n){return H(this._parentGeom,Zr)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Do(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var n=arguments[0];return this._lineEdgeMap.get(n)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(n,r){return n.isInBoundary(r)?S.BOUNDARY:S.INTERIOR},t}(Ct),ko=function(){if(this._li=new wi,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ns(0,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1],r=cn.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ns(0,t,r),this._arg[1]=new ns(1,n,r)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ns(0,i,s),this._arg[1]=new ns(1,o,s)}};ko.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()};ko.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)};ko.prototype.interfaces_=function(){return[]};ko.prototype.getClass=function(){return ko};var gi=function(){};gi.prototype.interfaces_=function(){return[]};gi.prototype.getClass=function(){return gi};gi.map=function(){if(arguments[0]instanceof Y&&H(arguments[1],gi.MapOp)){for(var e=arguments[0],t=arguments[1],n=new F,r=0;r<e.getNumGeometries();r++){var i=t.map(e.getGeometryN(r));i!==null&&n.add(i)}return e.getFactory().buildGeometry(n)}else if(H(arguments[0],Wt)&&H(arguments[1],gi.MapOp)){for(var o=arguments[0],s=arguments[1],a=new F,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);c!==null&&a.add(c)}return a}};gi.MapOp=function(){};var J=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r),this._ptLocator=new Nn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Ln,this._resultPolyList=new F,this._resultLineList=new F,this._resultPointList=new F,this._graph=new Ct(new Bg),this._geomFact=n.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(n){var r=this._edgeList.findEqualEdge(n);if(r!==null){var i=r.getLabel(),o=n.getLabel();r.isPointwiseEqual(n)||(o=new pt(n.getLabel()),o.flip());var s=r.getDepth();s.isNull()&&s.add(i),s.add(o),i.merge(o)}else this._edgeList.add(n)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getSym();r.isInResult()&&i.isInResult()&&(r.setInResult(!1),i.setInResult(!1))}},t.prototype.isCoveredByLA=function(n){return!!(this.isCovered(n,this._resultLineList)||this.isCovered(n,this._resultPolyList))},t.prototype.computeGeometry=function(n,r,i,o){var s=new F;return s.addAll(n),s.addAll(r),s.addAll(i),s.isEmpty()?t.createEmptyResult(o,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(s)},t.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next();r.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(n,r){for(var i=this,o=r.iterator();o.hasNext();){var s=o.next(),a=i._ptLocator.locate(n,s);if(a!==S.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var n=new F,r=this._edgeList.iterator();r.hasNext();){var i=r.next();i.isCollapsed()&&(r.remove(),n.add(i.getCollapsedEdge()))}this._edgeList.addAll(n)},t.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next(),i=r.getEdges().getLabel();r.getLabel().merge(i)}},t.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},t.prototype.insertUniqueEdges=function(n){for(var r=this,i=n.iterator();i.hasNext();){var o=i.next();r.insertUniqueEdge(o)}},t.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var r=new F;this._arg[0].computeSplitEdges(r),this._arg[1].computeSplitEdges(r),this.insertUniqueEdges(r),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Si.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var i=new We(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var o=new Zn(this,this._geomFact,this._ptLocator);this._resultLineList=o.build(n);var s=new Xi(this,this._geomFact,this._ptLocator);this._resultPointList=s.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},t.prototype.labelIncompleteNode=function(n,r){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[r].getGeometry());n.getLabel().setLocation(r,i)},t.prototype.copyPoints=function(n){for(var r=this,i=this._arg[n].getNodeIterator();i.hasNext();){var o=i.next(),s=r._graph.addNode(o.getCoordinate());s.setLabel(n,o.getLabel().getLocation(n))}},t.prototype.findResultAreaEdges=function(n){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.isArea()&&!i.isInteriorAreaEdge()&&t.isResultOfOp(o.getLocation(0,D.RIGHT),o.getLocation(1,D.RIGHT),n)&&i.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var r=n.next(),i=r.getLabel(),o=r.getDepth();if(!o.isNull()){o.normalize();for(var s=0;s<2;s++)!i.isNull(s)&&i.isArea()&&!o.isNull(s)&&(o.getDelta(s)===0?i.toLine(s):(Q.isTrue(!o.isNull(s,D.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(s,D.LEFT,o.getLocation(s,D.LEFT)),Q.isTrue(!o.isNull(s,D.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(s,D.RIGHT,o.getLocation(s,D.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next();i.getEdges().computeLabelling(n._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var n=this,r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?n.labelIncompleteNode(i,0):n.labelIncompleteNode(i,1)),i.getEdges().updateLabelling(o)}},t.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ko);J.overlayOp=function(e,t,n){var r=new J(e,t),i=r.getResultGeometry(n);return i};J.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return J.createEmptyResult(J.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return Wi.map(e,{interfaces_:function(){return[gi.MapOp]},map:function(r){return r.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Te.overlayOp(e,t,J.INTERSECTION)};J.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return J.createEmptyResult(J.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Te.overlayOp(e,t,J.SYMDIFFERENCE)};J.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case J.INTERSECTION:o=Math.min(r,i);break;case J.UNION:o=Math.max(r,i);break;case J.DIFFERENCE:o=r;break;case J.SYMDIFFERENCE:o=Math.max(r,i);break}return o};J.createEmptyResult=function(e,t,n,r){var i=null;switch(J.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon();break}return i};J.difference=function(e,t){return e.isEmpty()?J.createEmptyResult(J.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Te.overlayOp(e,t,J.DIFFERENCE))};J.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return J.isResultOfOp(n,r,t)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===S.BOUNDARY&&(i=S.INTERIOR),o===S.BOUNDARY&&(o=S.INTERIOR),s){case J.INTERSECTION:return i===S.INTERIOR&&o===S.INTERIOR;case J.UNION:return i===S.INTERIOR||o===S.INTERIOR;case J.DIFFERENCE:return i===S.INTERIOR&&o!==S.INTERIOR;case J.SYMDIFFERENCE:return i===S.INTERIOR&&o!==S.INTERIOR||i!==S.INTERIOR&&o===S.INTERIOR}return!1}};J.INTERSECTION=1;J.UNION=2;J.DIFFERENCE=3;J.SYMDIFFERENCE=4;var Yr=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Nn,this._seg=new W;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};Yr.prototype.isWithinToleranceOfBoundary=function(e){for(var t=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=t._linework.getGeometryN(n),i=r.getCoordinateSequence(),o=0;o<i.size()-1;o++){i.getCoordinate(o,t._seg.p0),i.getCoordinate(o+1,t._seg.p1);var s=t._seg.distance(e);if(s<=t._boundaryDistanceTolerance)return!0}return!1};Yr.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?S.BOUNDARY:this._ptLocator.locate(e,this._g)};Yr.prototype.extractLinework=function(e){var t=new Go;e.apply(t);var n=t.getLinework(),r=tt.toLineStringArray(n);return e.getFactory().createMultiLineString(r)};Yr.prototype.interfaces_=function(){return[]};Yr.prototype.getClass=function(){return Yr};var Go=function(){this._linework=null,this._linework=new F};Go.prototype.getLinework=function(){return this._linework};Go.prototype.filter=function(e){var t=this;if(e instanceof Zt){var n=e;this._linework.add(n.getExteriorRing());for(var r=0;r<n.getNumInteriorRing();r++)t._linework.add(n.getInteriorRingN(r))}};Go.prototype.interfaces_=function(){return[qn]};Go.prototype.getClass=function(){return Go};var Li=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Li.prototype.extractPoints=function(e,t,n){for(var r=this,i=e.getCoordinates(),o=0;o<i.length-1;o++)r.computeOffsetPoints(i[o],i[o+1],t,n)};Li.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t};Li.prototype.getPoints=function(e){for(var t=this,n=new F,r=ae.getLines(this._g),i=r.iterator();i.hasNext();){var o=i.next();t.extractPoints(o,e,n)}return n};Li.prototype.computeOffsetPoints=function(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,l=(t.x+e.x)/2,c=(t.y+e.y)/2;if(this._doLeft){var f=new E(l-u,c+a);r.add(f)}if(this._doRight){var p=new E(l+u,c-a);r.add(p)}};Li.prototype.interfaces_=function(){return[]};Li.prototype.getClass=function(){return Li};var rn=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new F;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new Yr(this._geom[0],this._boundaryDistanceTolerance),new Yr(this._geom[1],this._boundaryDistanceTolerance),new Yr(this._geom[2],this._boundaryDistanceTolerance)]},Zg={TOLERANCE:{configurable:!0}};rn.prototype.reportResult=function(e,t,n){ce.out.println("Overlay result invalid - A:"+S.toLocationSymbol(t[0])+" B:"+S.toLocationSymbol(t[1])+" expected:"+(n?"i":"e")+" actual:"+S.toLocationSymbol(t[2]))};rn.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t};rn.prototype.checkValid=function(){var e=this;if(arguments.length===1){for(var t=arguments[0],n=0;n<this._testCoords.size();n++){var r=e._testCoords.get(n);if(!e.checkValid(t,r))return e._invalidLocation=r,!1}return!0}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),rn.hasLocation(this._location,S.BOUNDARY)?!0:this.isValidResult(i,this._location)}};rn.prototype.addTestPts=function(e){var t=new Li(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};rn.prototype.isValidResult=function(e,t){var n=J.isResultOfOp(t[0],t[1],e),r=t[2]===S.INTERIOR,i=!(n^r);return i||this.reportResult(e,t,n),i};rn.prototype.getInvalidLocation=function(){return this._invalidLocation};rn.prototype.interfaces_=function(){return[]};rn.prototype.getClass=function(){return rn};rn.hasLocation=function(e,t){for(var n=0;n<3;n++)if(e[n]===t)return!0;return!1};rn.computeBoundaryDistanceTolerance=function(e,t){return Math.min(At.computeSizeBasedSnapTolerance(e),At.computeSizeBasedSnapTolerance(t))};rn.isValid=function(e,t,n,r){var i=new rn(e,t,r);return i.isValid(n)};Zg.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(rn,Zg);var Ke=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Ke.prototype.extractElements=function(e,t){var n=this;if(e===null)return null;for(var r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);n._skipEmpty&&i.isEmpty()||t.add(i)}};Ke.prototype.combine=function(){for(var e=this,t=new F,n=this._inputGeoms.iterator();n.hasNext();){var r=n.next();e.extractElements(r,t)}return t.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)};Ke.prototype.interfaces_=function(){return[]};Ke.prototype.getClass=function(){return Ke};Ke.combine=function(){if(arguments.length===1){var e=arguments[0],t=new Ke(e);return t.combine()}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=new Ke(Ke.createList(n,r));return i.combine()}else if(arguments.length===3){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Ke(Ke.createList(o,s,a));return u.combine()}};Ke.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()};Ke.createList=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=new F;return n.add(e),n.add(t),n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2],s=new F;return s.add(r),s.add(i),s.add(o),s}};var Bt=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,this._inputPolys===null&&(this._inputPolys=new F)},Kg={STRTREE_NODE_CAPACITY:{configurable:!0}};Bt.prototype.reduceToGeometries=function(e){for(var t=this,n=new F,r=e.iterator();r.hasNext();){var i=r.next(),o=null;H(i,vn)?o=t.unionTree(i):i instanceof Y&&(o=i),n.add(o)}return n};Bt.prototype.extractByEnvelope=function(e,t,n){for(var r=new F,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getEnvelopeInternal().intersects(e)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)};Bt.prototype.unionOptimized=function(e,t){var n=e.getEnvelopeInternal(),r=t.getEnvelopeInternal();if(!n.intersects(r)){var i=Ke.combine(e,t);return i}if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var o=n.intersection(r);return this.unionUsingEnvelopeIntersection(e,t,o)};Bt.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new Dg(Bt.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var n=t.next();e.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=e.itemsTree(),i=this.unionTree(r);return i};Bt.prototype.binaryUnion=function(){if(arguments.length===1){var e=arguments[0];return this.binaryUnion(e,0,e.size())}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Bt.getGeometry(t,n);return this.unionSafe(i,null)}else{if(r-n===2)return this.unionSafe(Bt.getGeometry(t,n),Bt.getGeometry(t,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(t,n,o),a=this.binaryUnion(t,o,r);return this.unionSafe(s,a)}}};Bt.prototype.repeatedUnion=function(e){for(var t=null,n=e.iterator();n.hasNext();){var r=n.next();t===null?t=r.copy():t=t.union(r)}return t};Bt.prototype.unionSafe=function(e,t){return e===null&&t===null?null:e===null?t.copy():t===null?e.copy():this.unionOptimized(e,t)};Bt.prototype.unionActual=function(e,t){return Bt.restrictToPolygons(e.union(t))};Bt.prototype.unionTree=function(e){var t=this.reduceToGeometries(e),n=this.binaryUnion(t);return n};Bt.prototype.unionUsingEnvelopeIntersection=function(e,t,n){var r=new F,i=this.extractByEnvelope(n,e,r),o=this.extractByEnvelope(n,t,r),s=this.unionActual(i,o);r.add(s);var a=Ke.combine(r);return a};Bt.prototype.bufferUnion=function(){if(arguments.length===1){var e=arguments[0],t=e.get(0).getFactory(),n=t.buildGeometry(e),r=n.buffer(0);return r}else if(arguments.length===2){var i=arguments[0],o=arguments[1],s=i.getFactory(),a=s.createGeometryCollection([i,o]),u=a.buffer(0);return u}};Bt.prototype.interfaces_=function(){return[]};Bt.prototype.getClass=function(){return Bt};Bt.restrictToPolygons=function(e){if(H(e,Zr))return e;var t=xr.getPolygons(e);return t.size()===1?t.get(0):e.getFactory().createMultiPolygon(tt.toPolygonArray(t))};Bt.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)};Bt.union=function(e){var t=new Bt(e);return t.union()};Kg.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(Bt,Kg);var Da=function(){};Da.prototype.interfaces_=function(){return[]};Da.prototype.getClass=function(){return Da};Da.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return J.createEmptyResult(J.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),Te.overlayOp(e,t,J.UNION)};function Ci(){return new Fa}function Fa(){this.reset()}Fa.prototype={constructor:Fa,reset:function(){this.s=this.t=0},add:function(e){mp(Zs,e,this.t),mp(this,Zs.s,this.s),this.s?this.t+=Zs.t:this.s=Zs.t},valueOf:function(){return this.s}};var Zs=new Fa;function mp(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var Pt=1e-6,vt=Math.PI,Nr=vt/2,yp=vt/4,Mr=vt*2,ui=180/vt,Mn=vt/180,xe=Math.abs,mE=Math.atan,Bo=Math.atan2,Xt=Math.cos,Yt=Math.sin,Jo=Math.sqrt;function Jg(e){return e>1?0:e<-1?vt:Math.acos(e)}function Hi(e){return e>1?Nr:e<-1?-Nr:Math.asin(e)}function ss(){}function ka(e,t){e&&vp.hasOwnProperty(e.type)&&vp[e.type](e,t)}var _p={Feature:function(e,t){ka(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)ka(n[r].geometry,t)}},vp={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){_l(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)_l(n[r],t,0)},Polygon:function(e,t){bp(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)bp(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)ka(n[r],t)}};function _l(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function bp(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)_l(e[n],t,1);t.polygonEnd()}function yE(e,t){e&&_p.hasOwnProperty(e.type)?_p[e.type](e,t):ka(e,t)}Ci();Ci();function vl(e){return[Bo(e[1],e[0]),Hi(e[2])]}function zo(e){var t=e[0],n=e[1],r=Xt(n);return[r*Xt(t),r*Yt(t),Yt(n)]}function Ks(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ga(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Gu(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Js(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function bl(e){var t=Jo(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Ci();function Qg(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function El(e,t){return[e>vt?e-Mr:e<-vt?e+Mr:e,t]}El.invert=El;function _E(e,t,n){return(e%=Mr)?t||n?Qg(Sp(e),Ip(t,n)):Sp(e):t||n?Ip(t,n):El}function Ep(e){return function(t,n){return t+=e,[t>vt?t-Mr:t<-vt?t+Mr:t,n]}}function Sp(e){var t=Ep(e);return t.invert=Ep(-e),t}function Ip(e,t){var n=Xt(e),r=Yt(e),i=Xt(t),o=Yt(t);function s(a,u){var l=Xt(u),c=Xt(a)*l,f=Yt(a)*l,p=Yt(u),g=p*n+c*r;return[Bo(f*i-g*o,c*n-p*r),Hi(g*i+f*o)]}return s.invert=function(a,u){var l=Xt(u),c=Xt(a)*l,f=Yt(a)*l,p=Yt(u),g=p*i-f*o;return[Bo(f*i+p*o,c*n+g*r),Hi(g*n-c*r)]},s}function vE(e,t,n,r,i,o){if(n){var s=Xt(t),a=Yt(t),u=r*n;i==null?(i=t+r*Mr,o=t-u/2):(i=Lp(s,i),o=Lp(s,o),(r>0?i<o:i>o)&&(i+=r*Mr));for(var l,c=i;r>0?c>o:c<o;c-=u)l=vl([s,-a*Xt(c),-a*Yt(c)]),e.point(l[0],l[1])}}function Lp(e,t){t=zo(t),t[0]-=e,bl(t);var n=Jg(-t[1]);return((-t[2]<0?-n:n)+Mr-Pt)%Mr}function $g(){var e=[],t;return{point:function(n,r){t.push([n,r])},lineStart:function(){e.push(t=[])},lineEnd:ss,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function bE(e,t,n,r,i,o){var s=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,p=u-s,g=l-a,h;if(h=n-s,!(!p&&h>0)){if(h/=p,p<0){if(h<c)return;h<f&&(f=h)}else if(p>0){if(h>f)return;h>c&&(c=h)}if(h=i-s,!(!p&&h<0)){if(h/=p,p<0){if(h>f)return;h>c&&(c=h)}else if(p>0){if(h<c)return;h<f&&(f=h)}if(h=r-a,!(!g&&h>0)){if(h/=g,g<0){if(h<c)return;h<f&&(f=h)}else if(g>0){if(h>f)return;h>c&&(c=h)}if(h=o-a,!(!g&&h<0)){if(h/=g,g<0){if(h>f)return;h>c&&(c=h)}else if(g>0){if(h<c)return;h<f&&(f=h)}return c>0&&(e[0]=s+c*p,e[1]=a+c*g),f<1&&(t[0]=s+f*p,t[1]=a+f*g),!0}}}}}function la(e,t){return xe(e[0]-t[0])<Pt&&xe(e[1]-t[1])<Pt}function Qs(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function td(e,t,n,r,i){var o=[],s=[],a,u;if(e.forEach(function(h){if(!((m=h.length-1)<=0)){var m,d=h[0],y=h[m],v;if(la(d,y)){for(i.lineStart(),a=0;a<m;++a)i.point((d=h[a])[0],d[1]);i.lineEnd();return}o.push(v=new Qs(d,h,null,!0)),s.push(v.o=new Qs(d,null,v,!1)),o.push(v=new Qs(y,h,null,!1)),s.push(v.o=new Qs(y,null,v,!0))}}),!!o.length){for(s.sort(t),Np(o),Np(s),a=0,u=s.length;a<u;++a)s[a].e=n=!n;for(var l=o[0],c,f;;){for(var p=l,g=!0;p.v;)if((p=p.n)===l)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g)for(c=p.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,g=!g}while(!p.v);i.lineEnd()}}}function Np(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function ed(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function EE(e){return e.length===1&&(e=SE(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function SE(e){return function(t,n){return ed(e(t),n)}}EE(ed);function nd(e){for(var t=e.length,n,r=-1,i=0,o,s;++r<t;)i+=e[r].length;for(o=new Array(i);--t>=0;)for(s=e[t],n=s.length;--n>=0;)o[--i]=s[n];return o}var as=1e9,$s=-as;function IE(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function o(l,c,f,p){var g=0,h=0;if(l==null||(g=s(l,f))!==(h=s(c,f))||u(l,c)<0^f>0)do p.point(g===0||g===3?e:n,g>1?r:t);while((g=(g+f+4)%4)!==h);else p.point(c[0],c[1])}function s(l,c){return xe(l[0]-e)<Pt?c>0?0:3:xe(l[0]-n)<Pt?c>0?2:1:xe(l[1]-t)<Pt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=s(l,1),p=s(c,1);return f!==p?f-p:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=$g(),p,g,h,m,d,y,v,b,I,w,O,M={point:x,lineStart:C,lineEnd:$,polygonStart:k,polygonEnd:A};function x(z,q){i(z,q)&&c.point(z,q)}function T(){for(var z=0,q=0,ot=g.length;q<ot;++q)for(var ht=g[q],St=1,Ot=ht.length,kt=ht[0],qt,Kt,He=kt[0],Ee=kt[1];St<Ot;++St)qt=He,Kt=Ee,kt=ht[St],He=kt[0],Ee=kt[1],Kt<=r?Ee>r&&(He-qt)*(r-Kt)>(Ee-Kt)*(e-qt)&&++z:Ee<=r&&(He-qt)*(r-Kt)<(Ee-Kt)*(e-qt)&&--z;return z}function k(){c=f,p=[],g=[],O=!0}function A(){var z=T(),q=O&&z,ot=(p=nd(p)).length;(q||ot)&&(l.polygonStart(),q&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),ot&&td(p,a,z,o,l),l.polygonEnd()),c=l,p=g=h=null}function C(){M.point=N,g&&g.push(h=[]),w=!0,I=!1,v=b=NaN}function $(){p&&(N(m,d),y&&I&&f.rejoin(),p.push(f.result())),M.point=x,I&&c.lineEnd()}function N(z,q){var ot=i(z,q);if(g&&h.push([z,q]),w)m=z,d=q,y=ot,w=!1,ot&&(c.lineStart(),c.point(z,q));else if(ot&&I)c.point(z,q);else{var ht=[v=Math.max($s,Math.min(as,v)),b=Math.max($s,Math.min(as,b))],St=[z=Math.max($s,Math.min(as,z)),q=Math.max($s,Math.min(as,q))];bE(ht,St,e,t,n,r)?(I||(c.lineStart(),c.point(ht[0],ht[1])),c.point(St[0],St[1]),ot||c.lineEnd(),O=!1):ot&&(c.lineStart(),c.point(z,q),O=!1)}v=z,b=q,I=ot}return M}}var Bu=Ci();function LE(e,t){var n=t[0],r=t[1],i=[Yt(n),-Xt(n),0],o=0,s=0;Bu.reset();for(var a=0,u=e.length;a<u;++a)if(c=(l=e[a]).length)for(var l,c,f=l[c-1],p=f[0],g=f[1]/2+yp,h=Yt(g),m=Xt(g),d=0;d<c;++d,p=v,h=I,m=w,f=y){var y=l[d],v=y[0],b=y[1]/2+yp,I=Yt(b),w=Xt(b),O=v-p,M=O>=0?1:-1,x=M*O,T=x>vt,k=h*I;if(Bu.add(Bo(k*M*Yt(x),m*w+k*Xt(x))),o+=T?O+M*Mr:O,T^p>=n^v>=n){var A=Ga(zo(f),zo(y));bl(A);var C=Ga(i,A);bl(C);var $=(T^O>=0?-1:1)*Hi(C[2]);(r>$||r===$&&(A[0]||A[1]))&&(s+=T^O>=0?1:-1)}}return(o<-Pt||o<Pt&&Bu<-Pt)^s&1}Ci();function xp(e){return e}Ci();Ci();var Uo=1/0,Ba=Uo,Ps=-Uo,za=Ps,wp={point:NE,lineStart:ss,lineEnd:ss,polygonStart:ss,polygonEnd:ss,result:function(){var e=[[Uo,Ba],[Ps,za]];return Ps=za=-(Ba=Uo=1/0),e}};function NE(e,t){e<Uo&&(Uo=e),e>Ps&&(Ps=e),t<Ba&&(Ba=t),t>za&&(za=t)}Ci();function rd(e,t,n,r){return function(i,o){var s=t(o),a=i.invert(r[0],r[1]),u=$g(),l=t(u),c=!1,f,p,g,h={point:m,lineStart:y,lineEnd:v,polygonStart:function(){h.point=b,h.lineStart=I,h.lineEnd=w,p=[],f=[]},polygonEnd:function(){h.point=m,h.lineStart=y,h.lineEnd=v,p=nd(p);var O=LE(f,a);p.length?(c||(o.polygonStart(),c=!0),td(p,wE,O,n,o)):O&&(c||(o.polygonStart(),c=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),c&&(o.polygonEnd(),c=!1),p=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function m(O,M){var x=i(O,M);e(O=x[0],M=x[1])&&o.point(O,M)}function d(O,M){var x=i(O,M);s.point(x[0],x[1])}function y(){h.point=d,s.lineStart()}function v(){h.point=m,s.lineEnd()}function b(O,M){g.push([O,M]);var x=i(O,M);l.point(x[0],x[1])}function I(){l.lineStart(),g=[]}function w(){b(g[0][0],g[0][1]),l.lineEnd();var O=l.clean(),M=u.result(),x,T=M.length,k,A,C;if(g.pop(),f.push(g),g=null,!!T){if(O&1){if(A=M[0],(k=A.length-1)>0){for(c||(o.polygonStart(),c=!0),o.lineStart(),x=0;x<k;++x)o.point((C=A[x])[0],C[1]);o.lineEnd()}return}T>1&&O&2&&M.push(M.pop().concat(M.shift())),p.push(M.filter(xE))}}return h}}function xE(e){return e.length>1}function wE(e,t){return((e=e.x)[0]<0?e[1]-Nr-Pt:Nr-e[1])-((t=t.x)[0]<0?t[1]-Nr-Pt:Nr-t[1])}const Cp=rd(function(){return!0},CE,PE,[-vt,-Nr]);function CE(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?vt:-vt,u=xe(o-t);xe(u-vt)<Pt?(e.point(t,n=(n+s)/2>0?Nr:-Nr),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&u>=vt&&(xe(t-r)<Pt&&(t-=r*Pt),xe(o-a)<Pt&&(o-=a*Pt),n=OE(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function OE(e,t,n,r){var i,o,s=Yt(e-n);return xe(s)>Pt?mE((Yt(t)*(o=Xt(r))*Yt(n)-Yt(r)*(i=Xt(t))*Yt(e))/(i*o*s)):(t+r)/2}function PE(e,t,n,r){var i;if(e==null)i=n*Nr,r.point(-vt,i),r.point(0,i),r.point(vt,i),r.point(vt,0),r.point(vt,-i),r.point(0,-i),r.point(-vt,-i),r.point(-vt,0),r.point(-vt,i);else if(xe(e[0]-t[0])>Pt){var o=e[0]<t[0]?vt:-vt;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function TE(e,t){var n=Xt(e),r=n>0,i=xe(n)>Pt;function o(c,f,p,g){vE(g,e,t,p,c,f)}function s(c,f){return Xt(c)*Xt(f)>n}function a(c){var f,p,g,h,m;return{lineStart:function(){h=g=!1,m=1},point:function(d,y){var v=[d,y],b,I=s(d,y),w=r?I?0:l(d,y):I?l(d+(d<0?vt:-vt),y):0;if(!f&&(h=g=I)&&c.lineStart(),I!==g&&(b=u(f,v),(!b||la(f,b)||la(v,b))&&(v[0]+=Pt,v[1]+=Pt,I=s(v[0],v[1]))),I!==g)m=0,I?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1]),c.lineEnd()),f=b;else if(i&&f&&r^I){var O;!(w&p)&&(O=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(O[0][0],O[0][1]),c.point(O[1][0],O[1][1]),c.lineEnd()):(c.point(O[1][0],O[1][1]),c.lineEnd(),c.lineStart(),c.point(O[0][0],O[0][1])))}I&&(!f||!la(f,v))&&c.point(v[0],v[1]),f=v,g=I,p=w},lineEnd:function(){g&&c.lineEnd(),f=null},clean:function(){return m|(h&&g)<<1}}}function u(c,f,p){var g=zo(c),h=zo(f),m=[1,0,0],d=Ga(g,h),y=Ks(d,d),v=d[0],b=y-v*v;if(!b)return!p&&c;var I=n*y/b,w=-n*v/b,O=Ga(m,d),M=Js(m,I),x=Js(d,w);Gu(M,x);var T=O,k=Ks(M,T),A=Ks(T,T),C=k*k-A*(Ks(M,M)-1);if(!(C<0)){var $=Jo(C),N=Js(T,(-k-$)/A);if(Gu(N,M),N=vl(N),!p)return N;var z=c[0],q=f[0],ot=c[1],ht=f[1],St;q<z&&(St=z,z=q,q=St);var Ot=q-z,kt=xe(Ot-vt)<Pt,qt=kt||Ot<Pt;if(!kt&&ht<ot&&(St=ot,ot=ht,ht=St),qt?kt?ot+ht>0^N[1]<(xe(N[0]-z)<Pt?ot:ht):ot<=N[1]&&N[1]<=ht:Ot>vt^(z<=N[0]&&N[0]<=q)){var Kt=Js(T,(-k+$)/A);return Gu(Kt,M),[N,vl(Kt)]}}}function l(c,f){var p=r?e:vt-e,g=0;return c<-p?g|=1:c>p&&(g|=2),f<-p?g|=4:f>p&&(g|=8),g}return rd(s,a,o,r?[0,-e]:[-vt,e-vt])}function id(e){return function(t){var n=new Sl;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Sl(){}Sl.prototype={constructor:Sl,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function od(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),yE(n,e.stream(wp));var s=wp.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+t[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+t[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(a*150).translate([u,l])}function RE(e,t,n){return od(e,[[0,0],t],n)}var Op=16,ME=Xt(30*Mn);function Pp(e,t){return+t?DE(e,t):AE(e)}function AE(e){return id({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function DE(e,t){function n(r,i,o,s,a,u,l,c,f,p,g,h,m,d){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var I=s+p,w=a+g,O=u+h,M=Jo(I*I+w*w+O*O),x=Hi(O/=M),T=xe(xe(O)-1)<Pt||xe(o-f)<Pt?(o+f)/2:Bo(w,I),k=e(T,x),A=k[0],C=k[1],$=A-r,N=C-i,z=v*$-y*N;(z*z/b>t||xe((y*$+v*N)/b-.5)>.3||s*p+a*g+u*h<ME)&&(n(r,i,o,s,a,u,A,C,T,I/=M,w/=M,O,m,d),d.point(A,C),n(A,C,T,I,w,O,l,c,f,p,g,h,m,d))}}return function(r){var i,o,s,a,u,l,c,f,p,g,h,m,d={point:y,lineStart:v,lineEnd:I,polygonStart:function(){r.polygonStart(),d.lineStart=w},polygonEnd:function(){r.polygonEnd(),d.lineStart=v}};function y(x,T){x=e(x,T),r.point(x[0],x[1])}function v(){f=NaN,d.point=b,r.lineStart()}function b(x,T){var k=zo([x,T]),A=e(x,T);n(f,p,c,g,h,m,f=A[0],p=A[1],c=x,g=k[0],h=k[1],m=k[2],Op,r),r.point(f,p)}function I(){d.point=y,r.lineEnd()}function w(){v(),d.point=O,d.lineEnd=M}function O(x,T){b(i=x,T),o=f,s=p,a=g,u=h,l=m,d.point=b}function M(){n(f,p,c,g,h,m,o,s,i,a,u,l,Op,r),d.lineEnd=I,I()}return d}}var FE=id({point:function(e,t){this.stream.point(e*Mn,t*Mn)}});function kE(e){return GE(function(){return e})()}function GE(e){var t,n=150,r=480,i=250,o,s,a=0,u=0,l=0,c=0,f=0,p,g,h=null,m=Cp,d=null,y,v,b,I=xp,w=.5,O=Pp(A,w),M,x;function T(N){return N=g(N[0]*Mn,N[1]*Mn),[N[0]*n+o,s-N[1]*n]}function k(N){return N=g.invert((N[0]-o)/n,(s-N[1])/n),N&&[N[0]*ui,N[1]*ui]}function A(N,z){return N=t(N,z),[N[0]*n+o,s-N[1]*n]}T.stream=function(N){return M&&x===N?M:M=FE(m(p,O(I(x=N))))},T.clipAngle=function(N){return arguments.length?(m=+N?TE(h=N*Mn,6*Mn):(h=null,Cp),$()):h*ui},T.clipExtent=function(N){return arguments.length?(I=N==null?(d=y=v=b=null,xp):IE(d=+N[0][0],y=+N[0][1],v=+N[1][0],b=+N[1][1]),$()):d==null?null:[[d,y],[v,b]]},T.scale=function(N){return arguments.length?(n=+N,C()):n},T.translate=function(N){return arguments.length?(r=+N[0],i=+N[1],C()):[r,i]},T.center=function(N){return arguments.length?(a=N[0]%360*Mn,u=N[1]%360*Mn,C()):[a*ui,u*ui]},T.rotate=function(N){return arguments.length?(l=N[0]%360*Mn,c=N[1]%360*Mn,f=N.length>2?N[2]%360*Mn:0,C()):[l*ui,c*ui,f*ui]},T.precision=function(N){return arguments.length?(O=Pp(A,w=N*N),$()):Jo(w)},T.fitExtent=function(N,z){return od(T,N,z)},T.fitSize=function(N,z){return RE(T,N,z)};function C(){g=Qg(p=_E(l,c,f),t);var N=t(a,u);return o=r-N[0]*n,s=i+N[1]*n,$()}function $(){return M=x=null,T}return function(){return t=e.apply(this,arguments),T.invert=t.invert&&k,C()}}function sd(e){return function(t,n){var r=Xt(t),i=Xt(n),o=e(r*i);return[o*i*Yt(t),o*Yt(n)]}}function ad(e){return function(t,n){var r=Jo(t*t+n*n),i=e(r),o=Yt(i),s=Xt(i);return[Bo(t*o,r*s),Hi(r&&n*o/r)]}}var BE=sd(function(e){return Jo(2/(1+e))});BE.invert=ad(function(e){return 2*Hi(e/2)});var ud=sd(function(e){return(e=Jg(e))&&e/Yt(e)});ud.invert=ad(function(e){return e});function zE(){return kE(ud).scale(79.4188).clipAngle(180-.001)}function Tp(e,t){return[e,t]}Tp.invert=Tp;function UE(e,t,n){n=n||{};var r=n.units||"kilometers",i=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return Ig(e,function(s){var a=ca(s,t,r,i);a&&o.push(a)}),dl(o);case"FeatureCollection":return fp(e,function(s){var a=ca(s,t,r,i);a&&fp(a,function(u){u&&o.push(u)})}),dl(o)}return ca(e,t,r,i)}function ca(e,t,n,r){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var s=[];return Ig(e,function(m){var d=ca(m,t,n,r);d&&s.push(d)}),dl(s)}var a=qE(o),u={type:o.type,coordinates:cd(o.coordinates,a)},l=new ic,c=l.read(u),f=Zb(Kb(t,n),"meters"),p=ue.bufferOp(c,f,r),g=new Mg;if(p=g.write(p),!ld(p.coordinates)){var h={type:p.type,coordinates:fd(p.coordinates,a)};return Za(h,i)}}function ld(e){return Array.isArray(e[0])?ld(e[0]):isNaN(e[0])}function cd(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return cd(n,t)})}function fd(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return fd(n,t)})}function qE(e){var t=Qb(e).geometry.coordinates,n=[-t[0],-t[1]];return zE().rotate(n).scale(Ze)}function VE(e,t){var n=Pa(e),r=Pa(t),i=e.properties||{},o=_g.difference(n.coordinates,r.coordinates);return o.length===0?null:o.length===1?bg(o[0],i):Eg(o,i)}function Rp(e){let t;for(const n of e)t&&n[0]-t[0]>=180?n[0]-=360:t&&n[0]-t[0]<-180&&(n[0]+=360),t=n}function Mp(e,t){const n=VE({type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]},e);if(!n)return;n.properties={isMask:"y"};const r=UE(e,0);if(r.geometry.type==="Polygon")for(const i of r.geometry.coordinates)Rp(i);else for(const i of r.geometry.coordinates)for(const o of i)Rp(o);t({type:"FeatureCollection",features:[r,n]})}let Ap={type:"FeatureCollection",features:[]};function jE(e,t,n=!0,r=!0,i={},o={},s={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}}){let a,u=[],l,c;function f(){(s!=null&&s.fill||s!=null&&s.line)&&e.addSource("full-geom",{type:"geojson",data:Ap}),s!=null&&s.fill&&e.addLayer({...s==null?void 0:s.fill,id:"full-geom-fill",type:"fill",source:"full-geom"}),s!=null&&s.line&&e.addLayer({...s==null?void 0:s.line,id:"full-geom-line",type:"line",source:"full-geom"})}e.loaded()?f():e.once("load",()=>{f()});const p=h=>{a==null||a({type:"mapClick",coordinates:[h.lngLat.lng,h.lngLat.lat]})};function g(h=!1){if(!t)throw new Error;const m=document.createElement("div");return h&&m.classList.add("marker-interactive"),new vb({props:{displayIn:"maplibre"},target:m}),new t.Marker({element:m,offset:[1,-13]})}return{setEventHandler(h){h?(a=h,e.on("click",p)):(a=void 0,e.off("click",p))},flyTo(h,m){e.flyTo({center:h,zoom:m,...i})},fitBounds(h,m,d){e.fitBounds([[h[0],h[1]],[h[2],h[3]]],{padding:m,maxZoom:d,...o})},indicateReverse(h){e.getCanvasContainer().style.cursor=h?"crosshair":""},setReverseMarker(h){!t||!n||(c?h?c.setLngLat(h):(c.remove(),c=void 0):h&&(c=(typeof n=="object"?new t.Marker(n):g()).setLngLat(h).addTo(e),c.getElement().classList.add("marker-reverse")))},setMarkers(h,m){if(!n)return;function d(y){var v;(v=e.getSource("full-geom"))==null||v.setData(y)}for(const y of u)y.remove();if(u.length=0,d(Ap),!!t){if(m){let y=!1;if(m.geometry.type==="GeometryCollection"){const v=m.geometry.geometries.filter(b=>b.type==="Polygon"||b.type==="MultiPolygon");if(v.length>0){let b=v.pop();for(const I of v)b=Jb(b,I);Mp({...m,geometry:b},d),y=!0}else{const b=m.geometry.geometries.filter(I=>I.type==="LineString"||I.type==="MultiLineString");b.length>0&&(d({...m,geometry:{type:"GeometryCollection",geometries:b}}),y=!0)}}if(!y){if(m.geometry.type==="Polygon"||m.geometry.type==="MultiPolygon")Mp(m,d);else if(m.geometry.type==="LineString"||m.geometry.type==="MultiLineString"){d(m);return}}n&&u.push((typeof n=="object"?new t.Marker(n):g()).setLngLat(m.center).addTo(e))}if(r)for(const y of h??[]){if(y===m)continue;const v=(typeof r=="object"?new t.Marker(r):g(!0)).setLngLat(y.center).setPopup(new t.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(y.place_type[0]==="reverse"?y.place_name:y.place_name.replace(/,.*/,""))).addTo(e),b=v.getElement();b.addEventListener("click",I=>{I.stopPropagation(),a==null||a({type:"markerClick",id:y.id})}),b.addEventListener("mouseenter",()=>{a==null||a({type:"markerMouseEnter",id:y.id}),v.togglePopup()}),b.addEventListener("mouseleave",()=>{a==null||a({type:"markerMouseLeave",id:y.id}),v.togglePopup()}),u.push(v)}}},setSelectedMarker(h){l&&l.getElement().classList.toggle("marker-selected",!1),l=h>-1?u[h]:void 0,l==null||l.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const h=e.getCenter();return[e.getZoom(),h.lng,h.lat]}}}function WE(e){let t,n;return{c(){t=jr("svg"),n=jr("path"),this.h()},l(r){t=Wr(r,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var i=It(t);n=Wr(i,"path",{d:!0}),It(n).forEach(U),i.forEach(U),this.h()},h(){R(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),R(t,"viewBox","0 0 14 14"),R(t,"width","13"),R(t,"height","13"),R(t,"class","svelte-en2qvf")},m(r,i){nt(r,t,i),ft(t,n)},p:zt,i:zt,o:zt,d(r){r&&U(t)}}}class pd extends ge{constructor(t){super(),de(this,t,null,WE,Jt,{})}}function XE(e){let t,n;return{c(){t=jr("svg"),n=jr("path"),this.h()},l(r){t=Wr(r,"svg",{viewBox:!0,fill:!0,xmlns:!0,class:!0});var i=It(t);n=Wr(i,"path",{d:!0}),It(n).forEach(U),i.forEach(U),this.h()},h(){R(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),R(t,"viewBox","0 0 30 30"),R(t,"fill","none"),R(t,"xmlns","http://www.w3.org/2000/svg"),R(t,"class","svelte-d2loi5")},m(r,i){nt(r,t,i),ft(t,n)},p:zt,i:zt,o:zt,d(r){r&&U(t)}}}class hd extends ge{constructor(t){super(),de(this,t,null,XE,Jt,{})}}function YE(e){let t,n;return{c(){t=yt("img"),this.h()},l(r){t=_t(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(t.src,n=e[3]+"area.svg")||R(t,"src",n),R(t,"alt",e[6]),R(t,"class","svelte-ltkwvy")},m(r,i){nt(r,t,i)},p(r,i){i&8&&!De(t.src,n=r[3]+"area.svg")&&R(t,"src",n),i&64&&R(t,"alt",r[6])},d(r){r&&U(t)}}}function HE(e){let t,n;return{c(){t=yt("img"),this.h()},l(r){t=_t(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(t.src,n=e[3]+"reverse.svg")||R(t,"src",n),R(t,"alt",e[6]),R(t,"class","svelte-ltkwvy")},m(r,i){nt(r,t,i)},p(r,i){i&8&&!De(t.src,n=r[3]+"reverse.svg")&&R(t,"src",n),i&64&&R(t,"alt",r[6])},d(r){r&&U(t)}}}function ZE(e){let t,n;return{c(){t=yt("img"),this.h()},l(r){t=_t(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(t.src,n=e[3]+"poi.svg")||R(t,"src",n),R(t,"alt",e[6]),R(t,"class","svelte-ltkwvy")},m(r,i){nt(r,t,i)},p(r,i){i&8&&!De(t.src,n=r[3]+"poi.svg")&&R(t,"src",n),i&64&&R(t,"alt",r[6])},d(r){r&&U(t)}}}function KE(e){let t,n;return{c(){t=yt("img"),this.h()},l(r){t=_t(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(t.src,n=e[3]+"postal_code.svg")||R(t,"src",n),R(t,"alt",e[6]),R(t,"class","svelte-ltkwvy")},m(r,i){nt(r,t,i)},p(r,i){i&8&&!De(t.src,n=r[3]+"postal_code.svg")&&R(t,"src",n),i&64&&R(t,"alt",r[6])},d(r){r&&U(t)}}}function JE(e){let t,n;return{c(){t=yt("img"),this.h()},l(r){t=_t(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(t.src,n=e[3]+"street.svg")||R(t,"src",n),R(t,"alt",e[6]),R(t,"class","svelte-ltkwvy")},m(r,i){nt(r,t,i)},p(r,i){i&8&&!De(t.src,n=r[3]+"street.svg")&&R(t,"src",n),i&64&&R(t,"alt",r[6])},d(r){r&&U(t)}}}function QE(e){let t,n;return{c(){t=yt("img"),this.h()},l(r){t=_t(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(t.src,n=e[3]+"road.svg")||R(t,"src",n),R(t,"alt",e[6]),R(t,"class","svelte-ltkwvy")},m(r,i){nt(r,t,i)},p(r,i){i&8&&!De(t.src,n=r[3]+"road.svg")&&R(t,"src",n),i&64&&R(t,"alt",r[6])},d(r){r&&U(t)}}}function $E(e){let t,n;return{c(){t=yt("img"),this.h()},l(r){t=_t(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(t.src,n=e[3]+"housenumber.svg")||R(t,"src",n),R(t,"alt",e[6]),R(t,"class","svelte-ltkwvy")},m(r,i){nt(r,t,i)},p(r,i){i&8&&!De(t.src,n=r[3]+"housenumber.svg")&&R(t,"src",n),i&64&&R(t,"alt",r[6])},d(r){r&&U(t)}}}function tS(e){let t,n,r,i;return{c(){t=yt("img"),this.h()},l(o){t=_t(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(t.src,n=e[5])||R(t,"src",n),R(t,"alt",e[4]),R(t,"class","svelte-ltkwvy")},m(o,s){nt(o,t,s),r||(i=ze(t,"error",e[14]),r=!0)},p(o,s){s&32&&!De(t.src,n=o[5])&&R(t,"src",n),s&16&&R(t,"alt",o[4])},d(o){o&&U(t),r=!1,i()}}}function Dp(e){let t,n;return{c(){t=yt("span"),n=Ai(e[6]),this.h()},l(r){t=_t(r,"SPAN",{class:!0});var i=It(t);n=Di(i,e[6]),i.forEach(U),this.h()},h(){R(t,"class","secondary svelte-ltkwvy")},m(r,i){nt(r,t,i),ft(t,n)},p(r,i){i&64&&hs(n,r[6])},d(r){r&&U(t)}}}function eS(e){var M,x;let t,n,r,i,o,s,a,u,l=(e[7]?e[0].place_name:e[0].place_name.replace(/,.*/,""))+"",c,f,p=e[2]==="always"||e[2]&&!e[0].address&&((M=e[0].properties)==null?void 0:M.kind)!=="road"&&((x=e[0].properties)==null?void 0:x.kind)!=="road_relation"&&!e[0].id.startsWith("address.")&&!e[0].id.startsWith("postal_code.")&&(!e[0].id.startsWith("poi.")||!e[5])&&!e[7],g,h,m=(e[7]?"":e[0].place_name.replace(/[^,]*,?\s*/,""))+"",d,y,v;function b(T,k){var A,C;return k&1&&(n=null),k&1&&(r=null),k&1&&(i=null),T[5]?tS:T[0].address?$E:((A=T[0].properties)==null?void 0:A.kind)==="road"||((C=T[0].properties)==null?void 0:C.kind)==="road_relation"?QE:(n==null&&(n=!!T[0].id.startsWith("address.")),n?JE:(r==null&&(r=!!T[0].id.startsWith("postal_code.")),r?KE:(i==null&&(i=!!T[0].id.startsWith("poi.")),i?ZE:T[7]?HE:YE)))}let I=b(e,-1),w=I(e),O=p&&Dp(e);return{c(){t=yt("li"),w.c(),o=Vt(),s=yt("span"),a=yt("span"),u=yt("span"),c=Ai(l),f=Vt(),O&&O.c(),g=Vt(),h=yt("span"),d=Ai(m),this.h()},l(T){t=_t(T,"LI",{tabindex:!0,"data-selected":!0,class:!0});var k=It(t);w.l(k),o=jt(k),s=_t(k,"SPAN",{class:!0});var A=It(s);a=_t(A,"SPAN",{class:!0});var C=It(a);u=_t(C,"SPAN",{class:!0});var $=It(u);c=Di($,l),$.forEach(U),f=jt(C),O&&O.l(C),C.forEach(U),g=jt(A),h=_t(A,"SPAN",{class:!0});var N=It(h);d=Di(N,m),N.forEach(U),A.forEach(U),k.forEach(U),this.h()},h(){R(u,"class","primary svelte-ltkwvy"),R(a,"class","svelte-ltkwvy"),R(h,"class","line2 svelte-ltkwvy"),R(s,"class","texts svelte-ltkwvy"),R(t,"tabindex","0"),R(t,"data-selected",e[1]),R(t,"class","svelte-ltkwvy"),Lr(t,"selected",e[1])},m(T,k){nt(T,t,k),w.m(t,null),ft(t,o),ft(t,s),ft(s,a),ft(a,u),ft(u,c),ft(a,f),O&&O.m(a,null),ft(s,g),ft(s,h),ft(h,d),y||(v=[ze(t,"mouseenter",e[12]),ze(t,"focus",e[13])],y=!0)},p(T,[k]){var A,C;I===(I=b(T,k))&&w?w.p(T,k):(w.d(1),w=I(T),w&&(w.c(),w.m(t,o))),k&1&&l!==(l=(T[7]?T[0].place_name:T[0].place_name.replace(/,.*/,""))+"")&&hs(c,l),k&37&&(p=T[2]==="always"||T[2]&&!T[0].address&&((A=T[0].properties)==null?void 0:A.kind)!=="road"&&((C=T[0].properties)==null?void 0:C.kind)!=="road_relation"&&!T[0].id.startsWith("address.")&&!T[0].id.startsWith("postal_code.")&&(!T[0].id.startsWith("poi.")||!T[5])&&!T[7]),p?O?O.p(T,k):(O=Dp(T),O.c(),O.m(a,null)):O&&(O.d(1),O=null),k&1&&m!==(m=(T[7]?"":T[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&hs(d,m),k&2&&R(t,"data-selected",T[1]),k&2&&Lr(t,"selected",T[1])},i:zt,o:zt,d(T){T&&U(t),w.d(),O&&O.d(),y=!1,qa(v)}}}function nS(e,t,n){var b;let r,i,{feature:o}=t,{selected:s=!1}=t,{showPlaceType:a}=t,{missingIconsCache:u}=t,{iconsBaseUrl:l}=t;const c=(b=o.properties)==null?void 0:b.categories;let f,p,g=0,h=o.place_type[0]==="reverse";function m(I){p&&u.add(p),n(10,g++,g)}function d(I){on.call(this,e,I)}function y(I){on.call(this,e,I)}const v=I=>m(I.currentTarget);return e.$$set=I=>{"feature"in I&&n(0,o=I.feature),"selected"in I&&n(1,s=I.selected),"showPlaceType"in I&&n(2,a=I.showPlaceType),"missingIconsCache"in I&&n(9,u=I.missingIconsCache),"iconsBaseUrl"in I&&n(3,l=I.iconsBaseUrl)},e.$$.update=()=>{var I,w,O,M;if(e.$$.dirty&3640)do n(11,r--,r),n(4,f=c==null?void 0:c[r]),n(5,p=f?l+f.replace(/ /g,"_")+".svg":void 0);while(r>-1&&(!p||u.has(p)));e.$$.dirty&1&&n(6,i=o.id.startsWith("poi.")?(w=(I=o.properties)==null?void 0:I.categories)==null?void 0:w.join(", "):((M=(O=o.properties)==null?void 0:O.place_type_name)==null?void 0:M[0])??o.place_type[0])},n(11,r=(c==null?void 0:c.length)??0),[o,s,a,l,f,p,i,h,m,u,g,r,d,y,v]}class rS extends ge{constructor(t){super(),de(this,t,nS,eS,Jt,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function iS(e){let t,n='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>';return{c(){t=yt("div"),t.innerHTML=n,this.h()},l(r){t=_t(r,"DIV",{class:!0,"data-svelte-h":!0}),Qp(t)!=="svelte-r6ogid"&&(t.innerHTML=n),this.h()},h(){R(t,"class","svelte-7cmwmc")},m(r,i){nt(r,t,i)},p:zt,i:zt,o:zt,d(r){r&&U(t)}}}class oS extends ge{constructor(t){super(),de(this,t,null,iS,Jt,{})}}function sS(e){let t,n;return{c(){t=jr("svg"),n=jr("path"),this.h()},l(r){t=Wr(r,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var i=It(t);n=Wr(i,"path",{d:!0}),It(n).forEach(U),i.forEach(U),this.h()},h(){R(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),R(t,"viewBox","0 0 60.006 21.412"),R(t,"width","14"),R(t,"height","20"),R(t,"class","svelte-en2qvf")},m(r,i){nt(r,t,i),ft(t,n)},p:zt,i:zt,o:zt,d(r){r&&U(t)}}}class aS extends ge{constructor(t){super(),de(this,t,null,sS,Jt,{})}}function uS(e){let t,n,r;return{c(){t=jr("svg"),n=jr("circle"),r=jr("path"),this.h()},l(i){t=Wr(i,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var o=It(t);n=Wr(o,"circle",{cx:!0,cy:!0,r:!0,style:!0}),It(n).forEach(U),r=Wr(o,"path",{d:!0,style:!0}),It(r).forEach(U),o.forEach(U),this.h()},h(){R(n,"cx","4.789"),R(n,"cy","4.787"),R(n,"r","3.85"),js(n,"stroke-width","1.875"),js(n,"fill","none"),R(r,"d","M12.063 12.063 7.635 7.635"),js(r,"stroke-width","1.875"),js(r,"stroke-linecap","round"),R(t,"xmlns","http://www.w3.org/2000/svg"),R(t,"width","13"),R(t,"height","13"),R(t,"viewBox","0 0 13 13"),R(t,"class","svelte-1bpbt60")},m(i,o){nt(i,t,o),ft(t,n),ft(t,r)},p:zt,i:zt,o:zt,d(i){i&&U(t)}}}class lS extends ge{constructor(t){super(),de(this,t,null,uS,Jt,{})}}function cS(e,t,n){const r=t[1],i=t[0],o=r-i;return e===r&&n?e:((e-i)%o+o)%o+i}function Fp(e){const t=[...e];return t[2]<t[0]&&(t[2]+=360),t}let rs;async function fS(e,t,n){const r=e==null?void 0:e.getCenterAndZoom();for(const i of t??[])if(!(r&&(i.minZoom!=null&&i.minZoom>r[0]||i.maxZoom!=null&&i.maxZoom<r[0]))){if(i.type==="fixed")return i.coordinates.join(",");t:if(i.type==="client-geolocation"){if(rs&&i.cachedLocationExpiry&&rs.time+i.cachedLocationExpiry>Date.now()){if(!rs.coords)break t;return rs.coords}let o;try{return o=await new Promise((s,a)=>{n.signal.addEventListener("abort",()=>{a(Error("aborted"))}),navigator.geolocation.getCurrentPosition(u=>{s([u.coords.longitude,u.coords.latitude].map(l=>l.toFixed(6)).join(","))},u=>{a(u)},i)}),o}catch{}finally{i.cachedLocationExpiry&&(rs={time:Date.now(),coords:o})}if(n.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(r&&i.type==="map-center")return r[1].toFixed(6)+","+r[2].toFixed(6)}}const pS=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*(EAST|WEST|[EW])?$/i,kp=/^([+-]?[0-8]?[0-9])\s+([0-5]?[0-9]\.\d{3,})[\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\s+([0-5]?[0-9]\.\d{3,})$/,Gp=/^(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(EAST|WEST|[EW])?$/i,Bp=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?$/i,zp=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?$/i,Up=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|’’|´´|["″”\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|´´|’’|["″”\.])?\s*(EAST|WEST|[EW])?$/i;function hS(e){if(!["DMS","DM","DD"].includes(e))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){const t=this.decimalCoordinates.split(",").map(g=>Number(g.trim())),n=Number(t[0]),r=Number(t[1]),i=Math.abs(n),o=Math.abs(r),s=n>0?"N":"S",a=r>0?"E":"W";let u;e=="DD"&&(u=`${i}° ${s}, ${o}° ${a}`);const l=Math.floor(i),c=Math.floor(o),f=(i-l)*60,p=(o-c)*60;if(e=="DM"){let g=qp(f,3).toFixed(3).padStart(6,"0"),h=qp(p,3).toFixed(3).padStart(6,"0");g.endsWith(".000")&&h.endsWith(".000")&&(g=g.replace(/\.000$/,""),h=h.replace(/\.000$/,"")),u=`${l}° ${g}' ${s}, ${c}° ${h}' ${a}`}if(e=="DMS"){const g=Math.floor(f),h=Math.floor(p);let m=((f-g)*60).toFixed(1).padStart(4,"0"),d=((p-h)*60).toFixed(1).padStart(4,"0");const y=g.toString().padStart(2,"0"),v=h.toString().padStart(2,"0");m.endsWith(".0")&&d.endsWith(".0")&&(m=m.replace(/\.0$/,""),d=d.replace(/\.0$/,"")),u=`${l}° ${y}' ${m}" ${s}, ${c}° ${v}' ${d}" ${a}`}return u}else throw new Error("no decimal coordinates to convert")}function qp(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}function hc(e,t){t||(t=5),e=e.replace(/\s+/g," ").trim();let n=null,r=null,i="",o="",s=null,a=[],u=!1;if(pS.test(e))throw new Error("invalid coordinate value");if(kp.test(e))if(a=kp.exec(e),u=is(a),u)n=Math.abs(a[1])+a[2]/60,Number(a[1])<0&&(n*=-1),r=Math.abs(a[3])+a[4]/60,Number(a[3])<0&&(r*=-1),s="DM";else throw new Error("invalid coordinate format");else if(Gp.test(e))if(a=Gp.exec(e),u=is(a),u){if(n=a[2],r=a[6],n.includes(",")&&(n=n.replace(",",".")),r.includes(",")&&(r=r.replace(",",".")),s="DD",Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(r))==Number(r))throw new Error("integer only coordinate provided");a[1]?(i=a[1],o=a[5]):a[4]&&(i=a[4],o=a[8])}else throw new Error("invalid decimal coordinate format");else if(Bp.test(e))if(a=Bp.exec(e),u=is(a),u)n=Math.abs(parseInt(a[2])),a[4]&&(n+=a[4]/60,s="DM"),a[6]&&(n+=a[6].replace(",",".")/3600,s="DMS"),parseInt(a[2])<0&&(n=-1*n),r=Math.abs(parseInt(a[9])),a[11]&&(r+=a[11]/60),a[13]&&(r+=a[13].replace(",",".")/3600),parseInt(a[9])<0&&(r=-1*r),a[1]?(i=a[1],o=a[8]):a[7]&&(i=a[7],o=a[14]);else throw new Error("invalid DMS coordinates format");else if(zp.test(e))if(a=zp.exec(e),u=is(a),u)n=Math.abs(parseInt(a[2])),a[4]&&(n+=a[4]/60,s="DM"),a[6]&&(n+=a[6]/3600,s="DMS"),parseInt(a[2])<0&&(n=-1*n),r=Math.abs(parseInt(a[10])),a[12]&&(r+=a[12]/60),a[14]&&(r+=a[14]/3600),parseInt(a[10])<0&&(r=-1*r),a[1]?(i=a[1],o=a[9]):a[8]&&(i=a[8],o=a[16]);else throw new Error("invalid DMS coordinates format");else if(Up.test(e)){if(a=Up.exec(e),u=is(a),a.filter(l=>l).length<=5)throw new Error("invalid coordinates format");if(u)n=Math.abs(parseInt(a[2])),a[4]&&(n+=a[4].replace(",",".")/60,s="DM"),a[6]&&(n+=a[6].replace(",",".")/3600,s="DMS"),parseInt(a[2])<0&&(n=-1*n),r=Math.abs(parseInt(a[10])),a[12]&&(r+=a[12].replace(",",".")/60),a[14]&&(r+=a[14].replace(",",".")/3600),parseInt(a[10])<0&&(r=-1*r),a[1]?(i=a[1],o=a[9]):a[8]&&(i=a[8],o=a[16]);else throw new Error("invalid coordinates format")}if(u){if(Math.abs(r)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if(i&&!o||!i&&o)throw new Error("invalid coordinates value");if(i&&i==o)throw new Error("invalid coordinates format");n.toString().includes(",")&&(n=n.replace(",",".")),r.toString().includes(",")&&(r=r.replace(",","."));let l=/S|SOUTH/i;l.test(i)&&n>0&&(n=-1*n),l=/W|WEST/i,l.test(o)&&r>0&&(r=-1*r);const c=a[0].trim();let f,p;const g=/[,/;\u0020]/g,h=c.match(g);if(h==null){const y=Math.floor(e.length/2);f=c.substring(0,y).trim(),p=c.substring(y).trim()}else{let y;h.length%2==1?y=Math.floor(h.length/2):y=h.length/2-1;let v=0;if(y==0)v=c.indexOf(h[0]),f=c.substring(0,v).trim(),p=c.substring(v+1).trim();else{let b=0,I=0;for(;b<=y;)v=c.indexOf(h[b],I),I=v+1,b++;f=c.substring(0,v).trim(),p=c.substring(v+1).trim()}}const m=f.split(".");if(m.length==2&&m[1]==0&&m[1].length!=2)throw new Error("invalid coordinates format");const d=p.split(".");if(d.length==2&&d[1]==0&&d[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(f)||/^\d+$/.test(p))throw new Error("degree only coordinate/s provided");return n=Number(Number(n).toFixed(t)),r=Number(Number(r).toFixed(t)),Object.freeze({verbatimCoordinates:c,verbatimLatitude:f,verbatimLongitude:p,decimalLatitude:n,decimalLongitude:r,decimalCoordinates:`${n},${r}`,originalFormat:s,closeEnough:gS,toCoordinateFormat:hS})}else throw new Error("coordinates pattern match failed")}function is(e){if(!isNaN(e[0]))return!1;const t=[...e];if(t.shift(),t.length%2>0)return!1;const n=/^[-+]?\d+([\.,]\d+)?$/,r=/[eastsouthnorthwest]+/i,i=t.length/2;for(let o=0;o<i;o++){const s=t[o],a=t[o+i],u=n.test(s)&&n.test(a),l=r.test(s)&&r.test(a),c=s==a;if(!(s==null&&a==null)){if(s==null||a==null)return!1;if(u||l||c)continue;return!1}}return!0}function Vp(e,t){const n=Math.abs(e-t);return Number(n.toFixed(6))<=1e-5}function gS(e){if(!e)throw new Error("coords must be provided");if(e.includes(",")){const t=e.split(",");if(Number(t[0])==NaN||Number(t[1])==NaN)throw new Error("coords are not valid decimals");return Vp(this.decimalLatitude,Number(t[0]))&&Vp(this.decimalLongitude,t[1])}else throw new Error("coords being tested must be separated by a comma")}const dS=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});hc.to=dS;const mS=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:'40° 7´ 22.8" N 74° 7´ 22.8" W',verbatimLatitude:'40° 7´ 22.8" N',verbatimLongitude:'74° 7´ 22.8" W'},{verbatimCoordinates:"40° 7.38’ , -74° 7.38’",verbatimLatitude:"40° 7.38’",verbatimLongitude:"-74° 7.38’"},{verbatimCoordinates:"N40°7’22.8’’, W74°7’22.8’’",verbatimLatitude:"N40°7’22.8’’",verbatimLongitude:"W74°7’22.8’’"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:`40°7'22.8"N, 74°7'22.8"W`,verbatimLatitude:`40°7'22.8"N`,verbatimLongitude:`74°7'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123°,-74.123°",verbatimLatitude:"40.123°",verbatimLongitude:"-74.123°"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40°7’23"N 74°7’23"W',verbatimLatitude:'40°7’23"N',verbatimLongitude:'74°7’23"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40°7’23"S 74°7’23"E',verbatimLatitude:'40°7’23"S',verbatimLongitude:'74°7’23"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40°7’23" -74°7’23"',verbatimLatitude:'40°7’23"',verbatimLongitude:'-74°7’23"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7’ 23" N 74d 7’ 23" W',verbatimLatitude:'40d 7’ 23" N',verbatimLongitude:'74d 7’ 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],yS={decimalLatitude:40.123,decimalLongitude:-74.123},_S=[{verbatimCoordinates:`50°4'17.698"south, 14°24'2.826"east`,verbatimLatitude:`50°4'17.698"south`,verbatimLongitude:`14°24'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"40°26′47″N 79°58′36″W",verbatimLatitude:"40°26′47″N",verbatimLongitude:"79°58′36″W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26′ 47″ N 79d 58′ 36″ W",verbatimLatitude:"40d 26′ 47″ N",verbatimLongitude:"79d 58′ 36″ W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195° 79,948862°",verbatimLatitude:"40,446195°",verbatimLongitude:"79,948862°",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40° 26.7717, -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"18°24S 22°45E",verbatimLatitude:"18°24S",verbatimLongitude:"22°45E",decimalLatitude:-18.4,decimalLongitude:22.75}],vS=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245° S / 28.2344° E",verbatimLatitude:"-23.3245° S",verbatimLongitude:"28.2344° E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40° 26.7717 -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563 °  E22.45634 °",verbatimLatitude:"S23.43563 °",verbatimLongitude:"E22.45634 °",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372° S 23,07771° E",verbatimLatitude:"27,71372° S",verbatimLongitude:"23,07771° E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48° 30,6410', E 18° 57,4583'",verbatimLatitude:"N 48° 30,6410'",verbatimLongitude:"E 18° 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764},{verbatimCoordinates:"1.23456, 18.33453",verbatimLatitude:"1.23456",verbatimLongitude:"18.33453",decimalLatitude:1.23456,decimalLongitude:18.33453}];function bS(){const e=[];return mS.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...yS})}),[...e,..._S,...vS]}const ES=bS();hc.formats=ES.map(e=>e.verbatimCoordinates);const SS=hc;function jp(e,t,n){const r=e.slice();return r[81]=t[n],r[83]=n,r}function Wp(e){let t,n;return t=new oS({}),{c(){$t(t.$$.fragment)},l(r){te(t.$$.fragment,r)},m(r,i){ee(t,r,i),n=!0},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){Z(t.$$.fragment,r),n=!1},d(r){ne(t,r)}}}function Xp(e){let t,n,r,i,o;return n=new aS({}),{c(){t=yt("button"),$t(n.$$.fragment),this.h()},l(s){t=_t(s,"BUTTON",{type:!0,title:!0,class:!0});var a=It(t);te(n.$$.fragment,a),a.forEach(U),this.h()},h(){R(t,"type","button"),R(t,"title",e[9]),R(t,"class","svelte-zh3kmv"),Lr(t,"active",e[0])},m(s,a){nt(s,t,a),ee(n,t,null),r=!0,i||(o=ze(t,"click",e[67]),i=!0)},p(s,a){(!r||a[0]&512)&&R(t,"title",s[9]),(!r||a[0]&1)&&Lr(t,"active",s[0])},i(s){r||(X(n.$$.fragment,s),r=!0)},o(s){Z(n.$$.fragment,s),r=!1},d(s){s&&U(t),ne(n),i=!1,o()}}}function IS(e){let t,n=[],r=new Map,i,o,s,a=mc(e[14]);const u=l=>l[81].id+(l[81].address?","+l[81].address:"");for(let l=0;l<a.length;l+=1){let c=jp(e,a,l),f=u(c);r.set(f,n[l]=Yp(f,c))}return{c(){t=yt("ul");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){t=_t(l,"UL",{class:!0});var c=It(t);for(let f=0;f<n.length;f+=1)n[f].l(c);c.forEach(U),this.h()},h(){R(t,"class","svelte-zh3kmv")},m(l,c){nt(l,t,c);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);i=!0,o||(s=[ze(t,"mouseleave",e[71]),ze(t,"blur",e[72])],o=!0)},p(l,c){c[0]&17880064&&(a=mc(l[14]),Fn(),n=zd(n,c,u,1,l,a,r,t,Ud,Yp,null,jp),kn())},i(l){if(!i){for(let c=0;c<a.length;c+=1)X(n[c]);i=!0}},o(l){for(let c=0;c<n.length;c+=1)Z(n[c]);i=!1},d(l){l&&U(t);for(let c=0;c<n.length;c+=1)n[c].d();o=!1,qa(s)}}}function LS(e){let t,n,r,i,o,s;return n=new hd({}),{c(){t=yt("div"),$t(n.$$.fragment),r=Vt(),i=yt("div"),o=Ai(e[7]),this.h()},l(a){t=_t(a,"DIV",{class:!0});var u=It(t);te(n.$$.fragment,u),r=jt(u),i=_t(u,"DIV",{class:!0});var l=It(i);o=Di(l,e[7]),l.forEach(U),u.forEach(U),this.h()},h(){R(i,"class","svelte-zh3kmv"),R(t,"class","no-results svelte-zh3kmv")},m(a,u){nt(a,t,u),ee(n,t,null),ft(t,r),ft(t,i),ft(i,o),s=!0},p(a,u){(!s||u[0]&128)&&hs(o,a[7])},i(a){s||(X(n.$$.fragment,a),s=!0)},o(a){Z(n.$$.fragment,a),s=!1},d(a){a&&U(t),ne(n)}}}function NS(e){let t="",n;return{c(){n=Ai(t)},l(r){n=Di(r,t)},m(r,i){nt(r,n,i)},p:zt,i:zt,o:zt,d(r){r&&U(n)}}}function xS(e){let t,n,r,i,o,s,a,u,l,c,f;return n=new hd({}),u=new pd({}),{c(){t=yt("div"),$t(n.$$.fragment),r=Vt(),i=yt("div"),o=Ai(e[6]),s=Vt(),a=yt("button"),$t(u.$$.fragment),this.h()},l(p){t=_t(p,"DIV",{class:!0});var g=It(t);te(n.$$.fragment,g),r=jt(g),i=_t(g,"DIV",{class:!0});var h=It(i);o=Di(h,e[6]),h.forEach(U),s=jt(g),a=_t(g,"BUTTON",{class:!0});var m=It(a);te(u.$$.fragment,m),m.forEach(U),g.forEach(U),this.h()},h(){R(i,"class","svelte-zh3kmv"),R(a,"class","svelte-zh3kmv"),R(t,"class","error svelte-zh3kmv")},m(p,g){nt(p,t,g),ee(n,t,null),ft(t,r),ft(t,i),ft(i,o),ft(t,s),ft(t,a),ee(u,a,null),l=!0,c||(f=ze(a,"click",e[68]),c=!0)},p(p,g){(!l||g[0]&64)&&hs(o,p[6])},i(p){l||(X(n.$$.fragment,p),X(u.$$.fragment,p),l=!0)},o(p){Z(n.$$.fragment,p),Z(u.$$.fragment,p),l=!1},d(p){p&&U(t),ne(n),ne(u),c=!1,f()}}}function Yp(e,t){let n,r,i;function o(){return t[69](t[83])}function s(){return t[70](t[81])}return r=new rS({props:{feature:t[81],showPlaceType:t[10],selected:t[15]===t[83],missingIconsCache:t[20],iconsBaseUrl:t[12]}}),r.$on("mouseenter",o),r.$on("focus",s),{key:e,first:null,c(){n=ln(),$t(r.$$.fragment),this.h()},l(a){n=ln(),te(r.$$.fragment,a),this.h()},h(){this.first=n},m(a,u){nt(a,n,u),ee(r,a,u),i=!0},p(a,u){t=a;const l={};u[0]&16384&&(l.feature=t[81]),u[0]&1024&&(l.showPlaceType=t[10]),u[0]&49152&&(l.selected=t[15]===t[83]),u[0]&4096&&(l.iconsBaseUrl=t[12]),r.$set(l)},i(a){i||(X(r.$$.fragment,a),i=!0)},o(a){Z(r.$$.fragment,a),i=!1},d(a){a&&U(n),ne(r,a)}}}function wS(e){let t,n,r,i,o,s,a,u,l,c,f,p,g,h,m,d,y,v,b,I,w,O=!1;o=new lS({}),f=new pd({});let M=e[19]&&Wp(),x=e[5]===!0&&Xp(e);const T=e[59].default,k=Zi(T,e,e[58],null),A=[xS,NS,LS,IS],C=[];function $(N,z){var q,ot;return N[18]?0:N[16]?((q=N[14])==null?void 0:q.length)===0?2:N[16]&&((ot=N[14])!=null&&ot.length)?3:-1:1}return~(d=$(e))&&(y=C[d]=A[d](e)),{c(){t=Vt(),n=yt("form"),r=yt("div"),i=yt("button"),$t(o.$$.fragment),s=Vt(),a=yt("input"),u=Vt(),l=yt("div"),c=yt("button"),$t(f.$$.fragment),p=Vt(),M&&M.c(),g=Vt(),x&&x.c(),h=Vt(),k&&k.c(),m=Vt(),y&&y.c(),this.h()},l(N){t=jt(N),n=_t(N,"FORM",{tabindex:!0,class:!0});var z=It(n);r=_t(z,"DIV",{class:!0});var q=It(r);i=_t(q,"BUTTON",{class:!0,type:!0});var ot=It(i);te(o.$$.fragment,ot),ot.forEach(U),s=jt(q),a=_t(q,"INPUT",{placeholder:!0,"aria-label":!0,class:!0}),u=jt(q),l=_t(q,"DIV",{class:!0});var ht=It(l);c=_t(ht,"BUTTON",{type:!0,title:!0,class:!0});var St=It(c);te(f.$$.fragment,St),St.forEach(U),p=jt(ht),M&&M.l(ht),ht.forEach(U),g=jt(q),x&&x.l(q),h=jt(q),k&&k.l(q),q.forEach(U),m=jt(z),y&&y.l(z),z.forEach(U),this.h()},h(){R(i,"class","search-button svelte-zh3kmv"),R(i,"type","button"),R(a,"placeholder",e[8]),R(a,"aria-label",e[8]),R(a,"class","svelte-zh3kmv"),R(c,"type","button"),R(c,"title",e[3]),R(c,"class","svelte-zh3kmv"),R(l,"class","clear-button-container svelte-zh3kmv"),Lr(l,"displayable",e[1]!==""),R(r,"class","input-group svelte-zh3kmv"),R(n,"tabindex","0"),R(n,"class",v=fa(e[2])+" svelte-zh3kmv"),Lr(n,"can-collapse",e[4]&&e[1]==="")},m(N,z){nt(N,t,z),nt(N,n,z),ft(n,r),ft(r,i),ee(o,i,null),ft(r,s),ft(r,a),e[61](a),dc(a,e[1]),ft(r,u),ft(r,l),ft(l,c),ee(f,c,null),ft(l,p),M&&M.m(l,null),ft(r,g),x&&x.m(r,null),ft(r,h),k&&k.m(r,null),ft(n,m),~d&&C[d].m(n,null),b=!0,I||(w=[ze(i,"click",e[60]),ze(a,"input",e[62]),ze(a,"focus",e[63]),ze(a,"blur",e[64]),ze(a,"keydown",e[22]),ze(a,"input",e[65]),ze(c,"click",e[66]),ze(n,"submit",kd(e[21]))],I=!0)},p(N,z){(!b||z[0]&256)&&R(a,"placeholder",N[8]),(!b||z[0]&256)&&R(a,"aria-label",N[8]),z[0]&2&&a.value!==N[1]&&dc(a,N[1]),(!b||z[0]&8)&&R(c,"title",N[3]),N[19]?M?z[0]&524288&&X(M,1):(M=Wp(),M.c(),X(M,1),M.m(l,null)):M&&(Fn(),Z(M,1,1,()=>{M=null}),kn()),(!b||z[0]&2)&&Lr(l,"displayable",N[1]!==""),N[5]===!0?x?(x.p(N,z),z[0]&32&&X(x,1)):(x=Xp(N),x.c(),X(x,1),x.m(r,h)):x&&(Fn(),Z(x,1,1,()=>{x=null}),kn()),k&&k.p&&(!b||z[1]&134217728)&&Ki(k,T,N,N[58],b?Qi(T,N[58],z,null):Ji(N[58]),null);let q=d;d=$(N),d===q?~d&&C[d].p(N,z):(y&&(Fn(),Z(C[q],1,1,()=>{C[q]=null}),kn()),~d?(y=C[d],y?y.p(N,z):(y=C[d]=A[d](N),y.c()),X(y,1),y.m(n,null)):y=null),(!b||z[0]&4&&v!==(v=fa(N[2])+" svelte-zh3kmv"))&&R(n,"class",v),(!b||z[0]&22)&&Lr(n,"can-collapse",N[4]&&N[1]==="")},i(N){b||(X(O),X(o.$$.fragment,N),X(f.$$.fragment,N),X(M),X(x),X(k,N),X(y),b=!0)},o(N){Z(O),Z(o.$$.fragment,N),Z(f.$$.fragment,N),Z(M),Z(x),Z(k,N),Z(y),b=!1},d(N){N&&(U(t),U(n)),ne(o),e[61](null),ne(f),M&&M.d(),x&&x.d(),k&&k.d(N),~d&&C[d].d(),I=!1,qa(w)}}}function CS(e,t,n){let r,{$$slots:i={},$$scope:o}=t,{class:s=void 0}=t,{apiKey:a}=t,{bbox:u=void 0}=t,{clearButtonTitle:l="clear"}=t,{clearOnBlur:c=!1}=t,{collapsed:f=!1}=t,{country:p=void 0}=t,{debounceSearch:g=200}=t,{enableReverse:h=!1}=t,{errorMessage:m="Something went wrong…"}=t,{filter:d=()=>!0}=t,{flyTo:y=!0}=t,{fuzzyMatch:v=!0}=t,{language:b=void 0}=t,{limit:I=void 0}=t,{mapController:w=void 0}=t,{minLength:O=2}=t,{noResultsMessage:M="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=t,{placeholder:x="Search"}=t,{proximity:T=[{type:"server-geolocation"}]}=t,{reverseActive:k=h==="always"}=t,{reverseButtonTitle:A="toggle reverse geocoding"}=t,{searchValue:C=""}=t,{showFullGeometry:$=!0}=t,{showPlaceType:N="ifNeeded"}=t,{showResultsWhileTyping:z=!0}=t,{selectFirst:q=!0}=t,{flyToSelected:ot=!1}=t,{markerOnSelected:ht=!0}=t,{types:St=void 0}=t,{excludeTypes:Ot=!1}=t,{zoom:kt=16}=t,{maxZoom:qt=18}=t,{apiUrl:Kt="https://api.maptiler.com/geocoding"}=t,{fetchParameters:He={}}=t,{iconsBaseUrl:Ee="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.3/icons/"}=t,{adjustUrlQuery:me=P=>{}}=t;function On(){Qt.focus()}function Gr(){Qt.blur()}function Oi(P,se=!0,mn=!1){n(1,C=P),se?(n(15,gt=-1),gc()):(fu(!mn,mn),setTimeout(()=>{Qt.focus(),Qt.select()}))}function ii(){n(14,_=void 0),n(55,V=void 0),n(15,gt=-1)}function Br(){n(54,B=[]),n(55,V=void 0)}let tr=!1,_,B,V,Re="",Qt,gt=-1,dn,zs=[],Pi,so,Us,uu;const gd=new Set,oi=Ua();Hr(()=>{w&&(w.setEventHandler(void 0),w.indicateReverse(!1),w.setSelectedMarker(-1),w.setMarkers(void 0,void 0))});function gc(P){if(so&&(clearTimeout(so),so=void 0),gt>-1&&_)n(55,V=_[gt]),n(1,C=V.place_type[0]==="reverse"?V.place_name:V.place_name.replace(/,.*/,"")),n(18,dn=void 0),n(54,B=void 0),n(15,gt=-1);else if(C){const se=P||!lu(C);cu(C,{exact:!0}).then(()=>{n(54,B=_),n(55,V=void 0),se&&dd()}).catch(mn=>n(18,dn=mn))}}function lu(P){try{return SS(P,6)}catch{return!1}}async function cu(P,{byId:se=!1,exact:mn=!1}={}){n(18,dn=void 0),Pi==null||Pi.abort();const Pn=new AbortController;n(19,Pi=Pn);try{const dt=lu(P),Tn=new URLSearchParams;if(b!==void 0&&Tn.set("language",Array.isArray(b)?b.join(","):b??""),St&&Tn.set("types",St.join(",")),Ot&&Tn.set("excludeTypes",String(Ot)),u&&Tn.set("bbox",u.map(Vs=>Vs.toFixed(6)).join(",")),p&&Tn.set("country",Array.isArray(p)?p.join(","):p),!se&&!dt){const Vs=await fS(w,T,Pn);Vs&&Tn.set("proximity",Vs),(mn||!z)&&Tn.set("autocomplete","false"),Tn.set("fuzzyMatch",String(v))}I!==void 0&&(!dt||(St==null?void 0:St.length)===1)&&Tn.set("limit",String(I)),Tn.set("key",a),me(Tn);const qs=Kt+"/"+encodeURIComponent(dt?dt.decimalLongitude+","+dt.decimalLatitude:P)+".json?"+Tn.toString();if(qs===Re){se?(n(14,_=void 0),n(55,V=zs[0])):n(14,_=zs);return}Re=qs;const hu=await fetch(qs,{signal:Pn.signal,...He});if(!hu.ok)throw new Error(await hu.text());const gu=await hu.json();oi("response",{url:qs,featureCollection:gu}),se?(n(14,_=void 0),n(55,V=gu.features[0]),zs=[V]):(n(14,_=gu.features.filter(d)),dt&&_.unshift({type:"Feature",properties:{},id:"reverse_"+dt.decimalLongitude+"_"+dt.decimalLatitude,text:dt.decimalLatitude+", "+dt.decimalLongitude,place_name:dt.decimalLatitude+", "+dt.decimalLongitude,place_type:["reverse"],center:[dt.decimalLongitude,dt.decimalLatitude],bbox:[dt.decimalLongitude,dt.decimalLatitude,dt.decimalLongitude,dt.decimalLatitude],geometry:{type:"Point",coordinates:[dt.decimalLongitude,dt.decimalLatitude]}}),zs=_,dt&&Qt.focus())}catch(dt){if(dt&&typeof dt=="object"&&"name"in dt&&dt.name==="AbortError")return;throw dt}finally{Pn===Pi&&n(19,Pi=void 0)}}function dd(){var mn;if(!(B!=null&&B.length)||!y)return;const P=[180,90,-180,-90],se=!B.some(Pn=>!Pn.matching_text);for(const Pn of B)if(se||!Pn.matching_text)for(const dt of[0,1,2,3])P[dt]=Math[dt<2?"min":"max"](P[dt],((mn=Pn.bbox)==null?void 0:mn[dt])??Pn.center[dt%2]);w&&B.length>0&&(V&&P[0]===P[2]&&P[1]===P[3]?w.flyTo(V.center,kt):w.fitBounds(Fp(P),50,qt))}function md(P){n(0,k=h==="always"),n(14,_=void 0),n(55,V=void 0),n(15,gt=-1),Oi(P[1].toFixed(6)+", "+cS(P[0],[-180,180],!0).toFixed(6),!1,!0)}function yd(P){if(!_)return;let se=P.key==="ArrowDown"?1:P.key==="ArrowUp"?-1:0;se&&(gt===(q?0:-1)&&se===-1&&n(15,gt=_.length),n(15,gt+=se),gt>=_.length&&n(15,gt=-1),gt<0&&q&&n(15,gt=0),P.preventDefault())}function fu(P=!0,se=!1){if(n(18,dn=void 0),z||se){if(so&&clearTimeout(so),C.length<O)return;const mn=C;so=window.setTimeout(()=>{cu(mn).catch(Pn=>n(18,dn=Pn))},P?g:0)}else n(14,_=void 0),n(18,dn=void 0)}function pu(P){n(55,V=P),n(1,C=P.place_name),n(15,gt=-1)}const _d=()=>Qt.focus();function vd(P){Ts[P?"unshift":"push"](()=>{Qt=P,n(17,Qt)})}function bd(){C=this.value,n(1,C),n(13,tr),n(27,c)}const Ed=()=>n(13,tr=!0),Sd=()=>n(13,tr=!1),Id=()=>fu(),Ld=()=>{n(1,C=""),Qt.focus()},Nd=()=>n(0,k=!k),xd=()=>n(18,dn=void 0),wd=P=>n(15,gt=P),Cd=P=>pu(P),Od=()=>{q||n(15,gt=-1)},Pd=()=>{};return e.$$set=P=>{"class"in P&&n(2,s=P.class),"apiKey"in P&&n(25,a=P.apiKey),"bbox"in P&&n(26,u=P.bbox),"clearButtonTitle"in P&&n(3,l=P.clearButtonTitle),"clearOnBlur"in P&&n(27,c=P.clearOnBlur),"collapsed"in P&&n(4,f=P.collapsed),"country"in P&&n(28,p=P.country),"debounceSearch"in P&&n(29,g=P.debounceSearch),"enableReverse"in P&&n(5,h=P.enableReverse),"errorMessage"in P&&n(6,m=P.errorMessage),"filter"in P&&n(30,d=P.filter),"flyTo"in P&&n(31,y=P.flyTo),"fuzzyMatch"in P&&n(32,v=P.fuzzyMatch),"language"in P&&n(33,b=P.language),"limit"in P&&n(34,I=P.limit),"mapController"in P&&n(35,w=P.mapController),"minLength"in P&&n(36,O=P.minLength),"noResultsMessage"in P&&n(7,M=P.noResultsMessage),"placeholder"in P&&n(8,x=P.placeholder),"proximity"in P&&n(37,T=P.proximity),"reverseActive"in P&&n(0,k=P.reverseActive),"reverseButtonTitle"in P&&n(9,A=P.reverseButtonTitle),"searchValue"in P&&n(1,C=P.searchValue),"showFullGeometry"in P&&n(38,$=P.showFullGeometry),"showPlaceType"in P&&n(10,N=P.showPlaceType),"showResultsWhileTyping"in P&&n(39,z=P.showResultsWhileTyping),"selectFirst"in P&&n(11,q=P.selectFirst),"flyToSelected"in P&&n(40,ot=P.flyToSelected),"markerOnSelected"in P&&n(41,ht=P.markerOnSelected),"types"in P&&n(42,St=P.types),"excludeTypes"in P&&n(43,Ot=P.excludeTypes),"zoom"in P&&n(44,kt=P.zoom),"maxZoom"in P&&n(45,qt=P.maxZoom),"apiUrl"in P&&n(46,Kt=P.apiUrl),"fetchParameters"in P&&n(47,He=P.fetchParameters),"iconsBaseUrl"in P&&n(12,Ee=P.iconsBaseUrl),"adjustUrlQuery"in P&&n(48,me=P.adjustUrlQuery),"$$scope"in P&&n(58,o=P.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&134225920&&setTimeout(()=>{n(16,Us=tr),c&&!tr&&n(1,C="")}),e.$$.dirty[0]&16386|e.$$.dirty[1]&32&&C.length<O&&(n(55,V=void 0),n(14,_=void 0),n(18,dn=void 0),n(54,B=_)),e.$$.dirty[1]&16777344&&$&&V&&!V.address&&V.geometry.type==="Point"&&V.place_type[0]!=="reverse"&&cu(V.id,{byId:!0}).catch(P=>n(18,dn=P)),e.$$.dirty[1]&50356241&&(w&&V&&V.id!==uu&&y&&(!V.bbox||V.bbox[0]===V.bbox[2]&&V.bbox[1]===V.bbox[3]?w.flyTo(V.center,V.id.startsWith("poi.")||V.id.startsWith("address.")?qt:kt):w.fitBounds(Fp(V.bbox),50,qt),n(14,_=void 0),n(54,B=void 0),n(15,gt=-1)),n(56,uu=V==null?void 0:V.id)),e.$$.dirty[0]&18432&&q&&_!=null&&_.length&&n(15,gt=0),e.$$.dirty[0]&2050&&(q||n(15,gt=-1)),e.$$.dirty[0]&16384|e.$$.dirty[1]&8388608&&B!==_&&n(54,B=void 0),e.$$.dirty[0]&81921|e.$$.dirty[1]&8388624&&w&&w.setEventHandler(P=>{switch(P.type){case"mapClick":k&&md(P.coordinates);break;case"markerClick":{const se=_==null?void 0:_.find(mn=>mn.id===P.id);se&&pu(se)}break;case"markerMouseEnter":B&&n(15,gt=Us?(_==null?void 0:_.findIndex(se=>se.id===P.id))??-1:-1);break;case"markerMouseLeave":B&&n(15,gt=-1);break}}),e.$$.dirty[0]&49152&&n(57,r=_==null?void 0:_[gt]),e.$$.dirty[1]&67133969&&w&&r&&y&&ot&&w.flyTo(r.center,r.id.startsWith("poi.")||r.id.startsWith("address.")?qt:kt),e.$$.dirty[1]&1040&&(ht||w==null||w.setMarkers(void 0,void 0)),e.$$.dirty[1]&75498512&&w&&ht&&!B&&(w.setMarkers(r?[r]:void 0,void 0),w.setSelectedMarker(r?0:-1)),e.$$.dirty[1]&25165840&&w&&w.setMarkers(B,V),e.$$.dirty[0]&32768|e.$$.dirty[1]&8388624&&B&&w&&w.setSelectedMarker(gt),e.$$.dirty[0]&2|e.$$.dirty[1]&16&&w){const P=lu(C);w.setReverseMarker(P?[P.decimalLongitude,P.decimalLatitude]:void 0)}e.$$.dirty[1]&67108864&&oi("select",r),e.$$.dirty[1]&16777216&&oi("pick",V),e.$$.dirty[0]&81920&&oi("optionsVisibilityChange",Us&&!!_),e.$$.dirty[0]&16384&&oi("featuresListed",_),e.$$.dirty[1]&8388608&&oi("featuresMarked",B),e.$$.dirty[0]&1&&oi("reverseToggle",k),e.$$.dirty[0]&2&&oi("queryChange",C),e.$$.dirty[0]&1|e.$$.dirty[1]&16&&w&&w.indicateReverse(k)},[k,C,s,l,f,h,m,M,x,A,N,q,Ee,tr,_,gt,Us,Qt,dn,Pi,gd,gc,yd,fu,pu,a,u,c,p,g,d,y,v,b,I,w,O,T,$,z,ot,ht,St,Ot,kt,qt,Kt,He,me,On,Gr,Oi,ii,Br,B,V,uu,r,o,i,_d,vd,bd,Ed,Sd,Id,Ld,Nd,xd,wd,Cd,Od,Pd]}class OS extends ge{constructor(t){super(),de(this,t,CS,wS,Jt,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}}function Hp(e){let t,n,r;return n=new OS({props:{mapController:e[0],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){t=yt("div"),$t(n.$$.fragment),this.h()},l(i){t=_t(i,"DIV",{class:!0});var o=It(t);te(n.$$.fragment,o),o.forEach(U),this.h()},h(){R(t,"class","svelte-3iceum")},m(i,o){nt(i,t,o),ee(n,t,null),r=!0},p(i,o){const s={};o&1&&(s.mapController=i[0]),n.$set(s)},i(i){r||(X(n.$$.fragment,i),r=!0)},o(i){Z(n.$$.fragment,i),r=!1},d(i){i&&U(t),ne(n)}}}function PS(e){let t,n,r=e[0]&&Hp(e);return{c(){r&&r.c(),t=ln()},l(i){r&&r.l(i),t=ln()},m(i,o){r&&r.m(i,o),nt(i,t,o),n=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&X(r,1)):(r=Hp(i),r.c(),X(r,1),r.m(t.parentNode,t)):r&&(Fn(),Z(r,1,1,()=>{r=null}),kn())},i(i){n||(X(r),n=!0)},o(i){Z(r),n=!1},d(i){i&&U(t),r&&r.d(i)}}}function TS(e,t,n){let{map:r}=t,i;return Gd(()=>{n(0,i=jE(r,qo))}),e.$$set=o=>{"map"in o&&n(1,r=o.map)},[i,r]}class RS extends ge{constructor(t){super(),de(this,t,TS,PS,Jt,{map:1})}}function Zp(e){let t,n,r;function i(s){e[6](s)}let o={style:e[2],bounds:[-5.96,49.89,2.31,55.94],attributionControl:!1,$$slots:{default:[MS,({map:s})=>({0:s}),({map:s})=>s?1:0]},$$scope:{ctx:e}};return e[0]!==void 0&&(o.map=e[0]),t=new Y1({props:o}),Ts.push(()=>Ll(t,"map",i)),t.$on("error",e[7]),{c(){$t(t.$$.fragment)},l(s){te(t.$$.fragment,s)},m(s,a){ee(t,s,a),r=!0},p(s,a){const u={};a&4&&(u.style=s[2]),a&267&&(u.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,u.map=s[0],Il(()=>n=!1)),t.$set(u)},i(s){r||(X(t.$$.fragment,s),r=!0)},o(s){Z(t.$$.fragment,s),r=!1},d(s){ne(t,s)}}}function Kp(e){let t,n;return{c(){t=yt("img"),this.h()},l(r){t=_t(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){De(t.src,n=H1)||R(t,"src",n),R(t,"alt","Google logo"),R(t,"class","svelte-10nk6nj")},m(r,i){nt(r,t,i)},d(r){r&&U(t)}}}function MS(e){let t,n,r,i,o,s,a,u,l,c,f,p;t=new G1({}),t.$on("zoomend",e[4]),t.$on("moveend",e[4]),r=new J1({props:{attribution:e[3]}}),o=new cg({}),a=new fg({}),l=new RS({props:{map:e[0]}});let g=e[1]=="google"&&Kp();const h=e[5].default,m=Zi(h,e,e[8],null);return{c(){$t(t.$$.fragment),n=Vt(),$t(r.$$.fragment),i=Vt(),$t(o.$$.fragment),s=Vt(),$t(a.$$.fragment),u=Vt(),$t(l.$$.fragment),c=Vt(),g&&g.c(),f=Vt(),m&&m.c()},l(d){te(t.$$.fragment,d),n=jt(d),te(r.$$.fragment,d),i=jt(d),te(o.$$.fragment,d),s=jt(d),te(a.$$.fragment,d),u=jt(d),te(l.$$.fragment,d),c=jt(d),g&&g.l(d),f=jt(d),m&&m.l(d)},m(d,y){ee(t,d,y),nt(d,n,y),ee(r,d,y),nt(d,i,y),ee(o,d,y),nt(d,s,y),ee(a,d,y),nt(d,u,y),ee(l,d,y),nt(d,c,y),g&&g.m(d,y),nt(d,f,y),m&&m.m(d,y),p=!0},p(d,y){const v={};y&8&&(v.attribution=d[3]),r.$set(v);const b={};y&1&&(b.map=d[0]),l.$set(b),d[1]=="google"?g||(g=Kp(),g.c(),g.m(f.parentNode,f)):g&&(g.d(1),g=null),m&&m.p&&(!p||y&256)&&Ki(m,h,d,d[8],p?Qi(h,d[8],y,null):Ji(d[8]),null)},i(d){p||(X(t.$$.fragment,d),X(r.$$.fragment,d),X(o.$$.fragment,d),X(a.$$.fragment,d),X(l.$$.fragment,d),X(m,d),p=!0)},o(d){Z(t.$$.fragment,d),Z(r.$$.fragment,d),Z(o.$$.fragment,d),Z(a.$$.fragment,d),Z(l.$$.fragment,d),Z(m,d),p=!1},d(d){d&&(U(n),U(i),U(s),U(u),U(c),U(f)),ne(t,d),ne(r,d),ne(o,d),ne(a,d),ne(l,d),g&&g.d(d),m&&m.d(d)}}}function AS(e){let t,n,r=e[2]&&Zp(e);return{c(){r&&r.c(),t=ln()},l(i){r&&r.l(i),t=ln()},m(i,o){r&&r.m(i,o),nt(i,t,o),n=!0},p(i,[o]){i[2]?r?(r.p(i,o),o&4&&X(r,1)):(r=Zp(i),r.c(),X(r,1),r.m(t.parentNode,t)):r&&(Fn(),Z(r,1,1,()=>{r=null}),kn())},i(i){n||(X(r),n=!0)},o(i){Z(r),n=!1},d(i){i&&U(t),r&&r.d(i)}}}async function DS(e){try{let n=await(await fetch(`https://tile.googleapis.com/v1/createSession?key=${e}`,{method:"POST",body:JSON.stringify({mapType:"satellite",language:"en-GB",region:"GB"})})).json();return"session"in n?n.session:(console.error(`Couldn't get Google tile session key: ${JSON.stringify(n)}`),"")}catch(t){return console.error(`Couldn't get Google tile session key: ${t}`),""}}function FS(e,t,n){let r;Ue(e,p1,d=>n(1,r=d));let{$$slots:i={},$$scope:o}=t,{map:s=void 0}=t,a=null,u="";async function l(d){n(2,a=await f(r))}let c=null;async function f(d){if(c=null,d=="google"||d=="os-road"){let v;if(d=="google"){let b=window.localStorage.getItem("google-api-key")||"",I=await DS(b);v=`https://tile.googleapis.com/v1/2dtiles/{z}/{x}/{y}?session=${I}&key=${b}`,n(3,u=await p(b,I)),c=[b,I]}else v=`https://api.os.uk/maps/raster/v1/zxy/Road_3857/{z}/{x}/{y}.png?key=${window.localStorage.getItem("os-api-key")||""}`,n(3,u="Contains OS data &copy; Crown copyright and database rights 2024");return{version:8,sources:{"raster-tiles":{type:"raster",tiles:[v],tileSize:256,attribution:u}},layers:[{id:"raster-basemap",type:"raster",source:"raster-tiles"}],glyphs:"https://api.maptiler.com/fonts/{fontstack}/{range}.pbf?key=MZEJTanw3WpxRvt7qDfo"}}return`https://api.maptiler.com/maps/${d.slice(9)}/style.json?key=MZEJTanw3WpxRvt7qDfo`}async function p(d,y){if(!s)return"Google (attributions loading)";let v=s.getBounds(),b=`https://tile.googleapis.com/tile/v1/viewport?session=${y}&key=${d}&zoom=${Math.floor(s.getZoom())}&north=${v.getNorth()}&south=${v.getSouth()}&east=${v.getEast()}&west=${v.getWest()}`;return(await(await fetch(b)).json()).copyright}async function g(){if(!s||r!="google"||!c)return;let[d,y]=c;n(3,u=await p(d,y))}function h(d){s=d,n(0,s)}const m=d=>{console.log(d.detail.error)};return e.$$set=d=>{"map"in d&&n(0,s=d.map),"$$scope"in d&&n(8,o=d.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&l()},[s,r,a,u,g,i,h,m,o]}class QS extends ge{constructor(t){super(),de(this,t,FS,AS,Jt,{map:0})}}function $S(e){return u1(e)}function tI(e){return`http://maps.google.com/maps?q=&layer=c&cbll=${e[1]},${e[0]}&cbp=11,0,0,0,0`}function eI(e){return`https://www.bing.com/maps?cp=${e[1]}~${e[0]}&style=x`}export{b1 as A,eg as B,ZS as C,ql as D,u1 as E,Wl as F,KS as G,Wa as H,JS as L,QS as M,lg as a,$S as b,Ya as c,xa as d,yn as e,j0 as f,t1 as g,HS as h,YS as i,p1 as j,tI as k,eI as l,Xo as m,G1 as n,y1 as o,O1 as p,C1 as q,ng as r,n1 as s,wa as t,XS as u,rg as v,ug as w,Ur as x,Vl as y,v1 as z};
