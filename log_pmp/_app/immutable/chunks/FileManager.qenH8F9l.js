import{s as He,a as y,g as I,i as C,f as $,a7 as Ve,e as F,c as x,m as de,p as g,B as Ye,n as se,w as Ne,l as Ue,t as M,b as O,d as G,h as m,j as Me,u as Ze,r as Je,v as ze,G as Xe,q as Ce,a8 as Se,T as fe,o as Ie}from"./scheduler.6uFXgBQz.js";import{S as Ge,i as qe,c as q,a as j,m as R,t as b,b as L,d as T,g as be,f as ke}from"./index.CFPeyt6C.js";import{e as Le}from"./each.DCVnva-Y.js";import{b as ue}from"./paths.w05FvYs4.js";import{g as Oe}from"./entry.DDXI4VJ7.js";import{B as Pe,C as We}from"./ClickableCard.BKTLWztH.js";import{D as Ke}from"./DefaultButton.Bi_2X5mC.js";import{F as Qe}from"./FileInput.DX8GsjOF.js";import{S as ye}from"./SecondaryButton.IIp7NGAE.js";/* empty css                                            */import{W as je}from"./WarningButton.CgrpnbZj.js";import{e as Re}from"./index.BIRnK1vS.js";import{F as et}from"./FormElement.B2s3LIW3.js";import{L as tt}from"./Loading.BkDOwF42.js";import"./index.Bi3nEcnu.js";const lt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M200-200h57l391-391-57-57-391%20391v57Zm-80%2080v-170l528-527q12-11%2026.5-17t30.5-6q16%200%2031%206t26%2018l55%2056q12%2011%2017.5%2026t5.5%2030q0%2016-5.5%2030.5T817-647L290-120H120Zm640-584-56-56%2056%2056Zm-141%2085-28-29%2057%2057-29-28Z'/%3e%3c/svg%3e",nt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='white'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M6%2019c0%201.1.9%202%202%202h8c1.1%200%202-.9%202-2V7H6v12zM19%204h-3.5l-1-1h-5l-1%201H5v2h14V4z'/%3e%3c/svg%3e",st="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M480-320%20280-520l56-58%20104%20104v-326h80v326l104-104%2056%2058-200%20200ZM240-160q-33%200-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0%2033-23.5%2056.5T720-160H240Z'/%3e%3c/svg%3e";function rt(r){let e,t,l,s=`You can import from an existing route check .xlsx file, <b>only if there&#39;s an up-to-date DALOG sheet added</b>
    . After importing, there will still be some problems:
    <ul><li>You must fill out the Junction Assessment Tool (JAT); it won&#39;t be
        imported</li> <li>Some text fields on the Summary of Scheme page will be missing</li></ul>`,n,o;return{c(){e=F("input"),t=y(),l=F("div"),l.innerHTML=s,this.h()},l(a){e=x(a,"INPUT",{class:!0,id:!0,type:!0}),t=I(a),l=x(a,"DIV",{class:!0,"data-svelte-h":!0}),de(l)!=="svelte-1alapt1"&&(l.innerHTML=s),this.h()},h(){g(e,"class","govuk-file-upload"),g(e,"id","import-xlsx"),g(e,"type","file"),g(l,"class","govuk-hint")},m(a,p){C(a,e,p),r[4](e),C(a,t,p),C(a,l,p),n||(o=Ye(e,"change",r[2]),n=!0)},p:se,d(a){a&&($(e),$(t),$(l)),r[4](null),n=!1,o()}}}function ot(r){let e,t,l,s;return e=new et({props:{label:"Import from XLSX file",id:"import-xlsx",$$slots:{default:[rt]},$$scope:{ctx:r}}}),l=new tt({props:{loading:r[0]}}),{c(){q(e.$$.fragment),t=y(),q(l.$$.fragment)},l(n){j(e.$$.fragment,n),t=I(n),j(l.$$.fragment,n)},m(n,o){R(e,n,o),C(n,t,o),R(l,n,o),s=!0},p(n,[o]){const a={};o&66&&(a.$$scope={dirty:o,ctx:n}),e.$set(a);const p={};o&1&&(p.loading=n[0]),l.$set(p)},i(n){s||(b(e.$$.fragment,n),b(l.$$.fragment,n),s=!0)},o(n){L(e.$$.fragment,n),L(l.$$.fragment,n),s=!1},d(n){n&&$(t),T(e,n),T(l,n)}}}function at(r,e,t){let l=Ve(),{xlsxImporter:s}=e,n="",o;async function a(w){let v=o.files[0].name;try{t(0,n=`Loading ${v}`);let c=await o.files[0].arrayBuffer(),d=await s(c);t(0,n=""),l("imported",{filename:Re(v,".xlsx"),data:d})}catch(c){window.alert(`Couldn't import ${v}: ${c}`),t(0,n="")}}function p(w){Ne[w?"unshift":"push"](()=>{o=w,t(1,o)})}return r.$$set=w=>{"xlsxImporter"in w&&t(3,s=w.xlsxImporter)},[n,o,a,s,p]}class it extends Ge{constructor(e){super(),qe(this,e,at,ot,He,{xlsxImporter:3})}}function De(r,e,t){const l=r.slice();return l[20]=e[t],l}function ft(r){let e,t,l;return{c(){e=F("img"),l=M(`
      Rename this file`),this.h()},l(s){e=x(s,"IMG",{src:!0,alt:!0,class:!0}),l=G(s,`
      Rename this file`),this.h()},h(){Ie(e.src,t=lt)||g(e,"src",t),g(e,"alt","Rename this file"),g(e,"class","svelte-v2g1wg")},m(s,n){C(s,e,n),C(s,l,n)},p:se,d(s){s&&($(e),$(l))}}}function ut(r){let e,t,l;return{c(){e=F("img"),l=M(`
      Export .json`),this.h()},l(s){e=x(s,"IMG",{src:!0,alt:!0,class:!0}),l=G(s,`
      Export .json`),this.h()},h(){Ie(e.src,t=st)||g(e,"src",t),g(e,"alt","Download this file"),g(e,"class","svelte-v2g1wg")},m(s,n){C(s,e,n),C(s,l,n)},p:se,d(s){s&&($(e),$(l))}}}function ct(r){let e,t,l;return{c(){e=F("img"),l=M(`
      Delete this file`),this.h()},l(s){e=x(s,"IMG",{src:!0,alt:!0,class:!0}),l=G(s,`
      Delete this file`),this.h()},h(){Ie(e.src,t=nt)||g(e,"src",t),g(e,"alt","Delete this file"),g(e,"class","svelte-v2g1wg")},m(s,n){C(s,e,n),C(s,l,n)},p:se,d(s){s&&($(e),$(l))}}}function mt(r){let e,t,l,s,n,o;return e=new ye({props:{$$slots:{default:[ft]},$$scope:{ctx:r}}}),e.$on("click",r[6]),l=new ye({props:{$$slots:{default:[ut]},$$scope:{ctx:r}}}),l.$on("click",r[7]),n=new je({props:{$$slots:{default:[ct]},$$scope:{ctx:r}}}),n.$on("click",r[14]),{c(){q(e.$$.fragment),t=y(),q(l.$$.fragment),s=y(),q(n.$$.fragment)},l(a){j(e.$$.fragment,a),t=I(a),j(l.$$.fragment,a),s=I(a),j(n.$$.fragment,a)},m(a,p){R(e,a,p),C(a,t,p),R(l,a,p),C(a,s,p),R(n,a,p),o=!0},p(a,p){const w={};p&262144&&(w.$$scope={dirty:p,ctx:a}),e.$set(w);const v={};p&262144&&(v.$$scope={dirty:p,ctx:a}),l.$set(v);const c={};p&262144&&(c.$$scope={dirty:p,ctx:a}),n.$set(c)},i(a){o||(b(e.$$.fragment,a),b(l.$$.fragment,a),b(n.$$.fragment,a),o=!0)},o(a){L(e.$$.fragment,a),L(l.$$.fragment,a),L(n.$$.fragment,a),o=!1},d(a){a&&($(t),$(s)),T(e,a),T(l,a),T(n,a)}}}function pt(r){let e;return{c(){e=M("New blank file")},l(t){e=G(t,"New blank file")},m(t,l){C(t,e,l)},d(t){t&&$(e)}}}function Be(r){let e,t,l,s;return l=new it({props:{xlsxImporter:r[3]}}),l.$on("imported",r[11]),{c(){e=F("hr"),t=y(),q(l.$$.fragment)},l(n){e=x(n,"HR",{}),t=I(n),j(l.$$.fragment,n)},m(n,o){C(n,e,o),C(n,t,o),R(l,n,o),s=!0},p(n,o){const a={};o&8&&(a.xlsxImporter=n[3]),l.$set(a)},i(n){s||(b(l.$$.fragment,n),s=!0)},o(n){L(l.$$.fragment,n),s=!1},d(n){n&&($(e),$(t)),T(l,n)}}}function dt(r){let e=(r[20]==r[5]?"Currently open":r[0].describeFile(r[20]))+"",t;return{c(){t=M(e)},l(l){t=G(l,e)},m(l,s){C(l,t,s)},p(l,s){s&49&&e!==(e=(l[20]==l[5]?"Currently open":l[0].describeFile(l[20]))+"")&&Me(t,e)},d(l){l&&$(t)}}}function $t(r){let e,t;function l(){return r[17](r[20])}return e=new je({props:{$$slots:{default:[_t]},$$scope:{ctx:r}}}),e.$on("click",l),{c(){q(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,n){R(e,s,n),t=!0},p(s,n){r=s;const o={};n&262144&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){T(e,s)}}}function ht(r){let e,t;return e=new Ke({props:{$$slots:{default:[gt]},$$scope:{ctx:r}}}),e.$on("click",r[16]),{c(){q(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,s){R(e,l,s),t=!0},p(l,s){const n={};s&262144&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function _t(r){let e;return{c(){e=M("Delete")},l(t){e=G(t,"Delete")},m(t,l){C(t,e,l)},d(t){t&&$(e)}}}function gt(r){let e;return{c(){e=M("Start")},l(t){e=G(t,"Start")},m(t,l){C(t,e,l)},d(t){t&&$(e)}}}function Ee(r){let e,t,l,s,n,o,a;function p(){return r[15](r[20])}t=new We({props:{name:`File name: ${r[20]}`,disabled:r[20]===r[5],$$slots:{default:[dt]},$$scope:{ctx:r}}}),t.$on("click",p);const w=[ht,$t],v=[];function c(d,h){return d[20]==d[5]?0:1}return s=c(r),n=v[s]=w[s](r),{c(){e=F("div"),q(t.$$.fragment),l=y(),n.c(),o=y(),this.h()},l(d){e=x(d,"DIV",{style:!0});var h=O(e);j(t.$$.fragment,h),l=I(h),n.l(h),o=I(h),h.forEach($),this.h()},h(){Ce(e,"display","flex"),Ce(e,"justify-content","space-between")},m(d,h){C(d,e,h),R(t,e,null),m(e,l),v[s].m(e,null),m(e,o),a=!0},p(d,h){r=d;const V={};h&16&&(V.name=`File name: ${r[20]}`),h&48&&(V.disabled=r[20]===r[5]),h&262193&&(V.$$scope={dirty:h,ctx:r}),t.$set(V);let S=s;s=c(r),s===S?v[s].p(r,h):(be(),L(v[S],1,1,()=>{v[S]=null}),ke(),n=v[s],n?n.p(r,h):(n=v[s]=w[s](r),n.c()),b(n,1),n.m(e,o))},i(d){a||(b(t.$$.fragment,d),b(n),a=!0)},o(d){L(t.$$.fragment,d),L(n),a=!1},d(d){d&&$(e),T(t),v[s].d()}}}function wt(r){let e,t,l,s,n,o,a=`All files are auto-saved in your browser's local storage. You can close your
    browser and resume later. You can export the file to your computer to share
    with someone else, and import from a file below.`,p,w,v,c,d,h,V,S,re,oe,K,le,U,E,Y,ce="Create or import a file",ae,N,ie,u,D,A,P,$e,z,ne,Fe="Load a saved file",he,_e,W,ge,me,X;S=new Pe({props:{$$slots:{default:[mt]},$$scope:{ctx:r}}});const we=r[13].default,H=Ue(we,r,r[18],null);N=new ye({props:{$$slots:{default:[pt]},$$scope:{ctx:r}}}),N.$on("click",r[9]),A=new Qe({props:{label:"Import from a .json file",onLoad:r[10]}});let k=r[3]!=null&&Be(r),Q=Le(r[4]),_=[];for(let i=0;i<Q.length;i+=1)_[i]=Ee(De(r,Q,i));const Te=i=>L(_[i],1,1,()=>{_[i]=null});return{c(){e=F("div"),t=F("a"),l=M("Back to overview"),n=y(),o=F("p"),o.textContent=a,p=y(),w=F("p"),v=M("You're currently editing "),c=F("u"),d=M(r[5]),h=M(`
    .`),V=y(),q(S.$$.fragment),re=y(),H&&H.c(),oe=y(),K=F("hr"),le=y(),U=F("div"),E=F("div"),Y=F("h2"),Y.textContent=ce,ae=y(),q(N.$$.fragment),ie=y(),u=F("hr"),D=y(),q(A.$$.fragment),P=y(),k&&k.c(),$e=y(),z=F("div"),ne=F("h2"),ne.textContent=Fe,he=y();for(let i=0;i<_.length;i+=1)_[i].c();_e=y(),W=F("a"),ge=M("Back to overview"),this.h()},l(i){e=x(i,"DIV",{class:!0});var f=O(e);t=x(f,"A",{href:!0,class:!0});var Z=O(t);l=G(Z,"Back to overview"),Z.forEach($),n=I(f),o=x(f,"P",{"data-svelte-h":!0}),de(o)!=="svelte-1yvzirp"&&(o.textContent=a),p=I(f),w=x(f,"P",{});var ee=O(w);v=G(ee,"You're currently editing "),c=x(ee,"U",{});var B=O(c);d=G(B,r[5]),B.forEach($),h=G(ee,`
    .`),ee.forEach($),V=I(f),j(S.$$.fragment,f),re=I(f),H&&H.l(f),oe=I(f),K=x(f,"HR",{}),le=I(f),U=x(f,"DIV",{class:!0});var te=O(U);E=x(te,"DIV",{class:!0});var J=O(E);Y=x(J,"H2",{"data-svelte-h":!0}),de(Y)!=="svelte-1yqhw3l"&&(Y.textContent=ce),ae=I(J),j(N.$$.fragment,J),ie=I(J),u=x(J,"HR",{}),D=I(J),j(A.$$.fragment,J),P=I(J),k&&k.l(J),J.forEach($),$e=I(te),z=x(te,"DIV",{class:!0});var pe=O(z);ne=x(pe,"H2",{"data-svelte-h":!0}),de(ne)!=="svelte-oj70x0"&&(ne.textContent=Fe),he=I(pe);for(let ve=0;ve<_.length;ve+=1)_[ve].l(pe);pe.forEach($),te.forEach($),_e=I(f),W=x(f,"A",{href:!0,class:!0});var xe=O(W);ge=G(xe,"Back to overview"),xe.forEach($),f.forEach($),this.h()},h(){g(t,"href",s=ue+"/"+r[0].prefix),g(t,"class","govuk-back-link"),g(E,"class","govuk-grid-column-one-half"),g(z,"class","govuk-grid-column-one-half"),g(U,"class","govuk-grid-row"),g(W,"href",me=ue+"/"+r[0].prefix),g(W,"class","govuk-back-link"),g(e,"class","govuk-width-container")},m(i,f){C(i,e,f),m(e,t),m(t,l),m(e,n),m(e,o),m(e,p),m(e,w),m(w,v),m(w,c),m(c,d),m(w,h),m(e,V),R(S,e,null),m(e,re),H&&H.m(e,null),m(e,oe),m(e,K),m(e,le),m(e,U),m(U,E),m(E,Y),m(E,ae),R(N,E,null),m(E,ie),m(E,u),m(E,D),R(A,E,null),m(E,P),k&&k.m(E,null),m(U,$e),m(U,z),m(z,ne),m(z,he);for(let Z=0;Z<_.length;Z+=1)_[Z]&&_[Z].m(z,null);m(e,_e),m(e,W),m(W,ge),X=!0},p(i,[f]){(!X||f&1&&s!==(s=ue+"/"+i[0].prefix))&&g(t,"href",s),(!X||f&32)&&Me(d,i[5]);const Z={};f&262176&&(Z.$$scope={dirty:f,ctx:i}),S.$set(Z),H&&H.p&&(!X||f&262144)&&Ze(H,we,i,i[18],X?ze(we,i[18],f,null):Je(i[18]),null);const ee={};if(f&262144&&(ee.$$scope={dirty:f,ctx:i}),N.$set(ee),i[3]!=null?k?(k.p(i,f),f&8&&b(k,1)):(k=Be(i),k.c(),b(k,1),k.m(E,null)):k&&(be(),L(k,1,1,()=>{k=null}),ke()),f&4401){Q=Le(i[4]);let B;for(B=0;B<Q.length;B+=1){const te=De(i,Q,B);_[B]?(_[B].p(te,f),b(_[B],1)):(_[B]=Ee(te),_[B].c(),b(_[B],1),_[B].m(z,null))}for(be(),B=Q.length;B<_.length;B+=1)Te(B);ke()}(!X||f&1&&me!==(me=ue+"/"+i[0].prefix))&&g(W,"href",me)},i(i){if(!X){b(S.$$.fragment,i),b(H,i),b(N.$$.fragment,i),b(A.$$.fragment,i),b(k);for(let f=0;f<Q.length;f+=1)b(_[f]);X=!0}},o(i){L(S.$$.fragment,i),L(H,i),L(N.$$.fragment,i),L(A.$$.fragment,i),L(k),_=_.filter(Boolean);for(let f=0;f<_.length;f+=1)L(_[f]);X=!1},d(i){i&&$(e),T(S),H&&H.d(i),T(N),T(A),k&&k.d(),Xe(_,i)}}}function Ae(r,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",r),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function vt(r,e,t){let l,s=se,n=()=>(s(),s=Se(h,u=>t(19,l=u)),h),o,a=se,p=()=>(a(),a=Se(d,u=>t(5,o=u)),d);r.$$.on_destroy.push(()=>s()),r.$$.on_destroy.push(()=>a());let{$$slots:w={},$$scope:v}=e,{files:c}=e,{currentFile:d}=e;p();let{state:h}=e;n();let{xlsxImporter:V=null}=e,S=c.getFileList();function re(){let u=window.prompt(`Rename file ${o} to what?`,o);if(u){let D=c.key(o),A=window.localStorage.getItem(D);window.localStorage.setItem(c.key(u),A),window.localStorage.removeItem(D),fe(d,o=u,o),t(4,S=c.getFileList())}}function oe(){Ae(o+".json",JSON.stringify(l))}async function K(u){if(window.confirm(`Really delete file ${u}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`)){let D=c.key(u);Ae(`${u}.json`,window.localStorage.getItem(D)),window.localStorage.removeItem(D),u==o?await le():t(4,S=c.saveAndGetFileList(o,l))}}async function le(){fe(d,o=c.newFilename(),o),fe(h,l=c.emptyState(),l),t(4,S=c.saveAndGetFileList(o,l))}async function U(u,D){let A=Re(u,".json");try{let P=JSON.parse(D);c.validate(P),t(4,S=c.saveAndGetFileList(A,P)),await Y(A)}catch(P){window.alert(`Couldn't load ${A}: ${P}`)}}async function E(u){let{filename:D,data:A}=u.detail;t(4,S=c.saveAndGetFileList(D,A)),await Y(D)}async function Y(u){try{let D=c.loadFile(u);fe(d,o=u,o),fe(h,l=D,l)}catch(D){window.alert(`Couldn't load ${u}: ${D}`)}}const ce=()=>K(o),ae=u=>Y(u),N=()=>Oe(`${ue}/${c.prefix}`),ie=u=>K(u);return r.$$set=u=>{"files"in u&&t(0,c=u.files),"currentFile"in u&&p(t(1,d=u.currentFile)),"state"in u&&n(t(2,h=u.state)),"xlsxImporter"in u&&t(3,V=u.xlsxImporter),"$$scope"in u&&t(18,v=u.$$scope)},[c,d,h,V,S,o,re,oe,K,le,U,E,Y,w,ce,ae,N,ie,v]}class Gt extends Ge{constructor(e){super(),qe(this,e,vt,wt,He,{files:0,currentFile:1,state:2,xlsxImporter:3})}}export{Gt as F};
