import{s as Be,a as C,g as S,i as x,f as d,a7 as Re,e as y,c as I,m as ce,p as w,B as Te,n as ne,w as Ve,t as H,b as z,d as M,h as m,j as Ae,G as je,q as Ie,a8 as Fe,T as oe,o as be}from"./scheduler.6uFXgBQz.js";import{S as Ee,i as He,c as G,a as q,m as R,t as F,b as B,d as T,g as _e,f as we}from"./index.CFPeyt6C.js";import{e as xe}from"./each.DCVnva-Y.js";import{b as ie}from"./paths.D0dhMY_m.js";import{g as Ye}from"./entry.DJzk_Fqw.js";import{B as Ne,C as Ue}from"./ClickableCard.BKTLWztH.js";import{D as Ze}from"./DefaultButton.Bi_2X5mC.js";import{F as Je}from"./FileInput.DX8GsjOF.js";import{S as ve}from"./SecondaryButton.IIp7NGAE.js";/* empty css                                            */import{W as Me}from"./WarningButton.CgrpnbZj.js";import{e as Ge}from"./index.DZow7n__.js";import{F as ze}from"./FormElement.B2s3LIW3.js";import{L as Xe}from"./Loading.BkDOwF42.js";import"./index.B44Q4tRd.js";const Oe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M200-200h57l391-391-57-57-391%20391v57Zm-80%2080v-170l528-527q12-11%2026.5-17t30.5-6q16%200%2031%206t26%2018l55%2056q12%2011%2017.5%2026t5.5%2030q0%2016-5.5%2030.5T817-647L290-120H120Zm640-584-56-56%2056%2056Zm-141%2085-28-29%2057%2057-29-28Z'/%3e%3c/svg%3e",Pe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%200%2024%2024'%20width='24px'%20fill='white'%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M6%2019c0%201.1.9%202%202%202h8c1.1%200%202-.9%202-2V7H6v12zM19%204h-3.5l-1-1h-5l-1%201H5v2h14V4z'/%3e%3c/svg%3e",We="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000000'%3e%3cpath%20d='M480-320%20280-520l56-58%20104%20104v-326h80v326l104-104%2056%2058-200%20200ZM240-160q-33%200-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0%2033-23.5%2056.5T720-160H240Z'/%3e%3c/svg%3e";function Ke(s){let e,t,l,r=`You can import from an existing route check .xlsx file, <b>only if there&#39;s an up-to-date DALOG sheet added</b>
    . After importing, there will still be some problems:
    <ul><li>You must fill out the Junction Assessment Tool (JAT); it won&#39;t be
        imported</li> <li>Some text fields on the Summary of Scheme page will be missing</li></ul>`,n,o;return{c(){e=y("input"),t=C(),l=y("div"),l.innerHTML=r,this.h()},l(i){e=I(i,"INPUT",{class:!0,id:!0,type:!0}),t=S(i),l=I(i,"DIV",{class:!0,"data-svelte-h":!0}),ce(l)!=="svelte-1alapt1"&&(l.innerHTML=r),this.h()},h(){w(e,"class","govuk-file-upload"),w(e,"id","import-xlsx"),w(e,"type","file"),w(l,"class","govuk-hint")},m(i,p){x(i,e,p),s[4](e),x(i,t,p),x(i,l,p),n||(o=Te(e,"change",s[2]),n=!0)},p:ne,d(i){i&&(d(e),d(t),d(l)),s[4](null),n=!1,o()}}}function Qe(s){let e,t,l,r;return e=new ze({props:{label:"Import from XLSX file",id:"import-xlsx",$$slots:{default:[Ke]},$$scope:{ctx:s}}}),l=new Xe({props:{loading:s[0]}}),{c(){G(e.$$.fragment),t=C(),G(l.$$.fragment)},l(n){q(e.$$.fragment,n),t=S(n),q(l.$$.fragment,n)},m(n,o){R(e,n,o),x(n,t,o),R(l,n,o),r=!0},p(n,[o]){const i={};o&66&&(i.$$scope={dirty:o,ctx:n}),e.$set(i);const p={};o&1&&(p.loading=n[0]),l.$set(p)},i(n){r||(F(e.$$.fragment,n),F(l.$$.fragment,n),r=!0)},o(n){B(e.$$.fragment,n),B(l.$$.fragment,n),r=!1},d(n){n&&d(t),T(e,n),T(l,n)}}}function et(s,e,t){let l=Re(),{xlsxImporter:r}=e,n="",o;async function i(a){let h=o.files[0].name;try{t(0,n=`Loading ${h}`);let v=await o.files[0].arrayBuffer(),g=await r(v);t(0,n=""),l("imported",{filename:Ge(h,".xlsx"),data:g})}catch(v){window.alert(`Couldn't import ${h}: ${v}`),t(0,n="")}}function p(a){Ve[a?"unshift":"push"](()=>{o=a,t(1,o)})}return s.$$set=a=>{"xlsxImporter"in a&&t(3,r=a.xlsxImporter)},[n,o,i,r,p]}class tt extends Ee{constructor(e){super(),He(this,e,et,Qe,Be,{xlsxImporter:3})}}function Ce(s,e,t){const l=s.slice();return l[18]=e[t],l}function lt(s){let e,t,l;return{c(){e=y("img"),l=H(`
      Rename this file`),this.h()},l(r){e=I(r,"IMG",{src:!0,alt:!0,class:!0}),l=M(r,`
      Rename this file`),this.h()},h(){be(e.src,t=Oe)||w(e,"src",t),w(e,"alt","Rename this file"),w(e,"class","svelte-v2g1wg")},m(r,n){x(r,e,n),x(r,l,n)},p:ne,d(r){r&&(d(e),d(l))}}}function nt(s){let e,t,l;return{c(){e=y("img"),l=H(`
      Download this file`),this.h()},l(r){e=I(r,"IMG",{src:!0,alt:!0,class:!0}),l=M(r,`
      Download this file`),this.h()},h(){be(e.src,t=We)||w(e,"src",t),w(e,"alt","Download this file"),w(e,"class","svelte-v2g1wg")},m(r,n){x(r,e,n),x(r,l,n)},p:ne,d(r){r&&(d(e),d(l))}}}function rt(s){let e,t,l;return{c(){e=y("img"),l=H(`
      Delete this file`),this.h()},l(r){e=I(r,"IMG",{src:!0,alt:!0,class:!0}),l=M(r,`
      Delete this file`),this.h()},h(){be(e.src,t=Pe)||w(e,"src",t),w(e,"alt","Delete this file"),w(e,"class","svelte-v2g1wg")},m(r,n){x(r,e,n),x(r,l,n)},p:ne,d(r){r&&(d(e),d(l))}}}function st(s){let e,t,l,r,n,o;return e=new ve({props:{$$slots:{default:[lt]},$$scope:{ctx:s}}}),e.$on("click",s[6]),l=new ve({props:{$$slots:{default:[nt]},$$scope:{ctx:s}}}),l.$on("click",s[7]),n=new Me({props:{$$slots:{default:[rt]},$$scope:{ctx:s}}}),n.$on("click",s[13]),{c(){G(e.$$.fragment),t=C(),G(l.$$.fragment),r=C(),G(n.$$.fragment)},l(i){q(e.$$.fragment,i),t=S(i),q(l.$$.fragment,i),r=S(i),q(n.$$.fragment,i)},m(i,p){R(e,i,p),x(i,t,p),R(l,i,p),x(i,r,p),R(n,i,p),o=!0},p(i,p){const a={};p&2097152&&(a.$$scope={dirty:p,ctx:i}),e.$set(a);const h={};p&2097152&&(h.$$scope={dirty:p,ctx:i}),l.$set(h);const v={};p&2097152&&(v.$$scope={dirty:p,ctx:i}),n.$set(v)},i(i){o||(F(e.$$.fragment,i),F(l.$$.fragment,i),F(n.$$.fragment,i),o=!0)},o(i){B(e.$$.fragment,i),B(l.$$.fragment,i),B(n.$$.fragment,i),o=!1},d(i){i&&(d(t),d(r)),T(e,i),T(l,i),T(n,i)}}}function ot(s){let e;return{c(){e=H("New blank file")},l(t){e=M(t,"New blank file")},m(t,l){x(t,e,l)},d(t){t&&d(e)}}}function Se(s){let e,t,l,r;return l=new tt({props:{xlsxImporter:s[3]}}),l.$on("imported",s[11]),{c(){e=y("hr"),t=C(),G(l.$$.fragment)},l(n){e=I(n,"HR",{}),t=S(n),q(l.$$.fragment,n)},m(n,o){x(n,e,o),x(n,t,o),R(l,n,o),r=!0},p(n,o){const i={};o&8&&(i.xlsxImporter=n[3]),l.$set(i)},i(n){r||(F(l.$$.fragment,n),r=!0)},o(n){B(l.$$.fragment,n),r=!1},d(n){n&&(d(e),d(t)),T(l,n)}}}function it(s){let e=(s[18]==s[5]?"Currently open":s[0].describeFile(s[18]))+"",t;return{c(){t=H(e)},l(l){t=M(l,e)},m(l,r){x(l,t,r)},p(l,r){r&49&&e!==(e=(l[18]==l[5]?"Currently open":l[0].describeFile(l[18]))+"")&&Ae(t,e)},d(l){l&&d(t)}}}function at(s){let e,t;function l(){return s[16](s[18])}return e=new Me({props:{$$slots:{default:[ut]},$$scope:{ctx:s}}}),e.$on("click",l),{c(){G(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,n){R(e,r,n),t=!0},p(r,n){s=r;const o={};n&2097152&&(o.$$scope={dirty:n,ctx:s}),e.$set(o)},i(r){t||(F(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function ft(s){let e,t;return e=new Ze({props:{$$slots:{default:[ct]},$$scope:{ctx:s}}}),e.$on("click",s[15]),{c(){G(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,r){R(e,l,r),t=!0},p(l,r){const n={};r&2097152&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function ut(s){let e;return{c(){e=H("Delete")},l(t){e=M(t,"Delete")},m(t,l){x(t,e,l)},d(t){t&&d(e)}}}function ct(s){let e;return{c(){e=H("Start")},l(t){e=M(t,"Start")},m(t,l){x(t,e,l)},d(t){t&&d(e)}}}function De(s){let e,t,l,r,n,o,i;function p(){return s[14](s[18])}t=new Ue({props:{name:`File name: ${s[18]}`,disabled:s[18]===s[5],$$slots:{default:[it]},$$scope:{ctx:s}}}),t.$on("click",p);const a=[ft,at],h=[];function v(g,$){return g[18]==g[5]?0:1}return r=v(s),n=h[r]=a[r](s),{c(){e=y("div"),G(t.$$.fragment),l=C(),n.c(),o=C(),this.h()},l(g){e=I(g,"DIV",{style:!0});var $=z(e);q(t.$$.fragment,$),l=S($),n.l($),o=S($),$.forEach(d),this.h()},h(){Ie(e,"display","flex"),Ie(e,"justify-content","space-between")},m(g,$){x(g,e,$),R(t,e,null),m(e,l),h[r].m(e,null),m(e,o),i=!0},p(g,$){s=g;const Y={};$&16&&(Y.name=`File name: ${s[18]}`),$&48&&(Y.disabled=s[18]===s[5]),$&2097201&&(Y.$$scope={dirty:$,ctx:s}),t.$set(Y);let A=r;r=v(s),r===A?h[r].p(s,$):(_e(),B(h[A],1,1,()=>{h[A]=null}),we(),n=h[r],n?n.p(s,$):(n=h[r]=a[r](s),n.c()),F(n,1),n.m(e,o))},i(g){i||(F(t.$$.fragment,g),F(n),i=!0)},o(g){B(t.$$.fragment,g),B(n),i=!1},d(g){g&&d(e),T(t),h[r].d()}}}function mt(s){let e,t,l,r,n,o,i=`All files are auto-saved in your browser's local storage. You can close your
    browser and resume later. You can export the file to your computer to share
    with someone else, and import from a file below.`,p,a,h,v,g,$,Y,A,P,te,re,N,b,X,ae="Create or import a file",se,V,f,D,j,E,me,pe,J,le,ke="Load a saved file",de,he,O,$e,fe,W;A=new Ne({props:{$$slots:{default:[st]},$$scope:{ctx:s}}}),V=new ve({props:{$$slots:{default:[ot]},$$scope:{ctx:s}}}),V.$on("click",s[9]),E=new Je({props:{label:"Import from a .json file",onLoad:s[10]}});let k=s[3]!=null&&Se(s),K=xe(s[4]),_=[];for(let u=0;u<K.length;u+=1)_[u]=De(Ce(s,K,u));const qe=u=>B(_[u],1,1,()=>{_[u]=null});return{c(){e=y("div"),t=y("a"),l=H("Back to overview"),n=C(),o=y("p"),o.textContent=i,p=C(),a=y("p"),h=H("You're currently editing "),v=y("u"),g=H(s[5]),$=H(`
    .`),Y=C(),G(A.$$.fragment),P=C(),te=y("hr"),re=C(),N=y("div"),b=y("div"),X=y("h2"),X.textContent=ae,se=C(),G(V.$$.fragment),f=C(),D=y("hr"),j=C(),G(E.$$.fragment),me=C(),k&&k.c(),pe=C(),J=y("div"),le=y("h2"),le.textContent=ke,de=C();for(let u=0;u<_.length;u+=1)_[u].c();he=C(),O=y("a"),$e=H("Back to overview"),this.h()},l(u){e=I(u,"DIV",{class:!0});var c=z(e);t=I(c,"A",{href:!0,class:!0});var U=z(t);l=M(U,"Back to overview"),U.forEach(d),n=S(c),o=I(c,"P",{"data-svelte-h":!0}),ce(o)!=="svelte-1yvzirp"&&(o.textContent=i),p=S(c),a=I(c,"P",{});var Q=z(a);h=M(Q,"You're currently editing "),v=I(Q,"U",{});var L=z(v);g=M(L,s[5]),L.forEach(d),$=M(Q,`
    .`),Q.forEach(d),Y=S(c),q(A.$$.fragment,c),P=S(c),te=I(c,"HR",{}),re=S(c),N=I(c,"DIV",{class:!0});var ee=z(N);b=I(ee,"DIV",{class:!0});var Z=z(b);X=I(Z,"H2",{"data-svelte-h":!0}),ce(X)!=="svelte-1yqhw3l"&&(X.textContent=ae),se=S(Z),q(V.$$.fragment,Z),f=S(Z),D=I(Z,"HR",{}),j=S(Z),q(E.$$.fragment,Z),me=S(Z),k&&k.l(Z),Z.forEach(d),pe=S(ee),J=I(ee,"DIV",{class:!0});var ue=z(J);le=I(ue,"H2",{"data-svelte-h":!0}),ce(le)!=="svelte-oj70x0"&&(le.textContent=ke),de=S(ue);for(let ge=0;ge<_.length;ge+=1)_[ge].l(ue);ue.forEach(d),ee.forEach(d),he=S(c),O=I(c,"A",{href:!0,class:!0});var ye=z(O);$e=M(ye,"Back to overview"),ye.forEach(d),c.forEach(d),this.h()},h(){w(t,"href",r=ie+"/"+s[0].prefix),w(t,"class","govuk-back-link"),w(b,"class","govuk-grid-column-one-half"),w(J,"class","govuk-grid-column-one-half"),w(N,"class","govuk-grid-row"),w(O,"href",fe=ie+"/"+s[0].prefix),w(O,"class","govuk-back-link"),w(e,"class","govuk-width-container")},m(u,c){x(u,e,c),m(e,t),m(t,l),m(e,n),m(e,o),m(e,p),m(e,a),m(a,h),m(a,v),m(v,g),m(a,$),m(e,Y),R(A,e,null),m(e,P),m(e,te),m(e,re),m(e,N),m(N,b),m(b,X),m(b,se),R(V,b,null),m(b,f),m(b,D),m(b,j),R(E,b,null),m(b,me),k&&k.m(b,null),m(N,pe),m(N,J),m(J,le),m(J,de);for(let U=0;U<_.length;U+=1)_[U]&&_[U].m(J,null);m(e,he),m(e,O),m(O,$e),W=!0},p(u,[c]){(!W||c&1&&r!==(r=ie+"/"+u[0].prefix))&&w(t,"href",r),(!W||c&32)&&Ae(g,u[5]);const U={};c&2097184&&(U.$$scope={dirty:c,ctx:u}),A.$set(U);const Q={};if(c&2097152&&(Q.$$scope={dirty:c,ctx:u}),V.$set(Q),u[3]!=null?k?(k.p(u,c),c&8&&F(k,1)):(k=Se(u),k.c(),F(k,1),k.m(b,null)):k&&(_e(),B(k,1,1,()=>{k=null}),we()),c&4401){K=xe(u[4]);let L;for(L=0;L<K.length;L+=1){const ee=Ce(u,K,L);_[L]?(_[L].p(ee,c),F(_[L],1)):(_[L]=De(ee),_[L].c(),F(_[L],1),_[L].m(J,null))}for(_e(),L=K.length;L<_.length;L+=1)qe(L);we()}(!W||c&1&&fe!==(fe=ie+"/"+u[0].prefix))&&w(O,"href",fe)},i(u){if(!W){F(A.$$.fragment,u),F(V.$$.fragment,u),F(E.$$.fragment,u),F(k);for(let c=0;c<K.length;c+=1)F(_[c]);W=!0}},o(u){B(A.$$.fragment,u),B(V.$$.fragment,u),B(E.$$.fragment,u),B(k),_=_.filter(Boolean);for(let c=0;c<_.length;c+=1)B(_[c]);W=!1},d(u){u&&d(e),T(A),T(V),T(E),k&&k.d(),je(_,u)}}}function Le(s,e){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",s),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function pt(s,e,t){let l,r=ne,n=()=>(r(),r=Fe(v,f=>t(17,l=f)),v),o,i=ne,p=()=>(i(),i=Fe(h,f=>t(5,o=f)),h);s.$$.on_destroy.push(()=>r()),s.$$.on_destroy.push(()=>i());let{files:a}=e,{currentFile:h}=e;p();let{state:v}=e;n();let{xlsxImporter:g=null}=e,$=a.getFileList();function Y(){let f=window.prompt(`Rename file ${o} to what?`,o);if(f){let D=a.key(o),j=window.localStorage.getItem(D);window.localStorage.setItem(a.key(f),j),window.localStorage.removeItem(D),oe(h,o=f,o),t(4,$=a.getFileList())}}function A(){Le(o+".json",JSON.stringify(l))}async function P(f){if(window.confirm(`Really delete file ${f}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`)){let D=a.key(f);Le(`${f}.json`,window.localStorage.getItem(D)),window.localStorage.removeItem(D),f==o?await te():t(4,$=a.saveAndGetFileList(o,l))}}async function te(){oe(h,o=a.newFilename(),o),oe(v,l=a.emptyState(),l),t(4,$=a.saveAndGetFileList(o,l))}async function re(f,D){let j=Ge(f,".json");try{let E=JSON.parse(D);a.validate(E),t(4,$=a.saveAndGetFileList(j,E)),await b(j)}catch(E){window.alert(`Couldn't load ${j}: ${E}`)}}async function N(f){let{filename:D,data:j}=f.detail;t(4,$=a.saveAndGetFileList(D,j)),await b(D)}async function b(f){try{let D=a.loadFile(f);oe(h,o=f,o),oe(v,l=D,l)}catch(D){window.alert(`Couldn't load ${f}: ${D}`)}}const X=()=>P(o),ae=f=>b(f),se=()=>Ye(`${ie}/${a.prefix}`),V=f=>P(f);return s.$$set=f=>{"files"in f&&t(0,a=f.files),"currentFile"in f&&p(t(1,h=f.currentFile)),"state"in f&&n(t(2,v=f.state)),"xlsxImporter"in f&&t(3,g=f.xlsxImporter)},[a,h,v,g,$,o,Y,A,P,te,re,N,b,X,ae,se,V]}class Dt extends Ee{constructor(e){super(),He(this,e,pt,mt,Be,{files:0,currentFile:1,state:2,xlsxImporter:3})}}export{Dt as F};
