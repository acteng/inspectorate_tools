import{s as we,r as ee,w as ne,a as C,e as E,g as L,c as N,q as te,i as S,G as Lt,y as Et,f as _,x as sr,t as A,b as B,d as H,p as ve,v as Re,h as v,j as ce,k as ze,_ as or,H as fr,D as Pe,n as Je,T as ur,U as tr}from"../chunks/scheduler.BFB7ZLp4.js";import{S as ke,i as ye,e as ie,c as M,a as W,m as R,t as y,b as T,d as P,g as fe,f as ue}from"../chunks/index.D7s828ig.js";import{e as G,u as be,o as Ue,d as mt}from"../chunks/each.Ep5bqd0c.js";import{D as ht,C as st}from"../chunks/DefaultButton.Cdm-d6iX.js";import"../chunks/index.CmTRRPYN.js";import{S as cr}from"../chunks/Select.B2G2drcu.js";import{S as Oe}from"../chunks/SecondaryButton.CcNwBo7g.js";import{W as rr}from"../chunks/WarningButton.DOBOxR2N.js";import{W as dr}from"../chunks/WarningText.DP3B6kE0.js";import{s as Y,a as nr,b as pr}from"../chunks/data.B0W_gdCo.js";import{a as ir,c as mr,n as hr,g as ot}from"../chunks/logic.QIc_5A2T.js";import"../chunks/index.As24oziD.js";import{E as _r}from"../chunks/ExternalLink.BI-KRjz7.js";import"../chunks/paths.D3ceBo7o.js";import"../chunks/entry.CYjhM5nE.js";import{D as gr}from"../chunks/DecimalInput.CfvprAom.js";import{E as lr}from"../chunks/ErrorMessage.DxjxDNPZ.js";import{T as $r}from"../chunks/TextInput.Bbx1MJRt.js";import{M as br}from"../chunks/Modal.CJ-ztQPE.js";import{v as vr}from"../chunks/v4.b0td5MfA.js";import{p as We}from"../chunks/index.DqAhxkMA.js";import{F as wr}from"../chunks/FormElement.CCU6qONY.js";import{v as kr}from"../chunks/v4.D8aEg3BZ.js";import{R as Me}from"../chunks/Radio.BpgCRJ9Z.js";function yr(n){let e,r,t;function i(a){n[9](a)}let l={label:n[0],hint:n[1],choices:n[5],emptyOption:n[2],disabled:n[3]};return n[4]!==void 0&&(l.value=n[4]),e=new cr({props:l}),ee.push(()=>ie(e,"value",i)),e.$on("change",n[6]),{c(){M(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,o){R(e,a,o),t=!0},p(a,[o]){const s={};o&1&&(s.label=a[0]),o&2&&(s.hint=a[1]),o&32&&(s.choices=a[5]),o&4&&(s.emptyOption=a[2]),o&8&&(s.disabled=a[3]),!r&&o&16&&(r=!0,s.value=a[4],ne(()=>r=!1)),e.$set(s)},i(a){t||(y(e.$$.fragment,a),t=!0)},o(a){T(e.$$.fragment,a),t=!1},d(a){P(e,a)}}}function Dr(n){return n.map(e=>[JSON.stringify(e[0]),e[1]])}function Tr(n,e,r){let t,i,{label:l}=e,{hint:a=""}=e,{choices:o}=e,{emptyOption:s=!1}=e,{disabled:f=!1}=e,{value:p}=e;function d(){r(7,p=i==""?"":JSON.parse(i))}function h($){i=$,r(4,i),r(7,p)}return n.$$set=$=>{"label"in $&&r(0,l=$.label),"hint"in $&&r(1,a=$.hint),"choices"in $&&r(8,o=$.choices),"emptyOption"in $&&r(2,s=$.emptyOption),"disabled"in $&&r(3,f=$.disabled),"value"in $&&r(7,p=$.value)},n.$$.update=()=>{n.$$.dirty&256&&r(5,t=Dr(o)),n.$$.dirty&128&&r(4,i=JSON.stringify(p))},[l,a,s,f,i,t,d,p,o,h]}class Sr extends ke{constructor(e){super(),ye(this,e,Tr,yr,we,{label:0,hint:1,choices:8,emptyOption:2,disabled:3,value:7})}}function Fr(n){let e,r,t,i,l,a,o;return e=new lr({props:{errorMessage:n[5](n[2])}}),{c(){M(e.$$.fragment),r=C(),t=E("input"),this.h()},l(s){W(e.$$.fragment,s),r=L(s),t=N(s,"INPUT",{type:!0,inputmode:!0,class:!0,id:!0}),this.h()},h(){te(t,"type","text"),te(t,"inputmode","numeric"),te(t,"class",i=`govuk-input govuk-input--width-${n[1]}`),te(t,"id",n[3])},m(s,f){R(e,s,f),S(s,r,f),S(s,t,f),Lt(t,n[2]),l=!0,a||(o=[Et(t,"input",n[9]),Et(t,"change",n[4])],a=!0)},p(s,f){const p={};f&4&&(p.errorMessage=s[5](s[2])),e.$set(p),(!l||f&2&&i!==(i=`govuk-input govuk-input--width-${s[1]}`))&&te(t,"class",i),f&4&&t.value!==s[2]&&Lt(t,s[2])},i(s){l||(y(e.$$.fragment,s),l=!0)},o(s){T(e.$$.fragment,s),l=!1},d(s){s&&(_(r),_(t)),P(e,s),a=!1,sr(o)}}}function Cr(n){let e,r;return e=new wr({props:{label:n[0],id:n[3],$$slots:{default:[Fr]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,i){R(e,t,i),r=!0},p(t,[i]){const l={};i&1&&(l.label=t[0]),i&1030&&(l.$$scope={dirty:i,ctx:t}),e.$set(l)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function Lr(n,e,r){let{label:t}=e,{value:i}=e,{width:l}=e,{min:a=void 0}=e,{max:o=void 0}=e,s=i==null?void 0:i.toString(),f=kr();function p(){r(6,i=s==null?void 0:parseInt(s,10))}function d($){if($==""||$==null)return"";if($.includes("."))return"Please enter a number without decimals";let b=Number($);return isNaN(b)?"Please enter a valid number":a!=null&&b<a?`Please enter a number that's at least ${a};`:o!=null&&b>o?`Please enter a number that's at most ${o};`:""}function h(){s=this.value,r(2,s)}return n.$$set=$=>{"label"in $&&r(0,t=$.label),"value"in $&&r(6,i=$.value),"width"in $&&r(1,l=$.width),"min"in $&&r(7,a=$.min),"max"in $&&r(8,o=$.max)},[t,l,s,f,p,d,i,a,o,h]}class Er extends ke{constructor(e){super(),ye(this,e,Lr,Cr,we,{label:0,value:6,width:1,min:7,max:8})}}function Nt(n){return typeof n=="object"||n==""?[]:Nr[n]}let Nr={Footway:[["Manual for Streets 2: Section 5 pp. 43","https://tsrgd.co.uk/pdf/mfs/mfs2.pdf#page=48"],["DMRB CD143 Designing for walking, cycling & horse-riding Annex pp. 7",""]],"Narrow Traffic / Bus Lane":[],"Wide Traffic / Bus Lane":[],"Traffic Lane (no buses): speed limit 20/30":[["LTN 1/20 Table 7-2 pp. 76",ae(76)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"On-highway advisory/mandatory cycle lane":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"1-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"2-way protected cycle track":[["LTN 1/20 Table 5-2 pp. 43",ae(43)],["LTN 1/20 Figure 4.1 pp. 33",ae(33)]],"Shared use cycle track":[["LTN 1/20 Table 6-3 pp. 68",ae(68)]],"Parking Bay":[["LTN 1/20 table 7-3 pp. 77",ae(77)]],"Disabled Parking Bay":[],"Loading Bay":[["LTN 1/20 table 7-3 pp. 77",ae(77)]],"Buffer / Verge":[["LTN 1/20 table 6-1 pp. 54",ae(54)]]};function ae(n){return`https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/951074/cycle-infrastructure-design-ltn-1-20.pdf#page=${n}`}function Mt(n,e){let r=ir(e.speedLimit,e.observedSpeed);switch(n){case"Footway":return"There is no maximum width for footways; widths should take account of pedestrian volumes and composition. Suggested widths quoted here are the functional width available to the user";case"Narrow Traffic / Bus Lane":return"";case"Wide Traffic / Bus Lane":return"";case"Traffic Lane (no buses): speed limit 20/30":return e.trafficFlow=="<2,500"&&r==20?"Where traffic volumes are less than 2,500 vpd and speeds are less than 20mph, cycling in mixed traffic may be suitable for all users":"Where traffic volumes are greater than 2,500 vpd or speeds are greater than 20mph, cycling in mixed traffic is not suitable for all users";case"On-highway advisory/mandatory cycle lane":return(e.trafficFlow=="<2,500"||e.trafficFlow=="2,500-5,000")&&r==20?"Where traffic volumes are less than 2,500 vpd and/or speeds are less than 20mph, advisory or mandatory cycle lanes may be suitable for all users":"Where traffic volumes are greater than 5,000 vpd and/or speeds are greater than 20mph, advisory or mandatory cycle lanes are not suitable for all users";case"1-way protected cycle track":return r==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":r==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m":r==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.";case"2-way protected cycle track":return r==20?e.trafficFlow=="<2,500"?"If traffic flows are less than 2,500VPD and observed 85th percentile speed/speed limit is less than 30mph, then conditions for cycling in mixed traffic will suit most users":e.trafficFlow=="2,500-5,000"?"If traffic flows are greater than 2,500VPD but less than 5,000VPD, and observed 85th percentile speed/speed limit less than 30mph, then a mandatory or advisory cycle lane at the appropriate width will suit most users":"If traffic flows are greater than 5,000VPD and observed 85th percentile speed/speed limit less than 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":r==30?"If the observed 85th percentile speed or the speed limit is 30mph, provision of a light-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":r==40?"If the observed 85th percentile speed or the speed limit is 40mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the user plus min. protection width 0.3m.":"If the observed 85th percentile speed or the speed limit is 50+ mph, provision of a kerb-protected cycle track will suit most users. Suggested widths quoted here are the functional width available to the userplus min. protection width 0.3m.";case"Shared use cycle track":return"Potential policy conflict: 'Cyclists must be separated from pedestrians' - have you considered alternatives to a shared use cycle track?";case"Parking Bay":return"";case"Disabled Parking Bay":return"";case"Loading Bay":return"";case"Buffer / Verge":return"Your buffer / verge shouldn't impact on the functional width of your footway or cycle-track";default:return""}}function Wt(n,e,r){const t=n.slice();return t[19]=e[r],t[21]=r,t}function Rt(n,e,r){const t=n.slice();return t[19]=e[r],t[21]=r,t}function Pt(n,e,r){const t=n.slice();return t[23]=e[r][0],t[24]=e[r][1],t}function Ot(n,e,r){const t=n.slice();t[19]=e[r],t[21]=r;const i=t[21]==0?"":t[0][t[21]-1];t[27]=i;const l=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=l,t}function Bt(n,e,r){const t=n.slice();t[19]=e[r],t[21]=r;const i=t[21]==0?"":t[0][t[21]-1];t[27]=i;const l=t[21]==t[0].length-1?"":t[0][t[21]+1];return t[28]=l,t}function It(n,e,r){const t=n.slice();t[19]=e[r],t[21]=r;const i=t[21]==0?"":t[0][t[21]-1];t[27]=i;const l=t[21]==t[0].length-1?"":t[0][t[21]+1];t[28]=l;const a=hr(t[19],t[27],t[28]);return t[31]=a,t}function qt(n,e,r){const t=n.slice();return t[19]=e[r],t[33]=e,t[21]=r,t}function Vt(n,e,r){const t=n.slice();return t[19]=e[r],t[21]=r,t}function Mr(n){let e;return{c(){e=A("Add feature")},l(r){e=H(r,"Add feature")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Wr(n){let e;return{c(){e=A("←")},l(r){e=H(r,"←")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Rr(n){let e;return{c(){e=A("Delete")},l(r){e=H(r,"Delete")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Pr(n){let e;return{c(){e=A("→")},l(r){e=H(r,"→")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function jt(n,e){let r,t,i,l,a,o,s,f,p;function d(){return e[11](e[21])}i=new Oe({props:{disabled:e[21]==0,$$slots:{default:[Wr]},$$scope:{ctx:e}}}),i.$on("click",d);function h(){return e[12](e[21])}a=new rr({props:{$$slots:{default:[Rr]},$$scope:{ctx:e}}}),a.$on("click",h);function $(){return e[13](e[21])}return s=new Oe({props:{disabled:e[21]==e[0].length-1,$$slots:{default:[Pr]},$$scope:{ctx:e}}}),s.$on("click",$),{key:n,first:null,c(){r=E("td"),t=E("div"),M(i.$$.fragment),l=C(),M(a.$$.fragment),o=C(),M(s.$$.fragment),f=C(),this.h()},l(b){r=N(b,"TD",{class:!0});var m=B(r);t=N(m,"DIV",{style:!0});var D=B(t);W(i.$$.fragment,D),l=L(D),W(a.$$.fragment,D),o=L(D),W(s.$$.fragment,D),D.forEach(_),f=L(m),m.forEach(_),this.h()},h(){Re(t,"display","flex"),Re(t,"justify-content","space-between"),te(r,"class","svelte-18bftjb"),this.first=r},m(b,m){S(b,r,m),v(r,t),R(i,t,null),v(t,l),R(a,t,null),v(t,o),R(s,t,null),v(r,f),p=!0},p(b,m){e=b;const D={};m[0]&1&&(D.disabled=e[21]==0),m[1]&16&&(D.$$scope={dirty:m,ctx:e}),i.$set(D);const g={};m[1]&16&&(g.$$scope={dirty:m,ctx:e}),a.$set(g);const O={};m[0]&1&&(O.disabled=e[21]==e[0].length-1),m[1]&16&&(O.$$scope={dirty:m,ctx:e}),s.$set(O)},i(b){p||(y(i.$$.fragment,b),y(a.$$.fragment,b),y(s.$$.fragment,b),p=!0)},o(b){T(i.$$.fragment,b),T(a.$$.fragment,b),T(s.$$.fragment,b),p=!1},d(b){b&&_(r),P(i),P(a),P(s)}}}function At(n,e){let r,t,i,l,a;function o(f){e[14](f,e[19],e[33],e[21])}let s={label:"Street feature type",emptyOption:!0,choices:e[3]};return e[19]!==void 0&&(s.value=e[19]),t=new Sr({props:s}),ee.push(()=>ie(t,"value",o)),{key:n,first:null,c(){r=E("td"),M(t.$$.fragment),l=C(),this.h()},l(f){r=N(f,"TD",{class:!0});var p=B(r);W(t.$$.fragment,p),l=L(p),p.forEach(_),this.h()},h(){te(r,"class","svelte-18bftjb"),this.first=r},m(f,p){S(f,r,p),R(t,r,null),v(r,l),a=!0},p(f,p){e=f;const d={};p[0]&8&&(d.choices=e[3]),!i&&p[0]&1&&(i=!0,d.value=e[19],ne(()=>i=!1)),t.$set(d)},i(f){a||(y(t.$$.fragment,f),a=!0)},o(f){T(t.$$.fragment,f),a=!1},d(f){f&&_(r),P(t)}}}function Ht(n){let e,r;return e=new dr({props:{$$slots:{default:[Br]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,i){R(e,t,i),r=!0},p(t,i){const l={};i[0]&1|i[1]&16&&(l.$$scope={dirty:i,ctx:t}),e.$set(l)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function Or(n){let e;return{c(){e=A("Add")},l(r){e=H(r,"Add")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Br(n){let e=n[31].warning+"",r,t,i,l;function a(){return n[15](n[21],n[31])}return i=new Oe({props:{style:"margin-bottom: 0px; float: right",$$slots:{default:[Or]},$$scope:{ctx:n}}}),i.$on("click",a),{c(){r=A(e),t=C(),M(i.$$.fragment)},l(o){r=H(o,e),t=L(o),W(i.$$.fragment,o)},m(o,s){S(o,r,s),S(o,t,s),R(i,o,s),l=!0},p(o,s){n=o,(!l||s[0]&1)&&e!==(e=n[31].warning+"")&&ce(r,e);const f={};s[1]&16&&(f.$$scope={dirty:s,ctx:n}),i.$set(f)},i(o){l||(y(i.$$.fragment,o),l=!0)},o(o){T(i.$$.fragment,o),l=!1},d(o){o&&(_(r),_(t)),P(i,o)}}}function Ut(n,e){let r,t,i,l=e[31].warning!=""&&Ht(e);return{key:n,first:null,c(){r=E("td"),l&&l.c(),t=C(),this.h()},l(a){r=N(a,"TD",{class:!0});var o=B(r);l&&l.l(o),t=L(o),o.forEach(_),this.h()},h(){te(r,"class","svelte-18bftjb"),this.first=r},m(a,o){S(a,r,o),l&&l.m(r,null),v(r,t),i=!0},p(a,o){e=a,e[31].warning!=""?l?(l.p(e,o),o[0]&1&&y(l,1)):(l=Ht(e),l.c(),y(l,1),l.m(r,t)):l&&(fe(),T(l,1,1,()=>{l=null}),ue())},i(a){i||(y(l),i=!0)},o(a){T(l),i=!1},d(a){a&&_(r),l&&l.d()}}}function Jt(n,e){let r,t=ot(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"",i,l;return{key:n,first:null,c(){r=E("td"),i=A(t),l=C(),this.h()},l(a){r=N(a,"TD",{class:!0});var o=B(r);i=H(o,t),l=L(o),o.forEach(_),this.h()},h(){te(r,"class","svelte-18bftjb"),this.first=r},m(a,o){S(a,r,o),v(r,i),v(r,l)},p(a,o){e=a,o[0]&3&&t!==(t=ot(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[0].toFixed(2)+"")&&ce(i,t)},d(a){a&&_(r)}}}function zt(n,e){let r,t=ot(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"",i,l;return{key:n,first:null,c(){r=E("td"),i=A(t),l=C(),this.h()},l(a){r=N(a,"TD",{class:!0});var o=B(r);i=H(o,t),l=L(o),o.forEach(_),this.h()},h(){te(r,"class","svelte-18bftjb"),this.first=r},m(a,o){S(a,r,o),v(r,i),v(r,l)},p(a,o){e=a,o[0]&3&&t!==(t=ot(e[19],e[1].proposed.trafficData,e[1].proposed.customFeatures,e[27],e[28])[1].toFixed(2)+"")&&ce(i,t)},d(a){a&&_(r)}}}function Ir(n){let e,r=n[23]+"",t;return{c(){e=E("li"),t=A(r)},l(i){e=N(i,"LI",{});var l=B(e);t=H(l,r),l.forEach(_)},m(i,l){S(i,e,l),v(e,t)},p(i,l){l[0]&1&&r!==(r=i[23]+"")&&ce(t,r)},i:Je,o:Je,d(i){i&&_(e)}}}function qr(n){let e,r,t;return r=new _r({props:{href:n[24],$$slots:{default:[Vr]},$$scope:{ctx:n}}}),{c(){e=E("li"),M(r.$$.fragment)},l(i){e=N(i,"LI",{});var l=B(e);W(r.$$.fragment,l),l.forEach(_)},m(i,l){S(i,e,l),R(r,e,null),t=!0},p(i,l){const a={};l[0]&1&&(a.href=i[24]),l[0]&1|l[1]&16&&(a.$$scope={dirty:l,ctx:i}),r.$set(a)},i(i){t||(y(r.$$.fragment,i),t=!0)},o(i){T(r.$$.fragment,i),t=!1},d(i){i&&_(e),P(r)}}}function Vr(n){let e=n[23]+"",r;return{c(){r=A(e)},l(t){r=H(t,e)},m(t,i){S(t,r,i)},p(t,i){i[0]&1&&e!==(e=t[23]+"")&&ce(r,e)},d(t){t&&_(r)}}}function Gt(n){let e,r,t,i;const l=[qr,Ir],a=[];function o(s,f){return s[24]?0:1}return e=o(n),r=a[e]=l[e](n),{c(){r.c(),t=Pe()},l(s){r.l(s),t=Pe()},m(s,f){a[e].m(s,f),S(s,t,f),i=!0},p(s,f){let p=e;e=o(s),e===p?a[e].p(s,f):(fe(),T(a[p],1,1,()=>{a[p]=null}),ue(),r=a[e],r?r.p(s,f):(r=a[e]=l[e](s),r.c()),y(r,1),r.m(t.parentNode,t))},i(s){i||(y(r),i=!0)},o(s){T(r),i=!1},d(s){s&&_(t),a[e].d(s)}}}function Yt(n,e){let r,t,i,l,a=G(Nt(e[19])),o=[];for(let f=0;f<a.length;f+=1)o[f]=Gt(Pt(e,a,f));const s=f=>T(o[f],1,1,()=>{o[f]=null});return{key:n,first:null,c(){r=E("td"),t=E("ul");for(let f=0;f<o.length;f+=1)o[f].c();i=C(),this.h()},l(f){r=N(f,"TD",{class:!0});var p=B(r);t=N(p,"UL",{});var d=B(t);for(let h=0;h<o.length;h+=1)o[h].l(d);d.forEach(_),i=L(p),p.forEach(_),this.h()},h(){te(r,"class","svelte-18bftjb"),this.first=r},m(f,p){S(f,r,p),v(r,t);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(t,null);v(r,i),l=!0},p(f,p){if(e=f,p[0]&1){a=G(Nt(e[19]));let d;for(d=0;d<a.length;d+=1){const h=Pt(e,a,d);o[d]?(o[d].p(h,p),y(o[d],1)):(o[d]=Gt(h),o[d].c(),y(o[d],1),o[d].m(t,null))}for(fe(),d=a.length;d<o.length;d+=1)s(d);ue()}},i(f){if(!l){for(let p=0;p<a.length;p+=1)y(o[p]);l=!0}},o(f){o=o.filter(Boolean);for(let p=0;p<o.length;p+=1)T(o[p]);l=!1},d(f){f&&_(r),fr(o,f)}}}function Kt(n,e){let r,t,i=Mt(e[19],e[1].proposed.trafficData)+"",l,a;return{key:n,first:null,c(){r=E("td"),t=E("p"),l=A(i),a=C(),this.h()},l(o){r=N(o,"TD",{class:!0});var s=B(r);t=N(s,"P",{style:!0});var f=B(t);l=H(f,i),f.forEach(_),a=L(s),s.forEach(_),this.h()},h(){Re(t,"max-width","400px"),te(r,"class","svelte-18bftjb"),this.first=r},m(o,s){S(o,r,s),v(r,t),v(t,l),v(r,a)},p(o,s){e=o,s[0]&3&&i!==(i=Mt(e[19],e[1].proposed.trafficData)+"")&&ce(l,i)},d(o){o&&_(r)}}}function jr(n){let e,r,t,i,l,a=n[4][0].toFixed(2)+"",o,s,f,p,d,h=n[4][1].toFixed(2)+"",$,b,m,D,g,O,Q,V=[],se=new Map,F,I,K,oe="Street Feature",Be,J=[],Ge=new Map,De,de,me,Ye="Buffers",Te,q=[],Ke=new Map,Se,pe,he,Qe="Desirable minimum width (m)",Fe,k=[],z=new Map,X,U,_e,Ie="Absolute minimum width (m)",Ce,Z=[],qe=new Map,ft,ge,Le,_t="References",ut,x=[],gt=new Map,ct,$e,Ee,$t="Guidance",dt,le=[],bt=new Map,Ne;e=new ht({props:{$$slots:{default:[Mr]},$$scope:{ctx:n}}}),e.$on("click",n[5]);let Ve=G(n[0]);const vt=u=>u[21];for(let u=0;u<Ve.length;u+=1){let c=Vt(n,Ve,u),w=vt(c);se.set(w,V[u]=jt(w,c))}let je=G(n[0]);const wt=u=>u[21];for(let u=0;u<je.length;u+=1){let c=qt(n,je,u),w=wt(c);Ge.set(w,J[u]=At(w,c))}let Ae=G(n[0]);const kt=u=>u[21];for(let u=0;u<Ae.length;u+=1){let c=It(n,Ae,u),w=kt(c);Ke.set(w,q[u]=Ut(w,c))}let Xe=G(n[0]);const yt=u=>u[21];for(let u=0;u<Xe.length;u+=1){let c=Bt(n,Xe,u),w=yt(c);z.set(w,k[u]=Jt(w,c))}let Ze=G(n[0]);const Dt=u=>u[21];for(let u=0;u<Ze.length;u+=1){let c=Ot(n,Ze,u),w=Dt(c);qe.set(w,Z[u]=zt(w,c))}let He=G(n[0]);const Tt=u=>u[21];for(let u=0;u<He.length;u+=1){let c=Rt(n,He,u),w=Tt(c);gt.set(w,x[u]=Yt(w,c))}let xe=G(n[0]);const St=u=>u[21];for(let u=0;u<xe.length;u+=1){let c=Wt(n,xe,u),w=St(c);bt.set(w,le[u]=Kt(w,c))}return{c(){M(e.$$.fragment),r=C(),t=E("p"),i=A("Desirable minimum total width required (m): "),l=E("b"),o=A(a),s=C(),f=E("p"),p=A("Absolute minimum total width required (m): "),d=E("b"),$=A(h),b=C(),m=E("div"),D=E("table"),g=E("tr"),O=E("th"),Q=C();for(let u=0;u<V.length;u+=1)V[u].c();F=C(),I=E("tr"),K=E("th"),K.textContent=oe,Be=C();for(let u=0;u<J.length;u+=1)J[u].c();De=C(),de=E("tr"),me=E("th"),me.textContent=Ye,Te=C();for(let u=0;u<q.length;u+=1)q[u].c();Se=C(),pe=E("tr"),he=E("th"),he.textContent=Qe,Fe=C();for(let u=0;u<k.length;u+=1)k[u].c();X=C(),U=E("tr"),_e=E("th"),_e.textContent=Ie,Ce=C();for(let u=0;u<Z.length;u+=1)Z[u].c();ft=C(),ge=E("tr"),Le=E("th"),Le.textContent=_t,ut=C();for(let u=0;u<x.length;u+=1)x[u].c();ct=C(),$e=E("tr"),Ee=E("th"),Ee.textContent=$t,dt=C();for(let u=0;u<le.length;u+=1)le[u].c();this.h()},l(u){W(e.$$.fragment,u),r=L(u),t=N(u,"P",{});var c=B(t);i=H(c,"Desirable minimum total width required (m): "),l=N(c,"B",{});var w=B(l);o=H(w,a),w.forEach(_),c.forEach(_),s=L(u),f=N(u,"P",{});var pt=B(f);p=H(pt,"Absolute minimum total width required (m): "),d=N(pt,"B",{});var Ft=B(d);$=H(Ft,h),Ft.forEach(_),pt.forEach(_),b=L(u),m=N(u,"DIV",{style:!0});var Ct=B(m);D=N(Ct,"TABLE",{});var re=B(D);g=N(re,"TR",{});var et=B(g);O=N(et,"TH",{}),B(O).forEach(_),Q=L(et);for(let j=0;j<V.length;j+=1)V[j].l(et);et.forEach(_),F=L(re),I=N(re,"TR",{});var tt=B(I);K=N(tt,"TH",{"data-svelte-h":!0}),ve(K)!=="svelte-16tcugb"&&(K.textContent=oe),Be=L(tt);for(let j=0;j<J.length;j+=1)J[j].l(tt);tt.forEach(_),De=L(re),de=N(re,"TR",{});var rt=B(de);me=N(rt,"TH",{"data-svelte-h":!0}),ve(me)!=="svelte-11hw9wb"&&(me.textContent=Ye),Te=L(rt);for(let j=0;j<q.length;j+=1)q[j].l(rt);rt.forEach(_),Se=L(re),pe=N(re,"TR",{});var nt=B(pe);he=N(nt,"TH",{"data-svelte-h":!0}),ve(he)!=="svelte-i7hz1h"&&(he.textContent=Qe),Fe=L(nt);for(let j=0;j<k.length;j+=1)k[j].l(nt);nt.forEach(_),X=L(re),U=N(re,"TR",{});var it=B(U);_e=N(it,"TH",{"data-svelte-h":!0}),ve(_e)!=="svelte-zhiq21"&&(_e.textContent=Ie),Ce=L(it);for(let j=0;j<Z.length;j+=1)Z[j].l(it);it.forEach(_),ft=L(re),ge=N(re,"TR",{});var lt=B(ge);Le=N(lt,"TH",{"data-svelte-h":!0}),ve(Le)!=="svelte-o075z0"&&(Le.textContent=_t),ut=L(lt);for(let j=0;j<x.length;j+=1)x[j].l(lt);lt.forEach(_),ct=L(re),$e=N(re,"TR",{});var at=B($e);Ee=N(at,"TH",{"data-svelte-h":!0}),ve(Ee)!=="svelte-pnu4jc"&&(Ee.textContent=$t),dt=L(at);for(let j=0;j<le.length;j+=1)le[j].l(at);at.forEach(_),re.forEach(_),Ct.forEach(_),this.h()},h(){Re(m,"display","flex"),Re(m,"flex-direction","row"),Re(m,"overflow-x","scroll")},m(u,c){R(e,u,c),S(u,r,c),S(u,t,c),v(t,i),v(t,l),v(l,o),S(u,s,c),S(u,f,c),v(f,p),v(f,d),v(d,$),S(u,b,c),S(u,m,c),v(m,D),v(D,g),v(g,O),v(g,Q);for(let w=0;w<V.length;w+=1)V[w]&&V[w].m(g,null);v(D,F),v(D,I),v(I,K),v(I,Be);for(let w=0;w<J.length;w+=1)J[w]&&J[w].m(I,null);v(D,De),v(D,de),v(de,me),v(de,Te);for(let w=0;w<q.length;w+=1)q[w]&&q[w].m(de,null);v(D,Se),v(D,pe),v(pe,he),v(pe,Fe);for(let w=0;w<k.length;w+=1)k[w]&&k[w].m(pe,null);v(D,X),v(D,U),v(U,_e),v(U,Ce);for(let w=0;w<Z.length;w+=1)Z[w]&&Z[w].m(U,null);v(D,ft),v(D,ge),v(ge,Le),v(ge,ut);for(let w=0;w<x.length;w+=1)x[w]&&x[w].m(ge,null);v(D,ct),v(D,$e),v($e,Ee),v($e,dt);for(let w=0;w<le.length;w+=1)le[w]&&le[w].m($e,null);n[16](m),Ne=!0},p(u,c){const w={};c[1]&16&&(w.$$scope={dirty:c,ctx:u}),e.$set(w),(!Ne||c[0]&16)&&a!==(a=u[4][0].toFixed(2)+"")&&ce(o,a),(!Ne||c[0]&16)&&h!==(h=u[4][1].toFixed(2)+"")&&ce($,h),c[0]&449&&(Ve=G(u[0]),fe(),V=be(V,c,vt,1,u,Ve,se,g,Ue,jt,null,Vt),ue()),c[0]&9&&(je=G(u[0]),fe(),J=be(J,c,wt,1,u,je,Ge,I,Ue,At,null,qt),ue()),c[0]&513&&(Ae=G(u[0]),fe(),q=be(q,c,kt,1,u,Ae,Ke,de,Ue,Ut,null,It),ue()),c[0]&3&&(Xe=G(u[0]),k=be(k,c,yt,1,u,Xe,z,pe,mt,Jt,null,Bt)),c[0]&3&&(Ze=G(u[0]),Z=be(Z,c,Dt,1,u,Ze,qe,U,mt,zt,null,Ot)),c[0]&1&&(He=G(u[0]),fe(),x=be(x,c,Tt,1,u,He,gt,ge,Ue,Yt,null,Rt),ue()),c[0]&3&&(xe=G(u[0]),le=be(le,c,St,1,u,xe,bt,$e,mt,Kt,null,Wt))},i(u){if(!Ne){y(e.$$.fragment,u);for(let c=0;c<Ve.length;c+=1)y(V[c]);for(let c=0;c<je.length;c+=1)y(J[c]);for(let c=0;c<Ae.length;c+=1)y(q[c]);for(let c=0;c<He.length;c+=1)y(x[c]);Ne=!0}},o(u){T(e.$$.fragment,u);for(let c=0;c<V.length;c+=1)T(V[c]);for(let c=0;c<J.length;c+=1)T(J[c]);for(let c=0;c<q.length;c+=1)T(q[c]);for(let c=0;c<x.length;c+=1)T(x[c]);Ne=!1},d(u){u&&(_(r),_(t),_(s),_(f),_(b),_(m)),P(e,u);for(let c=0;c<V.length;c+=1)V[c].d();for(let c=0;c<J.length;c+=1)J[c].d();for(let c=0;c<q.length;c+=1)q[c].d();for(let c=0;c<k.length;c+=1)k[c].d();for(let c=0;c<Z.length;c+=1)Z[c].d();for(let c=0;c<x.length;c+=1)x[c].d();for(let c=0;c<le.length;c+=1)le[c].d();n[16](null)}}}function Ar(n,e,r){let t,i,l;ze(n,Y,F=>r(1,l=F));let{streetFeaturesLeftToRight:a}=e,{sectionType:o}=e,s,f=!1;or(()=>{f&&(f=!1,r(2,s.scrollLeft=s.scrollWidth,s))});function p(){r(0,a=[...a,""]),f=!0}function d(F){a.splice(F,1),r(0,a)}function h(F){r(0,[a[F-1],a[F]]=[a[F],a[F-1]],a)}function $(F){r(0,[a[F+1],a[F]]=[a[F],a[F+1]],a)}function b(F){let I=nr.map(K=>[K,K]);for(let[K,oe]of Object.entries(F))I.push([{custom:K},`Custom: ${oe.name}`]);return I}function m(F,I){(I=="right"||I=="both")&&a.splice(F+1,0,"Buffer / Verge"),(I=="left"||I=="both")&&a.splice(F,0,"Buffer / Verge"),r(0,a)}const D=F=>h(F),g=F=>d(F),O=F=>$(F);function Q(F,I,K,oe){K[oe]=F,r(0,a)}const V=(F,I)=>m(F,I.fix);function se(F){ee[F?"unshift":"push"](()=>{s=F,r(2,s)})}return n.$$set=F=>{"streetFeaturesLeftToRight"in F&&r(0,a=F.streetFeaturesLeftToRight),"sectionType"in F&&r(10,o=F.sectionType)},n.$$.update=()=>{n.$$.dirty[0]&1026&&r(4,t=mr(l,o)),n.$$.dirty[0]&2&&r(3,i=b(l.proposed.customFeatures))},[a,l,s,i,t,p,d,h,$,m,o,D,g,O,Q,V,se]}class ar extends ke{constructor(e){super(),ye(this,e,Ar,jr,we,{streetFeaturesLeftToRight:0,sectionType:10},null,[-1,-1])}}function Hr(n){let e;return{c(){e=A("Confirm")},l(r){e=H(r,"Confirm")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Ur(n){let e;return{c(){e=A("Cancel")},l(r){e=H(r,"Cancel")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Jr(n){let e,r,t,i,l,a,o,s,f,p,d,h;function $(g){n[6](g)}let b={label:"Name"};n[0]!==void 0&&(b.value=n[0]),e=new $r({props:b}),ee.push(()=>ie(e,"value",$));function m(g){n[7](g)}let D={label:"Minimum width (m)",width:4,min:0};return n[1]!==void 0&&(D.value=n[1]),i=new gr({props:D}),ee.push(()=>ie(i,"value",m)),o=new lr({props:{errorMessage:n[2]}}),f=new ht({props:{disabled:n[2]!="",$$slots:{default:[Hr]},$$scope:{ctx:n}}}),f.$on("click",n[8]),d=new Oe({props:{$$slots:{default:[Ur]},$$scope:{ctx:n}}}),d.$on("click",n[9]),{c(){M(e.$$.fragment),t=C(),M(i.$$.fragment),a=C(),M(o.$$.fragment),s=C(),M(f.$$.fragment),p=C(),M(d.$$.fragment)},l(g){W(e.$$.fragment,g),t=L(g),W(i.$$.fragment,g),a=L(g),W(o.$$.fragment,g),s=L(g),W(f.$$.fragment,g),p=L(g),W(d.$$.fragment,g)},m(g,O){R(e,g,O),S(g,t,O),R(i,g,O),S(g,a,O),R(o,g,O),S(g,s,O),R(f,g,O),S(g,p,O),R(d,g,O),h=!0},p(g,O){const Q={};!r&&O&1&&(r=!0,Q.value=g[0],ne(()=>r=!1)),e.$set(Q);const V={};!l&&O&2&&(l=!0,V.value=g[1],ne(()=>l=!1)),i.$set(V);const se={};O&4&&(se.errorMessage=g[2]),o.$set(se);const F={};O&4&&(F.disabled=g[2]!=""),O&4096&&(F.$$scope={dirty:O,ctx:g}),f.$set(F);const I={};O&4096&&(I.$$scope={dirty:O,ctx:g}),d.$set(I)},i(g){h||(y(e.$$.fragment,g),y(i.$$.fragment,g),y(o.$$.fragment,g),y(f.$$.fragment,g),y(d.$$.fragment,g),h=!0)},o(g){T(e.$$.fragment,g),T(i.$$.fragment,g),T(o.$$.fragment,g),T(f.$$.fragment,g),T(d.$$.fragment,g),h=!1},d(g){g&&(_(t),_(a),_(s),_(p)),P(e,g),P(i,g),P(o,g),P(f,g),P(d,g)}}}function zr(n){let e,r;return e=new br({props:{title:"Editing custom street feature",open:!0,displayEscapeButton:!1,canCloseByClickingBackground:!1,$$slots:{default:[Jr]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,i){R(e,t,i),r=!0},p(t,[i]){const l={};i&4103&&(l.$$scope={dirty:i,ctx:t}),e.$set(l)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function Gr(n,e,r){let t,i;ze(n,Y,m=>r(10,i=m));let{initialName:l}=e,{initialWidth:a}=e,o=ur(),s=l,f=a;function p(m,D){return m==""?"Name must be specified":m!=l&&Object.values(i.proposed.customFeatures).some(g=>g.name==m)?"That name is already used by another custom feature":nr.includes(m)?"That name is the same as one of the built-in features":isNaN(D)?"Enter a valid width":D<=0?"Enter a positive width":""}function d(m){s=m,r(0,s)}function h(m){f=m,r(1,f)}const $=()=>o("confirm",{name:s,width:f}),b=()=>o("cancel");return n.$$set=m=>{"initialName"in m&&r(4,l=m.initialName),"initialWidth"in m&&r(5,a=m.initialWidth)},n.$$.update=()=>{n.$$.dirty&3&&r(2,t=p(s,f))},[s,f,t,o,l,a,d,h,$,b]}class Yr extends ke{constructor(e){super(),ye(this,e,Gr,zr,we,{initialName:4,initialWidth:5})}}function Qt(n,e,r){const t=n.slice();return t[9]=e[r],t}function Kr(n){let e;return{c(){e=A("Add custom feature")},l(r){e=H(r,"Add custom feature")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Qr(n){let e,r=n[1].proposed.customFeatures[n[9]].name+"",t,i,l=n[1].proposed.customFeatures[n[9]].width+"",a,o;return{c(){e=E("u"),t=A(r),i=A(`
      : `),a=A(l),o=A(" m minimum width")},l(s){e=N(s,"U",{});var f=B(e);t=H(f,r),f.forEach(_),i=H(s,`
      : `),a=H(s,l),o=H(s," m minimum width")},m(s,f){S(s,e,f),v(e,t),S(s,i,f),S(s,a,f),S(s,o,f)},p(s,f){f&2&&r!==(r=s[1].proposed.customFeatures[s[9]].name+"")&&ce(t,r),f&2&&l!==(l=s[1].proposed.customFeatures[s[9]].width+"")&&ce(a,l)},d(s){s&&(_(e),_(i),_(a),_(o))}}}function Xr(n){let e;return{c(){e=A("Delete")},l(r){e=H(r,"Delete")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function Xt(n,e){let r,t,i,l,a;function o(){return e[6](e[9])}t=new Oe({props:{$$slots:{default:[Qr]},$$scope:{ctx:e}}}),t.$on("click",o);function s(){return e[7](e[9])}return l=new rr({props:{$$slots:{default:[Xr]},$$scope:{ctx:e}}}),l.$on("click",s),{key:n,first:null,c(){r=E("div"),M(t.$$.fragment),i=C(),M(l.$$.fragment),this.h()},l(f){r=N(f,"DIV",{});var p=B(r);W(t.$$.fragment,p),i=L(p),W(l.$$.fragment,p),p.forEach(_),this.h()},h(){this.first=r},m(f,p){S(f,r,p),R(t,r,null),v(r,i),R(l,r,null),a=!0},p(f,p){e=f;const d={};p&4098&&(d.$$scope={dirty:p,ctx:e}),t.$set(d);const h={};p&4096&&(h.$$scope={dirty:p,ctx:e}),l.$set(h)},i(f){a||(y(t.$$.fragment,f),y(l.$$.fragment,f),a=!0)},o(f){T(t.$$.fragment,f),T(l.$$.fragment,f),a=!1},d(f){f&&_(r),P(t),P(l)}}}function Zt(n){let e,r;return e=new Yr({props:{initialName:n[0].initialName,initialWidth:n[0].initialWidth}}),e.$on("cancel",n[8]),e.$on("confirm",n[5]),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,i){R(e,t,i),r=!0},p(t,i){const l={};i&1&&(l.initialName=t[0].initialName),i&1&&(l.initialWidth=t[0].initialWidth),e.$set(l)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function Zr(n){let e,r,t=[],i=new Map,l,a,o;e=new ht({props:{$$slots:{default:[Kr]},$$scope:{ctx:n}}}),e.$on("click",n[2]);let s=G(Object.keys(n[1].proposed.customFeatures));const f=d=>d[9];for(let d=0;d<s.length;d+=1){let h=Qt(n,s,d),$=f(h);i.set($,t[d]=Xt($,h))}let p=n[0]&&Zt(n);return{c(){M(e.$$.fragment),r=C();for(let d=0;d<t.length;d+=1)t[d].c();l=C(),p&&p.c(),a=Pe()},l(d){W(e.$$.fragment,d),r=L(d);for(let h=0;h<t.length;h+=1)t[h].l(d);l=L(d),p&&p.l(d),a=Pe()},m(d,h){R(e,d,h),S(d,r,h);for(let $=0;$<t.length;$+=1)t[$]&&t[$].m(d,h);S(d,l,h),p&&p.m(d,h),S(d,a,h),o=!0},p(d,[h]){const $={};h&4096&&($.$$scope={dirty:h,ctx:d}),e.$set($),h&26&&(s=G(Object.keys(d[1].proposed.customFeatures)),fe(),t=be(t,h,f,1,d,s,i,l.parentNode,Ue,Xt,l,Qt),ue()),d[0]?p?(p.p(d,h),h&1&&y(p,1)):(p=Zt(d),p.c(),y(p,1),p.m(a.parentNode,a)):p&&(fe(),T(p,1,1,()=>{p=null}),ue())},i(d){if(!o){y(e.$$.fragment,d);for(let h=0;h<s.length;h+=1)y(t[h]);y(p),o=!0}},o(d){T(e.$$.fragment,d);for(let h=0;h<t.length;h+=1)T(t[h]);T(p),o=!1},d(d){d&&(_(r),_(l),_(a)),P(e,d);for(let h=0;h<t.length;h+=1)t[h].d(d);p&&p.d(d)}}}function xr(n,e,r){let t;ze(n,Y,h=>r(1,t=h));let i=null;function l(){r(0,i={id:vr(),initialName:"",initialWidth:0})}function a(h){let $=t.proposed.customFeatures[h].name,b=JSON.stringify({custom:h});if(t.proposed.desirableMinimumCrossSection.some(m=>JSON.stringify(m)==b)){window.alert(`The ${$} custom feature is used in the Desirable Minimum Cross-Section. Remove it below before deleting.`);return}if(t.proposed.absoluteMinimumCrossSection.some(m=>JSON.stringify(m)==b)){window.alert(`The ${$} custom feature is used in the Absolute Minimum Cross-Section. Remove it below before deleting.`);return}delete t.proposed.customFeatures[h],Y.set(t)}function o(h){r(0,i={id:h,initialName:t.proposed.customFeatures[h].name,initialWidth:t.proposed.customFeatures[h].width})}function s(h){tr(Y,t.proposed.customFeatures[i.id]={name:h.detail.name,width:h.detail.width},t),Y.set(t),r(0,i=null)}return[i,t,l,a,o,s,h=>o(h),h=>a(h),()=>r(0,i=null)]}class en extends ke{constructor(e){super(),ye(this,e,xr,Zr,we,{})}}function xt(n){let e,r,t,i,l;return{c(){e=E("p"),r=E("i"),t=A("Effective speed limit, based on the limit and 85 percentile: "),i=A(n[1]),l=A(`
            mph`)},l(a){e=N(a,"P",{});var o=B(e);r=N(o,"I",{});var s=B(r);t=H(s,"Effective speed limit, based on the limit and 85 percentile: "),i=H(s,n[1]),l=H(s,`
            mph`),s.forEach(_),o.forEach(_)},m(a,o){S(a,e,o),v(e,r),v(r,t),v(r,i),v(r,l)},p(a,o){o&2&&ce(i,a[1])},d(a){a&&_(e)}}}function tn(n){let e,r,t,i,l,a,o,s,f,p,d,h,$,b,m,D,g,O,Q,V,se,F,I,K,oe;function Be(k){n[4](k)}let J={label:"Expected peak hour cycle flow: 1-way cycle tracks",inlineSmall:!0,choices:We(["<200","200-800",">800"])};n[0].proposed.trafficData.flowOneWay!==void 0&&(J.value=n[0].proposed.trafficData.flowOneWay),t=new Me({props:J}),ee.push(()=>ie(t,"value",Be));function Ge(k){n[5](k)}let De={label:"Expected peak hour cycle flow: 2-way cycle tracks",inlineSmall:!0,choices:We(["<300","300-1,000",">1,000"])};n[0].proposed.trafficData.flowTwoWay!==void 0&&(De.value=n[0].proposed.trafficData.flowTwoWay),a=new Me({props:De}),ee.push(()=>ie(a,"value",Ge));function de(k){n[6](k)}let me={label:"Expected peak hour cycle flow: shared use cycle tracks",inlineSmall:!0,choices:We(["<300",">300"])};n[0].proposed.trafficData.flowSharedUse!==void 0&&(me.value=n[0].proposed.trafficData.flowSharedUse),f=new Me({props:me}),ee.push(()=>ie(f,"value",de));function Ye(k){n[7](k)}let Te={label:"Traffic flow (vpd)",inlineSmall:!0,choices:We(["<2,500","2,500-5,000","5,000-10,000",">10,000"])};n[0].proposed.trafficData.trafficFlow!==void 0&&(Te.value=n[0].proposed.trafficData.trafficFlow),h=new Me({props:Te}),ee.push(()=>ie(h,"value",Ye));let q=n[1]&&xt(n);function Ke(k){n[8](k)}let Se={label:"Speed limit (MPH)",inlineSmall:!0,choices:n[2]};n[0].proposed.trafficData.speedLimit!==void 0&&(Se.value=n[0].proposed.trafficData.speedLimit),g=new Me({props:Se}),ee.push(()=>ie(g,"value",Ke));function pe(k){n[9](k)}let he={label:"Observed 85th percentile speed (MPH)",width:3,min:0,max:120};n[0].proposed.trafficData.observedSpeed!==void 0&&(he.value=n[0].proposed.trafficData.observedSpeed),V=new Er({props:he}),ee.push(()=>ie(V,"value",pe));function Qe(k){n[10](k)}let Fe={label:"Street function",inlineSmall:!0,choices:We(["High Street (active frontages)","Residential street","Local distributor road"])};return n[0].proposed.trafficData.streetFunction!==void 0&&(Fe.value=n[0].proposed.trafficData.streetFunction),I=new Me({props:Fe}),ee.push(()=>ie(I,"value",Qe)),{c(){e=E("div"),r=E("div"),M(t.$$.fragment),l=C(),M(a.$$.fragment),s=C(),M(f.$$.fragment),d=C(),M(h.$$.fragment),b=C(),m=E("div"),q&&q.c(),D=C(),M(g.$$.fragment),Q=C(),M(V.$$.fragment),F=C(),M(I.$$.fragment),this.h()},l(k){e=N(k,"DIV",{class:!0});var z=B(e);r=N(z,"DIV",{class:!0});var X=B(r);W(t.$$.fragment,X),l=L(X),W(a.$$.fragment,X),s=L(X),W(f.$$.fragment,X),d=L(X),W(h.$$.fragment,X),X.forEach(_),b=L(z),m=N(z,"DIV",{class:!0});var U=B(m);q&&q.l(U),D=L(U),W(g.$$.fragment,U),Q=L(U),W(V.$$.fragment,U),F=L(U),W(I.$$.fragment,U),U.forEach(_),z.forEach(_),this.h()},h(){te(r,"class","govuk-grid-column-one-half"),te(m,"class","govuk-grid-column-one-half"),te(e,"class","govuk-grid-row")},m(k,z){S(k,e,z),v(e,r),R(t,r,null),v(r,l),R(a,r,null),v(r,s),R(f,r,null),v(r,d),R(h,r,null),v(e,b),v(e,m),q&&q.m(m,null),v(m,D),R(g,m,null),v(m,Q),R(V,m,null),v(m,F),R(I,m,null),oe=!0},p(k,z){const X={};!i&&z&1&&(i=!0,X.value=k[0].proposed.trafficData.flowOneWay,ne(()=>i=!1)),t.$set(X);const U={};!o&&z&1&&(o=!0,U.value=k[0].proposed.trafficData.flowTwoWay,ne(()=>o=!1)),a.$set(U);const _e={};!p&&z&1&&(p=!0,_e.value=k[0].proposed.trafficData.flowSharedUse,ne(()=>p=!1)),f.$set(_e);const Ie={};!$&&z&1&&($=!0,Ie.value=k[0].proposed.trafficData.trafficFlow,ne(()=>$=!1)),h.$set(Ie),k[1]?q?q.p(k,z):(q=xt(k),q.c(),q.m(m,D)):q&&(q.d(1),q=null);const Ce={};!O&&z&1&&(O=!0,Ce.value=k[0].proposed.trafficData.speedLimit,ne(()=>O=!1)),g.$set(Ce);const Z={};!se&&z&1&&(se=!0,Z.value=k[0].proposed.trafficData.observedSpeed,ne(()=>se=!1)),V.$set(Z);const qe={};!K&&z&1&&(K=!0,qe.value=k[0].proposed.trafficData.streetFunction,ne(()=>K=!1)),I.$set(qe)},i(k){oe||(y(t.$$.fragment,k),y(a.$$.fragment,k),y(f.$$.fragment,k),y(h.$$.fragment,k),y(g.$$.fragment,k),y(V.$$.fragment,k),y(I.$$.fragment,k),oe=!0)},o(k){T(t.$$.fragment,k),T(a.$$.fragment,k),T(f.$$.fragment,k),T(h.$$.fragment,k),T(g.$$.fragment,k),T(V.$$.fragment,k),T(I.$$.fragment,k),oe=!1},d(k){k&&_(e),P(t),P(a),P(f),P(h),q&&q.d(),P(g),P(V),P(I)}}}function rn(n){let e,r;return e=new st({props:{label:"Traffic data and additional information",open:!0,$$slots:{default:[tn]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,i){R(e,t,i),r=!0},p(t,[i]){const l={};i&2051&&(l.$$scope={dirty:i,ctx:t}),e.$set(l)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function nn(n,e,r){let t,i;ze(n,Y,b=>r(0,i=b));let{valid:l}=e,a=We(pr);function o(b){n.$$.not_equal(i.proposed.trafficData.flowOneWay,b)&&(i.proposed.trafficData.flowOneWay=b,Y.set(i))}function s(b){n.$$.not_equal(i.proposed.trafficData.flowTwoWay,b)&&(i.proposed.trafficData.flowTwoWay=b,Y.set(i))}function f(b){n.$$.not_equal(i.proposed.trafficData.flowSharedUse,b)&&(i.proposed.trafficData.flowSharedUse=b,Y.set(i))}function p(b){n.$$.not_equal(i.proposed.trafficData.trafficFlow,b)&&(i.proposed.trafficData.trafficFlow=b,Y.set(i))}function d(b){n.$$.not_equal(i.proposed.trafficData.speedLimit,b)&&(i.proposed.trafficData.speedLimit=b,Y.set(i))}function h(b){n.$$.not_equal(i.proposed.trafficData.observedSpeed,b)&&(i.proposed.trafficData.observedSpeed=b,Y.set(i))}function $(b){n.$$.not_equal(i.proposed.trafficData.streetFunction,b)&&(i.proposed.trafficData.streetFunction=b,Y.set(i))}return n.$$set=b=>{"valid"in b&&r(3,l=b.valid)},n.$$.update=()=>{n.$$.dirty&1&&r(3,l=i.proposed.trafficData.flowOneWay!=""&&i.proposed.trafficData.flowTwoWay!=""&&i.proposed.trafficData.flowSharedUse!=""&&i.proposed.trafficData.trafficFlow!=""&&i.proposed.trafficData.speedLimit!=""&&i.proposed.trafficData.observedSpeed!=null&&i.proposed.trafficData.streetFunction!=""),n.$$.dirty&1&&r(1,t=ir(i.proposed.trafficData.speedLimit,i.proposed.trafficData.observedSpeed))},[i,t,a,l,o,s,f,p,d,h,$]}class ln extends ke{constructor(e){super(),ye(this,e,nn,rn,we,{valid:3})}}function an(n){let e,r;return e=new en({}),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,i){R(e,t,i),r=!0},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function sn(n){let e,r="Fill out all traffic data above to continue";return{c(){e=E("p"),e.textContent=r},l(t){e=N(t,"P",{"data-svelte-h":!0}),ve(e)!=="svelte-72a5ry"&&(e.textContent=r)},m(t,i){S(t,e,i)},p:Je,i:Je,o:Je,d(t){t&&_(e)}}}function on(n){let e,r,t,i;return e=new st({props:{label:"Preferred Cross-Section",open:!0,$$slots:{default:[fn]},$$scope:{ctx:n}}}),t=new st({props:{label:"Compromised Cross-Section",open:!0,$$slots:{default:[cn]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment),r=C(),M(t.$$.fragment)},l(l){W(e.$$.fragment,l),r=L(l),W(t.$$.fragment,l)},m(l,a){R(e,l,a),S(l,r,a),R(t,l,a),i=!0},p(l,a){const o={};a&66&&(o.$$scope={dirty:a,ctx:l}),e.$set(o);const s={};a&66&&(s.$$scope={dirty:a,ctx:l}),t.$set(s)},i(l){i||(y(e.$$.fragment,l),y(t.$$.fragment,l),i=!0)},o(l){T(e.$$.fragment,l),T(t.$$.fragment,l),i=!1},d(l){l&&_(r),P(e,l),P(t,l)}}}function fn(n){let e,r,t;function i(a){n[4](a)}let l={sectionType:"Preferred"};return n[1].proposed.desirableMinimumCrossSection!==void 0&&(l.streetFeaturesLeftToRight=n[1].proposed.desirableMinimumCrossSection),e=new ar({props:l}),ee.push(()=>ie(e,"streetFeaturesLeftToRight",i)),{c(){M(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,o){R(e,a,o),t=!0},p(a,o){const s={};!r&&o&2&&(r=!0,s.streetFeaturesLeftToRight=a[1].proposed.desirableMinimumCrossSection,ne(()=>r=!1)),e.$set(s)},i(a){t||(y(e.$$.fragment,a),t=!0)},o(a){T(e.$$.fragment,a),t=!1},d(a){P(e,a)}}}function er(n){let e,r;return e=new Oe({props:{$$slots:{default:[un]},$$scope:{ctx:n}}}),e.$on("click",n[2]),{c(){M(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,i){R(e,t,i),r=!0},p(t,i){const l={};i&64&&(l.$$scope={dirty:i,ctx:t}),e.$set(l)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function un(n){let e;return{c(){e=A("Copy Preferred")},l(r){e=H(r,"Copy Preferred")},m(r,t){S(r,e,t)},d(r){r&&_(e)}}}function cn(n){let e,r,t,i,l=n[1].proposed.absoluteMinimumCrossSection.length==0&&er(n);function a(s){n[5](s)}let o={sectionType:"Compromised"};return n[1].proposed.absoluteMinimumCrossSection!==void 0&&(o.streetFeaturesLeftToRight=n[1].proposed.absoluteMinimumCrossSection),r=new ar({props:o}),ee.push(()=>ie(r,"streetFeaturesLeftToRight",a)),{c(){l&&l.c(),e=C(),M(r.$$.fragment)},l(s){l&&l.l(s),e=L(s),W(r.$$.fragment,s)},m(s,f){l&&l.m(s,f),S(s,e,f),R(r,s,f),i=!0},p(s,f){s[1].proposed.absoluteMinimumCrossSection.length==0?l?(l.p(s,f),f&2&&y(l,1)):(l=er(s),l.c(),y(l,1),l.m(e.parentNode,e)):l&&(fe(),T(l,1,1,()=>{l=null}),ue());const p={};!t&&f&2&&(t=!0,p.streetFeaturesLeftToRight=s[1].proposed.absoluteMinimumCrossSection,ne(()=>t=!1)),r.$set(p)},i(s){i||(y(l),y(r.$$.fragment,s),i=!0)},o(s){T(l),T(r.$$.fragment,s),i=!1},d(s){s&&_(e),l&&l.d(s),P(r,s)}}}function dn(n){let e,r,t,i,l,a,o,s,f;function p(m){n[3](m)}let d={};n[0]!==void 0&&(d.valid=n[0]),e=new ln({props:d}),ee.push(()=>ie(e,"valid",p)),i=new st({props:{label:"Custom Street Features",$$slots:{default:[an]},$$scope:{ctx:n}}});const h=[on,sn],$=[];function b(m,D){return m[0]?0:1}return a=b(n),o=$[a]=h[a](n),{c(){M(e.$$.fragment),t=C(),M(i.$$.fragment),l=C(),o.c(),s=Pe()},l(m){W(e.$$.fragment,m),t=L(m),W(i.$$.fragment,m),l=L(m),o.l(m),s=Pe()},m(m,D){R(e,m,D),S(m,t,D),R(i,m,D),S(m,l,D),$[a].m(m,D),S(m,s,D),f=!0},p(m,[D]){const g={};!r&&D&1&&(r=!0,g.valid=m[0],ne(()=>r=!1)),e.$set(g);const O={};D&64&&(O.$$scope={dirty:D,ctx:m}),i.$set(O);let Q=a;a=b(m),a===Q?$[a].p(m,D):(fe(),T($[Q],1,1,()=>{$[Q]=null}),ue(),o=$[a],o?o.p(m,D):(o=$[a]=h[a](m),o.c()),y(o,1),o.m(s.parentNode,s))},i(m){f||(y(e.$$.fragment,m),y(i.$$.fragment,m),y(o),f=!0)},o(m){T(e.$$.fragment,m),T(i.$$.fragment,m),T(o),f=!1},d(m){m&&(_(t),_(l),_(s)),P(e,m),P(i,m),$[a].d(m)}}}function pn(n,e,r){let t;ze(n,Y,f=>r(1,t=f));let i=!1;function l(){tr(Y,t.proposed.absoluteMinimumCrossSection=JSON.parse(JSON.stringify(t.proposed.desirableMinimumCrossSection)),t)}function a(f){i=f,r(0,i)}function o(f){n.$$.not_equal(t.proposed.desirableMinimumCrossSection,f)&&(t.proposed.desirableMinimumCrossSection=f,Y.set(t))}function s(f){n.$$.not_equal(t.proposed.absoluteMinimumCrossSection,f)&&(t.proposed.absoluteMinimumCrossSection=f,Y.set(t))}return[i,t,l,a,o,s]}class In extends ke{constructor(e){super(),ye(this,e,pn,dn,we,{})}}export{In as component};
